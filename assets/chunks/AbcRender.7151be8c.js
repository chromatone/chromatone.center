import{ae as v,y as b,a1 as g,R as k,o as p,c as x,a as B,t as C,u as f,g as y,q as A,_ as E}from"./framework.a2b37741.js";import{_ as S}from"./SaveSvg.5404330a.js";import{n as w}from"./colors.238ec2c1.js";import{n as u}from"./theory.61e5aadb.js";import{s as I}from"./state.ee2ac4d1.js";const N={class:"flex"},R=["id"],D=v({__name:"AbcRender",props:{abc:{type:String,default:"ABCD"},staffwidth:{type:Number,default:300},responsive:{type:Boolean,default:!1},save:{type:Boolean,default:!1}},setup(r){const d=r,i=(Math.random()+1).toString(36).substring(7);b(()=>{g(()=>import("./index.12a2b023.js").then(o=>o.i),["assets/chunks/index.12a2b023.js","assets/chunks/commonjsHelpers.de833af9.js"]).then(o=>{k(()=>{if(o.renderAbc(i,d.abc,{responsive:d.responsive?"resize":null,scale:3,add_classes:!0,paddingbottom:10,paddingtop:0,staffwidth:300,clickListener:m}),!I.colorize)return;document.querySelectorAll("[data-name]").forEach(a=>{if(!(a instanceof HTMLElement))return;const e={pitch:0,acc:0,octave:4},{name:t}=a.dataset;if(t.length>3||/^\d+$/.test(t)||t=="bar")return;for(let s=0;s<t.length;s++)switch(u.findIndex(n=>{var c;return n==((c=t[s])==null?void 0:c.toUpperCase())}),t[s]){case"^":e.acc++;break;case"_":e.acc--;break;case",":e.octave--;break;default:const n=u.findIndex(c=>{var _;return c==((_=t[s])==null?void 0:_.toUpperCase())});if(n<0)break;e.pitch=n,a.dataset.pitch=String(n);break}const h=(e.pitch+e.acc+12)%12;a.style.fill=w(h,e.octave)})})})});function m(o,l,a,e,t){console.log(e==null?void 0:e.clickedName,e)}return(o,l)=>{const a=S;return p(),x("div",N,[B("div",{class:"abc-render",id:f(i)},C(r.abc),9,R),r.save?(p(),y(a,{key:0,svg:f(i)},null,8,["svg"])):A("",!0)])}}});const P=E(D,[["__scopeId","data-v-bee8ef98"]]);export{P as _};
