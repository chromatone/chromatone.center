import{u}from"./useAudio.5YNjaDmW.js";import"./tuner.YlcqrG_3.js";import"./audio.IBSde9Yq.js";import{f as d}from"./calculations.uITx2GSi.js";import"./colors.urjlGKwl.js";import"./midi.I20eapAS.js";import"./loop.au3d9-Vb.js";import"./mic.ZjEdLKK7.js";import"./midiRender.HiMVNSHU.js";import"./Midi.6fTTQsck.js";import"./tempo.1JiY7twl.js";import"./noise.OwLGc2wY.js";import"./index.RYxauP_R.js";import"./sequence.qabZthYP.js";import"./synth.CnmFLY9j.js";import"./theory.KAWplcFe.js";import{k as f,j as i,i as g,E as v,w,o as x,c as _,a as M}from"./framework.IUYQRuva.js";function b(s="main:fft"){const{FFTs:r,meters:a}=u(),t=f({sr:i(()=>{var e;return((e=a["main:sample-rate"])==null?void 0:e.max)||44100}),freq:i(()=>t.data[0].map((e,o)=>o*t.sr/(t.data[0].length||1))),colors:i(()=>t.freq.map(d)),data:i(()=>(r==null?void 0:r[s])||[[],[]]),total:i(()=>t.data[0].map((e,o)=>Math.log2(1+Math.abs(e)+Math.abs(t.data[1][o]))))});return{FFT:t}}const k={class:"flex is-group p-2 bg-light-200 dark-bg-dark-200 shadow rounded gap-4"},G={__name:"AnalysisFFT",props:{name:{default:"main:fft",type:String}},setup(s){const r=s,{FFT:a}=b(r.name);let t=g(null);v(e),w(a,e,{deep:!0});function e(){if(!t.value||!(a!=null&&a.total))return;let o=t.value.getContext("2d");o.clearRect(0,0,t.value.width,t.value.height);for(let l=0;l<a.total.length;l++){let p=a.total[l],n=Math.pow(p,2)*t.value.height/50,m=Math.log2(l+1)*t.value.width/Math.log2(a.total.length+1),c=Math.log2(l+2)*t.value.width/Math.log2(a.total.length+1)-m,h=t.value.height-n;o.fillStyle=a.colors[l],o.fillRect(m,h,c,n)}}return(o,l)=>(x(),_("div",k,[M("canvas",{class:"max-w-full",ref_key:"canvas",ref:t,height:"512",width:"2048"},null,512)]))}};export{G as _};
