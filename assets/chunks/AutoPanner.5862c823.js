import{x as d,o as e,G as l,q as f,J as m,T as g,P as s,K as h,a as c,L as y,r as _,N as x,g as q}from"./index.cccf7ef0.js";import{E as u}from"./audio.79f9134d.js";import{S}from"./Scale.f9a07a23.js";class r extends d{constructor(){super(Object.assign(e(r.getDefaults(),arguments))),this.name="Zero",this._gain=new l({context:this.context}),this.output=this._gain,this.input=void 0,f(this.context.getConstant(0),this._gain)}dispose(){return super.dispose(),m(this.context.getConstant(0),this._gain),this}}class i extends g{constructor(){super(e(i.getDefaults(),arguments,["frequency","min","max"])),this.name="LFO",this._stoppedValue=0,this._units="number",this.convert=!0,this._fromType=s.prototype._fromType,this._toType=s.prototype._toType,this._is=s.prototype._is,this._clampValue=s.prototype._clampValue;const t=e(i.getDefaults(),arguments,["frequency","min","max"]);this._oscillator=new h(t),this.frequency=this._oscillator.frequency,this._amplitudeGain=new l({context:this.context,gain:t.amplitude,units:"normalRange"}),this.amplitude=this._amplitudeGain.gain,this._stoppedSignal=new c({context:this.context,units:"audioRange",value:0}),this._zeros=new r({context:this.context}),this._a2g=new y({context:this.context}),this._scaler=this.output=new S({context:this.context,max:t.max,min:t.min}),this.units=t.units,this.min=t.min,this.max=t.max,this._oscillator.chain(this._amplitudeGain,this._a2g,this._scaler),this._zeros.connect(this._a2g),this._stoppedSignal.connect(this._a2g),_(this,["amplitude","frequency"]),this.phase=t.phase}static getDefaults(){return Object.assign(h.getDefaults(),{amplitude:1,frequency:"4n",max:1,min:0,type:"sine",units:"number"})}start(t){return t=this.toSeconds(t),this._stoppedSignal.setValueAtTime(0,t),this._oscillator.start(t),this}stop(t){return t=this.toSeconds(t),this._stoppedSignal.setValueAtTime(this._stoppedValue,t),this._oscillator.stop(t),this}sync(){return this._oscillator.sync(),this._oscillator.syncFrequency(),this}unsync(){return this._oscillator.unsync(),this._oscillator.unsyncFrequency(),this}_setStoppedValue(){this._stoppedValue=this._oscillator.getInitialValue(),this._stoppedSignal.value=this._stoppedValue}get min(){return this._toType(this._scaler.min)}set min(t){t=this._fromType(t),this._scaler.min=t}get max(){return this._toType(this._scaler.max)}set max(t){t=this._fromType(t),this._scaler.max=t}get type(){return this._oscillator.type}set type(t){this._oscillator.type=t,this._setStoppedValue()}get partials(){return this._oscillator.partials}set partials(t){this._oscillator.partials=t,this._setStoppedValue()}get phase(){return this._oscillator.phase}set phase(t){this._oscillator.phase=t,this._setStoppedValue()}get units(){return this._units}set units(t){const n=this.min,a=this.max;this._units=t,this.min=n,this.max=a}get state(){return this._oscillator.state}connect(t,n,a){return(t instanceof s||t instanceof c)&&(this.convert=t.convert,this.units=t.units),x(this,t,n,a),this}dispose(){return super.dispose(),this._oscillator.dispose(),this._stoppedSignal.dispose(),this._zeros.dispose(),this._scaler.dispose(),this._a2g.dispose(),this._amplitudeGain.dispose(),this.amplitude.dispose(),this}}class p extends u{constructor(t){super(t),this.name="LFOEffect",this._lfo=new i({context:this.context,frequency:t.frequency,amplitude:t.depth}),this.depth=this._lfo.amplitude,this.frequency=this._lfo.frequency,this.type=t.type,_(this,["frequency","depth"])}static getDefaults(){return Object.assign(u.getDefaults(),{frequency:1,type:"sine",depth:1})}start(t){return this._lfo.start(t),this}stop(t){return this._lfo.stop(t),this}sync(){return this._lfo.sync(),this}unsync(){return this._lfo.unsync(),this}get type(){return this._lfo.type}set type(t){this._lfo.type=t}dispose(){return super.dispose(),this._lfo.dispose(),this.frequency.dispose(),this.depth.dispose(),this}}class o extends p{constructor(){super(e(o.getDefaults(),arguments,["frequency"])),this.name="AutoPanner";const t=e(o.getDefaults(),arguments,["frequency"]);this._panner=new q({context:this.context,channelCount:t.channelCount}),this.connectEffect(this._panner),this._lfo.connect(this._panner.pan),this._lfo.min=-1,this._lfo.max=1}static getDefaults(){return Object.assign(p.getDefaults(),{channelCount:1})}dispose(){return super.dispose(),this._panner.dispose(),this}}export{o as A,p as L,i as a};
