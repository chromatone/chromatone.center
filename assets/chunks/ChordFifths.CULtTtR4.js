import{_ as U}from"./SvgRing.Bzjpg0HH.js";import{q as W,p as F,aP as B,u as H,b as G,W as O,v as a,x as i,z as u,E as M,D as e,B as j,F as k,A as w,X as $,Z as R,H as T,G as E}from"./framework.njvVDImA.js";import{n as X,r as Z,D as I,c as f,t as p,w as J,R as Q,T as Y,j as q,aR as ee,aS as te,aT as oe,aU as ne}from"./theme.DZiOYyfH.js";const se={class:"fullscreen-container select-none touch-manipulation h-full",id:"screen"},re={class:"w-full max-h-90svh min-h-80svh max-h-100svh",id:"fifths",style:{flex:"1 1 auto","touch-action":"none","user-select":"none","-webkit-user-select":"none","-webkit-touch-callout":"none"},version:"1.1",baseProfile:"full",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg","font-family":"Commissioner, sans-serif"},ae={fill:"currentColor",transform:"translate(50,50)","font-size":"3px","text-anchor":"middle","dominant-baseline":"middle","font-weight":"bold"},ie=["font-weight"],ce=["stroke-width"],le=["font-weight"],he=["stroke-width"],me=["onMousedown","onTouchstart","onMouseleave","onMouseup","onTouchend","onTouchcancel"],ue=["cx","cy","fill","onClick"],de=["onMousedown","onTouchstart","onMouseleave","onMouseup","onTouchend","onTouchcancel"],fe=["cx","cy","fill"],pe=["fill","x","y"],ve=["fill"],ye=["fill"],_e=["x","y"],xe={__name:"ChordFifths",setup(ge){F("Shift",s=>{r.seventh=!r.seventh}),B("Shift",s=>{r.seventh=!r.seventh}),F("Alt",s=>{r.main=!r.main}),B("Alt",s=>{r.main=!r.main});const S=[0,7,2,9,4,11,6,1,8,3,10,5],z=X.map((s,l)=>({name:s,pitch:l})),D=S.map(s=>z[s]),N=Z(S,-3).map(s=>z[s]),K={minor:D,major:N},c=H("tonic",0),b=H("scale-type","major"),r=G({seventh:!1,main:!0}),L={minor:[["VI","III","VII"],["iv","i","v"]],major:[["IV","I","V"],["ii","vi","iii"]]},P={minor:[0,3,7,12],major:[0,4,7,12],minor7:[0,3,7,10],major7:[0,4,7,11]};function v(s){return s=="minor"?1:0}function V(s){return s=="minor"?r.seventh?"m7":"m":r.seventh?"M7":""}function A(s,l="major",h){const x=V(l),_=q(s+x);return h!==void 0?ee([1+h,4+h]).map(te(x||"major",s+"3")):oe(_.notes.map(t=>ne(t)+4))}function C(s,l="major",h){Q(A(s,l,h))}function y(s,l="major",h){Y(A(s,l,h))}return(s,l)=>{const h=U,x=O("tooltip");return a(),i("div",se,[(a(),i("svg",re,[u("g",ae,[u("text",null,M(e(I).guessChords[0]),1)]),j((a(),i("g",{class:"cursor-pointer",transform:"translate(10,90)",onClick:l[0]||(l[0]=_=>r.seventh=!r.seventh)},[u("text",{fill:"currentColor","font-size":"3px","text-anchor":"middle","dominant-baseline":"middle",y:"0.3","font-weight":r.seventh?"bold":"normal"},"7",8,ie),u("circle",{r:"3",fill:"transparent",stroke:"currentColor","stroke-width":r.seventh?.8:.4},null,8,ce)])),[[x,"Hold SHIFT to toggle 7th chords",void 0,{top:!0}]]),j((a(),i("g",{class:"cursor-pointer",transform:"translate(90,90)",onClick:l[1]||(l[1]=_=>r.main=!r.main)},[u("text",{fill:"currentColor","font-size":"3px","text-anchor":"middle","dominant-baseline":"middle",y:"0.3","font-weight":r.main?"bold":"normal"},"A",8,le),u("circle",{r:"3",fill:"transparent",stroke:"currentColor","stroke-width":r.main?.8:.4},null,8,he)])),[[x,"Hold ALT to toggle chord inversions",void 0,{top:!0}]]),(a(),i(k,null,w(K,(_,t)=>u("g",{key:t},[(a(!0),i(k,null,w(_,(n,o)=>(a(),i("g",{class:"around",key:o,style:{cursor:"pointer"}},[$(h,{cx:50,cy:50,from:(o-1)/12*360+15,to:o/12*360+15,radius:40-12*v(t),thickness:10,op:Math.abs(e(c)-o)==11||Math.abs(e(c)-o)%12<=1?.8:.1,fill:Math.abs(e(c)-o)==11||Math.abs(e(c)-o)%12<=1?e(f)(n.pitch):e(f)(n.pitch,2,1)},null,8,["from","to","radius","op","fill"]),(a(!0),i(k,null,w(P[t+(r.seventh?"7":"")],(m,d)=>(a(),i("g",{class:"quadro",onMousedown:R(g=>C(n.name,t,d),["stop","prevent"]),onTouchstart:R(g=>C(n.name,t,d),["stop","prevent"]),onMouseleave:g=>y(n.name,t,d),onMouseup:g=>y(n.name,t,d),onTouchend:g=>y(n.name,t,d),onTouchcancel:g=>y(n.name,t,d),key:d},[$(h,{class:"transition",cx:50,cy:50,from:(o-1)/12*360+15+15*(d%2),to:o/12*360+15*(d%2),radius:40-12*v(t)-5*(d>1?0:1),thickness:5,op:Math.abs(e(c)-o)==11||Math.abs(e(c)-o)%12<=1?e(I).activeChroma[(n.pitch+m)%12]==1?.7:.3:e(I).activeChroma[(n.pitch+m)%12]==1?.2:.1,fill:Math.abs(e(c)-o)==11||Math.abs(e(c)-o)%12<=1?e(f)(n.pitch+m,5):e(f)(n.pitch+m,5,1)},null,8,["from","to","radius","op","fill"])],40,me))),128)),u("circle",{class:"transition opacity-20 hover-opacity-80",cx:e(p)(o,12,42-v(t)*26).x,cy:e(p)(o,12,42-v(t)*26).y,r:2,fill:e(f)(n.pitch,4,1,1),onClick:m=>{c.value=o,b.value=t}},null,8,ue),r.main?(a(),i("g",{key:0,onMousedown:m=>C(n.name,t),onTouchstart:m=>C(n.name,t),onMouseleave:m=>y(n.name,t),onMouseup:m=>y(n.name,t),onTouchend:m=>y(n.name,t),onTouchcancel:m=>y(n.name,t)},[u("circle",{class:"note opacity-80 hover-opacity-100",style:{transition:"all 300ms ease-out","transform-box":"fill-box","transform-origin":"center center"},cx:e(p)(o,12,35-v(t)*12).x,cy:e(p)(o,12,35-v(t)*12).y,r:"5",fill:Math.abs(e(c)-o)==11||Math.abs(e(c)-o)%12<=1?e(f)(n.pitch,4):e(f)(n.pitch,5,1,.5)},null,8,fe)],40,de)):T("",!0),u("text",{class:"pointer-events-none",style:{"user-select":"none",transition:"all 300ms ease"},fill:(e(J)(e(f)(n.pitch,4)).isDark(),"white"),"font-size":"3px","text-anchor":"middle","dominant-baseline":"middle",x:e(p)(o,12,35-v(t)*12).x,y:e(p)(o,12,35-v(t)*12).y+.5},M(n.name)+M(V(t)),9,pe)]))),128))])),64)),u("g",{class:"transition-all duration-300 ease-out",ref:"selector","transform-origin":"50 50",style:E({transform:`rotate(${e(c)/12*360}deg)`})},[$(h,{cx:50,cy:50,from:-2/12*360+15,to:1/12*360+15,radius:44.5,thickness:31,sWidth:.5,stroke:"#fff3",fill:"none"}),e(b)!="minor"?(a(),i("circle",{key:0,class:"transition-all duration-300 cursor-pointer",cx:50,cy:8,r:2,fill:e(f)(e(N)[e(c)].pitch,4)},null,8,ve)):T("",!0),e(b)!="major"?(a(),i("circle",{key:1,class:"transition-all duration-300 cursor-pointer",cx:50,cy:34,r:2,fill:e(f)(e(D)[e(c)].pitch,4)},null,8,ye)):T("",!0),(a(!0),i(k,null,w(L[e(b)],(_,t)=>(a(),i("g",{key:t},[(a(!0),i(k,null,w(_,(n,o)=>(a(),i("text",{class:"pointer-events-none",key:n,style:E([{"user-select":"none",transition:"all 300ms ease"},{transform:`rotate(${-e(c)*30}deg)`,transformOrigin:`${e(p)(o-1,12,42-t*26).x}px ${e(p)(o-1,12,42-t*26).y}px`}]),fill:"currentColor","font-size":"2.5px","text-anchor":"middle","dominant-baseline":"middle",x:e(p)(o-1,12,42-t*26).x,y:e(p)(o-1,12,42-t*26).y+.25},M(n),13,_e))),128))]))),128))],4)]))])}}},Ce=W(xe,[["__scopeId","data-v-81504e4e"]]);export{Ce as default};
