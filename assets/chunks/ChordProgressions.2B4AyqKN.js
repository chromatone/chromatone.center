import{j as g,o as l,c as m,a as d,t as _,g as t,b as k,A as z,F as C,r as N,l as A,_ as L,i as Z,k as j,z as X,v as J,f as q,n as F,e as T,V as K}from"./framework.IUYQRuva.js";import{r as O,a as U}from"./calculations.uITx2GSi.js";import{a as P,b as V,n as S,i as Q,d as D}from"./theory.KAWplcFe.js";import{g as w,n as $,c as H,b as B,d as b,a as ee}from"./colors.urjlGKwl.js";import{x as te,y as oe,z as ne,A as se,B as W,t as re,v as ae,p as ie}from"./index.dCqutn0Q.js";import{h as le,f as ce,d as ue}from"./midi.I20eapAS.js";import{F as me}from"./index.RYxauP_R.js";import{b as he}from"./synth.CnmFLY9j.js";import{w as R}from"./index.kn6emmbE.js";import{_ as de}from"./ChromaCircle.aG_MVYtA.js";import"./index.M7xXh-bS.js";import{_ as fe}from"./ChromaKeys.b0i_1a4Q.js";import{_ as pe}from"./ControlChoose.CF1xywiN.js";var Y={empty:!0,name:"",chordType:""},G={};function M(e){return typeof e=="string"?G[e]||(G[e]=we(e)):typeof e=="number"?M(E[e]||""):te(e)?ye(e):oe(e)?M(e.name):Y}function ye(e){return M(ne(e.alt)+E[e.step])}var ve=/^(#{1,}|b{1,}|x{1,}|)(IV|I{1,3}|VI{0,2}|iv|i{1,3}|vi{0,2})([^IViv]*)$/;function ge(e){return ve.exec(e)||["","","",""]}var xe="I II III IV V VI VII",E=xe.split(" ");function we(e){const[c,n,s,o]=ge(e);if(!s)return Y;const u=s.toUpperCase(),v=E.indexOf(u),a=se(n),h=1;return{empty:!1,name:c,roman:s,interval:W({step:v,alt:a,dir:h}).name,acc:n,chordType:o,alt:a,step:v,major:s===u,oct:0,dir:h}}function _e(e,c){return c.map(M).map(s=>re(e,W(s))+s.chordType)}function ke(e,c){return c.map(n=>{const[s,o]=le(n),u=ae(e,s);return M(W(u)).name+o})}var $e={fromRomanNumerals:_e,toRomanNumerals:ke};const be={class:"font-bold"},Ce={key:0,class:"text-sm"},Ne=["onMouseenter","onTouchstart"],Se={__name:"ChromaStack",props:{pitch:{type:Number,default:null},chroma:{type:String,default:"1001000100101"},mode:{type:String,default:"O"},tonic:{type:Number,default:0},roman:{type:String,default:""}},setup(e){const c=e,n="101101011010".split(""),s=g(()=>c.pitch===0||c.pitch?c.pitch:w.tonic),o=g(()=>P.get(c.chroma));g(()=>V.get(c.chroma));const u=g(()=>O(c.chroma.split(""),-s.value).map((f,r)=>({active:f=="1",pitch:r})).reverse());function v(h){h.active&&a(h.pitch)}function a(h=0,f=0){let r=me(h+57,"midi");ce(r.toNote()),he(r.toNote())}return(h,f)=>(l(),m("div",{class:"flex flex-col cursor-pointer select-none p-4 m-2 rounded-xl transition-all duration-300 ease w-full",style:z({backgroundColor:t(H)(e.chroma,s.value).hsl}),onMousedown:f[0]||(f[0]=r=>{t(B)(e.chroma,s.value),h.pressed=!0}),onTouchstart:f[1]||(f[1]=A(r=>{t(B)(e.chroma,s.value),h.pressed=!0},["prevent","stop"])),onTouchend:f[2]||(f[2]=r=>{t(b)(e.chroma,s.value),h.pressed=!1}),onTouchcancel:f[3]||(f[3]=r=>{t(b)(e.chroma,s.value),h.pressed=!1}),onMouseup:f[4]||(f[4]=r=>{t(b)(e.chroma,s.value),h.pressed=!1}),onMouseleave:f[5]||(f[5]=r=>{t(b)(e.chroma,s.value),h.pressed=!1})},[d("div",{class:"p-2 text-center mb-2 rounded-lg text-white",style:z({backgroundColor:t($)(s.value,3),color:t(R)(t($)(s.value),3).isDark()?"white":"black"})},[d("div",be,_(e.pitch===!1?"":typeof e.pitch=="string"?e.pitch:t(S)[s.value])+_(o.value.aliases[0]),1),c.roman?(l(),m("div",Ce,_(c.roman),1)):k("",!0)],4),(l(!0),m(C,null,N(u.value,(r,x)=>(l(),m("div",{class:"py-6px px-8 my-2px w-full text-sm text-center font-bold rounded transition-all duration-300 ease touch-none",onMouseenter:p=>v(r),onTouchstart:p=>v(r),key:x,style:z({backgroundColor:r.active?t($)(r.pitch):t(n)[r.pitch]==1?"hsla(0,0%,90%,0.8)":"hsla(0,0%,20%,0.6)"})},null,44,Ne))),128))],36))}},Ie={class:"select-none min-w-8em m-2",version:"1.1",baseProfile:"full",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",style:{"touch-action":"none"},"font-family":"Commissioner, sans-serif","text-anchor":"middle","dominant-baseline":"middle"},Te=["fill"],ze=["transform","onMousedown","opacity"],Me=["width","height","fill"],Pe=["y","x","fill"],Ve=["y","x"],Be=["x","y","width","height","fill","stroke"],qe=["x","y"],Ae=["x","y"],Oe={__name:"ChromaSquare",props:{pitch:{type:Number,default:null},chroma:{type:String,default:"1001000100101"},mode:{type:String,default:"O"},tonic:{type:Number,default:0},roman:{type:String,default:""},editable:{type:Boolean,default:!1}},emits:["update:chroma"],setup(e,{emit:c}){const n=c,s=e,o=Z(!1),u=j({width:100,height:100}),v=[[0,0],[1,0],[2,0],[3,0],[3,1],[3,2],[3,3],[2,3],[1,3],[0,3],[0,2],[0,1]],a=g(()=>s.pitch===0||s.pitch?s.pitch:w.tonic),h=g(()=>P.get(s.chroma));g(()=>V.get(s.chroma).name);function f(x,p=u.width,i=u.height){let y,I;return s.mode=="Z"?(y=x%4,I=Math.floor(x/4)+1,x>3&&x<8&&(y=3-y)):s.mode=="O"&&([y,I]=v[x]),`translate(${y*p/4},${I*i/4})`}function r(x){if(!s.editable)return;let p=[...s.chroma.split("")];p[x]=="1"?p[x]="0":p[x]="1",n("update:chroma",p.join(""))}return(x,p)=>(l(),m("svg",Ie,[d("rect",{width:"100",height:"100",rx:"8",opacity:"0.6",fill:t(H)(e.chroma,a.value).hsl},null,8,Te),(l(!0),m(C,null,N(e.chroma,(i,y)=>(l(),m("g",{class:"transition-all duration-400 ease-in-out cursor-pointer",key:y,transform:f(y),onMousedown:I=>r(y),opacity:i=="1"?1:.62},[d("rect",{class:"transition-all duration-200 ease-in-out",x:2,y:2,rx:"6",width:u.width/4-4,height:u.height/4-4,fill:t(R)(i=="1"?t($)((y+a.value)%12,3):t(S)[(y+t(w).tonic)%12].length!=2?"hsl(0,0%,85%)":"hsl(0,0%,40%)").toHex()},null,8,Me),i=="1"?(l(),m("text",{key:0,y:u.height/8+1,x:u.width/8,"font-size":8,"font-weight":"bold",fill:t(R)(t($)(y+t(w).tonic)).isDark()?"white":"black"},_(t(S)[(y+a.value)%12]),9,Pe)):k("",!0),i=="0"?(l(),m("text",{key:1,y:u.height/8+1,x:u.width/8,"font-size":"6px","font-weight":"normal",fill:"black",opacity:"0.5"},_(t(Q)[y]),9,Ve)):k("",!0)],40,ze))),128)),d("g",{class:X(["center cursor-pointer",{pressed:o.value}]),onMousedown:p[0]||(p[0]=A(i=>{t(B)(e.chroma,a.value),o.value=!0},["prevent","stop"])),onTouchstart:p[1]||(p[1]=A(i=>{t(B)(e.chroma,a.value),o.value=!0},["prevent","stop"])),onTouchend:p[2]||(p[2]=i=>{t(b)(e.chroma,a.value),o.value=!1}),onTouchcancel:p[3]||(p[3]=i=>{t(b)(e.chroma,a.value),o.value=!1}),onMouseup:p[4]||(p[4]=i=>{t(b)(e.chroma,a.value),o.value=!1}),onMouseleave:p[5]||(p[5]=i=>{t(b)(e.chroma,a.value),o.value=!1})},[d("rect",{class:"transition-all duration-400 ease-in-out",rx:"4",x:u.width/4+2,y:u.width/4+2,width:u.width/2-4,height:u.height/2-4,fill:e.pitch===!1?"none":t($)(a.value,3),stroke:t($)(t(w).tonic,3,1,.5),"stroke-width":"2"},null,8,Be),d("text",{x:u.width/2,y:u.height/2,"font-size":"10px","font-weight":"bold",fill:"white"},_(e.pitch===!1?"":typeof e.pitch=="string"?e.pitch:t(S)[a.value])+_(h.value.aliases[0]),9,qe),s.roman?(l(),m("text",{key:0,class:"function",x:u.width/2,y:u.height/2+13,"font-size":"8px","font-weight":"normal",fill:"white"},_(s.roman),9,Ae)):k("",!0)],34)]))}},Re=L(Oe,[["__scopeId","data-v-4838df49"]]),je={class:"flex justify-center"},We={class:"text-2x font-bold"},Ee=["viewBox"],Fe={id:"fretboard"},Ue=["x2"],De=["x1","y1","y2"],Ge=["cy","cx"],Le={id:"strings"},Xe=["transform"],He=["y2"],Ye=["transform"],Ze=["opacity","r","fill"],Je=["opacity"],Ke={__name:"ChordTab",props:{instrument:{type:String,default:"ukulele"},chroma:{type:String,default:"100000000000"},pitch:{type:Number,default:0},chordNotes:{type:Array,default:[]}},setup(e){const c=e,n={guitar:[7,0,5,10,2,7],ukulele:[10,3,7,0]},s=[3,5,7,10,12,15,17,19,21],o=j({strings:g(()=>n[c.instrument]),height:g(()=>(o.strings.length-1)*o.noteSize),width:g(()=>o.fretNum*o.fretWidth),isInChord:g(()=>ie.isNoteIncludedIn(c.chordNotes)),chroma:g(()=>O(c.chroma.split(""),-c.pitch)),scale:g(()=>O(w.chroma.split(""),-c.pitch)),title:g(()=>{var u,v;return(u=P.get(c.chroma))!=null&&u.empty?(v=V.get(c.chroma))!=null&&v.empty?"":V.get(c.chroma):P.get(c.chroma).aliases[0]}),noteSize:50,fretWidth:50,fretNum:5});return(u,v)=>(l(),m("div",{class:"flex flex-col items-center justify-center rounded-3xl py-2",style:z({backgroundColor:t(U)(e.pitch,3,1,.3)})},[d("div",je,[d("div",We,_(t(S)[e.pitch])+_(o.title),1)]),(l(),m("svg",{class:"max-h-3xl w-full my-2",id:"fretboard",version:"1.1",baseProfile:"full",viewBox:`-50 -50 ${o.height+100} ${o.width+60}`,xmlns:"http://www.w3.org/2000/svg","font-family":"Commissioner, sans-serif","font-size":"20px","text-anchor":"middle","dominant-baseline":"middle"},[d("g",Fe,[d("line",{stroke:"currentColor","stroke-width":"10",x1:"0",x2:o.height},null,8,Ue),(l(!0),m(C,null,N(o.fretNum,a=>(l(),m("g",{class:"fret",key:a},[d("line",{x1:o.height,y1:a*o.fretWidth,y2:a*o.fretWidth,stroke:"currentColor","stroke-width":"2",opacity:"0.5"},null,8,De),s.find(h=>h==a)?(l(),m("circle",{key:0,class:"inlay",cy:(a-.5)*o.fretWidth,cx:o.height/2,r:"5",opacity:"0.8",fill:"currentColor"},null,8,Ge)):k("",!0)]))),128))]),d("g",Le,[(l(!0),m(C,null,N(o.strings,(a,h)=>(l(),m("g",{class:"string",key:a,transform:`translate(${h*o.noteSize} 0)`},[d("line",{y2:o.width,"stroke-width":"4",stroke:"currentColor",opacity:"0.5"},null,8,He),(l(!0),m(C,null,N(o.fretNum+1,(f,r)=>(l(),m("g",{class:"note",key:f,transform:`translate(0 ${(r-.5)*o.fretWidth})`},[d("circle",{opacity:o.chroma[(r+a)%12]==1?1:0,r:o.noteSize/2-8,fill:t(U)(a+r,2)},null,8,Ze),d("text",{opacity:o.chroma[(r+a)%12]==1?1:0,fill:"white","font-size":"18","font-weight":"bold"},_(t(S)[(r+a)%12]),9,Je)],8,Ye))),128))],8,Xe))),128))])],8,Ee))],4))}},Qe=L(Ke,[["__scopeId","data-v-b82577cd"]]),et={class:"flex flex-col"},tt={class:"flex flex-wrap mx-auto my-4"},ot={class:"flex flex-col text-center mb-2 relative p-1"},nt={class:"text-2xl font-bold flex mx-auto items-center"},st=["href"],rt=d("div",{class:"i-la-wikipedia-w"},null,-1),at=[rt],it={class:"text-lg"},lt={class:"flex flex-wrap p-4 items-start",style:{flex:"1 1 6rem"}},ct=["onClick"],ut={class:"font-bold px-1 mb-1"},bt={__name:"ChordProgressions",props:{list:{type:Object,required:!0},initial:{type:String,default:"major"}},setup(e){const c=e,n=j({mode:J("progresions-mode","bars"),selected:c.initial,current:g(()=>c.list[n.selected]),scaleString:g(()=>`${w.note.name} ${c.list[n.selected].title}`.toLowerCase()),scale:g(()=>ee.get(n.scaleString))}),s={ukulele:"Ukulele",guitar:"Guitar",piano:"Piano",circles:"Circles",squares:"Squares",bars:"Bars"};function o(u){let v=u.split("-");return $e.fromRomanNumerals(w.note,v).map(f=>{let r=ue.get(f);return r.pitches=r.notes.map(x=>D[x]),r.tonicPitch=D[r.tonic],r})}return(u,v)=>{const a=pe,h=fe,f=Qe,r=de,x=Re,p=Se;return l(),m("div",et,[d("div",tt,[q(a,{modelValue:n.mode,"onUpdate:modelValue":v[0]||(v[0]=i=>n.mode=i),variants:s},null,8,["modelValue"])]),d("div",{class:"flex flex-wrap items-stretch my-2 p-8 gap-4 border-2 rounded-xl",style:z({borderColor:t($)(t(w).tonic,2),backgroundColor:t($)(t(w).tonic,2,1,.05)})},[q(h,{class:"w-20em mx-auto",chroma:t(w).chroma,style:{flex:"1 1 3rem"},pitch:t(w).tonic,"onUpdate:pitch":v[1]||(v[1]=i=>t(w).tonic=i)},{default:F(()=>[d("div",ot,[d("div",nt,_(t(w).note.name)+" "+_(n.current.title),1),n.current.link?(l(),m("a",{key:0,class:"p-1 text-2xl absolute right-2 top-2 rounded-full shadow-xl",href:n.current.link,target:"_blank"},at,8,st)):k("",!0),d("div",it,_(n.current.degrees),1)])]),_:1},8,["chroma","pitch"]),d("div",lt,[(l(!0),m(C,null,N(e.list,(i,y)=>(l(),m("button",{class:X(["text-button flex flex-col",{active:i==n.current}]),key:i,onClick:I=>{n.selected=y,t(w).chroma=n.scale.chroma}},[d("div",ut,_(i.title),1)],10,ct))),128))]),q(K,{name:"fade",mode:"out-in"},{default:F(()=>[(l(),m("div",{class:"flex flex-wrap gap-2",key:n.current},[(l(!0),m(C,null,N(o(n.current.degrees),(i,y)=>(l(),m("div",{class:"flex flex-col select-none max-w-16rem",style:{flex:"1 1 10rem"},key:y},[n.mode=="piano"?(l(),T(h,{key:0,class:"flex-1 p-1 min-w-150px",chroma:i.chroma,pitch:i.tonicPitch,roman:n.current.degrees.split("-")[y],playAll:!0},null,8,["chroma","pitch","roman"])):k("",!0),n.mode=="guitar"||n.mode=="ukulele"?(l(),T(f,{key:1,instrument:n.mode,chroma:i.chroma,pitch:i.tonicPitch},null,8,["instrument","chroma","pitch"])):k("",!0),n.mode=="circles"?(l(),T(r,{key:2,class:"min-w-8em",chroma:i.chroma,pitch:i.tonicPitch,type:n.current.degrees.split("-")[y]},null,8,["chroma","pitch","type"])):k("",!0),n.mode=="squares"?(l(),T(x,{key:3,class:"self-center my-4 min-w-8em",chroma:i.chroma,pitch:i.tonicPitch,roman:n.current.degrees.split("-")[y]},null,8,["chroma","pitch","roman"])):k("",!0),n.mode=="bars"?(l(),T(p,{key:4,class:"mx-8",chroma:i.chroma,pitch:i.tonicPitch,roman:n.current.degrees.split("-")[y]},null,8,["chroma","pitch","roman"])):k("",!0)]))),128))]))]),_:1})],4)])}}};export{bt as _};
