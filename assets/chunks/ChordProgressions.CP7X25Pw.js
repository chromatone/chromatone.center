import{c as $,x as i,y as d,A as v,G as y,E as e,I as k,H as M,F as N,B as q,S as z,q as G,r as H,b as U,z as F,u as I,P as B,U as j,T as S,aj as L}from"./framework.BjEhsXnI.js";import{g,a as A,b as D,r as R,n as P,c as b,w as V,d as E,p as T,s as _,F as X,e as Y,i as Z,f as J,h as K,j as Q,k as O,_ as W}from"./theme.PFdcTZPy.js";import{_ as ee}from"./ChromaCircle.D7YzJ0hO.js";import{_ as te}from"./ChordTab.DNQEz2VG.js";import{_ as oe}from"./ControlChoose.Bq_9Blv2.js";const se={class:"font-bold"},ne={key:0,class:"text-sm"},ae=["onMouseenter","onTouchstart"],le={__name:"ChromaStack",props:{pitch:{type:Number,default:null},chroma:{type:String,default:"1001000100101"},mode:{type:String,default:"O"},tonic:{type:Number,default:0},roman:{type:String,default:""}},setup(s){const x=s,o="101101011010".split(""),n=$(()=>x.pitch===0||x.pitch?x.pitch:g.tonic),w=$(()=>A(x.chroma));$(()=>D(x.chroma));const c=$(()=>R(x.chroma.split(""),-n.value).map((u,a)=>({active:u=="1",pitch:a})).reverse());function p(h){h.active&&m(h.pitch)}function m(h=0,u=0){let a=X(h+57,"midi");Y(a.toNote())}return(h,u)=>(i(),d("div",{class:"flex flex-col cursor-pointer select-none p-4 m-2 rounded-xl transition-all duration-300 ease w-full",style:M({backgroundColor:e(E)(s.chroma,n.value).hsl}),onMousedown:u[0]||(u[0]=a=>{e(T)(s.chroma,n.value),h.pressed=!0}),onTouchstart:u[1]||(u[1]=z(a=>{e(T)(s.chroma,n.value),h.pressed=!0},["prevent","stop"])),onTouchend:u[2]||(u[2]=a=>{e(_)(s.chroma,n.value),h.pressed=!1}),onTouchcancel:u[3]||(u[3]=a=>{e(_)(s.chroma,n.value),h.pressed=!1}),onMouseup:u[4]||(u[4]=a=>{e(_)(s.chroma,n.value),h.pressed=!1}),onMouseleave:u[5]||(u[5]=a=>{e(_)(s.chroma,n.value),h.pressed=!1})},[v("div",{class:"p-2 text-center mb-2 rounded-lg text-white",style:M({backgroundColor:e(b)(n.value,3),color:e(V)(e(b)(n.value),3).isDark()?"white":"black"})},[v("div",se,y(s.pitch===!1?"":typeof s.pitch=="string"?s.pitch:e(P)[n.value])+y(w.value.aliases[0]),1),x.roman?(i(),d("div",ne,y(x.roman),1)):k("",!0)],4),(i(!0),d(N,null,q(c.value,(a,f)=>(i(),d("div",{class:"py-6px px-8 my-2px w-full text-sm text-center font-bold rounded transition-all duration-300 ease touch-none",onMouseenter:l=>p(a),onTouchstart:l=>p(a),key:f,style:M({backgroundColor:a.active?e(b)(a.pitch):e(o)[a.pitch]==1?"hsla(0,0%,90%,0.8)":"hsla(0,0%,20%,0.6)"})},null,44,ae))),128))],36))}},re={class:"select-none min-w-8em m-2",version:"1.1",baseProfile:"full",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",style:{"touch-action":"none"},"font-family":"Commissioner, sans-serif","text-anchor":"middle","dominant-baseline":"middle"},ie=["fill"],ce=["transform","onMousedown","opacity"],ue=["width","height","fill"],me=["y","x","fill"],he=["y","x"],de=["x","y","width","height","fill","stroke"],fe=["x","y"],pe=["x","y"],ve={__name:"ChromaSquare",props:{pitch:{type:Number,default:null},chroma:{type:String,default:"1001000100101"},mode:{type:String,default:"O"},tonic:{type:Number,default:0},roman:{type:String,default:""},editable:{type:Boolean,default:!1}},emits:["update:chroma"],setup(s,{emit:x}){const o=x,n=s,w=H(!1),c=U({width:100,height:100}),p=[[0,0],[1,0],[2,0],[3,0],[3,1],[3,2],[3,3],[2,3],[1,3],[0,3],[0,2],[0,1]],m=$(()=>n.pitch===0||n.pitch?n.pitch:g.tonic),h=$(()=>A(n.chroma));$(()=>D(n.chroma).name);function u(f,l=c.width,t=c.height){let r,C;return n.mode=="Z"?(r=f%4,C=Math.floor(f/4)+1,f>3&&f<8&&(r=3-r)):n.mode=="O"&&([r,C]=p[f]),`translate(${r*l/4},${C*t/4})`}function a(f){if(!n.editable)return;let l=[...n.chroma.split("")];l[f]=="1"?l[f]="0":l[f]="1",o("update:chroma",l.join(""))}return(f,l)=>(i(),d("svg",re,[v("rect",{width:"100",height:"100",rx:"8",opacity:"0.6",fill:e(E)(s.chroma,m.value).hsl},null,8,ie),(i(!0),d(N,null,q(s.chroma,(t,r)=>(i(),d("g",{class:"transition-all duration-400 ease-in-out cursor-pointer",key:r,transform:u(r),onMousedown:C=>a(r),opacity:t=="1"?1:.62},[v("rect",{class:"transition-all duration-200 ease-in-out",x:2,y:2,rx:"6",width:c.width/4-4,height:c.height/4-4,fill:e(V)(t=="1"?e(b)((r+m.value)%12,3):e(P)[(r+e(g).tonic)%12].length!=2?"hsl(0,0%,85%)":"hsl(0,0%,40%)").toHex()},null,8,ue),t=="1"?(i(),d("text",{key:0,y:c.height/8+1,x:c.width/8,"font-size":8,"font-weight":"bold",fill:e(V)(e(b)(r+e(g).tonic)).isDark()?"white":"black"},y(e(P)[(r+m.value)%12]),9,me)):k("",!0),t=="0"?(i(),d("text",{key:1,y:c.height/8+1,x:c.width/8,"font-size":"6px","font-weight":"normal",fill:"black",opacity:"0.5"},y(e(Z)[r]),9,he)):k("",!0)],40,ce))),128)),v("g",{class:F(["center cursor-pointer",{pressed:w.value}]),onMousedown:l[0]||(l[0]=z(t=>{e(T)(s.chroma,m.value),w.value=!0},["prevent","stop"])),onTouchstart:l[1]||(l[1]=z(t=>{e(T)(s.chroma,m.value),w.value=!0},["prevent","stop"])),onTouchend:l[2]||(l[2]=t=>{e(_)(s.chroma,m.value),w.value=!1}),onTouchcancel:l[3]||(l[3]=t=>{e(_)(s.chroma,m.value),w.value=!1}),onMouseup:l[4]||(l[4]=t=>{e(_)(s.chroma,m.value),w.value=!1}),onMouseleave:l[5]||(l[5]=t=>{e(_)(s.chroma,m.value),w.value=!1})},[v("rect",{class:"transition-all duration-400 ease-in-out",rx:"4",x:c.width/4+2,y:c.width/4+2,width:c.width/2-4,height:c.height/2-4,fill:s.pitch===!1?"none":e(b)(m.value,3),stroke:e(b)(e(g).tonic,3,1,.5),"stroke-width":"2"},null,8,de),v("text",{x:c.width/2,y:c.height/2,"font-size":"10px","font-weight":"bold",fill:"white"},y(s.pitch===!1?"":typeof s.pitch=="string"?s.pitch:e(P)[m.value])+y(h.value.aliases[0]),9,fe),n.roman?(i(),d("text",{key:0,class:"function",x:c.width/2,y:c.height/2+13,"font-size":"8px","font-weight":"normal",fill:"white"},y(n.roman),9,pe)):k("",!0)],34)]))}},xe=G(ve,[["__scopeId","data-v-681852a2"]]),ge={class:"flex flex-col"},ye={class:"flex flex-col text-center mb-2 relative p-1"},we={class:"text-2xl font-bold flex mx-auto items-center"},ke=["href"],$e={class:"text-lg"},be={class:"flex flex-wrap p-4 items-start",style:{flex:"1 1 600px"}},_e={class:"flex flex-wrap my-4 w-full"},Ce=["onClick"],Se={class:"font-bold px-1 mb-1"},Be={__name:"ChordProgressions",props:{list:{type:Object,required:!0},initial:{type:String,default:"major"}},setup(s){const x=s,o=U({mode:I("progresions-mode","bars"),selected:x.initial,current:$(()=>x.list[o.selected]),scaleString:$(()=>`${g.note.name} ${x.list[o.selected].title}`.toLowerCase()),scale:$(()=>J(o.scaleString))}),n={ukulele:"Ukulele",guitar:"Guitar",piano:"Piano",circles:"Circles",squares:"Squares",bars:"Bars"};function w(c){let p=c.split("-");return K(g.note,p).map(u=>{let a=Q(u);return a.pitches=a.notes.map(f=>O[f]),a.tonicPitch=O[a.tonic],a})}return(c,p)=>{const m=W,h=oe,u=te,a=ee,f=xe,l=le;return i(),d("div",ge,[v("div",{class:"flex flex-wrap items-stretch p-8 gap-4",style:M({borderColor:e(b)(e(g).tonic,2),backgroundColor:e(b)(e(g).tonic,2,1,.05)})},[B(m,{class:"w-20em mx-auto",chroma:e(g).chroma,style:{flex:"1 1 100px"},pitch:e(g).tonic,"onUpdate:pitch":p[0]||(p[0]=t=>e(g).tonic=t)},{default:j(()=>[v("div",ye,[v("div",we,y(e(g).note.name)+" "+y(o.current.title),1),o.current.link?(i(),d("a",{key:0,class:"p-1 text-2xl absolute right-2 top-2 rounded-full shadow-xl",href:o.current.link,target:"_blank"},p[3]||(p[3]=[v("div",{class:"i-la-wikipedia-w"},null,-1)]),8,ke)):k("",!0),v("div",$e,y(o.current.degrees),1)])]),_:1},8,["chroma","pitch"]),v("div",be,[v("div",_e,[B(h,{modelValue:o.mode,"onUpdate:modelValue":p[1]||(p[1]=t=>o.mode=t),variants:n},null,8,["modelValue"])]),(i(!0),d(N,null,q(s.list,(t,r)=>(i(),d("button",{class:F(["text-button flex flex-col",{active:t==o.current}]),key:t,onClick:C=>{o.selected=r,e(g).chroma=o.scale.chroma}},[v("div",Se,y(t.title),1)],10,Ce))),128))]),B(L,{name:"fade",mode:"out-in"},{default:j(()=>[(i(),d("div",{class:"flex flex-wrap gap-2 w-full",key:o.current},[(i(!0),d(N,null,q(w(o.current.degrees),(t,r)=>(i(),d("div",{class:"flex flex-col select-none max-w-16rem",style:{flex:"1 1 10rem"},key:r},[o.mode=="piano"?(i(),S(m,{key:0,class:"flex-1 p-1 min-w-150px",chroma:t.chroma,pitch:t.tonicPitch,roman:o.current.degrees.split("-")[r],playAll:!0},null,8,["chroma","pitch","roman"])):k("",!0),o.mode=="guitar"||o.mode=="ukulele"?(i(),S(u,{key:1,instrument:o.mode,"onUpdate:instrument":p[2]||(p[2]=C=>o.mode=C),chroma:t.chroma,pitch:t.tonicPitch},null,8,["instrument","chroma","pitch"])):k("",!0),o.mode=="circles"?(i(),S(a,{key:2,class:"min-w-8em",chroma:t.chroma,pitch:t.tonicPitch,type:o.current.degrees.split("-")[r]},null,8,["chroma","pitch","type"])):k("",!0),o.mode=="squares"?(i(),S(f,{key:3,class:"self-center my-4 min-w-8em",chroma:t.chroma,pitch:t.tonicPitch,roman:o.current.degrees.split("-")[r]},null,8,["chroma","pitch","roman"])):k("",!0),o.mode=="bars"?(i(),S(l,{key:4,class:"mx-8",chroma:t.chroma,pitch:t.tonicPitch,roman:o.current.degrees.split("-")[r]},null,8,["chroma","pitch","roman"])):k("",!0)]))),128))]))]),_:1})],4)])}}};export{Be as _};
