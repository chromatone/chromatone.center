import{e as $,B as r,C as h,E as p,J as g,u as e,L as k,K as M,F as N,G as T,U as z,z as E,a as F,r as j,D,R as q,W as O,V as S,ab as G}from"./framework.B_b_ZswS.js";import{g as x,a as L,b as R,r as H,n as P,c as b,w as V,d as A,p as B,s as _,e as I,i as J,u as K,f as W,h as X,j as Y,k as U,_ as Z}from"./theme.BPLC3g7L.js";import{_ as Q}from"./ChromaCircle.DUWDAfU-.js";import{_ as ee}from"./ChordTab.CGId8Kni.js";import{_ as te}from"./ControlChoose.D4zFcnAf.js";const oe={class:"font-bold"},se={key:0,class:"text-sm"},ne=["onMouseenter","onTouchstart"],ae={__name:"ChromaStack",props:{pitch:{type:Number,default:null},chroma:{type:String,default:"1001000100101"},mode:{type:String,default:"O"},tonic:{type:Number,default:0},roman:{type:String,default:""}},setup(s){const v=s,o="101101011010".split(""),a=$(()=>v.pitch===0||v.pitch?v.pitch:x.tonic),y=$(()=>L(v.chroma));$(()=>R(v.chroma));const i=$(()=>H(v.chroma.split(""),-a.value).map((u,m)=>({active:u=="1",pitch:m})).reverse());function f(n){n.active&&I(n.pitch+57)}return(n,u)=>(r(),h("div",{class:"flex flex-col cursor-pointer select-none p-4 m-2 rounded-xl transition-all duration-300 ease w-full",style:M({backgroundColor:e(A)(s.chroma,a.value).hsl}),onMousedown:u[0]||(u[0]=m=>{e(B)(s.chroma,a.value),n.pressed=!0}),onTouchstart:u[1]||(u[1]=z(m=>{e(B)(s.chroma,a.value),n.pressed=!0},["prevent","stop"])),onTouchend:u[2]||(u[2]=m=>{e(_)(s.chroma,a.value),n.pressed=!1}),onTouchcancel:u[3]||(u[3]=m=>{e(_)(s.chroma,a.value),n.pressed=!1}),onMouseup:u[4]||(u[4]=m=>{e(_)(s.chroma,a.value),n.pressed=!1}),onMouseleave:u[5]||(u[5]=m=>{e(_)(s.chroma,a.value),n.pressed=!1})},[p("div",{class:"p-2 text-center mb-2 rounded-lg text-white",style:M({backgroundColor:e(b)(a.value,3),color:e(V)(e(b)(a.value),3).isDark()?"white":"black"})},[p("div",oe,g(s.pitch===!1?"":typeof s.pitch=="string"?s.pitch:e(P)[a.value])+g(y.value.aliases[0]),1),v.roman?(r(),h("div",se,g(v.roman),1)):k("",!0)],4),(r(!0),h(N,null,T(i.value,(m,w)=>(r(),h("div",{class:"py-6px px-8 my-2px w-full text-sm text-center font-bold rounded transition-all duration-300 ease touch-none",onMouseenter:d=>f(m),onTouchstart:d=>f(m),key:w,style:M({backgroundColor:m.active?e(b)(m.pitch):e(o)[m.pitch]==1?"hsla(0,0%,90%,0.8)":"hsla(0,0%,20%,0.6)"})},null,44,ne))),128))],36))}},le={class:"select-none min-w-8em m-2",version:"1.1",baseProfile:"full",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",style:{"touch-action":"none"},"font-family":"Commissioner, sans-serif","text-anchor":"middle","dominant-baseline":"middle"},re=["fill"],ie=["transform","onMousedown","opacity"],ce=["width","height","fill"],ue=["y","x","fill"],me=["y","x"],he=["x","y","width","height","fill","stroke"],de=["x","y"],fe=["x","y"],pe={__name:"ChromaSquare",props:{pitch:{type:Number,default:null},chroma:{type:String,default:"1001000100101"},mode:{type:String,default:"O"},tonic:{type:Number,default:0},roman:{type:String,default:""},editable:{type:Boolean,default:!1}},emits:["update:chroma"],setup(s,{emit:v}){const o=v,a=s,y=F(!1),i=j({width:100,height:100}),f=[[0,0],[1,0],[2,0],[3,0],[3,1],[3,2],[3,3],[2,3],[1,3],[0,3],[0,2],[0,1]],n=$(()=>a.pitch===0||a.pitch?a.pitch:x.tonic),u=$(()=>L(a.chroma));$(()=>R(a.chroma).name);function m(d,c=i.width,t=i.height){let l,C;return a.mode=="Z"?(l=d%4,C=Math.floor(d/4)+1,d>3&&d<8&&(l=3-l)):a.mode=="O"&&([l,C]=f[d]),`translate(${l*c/4},${C*t/4})`}function w(d){if(!a.editable)return;let c=[...a.chroma.split("")];c[d]=="1"?c[d]="0":c[d]="1",o("update:chroma",c.join(""))}return(d,c)=>(r(),h("svg",le,[p("rect",{width:"100",height:"100",rx:"8",opacity:"0.6",fill:e(A)(s.chroma,n.value).hsl},null,8,re),(r(!0),h(N,null,T(s.chroma,(t,l)=>(r(),h("g",{class:"transition-all duration-400 ease-in-out cursor-pointer",key:l,transform:m(l),onMousedown:C=>w(l),opacity:t=="1"?1:.62},[p("rect",{class:"transition-all duration-200 ease-in-out",x:2,y:2,rx:"6",width:i.width/4-4,height:i.height/4-4,fill:e(V)(t=="1"?e(b)((l+n.value)%12,3):e(P)[(l+e(x).tonic)%12].length!=2?"hsl(0,0%,85%)":"hsl(0,0%,40%)").toHex()},null,8,ce),t=="1"?(r(),h("text",{key:0,y:i.height/8+1,x:i.width/8,"font-size":8,"font-weight":"bold",fill:e(V)(e(b)(l+e(x).tonic)).isDark()?"white":"black"},g(e(P)[(l+n.value)%12]),9,ue)):k("",!0),t=="0"?(r(),h("text",{key:1,y:i.height/8+1,x:i.width/8,"font-size":"6px","font-weight":"normal",fill:"black",opacity:"0.5"},g(e(J)[l]),9,me)):k("",!0)],40,ie))),128)),p("g",{class:D(["center cursor-pointer",{pressed:y.value}]),onMousedown:c[0]||(c[0]=z(t=>{e(B)(s.chroma,n.value),y.value=!0},["prevent","stop"])),onTouchstart:c[1]||(c[1]=z(t=>{e(B)(s.chroma,n.value),y.value=!0},["prevent","stop"])),onTouchend:c[2]||(c[2]=t=>{e(_)(s.chroma,n.value),y.value=!1}),onTouchcancel:c[3]||(c[3]=t=>{e(_)(s.chroma,n.value),y.value=!1}),onMouseup:c[4]||(c[4]=t=>{e(_)(s.chroma,n.value),y.value=!1}),onMouseleave:c[5]||(c[5]=t=>{e(_)(s.chroma,n.value),y.value=!1})},[p("rect",{class:"transition-all duration-400 ease-in-out",rx:"4",x:i.width/4+2,y:i.width/4+2,width:i.width/2-4,height:i.height/2-4,fill:s.pitch===!1?"none":e(b)(n.value,3),stroke:e(b)(e(x).tonic,3,1,.5),"stroke-width":"2"},null,8,he),p("text",{x:i.width/2,y:i.height/2,"font-size":"10px","font-weight":"bold",fill:"white"},g(s.pitch===!1?"":typeof s.pitch=="string"?s.pitch:e(P)[n.value])+g(u.value.aliases[0]),9,de),a.roman?(r(),h("text",{key:0,class:"function",x:i.width/2,y:i.height/2+13,"font-size":"8px","font-weight":"normal",fill:"white"},g(a.roman),9,fe)):k("",!0)],34)]))}},ve=E(pe,[["__scopeId","data-v-681852a2"]]),xe={class:"flex flex-col"},ge={class:"flex flex-col text-center mb-2 relative p-1"},ye={class:"text-2xl font-bold flex mx-auto items-center"},we=["href"],ke={class:"text-lg"},$e={class:"flex flex-wrap p-4 items-start",style:{flex:"1 1 600px"}},be={class:"flex flex-wrap my-4 w-full"},_e=["onClick"],Ce={class:"font-bold px-1 mb-1"},Be={__name:"ChordProgressions",props:{list:{type:Object,required:!0},initial:{type:String,default:"major"}},setup(s){const v=s,o=j({mode:K("progresions-mode","bars"),selected:v.initial,current:$(()=>v.list[o.selected]),scaleString:$(()=>`${x.note.name} ${v.list[o.selected].title}`.toLowerCase()),scale:$(()=>W(o.scaleString))}),a={ukulele:"Ukulele",guitar:"Guitar",piano:"Piano",circles:"Circles",squares:"Squares",bars:"Bars"};function y(i){let f=i.split("-");return X(x.note,f).map(m=>{let w=Y(m);return w.pitches=w.notes.map(d=>U[d]),w.tonicPitch=U[w.tonic],w})}return(i,f)=>{const n=Z,u=te,m=ee,w=Q,d=ve,c=ae;return r(),h("div",xe,[p("div",{class:"flex flex-wrap items-stretch p-8 gap-4",style:M({borderColor:e(b)(e(x).tonic,2),backgroundColor:e(b)(e(x).tonic,2,1,.05)})},[q(n,{class:"w-20em mx-auto",chroma:e(x).chroma,style:{flex:"1 1 100px"},pitch:e(x).tonic,"onUpdate:pitch":f[0]||(f[0]=t=>e(x).tonic=t)},{default:O(()=>[p("div",ge,[p("div",ye,g(e(x).note.name)+" "+g(o.current.title),1),o.current.link?(r(),h("a",{key:0,class:"p-1 text-2xl absolute right-2 top-2 rounded-full shadow-xl",href:o.current.link,target:"_blank"},f[3]||(f[3]=[p("div",{class:"i-la-wikipedia-w"},null,-1)]),8,we)):k("",!0),p("div",ke,g(o.current.degrees),1)])]),_:1},8,["chroma","pitch"]),p("div",$e,[p("div",be,[q(u,{modelValue:o.mode,"onUpdate:modelValue":f[1]||(f[1]=t=>o.mode=t),variants:a},null,8,["modelValue"])]),(r(!0),h(N,null,T(s.list,(t,l)=>(r(),h("button",{class:D(["text-button flex flex-col",{active:t==o.current}]),key:t,onClick:C=>{o.selected=l,e(x).chroma=o.scale.chroma}},[p("div",Ce,g(t.title),1)],10,_e))),128))]),q(G,{name:"fade",mode:"out-in"},{default:O(()=>[(r(),h("div",{class:"flex flex-wrap gap-2 w-full",key:o.current},[(r(!0),h(N,null,T(y(o.current.degrees),(t,l)=>(r(),h("div",{class:"flex flex-col select-none max-w-16rem",style:{flex:"1 1 10rem"},key:l},[o.mode=="piano"?(r(),S(n,{key:0,class:"flex-1 p-1 min-w-150px",chroma:t.chroma,pitch:t.tonicPitch,roman:o.current.degrees.split("-")[l],playAll:!0},null,8,["chroma","pitch","roman"])):k("",!0),o.mode=="guitar"||o.mode=="ukulele"?(r(),S(m,{key:1,instrument:o.mode,"onUpdate:instrument":f[2]||(f[2]=C=>o.mode=C),chroma:t.chroma,pitch:t.tonicPitch},null,8,["instrument","chroma","pitch"])):k("",!0),o.mode=="circles"?(r(),S(w,{key:2,class:"min-w-8em",chroma:t.chroma,pitch:t.tonicPitch,type:o.current.degrees.split("-")[l]},null,8,["chroma","pitch","type"])):k("",!0),o.mode=="squares"?(r(),S(d,{key:3,class:"self-center my-4 min-w-8em",chroma:t.chroma,pitch:t.tonicPitch,roman:o.current.degrees.split("-")[l]},null,8,["chroma","pitch","roman"])):k("",!0),o.mode=="bars"?(r(),S(c,{key:4,class:"mx-8",chroma:t.chroma,pitch:t.tonicPitch,roman:o.current.degrees.split("-")[l]},null,8,["chroma","pitch","roman"])):k("",!0)]))),128))]))]),_:1})],4)])}}};export{Be as _};
