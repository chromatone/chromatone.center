import{c as b,x as i,y as d,A as p,G as g,E as e,I as k,H as M,F as P,B as q,a0 as z,q as G,r as H,b as F,z as A,u as I,X as B,N as V,M as S,ao as L}from"./framework.nFF1SKKu.js";import{g as x,a as D,b as U,r as R,n as N,c as $,w as O,d as E,p as T,s as _,F as X,m as Y,e as Z,i as J,f as K,h as Q,j as W,k as j,_ as ee}from"./theme.ByhpzkMR.js";import{_ as te}from"./ChromaCircle.Dle4n9zw.js";import{_ as oe}from"./ChordTab.xDqW-qCS.js";import{_ as se}from"./ControlChoose.B37gYC29.js";const ne={class:"font-bold"},ae={key:0,class:"text-sm"},le=["onMouseenter","onTouchstart"],re={__name:"ChromaStack",props:{pitch:{type:Number,default:null},chroma:{type:String,default:"1001000100101"},mode:{type:String,default:"O"},tonic:{type:Number,default:0},roman:{type:String,default:""}},setup(s){const v=s,o="101101011010".split(""),a=b(()=>v.pitch===0||v.pitch?v.pitch:x.tonic),y=b(()=>D(v.chroma));b(()=>U(v.chroma));const c=b(()=>R(v.chroma.split(""),-a.value).map((u,n)=>({active:u=="1",pitch:n})).reverse());function w(h){h.active&&m(h.pitch)}function m(h=0,u=0){let n=X(h+57,"midi");Y(n.toNote()),Z(n.toNote())}return(h,u)=>(i(),d("div",{class:"flex flex-col cursor-pointer select-none p-4 m-2 rounded-xl transition-all duration-300 ease w-full",style:M({backgroundColor:e(E)(s.chroma,a.value).hsl}),onMousedown:u[0]||(u[0]=n=>{e(T)(s.chroma,a.value),h.pressed=!0}),onTouchstart:u[1]||(u[1]=z(n=>{e(T)(s.chroma,a.value),h.pressed=!0},["prevent","stop"])),onTouchend:u[2]||(u[2]=n=>{e(_)(s.chroma,a.value),h.pressed=!1}),onTouchcancel:u[3]||(u[3]=n=>{e(_)(s.chroma,a.value),h.pressed=!1}),onMouseup:u[4]||(u[4]=n=>{e(_)(s.chroma,a.value),h.pressed=!1}),onMouseleave:u[5]||(u[5]=n=>{e(_)(s.chroma,a.value),h.pressed=!1})},[p("div",{class:"p-2 text-center mb-2 rounded-lg text-white",style:M({backgroundColor:e($)(a.value,3),color:e(O)(e($)(a.value),3).isDark()?"white":"black"})},[p("div",ne,g(s.pitch===!1?"":typeof s.pitch=="string"?s.pitch:e(N)[a.value])+g(y.value.aliases[0]),1),v.roman?(i(),d("div",ae,g(v.roman),1)):k("",!0)],4),(i(!0),d(P,null,q(c.value,(n,f)=>(i(),d("div",{class:"py-6px px-8 my-2px w-full text-sm text-center font-bold rounded transition-all duration-300 ease touch-none",onMouseenter:l=>w(n),onTouchstart:l=>w(n),key:f,style:M({backgroundColor:n.active?e($)(n.pitch):e(o)[n.pitch]==1?"hsla(0,0%,90%,0.8)":"hsla(0,0%,20%,0.6)"})},null,44,le))),128))],36))}},ie={class:"select-none min-w-8em m-2",version:"1.1",baseProfile:"full",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",style:{"touch-action":"none"},"font-family":"Commissioner, sans-serif","text-anchor":"middle","dominant-baseline":"middle"},ce=["fill"],ue=["transform","onMousedown","opacity"],me=["width","height","fill"],he=["y","x","fill"],de=["y","x"],fe=["x","y","width","height","fill","stroke"],pe=["x","y"],ve=["x","y"],xe={__name:"ChromaSquare",props:{pitch:{type:Number,default:null},chroma:{type:String,default:"1001000100101"},mode:{type:String,default:"O"},tonic:{type:Number,default:0},roman:{type:String,default:""},editable:{type:Boolean,default:!1}},emits:["update:chroma"],setup(s,{emit:v}){const o=v,a=s,y=H(!1),c=F({width:100,height:100}),w=[[0,0],[1,0],[2,0],[3,0],[3,1],[3,2],[3,3],[2,3],[1,3],[0,3],[0,2],[0,1]],m=b(()=>a.pitch===0||a.pitch?a.pitch:x.tonic),h=b(()=>D(a.chroma));b(()=>U(a.chroma).name);function u(f,l=c.width,t=c.height){let r,C;return a.mode=="Z"?(r=f%4,C=Math.floor(f/4)+1,f>3&&f<8&&(r=3-r)):a.mode=="O"&&([r,C]=w[f]),`translate(${r*l/4},${C*t/4})`}function n(f){if(!a.editable)return;let l=[...a.chroma.split("")];l[f]=="1"?l[f]="0":l[f]="1",o("update:chroma",l.join(""))}return(f,l)=>(i(),d("svg",ie,[p("rect",{width:"100",height:"100",rx:"8",opacity:"0.6",fill:e(E)(s.chroma,m.value).hsl},null,8,ce),(i(!0),d(P,null,q(s.chroma,(t,r)=>(i(),d("g",{class:"transition-all duration-400 ease-in-out cursor-pointer",key:r,transform:u(r),onMousedown:C=>n(r),opacity:t=="1"?1:.62},[p("rect",{class:"transition-all duration-200 ease-in-out",x:2,y:2,rx:"6",width:c.width/4-4,height:c.height/4-4,fill:e(O)(t=="1"?e($)((r+m.value)%12,3):e(N)[(r+e(x).tonic)%12].length!=2?"hsl(0,0%,85%)":"hsl(0,0%,40%)").toHex()},null,8,me),t=="1"?(i(),d("text",{key:0,y:c.height/8+1,x:c.width/8,"font-size":8,"font-weight":"bold",fill:e(O)(e($)(r+e(x).tonic)).isDark()?"white":"black"},g(e(N)[(r+m.value)%12]),9,he)):k("",!0),t=="0"?(i(),d("text",{key:1,y:c.height/8+1,x:c.width/8,"font-size":"6px","font-weight":"normal",fill:"black",opacity:"0.5"},g(e(J)[r]),9,de)):k("",!0)],40,ue))),128)),p("g",{class:A(["center cursor-pointer",{pressed:y.value}]),onMousedown:l[0]||(l[0]=z(t=>{e(T)(s.chroma,m.value),y.value=!0},["prevent","stop"])),onTouchstart:l[1]||(l[1]=z(t=>{e(T)(s.chroma,m.value),y.value=!0},["prevent","stop"])),onTouchend:l[2]||(l[2]=t=>{e(_)(s.chroma,m.value),y.value=!1}),onTouchcancel:l[3]||(l[3]=t=>{e(_)(s.chroma,m.value),y.value=!1}),onMouseup:l[4]||(l[4]=t=>{e(_)(s.chroma,m.value),y.value=!1}),onMouseleave:l[5]||(l[5]=t=>{e(_)(s.chroma,m.value),y.value=!1})},[p("rect",{class:"transition-all duration-400 ease-in-out",rx:"4",x:c.width/4+2,y:c.width/4+2,width:c.width/2-4,height:c.height/2-4,fill:s.pitch===!1?"none":e($)(m.value,3),stroke:e($)(e(x).tonic,3,1,.5),"stroke-width":"2"},null,8,fe),p("text",{x:c.width/2,y:c.height/2,"font-size":"10px","font-weight":"bold",fill:"white"},g(s.pitch===!1?"":typeof s.pitch=="string"?s.pitch:e(N)[m.value])+g(h.value.aliases[0]),9,pe),a.roman?(i(),d("text",{key:0,class:"function",x:c.width/2,y:c.height/2+13,"font-size":"8px","font-weight":"normal",fill:"white"},g(a.roman),9,ve)):k("",!0)],34)]))}},ge=G(xe,[["__scopeId","data-v-090dc4c0"]]),ye={class:"flex flex-col"},we={class:"flex flex-col text-center mb-2 relative p-1"},ke={class:"text-2xl font-bold flex mx-auto items-center"},be=["href"],$e=p("div",{class:"i-la-wikipedia-w"},null,-1),_e=[$e],Ce={class:"text-lg"},Se={class:"flex flex-wrap p-4 items-start",style:{flex:"1 1 600px"}},Me={class:"flex flex-wrap my-4 w-full"},Ne=["onClick"],Pe={class:"font-bold px-1 mb-1"},Ve={__name:"ChordProgressions",props:{list:{type:Object,required:!0},initial:{type:String,default:"major"}},setup(s){const v=s,o=F({mode:I("progresions-mode","bars"),selected:v.initial,current:b(()=>v.list[o.selected]),scaleString:b(()=>`${x.note.name} ${v.list[o.selected].title}`.toLowerCase()),scale:b(()=>K(o.scaleString))}),a={ukulele:"Ukulele",guitar:"Guitar",piano:"Piano",circles:"Circles",squares:"Squares",bars:"Bars"};function y(c){let w=c.split("-");return Q(x.note,w).map(u=>{let n=W(u);return n.pitches=n.notes.map(f=>j[f]),n.tonicPitch=j[n.tonic],n})}return(c,w)=>{const m=ee,h=se,u=oe,n=te,f=ge,l=re;return i(),d("div",ye,[p("div",{class:"flex flex-wrap items-stretch p-8 gap-4",style:M({borderColor:e($)(e(x).tonic,2),backgroundColor:e($)(e(x).tonic,2,1,.05)})},[B(m,{class:"w-20em mx-auto",chroma:e(x).chroma,style:{flex:"1 1 100px"},pitch:e(x).tonic,"onUpdate:pitch":w[0]||(w[0]=t=>e(x).tonic=t)},{default:V(()=>[p("div",we,[p("div",ke,g(e(x).note.name)+" "+g(o.current.title),1),o.current.link?(i(),d("a",{key:0,class:"p-1 text-2xl absolute right-2 top-2 rounded-full shadow-xl",href:o.current.link,target:"_blank"},_e,8,be)):k("",!0),p("div",Ce,g(o.current.degrees),1)])]),_:1},8,["chroma","pitch"]),p("div",Se,[p("div",Me,[B(h,{modelValue:o.mode,"onUpdate:modelValue":w[1]||(w[1]=t=>o.mode=t),variants:a},null,8,["modelValue"])]),(i(!0),d(P,null,q(s.list,(t,r)=>(i(),d("button",{class:A(["text-button flex flex-col",{active:t==o.current}]),key:t,onClick:C=>{o.selected=r,e(x).chroma=o.scale.chroma}},[p("div",Pe,g(t.title),1)],10,Ne))),128))]),B(L,{name:"fade",mode:"out-in"},{default:V(()=>[(i(),d("div",{class:"flex flex-wrap gap-2 w-full",key:o.current},[(i(!0),d(P,null,q(y(o.current.degrees),(t,r)=>(i(),d("div",{class:"flex flex-col select-none max-w-16rem",style:{flex:"1 1 10rem"},key:r},[o.mode=="piano"?(i(),S(m,{key:0,class:"flex-1 p-1 min-w-150px",chroma:t.chroma,pitch:t.tonicPitch,roman:o.current.degrees.split("-")[r],playAll:!0},null,8,["chroma","pitch","roman"])):k("",!0),o.mode=="guitar"||o.mode=="ukulele"?(i(),S(u,{key:1,instrument:o.mode,chroma:t.chroma,pitch:t.tonicPitch},null,8,["instrument","chroma","pitch"])):k("",!0),o.mode=="circles"?(i(),S(n,{key:2,class:"min-w-8em",chroma:t.chroma,pitch:t.tonicPitch,type:o.current.degrees.split("-")[r]},null,8,["chroma","pitch","type"])):k("",!0),o.mode=="squares"?(i(),S(f,{key:3,class:"self-center my-4 min-w-8em",chroma:t.chroma,pitch:t.tonicPitch,roman:o.current.degrees.split("-")[r]},null,8,["chroma","pitch","roman"])):k("",!0),o.mode=="bars"?(i(),S(l,{key:4,class:"mx-8",chroma:t.chroma,pitch:t.tonicPitch,roman:o.current.degrees.split("-")[r]},null,8,["chroma","pitch","roman"])):k("",!0)]))),128))]))]),_:1})],4)])}}};export{Ve as _};
