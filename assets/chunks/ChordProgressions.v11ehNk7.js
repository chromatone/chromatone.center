import{c as b,E as i,F as h,G as p,I as g,C as e,T as k,L as M,V as N,W as T,Q as O,D as R,r as U,b as D,P as F,u as A,O as B,X as z,a2 as S,aj as I}from"./framework.NDjH5Ni5.js";import{g as x,E,G,r as X,e as P,n as _,w as V,C as L,ab as q,ac as $,F as H,v as Q,x as W,R as Y,ad as Z,ae as J,i as K,af as j}from"./theme.8Rdgh56L.js";import{_ as ee}from"./ChromaCircle.XzhTDZqn.js";import{_ as te}from"./ChordTab.NHFkRa1i.js";import{_ as oe}from"./ChromaKeys.DMVKETze.js";import{_ as se}from"./ControlChoose.9U-5PL8D.js";const ae={class:"font-bold"},ne={key:0,class:"text-sm"},le=["onMouseenter","onTouchstart"],re={__name:"ChromaStack",props:{pitch:{type:Number,default:null},chroma:{type:String,default:"1001000100101"},mode:{type:String,default:"O"},tonic:{type:Number,default:0},roman:{type:String,default:""}},setup(s){const v=s,o="101101011010".split(""),n=b(()=>v.pitch===0||v.pitch?v.pitch:x.tonic),y=b(()=>E.get(v.chroma));b(()=>G.get(v.chroma));const c=b(()=>X(v.chroma.split(""),-n.value).map((u,a)=>({active:u=="1",pitch:a})).reverse());function w(m){m.active&&d(m.pitch)}function d(m=0,u=0){let a=H(m+57,"midi");Q(a.toNote()),W(a.toNote())}return(m,u)=>(i(),h("div",{class:"flex flex-col cursor-pointer select-none p-4 m-2 rounded-xl transition-all duration-300 ease w-full",style:M({backgroundColor:e(L)(s.chroma,n.value).hsl}),onMousedown:u[0]||(u[0]=a=>{e(q)(s.chroma,n.value),m.pressed=!0}),onTouchstart:u[1]||(u[1]=O(a=>{e(q)(s.chroma,n.value),m.pressed=!0},["prevent","stop"])),onTouchend:u[2]||(u[2]=a=>{e($)(s.chroma,n.value),m.pressed=!1}),onTouchcancel:u[3]||(u[3]=a=>{e($)(s.chroma,n.value),m.pressed=!1}),onMouseup:u[4]||(u[4]=a=>{e($)(s.chroma,n.value),m.pressed=!1}),onMouseleave:u[5]||(u[5]=a=>{e($)(s.chroma,n.value),m.pressed=!1})},[p("div",{class:"p-2 text-center mb-2 rounded-lg text-white",style:M({backgroundColor:e(_)(n.value,3),color:e(V)(e(_)(n.value),3).isDark()?"white":"black"})},[p("div",ae,g(s.pitch===!1?"":typeof s.pitch=="string"?s.pitch:e(P)[n.value])+g(y.value.aliases[0]),1),v.roman?(i(),h("div",ne,g(v.roman),1)):k("",!0)],4),(i(!0),h(N,null,T(c.value,(a,f)=>(i(),h("div",{class:"py-6px px-8 my-2px w-full text-sm text-center font-bold rounded transition-all duration-300 ease touch-none",onMouseenter:l=>w(a),onTouchstart:l=>w(a),key:f,style:M({backgroundColor:a.active?e(_)(a.pitch):e(o)[a.pitch]==1?"hsla(0,0%,90%,0.8)":"hsla(0,0%,20%,0.6)"})},null,44,le))),128))],36))}},ie={class:"select-none min-w-8em m-2",version:"1.1",baseProfile:"full",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",style:{"touch-action":"none"},"font-family":"Commissioner, sans-serif","text-anchor":"middle","dominant-baseline":"middle"},ce=["fill"],ue=["transform","onMousedown","opacity"],me=["width","height","fill"],he=["y","x","fill"],de=["y","x"],fe=["x","y","width","height","fill","stroke"],pe=["x","y"],ve=["x","y"],xe={__name:"ChromaSquare",props:{pitch:{type:Number,default:null},chroma:{type:String,default:"1001000100101"},mode:{type:String,default:"O"},tonic:{type:Number,default:0},roman:{type:String,default:""},editable:{type:Boolean,default:!1}},emits:["update:chroma"],setup(s,{emit:v}){const o=v,n=s,y=U(!1),c=D({width:100,height:100}),w=[[0,0],[1,0],[2,0],[3,0],[3,1],[3,2],[3,3],[2,3],[1,3],[0,3],[0,2],[0,1]],d=b(()=>n.pitch===0||n.pitch?n.pitch:x.tonic),m=b(()=>E.get(n.chroma));b(()=>G.get(n.chroma).name);function u(f,l=c.width,t=c.height){let r,C;return n.mode=="Z"?(r=f%4,C=Math.floor(f/4)+1,f>3&&f<8&&(r=3-r)):n.mode=="O"&&([r,C]=w[f]),`translate(${r*l/4},${C*t/4})`}function a(f){if(!n.editable)return;let l=[...n.chroma.split("")];l[f]=="1"?l[f]="0":l[f]="1",o("update:chroma",l.join(""))}return(f,l)=>(i(),h("svg",ie,[p("rect",{width:"100",height:"100",rx:"8",opacity:"0.6",fill:e(L)(s.chroma,d.value).hsl},null,8,ce),(i(!0),h(N,null,T(s.chroma,(t,r)=>(i(),h("g",{class:"transition-all duration-400 ease-in-out cursor-pointer",key:r,transform:u(r),onMousedown:C=>a(r),opacity:t=="1"?1:.62},[p("rect",{class:"transition-all duration-200 ease-in-out",x:2,y:2,rx:"6",width:c.width/4-4,height:c.height/4-4,fill:e(V)(t=="1"?e(_)((r+d.value)%12,3):e(P)[(r+e(x).tonic)%12].length!=2?"hsl(0,0%,85%)":"hsl(0,0%,40%)").toHex()},null,8,me),t=="1"?(i(),h("text",{key:0,y:c.height/8+1,x:c.width/8,"font-size":8,"font-weight":"bold",fill:e(V)(e(_)(r+e(x).tonic)).isDark()?"white":"black"},g(e(P)[(r+d.value)%12]),9,he)):k("",!0),t=="0"?(i(),h("text",{key:1,y:c.height/8+1,x:c.width/8,"font-size":"6px","font-weight":"normal",fill:"black",opacity:"0.5"},g(e(Y)[r]),9,de)):k("",!0)],40,ue))),128)),p("g",{class:F(["center cursor-pointer",{pressed:y.value}]),onMousedown:l[0]||(l[0]=O(t=>{e(q)(s.chroma,d.value),y.value=!0},["prevent","stop"])),onTouchstart:l[1]||(l[1]=O(t=>{e(q)(s.chroma,d.value),y.value=!0},["prevent","stop"])),onTouchend:l[2]||(l[2]=t=>{e($)(s.chroma,d.value),y.value=!1}),onTouchcancel:l[3]||(l[3]=t=>{e($)(s.chroma,d.value),y.value=!1}),onMouseup:l[4]||(l[4]=t=>{e($)(s.chroma,d.value),y.value=!1}),onMouseleave:l[5]||(l[5]=t=>{e($)(s.chroma,d.value),y.value=!1})},[p("rect",{class:"transition-all duration-400 ease-in-out",rx:"4",x:c.width/4+2,y:c.width/4+2,width:c.width/2-4,height:c.height/2-4,fill:s.pitch===!1?"none":e(_)(d.value,3),stroke:e(_)(e(x).tonic,3,1,.5),"stroke-width":"2"},null,8,fe),p("text",{x:c.width/2,y:c.height/2,"font-size":"10px","font-weight":"bold",fill:"white"},g(s.pitch===!1?"":typeof s.pitch=="string"?s.pitch:e(P)[d.value])+g(m.value.aliases[0]),9,pe),n.roman?(i(),h("text",{key:0,class:"function",x:c.width/2,y:c.height/2+13,"font-size":"8px","font-weight":"normal",fill:"white"},g(n.roman),9,ve)):k("",!0)],34)]))}},ge=R(xe,[["__scopeId","data-v-4838df49"]]),ye={class:"flex flex-col"},we={class:"flex flex-wrap mx-auto my-4"},ke={class:"flex flex-col text-center mb-2 relative p-1"},be={class:"text-2xl font-bold flex mx-auto items-center"},_e=["href"],$e=p("div",{class:"i-la-wikipedia-w"},null,-1),Ce=[$e],Se={class:"text-lg"},Me={class:"flex flex-wrap p-4 items-start",style:{flex:"1 1 6rem"}},Pe=["onClick"],Ne={class:"font-bold px-1 mb-1"},je={__name:"ChordProgressions",props:{list:{type:Object,required:!0},initial:{type:String,default:"major"}},setup(s){const v=s,o=D({mode:A("progresions-mode","bars"),selected:v.initial,current:b(()=>v.list[o.selected]),scaleString:b(()=>`${x.note.name} ${v.list[o.selected].title}`.toLowerCase()),scale:b(()=>Z.get(o.scaleString))}),n={ukulele:"Ukulele",guitar:"Guitar",piano:"Piano",circles:"Circles",squares:"Squares",bars:"Bars"};function y(c){let w=c.split("-");return J.fromRomanNumerals(x.note,w).map(u=>{let a=K.get(u);return a.pitches=a.notes.map(f=>j[f]),a.tonicPitch=j[a.tonic],a})}return(c,w)=>{const d=se,m=oe,u=te,a=ee,f=ge,l=re;return i(),h("div",ye,[p("div",we,[B(d,{modelValue:o.mode,"onUpdate:modelValue":w[0]||(w[0]=t=>o.mode=t),variants:n},null,8,["modelValue"])]),p("div",{class:"flex flex-wrap items-stretch my-2 p-8 gap-4 border-2 rounded-xl",style:M({borderColor:e(_)(e(x).tonic,2),backgroundColor:e(_)(e(x).tonic,2,1,.05)})},[B(m,{class:"w-20em mx-auto",chroma:e(x).chroma,style:{flex:"1 1 3rem"},pitch:e(x).tonic,"onUpdate:pitch":w[1]||(w[1]=t=>e(x).tonic=t)},{default:z(()=>[p("div",ke,[p("div",be,g(e(x).note.name)+" "+g(o.current.title),1),o.current.link?(i(),h("a",{key:0,class:"p-1 text-2xl absolute right-2 top-2 rounded-full shadow-xl",href:o.current.link,target:"_blank"},Ce,8,_e)):k("",!0),p("div",Se,g(o.current.degrees),1)])]),_:1},8,["chroma","pitch"]),p("div",Me,[(i(!0),h(N,null,T(s.list,(t,r)=>(i(),h("button",{class:F(["text-button flex flex-col",{active:t==o.current}]),key:t,onClick:C=>{o.selected=r,e(x).chroma=o.scale.chroma}},[p("div",Ne,g(t.title),1)],10,Pe))),128))]),B(I,{name:"fade",mode:"out-in"},{default:z(()=>[(i(),h("div",{class:"flex flex-wrap gap-2",key:o.current},[(i(!0),h(N,null,T(y(o.current.degrees),(t,r)=>(i(),h("div",{class:"flex flex-col select-none max-w-16rem",style:{flex:"1 1 10rem"},key:r},[o.mode=="piano"?(i(),S(m,{key:0,class:"flex-1 p-1 min-w-150px",chroma:t.chroma,pitch:t.tonicPitch,roman:o.current.degrees.split("-")[r],playAll:!0},null,8,["chroma","pitch","roman"])):k("",!0),o.mode=="guitar"||o.mode=="ukulele"?(i(),S(u,{key:1,instrument:o.mode,chroma:t.chroma,pitch:t.tonicPitch},null,8,["instrument","chroma","pitch"])):k("",!0),o.mode=="circles"?(i(),S(a,{key:2,class:"min-w-8em",chroma:t.chroma,pitch:t.tonicPitch,type:o.current.degrees.split("-")[r]},null,8,["chroma","pitch","type"])):k("",!0),o.mode=="squares"?(i(),S(f,{key:3,class:"self-center my-4 min-w-8em",chroma:t.chroma,pitch:t.tonicPitch,roman:o.current.degrees.split("-")[r]},null,8,["chroma","pitch","roman"])):k("",!0),o.mode=="bars"?(i(),S(l,{key:4,class:"mx-8",chroma:t.chroma,pitch:t.tonicPitch,roman:o.current.degrees.split("-")[r]},null,8,["chroma","pitch","roman"])):k("",!0)]))),128))]))]),_:1})],4)])}}};export{je as _};
