import{c as f,i as x,n as _,g as b,e as k}from"./theme.BH05JkjQ.js";import{M as c,a1 as C,Z as N,q as i,f as a,au as A,z as q,v as B,F as v,Y as h,e as S}from"./framework.DprnlfsI.js";const w={__name:"ChromaCodeCell",props:{index:{type:Number,required:!0},tonic:{type:Number,required:!0},isActive:{type:Boolean,required:!0}},emits:["toggle"],setup(s,{emit:d}){const e=s,n=c(()=>e.isActive?f((e.tonic+e.index)%12):"101101011010"[e.index]==="1"?"hsla(0,0%,100%,0.5)":"hsla(0,0%,10%,0.5)"),l=c(()=>e.isActive?1:.4),u=c(()=>x[e.index%12]),m=c(()=>_[(e.tonic+e.index)%12]);return(t,o)=>{const r=C("tooltip");return N((a(),i("div",{class:"flex flex-col items-center justify-center rounded text-md p-1 select-none cursor-pointer",onPointerdown:o[0]||(o[0]=p=>t.$emit("toggle",s.index)),style:B({flex:"1 1 50px",backgroundColor:n.value,opacity:l.value})},[A(q(u.value),1)],36)),[[r,m.value]])}}},D={class:"flex flex-col gap-1 bg-dark-200 bg-opacity-30 dark-bg-light-900 dark-bg-opacity-40 p-2 rounded-lg"},F={__name:"ChromaCode",props:{chroma:{type:String,default:"101101011010"},pitch:{type:Number,default:null},cols:{type:Number,default:4}},emits:["update:chroma"],setup(s,{emit:d}){const e=s,n=d,l=c(()=>e.pitch??b.tonic),u=c(()=>{const t=e.chroma.split("").map(Number);return Array.from({length:Math.ceil(12/e.cols)},(o,r)=>t.slice(r*e.cols,(r+1)*e.cols))}),m=t=>{k(t+l.value+57);const o=e.chroma.slice(0,t)+(e.chroma[t]==="1"?"0":"1")+e.chroma.slice(t+1);n("update:chroma",o)};return(t,o)=>(a(),i("div",D,[(a(!0),i(v,null,h(u.value,(r,p)=>(a(),i("div",{class:"flex gap-1",key:p},[(a(!0),i(v,null,h(r,(y,g)=>(a(),S(w,{key:g,index:p*s.cols+g,tonic:l.value,isActive:y===1,onToggle:m},null,8,["index","tonic","isActive"]))),128))]))),128))]))}};export{F as _};
