import{R as A,n as S,H as $,b as K,a as y}from"./theme.BxOLoZmJ.js";import{q as L,f as W,u as h,d as X,P as G,r as H,w as J,c as d,W as R,v as a,x as i,z as o,F as D,A as z,y as T,D as s,G as V,E as x,B as Z,J as Q,K as U}from"./framework.C3BURm3f.js";const Y=f=>(Q("data-v-f95c8ea1"),f=f(),U(),f),ee={class:"flex flex-col items-center fullscreen-container rounded-3xl",id:"screen"},te={class:"flex flex-wrap mt-6"},oe=["onClick"],se={class:"p-4 flex flex-wrap items-center"},le={class:"is-group flex"},ne={key:0,class:"i-la-pause"},re={key:1,class:"i-la-play"},ae={key:0,class:"i-la-volume-up"},ie={key:1,class:"i-la-volume-off"},ce={id:"chord-form",version:"1.1",baseProfile:"full",viewBox:"0 0 1260 800",xmlns:"http://www.w3.org/2000/svg"},ue={class:"zoom"},de={y:"760",fill:"currentColor",x:"12"},ve=["y1"],fe={class:"speed"},me={y:"780",x:"12",fill:"currentColor"},_e=["x1"],pe=Y(()=>o("line",{x1:"0",x2:"1200",y1:"400",y2:"400",stroke:"gray","stroke-width":"1"},null,-1)),he=["stroke","points"],ke=["transform","fill"],ye=["stroke","points"],xe=["transform","fill"],we=1200,v=600,ge={__name:"ChromaForm",setup(f){const w=[];for(let e=0;e<13;e++)w[e]=Math.pow(2,e/12);const g=we/v,{timestamp:j,pause:B,resume:E}=W({controls:!0,offset:Date.now(),immediate:!1}),c=h("chord-moving",!0);X(c,e=>{e?E():B()}),G(" ",e=>{e.preventDefault(),c.value=!c.value});const l=h("chord-notes-obj",{}),m=H(!1),{attack:I,releaseAll:M}=A();J(()=>{if(M(),m.value)for(let e in l.value){let t=e<3?3:4;I(S[e]+t)}});const _=$(h("chord-zoom",400),75,1e3),p=$(h("chord-speed",100),10,400);function N(e){l.value[e]?delete l.value[e]:l.value[e]=!0}function P(e){e.tap&&(c.value=!c.value),p.value+=e.delta[0],_.value-=e.delta[1]}function k(e,t){return Math.sin((t+j.value*p.value/1e3)*(Math.PI*2*w[e])/_.value)}const F=d(()=>{let e="000000000000",t=e.split("");for(let n in l.value)t[Number(n)]="1";return e=t.join(""),e}),O=d(()=>{let e={};for(let t in l.value){e[t]=[];for(let n=0;n<v;n++)e[t].push(`${n*g},${k(Number(t),n)*100+400}`)}return e}),C=d(()=>{let e=[];for(let t=0;t<v;t++){e[t]=0;for(let n in l.value){let u=Number(n);e[t]+=k(u,t)}}return e}),q=d(()=>C.value.map((e,t)=>`${t*g},${e*100+400}`).join(" ")),b=d(()=>K(F.value,Object.keys(l.value)[0]));return(e,t)=>{const n=R("drag");return a(),i("div",ee,[o("div",te,[(a(!0),i(D,null,z(s(S),(u,r)=>(a(),i("div",{class:T(["note",{active:s(l)[r]}]),key:u,style:V({backgroundColor:s(l)[r]?s(y)(r):u.length==2?"#333":"#aaa"}),onClick:Ce=>N(r)},x(u),15,oe))),128))]),o("div",se,[o("div",le,[o("button",{onClick:t[0]||(t[0]=u=>c.value=!s(c))},[s(c)?(a(),i("div",ne)):(a(),i("div",re))]),o("button",{onClick:t[1]||(t[1]=u=>m.value=!m.value)},[m.value?(a(),i("div",ie)):(a(),i("div",ae))])])]),Z((a(),i("svg",ce,[o("g",ue,[o("text",de,"ZOOM X"+x(s(_)/100),1),o("line",{y1:800-s(_)/1e3*800,y2:"800",transform:"translate(4 0)","stroke-linecap":"round",stroke:"currentColor","stroke-opacity":"0.5","stroke-width":"8"},null,8,ve)]),o("g",fe,[o("text",me,"SPEED X"+x(s(p)/100),1),o("line",{x1:s(p)/400*1260,x2:"0",transform:"translate(0 795)","stroke-linecap":"round",stroke:"currentColor","stroke-opacity":"0.5","stroke-width":"12"},null,8,_e)]),pe,(a(!0),i(D,null,z(s(l),(u,r)=>(a(),i("g",{key:r},[o("polyline",{stroke:s(y)(r),points:O.value[r],"stroke-width":"2",fill:"none"},null,8,he),o("circle",{cx:1200,cy:400,transform:`translate(0,${k(r,v-1)*100})`,r:"6",fill:s(y)(r)},null,8,ke)]))),128)),o("polyline",{stroke:b.value.hsl,points:q.value,"stroke-width":"12",fill:"none"},null,8,ye),o("circle",{cx:1200,cy:400,transform:`translate(0,${C.value[v-1]*100})`,r:"12",fill:b.value.hsl},null,8,xe)])),[[n,P]])])}}},$e=L(ge,[["__scopeId","data-v-f95c8ea1"]]);export{$e as default};
