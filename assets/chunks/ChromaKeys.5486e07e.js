import{_,r as E,b as v,o as i,c as r,a as s,t as c,u as o,l as y,n as F,F as S,d as $,E as B,B as M,G as A,C as b,Q as H,M as h,p as K,q as V}from"./framework.c1cedef0.js";import{g as j,n as d,b as q,e as m}from"./colors.de92a8a1.js";import{r as D}from"./calculations.65ee336d.js";import{a as I,b as T,n as p,f as G}from"./theory.61e5aadb.js";import{w}from"./index.654bd828.js";import{u as L}from"./midi.1606ad4f.js";const P=e=>(K("data-v-ed7fdbb4"),e=e(),V(),e),Q={key:0,class:"flex justify-center my-2 px-2"},J={class:"absolute right-4"},O={class:"font-bold text-xl flex-1 text-center"},R=P(()=>s("defs",null,[s("filter",{id:"shadowButton",x:"-50%",height:"200%",width:"300%"},[s("feDropShadow",{dx:"0",dy:"3",stdDeviation:"4","flood-color":"#2225"})])],-1)),U={class:"white"},W=["transform","onMousedown"],X=["fill"],Y=["fill"],Z=["fill"],k=["font-weight"],tt={class:"black"},et=["transform","onMousedown"],lt=["fill","data-check"],ot=["fill","stroke"],st=["fill","font-weight"],at={y:"176",x:"45"},nt={y:"50",x:"45"},it={__name:"ChromaKeys",props:{chroma:{type:String,default:"100000000000"},letters:{type:Boolean,defualt:!1},pitch:{type:Number,default:0},scale:{type:String},roman:{type:String,default:""},title:{type:Boolean,default:!0},playAll:{type:Boolean,default:!1}},emits:["update:pitch"],setup(e,{emit:rt}){const n=e,u=E({white:[3,5,7,8,10,0,2],black:[4,6,null,9,11,1],chroma:v(()=>D(n.chroma.split(""),-n.pitch)),scale:v(()=>D(j.chroma.split(""),-n.pitch)),title:v(()=>{var l,a;return(l=I.get(n.chroma))!=null&&l.empty?(a=T.get(n.chroma))!=null&&a.empty?"":T.get(n.chroma).aliases[0]:I.get(n.chroma).aliases[0]})}),{midi:C}=L();function g(l){return l!=null&&u.chroma[l]=="1"}function z(l){return n.scale&&l!=null&&u.chroma[l]=="1"}function f(l,a){return l==null?"transparent":l==n.pitch?w(d(l,4)).toHex():g(l)&&!a?w(d(l,3.5)).toHex():p[l].length!=2?"#eee":"#999"}return(l,a)=>(i(),r("div",{class:"flex flex-col m-1 rounded-2xl cursor-pointer transition-all duration-300 ease relative select-none touch-none px-2",onMousedown:a[0]||(a[0]=t=>e.playAll&&h(o(q)(e.chroma,e.pitch))),onTouchend:a[1]||(a[1]=t=>e.playAll&&h(o(m)(e.chroma,e.pitch))),onTouchcancel:a[2]||(a[2]=t=>e.playAll&&h(o(m)(e.chroma,e.pitch))),onMouseup:a[3]||(a[3]=t=>e.playAll&&h(o(m)(e.chroma,e.pitch))),onMouseleave:a[4]||(a[4]=t=>e.playAll&&h(o(m)(e.chroma,e.pitch))),style:b({backgroundColor:o(d)(e.pitch,2,1,.5)})},[e.title?(i(),r("div",Q,[s("div",J,c(e.roman),1),s("div",O,c(o(p)[e.pitch])+c(u.title),1)])):y("",!0),(i(),r("svg",{class:F(["w-full mt-2",{letters:e.letters}]),id:"chroma-keys",version:"1.1",baseProfile:"full",viewBox:"-10 -20 720 360",xmlns:"http://www.w3.org/2000/svg","font-family":"Commissioner, sans-serif","font-weight":"200","font-size":"40","text-anchor":"middle","dominant-baseline":"middle"},[R,s("g",U,[(i(!0),r(S,null,$(u.white,(t,x)=>(i(),r("g",{class:"key",key:t,transform:`translate(${x*100+5} 30)`,onMousedown:B(N=>l.$emit("update:pitch",t),["stop"])},[s("rect",{class:"transition-all duration-300 ease-out",width:"90",height:"290",rx:"45",fill:f(t,!0),style:{filter:"url(#shadowButton)"}},null,8,X),s("circle",{class:"transition-all duration-300 ease-out",cy:"245",cx:"45",r:"45",fill:f(t)},null,8,Y),M(s("text",{class:"pointer-events-none",y:"250",x:"45",fill:o(w)(o(d)(t)).isDark()?"white":"black"},[s("tspan",{"font-weight":t==e.pitch?800:200},c(o(p)[t]),9,k)],8,Z),[[A,g(t)]]),s("circle",{class:"transition-all duration-100",style:b({opacity:o(C).activeChroma[t]==1?1:0}),cy:"245",cx:"45",r:"18",fill:"#3339"},null,4)],40,W))),128))]),s("g",tt,[(i(!0),r(S,null,$(u.black,(t,x)=>(i(),r("g",{class:"key",key:t,transform:`translate(${x*100+55} -10)`,onMousedown:B(N=>l.$emit("update:pitch",t),["stop"])},[t?(i(),r("rect",{key:0,class:"transition-all duration-300 ease-out",width:"90",height:"220",rx:"45",style:{filter:"url(#shadowButton)"},fill:f(t,!0),"data-check":t},null,8,lt)):y("",!0),t?(i(),r("circle",{key:1,class:"transition-all duration-300 ease-out",cy:"175",cx:"45",r:"45",fill:f(t),"stroke-width":"8",stroke:z(t)?o(d)(t,3):"transparent"},null,8,ot)):y("",!0),M(s("text",{class:"pointer-events-none",fill:o(w)(o(d)(t)).isDark()?"white":"black","font-weight":t==e.pitch?800:200},[s("tspan",at,c(o(p)[t]),1),s("tspan",nt,c(o(G)[t]),1)],8,st),[[A,g(t)]]),s("circle",{class:"transition-all duration-100",style:b({opacity:o(C).activeChroma[t]==1?1:0}),cy:"175",cx:"45",r:"18",fill:"#3339"},null,4)],40,et))),128))])],2)),H(l.$slots,"default",{},void 0,!0)],36))}},pt=_(it,[["__scopeId","data-v-ed7fdbb4"]]);export{pt as _};
