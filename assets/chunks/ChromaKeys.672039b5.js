import{_ as N,k as j,j as y,o as i,c as r,x as g,g as a,a as o,t as d,b,v as k,F as S,r as $,s as B,E as M,I as E,G as h,p as F,d as H}from"./framework.5d1030ab.js";import{g as K,n as c,b as V,d as w}from"./colors.4c0ac5e1.js";import{r as A}from"./calculations.2bac3e9a.js";import{a as D,b as I,n as p,f as G}from"./theory.8eb98cfd.js";import{w as f}from"./index.654bd828.js";import{u as L}from"./midi.af684b63.js";const P=t=>(F("data-v-66f28a8d"),t=t(),H(),t),q={class:"absolute right-4"},J={class:"font-bold text-lg flex-1 text-center"},O=P(()=>o("defs",null,[o("filter",{id:"shadowButton",x:"-50%",height:"200%",width:"300%"},[o("feDropShadow",{dx:"0",dy:"3",stdDeviation:"4","flood-color":"#2225"})])],-1)),Q={class:"white"},R=["transform","onMousedown"],U=["fill"],W=["fill"],X=["fill"],Y=["font-weight"],Z={class:"black"},_=["transform","onMousedown"],tt=["fill","data-check"],et=["fill","stroke"],lt=["fill","font-weight"],at={y:"111",x:"45"},ot={y:"40",x:"45"},st={__name:"ChromaKeys",props:{chroma:{type:String,default:"100000000000"},letters:{type:Boolean,default:!0},pitch:{type:Number,default:0},scale:{type:String},roman:{type:String,default:""},title:{type:Boolean,default:!0},playAll:{type:Boolean,default:!1}},emits:["update:pitch"],setup(t,{emit:nt}){const n=t,u=j({white:[3,5,7,8,10,0,2],black:[4,6,null,9,11,1],chroma:y(()=>A(n.chroma.split(""),-n.pitch)),scale:y(()=>A(K.chroma.split(""),-n.pitch)),title:y(()=>{var l,s;return(l=D.get(n.chroma))!=null&&l.empty?(s=I.get(n.chroma))!=null&&s.empty?"":I.get(n.chroma).aliases[0]:D.get(n.chroma).aliases[0]})}),{midi:C}=L();function v(l){return l!=null&&u.chroma[l]=="1"}function T(l){return n.scale&&l!=null&&u.chroma[l]=="1"}function m(l,s){return l==null?"transparent":l==n.pitch?f(c(l,4)).toHex():v(l)&&!s?f(c(l,3.5)).toHex():p[l].length!=2?"#eee":"#999"}return(l,s)=>(i(),r("div",{class:"flex flex-col m-1 rounded-lg cursor-pointer transition-all duration-300 ease relative select-none touch-none",onMousedown:s[0]||(s[0]=e=>t.playAll&&h(a(V)(t.chroma,t.pitch))),onTouchend:s[1]||(s[1]=e=>t.playAll&&h(a(w)(t.chroma,t.pitch))),onTouchcancel:s[2]||(s[2]=e=>t.playAll&&h(a(w)(t.chroma,t.pitch))),onMouseup:s[3]||(s[3]=e=>t.playAll&&h(a(w)(t.chroma,t.pitch))),onMouseleave:s[4]||(s[4]=e=>t.playAll&&h(a(w)(t.chroma,t.pitch))),style:g({backgroundColor:a(c)(t.pitch,2,1,.5)})},[t.title?(i(),r("div",{key:0,class:"flex justify-center my-2 px-2",style:g({color:a(f)(a(c)(t.pitch,2,1,1)).isDark()?"white":"black"})},[o("div",q,d(t.roman),1),o("div",J,d(a(p)[t.pitch])+d(u.title),1)],4)):b("",!0),(i(),r("svg",{class:k(["w-full",{letters:t.letters}]),id:"chroma-keys",version:"1.1",baseProfile:"full",viewBox:"-10 -20 720 250",xmlns:"http://www.w3.org/2000/svg","font-family":"Commissioner, sans-serif","font-weight":"200","font-size":"40","text-anchor":"middle","dominant-baseline":"middle"},[O,o("g",Q,[(i(!0),r(S,null,$(u.white,(e,x)=>(i(),r("g",{class:"key",key:e,transform:`translate(${x*100+5} 30)`,onMousedown:z=>l.$emit("update:pitch",e)},[o("rect",{class:"transition-all duration-300 ease-out",width:"90",height:"190",rx:"45",fill:m(e,!0),style:{filter:"url(#shadowButton)"}},null,8,U),o("circle",{class:"transition-all duration-300 ease-out",cy:"145",cx:"45",r:"45",fill:m(e)},null,8,W),B(o("text",{class:"pointer-events-none",y:"152",x:"45",fill:a(f)(a(c)(e)).isDark()?"white":"black"},[o("tspan",{"font-weight":e==t.pitch?800:200},d(a(p)[e]),9,Y)],8,X),[[M,v(e)&&t.letters]]),o("circle",{class:"transition",style:g({opacity:a(C).activeChromaMidi[e]?1:0}),cy:"245",cx:"45",r:"18",fill:"#3339"},null,4)],40,R))),128))]),o("g",Z,[(i(!0),r(S,null,$(u.black,(e,x)=>(i(),r("g",{class:"key",key:e,transform:`translate(${x*100+55} -10)`,onMousedown:z=>l.$emit("update:pitch",e)},[e?(i(),r("rect",{key:0,class:"transition-all duration-300 ease-out",width:"90",height:"150",rx:"45",style:{filter:"url(#shadowButton)"},fill:m(e,!0),"data-check":e},null,8,tt)):b("",!0),e?(i(),r("circle",{key:1,class:"transition-all duration-300 ease-out",cy:"105",cx:"45",r:"45",fill:m(e),"stroke-width":"8",stroke:T(e)?a(c)(e,3):"transparent"},null,8,et)):b("",!0),B(o("text",{class:"pointer-events-none",fill:a(f)(a(c)(e)).isDark()?"white":"black","font-weight":e==t.pitch?800:200},[o("tspan",at,d(a(p)[e]),1),o("tspan",ot,d(a(G)[e]),1)],8,lt),[[M,v(e)&&t.letters]]),o("circle",{class:"transition-all duration-100",style:g({opacity:a(C).activeChromaMidi[e]?1:0}),cy:"175",cx:"45",r:"18",fill:"#3339"},null,4)],40,_))),128))])],2)),E(l.$slots,"default",{},void 0,!0)],36))}},ft=N(st,[["__scopeId","data-v-66f28a8d"]]);export{ft as _};
