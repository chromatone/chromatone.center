import{D as z,b as H,c as y,E as n,F as r,P as V,G as s,V as S,W as $,N as B,Z as M,C as a,I as u,L as w,T as b,H as E,n as h,J as F,K}from"./framework.BbXr-hJc.js";import{r as D,g as L,l as A,u as P,w as f,n as c,e as g,a6 as j,q as k,t as p}from"./theme.DD5orrOE.js";import{c as I}from"./index.BN-VJfZk.js";const q=t=>(F("data-v-10839a76"),t=t(),K(),t),G=q(()=>s("defs",null,[s("filter",{id:"shadowButton",x:"-50%",height:"200%",width:"300%"},[s("feDropShadow",{dx:"0",dy:"3",stdDeviation:"4","flood-color":"#2225"})])],-1)),J={class:"white"},W=["transform","onMousedown"],Z=["fill"],O=["fill"],Q=["fill"],R=["font-weight"],U={class:"black"},X=["transform","onMousedown"],Y=["fill","data-check"],_=["fill","stroke"],tt=["fill","font-weight"],et={y:"111",x:"45"},lt={y:"40",x:"45"},at={class:"absolute right-4"},st={class:"font-bold text-lg flex-1 text-center"},ot={__name:"ChromaKeys",props:{chroma:{type:String,default:"100000000000"},letters:{type:Boolean,default:!0},pitch:{type:Number,default:0},scale:{type:String},roman:{type:String,default:""},title:{type:Boolean,default:!0},playAll:{type:Boolean,default:!1}},emits:["update:pitch"],setup(t,{emit:it}){const i=t,d=H({white:[3,5,7,8,10,0,2],black:[4,6,null,9,11,1],chroma:y(()=>D(i.chroma.split(""),-i.pitch)),scale:y(()=>D(L.chroma.split(""),-i.pitch)),title:y(()=>{var l,o;return(l=I.get(i.chroma))!=null&&l.empty?(o=A.get(i.chroma))!=null&&o.empty?"":A.get(i.chroma).aliases[0]:I.get(i.chroma).aliases[0]})}),{midi:C}=P();function v(l){return l!=null&&d.chroma[l]=="1"}function N(l){return i.scale&&l!=null&&d.chroma[l]=="1"}function m(l,o){return l==null?"transparent":l==i.pitch?f(c(l,4)).toHex():v(l)&&!o?f(c(l,3.5)).toHex():g[l].length!=2?"#eee":"#999"}return(l,o)=>(n(),r("div",{class:"flex flex-col m-1 rounded-lg cursor-pointer transition-all duration-300 ease relative select-none touch-none",onMousedown:o[0]||(o[0]=e=>t.playAll&&h(a(k)(t.chroma,t.pitch))),onTouchend:o[1]||(o[1]=e=>t.playAll&&h(a(p)(t.chroma,t.pitch))),onTouchcancel:o[2]||(o[2]=e=>t.playAll&&h(a(p)(t.chroma,t.pitch))),onMouseup:o[3]||(o[3]=e=>t.playAll&&h(a(p)(t.chroma,t.pitch))),onMouseleave:o[4]||(o[4]=e=>t.playAll&&h(a(p)(t.chroma,t.pitch))),style:w({backgroundColor:a(c)(t.pitch,2,1,.5)})},[(n(),r("svg",{class:V(["w-full",{letters:t.letters}]),id:"chroma-keys",version:"1.1",baseProfile:"full",viewBox:"-10 -20 720 250",xmlns:"http://www.w3.org/2000/svg","font-family":"Commissioner, sans-serif","font-weight":"200","font-size":"40","text-anchor":"middle","dominant-baseline":"middle"},[G,s("g",J,[(n(!0),r(S,null,$(d.white,(e,x)=>(n(),r("g",{class:"key",key:e,transform:`translate(${x*100+5} 30)`,onMousedown:T=>l.$emit("update:pitch",e)},[s("rect",{class:"transition-all duration-300 ease-out",width:"90",height:"190",rx:"45",fill:m(e,!0),style:{filter:"url(#shadowButton)"}},null,8,Z),s("circle",{class:"transition-all duration-300 ease-out",cy:"145",cx:"45",r:"45",fill:m(e)},null,8,O),B(s("text",{class:"pointer-events-none",y:"152",x:"45",fill:a(f)(a(c)(e)).isDark()?"white":"black"},[s("tspan",{"font-weight":e==t.pitch?800:200},u(a(g)[e]),9,R)],8,Q),[[M,v(e)&&t.letters]]),s("circle",{class:"transition",style:w({opacity:a(C).activeChromaMidi[e]?1:0}),cy:"245",cx:"45",r:"18",fill:"#3339"},null,4)],40,W))),128))]),s("g",U,[(n(!0),r(S,null,$(d.black,(e,x)=>(n(),r("g",{class:"key",key:e,transform:`translate(${x*100+55} -10)`,onMousedown:T=>l.$emit("update:pitch",e)},[e?(n(),r("rect",{key:0,class:"transition-all duration-300 ease-out",width:"90",height:"150",rx:"45",style:{filter:"url(#shadowButton)"},fill:m(e,!0),"data-check":e},null,8,Y)):b("",!0),e?(n(),r("circle",{key:1,class:"transition-all duration-300 ease-out",cy:"105",cx:"45",r:"45",fill:m(e),"stroke-width":"8",stroke:N(e)?a(c)(e,3):"transparent"},null,8,_)):b("",!0),B(s("text",{class:"pointer-events-none",fill:a(f)(a(c)(e)).isDark()?"white":"black","font-weight":e==t.pitch?800:200},[s("tspan",et,u(a(g)[e]),1),s("tspan",lt,u(a(j)[e]),1)],8,tt),[[M,v(e)&&t.letters]]),s("circle",{class:"transition-all duration-100",style:w({opacity:a(C).activeChromaMidi[e]?1:0}),cy:"175",cx:"45",r:"18",fill:"#3339"},null,4)],40,X))),128))])],2)),E(l.$slots,"default",{},()=>[t.title?(n(),r("div",{key:0,class:"flex justify-center my-2 px-2",style:w({color:a(f)(a(c)(t.pitch,2,1,1)).isDark()?"white":"black"})},[s("div",at,u(t.roman),1),s("div",st,u(a(g)[t.pitch])+u(d.title),1)],4)):b("",!0)],!0)],36))}},ut=z(ot,[["__scopeId","data-v-10839a76"]]);export{ut as _};
