import{_ as K,C as N,i as y,o as i,c as r,v as p,h as o,a,t as u,d as b,q as F,F as S,r as $,n as B,A as M,O as H,K as h,p as V,e as j}from"./framework.7e580a04.js";import{g as k,n as c,e as q,f as w}from"./colors.7c5ce8ba.js";import{r as A}from"./calculations.97c9b876.js";import{c as D,s as I,n as g,f as E}from"./theory.7ed89221.js";import{w as f}from"./index.654bd828.js";import{u as L}from"./midi.732209b1.js";const O=e=>(V("data-v-468ba63c"),e=e(),j(),e),P={class:"absolute right-4"},G={class:"font-bold text-lg flex-1 text-center"},J=O(()=>a("defs",null,[a("filter",{id:"shadowButton",x:"-50%",height:"200%",width:"300%"},[a("feDropShadow",{dx:"0",dy:"3",stdDeviation:"4","flood-color":"#2225"})])],-1)),Q={class:"white"},R=["transform","onMousedown"],U=["fill"],W=["fill"],X=["fill"],Y=["font-weight"],Z={class:"black"},_=["transform","onMousedown"],tt=["fill","data-check"],et=["fill","stroke"],lt=["fill","font-weight"],ot={y:"176",x:"45"},at={y:"50",x:"45"},st={__name:"ChromaKeys",props:{chroma:{type:String,default:"100000000000"},letters:{type:Boolean,default:!1},pitch:{type:Number,default:0},scale:{type:String},roman:{type:String,default:""},title:{type:Boolean,default:!0},playAll:{type:Boolean,default:!1}},emits:["update:pitch"],setup(e,{emit:nt}){const n=e,d=N({white:[3,5,7,8,10,0,2],black:[4,6,null,9,11,1],chroma:y(()=>A(n.chroma.split(""),-n.pitch)),scale:y(()=>A(k.chroma.split(""),-n.pitch)),title:y(()=>{var l,s;return(l=D.get(n.chroma))!=null&&l.empty?(s=I.get(n.chroma))!=null&&s.empty?"":I.get(n.chroma).aliases[0]:D.get(n.chroma).aliases[0]})}),{midi:C}=L();function v(l){return l!=null&&d.chroma[l]=="1"}function T(l){return n.scale&&l!=null&&d.chroma[l]=="1"}function m(l,s){return l==null?"transparent":l==n.pitch?f(c(l,4)).toHex():v(l)&&!s?f(c(l,3.5)).toHex():g[l].length!=2?"#eee":"#999"}return(l,s)=>(i(),r("div",{class:"flex flex-col m-1 rounded-lg cursor-pointer transition-all duration-300 ease relative select-none touch-none",onMousedown:s[0]||(s[0]=t=>e.playAll&&h(o(q)(e.chroma,e.pitch))),onTouchend:s[1]||(s[1]=t=>e.playAll&&h(o(w)(e.chroma,e.pitch))),onTouchcancel:s[2]||(s[2]=t=>e.playAll&&h(o(w)(e.chroma,e.pitch))),onMouseup:s[3]||(s[3]=t=>e.playAll&&h(o(w)(e.chroma,e.pitch))),onMouseleave:s[4]||(s[4]=t=>e.playAll&&h(o(w)(e.chroma,e.pitch))),style:p({backgroundColor:o(c)(e.pitch,2,1,.5)})},[e.title?(i(),r("div",{key:0,class:"flex justify-center my-2 px-2",style:p({color:o(f)(o(c)(e.pitch,2,1,1)).isDark()?"white":"black"})},[a("div",P,u(e.roman),1),a("div",G,u(o(g)[e.pitch])+u(d.title),1)],4)):b("",!0),(i(),r("svg",{class:F(["w-full",{letters:e.letters}]),id:"chroma-keys",version:"1.1",baseProfile:"full",viewBox:"-10 -20 720 360",xmlns:"http://www.w3.org/2000/svg","font-family":"Commissioner, sans-serif","font-weight":"200","font-size":"40","text-anchor":"middle","dominant-baseline":"middle"},[J,a("g",Q,[(i(!0),r(S,null,$(d.white,(t,x)=>(i(),r("g",{class:"key",key:t,transform:`translate(${x*100+5} 30)`,onMousedown:z=>l.$emit("update:pitch",t)},[a("rect",{class:"transition-all duration-300 ease-out",width:"90",height:"290",rx:"45",fill:m(t,!0),style:{filter:"url(#shadowButton)"}},null,8,U),a("circle",{class:"transition-all duration-300 ease-out",cy:"245",cx:"45",r:"45",fill:m(t)},null,8,W),B(a("text",{class:"pointer-events-none",y:"250",x:"45",fill:o(f)(o(c)(t)).isDark()?"white":"black"},[a("tspan",{"font-weight":t==e.pitch?800:200},u(o(g)[t]),9,Y)],8,X),[[M,v(t)]]),a("circle",{class:"transition",style:p({opacity:o(C).activeChromaMidi[t]?1:0}),cy:"245",cx:"45",r:"18",fill:"#3339"},null,4)],40,R))),128))]),a("g",Z,[(i(!0),r(S,null,$(d.black,(t,x)=>(i(),r("g",{class:"key",key:t,transform:`translate(${x*100+55} -10)`,onMousedown:z=>l.$emit("update:pitch",t)},[t?(i(),r("rect",{key:0,class:"transition-all duration-300 ease-out",width:"90",height:"220",rx:"45",style:{filter:"url(#shadowButton)"},fill:m(t,!0),"data-check":t},null,8,tt)):b("",!0),t?(i(),r("circle",{key:1,class:"transition-all duration-300 ease-out",cy:"175",cx:"45",r:"45",fill:m(t),"stroke-width":"8",stroke:T(t)?o(c)(t,3):"transparent"},null,8,et)):b("",!0),B(a("text",{class:"pointer-events-none",fill:o(f)(o(c)(t)).isDark()?"white":"black","font-weight":t==e.pitch?800:200},[a("tspan",ot,u(o(g)[t]),1),a("tspan",at,u(o(E)[t]),1)],8,lt),[[M,v(t)]]),a("circle",{class:"transition-all duration-100",style:p({opacity:o(C).activeChromaMidi[t]?1:0}),cy:"175",cx:"45",r:"18",fill:"#3339"},null,4)],40,_))),128))])],2)),H(l.$slots,"default",{},void 0,!0)],36))}},ft=K(st,[["__scopeId","data-v-468ba63c"]]);export{ft as _};
