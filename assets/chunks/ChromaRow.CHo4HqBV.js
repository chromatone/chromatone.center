import{D as Q,b as W,c as p,E as u,F as h,G as o,L as x,C as t,I as d,V as $,W as N,P as O,Q as U,T as q,J as X,K as Y}from"./framework.BilnkUFq.js";import{l as Z,o as ee,ac as E,ae as L,e as V,r as z,g as c,F as S,k as te,q as k,t as D,v as C,ag as oe,w as se,y as P,x as R}from"./theme.BTHx806C.js";const y=s=>(X("data-v-8e768b16"),s=s(),Y(),s),ae={class:"flex w-full rounded-xl overflow-hidden"},le={class:"flex flex-wrap items-center justify-stretch w-full text-sm px-2 bg-dark-800 bg-opacity-10"},ne={class:"p-2px"},re=y(()=>o("div",{class:"flex-1"},null,-1)),ce={class:"flex font-bold",title:"Intervals"},ie=y(()=>o("div",{class:"flex-1"},null,-1)),de={class:"flex",title:"Steps"},me=y(()=>o("div",{class:"flex-1"},null,-1)),ue={class:"p-1",title:"Pcset number"},he={class:"mr-1"},fe=y(()=>o("div",{class:"flex-1"},null,-1)),ve=y(()=>o("div",{class:"i-la-play"},null,-1)),pe={class:"font-bold -mt-2px"},xe=y(()=>o("div",{class:"i-la-play -mt-1 mr-1"},null,-1)),ye={class:"flex justify-stretch mx-auto w-full p-2"},ge=["onMouseenter","onTouchstart","onClick"],be={__name:"ChromaRow",props:{chroma:{type:String,default:""},twoRow:{type:Boolean,default:!0},editable:{type:Boolean,default:!1}},emits:["update:chroma"],setup(s,{emit:A}){const G=A,v=s,n=W({minor:"101101011010",chord:p(()=>Z.get(v.chroma)),scale:p(()=>ee.get(v.chroma)),num:p(()=>E.num(v.chroma)),intervals:p(()=>E.intervals(v.chroma)),semitones:p(()=>{let l=[];if(!n.intervals)return[];for(let e=1;e<n.intervals.length;e++)l[e-1]=L.semitones(n.intervals[e])-L.semitones(n.intervals[e-1]);return l})});function _(l,e){var i;e==1&&K(l+((i=c)==null?void 0:i.tonic))}function H(l){if(!v.editable)return;let e=[...v.chroma.split("")];e[l]=="1"?e[l]="0":e[l]="1",G("update:chroma",e.join(""))}const J=[...V].map((l,e)=>({name:l,pitch:e})),T=p(()=>{var m,f;let l=z(v.chroma.split(""),-((m=c)==null?void 0:m.tonic)),i=z(J,-((f=c)==null?void 0:f.tonic)).map((g,b)=>{var w;return S(g.pitch+((w=c)==null?void 0:w.tonic)+57,"midi").toNote()}).filter((g,b)=>{if(l[b]=="1")return!0});return te.sortedNames(i)});function M(l=!1){var i;let e=[...T.value];if(l){e.push(S(((i=c)==null?void 0:i.tonic)+57+12,"midi").toNote());let m=[...T.value].reverse();e=[...e,...m]}e.forEach((m,f)=>{P(m,"8n",`+${f/3}`),R(m,{time:`+${f/3}`})})}function K(l=0,e=0){let i=S(l+57,"midi");R(i.toNote()),P(i.toNote())}return(l,e)=>{var i,m,f,g,b,w,B,I;return u(),h("div",ae,[o("div",{class:"w-3 flex flex-col items-center text-white text-opacity-90",style:x({backgroundColor:t(k)(s.chroma,(i=t(c))==null?void 0:i.tonic).hsl})},null,4),o("div",{class:"flex flex-col items-start w-full relative shadow-lg",style:x({backgroundColor:t(se)(t(k)(s.chroma,(m=t(c))==null?void 0:m.tonic).hsl).alpha(.1).toHex()})},[o("div",le,[o("div",ne,d(s.chroma),1),re,o("div",ce,[(u(!0),h($,null,N(n.intervals,a=>(u(),h("div",{class:"p-2px",key:a},d(a),1))),128))]),ie,o("div",de,[(u(!0),h($,null,N(n.semitones,(a,r)=>(u(),h("span",{key:r},d(r!=0?"-":"")+d(a),1))),128))]),me,o("div",ue,"# "+d(n.num),1)]),o("div",{class:O(["flex flex-wrap items-center justify-between p-2 gap-2",{"w-full":!0}])},[o("button",{class:"text-button text-white font-bold text-md flex gap-1",style:x({backgroundColor:t(k)(s.chroma,(f=t(c))==null?void 0:f.tonic).hsl}),onMousedown:e[0]||(e[0]=a=>t(D)(s.chroma)),onTouchstart:e[1]||(e[1]=U(a=>t(D)(s.chroma),["prevent","stop"])),onTouchend:e[2]||(e[2]=a=>t(C)(s.chroma)),onTouchcancel:e[3]||(e[3]=a=>t(C)(s.chroma)),onMouseup:e[4]||(e[4]=a=>t(C)(s.chroma)),onMouseleave:e[5]||(e[5]=a=>t(C)(s.chroma))},[o("span",he,d((g=t(c))==null?void 0:g.note.name)+d(n.chord.aliases[0]||" "+n.scale.name),1)],36),fe,n.chord.name||n.chord.aliases[0]?(u(),h("button",{key:0,class:"text-sm flex items-center gap-1 border-2 p-2 rounded-xl",style:x({borderColor:t(k)(s.chroma,(b=t(c))==null?void 0:b.tonic).hsl}),onClick:e[6]||(e[6]=a=>M())},[ve,o("div",pe,d((w=t(c))==null?void 0:w.note.name)+" "+d(n.chord.name||n.chord.aliases[0]),1)],4)):q("",!0),n.scale.name?(u(),h("button",{key:1,class:"text-button text-sm flex items-center",style:x({borderColor:t(k)(s.chroma,(B=t(c))==null?void 0:B.tonic).hsl}),onClick:e[7]||(e[7]=a=>M(!0))},[xe,o("span",null,d((I=t(c))==null?void 0:I.note.name)+" "+d(n.scale.name)+" scale",1)],4)):q("",!0)]),o("div",ye,[(u(!0),h($,null,N(s.chroma,(a,r)=>{var j;return u(),h("div",{class:O(["chroma-key text-xs",{active:a==1}]),onMouseenter:F=>_(r,a),onTouchstart:F=>_(r,a),key:r,onClick:F=>H(r),style:x({backgroundColor:t(oe)(r,a),marginLeft:r==1||r==3||r==5||r==7||r==8||r==10?"12px":"2px"})},d(a==1?t(V)[(r+((j=t(c))==null?void 0:j.tonic))%12]:""),47,ge)}),128))])],4)])}}},Ce=Q(be,[["__scopeId","data-v-8e768b16"]]);export{Ce as _};
