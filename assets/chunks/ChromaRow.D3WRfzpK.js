import{q as Q,b as U,c as p,v as m,x as f,z as s,G as x,D as t,E as d,F as $,A as N,y as O,$ as W,I as X,H as q,J as Y,K as Z}from"./framework.C3BURm3f.js";import{c as ee,s as te,E as z,J as L,n as A,r as D,g as c,F as _,l as oe,b as w,p as H,d as C,K as se,w as ae,m as J,L as le,M as ne}from"./theme.BxOLoZmJ.js";const k=a=>(Y("data-v-ff43a388"),a=a(),Z(),a),re={class:"flex w-full rounded-xl overflow-hidden"},ce={class:"flex flex-wrap items-center justify-stretch w-full text-sm px-2 bg-dark-800 bg-opacity-10"},ie={class:"p-2px"},de=k(()=>s("div",{class:"flex-1"},null,-1)),ue={class:"flex font-bold",title:"Intervals"},me=k(()=>s("div",{class:"flex-1"},null,-1)),fe={class:"flex",title:"Steps"},he=k(()=>s("div",{class:"flex-1"},null,-1)),ve={class:"p-1",title:"Pcset number"},pe={class:"mr-1"},xe={class:"flex-1"},ye=k(()=>s("div",{class:"i-la-play"},null,-1)),ge={class:"font-bold -mt-2px"},be=k(()=>s("div",{class:"i-la-play -mt-1 mr-1"},null,-1)),we={class:"flex justify-stretch mx-auto w-full p-2"},ke=["onMouseenter","onTouchstart","onClick"],Ce={__name:"ChromaRow",props:{chroma:{type:String,default:""},twoRow:{type:Boolean,default:!0},editable:{type:Boolean,default:!1}},emits:["update:chroma"],setup(a,{emit:K}){const R=K,h=a,n=U({minor:"101101011010",chord:p(()=>ee.get(h.chroma)),scale:p(()=>te.get(h.chroma)),num:p(()=>z.num(h.chroma)),intervals:p(()=>z.intervals(h.chroma)),semitones:p(()=>{let o=[];if(!n.intervals)return[];for(let e=1;e<n.intervals.length;e++)o[e-1]=L.semitones(n.intervals[e])-L.semitones(n.intervals[e-1]);return o})});function S(o,e){var i;e==1&&P(o+((i=c)==null?void 0:i.tonic))}function V(o){if(!h.editable||o==0)return;let e=[...h.chroma.split("")];e[o]=="1"?e[o]="0":e[o]="1",R("update:chroma",e.join(""))}const G=[...A].map((o,e)=>({name:o,pitch:e})),M=p(()=>{var u,v;let o=D(h.chroma.split(""),-((u=c)==null?void 0:u.tonic)),i=D(G,-((v=c)==null?void 0:v.tonic)).map((y,g)=>{var b;return _(y.pitch+((b=c)==null?void 0:b.tonic)+57,"midi").toNote()}).filter((y,g)=>{if(o[g]=="1")return!0});return oe.sortedNames(i)});function T(o=!1){var i;let e=[...M.value];if(o){e.push(_(((i=c)==null?void 0:i.tonic)+57+12,"midi").toNote());let u=[...M.value].reverse();e=[...e,...u]}e.forEach((u,v)=>{J(u,{time:`+${v/3}`}),B(u)})}function P(o=0,e=0){let i=_(o+57,"midi");J(i.toNote()),B(i.toNote())}function B(o){setTimeout(()=>le(o),2),setTimeout(()=>ne(o),300)}return(o,e)=>{var i,u,v,y,g,b,I,j;return m(),f("div",re,[s("div",{class:"w-3 flex flex-col items-center text-white text-opacity-90",style:x({backgroundColor:t(w)(a.chroma,(i=t(c))==null?void 0:i.tonic).hsl})},null,4),s("div",{class:"flex flex-col items-start w-full relative shadow-lg",style:x({backgroundColor:t(ae)(t(w)(a.chroma,(u=t(c))==null?void 0:u.tonic).hsl).alpha(.1).toHex()})},[s("div",ce,[s("div",ie,d(a.chroma),1),de,s("div",ue,[(m(!0),f($,null,N(n.intervals,l=>(m(),f("div",{class:"p-2px",key:l},d(l),1))),128))]),me,s("div",fe,[(m(!0),f($,null,N(n.semitones,(l,r)=>(m(),f("span",{key:r},d(r!=0?"-":"")+d(l),1))),128))]),he,s("div",ve,"# "+d(n.num),1)]),s("div",{class:O(["flex flex-wrap items-center justify-between p-2 gap-2",{"w-full":!0}])},[s("button",{class:"text-button text-white font-bold text-md flex gap-1",style:x({backgroundColor:t(w)(a.chroma,(v=t(c))==null?void 0:v.tonic).hsl}),onMousedown:e[0]||(e[0]=l=>t(H)(a.chroma)),onTouchstart:e[1]||(e[1]=W(l=>t(H)(a.chroma),["prevent","stop"])),onTouchend:e[2]||(e[2]=l=>t(C)(a.chroma)),onTouchcancel:e[3]||(e[3]=l=>t(C)(a.chroma)),onMouseup:e[4]||(e[4]=l=>t(C)(a.chroma)),onMouseleave:e[5]||(e[5]=l=>t(C)(a.chroma))},[s("span",pe,d((y=t(c))==null?void 0:y.note.name)+d(n.chord.aliases[0]||" "+n.scale.name),1)],36),s("div",xe,[X(o.$slots,"default",{},void 0,!0)]),n.chord.name||n.chord.aliases[0]?(m(),f("button",{key:0,class:"text-sm flex items-center gap-1 border-2 p-2 rounded-xl",style:x({borderColor:t(w)(a.chroma,(g=t(c))==null?void 0:g.tonic).hsl}),onClick:e[6]||(e[6]=l=>T())},[ye,s("div",ge,d((b=t(c))==null?void 0:b.note.name)+" "+d(n.chord.name||n.chord.aliases[0]),1)],4)):q("",!0),n.scale.name?(m(),f("button",{key:1,class:"text-button text-sm flex items-center",style:x({borderColor:t(w)(a.chroma,(I=t(c))==null?void 0:I.tonic).hsl}),onClick:e[7]||(e[7]=l=>T(!0))},[be,s("span",null,d((j=t(c))==null?void 0:j.note.name)+" "+d(n.scale.name)+" scale",1)],4)):q("",!0)]),s("div",we,[(m(!0),f($,null,N(a.chroma,(l,r)=>{var E;return m(),f("div",{class:O(["chroma-key text-xs",{active:l==1}]),onMouseenter:F=>S(r,l),onTouchstart:F=>S(r,l),key:r,onClick:F=>V(r),style:x({backgroundColor:t(se)(r,l),marginLeft:r==1||r==3||r==5||r==7||r==8||r==10?"12px":"2px"})},d(l==1?t(A)[(r+((E=t(c))==null?void 0:E.tonic))%12]:""),47,ke)}),128))])],4)])}}},_e=Q(Ce,[["__scopeId","data-v-ff43a388"]]);export{_e as _};
