import{_ as J,b as K,c as p,f as u,g as f,h as s,p as x,l as t,m,F as k,j as C,n as q,U,x as G,q as L}from"./framework.n9whnjNp.js";import{a as Q,b as W,L as X,J as Y,K as T,n as z,r as E,g as r,F as N,o as Z,d as w,p as _,s as $,M as ee,w as te,e as I,O as oe}from"./theme.BED6A57K.js";const se={class:"flex w-full rounded-xl overflow-hidden"},le={class:"flex flex-wrap items-center justify-stretch w-full text-sm px-2 bg-dark-800 bg-opacity-10"},ae={class:"p-2px"},ne={class:"flex font-bold",title:"Intervals"},re={class:"flex",title:"Steps"},ie={class:"p-1",title:"Pcset number"},ce={class:"mr-1"},me={class:"flex-1"},de={class:"font-bold -mt-2px"},ue={class:"flex justify-stretch mx-auto w-full p-2"},fe=["onMouseenter","onTouchstart","onClick"],he={__name:"ChromaRow",props:{chroma:{type:String,default:""},twoRow:{type:Boolean,default:!0},editable:{type:Boolean,default:!1}},emits:["update:chroma"],setup(i,{emit:R}){const V=R,h=i,a=K({minor:"101101011010",chord:p(()=>Q(h.chroma)),scale:p(()=>W(h.chroma)),num:p(()=>X(h.chroma)),intervals:p(()=>Y(h.chroma)),semitones:p(()=>{let o=[];if(!a.intervals)return[];for(let e=1;e<a.intervals.length;e++)o[e-1]=T(a.intervals[e])-T(a.intervals[e-1]);return o})});function S(o,e){var c;e==1&&H(o+((c=r)==null?void 0:c.tonic))}function A(o){if(!h.editable||o==0)return;let e=[...h.chroma.split("")];e[o]=="1"?e[o]="0":e[o]="1",V("update:chroma",e.join(""))}const D=[...z].map((o,e)=>({name:o,pitch:e})),B=p(()=>{var d,v;let o=E(h.chroma.split(""),-((d=r)==null?void 0:d.tonic)),c=E(D,-((v=r)==null?void 0:v.tonic)).map((y,g)=>{var b;return N(y.pitch+((b=r)==null?void 0:b.tonic)+57,"midi").toNote()}).filter((y,g)=>{if(o[g]=="1")return!0});return Z(c)});function j(o=!1){var c;let e=[...B.value];if(o){e.push(N(((c=r)==null?void 0:c.tonic)+57+12,"midi").toNote());let d=[...B.value].reverse();e=[...e,...d]}e.forEach((d,v)=>{setTimeout(()=>{I(d)},v*1e3/(2*oe.bpm/60))})}function H(o=0,e=0){let c=N(o+57,"midi");I(c.toNote())}return(o,e)=>{var c,d,v,y,g,b,M,P;return u(),f("div",se,[s("div",{class:"w-3 flex flex-col items-center text-white text-opacity-90",style:x({backgroundColor:t(w)(i.chroma,(c=t(r))==null?void 0:c.tonic).hsl})},null,4),s("div",{class:"flex flex-col items-start w-full relative shadow-lg",style:x({backgroundColor:t(te)(t(w)(i.chroma,(d=t(r))==null?void 0:d.tonic).hsl).alpha(.1).toHex()})},[s("div",le,[s("div",ae,m(i.chroma),1),e[6]||(e[6]=s("div",{class:"flex-1"},null,-1)),s("div",ne,[(u(!0),f(k,null,C(a.intervals,l=>(u(),f("div",{class:"p-2px",key:l},m(l),1))),128))]),e[7]||(e[7]=s("div",{class:"flex-1"},null,-1)),s("div",re,[(u(!0),f(k,null,C(a.semitones,(l,n)=>(u(),f("span",{key:n},m(n!=0?"-":"")+m(l),1))),128))]),e[8]||(e[8]=s("div",{class:"flex-1"},null,-1)),s("div",ie,"# "+m(a.num),1)]),s("div",{class:q(["flex flex-wrap items-center justify-between p-2 gap-2",{"w-full":!0}])},[s("button",{class:"text-button text-white font-bold text-md flex gap-1",style:x({backgroundColor:t(w)(i.chroma,(v=t(r))==null?void 0:v.tonic).hsl}),onPointerdown:e[0]||(e[0]=U(l=>t(_)(i.chroma),["prevent","stop"])),onPointerout:e[1]||(e[1]=l=>t($)(i.chroma)),onPointerup:e[2]||(e[2]=l=>t($)(i.chroma)),onPointerleave:e[3]||(e[3]=l=>t($)(i.chroma))},[s("span",ce,m((y=t(r))==null?void 0:y.note.name)+m(a.chord.aliases[0]||" "+a.scale.name),1)],36),s("div",me,[G(o.$slots,"default",{},void 0,!0)]),a.chord.name||a.chord.aliases[0]?(u(),f("button",{key:0,class:"text-sm flex items-center gap-1 border-2 p-2 rounded-xl",style:x({borderColor:t(w)(i.chroma,(g=t(r))==null?void 0:g.tonic).hsl}),onClick:e[4]||(e[4]=l=>j())},[e[9]||(e[9]=s("div",{class:"i-la-play"},null,-1)),s("div",de,m((b=t(r))==null?void 0:b.note.name)+" "+m(a.chord.name||a.chord.aliases[0]),1)],4)):L("",!0),a.scale.name?(u(),f("button",{key:1,class:"text-button text-sm flex items-center",style:x({borderColor:t(w)(i.chroma,(M=t(r))==null?void 0:M.tonic).hsl}),onClick:e[5]||(e[5]=l=>j(!0))},[e[10]||(e[10]=s("div",{class:"i-la-play -mt-1 mr-1"},null,-1)),s("span",null,m((P=t(r))==null?void 0:P.note.name)+" "+m(a.scale.name)+" scale",1)],4)):L("",!0)]),s("div",ue,[(u(!0),f(k,null,C(i.chroma,(l,n)=>{var F;return u(),f("div",{class:q(["chroma-key text-xs",{active:l==1}]),onMouseenter:O=>S(n,l),onTouchstart:O=>S(n,l),key:n,onClick:O=>A(n),style:x({backgroundColor:t(ee)(n,l),marginLeft:n==1||n==3||n==5||n==7||n==8||n==10?"12px":"2px"})},m(l==1?t(z)[(n+((F=t(r))==null?void 0:F.tonic))%12]:""),47,fe)}),128))])],4)])}}},xe=J(he,[["__scopeId","data-v-e9c9c8c7"]]);export{xe as _};
