import{_ as F,D as L,M as f,q as m,f as u,s as l,v,u as s,z as c,F as x,Y as y,y as C,t as $,a3 as T,k as q}from"./framework.CxSiiyCs.js";import{K as N,J as D,L as E,b as I,a as R,n as S,r as B,g as r,M as V,l as A,d as p,s as g,N as H,w as J,e as M,O as K,p as Y}from"./theme.DLCqlVTm.js";const G={class:"flex w-full rounded-xl overflow-hidden"},Q={class:"flex flex-wrap items-center justify-stretch w-full text-sm px-2 bg-dark-800 bg-opacity-10"},U={class:"p-2px"},W={class:"flex font-bold",title:"Intervals"},X={class:"flex",title:"Steps"},Z={class:"p-1",title:"Pcset number"},_={class:"mr-1"},ee={class:"flex-1"},te={class:"font-bold -mt-2px"},se={class:"flex justify-stretch mx-auto w-full p-2"},oe=["onMouseenter","onTouchstart","onClick"],le={__name:"ChromaRow",props:{chroma:{type:String,default:""},twoRow:{type:Boolean,default:!0},editable:{type:Boolean,default:!1}},emits:["update:chroma"],setup(i,{emit:P}){const j=P,d=i,n=L({minor:"101101011010",chord:f(()=>R(d.chroma)),scale:f(()=>I(d.chroma)),num:f(()=>E(d.chroma)),intervals:f(()=>D(d.chroma)),semitones:f(()=>{let a=[];if(!n.intervals)return[];for(let e=1;e<n.intervals.length;e++)a[e-1]=N(n.intervals[e])-N(n.intervals[e-1]);return a})});function b(a,e){e==1&&M(a+r?.tonic+57)}function O(a){if(!d.editable||a==0)return;let e=[...d.chroma.split("")];e[a]=="1"?e[a]="0":e[a]="1",j("update:chroma",e.join(""))}const z=[...S].map((a,e)=>({name:a,pitch:e})),k=f(()=>{let a=B(d.chroma.split(""),-r?.tonic),t=B(z,-r?.tonic).map((o,h)=>V(o.pitch+r?.tonic+57,"midi").toNote()).filter((o,h)=>{if(a[h]=="1")return!0});return A(t)});function w(a=!1){let e=[...k.value];if(a){e.push(r?.tonic+57+12);let t=[...k.value].reverse();e=[...e,...t]}e.forEach((t,o)=>{setTimeout(()=>{M(t)},o*1e3/(2*K.bpm/60))})}return(a,e)=>(u(),m("div",G,[l("div",{class:"w-3 flex flex-col items-center text-white text-opacity-90",style:v({backgroundColor:s(p)(i.chroma,s(r)?.tonic).hsl})},null,4),l("div",{class:"flex flex-col items-start w-full relative shadow-lg",style:v({backgroundColor:s(J)(s(p)(i.chroma,s(r)?.tonic).hsl).alpha(.1).toHex()})},[l("div",Q,[l("div",U,c(i.chroma),1),e[6]||(e[6]=l("div",{class:"flex-1"},null,-1)),l("div",W,[(u(!0),m(x,null,y(n.intervals,t=>(u(),m("div",{class:"p-2px",key:t},c(t),1))),128))]),e[7]||(e[7]=l("div",{class:"flex-1"},null,-1)),l("div",X,[(u(!0),m(x,null,y(n.semitones,(t,o)=>(u(),m("span",{key:o},c(o!=0?"-":"")+c(t),1))),128))]),e[8]||(e[8]=l("div",{class:"flex-1"},null,-1)),l("div",Z,"# "+c(n.num),1)]),l("div",{class:C(["flex flex-wrap items-center justify-between p-2 gap-2",{"w-full":!0}])},[l("button",{class:"text-button text-white font-bold text-md flex gap-1",style:v({backgroundColor:s(p)(i.chroma,s(r)?.tonic).hsl}),onPointerdown:e[0]||(e[0]=T(t=>s(Y)(i.chroma),["prevent","stop"])),onPointerout:e[1]||(e[1]=t=>s(g)(i.chroma)),onPointerup:e[2]||(e[2]=t=>s(g)(i.chroma)),onPointerleave:e[3]||(e[3]=t=>s(g)(i.chroma))},[l("span",_,c(s(r)?.note.name)+c(n.chord.aliases[0]||" "+n.scale.name),1)],36),l("div",ee,[q(a.$slots,"default",{},void 0,!0)]),n.chord.name||n.chord.aliases[0]?(u(),m("button",{key:0,class:"text-sm flex items-center gap-1 border-2 p-2 rounded-xl",style:v({borderColor:s(p)(i.chroma,s(r)?.tonic).hsl}),onClick:e[4]||(e[4]=t=>w())},[e[9]||(e[9]=l("div",{class:"i-la-play"},null,-1)),l("div",te,c(s(r)?.note.name)+" "+c(n.chord.name||n.chord.aliases[0]),1)],4)):$("",!0),n.scale.name?(u(),m("button",{key:1,class:"text-button text-sm flex items-center",style:v({borderColor:s(p)(i.chroma,s(r)?.tonic).hsl}),onClick:e[5]||(e[5]=t=>w(!0))},[e[10]||(e[10]=l("div",{class:"i-la-play -mt-1 mr-1"},null,-1)),l("span",null,c(s(r)?.note.name)+" "+c(n.scale.name)+" scale",1)],4)):$("",!0)]),l("div",se,[(u(!0),m(x,null,y(i.chroma,(t,o)=>(u(),m("div",{class:C(["chroma-key text-xs",{active:t==1}]),onMouseenter:h=>b(o,t),onTouchstart:h=>b(o,t),key:o,onClick:h=>O(o),style:v({backgroundColor:s(H)(o,t),marginLeft:o==1||o==3||o==5||o==7||o==8||o==10?"12px":"2px"})},c(t==1?s(S)[(o+s(r)?.tonic)%12]:""),47,oe))),128))])],4)]))}},re=F(le,[["__scopeId","data-v-f971559e"]]);export{re as _};
