import{q as X,b as Q,c as x,v as m,x as h,z as o,G as p,D as t,E as d,F as _,A as $,y as F,X as U,H as O,J as W,K as Y}from"./framework.ivEh5B39.js";import{l as Z,o as ee,ac as z,ae as E,e as A,r as D,g as c,F as N,k as te,q as k,t as H,v as C,ag as oe,w as se,y as L,x as R}from"./theme.DsfiP3rS.js";const y=s=>(W("data-v-68ecda4b"),s=s(),Y(),s),ae={class:"flex w-full rounded-xl overflow-hidden"},le={class:"flex flex-wrap items-center justify-stretch w-full text-sm px-2 bg-dark-800 bg-opacity-10"},ne={class:"p-2px"},re=y(()=>o("div",{class:"flex-1"},null,-1)),ce={class:"flex font-bold",title:"Intervals"},ie=y(()=>o("div",{class:"flex-1"},null,-1)),de={class:"flex",title:"Steps"},ue=y(()=>o("div",{class:"flex-1"},null,-1)),me={class:"p-1",title:"Pcset number"},he={class:"mr-1"},fe=y(()=>o("div",{class:"flex-1"},null,-1)),ve=y(()=>o("div",{class:"i-la-play"},null,-1)),xe={class:"font-bold -mt-2px"},pe=y(()=>o("div",{class:"i-la-play -mt-1 mr-1"},null,-1)),ye={class:"flex justify-stretch mx-auto w-full p-2"},ge=["onMouseenter","onTouchstart","onClick"],be={__name:"ChromaRow",props:{chroma:{type:String,default:""},twoRow:{type:Boolean,default:!0},editable:{type:Boolean,default:!1}},emits:["update:chroma"],setup(s,{emit:V}){const G=V,v=s,n=Q({minor:"101101011010",chord:x(()=>Z.get(v.chroma)),scale:x(()=>ee.get(v.chroma)),num:x(()=>z.num(v.chroma)),intervals:x(()=>z.intervals(v.chroma)),semitones:x(()=>{let l=[];if(!n.intervals)return[];for(let e=1;e<n.intervals.length;e++)l[e-1]=E.semitones(n.intervals[e])-E.semitones(n.intervals[e-1]);return l})});function S(l,e){var i;e==1&&P(l+((i=c)==null?void 0:i.tonic))}function J(l){if(!v.editable)return;let e=[...v.chroma.split("")];e[l]=="1"?e[l]="0":e[l]="1",G("update:chroma",e.join(""))}const K=[...A].map((l,e)=>({name:l,pitch:e})),M=x(()=>{var u,f;let l=D(v.chroma.split(""),-((u=c)==null?void 0:u.tonic)),i=D(K,-((f=c)==null?void 0:f.tonic)).map((g,b)=>{var w;return N(g.pitch+((w=c)==null?void 0:w.tonic)+57,"midi").toNote()}).filter((g,b)=>{if(l[b]=="1")return!0});return te.sortedNames(i)});function B(l=!1){var i;let e=[...M.value];if(l){e.push(N(((i=c)==null?void 0:i.tonic)+57+12,"midi").toNote());let u=[...M.value].reverse();e=[...e,...u]}e.forEach((u,f)=>{L(u,"8n",`+${f/3}`),R(u,{time:`+${f/3}`})})}function P(l=0,e=0){let i=N(l+57,"midi");R(i.toNote()),L(i.toNote())}return(l,e)=>{var i,u,f,g,b,w,I,T;return m(),h("div",ae,[o("div",{class:"w-3 flex flex-col items-center text-white text-opacity-90",style:p({backgroundColor:t(k)(s.chroma,(i=t(c))==null?void 0:i.tonic).hsl})},null,4),o("div",{class:"flex flex-col items-start w-full relative shadow-lg",style:p({backgroundColor:t(se)(t(k)(s.chroma,(u=t(c))==null?void 0:u.tonic).hsl).alpha(.1).toHex()})},[o("div",le,[o("div",ne,d(s.chroma),1),re,o("div",ce,[(m(!0),h(_,null,$(n.intervals,a=>(m(),h("div",{class:"p-2px",key:a},d(a),1))),128))]),ie,o("div",de,[(m(!0),h(_,null,$(n.semitones,(a,r)=>(m(),h("span",{key:r},d(r!=0?"-":"")+d(a),1))),128))]),ue,o("div",me,"# "+d(n.num),1)]),o("div",{class:F(["flex flex-wrap items-center justify-between p-2 gap-2",{"w-full":!0}])},[o("button",{class:"text-button text-white font-bold text-md flex gap-1",style:p({backgroundColor:t(k)(s.chroma,(f=t(c))==null?void 0:f.tonic).hsl}),onMousedown:e[0]||(e[0]=a=>t(H)(s.chroma)),onTouchstart:e[1]||(e[1]=U(a=>t(H)(s.chroma),["prevent","stop"])),onTouchend:e[2]||(e[2]=a=>t(C)(s.chroma)),onTouchcancel:e[3]||(e[3]=a=>t(C)(s.chroma)),onMouseup:e[4]||(e[4]=a=>t(C)(s.chroma)),onMouseleave:e[5]||(e[5]=a=>t(C)(s.chroma))},[o("span",he,d((g=t(c))==null?void 0:g.note.name)+d(n.chord.aliases[0]||" "+n.scale.name),1)],36),fe,n.chord.name||n.chord.aliases[0]?(m(),h("button",{key:0,class:"text-sm flex items-center gap-1 border-2 p-2 rounded-xl",style:p({borderColor:t(k)(s.chroma,(b=t(c))==null?void 0:b.tonic).hsl}),onClick:e[6]||(e[6]=a=>B())},[ve,o("div",xe,d((w=t(c))==null?void 0:w.note.name)+" "+d(n.chord.name||n.chord.aliases[0]),1)],4)):O("",!0),n.scale.name?(m(),h("button",{key:1,class:"text-button text-sm flex items-center",style:p({borderColor:t(k)(s.chroma,(I=t(c))==null?void 0:I.tonic).hsl}),onClick:e[7]||(e[7]=a=>B(!0))},[pe,o("span",null,d((T=t(c))==null?void 0:T.note.name)+" "+d(n.scale.name)+" scale",1)],4)):O("",!0)]),o("div",ye,[(m(!0),h(_,null,$(s.chroma,(a,r)=>{var j;return m(),h("div",{class:F(["chroma-key text-xs",{active:a==1}]),onMouseenter:q=>S(r,a),onTouchstart:q=>S(r,a),key:r,onClick:q=>J(r),style:p({backgroundColor:t(oe)(r,a),marginLeft:r==1||r==3||r==5||r==7||r==8||r==10?"12px":"2px"})},d(a==1?t(A)[(r+((j=t(c))==null?void 0:j.tonic))%12]:""),47,ge)}),128))])],4)])}}},Ce=X(be,[["__scopeId","data-v-68ecda4b"]]);export{Ce as _};
