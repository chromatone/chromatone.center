import{_ as Q,k as U,j as v,o as u,c as f,a as o,A as x,g as t,t as m,F as $,r as N,z as O,l as W,b as z,p as X,d as Y}from"./framework.IUYQRuva.js";import{r as q}from"./calculations.uITx2GSi.js";import{g as c,c as k,b as A,d as C,e as Z}from"./colors.urjlGKwl.js";import{p as E}from"./index.dCqutn0Q.js";import"./index.M7xXh-bS.js";import{i as L}from"./index.he4oviLp.js";import{n as ee}from"./index.rqYOHjSJ.js";import{F as _}from"./index.RYxauP_R.js";import{b as R}from"./synth.CnmFLY9j.js";import{f as V}from"./midi.I20eapAS.js";import{a as te,b as oe,n as D}from"./theory.KAWplcFe.js";import{w as se}from"./index.kn6emmbE.js";const y=s=>(X("data-v-d1ac1a30"),s=s(),Y(),s),ae={class:"flex w-full rounded-xl overflow-hidden"},le={class:"flex flex-wrap items-center justify-stretch w-full text-sm px-2 bg-dark-800 bg-opacity-10"},ne={class:"p-2px"},re=y(()=>o("div",{class:"flex-1"},null,-1)),ce={class:"flex font-bold",title:"Intervals"},ie=y(()=>o("div",{class:"flex-1"},null,-1)),me={class:"flex",title:"Steps"},de=y(()=>o("div",{class:"flex-1"},null,-1)),ue={class:"p-1",title:"Pcset number"},fe={class:"mr-1"},he=y(()=>o("div",{class:"flex-1"},null,-1)),pe=y(()=>o("div",{class:"i-la-play"},null,-1)),ve={class:"font-bold -mt-2px"},xe=y(()=>o("div",{class:"i-la-play -mt-1 mr-1"},null,-1)),ye={class:"flex justify-stretch mx-auto w-full p-2"},ge=["onMouseenter","onTouchstart","onClick"],be={__name:"ChromaRow",props:{chroma:{type:String},twoRow:{type:Boolean,default:!0},editable:{type:Boolean,default:!1}},emits:["update:chroma"],setup(s,{emit:H}){const P=H,p=s,n=U({minor:"101101011010",chord:v(()=>te.get(p.chroma)),scale:v(()=>oe.get(p.chroma)),num:v(()=>E.num(p.chroma)),intervals:v(()=>E.intervals(p.chroma)),semitones:v(()=>{let l=[];if(!n.intervals)return[];for(let e=1;e<n.intervals.length;e++)l[e-1]=L.semitones(n.intervals[e])-L.semitones(n.intervals[e-1]);return l})});function S(l,e){var i;e==1&&K(l+((i=c)==null?void 0:i.tonic))}function G(l){if(!p.editable)return;let e=[...p.chroma.split("")];e[l]=="1"?e[l]="0":e[l]="1",P("update:chroma",e.join(""))}const J=[...D].map((l,e)=>({name:l,pitch:e})),M=v(()=>{var d,h;let l=q(p.chroma.split(""),-((d=c)==null?void 0:d.tonic)),i=q(J,-((h=c)==null?void 0:h.tonic)).map((g,b)=>{var w;return _(g.pitch+((w=c)==null?void 0:w.tonic)+57,"midi").toNote()}).filter((g,b)=>{if(l[b]=="1")return!0});return ee.sortedNames(i)});function T(l=!1){var i;let e=[...M.value];if(l){e.push(_(((i=c)==null?void 0:i.tonic)+57+12,"midi").toNote());let d=[...M.value].reverse();e=[...e,...d]}e.forEach((d,h)=>{R(d,"8n",`+${h/3}`),V(d,{time:`+${h/3}`})})}function K(l=0,e=0){let i=_(l+57,"midi");V(i.toNote()),R(i.toNote())}return(l,e)=>{var i,d,h,g,b,w,B,j;return u(),f("div",ae,[o("div",{class:"w-3 flex flex-col items-center text-white text-opacity-90",style:x({backgroundColor:t(k)(s.chroma,(i=t(c))==null?void 0:i.tonic).hsl})},null,4),o("div",{class:"flex flex-col items-start w-full relative shadow-lg",style:x({backgroundColor:t(se)(t(k)(s.chroma,(d=t(c))==null?void 0:d.tonic).hsl).alpha(.1).toHex()})},[o("div",le,[o("div",ne,m(s.chroma),1),re,o("div",ce,[(u(!0),f($,null,N(n.intervals,a=>(u(),f("div",{class:"p-2px",key:a},m(a),1))),128))]),ie,o("div",me,[(u(!0),f($,null,N(n.semitones,(a,r)=>(u(),f("span",{key:r},m(r!=0?"-":"")+m(a),1))),128))]),de,o("div",ue,"# "+m(n.num),1)]),o("div",{class:O(["flex flex-wrap items-center justify-between p-2 gap-2",{"w-full":!0}])},[o("button",{class:"text-button text-white font-bold text-md flex gap-1",style:x({backgroundColor:t(k)(s.chroma,(h=t(c))==null?void 0:h.tonic).hsl}),onMousedown:e[0]||(e[0]=a=>t(A)(s.chroma)),onTouchstart:e[1]||(e[1]=W(a=>t(A)(s.chroma),["prevent","stop"])),onTouchend:e[2]||(e[2]=a=>t(C)(s.chroma)),onTouchcancel:e[3]||(e[3]=a=>t(C)(s.chroma)),onMouseup:e[4]||(e[4]=a=>t(C)(s.chroma)),onMouseleave:e[5]||(e[5]=a=>t(C)(s.chroma))},[o("span",fe,m((g=t(c))==null?void 0:g.note.name)+m(n.chord.aliases[0]||" "+n.scale.name),1)],36),he,n.chord.name||n.chord.aliases[0]?(u(),f("button",{key:0,class:"text-sm flex items-center gap-1 border-2 p-2 rounded-xl",style:x({borderColor:t(k)(s.chroma,(b=t(c))==null?void 0:b.tonic).hsl}),onClick:e[6]||(e[6]=a=>T())},[pe,o("div",ve,m((w=t(c))==null?void 0:w.note.name)+" "+m(n.chord.name||n.chord.aliases[0]),1)],4)):z("",!0),n.scale.name?(u(),f("button",{key:1,class:"text-button text-sm flex items-center",style:x({borderColor:t(k)(s.chroma,(B=t(c))==null?void 0:B.tonic).hsl}),onClick:e[7]||(e[7]=a=>T(!0))},[xe,o("span",null,m((j=t(c))==null?void 0:j.note.name)+" "+m(n.scale.name)+" scale",1)],4)):z("",!0)]),o("div",ye,[(u(!0),f($,null,N(s.chroma,(a,r)=>{var I;return u(),f("div",{class:O(["chroma-key text-xs",{active:a==1}]),onMouseenter:F=>S(r,a),onTouchstart:F=>S(r,a),key:r,onClick:F=>G(r),style:x({backgroundColor:t(Z)(r,a),marginLeft:r==1||r==3||r==5||r==7||r==8||r==10?"12px":"2px"})},m(a==1?t(D)[(r+((I=t(c))==null?void 0:I.tonic))%12]:""),47,ge)}),128))])],4)])}}},Fe=Q(be,[["__scopeId","data-v-d1ac1a30"]]);export{Fe as _};
