import{_ as K,D as Q,i as v,o as u,c as f,a as o,v as x,h as t,t as m,F as C,r as $,q as O,y as U,d as q,p as W,e as X}from"./framework.cf854830.js";import{r as R}from"./calculations.65ee336d.js";import{g as c,c as _,e as z,f as k,b as Y}from"./colors.488b2121.js";import{p as D}from"./index.b30cd6d2.js";import"./index.86652af6.js";import{i as E}from"./index.ab22ef51.js";import{n as Z}from"./index.c4267bd4.js";import{F as N}from"./index.d775f97e.js";import{b as L}from"./synth.477cac72.js";import{e as V}from"./midi.5076ee7a.js";import{a as ee,b as te,n as A}from"./theory.61e5aadb.js";import{w as oe}from"./index.654bd828.js";const y=s=>(W("data-v-d1ac1a30"),s=s(),X(),s),se={class:"flex w-full rounded-xl overflow-hidden"},ae={class:"flex flex-wrap items-center justify-stretch w-full text-sm px-2 bg-dark-800 bg-opacity-10"},le={class:"p-2px"},ne=y(()=>o("div",{class:"flex-1"},null,-1)),re={class:"flex font-bold",title:"Intervals"},ce=y(()=>o("div",{class:"flex-1"},null,-1)),ie={class:"flex",title:"Steps"},me=y(()=>o("div",{class:"flex-1"},null,-1)),de={class:"p-1",title:"Pcset number"},ue={class:"mr-1"},fe=y(()=>o("div",{class:"flex-1"},null,-1)),he=y(()=>o("div",{class:"i-la-play"},null,-1)),pe={class:"font-bold -mt-2px"},ve=y(()=>o("div",{class:"i-la-play -mt-1 mr-1"},null,-1)),xe={class:"flex justify-stretch mx-auto w-full p-2"},ye=["onMouseenter","onTouchstart","onClick"],ge={__name:"ChromaRow",props:{chroma:{type:String},twoRow:{type:Boolean,default:!0},editable:{type:Boolean,default:!1}},emits:["update:chroma"],setup(s,{emit:H}){const p=s,n=Q({minor:"101101011010",chord:v(()=>ee.get(p.chroma)),scale:v(()=>te.get(p.chroma)),num:v(()=>D.num(p.chroma)),intervals:v(()=>D.intervals(p.chroma)),semitones:v(()=>{let l=[];if(!n.intervals)return[];for(let e=1;e<n.intervals.length;e++)l[e-1]=E.semitones(n.intervals[e])-E.semitones(n.intervals[e-1]);return l})});function S(l,e){var i;e==1&&J(l+((i=c)==null?void 0:i.tonic))}function P(l){if(!p.editable)return;let e=[...p.chroma.split("")];e[l]=="1"?e[l]="0":e[l]="1",H("update:chroma",e.join(""))}const G=[...A].map((l,e)=>({name:l,pitch:e})),M=v(()=>{var d,h;let l=R(p.chroma.split(""),-((d=c)==null?void 0:d.tonic)),i=R(G,-((h=c)==null?void 0:h.tonic)).map((g,b)=>{var w;return N(g.pitch+((w=c)==null?void 0:w.tonic)+57,"midi").toNote()}).filter((g,b)=>{if(l[b]=="1")return!0});return Z.sortedNames(i)});function T(l=!1){var i;let e=[...M.value];if(l){e.push(N(((i=c)==null?void 0:i.tonic)+57+12,"midi").toNote());let d=[...M.value].reverse();e=[...e,...d]}e.forEach((d,h)=>{L(d,"8n",`+${h/3}`),V(d,{time:`+${h/3}`})})}function J(l=0,e=0){let i=N(l+57,"midi");V(i.toNote()),L(i.toNote())}return(l,e)=>{var i,d,h,g,b,w,B,I;return u(),f("div",se,[o("div",{class:"w-3 flex flex-col items-center text-white text-opacity-90",style:x({backgroundColor:t(_)(s.chroma,(i=t(c))==null?void 0:i.tonic).hsl})},null,4),o("div",{class:"flex flex-col items-start w-full relative shadow-lg",style:x({backgroundColor:t(oe)(t(_)(s.chroma,(d=t(c))==null?void 0:d.tonic).hsl).alpha(.1).toHex()})},[o("div",ae,[o("div",le,m(s.chroma),1),ne,o("div",re,[(u(!0),f(C,null,$(n.intervals,a=>(u(),f("div",{class:"p-2px",key:a},m(a),1))),128))]),ce,o("div",ie,[(u(!0),f(C,null,$(n.semitones,(a,r)=>(u(),f("span",{key:r},m(r!=0?"-":"")+m(a),1))),128))]),me,o("div",de,"# "+m(n.num),1)]),o("div",{class:O(["flex flex-wrap items-center justify-between p-2 gap-2",{"w-full":!0}])},[o("button",{class:"text-button text-white font-bold text-md flex gap-1",style:x({backgroundColor:t(_)(s.chroma,(h=t(c))==null?void 0:h.tonic).hsl}),onMousedown:e[0]||(e[0]=a=>t(z)(s.chroma)),onTouchstart:e[1]||(e[1]=U(a=>t(z)(s.chroma),["prevent","stop"])),onTouchend:e[2]||(e[2]=a=>t(k)(s.chroma)),onTouchcancel:e[3]||(e[3]=a=>t(k)(s.chroma)),onMouseup:e[4]||(e[4]=a=>t(k)(s.chroma)),onMouseleave:e[5]||(e[5]=a=>t(k)(s.chroma))},[o("span",ue,m((g=t(c))==null?void 0:g.note.name)+m(n.chord.aliases[0]||" "+n.scale.name),1)],36),fe,n.chord.name||n.chord.aliases[0]?(u(),f("button",{key:0,class:"text-sm flex items-center gap-1 border-2 p-2 rounded-xl",style:x({borderColor:t(_)(s.chroma,(b=t(c))==null?void 0:b.tonic).hsl}),onClick:e[6]||(e[6]=a=>T())},[he,o("div",pe,m((w=t(c))==null?void 0:w.note.name)+" "+m(n.chord.name||n.chord.aliases[0]),1)],4)):q("",!0),n.scale.name?(u(),f("button",{key:1,class:"text-button text-sm flex items-center",style:x({borderColor:t(_)(s.chroma,(B=t(c))==null?void 0:B.tonic).hsl}),onClick:e[7]||(e[7]=a=>T(!0))},[ve,o("span",null,m((I=t(c))==null?void 0:I.note.name)+" "+m(n.scale.name)+" scale",1)],4)):q("",!0)]),o("div",xe,[(u(!0),f(C,null,$(s.chroma,(a,r)=>{var j;return u(),f("div",{class:O(["chroma-key text-xs",{active:a==1}]),onMouseenter:F=>S(r,a),onTouchstart:F=>S(r,a),key:r,onClick:F=>P(r),style:x({backgroundColor:t(Y)(r,a),marginLeft:r==1||r==3||r==5||r==7||r==8||r==10?"12px":"2px"})},m(a==1?t(A)[(r+((j=t(c))==null?void 0:j.tonic))%12]:""),47,ye)}),128))])],4)])}}},je=K(ge,[["__scopeId","data-v-d1ac1a30"]]);export{je as _};
