import{l as N}from"./midi.d68b2a41.js";import{u as h}from"./index.0838cce3.js";import{a9 as V,x as g,r as k,b as C,H as S,P as w,o as B,c as D,a as i,C as K,t as c,_ as E}from"./framework.18a7d3ba.js";const I={class:"p-1"},z={class:"text-lg font-bold"},F={class:"text-sm"},H=V({__name:"ControlKnob",props:{max:{type:Number,default:100},min:{type:Number,default:0},modelValue:{type:Number,default:50},step:{type:Number,default:1},param:{type:String,default:"param"},unit:{type:String,default:""},fixed:{type:Number,default:1},cc:{type:Number,default:0},channel:{type:Number,default:0}},emits:["update:modelValue"],setup(o,{emit:d}){const a=o,m=g();h(t=>{_(t)},{domTarget:m,preventWindowScrollY:!0});const e=k({active:!1,internal:0,initial:0,external:C(()=>v(e.internal))}),p=N({number:a.cc,channel:a.channel});S(p,t=>{e.internal=t*100,d("update:modelValue",e.external)});function _(t){const{delta:[n,l],dragging:r,shiftKey:s}=t;e.active=r;let u=s?12:4;e.internal-=l/u,e.internal+=n/u,e.internal>100&&(e.internal=100),e.internal<0&&(e.internal=0),d("update:modelValue",e.external)}w(()=>{e.internal=y(a.modelValue)});function b(){e.internal=e.initial,d("update:modelValue",e.external)}function y(t){return f(t,a.min,a.max,0,100,a.step)}function v(t){return f(t,0,100,a.min,a.max,a.step)}function f(t,n=0,l=100,r=0,s=100,u=1){s=Number(s),r=Number(r),l=Number(l),n=Number(n);let x=(t-n)*(s-r)/(l-n)+r;return Math.round(x/u)*u}return(t,n)=>(B(),D("div",{class:"knob",ref_key:"knob",ref:m,onDblclick:n[0]||(n[0]=l=>b())},[i("div",{class:"level",style:K({height:e.internal+"%"})},null,4),i("div",I,[i("div",z,c(o.modelValue.toFixed(o.fixed))+c(o.unit),1),i("div",F,c(o.param.toUpperCase()),1)])],544))}});const T=E(H,[["__scopeId","data-v-10229aed"]]);export{T as _};
