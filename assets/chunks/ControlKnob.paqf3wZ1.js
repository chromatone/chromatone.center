import{l as x}from"./midi.91UwWBqe.js";import{u as V}from"./index.rstREGm8.js";import{_ as k,i as g,k as S,j as w,w as C,D,o as B,c as E,a as u,A as I,t as d}from"./framework.KnxPB1sj.js";const K={class:"p-1"},j={class:"text-lg font-bold"},z={class:"text-sm"},A={__name:"ControlKnob",props:{max:{type:Number,default:100},min:{type:Number,default:0},modelValue:{type:Number,default:50},step:{type:Number,default:1},param:{type:String,default:"param"},unit:{type:String,default:""},fixed:{type:Number,default:1},cc:{type:Number,default:0},channel:{type:Number,default:0}},emits:["update:modelValue"],setup(o,{emit:p}){const a=o,c=p,m=g();V(t=>{y(t)},{domTarget:m,preventWindowScrollY:!0});const e=S({active:!1,internal:0,initial:0,external:w(()=>h(e.internal))}),b=x({number:a.cc,channel:a.channel});C(b,t=>{e.internal=t*100,c("update:modelValue",e.external)});function y(t){const{delta:[n,l],dragging:r,shiftKey:i}=t;e.active=r;let s=i?12:4;e.internal-=l/s,e.internal+=n/s,e.internal>100&&(e.internal=100),e.internal<0&&(e.internal=0),c("update:modelValue",e.external)}D(()=>{e.internal=_(a.modelValue)});function N(){e.internal=e.initial,c("update:modelValue",e.external)}function _(t){return f(t,a.min,a.max,0,100,a.step)}function h(t){return f(t,0,100,a.min,a.max,a.step)}function f(t,n=0,l=100,r=0,i=100,s=1){i=Number(i),r=Number(r),l=Number(l),n=Number(n);let v=(t-n)*(i-r)/(l-n)+r;return Math.round(v/s)*s}return(t,n)=>(B(),E("div",{class:"knob",ref_key:"knob",ref:m,onDblclick:n[0]||(n[0]=l=>N())},[u("div",{class:"level",style:I({height:e.internal+"%"})},null,4),u("div",K,[u("div",j,d(o.modelValue.toFixed(o.fixed))+d(o.unit),1),u("div",z,d(o.param.toUpperCase()),1)])],544))}},T=k(A,[["__scopeId","data-v-911821c9"]]);export{T as _};
