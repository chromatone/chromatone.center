import{l as v}from"./midi.36560961.js";import{a as V}from"./index.64a8684b.js";import{u as w}from"./index.911cb71e.js";import{_ as N,k as C,j as S,A as I,w as M,i as B,z as D,o as h,c as x,a as n,t as p,p as $,d as E}from"./framework.f277db28.js";const k=o=>($("data-v-57a4cef1"),o=o(),E(),o),O={viewBox:"0 0 100 120"},R={stroke:"currentColor"},W=k(()=>n("path",{d:"M25,90 a 45,45,1,1,1,50,0",fill:"none",stroke:"#9996","stroke-width":"8","stroke-linecap":"round"},null,-1)),j=["stroke","stroke-dashoffset"],z=["transform"],A=k(()=>n("circle",{"stroke-width":"2",fill:"none",r:38,opacity:"0.6"},null,-1)),F=[A],G={transform:"translate(50,50)","text-anchor":"middle","dominant-baseline":"middle",fill:"currentColor"},P=["transform"],T={"dominant-baseline":"middle"},U={transform:"translate(0,20)"},Y={"dominant-baseline":"middle"},q={class:"font-bold",transform:"translate(0,58)"},H={"dominant-baseline":"middle"},J=45,K={__name:"ControlRotary",props:{max:{type:Number,default:100},min:{type:Number,default:0},modelValue:{type:Number,default:50},step:{type:Number,default:1},param:{type:String,default:"param"},unit:{type:String,default:""},fixed:{type:Number,default:1},cc:{type:Number,default:0},channel:{type:Number,default:0}},emits:["update:modelValue"],setup(o,{emit:d}){const t=o,e=C({active:!1,internal:w(0,0,100),initial:0,external:S(()=>g(e.internal))});I(()=>{e.initial=f(t.modelValue)});const b=v({param:t.param,number:t.cc,channel:t.channel});M(b,a=>{e.internal=a*100,d("update:modelValue",e.external)});const m=B();V({onDrag({delta:[a,s],dragging:i,shiftKey:r}){e.active=i;let l=r?12:2;e.internal-=s/l,e.internal+=a/l,d("update:modelValue",e.external)},onWheel({delta:[a,s],dragging:i,shiftKey:r,event:l}){l.preventDefault();let u=r?12:8;e.internal+=s/u,e.internal-=a/u,d("update:modelValue",e.external)}},{drag:{preventWindowScrollY:!0},eventOptions:{capture:!1,passive:!1},domTarget:m}),D(()=>{e.internal=f(t.modelValue)});function y(){e.internal=e.initial,d("update:modelValue",e.external)}function f(a){return _(a,t.min,t.max,0,100,t.step)}function g(a){return Math.round(_(a,0,100,t.min,t.max,t.step)/t.step)*t.step}function _(a,s=0,i=100,r=0,l=100,u=1){return(a-s)*(l-r)/(i-s)+r}const c=Math.PI*2*J-50;return(a,s)=>(h(),x("div",{class:"knob",ref_key:"knob",ref:m,onDblclick:s[0]||(s[0]=i=>y())},[(h(),x("svg",O,[n("g",R,[W,n("path",{d:"M25,90 a 45,45,1,1,1,50,0",fill:"none",stroke:`hsla(${e.internal*3.6}deg,70%,50%,0.8)`,"stroke-width":"12","stroke-linecap":"round","stroke-dasharray":c,"stroke-dashoffset":c-c*(e.internal/100)},null,8,j),n("g",{transform:`translate(50,52.5) rotate(${e.internal*2.9}) `},F,8,z)]),n("g",G,[n("text",{class:"font-bold text-2xl",transform:`translate(0,${o.unit?-3:5})`},[n("tspan",T,p(o.modelValue.toFixed(o.fixed)),1)],8,P),n("text",U,[n("tspan",Y,p(o.unit),1)]),n("text",q,[n("tspan",H,p(o.param.toUpperCase()),1)])])]))],544))}},te=N(K,[["__scopeId","data-v-57a4cef1"]]);export{te as _};
