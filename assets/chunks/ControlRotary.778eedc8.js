import{l as g}from"./midi.490ff1fe.js";import{a as w}from"./index.b129171f.js";import{u as V}from"./index.2be4a733.js";import{_ as N,k as S,j as C,A as I,w as M,i as $,z as B,o as x,c as k,a as n,I as D,t as p,p as W,d as z}from"./framework.5d1030ab.js";const f=o=>(W("data-v-5f41c603"),o=o(),z(),o),E=f(()=>n("div",{class:"i-ph-arrows-horizontal absolute text-10px top-14px opacity-70"},null,-1)),O={viewBox:"0 0 100 120"},R={stroke:"currentColor"},Y=f(()=>n("path",{d:"M25,90 a 45,45,1,1,1,50,0",fill:"none",stroke:"#9996","stroke-width":"8","stroke-linecap":"round"},null,-1)),j=["stroke","stroke-dashoffset"],A=["transform"],F=f(()=>n("circle",{"stroke-width":"2",fill:"none",r:38,opacity:"0.6"},null,-1)),G=[F],P={transform:"translate(50,50)","text-anchor":"middle","dominant-baseline":"middle",fill:"currentColor"},T=["transform"],U={transform:"translate(0,20)"},q={class:"font-bold",transform:"translate(0,58)"},H=45,J={__name:"ControlRotary",props:{max:{type:Number,default:100},min:{type:Number,default:0},modelValue:{type:Number,default:50},step:{type:Number,default:1},param:{type:String,default:"param"},unit:{type:String,default:""},fixed:{type:Number,default:1},cc:{type:Number,default:0},channel:{type:Number,default:0}},emits:["update:modelValue"],setup(o,{emit:d}){const e=o,t=S({active:!1,internal:V(0,0,100),initial:0,external:C(()=>b(t.internal))});I(()=>{t.initial=_(e.modelValue)});const v=g({param:e.param,number:e.cc,channel:e.channel});M(v,a=>{t.internal=a*100,d("update:modelValue",t.external)});const m=$();w({onDrag({delta:[a,r],dragging:l,shiftKey:s}){t.active=l;let i=s?12:2;t.internal-=r/i,t.internal+=a/i,d("update:modelValue",t.external)},onWheel({delta:[a,r],dragging:l,shiftKey:s,event:i}){t.active=l,i.preventDefault();let c=s?12:8;t.internal+=r/c,t.internal-=a/c,d("update:modelValue",t.external)}},{drag:{preventWindowScrollY:!0},wheel:{preventWindowScrollY:!0},eventOptions:{capture:!1,passive:!1},domTarget:m}),B(()=>{t.internal=_(e.modelValue)});function y(){t.internal=t.initial,d("update:modelValue",t.external)}function _(a){return h(a,e.min,e.max,0,100,e.step)}function b(a){return Math.round(h(a,0,100,e.min,e.max,e.step)/e.step)*e.step}function h(a,r=0,l=100,s=0,i=100,c=1){return(a-r)*(i-s)/(l-r)+s}const u=Math.PI*2*H-50;return(a,r)=>(x(),k("div",{class:"knob",ref_key:"knob",ref:m,onDblclick:r[0]||(r[0]=l=>y())},[E,(x(),k("svg",O,[n("g",R,[Y,n("path",{d:"M25,90 a 45,45,1,1,1,50,0",fill:"none",stroke:`hsla(${t.internal*3.6}deg,70%,50%,0.8)`,"stroke-width":"12","stroke-linecap":"round","stroke-dasharray":u,"stroke-dashoffset":u-u*(t.internal/100)},null,8,j),n("g",{transform:`translate(50,52.5) rotate(${t.internal*2.9}) `},G,8,A)]),n("g",P,[n("text",{class:"font-bold text-2xl",transform:`translate(0,${o.unit?-3:5})`},[D(a.$slots,"default",{},()=>[n("tspan",null,p(o.modelValue.toFixed(o.fixed)),1)],!0)],8,T),n("text",U,[n("tspan",null,p(o.unit),1)]),n("text",q,[n("tspan",null,p(o.param.toUpperCase()),1)])])]))],544))}},tt=N(J,[["__scopeId","data-v-5f41c603"]]);export{tt as _};
