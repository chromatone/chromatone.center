import{l as g}from"./midi.RNICv3HM.js";import{a as V}from"./index.iB1AmcYb.js";import{u as N}from"./index.qXrjdxB9.js";import{_ as S,k as C,j as I,E as D,w as M,i as $,D as B,o as x,c as k,a as n,N as E,t as p,p as W,d as O}from"./framework.zmD4b-eB.js";const m=o=>(W("data-v-5f41c603"),o=o(),O(),o),Y=m(()=>n("div",{class:"i-ph-arrows-horizontal absolute text-10px top-14px opacity-70"},null,-1)),j={viewBox:"0 0 100 120"},z={stroke:"currentColor"},F=m(()=>n("path",{d:"M25,90 a 45,45,1,1,1,50,0",fill:"none",stroke:"#9996","stroke-width":"8","stroke-linecap":"round"},null,-1)),G=["stroke","stroke-dashoffset"],P=["transform"],R=m(()=>n("circle",{"stroke-width":"2",fill:"none",r:38,opacity:"0.6"},null,-1)),T=[R],U={transform:"translate(50,50)","text-anchor":"middle","dominant-baseline":"middle",fill:"currentColor"},q=["transform"],A={transform:"translate(0,20)"},H={class:"font-bold",transform:"translate(0,58)"},J=45,K={__name:"ControlRotary",props:{max:{type:Number,default:100},min:{type:Number,default:0},modelValue:{type:Number,default:50},step:{type:Number,default:1},param:{type:String,default:"param"},unit:{type:String,default:""},fixed:{type:Number,default:1},cc:{type:Number,default:0},channel:{type:Number,default:0}},emits:["update:modelValue"],setup(o,{emit:b}){const e=o,d=b,t=C({active:!1,internal:N(0,0,100),initial:0,external:I(()=>w(t.internal))});D(()=>{t.initial=h(e.modelValue)});const v=g({param:e.param,number:e.cc,channel:e.channel});M(v,a=>{t.internal=a*100,d("update:modelValue",t.external)});const f=$();V({onDrag({delta:[a,r],dragging:l,shiftKey:s}){t.active=l;let i=s?12:2;t.internal-=r/i,t.internal+=a/i,d("update:modelValue",t.external)},onWheel({delta:[a,r],dragging:l,shiftKey:s,event:i}){t.active=l,i.preventDefault();let c=s?12:8;t.internal+=r/c,t.internal-=a/c,d("update:modelValue",t.external)}},{drag:{preventWindowScrollY:!0},wheel:{preventWindowScrollY:!0},eventOptions:{capture:!1,passive:!1},domTarget:f}),B(()=>{t.internal=h(e.modelValue)});function y(){t.internal=t.initial,d("update:modelValue",t.external)}function h(a){return _(a,e.min,e.max,0,100,e.step)}function w(a){return Math.round(_(a,0,100,e.min,e.max,e.step)/e.step)*e.step}function _(a,r=0,l=100,s=0,i=100,c=1){return(a-r)*(i-s)/(l-r)+s}const u=Math.PI*2*J-50;return(a,r)=>(x(),k("div",{class:"knob",ref_key:"knob",ref:f,onDblclick:r[0]||(r[0]=l=>y())},[Y,(x(),k("svg",j,[n("g",z,[F,n("path",{d:"M25,90 a 45,45,1,1,1,50,0",fill:"none",stroke:`hsla(${t.internal*3.6}deg,70%,50%,0.8)`,"stroke-width":"12","stroke-linecap":"round","stroke-dasharray":u,"stroke-dashoffset":u-u*(t.internal/100)},null,8,G),n("g",{transform:`translate(50,52.5) rotate(${t.internal*2.9}) `},T,8,P)]),n("g",U,[n("text",{class:"font-bold text-2xl",transform:`translate(0,${o.unit?-3:5})`},[E(a.$slots,"default",{},()=>[n("tspan",null,p(o.modelValue.toFixed(o.fixed)),1)],!0)],8,q),n("text",A,[n("tspan",null,p(o.unit),1)]),n("text",H,[n("tspan",null,p(o.param.toUpperCase()),1)])])]))],544))}},et=S(K,[["__scopeId","data-v-5f41c603"]]);export{et as _};
