import{l as g}from"./midi.b5556f9f.js";import{a as w}from"./index.c020f286.js";import{u as V}from"./index.edce5462.js";import{_ as N,k as C,j as S,A as I,w as M,i as B,z as D,o as x,c as b,a,t as p,p as $,d as W}from"./framework.88db3c26.js";const m=o=>($("data-v-4a790267"),o=o(),W(),o),z=m(()=>a("div",{class:"i-ph-arrows-horizontal absolute text-10px top-14px opacity-70"},null,-1)),E={viewBox:"0 0 100 120"},O={stroke:"currentColor"},R=m(()=>a("path",{d:"M25,90 a 45,45,1,1,1,50,0",fill:"none",stroke:"#9996","stroke-width":"8","stroke-linecap":"round"},null,-1)),Y=["stroke","stroke-dashoffset"],j=["transform"],A=m(()=>a("circle",{"stroke-width":"2",fill:"none",r:38,opacity:"0.6"},null,-1)),F=[A],G={transform:"translate(50,50)","text-anchor":"middle","dominant-baseline":"middle",fill:"currentColor"},P=["transform"],T={"dominant-baseline":"middle"},U={transform:"translate(0,20)"},q={"dominant-baseline":"middle"},H={class:"font-bold",transform:"translate(0,58)"},J={"dominant-baseline":"middle"},K=45,L={__name:"ControlRotary",props:{max:{type:Number,default:100},min:{type:Number,default:0},modelValue:{type:Number,default:50},step:{type:Number,default:1},param:{type:String,default:"param"},unit:{type:String,default:""},fixed:{type:Number,default:1},cc:{type:Number,default:0},channel:{type:Number,default:0}},emits:["update:modelValue"],setup(o,{emit:d}){const e=o,t=C({active:!1,internal:V(0,0,100),initial:0,external:S(()=>y(t.internal))});I(()=>{t.initial=_(e.modelValue)});const k=g({param:e.param,number:e.cc,channel:e.channel});M(k,n=>{t.internal=n*100,d("update:modelValue",t.external)});const f=B();w({onDrag({delta:[n,s],dragging:r,shiftKey:l}){t.active=r;let i=l?12:2;t.internal-=s/i,t.internal+=n/i,d("update:modelValue",t.external)},onWheel({delta:[n,s],dragging:r,shiftKey:l,event:i}){t.active=r,i.preventDefault();let c=l?12:8;t.internal+=s/c,t.internal-=n/c,d("update:modelValue",t.external)}},{drag:{preventWindowScrollY:!0},wheel:{preventWindowScrollY:!0},eventOptions:{capture:!1,passive:!1},domTarget:f}),D(()=>{t.internal=_(e.modelValue)});function v(){t.internal=t.initial,d("update:modelValue",t.external)}function _(n){return h(n,e.min,e.max,0,100,e.step)}function y(n){return Math.round(h(n,0,100,e.min,e.max,e.step)/e.step)*e.step}function h(n,s=0,r=100,l=0,i=100,c=1){return(n-s)*(i-l)/(r-s)+l}const u=Math.PI*2*K-50;return(n,s)=>(x(),b("div",{class:"knob",ref_key:"knob",ref:f,onDblclick:s[0]||(s[0]=r=>v())},[z,(x(),b("svg",E,[a("g",O,[R,a("path",{d:"M25,90 a 45,45,1,1,1,50,0",fill:"none",stroke:`hsla(${t.internal*3.6}deg,70%,50%,0.8)`,"stroke-width":"12","stroke-linecap":"round","stroke-dasharray":u,"stroke-dashoffset":u-u*(t.internal/100)},null,8,Y),a("g",{transform:`translate(50,52.5) rotate(${t.internal*2.9}) `},F,8,j)]),a("g",G,[a("text",{class:"font-bold text-2xl",transform:`translate(0,${o.unit?-3:5})`},[a("tspan",T,p(o.modelValue.toFixed(o.fixed)),1)],8,P),a("text",U,[a("tspan",q,p(o.unit),1)]),a("text",H,[a("tspan",J,p(o.param.toUpperCase()),1)])])]))],544))}},at=N(L,[["__scopeId","data-v-4a790267"]]);export{at as _};
