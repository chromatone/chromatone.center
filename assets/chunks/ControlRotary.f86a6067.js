import{l as w}from"./midi.9486e5fa.js";import{_ as N,r as V,b as C,H as S,P as I,A as B,B as D,o as f,c as _,a as e,t as m,p as M,q as $}from"./framework.c7ad3ca2.js";const h=n=>(M("data-v-634d8954"),n=n(),$(),n),E={viewBox:"0 0 100 120"},P={stroke:"currentColor"},R=h(()=>e("path",{d:"M25,90 a 45,45,1,1,1,50,0",fill:"none",stroke:"#9996","stroke-width":"8","stroke-linecap":"round"},null,-1)),q=["stroke-dashoffset"],A=["transform"],F=h(()=>e("circle",{"stroke-width":"2",fill:"none",r:38,opacity:"0.6"},null,-1)),H=[F],K={transform:"translate(50,50)","text-anchor":"middle","dominant-baseline":"middle",fill:"currentColor"},O=["transform"],U={"dominant-baseline":"middle"},W={transform:"translate(0,20)"},Y={"dominant-baseline":"middle"},j={class:"font-bold",transform:"translate(0,58)"},z={"dominant-baseline":"middle"},G=45,J={__name:"ControlRotary",props:{max:{type:Number,default:100},min:{type:Number,default:0},modelValue:{type:Number,default:50},step:{type:Number,default:1},param:{type:String,default:"param"},unit:{type:String,default:""},fixed:{type:Number,default:1},cc:{type:Number,default:0},channel:{type:Number,default:0}},emits:["update:modelValue"],setup(n,{emit:d}){const a=n,t=V({active:!1,internal:0,initial:0,external:C(()=>g(t.internal))}),x=w({param:a.param,number:a.cc,channel:a.channel});S(x,o=>{t.internal=o*100,d("update:modelValue",t.external)});function b(o){const{delta:[r,s],dragging:l,shiftKey:u}=o;t.active=l;let i=u?12:4;t.internal-=s/i,t.internal+=r/i,t.internal>100&&(t.internal=100),t.internal<0&&(t.internal=0),d("update:modelValue",t.external)}I(()=>{t.internal=v(a.modelValue)});function y(){t.internal=t.initial,d("update:modelValue",t.external)}function v(o){return p(o,a.min,a.max,0,100,a.step)}function g(o){return p(o,0,100,a.min,a.max,a.step)}function p(o,r=0,s=100,l=0,u=100,i=1){let k=(o-r)*(u-l)/(s-r)+l;return Math.round(k/i)*i}const c=Math.PI*2*G-50;return(o,r)=>{const s=B("drag");return D((f(),_("div",{class:"knob",onDblclick:r[0]||(r[0]=l=>y()),"drag-options":{preventWindowScrollY:!0}},[(f(),_("svg",E,[e("g",P,[R,e("path",{d:"M25,90 a 45,45,1,1,1,50,0",fill:"none","stroke-width":"8","stroke-linecap":"round","stroke-dasharray":c,"stroke-dashoffset":c-c*(t.internal/100)},null,8,q),e("g",{transform:`translate(50,52.5) rotate(${t.internal*2.9}) `},H,8,A)]),e("g",K,[e("text",{class:"font-bold text-2xl",transform:`translate(0,${n.unit?-3:5})`},[e("tspan",U,m(n.modelValue.toFixed(n.fixed)),1)],8,O),e("text",W,[e("tspan",Y,m(n.unit),1)]),e("text",j,[e("tspan",z,m(n.param.toUpperCase()),1)])])]))],32)),[[s,b]])}}},T=N(J,[["__scopeId","data-v-634d8954"]]);export{T as _};
