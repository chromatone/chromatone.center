import{l as g}from"./midi.b5556f9f.js";import{a as w}from"./index.c020f286.js";import{u as V}from"./index.edce5462.js";import{_ as N,k as C,j as S,A as I,w as M,i as B,z as D,o as h,c as x,a as n,t as p,p as $,d as W}from"./framework.88db3c26.js";const k=o=>($("data-v-a4e82d27"),o=o(),W(),o),E={viewBox:"0 0 100 120"},O={stroke:"currentColor"},R=k(()=>n("path",{d:"M25,90 a 45,45,1,1,1,50,0",fill:"none",stroke:"#9996","stroke-width":"8","stroke-linecap":"round"},null,-1)),Y=["stroke","stroke-dashoffset"],j=["transform"],z=k(()=>n("circle",{"stroke-width":"2",fill:"none",r:38,opacity:"0.6"},null,-1)),A=[z],F={transform:"translate(50,50)","text-anchor":"middle","dominant-baseline":"middle",fill:"currentColor"},G=["transform"],P={"dominant-baseline":"middle"},T={transform:"translate(0,20)"},U={"dominant-baseline":"middle"},q={class:"font-bold",transform:"translate(0,58)"},H={"dominant-baseline":"middle"},J=45,K={__name:"ControlRotary",props:{max:{type:Number,default:100},min:{type:Number,default:0},modelValue:{type:Number,default:50},step:{type:Number,default:1},param:{type:String,default:"param"},unit:{type:String,default:""},fixed:{type:Number,default:1},cc:{type:Number,default:0},channel:{type:Number,default:0}},emits:["update:modelValue"],setup(o,{emit:d}){const t=o,e=C({active:!1,internal:V(0,0,100),initial:0,external:S(()=>y(e.internal))});I(()=>{e.initial=f(t.modelValue)});const b=g({param:t.param,number:t.cc,channel:t.channel});M(b,a=>{e.internal=a*100,d("update:modelValue",e.external)});const m=B();w({onDrag({delta:[a,s],dragging:r,shiftKey:l}){e.active=r;let i=l?12:2;e.internal-=s/i,e.internal+=a/i,d("update:modelValue",e.external)},onWheel({delta:[a,s],dragging:r,shiftKey:l,event:i}){e.active=r,i.preventDefault();let c=l?12:8;e.internal+=s/c,e.internal-=a/c,d("update:modelValue",e.external)}},{drag:{preventWindowScrollY:!0},wheel:{preventWindowScrollY:!0},eventOptions:{capture:!1,passive:!1},domTarget:m}),D(()=>{e.internal=f(t.modelValue)});function v(){e.internal=e.initial,d("update:modelValue",e.external)}function f(a){return _(a,t.min,t.max,0,100,t.step)}function y(a){return Math.round(_(a,0,100,t.min,t.max,t.step)/t.step)*t.step}function _(a,s=0,r=100,l=0,i=100,c=1){return(a-s)*(i-l)/(r-s)+l}const u=Math.PI*2*J-50;return(a,s)=>(h(),x("div",{class:"knob",ref_key:"knob",ref:m,onDblclick:s[0]||(s[0]=r=>v())},[(h(),x("svg",E,[n("g",O,[R,n("path",{d:"M25,90 a 45,45,1,1,1,50,0",fill:"none",stroke:`hsla(${e.internal*3.6}deg,70%,50%,0.8)`,"stroke-width":"12","stroke-linecap":"round","stroke-dasharray":u,"stroke-dashoffset":u-u*(e.internal/100)},null,8,Y),n("g",{transform:`translate(50,52.5) rotate(${e.internal*2.9}) `},A,8,j)]),n("g",F,[n("text",{class:"font-bold text-2xl",transform:`translate(0,${o.unit?-3:5})`},[n("tspan",P,p(o.modelValue.toFixed(o.fixed)),1)],8,G),n("text",T,[n("tspan",U,p(o.unit),1)]),n("text",q,[n("tspan",H,p(o.param.toUpperCase()),1)])])]))],544))}},te=N(K,[["__scopeId","data-v-a4e82d27"]]);export{te as _};
