import"./tuner.f3d8e340.js";import"./audio.aba48680.js";import{e as b,g as c}from"./colors.a5d5ae39.js";import{c as D}from"./midi.36560961.js";import"./loop.5f39f706.js";import"./mic.a8597eff.js";import"./midiRender.affeda4e.js";import"./Midi.1f918097.js";import"./tempo.4e2f4c38.js";import"./noise.50c0df1a.js";import"./index.e98b5e67.js";import"./sequence.23b98f68.js";import"./synth.8a2ee66e.js";import{n as E,i as L,s as V}from"./theory.61e5aadb.js";import{u as I,o as m,c as h,F as P,r as F,x as k,g as e,a as t,t as r,v as O,i as v,I as W,f as j,n as q,s as A,E as G,J as K,j as g}from"./framework.f277db28.js";import{w as Q}from"./index.654bd828.js";import{_ as R}from"./ChromaCode.580978e6.js";import{p as U,m as X,u as H,n as C}from"./index.8dc0b613.js";import{u as J}from"./index.64a8684b.js";import{u as Y}from"./index.911cb71e.js";const Z={class:"flex flex gap-1"},tt=["onClick"],et={class:"text-md opacity-80"},At={__name:"JamChroma",setup(S){return I(),(u,n)=>(m(),h("div",Z,[(m(!0),h(P,null,F(e(c).chroma,(l,o)=>(m(),h("div",{class:"flex-1 text-black rounded cursor-pointer relative flex items-center flex-col gap-2 justify-between overflow-hidden",key:o,style:k({color:e(Q)(e(b)(o,l,"#fff","#000")).isDark()?"white":"black",backgroundColor:e(b)(o,l,"#fffa","#000a"),opacity:e(D).activeChromaMidi[(o+e(c).tonic)%12]?1:l==1?.9:.3}),onClick:_=>e(c).tonic=(o+e(c).tonic)%12},[t("div",{class:"pt-2 font-bold text-center text-xl",style:k({fontWeight:l==1?"bold":"normal"})},r(e(E)[(o+e(c).tonic)%12]),5),t("div",{class:O(["p-2 mx-auto opacity-0 rounded-full transition",{"opacity-80":e(D).activeChromaMidi[(o+e(c).tonic)%12]}]),style:{backgroundColor:"currentColor"}},null,2),t("div",et,r(e(L)[o]),1),t("div",{class:"p-6px w-full opacity-80",style:k({backgroundColor:e(b)(o,0,"#fff8","#0008")})},null,4)],12,tt))),128))]))}},ot={class:"flex gap-4 items-center"},st={class:"p-0 text-2xl font-bold flex items-center gap-4"},nt=t("div",{class:"flex-1"},null,-1),lt=t("div",{class:"text-lg i-la-angle-down"},null,-1),at={class:"w-60 text-lg tabular-nums font-mono"},rt=["onClick"],it={class:"p-0 text-xl"},ct=t("div",{class:"flex-1"},null,-1),Gt={__name:"JamScale",setup(S){const u=v();U(u,()=>{n.value=!1});const n=v(!1);return(l,o)=>{var d,w,y,x;const _=R;return m(),h("div",ot,[t("div",{class:"w-full flex gap-4 cursor-pointer bg-dark-900 bg-opacity-40 p-2 rounded-xl items-center",onClick:o[0]||(o[0]=p=>n.value=!n.value)},[t("div",st,r((w=(d=e(c))==null?void 0:d.note)==null?void 0:w.name)+" "+r((x=(y=e(c))==null?void 0:y.set)==null?void 0:x.name),1),nt,lt]),t("div",at,r(e(D).guessChords[0]),1),W(l.$slots,"default"),j(K,{name:"fade"},{default:q(()=>[A(t("div",{class:"flex flex-col max-h-40vh overflow-scroll absolute bg-light-100 dark-bg-dark-100 rounded-xl overscroll-contain scroll-smooth snap-y snap-proximity z-100",ref_key:"menu",ref:u},[(m(!0),h(P,null,F(e(V),p=>(m(),h("div",{class:"text-md flex-auto flex items-center gap-2 cursor-pointer hover-bg-light-400 hover-bg-opacity-10 p-2",key:p,onClick:M=>{e(c).chroma=p.chroma,n.value=!1}},[t("div",it,r(p.name),1),ct,j(_,{chroma:p.chroma,cols:12},null,8,["chroma"])],8,rt))),128))],512),[[G,n.value]])]),_:1})])}}},ut={class:"flex flex-col w-full"},dt={class:"w-full",viewBox:"0 0 1000 100","font-size":"22"},ft=t("g",null,[t("rect",{stroke:"currentColor",x:"0",y:"0",fill:"transparent",width:"1000",height:"100"})],-1),mt={class:"start"},ht={class:"pointer-events-none","font-weight":"bold",x:"10",y:"25",fill:"currentColor"},_t=["width"],pt={class:"pointer-events-none","text-anchor":"start",x:"10",y:"90",fill:"currentColor"},vt={class:"finish"},xt={class:"pointer-events-none","text-anchor":"end","font-weight":"bold",x:"990",y:"25",fill:"currentColor"},gt=["width","x"],wt={class:"pointer-events-none","text-anchor":"end",x:"990",y:"90",fill:"currentColor"},yt={class:"now pointer-events-none"},kt=["width"],$t=t("line",{y2:100,stroke:"currentColor","stroke-width":"4"},null,-1),bt=["text-anchor","x"],Kt={__name:"JamDate",setup(S){const u=X(),n=v(H("jam-start",Date.now()-1e3*60*60)),l=Y(H("jam-finish",Date.now()+1e3*60*60),u,Date.now()+1e3*60*60*365),o=g(()=>u.value-n.value),_=g(()=>l.value-u.value),d=g(()=>o.value/(o.value+_.value)),w=g(()=>B(o.value)),y=g(()=>B(_.value)),x=v("HH:mm"),p=C(n,x),M=C(l,x),N=C(u,"HH:mm:ss"),T=v(),z=v();J(({delta:f,shiftKey:s})=>{const a=f[0]-f[1],i=s?1e5:1e4;l.value+=a*i},{domTarget:z}),J(({delta:f,shiftKey:s})=>{const a=f[0]-f[1],i=s?1e5:1e4;n.value+=a*i},{domTarget:T});function B(f){const s=Math.floor(f/1e3),a=Math.floor(s/60),i=Math.floor(a/60),$=Math.floor(i/24);return $>0?`${$}d ${i-$*24}hr`:i>0?`${i}hr ${a-i*60}min`:a>0?`${a}min ${s-a*60}s`:`${s}s`}return(f,s)=>(m(),h("div",ut,[(m(),h("svg",dt,[ft,t("g",mt,[t("rect",{class:"cursor-move",ref_key:"startPad",ref:T,onDblclick:s[0]||(s[0]=a=>n.value=Date.now()),width:"150",height:"100",fill:"#6663"},null,544),t("text",ht,r(e(p)),1),t("rect",{width:1e3*d.value,x:0,height:"30",y:"70",fill:"#9996"},null,8,_t),t("text",pt,r(w.value)+" elapsed",1)]),t("g",vt,[t("rect",{class:"cursor-move",ref_key:"finishPad",ref:z,onDblclick:s[1]||(s[1]=a=>l.value=Date.now()+1e3*60*20),x:"850",width:150,height:"100",fill:"#9993"},null,544),t("text",xt,r(e(M)),1),t("rect",{width:1e3*(1-d.value),x:1e3-1e3*(1-d.value),height:"30",y:"70",fill:"#9996"},null,8,gt),t("text",wt,r(y.value)+" left",1)]),t("g",yt,[t("rect",{width:d.value*1e3,height:"100",fill:"#2224"},null,8,kt),t("g",{style:k({transform:`translate(${d.value*1e3}px)`})},[$t,t("text",{"text-anchor":_.value<o.value?"end":"start","font-weight":"bold",x:_.value<o.value?-10:10,y:"55","font-size":"24",fill:"currentColor"},r(e(N)),9,bt)],4)])]))]))}};export{Kt as _,Gt as a,At as b};
