import"./tuner.c11a4e88.js";import"./audio.e0c178f7.js";import{b,g as c}from"./colors.93330ee5.js";import{c as D}from"./midi.0fea24b9.js";import"./loop.95aab527.js";import"./mic.47236f68.js";import"./midiRender.ed5d5da0.js";import"./Midi.1f918097.js";import"./tempo.a46486f1.js";import"./noise.9842c7ac.js";import{u as L}from"./index.3012fc8f.js";import"./sequence.cfe1e93c.js";import"./synth.05e847c0.js";import{n as V,i as A,s as E}from"./theory.61e5aadb.js";import{u as K,o as m,c as h,F,r as J,A as $,h as e,a as t,t as r,z as O,i as p,$ as Q,K as R,g as j,n as W,y as q,D as G,a0 as I,Q as U,v as H,j as g,R as C}from"./framework.2f46aeb8.js";import{w as X}from"./index.654bd828.js";import{_ as Y}from"./ChromaCode.a35869cb.js";import{u as P}from"./index.8284f5bf.js";const Z={class:"flex flex gap-1"},tt=["onClick"],et={class:"text-md opacity-80"},Ot={__name:"JamChroma",setup(S){return K(),(u,n)=>(m(),h("div",Z,[(m(!0),h(F,null,J(e(c).chroma,(l,o)=>(m(),h("div",{class:"flex-1 text-black rounded cursor-pointer relative flex items-center flex-col gap-2 justify-between overflow-hidden",key:o,style:$({color:e(X)(e(b)(o,l,"#fff","#000")).isDark()?"white":"black",backgroundColor:e(b)(o,l,"#fffa","#000a"),opacity:e(D).activeChromaMidi[(o+e(c).tonic)%12]?1:l==1?.9:.3}),onClick:_=>e(c).tonic=(o+e(c).tonic)%12},[t("div",{class:"pt-2 font-bold text-center text-xl",style:$({fontWeight:l==1?"bold":"normal"})},r(e(V)[(o+e(c).tonic)%12]),5),t("div",{class:O(["p-2 mx-auto opacity-0 rounded-full transition",{"opacity-80":e(D).activeChromaMidi[(o+e(c).tonic)%12]}]),style:{backgroundColor:"currentColor"}},null,2),t("div",et,r(e(A)[o]),1),t("div",{class:"p-6px w-full opacity-80",style:$({backgroundColor:e(b)(o,0,"#fff8","#0008")})},null,4)],12,tt))),128))]))}},ot={class:"flex gap-4 items-center"},st={class:"p-0 text-2xl font-bold flex items-center gap-4"},nt=t("div",{class:"flex-1"},null,-1),lt=t("div",{class:"text-lg i-la-angle-down"},null,-1),at={class:"w-60 text-lg tabular-nums font-mono"},rt=["onClick"],it={class:"p-0 text-xl"},ct=t("div",{class:"flex-1"},null,-1),Qt={__name:"JamScale",setup(S){const u=p();Q(u,()=>{n.value=!1});const n=p(!1);return(l,o)=>{var d,w,y,x;const _=Y;return m(),h("div",ot,[t("div",{class:"w-full flex gap-4 cursor-pointer bg-dark-900 bg-opacity-40 p-2 rounded-xl items-center",onClick:o[0]||(o[0]=v=>n.value=!n.value)},[t("div",st,r((w=(d=e(c))==null?void 0:d.note)==null?void 0:w.name)+" "+r((x=(y=e(c))==null?void 0:y.set)==null?void 0:x.name),1),nt,lt]),t("div",at,r(e(D).guessChords[0]),1),R(l.$slots,"default"),j(I,{name:"fade"},{default:W(()=>[q(t("div",{class:"flex flex-col max-h-40vh overflow-scroll absolute bg-light-100 dark-bg-dark-100 rounded-xl overscroll-contain scroll-smooth snap-y snap-proximity z-100",ref_key:"menu",ref:u},[(m(!0),h(F,null,J(e(E),v=>(m(),h("div",{class:"text-md flex-auto flex items-center gap-2 cursor-pointer hover-bg-light-400 hover-bg-opacity-10 p-2",key:v,onClick:z=>{e(c).chroma=v.chroma,n.value=!1}},[t("div",it,r(v.name),1),ct,j(_,{chroma:v.chroma,cols:12},null,8,["chroma"])],8,rt))),128))],512),[[G,n.value]])]),_:1})])}}},ut={class:"flex flex-col w-full"},dt={class:"w-full",viewBox:"0 0 1000 100","font-size":"22"},ft=t("g",null,[t("rect",{stroke:"currentColor",x:"0",y:"0",fill:"transparent",width:"1000",height:"100"})],-1),mt={class:"start"},ht={class:"pointer-events-none","font-weight":"bold",x:"10",y:"25",fill:"currentColor"},_t=["width"],vt={class:"pointer-events-none","text-anchor":"start",x:"10",y:"90",fill:"currentColor"},pt={class:"finish"},xt={class:"pointer-events-none","text-anchor":"end","font-weight":"bold",x:"990",y:"25",fill:"currentColor"},gt=["width","x"],wt={class:"pointer-events-none","text-anchor":"end",x:"990",y:"90",fill:"currentColor"},yt={class:"now pointer-events-none"},$t=["width"],kt=t("line",{y2:100,stroke:"currentColor","stroke-width":"4"},null,-1),bt=["text-anchor","x"],Rt={__name:"JamDate",setup(S){const u=U(),n=p(H("jam-start",Date.now()-1e3*60*60)),l=L(H("jam-finish",Date.now()+1e3*60*60),u,Date.now()+1e3*60*60*365),o=g(()=>u.value-n.value),_=g(()=>l.value-u.value),d=g(()=>o.value/(o.value+_.value)),w=g(()=>B(o.value)),y=g(()=>B(_.value)),x=p("HH:mm"),v=C(n,x),z=C(l,x),N=C(u,"HH:mm:ss"),M=p(),T=p();P(({delta:f,shiftKey:s})=>{const a=f[0]-f[1],i=s?1e5:1e4;l.value+=a*i},{domTarget:T}),P(({delta:f,shiftKey:s})=>{const a=f[0]-f[1],i=s?1e5:1e4;n.value+=a*i},{domTarget:M});function B(f){const s=Math.floor(f/1e3),a=Math.floor(s/60),i=Math.floor(a/60),k=Math.floor(i/24);return k>0?`${k}d ${i-k*24}hr`:i>0?`${i}hr ${a-i*60}min`:a>0?`${a}min ${s-a*60}s`:`${s}s`}return(f,s)=>(m(),h("div",ut,[(m(),h("svg",dt,[ft,t("g",mt,[t("rect",{class:"cursor-move",ref_key:"startPad",ref:M,onDblclick:s[0]||(s[0]=a=>n.value=Date.now()),width:"150",height:"100",fill:"#6663"},null,544),t("text",ht,r(e(v)),1),t("rect",{width:1e3*d.value,x:0,height:"30",y:"70",fill:"#9996"},null,8,_t),t("text",vt,r(w.value)+" elapsed",1)]),t("g",pt,[t("rect",{class:"cursor-move",ref_key:"finishPad",ref:T,onDblclick:s[1]||(s[1]=a=>l.value=Date.now()+1e3*60*20),x:"850",width:150,height:"100",fill:"#9993"},null,544),t("text",xt,r(e(z)),1),t("rect",{width:1e3*(1-d.value),x:1e3-1e3*(1-d.value),height:"30",y:"70",fill:"#9996"},null,8,gt),t("text",wt,r(y.value)+" left",1)]),t("g",yt,[t("rect",{width:d.value*1e3,height:"100",fill:"#2224"},null,8,$t),t("g",{style:$({transform:`translate(${d.value*1e3}px)`})},[kt,t("text",{"text-anchor":_.value<o.value?"end":"start","font-weight":"bold",x:_.value<o.value?-10:10,y:"55","font-size":"24",fill:"currentColor"},r(e(N)),9,bt)],4)])]))]))}};export{Rt as _,Qt as a,Ot as b};
