import"./tuner.0-FZg3vi.js";import"./audio.pG3RnClx.js";import{e as b,g as c}from"./colors.hHBI9fPI.js";import{c as D}from"./midi.91UwWBqe.js";import"./loop.CI0tpsQr.js";import"./mic.v1-AeFkx.js";import"./midiRender.c86h86WZ.js";import"./Midi.6fTTQsck.js";import"./tempo.fl6CFXyY.js";import"./noise.bpaR192Z.js";import"./index.RYxauP_R.js";import"./sequence.lQXqylrG.js";import"./synth.TVJKhjDp.js";import{n as V,i as L,s as A}from"./theory.c9f85u7m.js";import{u as E,o as m,c as h,F as N,r as P,A as k,g as e,a as t,t as r,z as O,i as p,ad as W,N as q,f as j,m as G,J as I,y as K,V as Q,ab as R,v as H,j as g,ac as C}from"./framework.KnxPB1sj.js";import{w as U}from"./index.kn6emmbE.js";import{_ as X}from"./ChromaCode.qFbgwVpq.js";import{u as J}from"./index.rstREGm8.js";import{u as Y}from"./index.bnjSkgpl.js";const Z={class:"flex flex gap-1"},tt=["onClick"],et={class:"text-md opacity-80"},qt={__name:"JamChroma",setup(S){return E(),(u,n)=>(m(),h("div",Z,[(m(!0),h(N,null,P(e(c).chroma,(l,o)=>(m(),h("div",{class:"flex-1 text-black rounded cursor-pointer relative flex items-center flex-col gap-2 justify-between overflow-hidden",key:o,style:k({color:e(U)(e(b)(o,l,"#fff","#000")).isDark()?"white":"black",backgroundColor:e(b)(o,l,"#fffa","#000a"),opacity:e(D).activeChromaMidi[(o+e(c).tonic)%12]?1:l==1?.9:.3}),onClick:_=>e(c).tonic=(o+e(c).tonic)%12},[t("div",{class:"pt-2 font-bold text-center text-xl",style:k({fontWeight:l==1?"bold":"normal"})},r(e(V)[(o+e(c).tonic)%12]),5),t("div",{class:O(["p-2 mx-auto opacity-0 rounded-full transition",{"opacity-80":e(D).activeChromaMidi[(o+e(c).tonic)%12]}]),style:{backgroundColor:"currentColor"}},null,2),t("div",et,r(e(L)[o]),1),t("div",{class:"p-6px w-full opacity-80",style:k({backgroundColor:e(b)(o,0,"#fff8","#0008")})},null,4)],12,tt))),128))]))}},ot={class:"flex gap-4 items-center"},st={class:"p-0 text-2xl font-bold flex items-center gap-4"},nt=t("div",{class:"flex-1"},null,-1),lt=t("div",{class:"text-lg i-la-angle-down"},null,-1),at={class:"w-60 text-lg tabular-nums font-mono"},rt=["onClick"],it={class:"p-0 text-xl"},ct=t("div",{class:"flex-1"},null,-1),Gt={__name:"JamScale",setup(S){const u=p();W(u,()=>{n.value=!1});const n=p(!1);return(l,o)=>{var d,w,y,x;const _=X;return m(),h("div",ot,[t("div",{class:"w-full flex gap-4 cursor-pointer bg-dark-900 bg-opacity-40 p-2 rounded-xl items-center",onClick:o[0]||(o[0]=v=>n.value=!n.value)},[t("div",st,r((w=(d=e(c))==null?void 0:d.note)==null?void 0:w.name)+" "+r((x=(y=e(c))==null?void 0:y.set)==null?void 0:x.name),1),nt,lt]),t("div",at,r(e(D).guessChords[0]),1),q(l.$slots,"default"),j(Q,{name:"fade"},{default:G(()=>[K(t("div",{class:"flex flex-col max-h-40vh overflow-scroll absolute bg-light-100 dark-bg-dark-100 rounded-xl overscroll-contain scroll-smooth snap-y snap-proximity z-100",ref_key:"menu",ref:u},[(m(!0),h(N,null,P(e(A),v=>(m(),h("div",{class:"text-md flex-auto flex items-center gap-2 cursor-pointer hover-bg-light-400 hover-bg-opacity-10 p-2",key:v,onClick:z=>{e(c).chroma=v.chroma,n.value=!1}},[t("div",it,r(v.name),1),ct,j(_,{chroma:v.chroma,cols:12},null,8,["chroma"])],8,rt))),128))],512),[[I,n.value]])]),_:1})])}}},ut={class:"flex flex-col w-full"},dt={class:"w-full",viewBox:"0 0 1000 100","font-size":"22"},ft=t("g",null,[t("rect",{stroke:"currentColor",x:"0",y:"0",fill:"transparent",width:"1000",height:"100"})],-1),mt={class:"start"},ht={class:"pointer-events-none","font-weight":"bold",x:"10",y:"25",fill:"currentColor"},_t=["width"],vt={class:"pointer-events-none","text-anchor":"start",x:"10",y:"90",fill:"currentColor"},pt={class:"finish"},xt={class:"pointer-events-none","text-anchor":"end","font-weight":"bold",x:"990",y:"25",fill:"currentColor"},gt=["width","x"],wt={class:"pointer-events-none","text-anchor":"end",x:"990",y:"90",fill:"currentColor"},yt={class:"now pointer-events-none"},kt=["width"],$t=t("line",{y2:100,stroke:"currentColor","stroke-width":"4"},null,-1),bt=["text-anchor","x"],It={__name:"JamDate",setup(S){const u=R(),n=p(H("jam-start",Date.now()-1e3*60*60)),l=Y(H("jam-finish",Date.now()+1e3*60*60),u,Date.now()+1e3*60*60*365),o=g(()=>u.value-n.value),_=g(()=>l.value-u.value),d=g(()=>o.value/(o.value+_.value)),w=g(()=>B(o.value)),y=g(()=>B(_.value)),x=p("HH:mm"),v=C(n,x),z=C(l,x),F=C(u,"HH:mm:ss"),M=p(),T=p();J(({delta:f,shiftKey:s})=>{const a=f[0]-f[1],i=s?1e5:1e4;l.value+=a*i},{domTarget:T}),J(({delta:f,shiftKey:s})=>{const a=f[0]-f[1],i=s?1e5:1e4;n.value+=a*i},{domTarget:M});function B(f){const s=Math.floor(f/1e3),a=Math.floor(s/60),i=Math.floor(a/60),$=Math.floor(i/24);return $>0?`${$}d ${i-$*24}hr`:i>0?`${i}hr ${a-i*60}min`:a>0?`${a}min ${s-a*60}s`:`${s}s`}return(f,s)=>(m(),h("div",ut,[(m(),h("svg",dt,[ft,t("g",mt,[t("rect",{class:"cursor-move",ref_key:"startPad",ref:M,onDblclick:s[0]||(s[0]=a=>n.value=Date.now()),width:"150",height:"100",fill:"#6663"},null,544),t("text",ht,r(e(v)),1),t("rect",{width:1e3*d.value,x:0,height:"30",y:"70",fill:"#9996"},null,8,_t),t("text",vt,r(w.value)+" elapsed",1)]),t("g",pt,[t("rect",{class:"cursor-move",ref_key:"finishPad",ref:T,onDblclick:s[1]||(s[1]=a=>l.value=Date.now()+1e3*60*20),x:"850",width:150,height:"100",fill:"#9993"},null,544),t("text",xt,r(e(z)),1),t("rect",{width:1e3*(1-d.value),x:1e3-1e3*(1-d.value),height:"30",y:"70",fill:"#9996"},null,8,gt),t("text",wt,r(y.value)+" left",1)]),t("g",yt,[t("rect",{width:d.value*1e3,height:"100",fill:"#2224"},null,8,kt),t("g",{style:k({transform:`translate(${d.value*1e3}px)`})},[$t,t("text",{"text-anchor":_.value<o.value?"end":"start","font-weight":"bold",x:_.value<o.value?-10:10,y:"55","font-size":"24",fill:"currentColor"},r(e(F)),9,bt)],4)])]))]))}};export{It as _,Gt as a,qt as b};
