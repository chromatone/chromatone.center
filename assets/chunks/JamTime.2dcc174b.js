import"./tuner.07248218.js";import"./audio.bbcaf2bd.js";import{b as D,g as m}from"./colors.b824bb78.js";import{c as T}from"./midi.29ec9ee8.js";import"./loop.d3698c79.js";import"./mic.2bb7751d.js";import"./midiRender.2eaaea55.js";import"./Midi.1f918097.js";import{u as A}from"./tempo.6e41db24.js";import"./noise.486276f7.js";import{u as E}from"./index.4f21aa60.js";import"./sequence.af5904b4.js";import"./synth.a4e8f7cb.js";import{n as K,i as O,s as W}from"./theory.61e5aadb.js";import{u as Y,o as u,c as d,F as S,r as z,A as y,h as o,a as t,t as r,z as Z,i as x,Y as q,K as N,g as J,n as G,y as I,D as Q,Z as R,$ as L,v as P,j as v,a0 as k,k as U}from"./framework.a6de132c.js";import{w as X}from"./index.654bd828.js";import{_ as tt}from"./ChromaCode.207a4c7c.js";import{u as F}from"./index.d7c2b849.js";const et={class:"flex flex gap-1"},ot=["onClick"],st={class:"text-md opacity-80"},Gt={__name:"JamChroma",setup(b){return Y(),(s,n)=>(u(),d("div",et,[(u(!0),d(S,null,z(o(m).chroma,(l,e)=>(u(),d("div",{class:"flex-1 text-black rounded cursor-pointer relative flex items-center flex-col gap-2 justify-between overflow-hidden",key:e,style:y({color:o(X)(o(D)(e,l,"#fff","#000")).isDark()?"white":"black",backgroundColor:o(D)(e,l,"#fffa","#000a"),opacity:o(T).activeChromaMidi[(e+o(m).tonic)%12]?1:l==1?.9:.3}),onClick:_=>o(m).tonic=(e+o(m).tonic)%12},[t("div",{class:"pt-2 font-bold text-center text-xl",style:y({fontWeight:l==1?"bold":"normal"})},r(o(K)[(e+o(m).tonic)%12]),5),t("div",{class:Z(["p-2 mx-auto opacity-0 rounded-full transition",{"opacity-80":o(T).activeChromaMidi[(e+o(m).tonic)%12]}]),style:{backgroundColor:"currentColor"}},null,2),t("div",st,r(o(O)[e]),1),t("div",{class:"p-6px w-full opacity-80",style:y({backgroundColor:o(D)(e,0,"#fff8","#0008")})},null,4)],12,ot))),128))]))}},nt={class:"flex gap-4 items-center"},lt={class:"p-0 text-2xl font-bold flex items-center gap-4"},at=t("div",{class:"flex-1"},null,-1),rt=t("div",{class:"text-lg i-la-angle-down"},null,-1),it={class:"w-60 text-lg tabular-nums font-mono"},ct=["onClick"],ut={class:"p-0 text-xl"},dt=t("div",{class:"flex-1"},null,-1),It={__name:"JamScale",setup(b){const s=x();q(s,()=>{n.value=!1});const n=x(!1);return(l,e)=>{var i,w,$,g;const _=tt;return u(),d("div",nt,[t("div",{class:"w-full flex gap-4 cursor-pointer bg-dark-900 bg-opacity-40 p-2 rounded-xl items-center",onClick:e[0]||(e[0]=p=>n.value=!n.value)},[t("div",lt,r((w=(i=o(m))==null?void 0:i.note)==null?void 0:w.name)+" "+r((g=($=o(m))==null?void 0:$.set)==null?void 0:g.name),1),at,rt]),t("div",it,r(o(T).guessChords[0]),1),N(l.$slots,"default"),J(R,{name:"fade"},{default:G(()=>[I(t("div",{class:"flex flex-col max-h-40vh overflow-scroll absolute bg-light-100 dark-bg-dark-100 rounded-xl overscroll-contain scroll-smooth snap-y snap-proximity z-100",ref_key:"menu",ref:s},[(u(!0),d(S,null,z(o(W),p=>(u(),d("div",{class:"text-md flex-auto flex items-center gap-2 cursor-pointer hover-bg-light-400 hover-bg-opacity-10 p-2",key:p,onClick:H=>{o(m).chroma=p.chroma,n.value=!1}},[t("div",ut,r(p.name),1),dt,J(_,{chroma:p.chroma,cols:12},null,8,["chroma"])],8,ct))),128))],512),[[Q,n.value]])]),_:1})])}}},ft={class:"flex flex-col w-full"},mt={class:"w-full",viewBox:"0 0 1000 100","font-size":"22"},_t=t("g",null,[t("rect",{stroke:"currentColor",x:"0",y:"0",fill:"transparent",width:"1000",height:"100"})],-1),ht={class:"start"},pt={class:"pointer-events-none","font-weight":"bold",x:"10",y:"25",fill:"currentColor"},vt=["width"],xt={class:"pointer-events-none","text-anchor":"start",x:"10",y:"90",fill:"currentColor"},gt={class:"finish"},wt={class:"pointer-events-none","text-anchor":"end","font-weight":"bold",x:"990",y:"25",fill:"currentColor"},$t=["width","x"],yt={class:"pointer-events-none","text-anchor":"end",x:"990",y:"90",fill:"currentColor"},kt={class:"now pointer-events-none"},bt=["width"],Ct=t("line",{y2:100,stroke:"currentColor","stroke-width":"4"},null,-1),Dt=["text-anchor","x"],Qt={__name:"JamDate",setup(b){const s=L(),n=x(P("jam-start",Date.now()-1e3*60*60)),l=E(P("jam-finish",Date.now()+1e3*60*60),s,Date.now()+1e3*60*60*365),e=v(()=>s.value-n.value),_=v(()=>l.value-s.value),i=v(()=>e.value/(e.value+_.value)),w=v(()=>j(e.value)),$=v(()=>j(_.value)),g=x("HH:mm"),p=k(n,g),H=k(l,g),V=k(s,"HH:mm:ss"),M=x(),B=x();F(({delta:h,shiftKey:a})=>{const c=h[0]-h[1],f=a?1e5:1e4;l.value+=c*f},{domTarget:B}),F(({delta:h,shiftKey:a})=>{const c=h[0]-h[1],f=a?1e5:1e4;n.value+=c*f},{domTarget:M});function j(h){const a=Math.floor(h/1e3),c=Math.floor(a/60),f=Math.floor(c/60),C=Math.floor(f/24);return C>0?`${C}d ${f-C*24}hr`:f>0?`${f}hr ${c-f*60}min`:c>0?`${c}min ${a-c*60}s`:`${a}s`}return(h,a)=>(u(),d("div",ft,[(u(),d("svg",mt,[_t,t("g",ht,[t("rect",{class:"cursor-move",ref_key:"startPad",ref:M,onDblclick:a[0]||(a[0]=c=>n.value=Date.now()),width:"150",height:"100",fill:"#6663"},null,544),t("text",pt,r(o(p)),1),t("rect",{width:1e3*i.value,x:0,height:"30",y:"70",fill:"#9996"},null,8,vt),t("text",xt,r(w.value)+" elapsed",1)]),t("g",gt,[t("rect",{class:"cursor-move",ref_key:"finishPad",ref:B,onDblclick:a[1]||(a[1]=c=>l.value=Date.now()+1e3*60*20),x:"850",width:150,height:"100",fill:"#9993"},null,544),t("text",wt,r(o(H)),1),t("rect",{width:1e3*(1-i.value),x:1e3-1e3*(1-i.value),height:"30",y:"70",fill:"#9996"},null,8,$t),t("text",yt,r($.value)+" left",1)]),t("g",kt,[t("rect",{width:i.value*1e3,height:"100",fill:"#2224"},null,8,bt),t("g",{style:y({transform:`translate(${i.value*1e3}px)`})},[Ct,t("text",{"text-anchor":_.value<e.value?"end":"start","font-weight":"bold",x:_.value<e.value?-10:10,y:"55","font-size":"24",fill:"currentColor"},r(o(V)),9,Dt)],4)])]))]))}},Tt={class:"flex flex-col text-4xl"},St={class:"flex flex-col uppercase tabular-nums font-mono flex-wrap gap-1 items-center"},zt={class:"p-0"},Rt={__name:"JamTime",setup(b){const s=A(),n=L(),l=U({time:k(n,"HH:mm:ss")});return v(()=>{var e;return s.position?(e=s==null?void 0:s.position)==null?void 0:e.split(":").splice(0,2):0}),(e,_)=>(u(),d("div",Tt,[t("div",St,[(u(!0),d(S,null,z(l,i=>(u(),d("div",{class:"p-1 flex gap-2",key:i},[t("div",zt,r(i),1)]))),128)),N(e.$slots,"default")])]))}};export{Rt as _,Qt as a,It as b,Gt as c};
