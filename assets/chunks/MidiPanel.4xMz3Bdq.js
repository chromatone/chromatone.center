import{c as m,j as S,u as D}from"./midi.91UwWBqe.js";import{_ as C,o as s,c as i,a as e,F as y,r as h,z as v,g as t,t as f,p as I,d as w,x as O,B as P,A,b as L,y as u,H as T,f as B,N}from"./framework.KnxPB1sj.js";import{n as g}from"./colors.hHBI9fPI.js";import{c as b}from"./synth.TVJKhjDp.js";import{u as j}from"./tempo.fl6CFXyY.js";const V=d=>(I("data-v-01994688"),d=d(),w(),d),z={class:"flex is-group p-2 items-center flex-wrap justify-between"},U={class:"flex flex-col gap-1"},F=V(()=>e("div",{class:"font-bold mr-2"},"Channel filter",-1)),E={class:"grid grid-cols-8"},G=["onClick"],H={__name:"MidiFilterChannels",setup(d){function c(){let o=m.filter[1];for(let _=1;_<=16;_++)m.filter[_]=!o;o&&S()}return(o,_)=>(s(),i("div",z,[e("div",U,[F,e("div",{class:"channel filtered flex items-center justify-center",onClick:_[0]||(_[0]=r=>c())},"TOGGLE ALL")]),e("div",E,[(s(),i(y,null,h(16,r=>e("div",{class:v(["channel",{filtered:!t(m).filter[r],active:t(m).note.channel==r}]),key:r,onClick:x=>t(m).filter[r]=!t(m).filter[r]},f(r),11,G)),64))])]))}},K=C(H,[["__scopeId","data-v-01994688"]]),a=d=>(I("data-v-40dc5140"),d=d(),w(),d),R={class:"layer w-full z-40 flex flex-col"},W={key:0,class:"p-2 border border-red-500 text-red-500 flex flex-wrap gap-2 w-full"},Y=a(()=>e("a",{class:"font-normal underline",href:"https://caniuse.com/?search=midi",target:"_blank"},"use a compatible browser",-1)),q=a(()=>e("span",null,"or ",-1)),J=a(()=>e("a",{class:"font-normal underline",href:"https://apps.apple.com/ru/app/web-midi-browser/id953846217",target:"_blank"},"Web MIDI Browser on iOS",-1)),Q=a(()=>e("span",null,"or ",-1)),X=a(()=>e("div",{class:"font-normal text-dark-200 dark-text-light-100"},"just use your PC keyboard",-1)),Z={key:1,class:"flex flex-col gap-1 justify-center flex-wrap bg-light-400 dark-bg-dark-400"},tt={class:"flex is-group"},et={class:"flex m-2"},ot={class:"font-normal p-2 border border-green-500 text-green-500 select-none rounded-lg",href:"/practice/midi/monitor/"},st={key:0},it={key:1},nt={class:"flex"},lt={class:"is-group flex"},at={key:0,class:"i-la-play"},dt={key:1,class:"i-la-pause"},rt=a(()=>e("div",{class:"i-la-stop"},null,-1)),ct=[rt],_t={class:"w-2em"},ut={class:"flex-1"},pt={class:"is-group"},mt={class:"text-button border"},vt={class:"flex flex-wrap is-group"},ft=a(()=>e("div",{class:"i-tabler-keyboard"},null,-1)),bt=a(()=>e("div",{class:"m-0"},"PC keyboard",-1)),yt=[ft,bt],ht=a(()=>e("div",{class:"i-fad-midiplug"},null,-1)),xt=a(()=>e("div",{class:"m-0"},"MIDI OUT",-1)),kt=[ht,xt],gt=a(()=>e("div",{class:"i-la-clock"},null,-1)),Ct=a(()=>e("div",{class:"m-0"},"CLOCK OUT",-1)),It=[gt,Ct],wt=a(()=>e("div",{class:"i-la-sync"},null,-1)),$t=a(()=>e("div",{class:"m-0"},"SYNC TABS",-1)),Mt=[wt,$t],St={key:0,class:"i-bi-volume-up"},Dt={key:1,class:"i-bi-volume-off"},Ot=a(()=>e("div",{class:"m-0"},"MIDI Synth",-1)),Pt={class:"flex-button"},At=a(()=>e("span",null,"OUT CH",-1)),Lt=["value"],Tt={__name:"MidiPanel",setup(d){const c=j(),{midi:o,stopAll:_,midiAttack:r,midiRelease:x}=D();return navigator.userAgent.toLowerCase().indexOf("firefox")>-1,($,n)=>{var k;const M=K,p=O("tooltip");return s(),i("div",R,[t(o).enabled?(s(),i("div",Z,[e("div",tt,[e("div",et,[e("a",ot,[t(o).available?(s(),i("span",st,"MIDI ")):(s(),i("span",it,"Plug in your MIDI device"))])]),e("div",nt,[e("div",lt,[e("button",{class:"play text-button",onClick:n[0]||(n[0]=l=>t(o).playing=!t(o).playing)},[t(o).playing?(s(),i("div",dt)):(s(),i("div",at))]),e("button",{class:"text-button border",onClick:n[1]||(n[1]=l=>t(_)())},ct)]),(k=t(o).note)!=null&&k.name?(s(),i("div",{key:0,class:"text-button w-3em transition-all duration-50 cursor-pointer flex",onMousedown:n[2]||(n[2]=l=>t(r)(t(o).note)),onMouseup:n[3]||(n[3]=l=>t(x)(t(o).note)),style:A({borderColor:t(g)(t(o).note.pitch,t(o).note.octA),color:t(g)(t(o).note.pitch,t(o).note.octA)})},[e("div",_t,f(t(o).note.name),1),e("div",ut,f(t(o).note.accidental),1)],36)):L("",!0)])]),e("div",pt,[(s(!0),i(y,null,h(t(o).outputs,l=>(s(),i("button",mt,[e("span",null,f(l.name),1)]))),256))]),e("div",vt,[u((s(),i("button",{class:v(["flex-button border opacity-30",{active:t(o).keyboard}]),onClick:n[4]||(n[4]=l=>t(o).keyboard=!t(o).keyboard),"aria-label":"Play MIDI with PC keyboard"},yt,2)),[[p,"Play MIDI with PC keyboard",void 0,{bottom:!0}]]),u((s(),i("button",{class:v(["flex-button opacity-30",{active:t(o).out}]),onClick:n[5]||(n[5]=l=>t(o).out=!t(o).out)},kt,2)),[[p,"Output MIDI to external devices",void 0,{bottom:!0}]]),u((s(),i("button",{class:v(["flex-button opacity-30",{active:t(c).midiClock}]),onClick:n[6]||(n[6]=l=>t(c).midiClock=!t(c).midiClock)},It,2)),[[p,"Output MIDI CLOCK to external devices",void 0,{bottom:!0}]]),u((s(),i("button",{class:v(["flex-button opacity-30",{active:t(c).tabSync}]),onClick:n[7]||(n[7]=l=>t(c).tabSync=!t(c).tabSync)},Mt,2)),[[p,"Sync multiple tabs transpost",void 0,{bottom:!0}]]),u((s(),i("button",{class:v(["flex-button border opacity-30",{active:t(b).state.midi}]),onClick:n[8]||(n[8]=l=>t(b).state.midi=!t(b).state.midi)},[t(b).state.midi?(s(),i("div",St)):(s(),i("div",Dt)),Ot],2)),[[p,"Play synth on MIDI input",void 0,{bottom:!0}]]),u((s(),i("button",Pt,[At,u(e("select",{class:"bg-transparent text-xl font-bold","onUpdate:modelValue":n[9]||(n[9]=l=>t(o).channel=l)},[(s(),i(y,null,h(16,l=>e("option",{key:l,value:l},f(l),9,Lt)),64))],512),[[T,t(o).channel]])])),[[p,"Output MIDI channel",void 0,{bottom:!0}]])]),B(M,{style:{flex:"1 1 100px"}}),N($.$slots,"default",{class:"is-group mx-1 p-1"},void 0,!0)])):(s(),i("div",W,[P("MIDI is not available. Please "),Y,q,J,Q,X]))])}}},Ut=C(Tt,[["__scopeId","data-v-40dc5140"]]);export{Ut as _};
