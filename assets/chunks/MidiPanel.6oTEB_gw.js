import{c as o,j as k,k as w,n as $}from"./midi.JUoUGMo3.js";import{_ as g,o as i,c as n,a as e,F as b,r as y,z as p,g as t,t as m,p as C,d as I,x as M,B as S,A as D,b as O,y as u,H as P,f as A,N as L}from"./framework.1uYGFCry.js";import{n as x}from"./colors.DQ3Nq55L.js";import{c as f}from"./synth.CftW3DNb.js";import{u as T}from"./tempo.tDAToNwG.js";const B=d=>(C("data-v-01994688"),d=d(),I(),d),N={class:"flex is-group p-2 items-center flex-wrap justify-between"},j={class:"flex flex-col gap-1"},V=B(()=>e("div",{class:"font-bold mr-2"},"Channel filter",-1)),z={class:"grid grid-cols-8"},U=["onClick"],F={__name:"MidiFilterChannels",setup(d){function c(){let v=o.filter[1];for(let s=1;s<=16;s++)o.filter[s]=!v;v&&k()}return(v,s)=>(i(),n("div",N,[e("div",j,[V,e("div",{class:"channel filtered flex items-center justify-center",onClick:s[0]||(s[0]=r=>c())},"TOGGLE ALL")]),e("div",z,[(i(),n(b,null,y(16,r=>e("div",{class:p(["channel",{filtered:!t(o).filter[r],active:t(o).note.channel==r}]),key:r,onClick:_=>t(o).filter[r]=!t(o).filter[r]},m(r),11,U)),64))])]))}},E=g(F,[["__scopeId","data-v-01994688"]]),a=d=>(C("data-v-1a2228e5"),d=d(),I(),d),G={class:"layer w-full z-40 flex flex-col"},H={key:0,class:"p-2 border border-red-500 text-red-500 flex flex-wrap gap-2 w-full"},K=a(()=>e("a",{class:"font-normal underline",href:"https://caniuse.com/?search=midi",target:"_blank"},"use a compatible browser",-1)),R=a(()=>e("span",null,"or ",-1)),W=a(()=>e("a",{class:"font-normal underline",href:"https://apps.apple.com/ru/app/web-midi-browser/id953846217",target:"_blank"},"Web MIDI Browser on iOS",-1)),Y=a(()=>e("span",null,"or ",-1)),q=a(()=>e("div",{class:"font-normal text-dark-200 dark-text-light-100"},"just use your PC keyboard",-1)),J={key:1,class:"flex flex-col gap-1 justify-center flex-wrap bg-light-400 dark-bg-dark-400"},Q={class:"flex is-group"},X={class:"flex m-2"},Z={class:"font-normal p-2 border border-green-500 text-green-500 select-none rounded-lg",href:"/practice/midi/monitor/"},tt={key:0},et={key:1},ot={class:"flex"},st={class:"is-group flex"},it={key:0,class:"i-la-play"},nt={key:1,class:"i-la-pause"},lt=a(()=>e("div",{class:"i-la-stop"},null,-1)),at=[lt],dt={class:"w-2em"},rt={class:"flex-1"},ct={class:"is-group"},_t={class:"text-button border"},ut={class:"flex flex-wrap is-group"},pt=a(()=>e("div",{class:"i-tabler-keyboard"},null,-1)),vt=a(()=>e("div",{class:"m-0"},"PC keyboard",-1)),mt=[pt,vt],ft=a(()=>e("div",{class:"i-fad-midiplug"},null,-1)),bt=a(()=>e("div",{class:"m-0"},"MIDI OUT",-1)),yt=[ft,bt],ht=a(()=>e("div",{class:"i-la-clock"},null,-1)),xt=a(()=>e("div",{class:"m-0"},"CLOCK OUT",-1)),kt=[ht,xt],gt=a(()=>e("div",{class:"i-la-sync"},null,-1)),Ct=a(()=>e("div",{class:"m-0"},"SYNC TABS",-1)),It=[gt,Ct],wt={key:0,class:"i-bi-volume-up"},$t={key:1,class:"i-bi-volume-off"},Mt=a(()=>e("div",{class:"m-0"},"MIDI Synth",-1)),St={class:"flex-button"},Dt=a(()=>e("span",null,"OUT CH",-1)),Ot=["value"],Pt={__name:"MidiPanel",setup(d){const c=T();return navigator.userAgent.toLowerCase().indexOf("firefox")>-1,(v,s)=>{var h;const r=E,_=M("tooltip");return i(),n("div",G,[t(o).enabled?(i(),n("div",J,[e("div",Q,[e("div",X,[e("a",Z,[t(o).available?(i(),n("span",tt,"MIDI ")):(i(),n("span",et,"Plug in your MIDI device"))])]),e("div",ot,[e("div",st,[e("button",{class:"play text-button",onClick:s[0]||(s[0]=l=>t(o).playing=!t(o).playing)},[t(o).playing?(i(),n("div",nt)):(i(),n("div",it))]),e("button",{class:"text-button border",onClick:s[1]||(s[1]=l=>t(w)())},at)]),(h=t(o).note)!=null&&h.name?(i(),n("div",{key:0,class:"text-button w-3em transition-all duration-50 cursor-pointer flex",onMousedown:s[2]||(s[2]=l=>t($)(t(o).note)),onMouseup:s[3]||(s[3]=l=>t(k)(t(o).note)),style:D({borderColor:t(x)(t(o).note.pitch,t(o).note.octA),color:t(x)(t(o).note.pitch,t(o).note.octA)})},[e("div",dt,m(t(o).note.name),1),e("div",rt,m(t(o).note.accidental),1)],36)):O("",!0)])]),e("div",ct,[(i(!0),n(b,null,y(t(o).outputs,l=>(i(),n("button",_t,[e("span",null,m(l.name),1)]))),256))]),e("div",ut,[u((i(),n("button",{class:p(["flex-button border opacity-30",{active:t(o).keyboard}]),onClick:s[4]||(s[4]=l=>t(o).keyboard=!t(o).keyboard),"aria-label":"Play MIDI with PC keyboard"},mt,2)),[[_,"Play MIDI with PC keyboard",void 0,{bottom:!0}]]),u((i(),n("button",{class:p(["flex-button opacity-30",{active:t(o).out}]),onClick:s[5]||(s[5]=l=>t(o).out=!t(o).out)},yt,2)),[[_,"Output MIDI to external devices",void 0,{bottom:!0}]]),u((i(),n("button",{class:p(["flex-button opacity-30",{active:t(c).midiClock}]),onClick:s[6]||(s[6]=l=>t(c).midiClock=!t(c).midiClock)},kt,2)),[[_,"Output MIDI CLOCK to external devices",void 0,{bottom:!0}]]),u((i(),n("button",{class:p(["flex-button opacity-30",{active:t(c).tabSync}]),onClick:s[7]||(s[7]=l=>t(c).tabSync=!t(c).tabSync)},It,2)),[[_,"Sync multiple tabs transpost",void 0,{bottom:!0}]]),u((i(),n("button",{class:p(["flex-button border opacity-30",{active:t(f).state.midi}]),onClick:s[8]||(s[8]=l=>t(f).state.midi=!t(f).state.midi)},[t(f).state.midi?(i(),n("div",wt)):(i(),n("div",$t)),Mt],2)),[[_,"Play synth on MIDI input",void 0,{bottom:!0}]]),u((i(),n("button",St,[Dt,u(e("select",{class:"bg-transparent text-xl font-bold","onUpdate:modelValue":s[9]||(s[9]=l=>t(o).channel=l)},[(i(),n(b,null,y(16,l=>e("option",{key:l,value:l},m(l),9,Ot)),64))],512),[[P,t(o).channel]])])),[[_,"Output MIDI channel",void 0,{bottom:!0}]])]),A(r,{style:{flex:"1 1 100px"}}),L(v.$slots,"default",{class:"is-group mx-1 p-1"},void 0,!0)])):(i(),n("div",H,[S("MIDI is not available. Please "),K,R,W,Y,q]))])}}},jt=g(Pt,[["__scopeId","data-v-1a2228e5"]]);export{jt as _};
