import{r as Tt,b as ct,c as zt,aV as Ki,d as Ot,x as Kr,y as Xr,A as Wr,E as Lr,G as Xi,I as Qi,F as Pe,B as lt,H as Wi}from"./framework.CCD4PXEM.js";import{E as ki,g as pe,aq as ue,aW as It,aV as ji,aT as Pt,v as ru,y as eu,ap as $t,I as qt,k as tu}from"./theme.sRTu5KuM.js";import{F as ne}from"./fraction.DqatKmli.js";function Ue(){return Ue=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},Ue.apply(null,arguments)}var Fn={relTol:1e-12,absTol:1e-15,matrix:"Matrix",number:"number",numberFallback:"number",precision:64,predictable:!1,randomSeed:null};function gr(r){return typeof r=="number"}function Nr(r){return!r||typeof r!="object"||typeof r.constructor!="function"?!1:r.isBigNumber===!0&&typeof r.constructor.prototype=="object"&&r.constructor.prototype.isBigNumber===!0||typeof r.constructor.isDecimal=="function"&&r.constructor.isDecimal(r)===!0}function nu(r){return typeof r=="bigint"}function En(r){return r&&typeof r=="object"&&Object.getPrototypeOf(r).isComplex===!0||!1}function Cn(r){return r&&typeof r=="object"&&Object.getPrototypeOf(r).isFraction===!0||!1}function _n(r){return r&&r.constructor.prototype.isUnit===!0||!1}function ee(r){return typeof r=="string"}var wr=Array.isArray;function xr(r){return r&&r.constructor.prototype.isMatrix===!0||!1}function Ze(r){return Array.isArray(r)||xr(r)}function Bn(r){return r&&r.isDenseMatrix&&r.constructor.prototype.isMatrix===!0||!1}function Sn(r){return r&&r.isSparseMatrix&&r.constructor.prototype.isMatrix===!0||!1}function iu(r){return r&&r.constructor.prototype.isRange===!0||!1}function Et(r){return r&&r.constructor.prototype.isIndex===!0||!1}function uu(r){return typeof r=="boolean"}function au(r){return r&&r.constructor.prototype.isResultSet===!0||!1}function ou(r){return r&&r.constructor.prototype.isHelp===!0||!1}function su(r){return typeof r=="function"}function fu(r){return r instanceof Date}function cu(r){return r instanceof RegExp}function Ct(r){return!!(r&&typeof r=="object"&&r.constructor===Object&&!En(r)&&!Cn(r))}function lu(r){return r===null}function vu(r){return r===void 0}function hu(r){return r&&r.isAccessorNode===!0&&r.constructor.prototype.isNode===!0||!1}function pu(r){return r&&r.isArrayNode===!0&&r.constructor.prototype.isNode===!0||!1}function Du(r){return r&&r.isAssignmentNode===!0&&r.constructor.prototype.isNode===!0||!1}function du(r){return r&&r.isBlockNode===!0&&r.constructor.prototype.isNode===!0||!1}function mu(r){return r&&r.isConditionalNode===!0&&r.constructor.prototype.isNode===!0||!1}function gu(r){return r&&r.isConstantNode===!0&&r.constructor.prototype.isNode===!0||!1}function wu(r){return r&&r.isFunctionAssignmentNode===!0&&r.constructor.prototype.isNode===!0||!1}function yu(r){return r&&r.isFunctionNode===!0&&r.constructor.prototype.isNode===!0||!1}function Au(r){return r&&r.isIndexNode===!0&&r.constructor.prototype.isNode===!0||!1}function Fu(r){return r&&r.isNode===!0&&r.constructor.prototype.isNode===!0||!1}function Eu(r){return r&&r.isObjectNode===!0&&r.constructor.prototype.isNode===!0||!1}function Cu(r){return r&&r.isOperatorNode===!0&&r.constructor.prototype.isNode===!0||!1}function _u(r){return r&&r.isParenthesisNode===!0&&r.constructor.prototype.isNode===!0||!1}function Bu(r){return r&&r.isRangeNode===!0&&r.constructor.prototype.isNode===!0||!1}function Su(r){return r&&r.isRelationalNode===!0&&r.constructor.prototype.isNode===!0||!1}function Mu(r){return r&&r.isSymbolNode===!0&&r.constructor.prototype.isNode===!0||!1}function xu(r){return r&&r.constructor.prototype.isChain===!0||!1}function Ae(r){var e=typeof r;return e==="object"?r===null?"null":Nr(r)?"BigNumber":r.constructor&&r.constructor.name?r.constructor.name:"Object":e}function Fr(r){var e=typeof r;if(e==="number"||e==="bigint"||e==="string"||e==="boolean"||r===null||r===void 0)return r;if(typeof r.clone=="function")return r.clone();if(Array.isArray(r))return r.map(function(t){return Fr(t)});if(r instanceof Date)return new Date(r.valueOf());if(Nr(r))return r;if(Ct(r))return bu(r,Fr);throw new TypeError("Cannot clone: unknown type of value (value: ".concat(r,")"))}function bu(r,e){var t={};for(var i in r)Me(r,i)&&(t[i]=e(r[i]));return t}function Nu(r,e){for(var t in e)Me(e,t)&&(r[t]=e[t]);return r}function fe(r,e){var t,i,n;if(Array.isArray(r)){if(!Array.isArray(e)||r.length!==e.length)return!1;for(i=0,n=r.length;i<n;i++)if(!fe(r[i],e[i]))return!1;return!0}else{if(typeof r=="function")return r===e;if(r instanceof Object){if(Array.isArray(e)||!(e instanceof Object))return!1;for(t in r)if(!(t in e)||!fe(r[t],e[t]))return!1;for(t in e)if(!(t in r))return!1;return!0}else return r===e}}function Me(r,e){return r&&Object.hasOwnProperty.call(r,e)}function Tu(r,e){for(var t={},i=0;i<e.length;i++){var n=e[i],a=r[n];a!==void 0&&(t[n]=a)}return t}var zu=["Matrix","Array"],Ou=["number","BigNumber","Fraction"],de=function(e){if(e)throw new Error(`The global config is readonly. 
Please create a mathjs instance if you want to change the default configuration. 
Example:

  import { create, all } from 'mathjs';
  const mathjs = create(all);
  mathjs.config({ number: 'BigNumber' });
`);return Object.freeze(Fn)};Ue(de,Fn,{MATRIX_OPTIONS:zu,NUMBER_OPTIONS:Ou});function Rt(){return!0}function Hr(){return!1}function we(){}const Lt="Argument is not a typed-function.";function Mn(){function r(C){return typeof C=="object"&&C!==null&&C.constructor===Object}const e=[{name:"number",test:function(C){return typeof C=="number"}},{name:"string",test:function(C){return typeof C=="string"}},{name:"boolean",test:function(C){return typeof C=="boolean"}},{name:"Function",test:function(C){return typeof C=="function"}},{name:"Array",test:Array.isArray},{name:"Date",test:function(C){return C instanceof Date}},{name:"RegExp",test:function(C){return C instanceof RegExp}},{name:"Object",test:r},{name:"null",test:function(C){return C===null}},{name:"undefined",test:function(C){return C===void 0}}],t={name:"any",test:Rt,isAny:!0};let i,n,a=0,f={createCount:0};function l(C){const M=i.get(C);if(M)return M;let N='Unknown type "'+C+'"';const P=C.toLowerCase();let R;for(R of n)if(R.toLowerCase()===P){N+='. Did you mean "'+R+'" ?';break}throw new TypeError(N)}function h(C){let M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"any";const N=M?l(M).index:n.length,P=[];for(let $=0;$<C.length;++$){if(!C[$]||typeof C[$].name!="string"||typeof C[$].test!="function")throw new TypeError("Object with properties {name: string, test: function} expected");const G=C[$].name;if(i.has(G))throw new TypeError('Duplicate type name "'+G+'"');P.push(G),i.set(G,{name:G,test:C[$].test,isAny:C[$].isAny,index:N+$,conversionsTo:[]})}const R=n.slice(N);n=n.slice(0,N).concat(P).concat(R);for(let $=N+P.length;$<n.length;++$)i.get(n[$]).index=$}function p(){i=new Map,n=[],a=0,h([t],!1)}p(),h(e);function o(){let C;for(C of n)i.get(C).conversionsTo=[];a=0}function u(C){const M=n.filter(N=>{const P=i.get(N);return!P.isAny&&P.test(C)});return M.length?M:["any"]}function s(C){return C&&typeof C=="function"&&"_typedFunctionData"in C}function c(C,M,N){if(!s(C))throw new TypeError(Lt);const P=N&&N.exact,R=Array.isArray(M)?M.join(","):M,$=F(R),G=g($);if(!P||G in C.signatures){const pr=C._typedFunctionData.signatureMap.get(G);if(pr)return pr}const Z=$.length;let Y;if(P){Y=[];let pr;for(pr in C.signatures)Y.push(C._typedFunctionData.signatureMap.get(pr))}else Y=C._typedFunctionData.signatures;for(let pr=0;pr<Z;++pr){const mr=$[pr],Er=[];let qr;for(qr of Y){const Pr=B(qr.params,pr);if(!(!Pr||mr.restParam&&!Pr.restParam)){if(!Pr.hasAny){const Gr=w(Pr);if(mr.types.some(Yr=>!Gr.has(Yr.name)))continue}Er.push(qr)}}if(Y=Er,Y.length===0)break}let U;for(U of Y)if(U.params.length<=Z)return U;throw new TypeError("Signature not found (signature: "+(C.name||"unnamed")+"("+g($,", ")+"))")}function d(C,M,N){return c(C,M,N).implementation}function v(C,M){const N=l(M);if(N.test(C))return C;const P=N.conversionsTo;if(P.length===0)throw new Error("There are no conversions to "+M+" defined.");for(let R=0;R<P.length;R++)if(l(P[R].from).test(C))return P[R].convert(C);throw new Error("Cannot convert "+C+" to "+M)}function g(C){let M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:",";return C.map(N=>N.name).join(M)}function m(C){const M=C.indexOf("...")===0,P=(M?C.length>3?C.slice(3):"any":C).split("|").map(Z=>l(Z.trim()));let R=!1,$=M?"...":"";return{types:P.map(function(Z){return R=Z.isAny||R,$+=Z.name+"|",{name:Z.name,typeIndex:Z.index,test:Z.test,isAny:Z.isAny,conversion:null,conversionIndex:-1}}),name:$.slice(0,-1),hasAny:R,hasConversion:!1,restParam:M}}function A(C){const M=C.types.map(G=>G.name),N=J(M);let P=C.hasAny,R=C.name;const $=N.map(function(G){const Z=l(G.from);return P=Z.isAny||P,R+="|"+G.from,{name:G.from,typeIndex:Z.index,test:Z.test,isAny:Z.isAny,conversion:G,conversionIndex:G.index}});return{types:C.types.concat($),name:R,hasAny:P,hasConversion:$.length>0,restParam:C.restParam}}function w(C){return C.typeSet||(C.typeSet=new Set,C.types.forEach(M=>C.typeSet.add(M.name))),C.typeSet}function F(C){const M=[];if(typeof C!="string")throw new TypeError("Signatures must be strings");const N=C.trim();if(N==="")return M;const P=N.split(",");for(let R=0;R<P.length;++R){const $=m(P[R].trim());if($.restParam&&R!==P.length-1)throw new SyntaxError('Unexpected rest parameter "'+P[R]+'": only allowed for the last parameter');if($.types.length===0)return null;M.push($)}return M}function y(C){const M=ir(C);return M?M.restParam:!1}function D(C){if(!C||C.types.length===0)return Rt;if(C.types.length===1)return l(C.types[0].name).test;if(C.types.length===2){const M=l(C.types[0].name).test,N=l(C.types[1].name).test;return function(R){return M(R)||N(R)}}else{const M=C.types.map(function(N){return l(N.name).test});return function(P){for(let R=0;R<M.length;R++)if(M[R](P))return!0;return!1}}}function _(C){let M,N,P;if(y(C)){M=or(C).map(D);const R=M.length,$=D(ir(C)),G=function(Z){for(let Y=R;Y<Z.length;Y++)if(!$(Z[Y]))return!1;return!0};return function(Y){for(let U=0;U<M.length;U++)if(!M[U](Y[U]))return!1;return G(Y)&&Y.length>=R+1}}else return C.length===0?function($){return $.length===0}:C.length===1?(N=D(C[0]),function($){return N($[0])&&$.length===1}):C.length===2?(N=D(C[0]),P=D(C[1]),function($){return N($[0])&&P($[1])&&$.length===2}):(M=C.map(D),function($){for(let G=0;G<M.length;G++)if(!M[G]($[G]))return!1;return $.length===M.length})}function B(C,M){return M<C.length?C[M]:y(C)?ir(C):null}function E(C,M){const N=B(C,M);return N?w(N):new Set}function S(C){return C.conversion===null||C.conversion===void 0}function x(C,M){const N=new Set;return C.forEach(P=>{const R=E(P.params,M);let $;for($ of R)N.add($)}),N.has("any")?["any"]:Array.from(N)}function z(C,M,N){let P,R;const $=C||"unnamed";let G=N,Z;for(Z=0;Z<M.length;Z++){const mr=[];if(G.forEach(Er=>{const qr=B(Er.params,Z),Pr=D(qr);(Z<Er.params.length||y(Er.params))&&Pr(M[Z])&&mr.push(Er)}),mr.length===0){if(R=x(G,Z),R.length>0){const Er=u(M[Z]);return P=new TypeError("Unexpected type of argument in function "+$+" (expected: "+R.join(" or ")+", actual: "+Er.join(" | ")+", index: "+Z+")"),P.data={category:"wrongType",fn:$,index:Z,actual:Er,expected:R},P}}else G=mr}const Y=G.map(function(mr){return y(mr.params)?1/0:mr.params.length});if(M.length<Math.min.apply(null,Y))return R=x(G,Z),P=new TypeError("Too few arguments in function "+$+" (expected: "+R.join(" or ")+", index: "+M.length+")"),P.data={category:"tooFewArgs",fn:$,index:M.length,expected:R},P;const U=Math.max.apply(null,Y);if(M.length>U)return P=new TypeError("Too many arguments in function "+$+" (expected: "+U+", actual: "+M.length+")"),P.data={category:"tooManyArgs",fn:$,index:M.length,expectedLength:U},P;const pr=[];for(let mr=0;mr<M.length;++mr)pr.push(u(M[mr]).join("|"));return P=new TypeError('Arguments of type "'+pr.join(", ")+'" do not match any of the defined signatures of function '+$+"."),P.data={category:"mismatch",actual:pr},P}function L(C){let M=n.length+1;for(let N=0;N<C.types.length;N++)S(C.types[N])&&(M=Math.min(M,C.types[N].typeIndex));return M}function I(C){let M=a+1;for(let N=0;N<C.types.length;N++)S(C.types[N])||(M=Math.min(M,C.types[N].conversionIndex));return M}function O(C,M){if(C.hasAny){if(!M.hasAny)return 1}else if(M.hasAny)return-1;if(C.restParam){if(!M.restParam)return 1}else if(M.restParam)return-1;if(C.hasConversion){if(!M.hasConversion)return 1}else if(M.hasConversion)return-1;const N=L(C)-L(M);if(N<0)return-1;if(N>0)return 1;const P=I(C)-I(M);return P<0?-1:P>0?1:0}function b(C,M){const N=C.params,P=M.params,R=ir(N),$=ir(P),G=y(N),Z=y(P);if(G&&R.hasAny){if(!Z||!$.hasAny)return 1}else if(Z&&$.hasAny)return-1;let Y=0,U=0,pr;for(pr of N)pr.hasAny&&++Y,pr.hasConversion&&++U;let mr=0,Er=0;for(pr of P)pr.hasAny&&++mr,pr.hasConversion&&++Er;if(Y!==mr)return Y-mr;if(G&&R.hasConversion){if(!Z||!$.hasConversion)return 1}else if(Z&&$.hasConversion)return-1;if(U!==Er)return U-Er;if(G){if(!Z)return 1}else if(Z)return-1;const qr=(N.length-P.length)*(G?-1:1);if(qr!==0)return qr;const Pr=[];let Gr=0;for(let ge=0;ge<N.length;++ge){const Oe=O(N[ge],P[ge]);Pr.push(Oe),Gr+=Oe}if(Gr!==0)return Gr;let Yr;for(Yr of Pr)if(Yr!==0)return Yr;return 0}function J(C){if(C.length===0)return[];const M=C.map(l);C.length>1&&M.sort((R,$)=>R.index-$.index);let N=M[0].conversionsTo;if(C.length===1)return N;N=N.concat([]);const P=new Set(C);for(let R=1;R<M.length;++R){let $;for($ of M[R].conversionsTo)P.has($.from)||(N.push($),P.add($.from))}return N}function V(C,M){let N=M;if(C.some(R=>R.hasConversion)){const R=y(C),$=C.map(T);N=function(){const Z=[],Y=R?arguments.length-1:arguments.length;for(let U=0;U<Y;U++)Z[U]=$[U](arguments[U]);return R&&(Z[Y]=arguments[Y].map($[Y])),M.apply(this,Z)}}let P=N;if(y(C)){const R=C.length-1;P=function(){return N.apply(this,j(arguments,0,R).concat([j(arguments,R)]))}}return P}function T(C){let M,N,P,R;const $=[],G=[];switch(C.types.forEach(function(Z){Z.conversion&&($.push(l(Z.conversion.from).test),G.push(Z.conversion.convert))}),G.length){case 0:return function(Y){return Y};case 1:return M=$[0],P=G[0],function(Y){return M(Y)?P(Y):Y};case 2:return M=$[0],N=$[1],P=G[0],R=G[1],function(Y){return M(Y)?P(Y):N(Y)?R(Y):Y};default:return function(Y){for(let U=0;U<G.length;U++)if($[U](Y))return G[U](Y);return Y}}}function H(C){function M(N,P,R){if(P<N.length){const $=N[P];let G=[];if($.restParam){const Z=$.types.filter(S);Z.length<$.types.length&&G.push({types:Z,name:"..."+Z.map(Y=>Y.name).join("|"),hasAny:Z.some(Y=>Y.isAny),hasConversion:!1,restParam:!0}),G.push($)}else G=$.types.map(function(Z){return{types:[Z],name:Z.name,hasAny:Z.isAny,hasConversion:Z.conversion,restParam:!1}});return Dr(G,function(Z){return M(N,P+1,R.concat([Z]))})}else return[R]}return M(C,0,[])}function K(C,M){const N=Math.max(C.length,M.length);for(let Z=0;Z<N;Z++){const Y=E(C,Z),U=E(M,Z);let pr=!1,mr;for(mr of U)if(Y.has(mr)){pr=!0;break}if(!pr)return!1}const P=C.length,R=M.length,$=y(C),G=y(M);return $?G?P===R:R>=P:G?P>=R:P===R}function nr(C){return C.map(M=>zr(M)?Cr(M.referToSelf.callback):$r(M)?fr(M.referTo.references,M.referTo.callback):M)}function k(C,M,N){const P=[];let R;for(R of C){let $=N[R];if(typeof $!="number")throw new TypeError('No definition for referenced signature "'+R+'"');if($=M[$],typeof $!="function")return!1;P.push($)}return P}function Q(C,M,N){const P=nr(C),R=new Array(P.length).fill(!1);let $=!0;for(;$;){$=!1;let G=!0;for(let Z=0;Z<P.length;++Z){if(R[Z])continue;const Y=P[Z];if(zr(Y))P[Z]=Y.referToSelf.callback(N),P[Z].referToSelf=Y.referToSelf,R[Z]=!0,G=!1;else if($r(Y)){const U=k(Y.referTo.references,P,M);U?(P[Z]=Y.referTo.callback.apply(this,U),P[Z].referTo=Y.referTo,R[Z]=!0,G=!1):$=!0}}if(G&&$)throw new SyntaxError("Circular reference detected in resolving typed.referTo")}return P}function lr(C){const M=/\bthis(\(|\.signatures\b)/;Object.keys(C).forEach(N=>{const P=C[N];if(M.test(P.toString()))throw new SyntaxError("Using `this` to self-reference a function is deprecated since typed-function@3. Use typed.referTo and typed.referToSelf instead.")})}function ar(C,M){if(f.createCount++,Object.keys(M).length===0)throw new SyntaxError("No signatures provided");f.warnAgainstDeprecatedThis&&lr(M);const N=[],P=[],R={},$=[];let G;for(G in M){if(!Object.prototype.hasOwnProperty.call(M,G))continue;const vr=F(G);if(!vr)continue;N.forEach(function(Se){if(K(Se,vr))throw new TypeError('Conflicting signatures "'+g(Se)+'" and "'+g(vr)+'".')}),N.push(vr);const Rr=P.length;P.push(M[G]);const Gi=vr.map(A);let Ie;for(Ie of H(Gi)){const Se=g(Ie);$.push({params:Ie,name:Se,fn:Rr}),Ie.every(Yi=>!Yi.hasConversion)&&(R[Se]=Rr)}}$.sort(b);const Z=Q(P,R,Be);let Y;for(Y in R)Object.prototype.hasOwnProperty.call(R,Y)&&(R[Y]=Z[R[Y]]);const U=[],pr=new Map;for(Y of $)pr.has(Y.name)||(Y.fn=Z[Y.fn],U.push(Y),pr.set(Y.name,Y));const mr=U[0]&&U[0].params.length<=2&&!y(U[0].params),Er=U[1]&&U[1].params.length<=2&&!y(U[1].params),qr=U[2]&&U[2].params.length<=2&&!y(U[2].params),Pr=U[3]&&U[3].params.length<=2&&!y(U[3].params),Gr=U[4]&&U[4].params.length<=2&&!y(U[4].params),Yr=U[5]&&U[5].params.length<=2&&!y(U[5].params),ge=mr&&Er&&qr&&Pr&&Gr&&Yr;for(let vr=0;vr<U.length;++vr)U[vr].test=_(U[vr].params);const Oe=mr?D(U[0].params[0]):Hr,gi=Er?D(U[1].params[0]):Hr,wi=qr?D(U[2].params[0]):Hr,yi=Pr?D(U[3].params[0]):Hr,Ai=Gr?D(U[4].params[0]):Hr,Fi=Yr?D(U[5].params[0]):Hr,Ei=mr?D(U[0].params[1]):Hr,Ci=Er?D(U[1].params[1]):Hr,_i=qr?D(U[2].params[1]):Hr,Bi=Pr?D(U[3].params[1]):Hr,Si=Gr?D(U[4].params[1]):Hr,Mi=Yr?D(U[5].params[1]):Hr;for(let vr=0;vr<U.length;++vr)U[vr].implementation=V(U[vr].params,U[vr].fn);const xi=mr?U[0].implementation:we,bi=Er?U[1].implementation:we,Ni=qr?U[2].implementation:we,Ti=Pr?U[3].implementation:we,zi=Gr?U[4].implementation:we,Oi=Yr?U[5].implementation:we,Ii=mr?U[0].params.length:-1,Pi=Er?U[1].params.length:-1,$i=qr?U[2].params.length:-1,qi=Pr?U[3].params.length:-1,Ri=Gr?U[4].params.length:-1,Li=Yr?U[5].params.length:-1,Ui=ge?6:0,Zi=U.length,Vi=U.map(vr=>vr.test),Hi=U.map(vr=>vr.implementation),Ji=function(){for(let Rr=Ui;Rr<Zi;Rr++)if(Vi[Rr](arguments))return Hi[Rr].apply(this,arguments);return f.onMismatch(C,arguments,U)};function Be(vr,Rr){return arguments.length===Ii&&Oe(vr)&&Ei(Rr)?xi.apply(this,arguments):arguments.length===Pi&&gi(vr)&&Ci(Rr)?bi.apply(this,arguments):arguments.length===$i&&wi(vr)&&_i(Rr)?Ni.apply(this,arguments):arguments.length===qi&&yi(vr)&&Bi(Rr)?Ti.apply(this,arguments):arguments.length===Ri&&Ai(vr)&&Si(Rr)?zi.apply(this,arguments):arguments.length===Li&&Fi(vr)&&Mi(Rr)?Oi.apply(this,arguments):Ji.apply(this,arguments)}try{Object.defineProperty(Be,"name",{value:C})}catch{}return Be.signatures=R,Be._typedFunctionData={signatures:U,signatureMap:pr},Be}function tr(C,M,N){throw z(C,M,N)}function or(C){return j(C,0,C.length-1)}function ir(C){return C[C.length-1]}function j(C,M,N){return Array.prototype.slice.call(C,M,N)}function Ar(C,M){for(let N=0;N<C.length;N++)if(M(C[N]))return C[N]}function Dr(C,M){return Array.prototype.concat.apply([],C.map(M))}function ur(){const C=or(arguments).map(N=>g(F(N))),M=ir(arguments);if(typeof M!="function")throw new TypeError("Callback function expected as last argument");return fr(C,M)}function fr(C,M){return{referTo:{references:C,callback:M}}}function Cr(C){if(typeof C!="function")throw new TypeError("Callback function expected as first argument");return{referToSelf:{callback:C}}}function $r(C){return C&&typeof C.referTo=="object"&&Array.isArray(C.referTo.references)&&typeof C.referTo.callback=="function"}function zr(C){return C&&typeof C.referToSelf=="object"&&typeof C.referToSelf.callback=="function"}function sr(C,M){if(!C)return M;if(M&&M!==C){const N=new Error("Function names do not match (expected: "+C+", actual: "+M+")");throw N.data={actual:M,expected:C},N}return C}function Or(C){let M;for(const N in C)Object.prototype.hasOwnProperty.call(C,N)&&(s(C[N])||typeof C[N].signature=="string")&&(M=sr(M,C[N].name));return M}function Jr(C,M){let N;for(N in M)if(Object.prototype.hasOwnProperty.call(M,N)){if(N in C&&M[N]!==C[N]){const P=new Error('Signature "'+N+'" is defined twice');throw P.data={signature:N,sourceFunction:M[N],destFunction:C[N]},P}C[N]=M[N]}}const ft=f;f=function(C){const M=typeof C=="string",N=M?1:0;let P=M?C:"";const R={};for(let $=N;$<arguments.length;++$){const G=arguments[$];let Z={},Y;if(typeof G=="function"?(Y=G.name,typeof G.signature=="string"?Z[G.signature]=G:s(G)&&(Z=G.signatures)):r(G)&&(Z=G,M||(Y=Or(G))),Object.keys(Z).length===0){const U=new TypeError("Argument to 'typed' at index "+$+" is not a (typed) function, nor an object with signatures as keys and functions as values.");throw U.data={index:$,argument:G},U}M||(P=sr(P,Y)),Jr(R,Z)}return ar(P||"",R)},f.create=Mn,f.createCount=ft.createCount,f.onMismatch=tr,f.throwMismatchError=tr,f.createError=z,f.clear=p,f.clearConversions=o,f.addTypes=h,f._findType=l,f.referTo=ur,f.referToSelf=Cr,f.convert=v,f.findSignature=c,f.find=d,f.isTypedFunction=s,f.warnAgainstDeprecatedThis=!0,f.addType=function(C,M){let N="any";M!==!1&&i.has("Object")&&(N="Object"),f.addTypes([C],N)};function _e(C){if(!C||typeof C.from!="string"||typeof C.to!="string"||typeof C.convert!="function")throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");if(C.to===C.from)throw new SyntaxError('Illegal to define conversion from "'+C.from+'" to itself.')}return f.addConversion=function(C){let M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{override:!1};_e(C);const N=l(C.to),P=N.conversionsTo.find(R=>R.from===C.from);if(P)if(M&&M.override)f.removeConversion({from:P.from,to:C.to,convert:P.convert});else throw new Error('There is already a conversion from "'+C.from+'" to "'+N.name+'"');N.conversionsTo.push({from:C.from,convert:C.convert,index:a++})},f.addConversions=function(C,M){C.forEach(N=>f.addConversion(N,M))},f.removeConversion=function(C){_e(C);const M=l(C.to),N=Ar(M.conversionsTo,R=>R.from===C.from);if(!N)throw new Error("Attempt to remove nonexistent conversion from "+C.from+" to "+C.to);if(N.convert!==C.convert)throw new Error("Conversion to remove does not match existing conversion");const P=M.conversionsTo.indexOf(N);M.conversionsTo.splice(P,1)},f.resolve=function(C,M){if(!s(C))throw new TypeError(Lt);const N=C._typedFunctionData.signatures;for(let P=0;P<N.length;++P)if(N[P].test(M))return N[P];return null},f}const Ut=Mn();function Br(r){return typeof r=="boolean"?!0:isFinite(r)?r===Math.round(r):!1}function vt(r,e,t){var i={2:"0b",8:"0o",16:"0x"},n=i[e],a="";if(t){if(t<1)throw new Error("size must be in greater than 0");if(!Br(t))throw new Error("size must be an integer");if(r>2**(t-1)-1||r<-(2**(t-1)))throw new Error("Value must be in range [-2^".concat(t-1,", 2^").concat(t-1,"-1]"));if(!Br(r))throw new Error("Value must be an integer");r<0&&(r=r+2**t),a="i".concat(t)}var f="";return r<0&&(r=-r,f="-"),"".concat(f).concat(n).concat(r.toString(e)).concat(a)}function pt(r,e){if(typeof e=="function")return e(r);if(r===1/0)return"Infinity";if(r===-1/0)return"-Infinity";if(isNaN(r))return"NaN";var{notation:t,precision:i,wordSize:n}=xn(e);switch(t){case"fixed":return Pu(r,i);case"exponential":return bn(r,i);case"engineering":return Iu(r,i);case"bin":return vt(r,2,n);case"oct":return vt(r,8,n);case"hex":return vt(r,16,n);case"auto":return $u(r,i,e).replace(/((\.\d*?)(0+))($|e)/,function(){var a=arguments[2],f=arguments[4];return a!=="."?a+f:f});default:throw new Error('Unknown notation "'+t+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function xn(r){var e="auto",t,i;if(r!==void 0)if(gr(r))t=r;else if(Nr(r))t=r.toNumber();else if(Ct(r))r.precision!==void 0&&(t=Zt(r.precision,()=>{throw new Error('Option "precision" must be a number or BigNumber')})),r.wordSize!==void 0&&(i=Zt(r.wordSize,()=>{throw new Error('Option "wordSize" must be a number or BigNumber')})),r.notation&&(e=r.notation);else throw new Error("Unsupported type of options, number, BigNumber, or object expected");return{notation:e,precision:t,wordSize:i}}function We(r){var e=String(r).toLowerCase().match(/^(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!e)throw new SyntaxError("Invalid number "+r);var t=e[1],i=e[2],n=parseFloat(e[4]||"0"),a=i.indexOf(".");n+=a!==-1?a-1:i.length-1;var f=i.replace(".","").replace(/^0*/,function(l){return n-=l.length,""}).replace(/0*$/,"").split("").map(function(l){return parseInt(l)});return f.length===0&&(f.push(0),n++),{sign:t,coefficients:f,exponent:n}}function Iu(r,e){if(isNaN(r)||!isFinite(r))return String(r);var t=We(r),i=ke(t,e),n=i.exponent,a=i.coefficients,f=n%3===0?n:n<0?n-3-n%3:n-n%3;if(gr(e))for(;e>a.length||n-f+1>a.length;)a.push(0);else for(var l=Math.abs(n-f)-(a.length-1),h=0;h<l;h++)a.push(0);for(var p=Math.abs(n-f),o=1;p>0;)o++,p--;var u=a.slice(o).join(""),s=gr(e)&&u.length||u.match(/[1-9]/)?"."+u:"",c=a.slice(0,o).join("")+s+"e"+(n>=0?"+":"")+f.toString();return i.sign+c}function Pu(r,e){if(isNaN(r)||!isFinite(r))return String(r);var t=We(r),i=typeof e=="number"?ke(t,t.exponent+1+e):t,n=i.coefficients,a=i.exponent+1,f=a+(e||0);return n.length<f&&(n=n.concat(Fe(f-n.length))),a<0&&(n=Fe(-a+1).concat(n),a=1),a<n.length&&n.splice(a,0,a===0?"0.":"."),i.sign+n.join("")}function bn(r,e){if(isNaN(r)||!isFinite(r))return String(r);var t=We(r),i=e?ke(t,e):t,n=i.coefficients,a=i.exponent;n.length<e&&(n=n.concat(Fe(e-n.length)));var f=n.shift();return i.sign+f+(n.length>0?"."+n.join(""):"")+"e"+(a>=0?"+":"")+a}function $u(r,e,t){if(isNaN(r)||!isFinite(r))return String(r);var i=Vt(t==null?void 0:t.lowerExp,-3),n=Vt(t==null?void 0:t.upperExp,5),a=We(r),f=e?ke(a,e):a;if(f.exponent<i||f.exponent>=n)return bn(r,e);var l=f.coefficients,h=f.exponent;l.length<e&&(l=l.concat(Fe(e-l.length))),l=l.concat(Fe(h-l.length+1+(l.length<e?e-l.length:0))),l=Fe(-h).concat(l);var p=h>0?h:0;return p<l.length-1&&l.splice(p+1,0,"."),f.sign+l.join("")}function ke(r,e){for(var t={sign:r.sign,coefficients:r.coefficients,exponent:r.exponent},i=t.coefficients;e<=0;)i.unshift(0),t.exponent++,e++;if(i.length>e){var n=i.splice(e,i.length-e);if(n[0]>=5){var a=e-1;for(i[a]++;i[a]===10;)i.pop(),a===0&&(i.unshift(0),t.exponent++,a++),a--,i[a]++}}return t}function Fe(r){for(var e=[],t=0;t<r;t++)e.push(0);return e}function qu(r){return r.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length}function De(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e-8,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(t<=0)throw new Error("Relative tolerance must be greater than 0");if(i<0)throw new Error("Absolute tolerance must be at least 0");return isNaN(r)||isNaN(e)?!1:!isFinite(r)||!isFinite(e)?r===e:r===e?!0:Math.abs(r-e)<=Math.max(t*Math.max(Math.abs(r),Math.abs(e)),i)}function Zt(r,e){if(gr(r))return r;if(Nr(r))return r.toNumber();e()}function Vt(r,e){return gr(r)?r:Nr(r)?r.toNumber():e}function X(r,e,t,i){function n(a){var f=Tu(a,e.map(Uu));return Ru(r,e,a),t(f)}return n.isFactory=!0,n.fn=r,n.dependencies=e.slice().sort(),i&&(n.meta=i),n}function Ru(r,e,t){var i=e.filter(a=>!Lu(a)).every(a=>t[a]!==void 0);if(!i){var n=e.filter(a=>t[a]===void 0);throw new Error('Cannot create function "'.concat(r,'", ')+"some dependencies are missing: ".concat(n.map(a=>'"'.concat(a,'"')).join(", "),"."))}}function Lu(r){return r&&r[0]==="?"}function Uu(r){return r&&r[0]==="?"?r.slice(1):r}function Zu(r,e){if(Tn(r)&&Nn(r,e))return r[e];throw typeof r[e]=="function"&&Ju(r,e)?new Error('Cannot access method "'+e+'" as a property'):new Error('No access to property "'+e+'"')}function Vu(r,e,t){if(Tn(r)&&Nn(r,e))return r[e]=t,t;throw new Error('No access to property "'+e+'"')}function Hu(r,e){return e in r}function Nn(r,e){return!r||typeof r!="object"?!1:Me(Gu,e)?!0:!(e in Object.prototype||e in Function.prototype)}function Ju(r,e){return r==null||typeof r[e]!="function"||Me(r,e)&&Object.getPrototypeOf&&e in Object.getPrototypeOf(r)?!1:Me(Yu,e)?!0:!(e in Object.prototype||e in Function.prototype)}function Tn(r){return typeof r=="object"&&r&&r.constructor===Object}var Gu={length:!0,name:!0},Yu={toString:!0,valueOf:!0,toLocaleString:!0};class Ku{constructor(e){this.wrappedObject=e,this[Symbol.iterator]=this.entries}keys(){return Object.keys(this.wrappedObject).values()}get(e){return Zu(this.wrappedObject,e)}set(e,t){return Vu(this.wrappedObject,e,t),this}has(e){return Hu(this.wrappedObject,e)}entries(){return Xu(this.keys(),e=>[e,this.get(e)])}forEach(e){for(var t of this.keys())e(this.get(t),t,this)}delete(e){delete this.wrappedObject[e]}clear(){for(var e of this.keys())this.delete(e)}get size(){return Object.keys(this.wrappedObject).length}}function Xu(r,e){return{next:()=>{var t=r.next();return t.done?t:{value:e(t.value),done:!1}}}}function Qu(r){return r?r instanceof Map||r instanceof Ku||typeof r.set=="function"&&typeof r.get=="function"&&typeof r.keys=="function"&&typeof r.has=="function":!1}var zn=function(){return zn=Ut.create,Ut},Wu=["?BigNumber","?Complex","?DenseMatrix","?Fraction"],ku=X("typed",Wu,function(e){var{BigNumber:t,Complex:i,DenseMatrix:n,Fraction:a}=e,f=zn();return f.clear(),f.addTypes([{name:"number",test:gr},{name:"Complex",test:En},{name:"BigNumber",test:Nr},{name:"bigint",test:nu},{name:"Fraction",test:Cn},{name:"Unit",test:_n},{name:"identifier",test:l=>ee&&/^(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])*$/.test(l)},{name:"string",test:ee},{name:"Chain",test:xu},{name:"Array",test:wr},{name:"Matrix",test:xr},{name:"DenseMatrix",test:Bn},{name:"SparseMatrix",test:Sn},{name:"Range",test:iu},{name:"Index",test:Et},{name:"boolean",test:uu},{name:"ResultSet",test:au},{name:"Help",test:ou},{name:"function",test:su},{name:"Date",test:fu},{name:"RegExp",test:cu},{name:"null",test:lu},{name:"undefined",test:vu},{name:"AccessorNode",test:hu},{name:"ArrayNode",test:pu},{name:"AssignmentNode",test:Du},{name:"BlockNode",test:du},{name:"ConditionalNode",test:mu},{name:"ConstantNode",test:gu},{name:"FunctionNode",test:yu},{name:"FunctionAssignmentNode",test:wu},{name:"IndexNode",test:Au},{name:"Node",test:Fu},{name:"ObjectNode",test:Eu},{name:"OperatorNode",test:Cu},{name:"ParenthesisNode",test:_u},{name:"RangeNode",test:Bu},{name:"RelationalNode",test:Su},{name:"SymbolNode",test:Mu},{name:"Map",test:Qu},{name:"Object",test:Ct}]),f.addConversions([{from:"number",to:"BigNumber",convert:function(h){if(t||$e(h),qu(h)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+h+"). Use function bignumber(x) to convert to BigNumber.");return new t(h)}},{from:"number",to:"Complex",convert:function(h){return i||qe(h),new i(h,0)}},{from:"BigNumber",to:"Complex",convert:function(h){return i||qe(h),new i(h.toNumber(),0)}},{from:"bigint",to:"number",convert:function(h){if(h>Number.MAX_SAFE_INTEGER)throw new TypeError("Cannot implicitly convert bigint to number: value exceeds the max safe integer value (value: "+h+")");return Number(h)}},{from:"bigint",to:"BigNumber",convert:function(h){return t||$e(h),new t(h.toString())}},{from:"bigint",to:"Fraction",convert:function(h){return a||Re(h),new a(h.toString())}},{from:"Fraction",to:"BigNumber",convert:function(h){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(h){return i||qe(h),new i(h.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(h){a||Re(h);var p=new a(h);if(p.valueOf()!==h)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+h+"). Use function fraction(x) to convert to Fraction.");return p}},{from:"string",to:"number",convert:function(h){var p=Number(h);if(isNaN(p))throw new Error('Cannot convert "'+h+'" to a number');return p}},{from:"string",to:"BigNumber",convert:function(h){t||$e(h);try{return new t(h)}catch{throw new Error('Cannot convert "'+h+'" to BigNumber')}}},{from:"string",to:"bigint",convert:function(h){try{return BigInt(h)}catch{throw new Error('Cannot convert "'+h+'" to BigInt')}}},{from:"string",to:"Fraction",convert:function(h){a||Re(h);try{return new a(h)}catch{throw new Error('Cannot convert "'+h+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(h){i||qe(h);try{return new i(h)}catch{throw new Error('Cannot convert "'+h+'" to Complex')}}},{from:"boolean",to:"number",convert:function(h){return+h}},{from:"boolean",to:"BigNumber",convert:function(h){return t||$e(h),new t(+h)}},{from:"boolean",to:"bigint",convert:function(h){return BigInt(+h)}},{from:"boolean",to:"Fraction",convert:function(h){return a||Re(h),new a(+h)}},{from:"boolean",to:"string",convert:function(h){return String(h)}},{from:"Array",to:"Matrix",convert:function(h){return n||ju(),new n(h)}},{from:"Matrix",to:"Array",convert:function(h){return h.valueOf()}}]),f.onMismatch=(l,h,p)=>{var o=f.createError(l,h,p);if(["wrongType","mismatch"].includes(o.data.category)&&h.length===1&&Ze(h[0])&&p.some(s=>!s.params.includes(","))){var u=new TypeError("Function '".concat(l,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(l,")'."));throw u.data=o.data,u}throw o},f.onMismatch=(l,h,p)=>{var o=f.createError(l,h,p);if(["wrongType","mismatch"].includes(o.data.category)&&h.length===1&&Ze(h[0])&&p.some(s=>!s.params.includes(","))){var u=new TypeError("Function '".concat(l,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(l,")'."));throw u.data=o.data,u}throw o},f});function $e(r){throw new Error("Cannot convert value ".concat(r," into a BigNumber: no class 'BigNumber' provided"))}function qe(r){throw new Error("Cannot convert value ".concat(r," into a Complex number: no class 'Complex' provided"))}function ju(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}function Re(r){throw new Error("Cannot convert value ".concat(r," into a Fraction, no class 'Fraction' provided."))}/*!
 *  decimal.js v10.4.3
 *  An arbitrary-precision Decimal type for JavaScript.
 *  https://github.com/MikeMcl/decimal.js
 *  Copyright (c) 2022 Michael Mclaughlin <M8ch88l@gmail.com>
 *  MIT Licence
 */var ye=9e15,le=1e9,Dt="0123456789abcdef",Ve="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",He="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",dt={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-ye,maxE:ye,crypto:!1},On,ie,er=!0,je="[DecimalError] ",ce=je+"Invalid argument: ",In=je+"Precision limit exceeded",Pn=je+"crypto unavailable",$n="[object Decimal]",Ir=Math.floor,_r=Math.pow,ra=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,ea=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,ta=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,qn=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,jr=1e7,rr=7,na=9007199254740991,ia=Ve.length-1,mt=He.length-1,q={toStringTag:$n};q.absoluteValue=q.abs=function(){var r=new this.constructor(this);return r.s<0&&(r.s=1),W(r)};q.ceil=function(){return W(new this.constructor(this),this.e+1,2)};q.clampedTo=q.clamp=function(r,e){var t,i=this,n=i.constructor;if(r=new n(r),e=new n(e),!r.s||!e.s)return new n(NaN);if(r.gt(e))throw Error(ce+e);return t=i.cmp(r),t<0?r:i.cmp(e)>0?e:new n(i)};q.comparedTo=q.cmp=function(r){var e,t,i,n,a=this,f=a.d,l=(r=new a.constructor(r)).d,h=a.s,p=r.s;if(!f||!l)return!h||!p?NaN:h!==p?h:f===l?0:!f^h<0?1:-1;if(!f[0]||!l[0])return f[0]?h:l[0]?-p:0;if(h!==p)return h;if(a.e!==r.e)return a.e>r.e^h<0?1:-1;for(i=f.length,n=l.length,e=0,t=i<n?i:n;e<t;++e)if(f[e]!==l[e])return f[e]>l[e]^h<0?1:-1;return i===n?0:i>n^h<0?1:-1};q.cosine=q.cos=function(){var r,e,t=this,i=t.constructor;return t.d?t.d[0]?(r=i.precision,e=i.rounding,i.precision=r+Math.max(t.e,t.sd())+rr,i.rounding=1,t=ua(i,Vn(i,t)),i.precision=r,i.rounding=e,W(ie==2||ie==3?t.neg():t,r,e,!0)):new i(1):new i(NaN)};q.cubeRoot=q.cbrt=function(){var r,e,t,i,n,a,f,l,h,p,o=this,u=o.constructor;if(!o.isFinite()||o.isZero())return new u(o);for(er=!1,a=o.s*_r(o.s*o,1/3),!a||Math.abs(a)==1/0?(t=Tr(o.d),r=o.e,(a=(r-t.length+1)%3)&&(t+=a==1||a==-2?"0":"00"),a=_r(t,1/3),r=Ir((r+1)/3)-(r%3==(r<0?-1:2)),a==1/0?t="5e"+r:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+r),i=new u(t),i.s=o.s):i=new u(a.toString()),f=(r=u.precision)+3;;)if(l=i,h=l.times(l).times(l),p=h.plus(o),i=dr(p.plus(o).times(l),p.plus(h),f+2,1),Tr(l.d).slice(0,f)===(t=Tr(i.d)).slice(0,f))if(t=t.slice(f-3,f+1),t=="9999"||!n&&t=="4999"){if(!n&&(W(l,r+1,0),l.times(l).times(l).eq(o))){i=l;break}f+=4,n=1}else{(!+t||!+t.slice(1)&&t.charAt(0)=="5")&&(W(i,r+1,1),e=!i.times(i).times(i).eq(o));break}return er=!0,W(i,r,u.rounding,e)};q.decimalPlaces=q.dp=function(){var r,e=this.d,t=NaN;if(e){if(r=e.length-1,t=(r-Ir(this.e/rr))*rr,r=e[r],r)for(;r%10==0;r/=10)t--;t<0&&(t=0)}return t};q.dividedBy=q.div=function(r){return dr(this,new this.constructor(r))};q.dividedToIntegerBy=q.divToInt=function(r){var e=this,t=e.constructor;return W(dr(e,new t(r),0,1,1),t.precision,t.rounding)};q.equals=q.eq=function(r){return this.cmp(r)===0};q.floor=function(){return W(new this.constructor(this),this.e+1,3)};q.greaterThan=q.gt=function(r){return this.cmp(r)>0};q.greaterThanOrEqualTo=q.gte=function(r){var e=this.cmp(r);return e==1||e===0};q.hyperbolicCosine=q.cosh=function(){var r,e,t,i,n,a=this,f=a.constructor,l=new f(1);if(!a.isFinite())return new f(a.s?1/0:NaN);if(a.isZero())return l;t=f.precision,i=f.rounding,f.precision=t+Math.max(a.e,a.sd())+4,f.rounding=1,n=a.d.length,n<32?(r=Math.ceil(n/3),e=(1/et(4,r)).toString()):(r=16,e="2.3283064365386962890625e-10"),a=Ee(f,1,a.times(e),new f(1),!0);for(var h,p=r,o=new f(8);p--;)h=a.times(a),a=l.minus(h.times(o.minus(h.times(o))));return W(a,f.precision=t,f.rounding=i,!0)};q.hyperbolicSine=q.sinh=function(){var r,e,t,i,n=this,a=n.constructor;if(!n.isFinite()||n.isZero())return new a(n);if(e=a.precision,t=a.rounding,a.precision=e+Math.max(n.e,n.sd())+4,a.rounding=1,i=n.d.length,i<3)n=Ee(a,2,n,n,!0);else{r=1.4*Math.sqrt(i),r=r>16?16:r|0,n=n.times(1/et(5,r)),n=Ee(a,2,n,n,!0);for(var f,l=new a(5),h=new a(16),p=new a(20);r--;)f=n.times(n),n=n.times(l.plus(f.times(h.times(f).plus(p))))}return a.precision=e,a.rounding=t,W(n,e,t,!0)};q.hyperbolicTangent=q.tanh=function(){var r,e,t=this,i=t.constructor;return t.isFinite()?t.isZero()?new i(t):(r=i.precision,e=i.rounding,i.precision=r+7,i.rounding=1,dr(t.sinh(),t.cosh(),i.precision=r,i.rounding=e)):new i(t.s)};q.inverseCosine=q.acos=function(){var r,e=this,t=e.constructor,i=e.abs().cmp(1),n=t.precision,a=t.rounding;return i!==-1?i===0?e.isNeg()?kr(t,n,a):new t(0):new t(NaN):e.isZero()?kr(t,n+4,a).times(.5):(t.precision=n+6,t.rounding=1,e=e.asin(),r=kr(t,n+4,a).times(.5),t.precision=n,t.rounding=a,r.minus(e))};q.inverseHyperbolicCosine=q.acosh=function(){var r,e,t=this,i=t.constructor;return t.lte(1)?new i(t.eq(1)?0:NaN):t.isFinite()?(r=i.precision,e=i.rounding,i.precision=r+Math.max(Math.abs(t.e),t.sd())+4,i.rounding=1,er=!1,t=t.times(t).minus(1).sqrt().plus(t),er=!0,i.precision=r,i.rounding=e,t.ln()):new i(t)};q.inverseHyperbolicSine=q.asinh=function(){var r,e,t=this,i=t.constructor;return!t.isFinite()||t.isZero()?new i(t):(r=i.precision,e=i.rounding,i.precision=r+2*Math.max(Math.abs(t.e),t.sd())+6,i.rounding=1,er=!1,t=t.times(t).plus(1).sqrt().plus(t),er=!0,i.precision=r,i.rounding=e,t.ln())};q.inverseHyperbolicTangent=q.atanh=function(){var r,e,t,i,n=this,a=n.constructor;return n.isFinite()?n.e>=0?new a(n.abs().eq(1)?n.s/0:n.isZero()?n:NaN):(r=a.precision,e=a.rounding,i=n.sd(),Math.max(i,r)<2*-n.e-1?W(new a(n),r,e,!0):(a.precision=t=i-n.e,n=dr(n.plus(1),new a(1).minus(n),t+r,1),a.precision=r+4,a.rounding=1,n=n.ln(),a.precision=r,a.rounding=e,n.times(.5))):new a(NaN)};q.inverseSine=q.asin=function(){var r,e,t,i,n=this,a=n.constructor;return n.isZero()?new a(n):(e=n.abs().cmp(1),t=a.precision,i=a.rounding,e!==-1?e===0?(r=kr(a,t+4,i).times(.5),r.s=n.s,r):new a(NaN):(a.precision=t+6,a.rounding=1,n=n.div(new a(1).minus(n.times(n)).sqrt().plus(1)).atan(),a.precision=t,a.rounding=i,n.times(2)))};q.inverseTangent=q.atan=function(){var r,e,t,i,n,a,f,l,h,p=this,o=p.constructor,u=o.precision,s=o.rounding;if(p.isFinite()){if(p.isZero())return new o(p);if(p.abs().eq(1)&&u+4<=mt)return f=kr(o,u+4,s).times(.25),f.s=p.s,f}else{if(!p.s)return new o(NaN);if(u+4<=mt)return f=kr(o,u+4,s).times(.5),f.s=p.s,f}for(o.precision=l=u+10,o.rounding=1,t=Math.min(28,l/rr+2|0),r=t;r;--r)p=p.div(p.times(p).plus(1).sqrt().plus(1));for(er=!1,e=Math.ceil(l/rr),i=1,h=p.times(p),f=new o(p),n=p;r!==-1;)if(n=n.times(h),a=f.minus(n.div(i+=2)),n=n.times(h),f=a.plus(n.div(i+=2)),f.d[e]!==void 0)for(r=e;f.d[r]===a.d[r]&&r--;);return t&&(f=f.times(2<<t-1)),er=!0,W(f,o.precision=u,o.rounding=s,!0)};q.isFinite=function(){return!!this.d};q.isInteger=q.isInt=function(){return!!this.d&&Ir(this.e/rr)>this.d.length-2};q.isNaN=function(){return!this.s};q.isNegative=q.isNeg=function(){return this.s<0};q.isPositive=q.isPos=function(){return this.s>0};q.isZero=function(){return!!this.d&&this.d[0]===0};q.lessThan=q.lt=function(r){return this.cmp(r)<0};q.lessThanOrEqualTo=q.lte=function(r){return this.cmp(r)<1};q.logarithm=q.log=function(r){var e,t,i,n,a,f,l,h,p=this,o=p.constructor,u=o.precision,s=o.rounding,c=5;if(r==null)r=new o(10),e=!0;else{if(r=new o(r),t=r.d,r.s<0||!t||!t[0]||r.eq(1))return new o(NaN);e=r.eq(10)}if(t=p.d,p.s<0||!t||!t[0]||p.eq(1))return new o(t&&!t[0]?-1/0:p.s!=1?NaN:t?0:1/0);if(e)if(t.length>1)a=!0;else{for(n=t[0];n%10===0;)n/=10;a=n!==1}if(er=!1,l=u+c,f=se(p,l),i=e?Je(o,l+10):se(r,l),h=dr(f,i,l,1),xe(h.d,n=u,s))do if(l+=10,f=se(p,l),i=e?Je(o,l+10):se(r,l),h=dr(f,i,l,1),!a){+Tr(h.d).slice(n+1,n+15)+1==1e14&&(h=W(h,u+1,0));break}while(xe(h.d,n+=10,s));return er=!0,W(h,u,s)};q.minus=q.sub=function(r){var e,t,i,n,a,f,l,h,p,o,u,s,c=this,d=c.constructor;if(r=new d(r),!c.d||!r.d)return!c.s||!r.s?r=new d(NaN):c.d?r.s=-r.s:r=new d(r.d||c.s!==r.s?c:NaN),r;if(c.s!=r.s)return r.s=-r.s,c.plus(r);if(p=c.d,s=r.d,l=d.precision,h=d.rounding,!p[0]||!s[0]){if(s[0])r.s=-r.s;else if(p[0])r=new d(c);else return new d(h===3?-0:0);return er?W(r,l,h):r}if(t=Ir(r.e/rr),o=Ir(c.e/rr),p=p.slice(),a=o-t,a){for(u=a<0,u?(e=p,a=-a,f=s.length):(e=s,t=o,f=p.length),i=Math.max(Math.ceil(l/rr),f)+2,a>i&&(a=i,e.length=1),e.reverse(),i=a;i--;)e.push(0);e.reverse()}else{for(i=p.length,f=s.length,u=i<f,u&&(f=i),i=0;i<f;i++)if(p[i]!=s[i]){u=p[i]<s[i];break}a=0}for(u&&(e=p,p=s,s=e,r.s=-r.s),f=p.length,i=s.length-f;i>0;--i)p[f++]=0;for(i=s.length;i>a;){if(p[--i]<s[i]){for(n=i;n&&p[--n]===0;)p[n]=jr-1;--p[n],p[i]+=jr}p[i]-=s[i]}for(;p[--f]===0;)p.pop();for(;p[0]===0;p.shift())--t;return p[0]?(r.d=p,r.e=rt(p,t),er?W(r,l,h):r):new d(h===3?-0:0)};q.modulo=q.mod=function(r){var e,t=this,i=t.constructor;return r=new i(r),!t.d||!r.s||r.d&&!r.d[0]?new i(NaN):!r.d||t.d&&!t.d[0]?W(new i(t),i.precision,i.rounding):(er=!1,i.modulo==9?(e=dr(t,r.abs(),0,3,1),e.s*=r.s):e=dr(t,r,0,i.modulo,1),e=e.times(r),er=!0,t.minus(e))};q.naturalExponential=q.exp=function(){return gt(this)};q.naturalLogarithm=q.ln=function(){return se(this)};q.negated=q.neg=function(){var r=new this.constructor(this);return r.s=-r.s,W(r)};q.plus=q.add=function(r){var e,t,i,n,a,f,l,h,p,o,u=this,s=u.constructor;if(r=new s(r),!u.d||!r.d)return!u.s||!r.s?r=new s(NaN):u.d||(r=new s(r.d||u.s===r.s?u:NaN)),r;if(u.s!=r.s)return r.s=-r.s,u.minus(r);if(p=u.d,o=r.d,l=s.precision,h=s.rounding,!p[0]||!o[0])return o[0]||(r=new s(u)),er?W(r,l,h):r;if(a=Ir(u.e/rr),i=Ir(r.e/rr),p=p.slice(),n=a-i,n){for(n<0?(t=p,n=-n,f=o.length):(t=o,i=a,f=p.length),a=Math.ceil(l/rr),f=a>f?a+1:f+1,n>f&&(n=f,t.length=1),t.reverse();n--;)t.push(0);t.reverse()}for(f=p.length,n=o.length,f-n<0&&(n=f,t=o,o=p,p=t),e=0;n;)e=(p[--n]=p[n]+o[n]+e)/jr|0,p[n]%=jr;for(e&&(p.unshift(e),++i),f=p.length;p[--f]==0;)p.pop();return r.d=p,r.e=rt(p,i),er?W(r,l,h):r};q.precision=q.sd=function(r){var e,t=this;if(r!==void 0&&r!==!!r&&r!==1&&r!==0)throw Error(ce+r);return t.d?(e=Rn(t.d),r&&t.e+1>e&&(e=t.e+1)):e=NaN,e};q.round=function(){var r=this,e=r.constructor;return W(new e(r),r.e+1,e.rounding)};q.sine=q.sin=function(){var r,e,t=this,i=t.constructor;return t.isFinite()?t.isZero()?new i(t):(r=i.precision,e=i.rounding,i.precision=r+Math.max(t.e,t.sd())+rr,i.rounding=1,t=oa(i,Vn(i,t)),i.precision=r,i.rounding=e,W(ie>2?t.neg():t,r,e,!0)):new i(NaN)};q.squareRoot=q.sqrt=function(){var r,e,t,i,n,a,f=this,l=f.d,h=f.e,p=f.s,o=f.constructor;if(p!==1||!l||!l[0])return new o(!p||p<0&&(!l||l[0])?NaN:l?f:1/0);for(er=!1,p=Math.sqrt(+f),p==0||p==1/0?(e=Tr(l),(e.length+h)%2==0&&(e+="0"),p=Math.sqrt(e),h=Ir((h+1)/2)-(h<0||h%2),p==1/0?e="5e"+h:(e=p.toExponential(),e=e.slice(0,e.indexOf("e")+1)+h),i=new o(e)):i=new o(p.toString()),t=(h=o.precision)+3;;)if(a=i,i=a.plus(dr(f,a,t+2,1)).times(.5),Tr(a.d).slice(0,t)===(e=Tr(i.d)).slice(0,t))if(e=e.slice(t-3,t+1),e=="9999"||!n&&e=="4999"){if(!n&&(W(a,h+1,0),a.times(a).eq(f))){i=a;break}t+=4,n=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(W(i,h+1,1),r=!i.times(i).eq(f));break}return er=!0,W(i,h,o.rounding,r)};q.tangent=q.tan=function(){var r,e,t=this,i=t.constructor;return t.isFinite()?t.isZero()?new i(t):(r=i.precision,e=i.rounding,i.precision=r+10,i.rounding=1,t=t.sin(),t.s=1,t=dr(t,new i(1).minus(t.times(t)).sqrt(),r+10,0),i.precision=r,i.rounding=e,W(ie==2||ie==4?t.neg():t,r,e,!0)):new i(NaN)};q.times=q.mul=function(r){var e,t,i,n,a,f,l,h,p,o=this,u=o.constructor,s=o.d,c=(r=new u(r)).d;if(r.s*=o.s,!s||!s[0]||!c||!c[0])return new u(!r.s||s&&!s[0]&&!c||c&&!c[0]&&!s?NaN:!s||!c?r.s/0:r.s*0);for(t=Ir(o.e/rr)+Ir(r.e/rr),h=s.length,p=c.length,h<p&&(a=s,s=c,c=a,f=h,h=p,p=f),a=[],f=h+p,i=f;i--;)a.push(0);for(i=p;--i>=0;){for(e=0,n=h+i;n>i;)l=a[n]+c[i]*s[n-i-1]+e,a[n--]=l%jr|0,e=l/jr|0;a[n]=(a[n]+e)%jr|0}for(;!a[--f];)a.pop();return e?++t:a.shift(),r.d=a,r.e=rt(a,t),er?W(r,u.precision,u.rounding):r};q.toBinary=function(r,e){return _t(this,2,r,e)};q.toDecimalPlaces=q.toDP=function(r,e){var t=this,i=t.constructor;return t=new i(t),r===void 0?t:(Ur(r,0,le),e===void 0?e=i.rounding:Ur(e,0,8),W(t,r+t.e+1,e))};q.toExponential=function(r,e){var t,i=this,n=i.constructor;return r===void 0?t=te(i,!0):(Ur(r,0,le),e===void 0?e=n.rounding:Ur(e,0,8),i=W(new n(i),r+1,e),t=te(i,!0,r+1)),i.isNeg()&&!i.isZero()?"-"+t:t};q.toFixed=function(r,e){var t,i,n=this,a=n.constructor;return r===void 0?t=te(n):(Ur(r,0,le),e===void 0?e=a.rounding:Ur(e,0,8),i=W(new a(n),r+n.e+1,e),t=te(i,!1,r+i.e+1)),n.isNeg()&&!n.isZero()?"-"+t:t};q.toFraction=function(r){var e,t,i,n,a,f,l,h,p,o,u,s,c=this,d=c.d,v=c.constructor;if(!d)return new v(c);if(p=t=new v(1),i=h=new v(0),e=new v(i),a=e.e=Rn(d)-c.e-1,f=a%rr,e.d[0]=_r(10,f<0?rr+f:f),r==null)r=a>0?e:p;else{if(l=new v(r),!l.isInt()||l.lt(p))throw Error(ce+l);r=l.gt(e)?a>0?e:p:l}for(er=!1,l=new v(Tr(d)),o=v.precision,v.precision=a=d.length*rr*2;u=dr(l,e,0,1,1),n=t.plus(u.times(i)),n.cmp(r)!=1;)t=i,i=n,n=p,p=h.plus(u.times(n)),h=n,n=e,e=l.minus(u.times(n)),l=n;return n=dr(r.minus(t),i,0,1,1),h=h.plus(n.times(p)),t=t.plus(n.times(i)),h.s=p.s=c.s,s=dr(p,i,a,1).minus(c).abs().cmp(dr(h,t,a,1).minus(c).abs())<1?[p,i]:[h,t],v.precision=o,er=!0,s};q.toHexadecimal=q.toHex=function(r,e){return _t(this,16,r,e)};q.toNearest=function(r,e){var t=this,i=t.constructor;if(t=new i(t),r==null){if(!t.d)return t;r=new i(1),e=i.rounding}else{if(r=new i(r),e===void 0?e=i.rounding:Ur(e,0,8),!t.d)return r.s?t:r;if(!r.d)return r.s&&(r.s=t.s),r}return r.d[0]?(er=!1,t=dr(t,r,0,e,1).times(r),er=!0,W(t)):(r.s=t.s,t=r),t};q.toNumber=function(){return+this};q.toOctal=function(r,e){return _t(this,8,r,e)};q.toPower=q.pow=function(r){var e,t,i,n,a,f,l=this,h=l.constructor,p=+(r=new h(r));if(!l.d||!r.d||!l.d[0]||!r.d[0])return new h(_r(+l,p));if(l=new h(l),l.eq(1))return l;if(i=h.precision,a=h.rounding,r.eq(1))return W(l,i,a);if(e=Ir(r.e/rr),e>=r.d.length-1&&(t=p<0?-p:p)<=na)return n=Ln(h,l,t,i),r.s<0?new h(1).div(n):W(n,i,a);if(f=l.s,f<0){if(e<r.d.length-1)return new h(NaN);if(r.d[e]&1||(f=1),l.e==0&&l.d[0]==1&&l.d.length==1)return l.s=f,l}return t=_r(+l,p),e=t==0||!isFinite(t)?Ir(p*(Math.log("0."+Tr(l.d))/Math.LN10+l.e+1)):new h(t+"").e,e>h.maxE+1||e<h.minE-1?new h(e>0?f/0:0):(er=!1,h.rounding=l.s=1,t=Math.min(12,(e+"").length),n=gt(r.times(se(l,i+t)),i),n.d&&(n=W(n,i+5,1),xe(n.d,i,a)&&(e=i+10,n=W(gt(r.times(se(l,e+t)),e),e+5,1),+Tr(n.d).slice(i+1,i+15)+1==1e14&&(n=W(n,i+1,0)))),n.s=f,er=!0,h.rounding=a,W(n,i,a))};q.toPrecision=function(r,e){var t,i=this,n=i.constructor;return r===void 0?t=te(i,i.e<=n.toExpNeg||i.e>=n.toExpPos):(Ur(r,1,le),e===void 0?e=n.rounding:Ur(e,0,8),i=W(new n(i),r,e),t=te(i,r<=i.e||i.e<=n.toExpNeg,r)),i.isNeg()&&!i.isZero()?"-"+t:t};q.toSignificantDigits=q.toSD=function(r,e){var t=this,i=t.constructor;return r===void 0?(r=i.precision,e=i.rounding):(Ur(r,1,le),e===void 0?e=i.rounding:Ur(e,0,8)),W(new i(t),r,e)};q.toString=function(){var r=this,e=r.constructor,t=te(r,r.e<=e.toExpNeg||r.e>=e.toExpPos);return r.isNeg()&&!r.isZero()?"-"+t:t};q.truncated=q.trunc=function(){return W(new this.constructor(this),this.e+1,1)};q.valueOf=q.toJSON=function(){var r=this,e=r.constructor,t=te(r,r.e<=e.toExpNeg||r.e>=e.toExpPos);return r.isNeg()?"-"+t:t};function Tr(r){var e,t,i,n=r.length-1,a="",f=r[0];if(n>0){for(a+=f,e=1;e<n;e++)i=r[e]+"",t=rr-i.length,t&&(a+=ae(t)),a+=i;f=r[e],i=f+"",t=rr-i.length,t&&(a+=ae(t))}else if(f===0)return"0";for(;f%10===0;)f/=10;return a+f}function Ur(r,e,t){if(r!==~~r||r<e||r>t)throw Error(ce+r)}function xe(r,e,t,i){var n,a,f,l;for(a=r[0];a>=10;a/=10)--e;return--e<0?(e+=rr,n=0):(n=Math.ceil((e+1)/rr),e%=rr),a=_r(10,rr-e),l=r[n]%a|0,i==null?e<3?(e==0?l=l/100|0:e==1&&(l=l/10|0),f=t<4&&l==99999||t>3&&l==49999||l==5e4||l==0):f=(t<4&&l+1==a||t>3&&l+1==a/2)&&(r[n+1]/a/100|0)==_r(10,e-2)-1||(l==a/2||l==0)&&(r[n+1]/a/100|0)==0:e<4?(e==0?l=l/1e3|0:e==1?l=l/100|0:e==2&&(l=l/10|0),f=(i||t<4)&&l==9999||!i&&t>3&&l==4999):f=((i||t<4)&&l+1==a||!i&&t>3&&l+1==a/2)&&(r[n+1]/a/1e3|0)==_r(10,e-3)-1,f}function Le(r,e,t){for(var i,n=[0],a,f=0,l=r.length;f<l;){for(a=n.length;a--;)n[a]*=e;for(n[0]+=Dt.indexOf(r.charAt(f++)),i=0;i<n.length;i++)n[i]>t-1&&(n[i+1]===void 0&&(n[i+1]=0),n[i+1]+=n[i]/t|0,n[i]%=t)}return n.reverse()}function ua(r,e){var t,i,n;if(e.isZero())return e;i=e.d.length,i<32?(t=Math.ceil(i/3),n=(1/et(4,t)).toString()):(t=16,n="2.3283064365386962890625e-10"),r.precision+=t,e=Ee(r,1,e.times(n),new r(1));for(var a=t;a--;){var f=e.times(e);e=f.times(f).minus(f).times(8).plus(1)}return r.precision-=t,e}var dr=function(){function r(i,n,a){var f,l=0,h=i.length;for(i=i.slice();h--;)f=i[h]*n+l,i[h]=f%a|0,l=f/a|0;return l&&i.unshift(l),i}function e(i,n,a,f){var l,h;if(a!=f)h=a>f?1:-1;else for(l=h=0;l<a;l++)if(i[l]!=n[l]){h=i[l]>n[l]?1:-1;break}return h}function t(i,n,a,f){for(var l=0;a--;)i[a]-=l,l=i[a]<n[a]?1:0,i[a]=l*f+i[a]-n[a];for(;!i[0]&&i.length>1;)i.shift()}return function(i,n,a,f,l,h){var p,o,u,s,c,d,v,g,m,A,w,F,y,D,_,B,E,S,x,z,L=i.constructor,I=i.s==n.s?1:-1,O=i.d,b=n.d;if(!O||!O[0]||!b||!b[0])return new L(!i.s||!n.s||(O?b&&O[0]==b[0]:!b)?NaN:O&&O[0]==0||!b?I*0:I/0);for(h?(c=1,o=i.e-n.e):(h=jr,c=rr,o=Ir(i.e/c)-Ir(n.e/c)),x=b.length,E=O.length,m=new L(I),A=m.d=[],u=0;b[u]==(O[u]||0);u++);if(b[u]>(O[u]||0)&&o--,a==null?(D=a=L.precision,f=L.rounding):l?D=a+(i.e-n.e)+1:D=a,D<0)A.push(1),d=!0;else{if(D=D/c+2|0,u=0,x==1){for(s=0,b=b[0],D++;(u<E||s)&&D--;u++)_=s*h+(O[u]||0),A[u]=_/b|0,s=_%b|0;d=s||u<E}else{for(s=h/(b[0]+1)|0,s>1&&(b=r(b,s,h),O=r(O,s,h),x=b.length,E=O.length),B=x,w=O.slice(0,x),F=w.length;F<x;)w[F++]=0;z=b.slice(),z.unshift(0),S=b[0],b[1]>=h/2&&++S;do s=0,p=e(b,w,x,F),p<0?(y=w[0],x!=F&&(y=y*h+(w[1]||0)),s=y/S|0,s>1?(s>=h&&(s=h-1),v=r(b,s,h),g=v.length,F=w.length,p=e(v,w,g,F),p==1&&(s--,t(v,x<g?z:b,g,h))):(s==0&&(p=s=1),v=b.slice()),g=v.length,g<F&&v.unshift(0),t(w,v,F,h),p==-1&&(F=w.length,p=e(b,w,x,F),p<1&&(s++,t(w,x<F?z:b,F,h))),F=w.length):p===0&&(s++,w=[0]),A[u++]=s,p&&w[0]?w[F++]=O[B]||0:(w=[O[B]],F=1);while((B++<E||w[0]!==void 0)&&D--);d=w[0]!==void 0}A[0]||A.shift()}if(c==1)m.e=o,On=d;else{for(u=1,s=A[0];s>=10;s/=10)u++;m.e=u+o*c-1,W(m,l?a+m.e+1:a,f,d)}return m}}();function W(r,e,t,i){var n,a,f,l,h,p,o,u,s,c=r.constructor;r:if(e!=null){if(u=r.d,!u)return r;for(n=1,l=u[0];l>=10;l/=10)n++;if(a=e-n,a<0)a+=rr,f=e,o=u[s=0],h=o/_r(10,n-f-1)%10|0;else if(s=Math.ceil((a+1)/rr),l=u.length,s>=l)if(i){for(;l++<=s;)u.push(0);o=h=0,n=1,a%=rr,f=a-rr+1}else break r;else{for(o=l=u[s],n=1;l>=10;l/=10)n++;a%=rr,f=a-rr+n,h=f<0?0:o/_r(10,n-f-1)%10|0}if(i=i||e<0||u[s+1]!==void 0||(f<0?o:o%_r(10,n-f-1)),p=t<4?(h||i)&&(t==0||t==(r.s<0?3:2)):h>5||h==5&&(t==4||i||t==6&&(a>0?f>0?o/_r(10,n-f):0:u[s-1])%10&1||t==(r.s<0?8:7)),e<1||!u[0])return u.length=0,p?(e-=r.e+1,u[0]=_r(10,(rr-e%rr)%rr),r.e=-e||0):u[0]=r.e=0,r;if(a==0?(u.length=s,l=1,s--):(u.length=s+1,l=_r(10,rr-a),u[s]=f>0?(o/_r(10,n-f)%_r(10,f)|0)*l:0),p)for(;;)if(s==0){for(a=1,f=u[0];f>=10;f/=10)a++;for(f=u[0]+=l,l=1;f>=10;f/=10)l++;a!=l&&(r.e++,u[0]==jr&&(u[0]=1));break}else{if(u[s]+=l,u[s]!=jr)break;u[s--]=0,l=1}for(a=u.length;u[--a]===0;)u.pop()}return er&&(r.e>c.maxE?(r.d=null,r.e=NaN):r.e<c.minE&&(r.e=0,r.d=[0])),r}function te(r,e,t){if(!r.isFinite())return Zn(r);var i,n=r.e,a=Tr(r.d),f=a.length;return e?(t&&(i=t-f)>0?a=a.charAt(0)+"."+a.slice(1)+ae(i):f>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(r.e<0?"e":"e+")+r.e):n<0?(a="0."+ae(-n-1)+a,t&&(i=t-f)>0&&(a+=ae(i))):n>=f?(a+=ae(n+1-f),t&&(i=t-n-1)>0&&(a=a+"."+ae(i))):((i=n+1)<f&&(a=a.slice(0,i)+"."+a.slice(i)),t&&(i=t-f)>0&&(n+1===f&&(a+="."),a+=ae(i))),a}function rt(r,e){var t=r[0];for(e*=rr;t>=10;t/=10)e++;return e}function Je(r,e,t){if(e>ia)throw er=!0,t&&(r.precision=t),Error(In);return W(new r(Ve),e,1,!0)}function kr(r,e,t){if(e>mt)throw Error(In);return W(new r(He),e,t,!0)}function Rn(r){var e=r.length-1,t=e*rr+1;if(e=r[e],e){for(;e%10==0;e/=10)t--;for(e=r[0];e>=10;e/=10)t++}return t}function ae(r){for(var e="";r--;)e+="0";return e}function Ln(r,e,t,i){var n,a=new r(1),f=Math.ceil(i/rr+4);for(er=!1;;){if(t%2&&(a=a.times(e),Jt(a.d,f)&&(n=!0)),t=Ir(t/2),t===0){t=a.d.length-1,n&&a.d[t]===0&&++a.d[t];break}e=e.times(e),Jt(e.d,f)}return er=!0,a}function Ht(r){return r.d[r.d.length-1]&1}function Un(r,e,t){for(var i,n=new r(e[0]),a=0;++a<e.length;)if(i=new r(e[a]),i.s)n[t](i)&&(n=i);else{n=i;break}return n}function gt(r,e){var t,i,n,a,f,l,h,p=0,o=0,u=0,s=r.constructor,c=s.rounding,d=s.precision;if(!r.d||!r.d[0]||r.e>17)return new s(r.d?r.d[0]?r.s<0?0:1/0:1:r.s?r.s<0?0:r:NaN);for(e==null?(er=!1,h=d):h=e,l=new s(.03125);r.e>-2;)r=r.times(l),u+=5;for(i=Math.log(_r(2,u))/Math.LN10*2+5|0,h+=i,t=a=f=new s(1),s.precision=h;;){if(a=W(a.times(r),h,1),t=t.times(++o),l=f.plus(dr(a,t,h,1)),Tr(l.d).slice(0,h)===Tr(f.d).slice(0,h)){for(n=u;n--;)f=W(f.times(f),h,1);if(e==null)if(p<3&&xe(f.d,h-i,c,p))s.precision=h+=10,t=a=l=new s(1),o=0,p++;else return W(f,s.precision=d,c,er=!0);else return s.precision=d,f}f=l}}function se(r,e){var t,i,n,a,f,l,h,p,o,u,s,c=1,d=10,v=r,g=v.d,m=v.constructor,A=m.rounding,w=m.precision;if(v.s<0||!g||!g[0]||!v.e&&g[0]==1&&g.length==1)return new m(g&&!g[0]?-1/0:v.s!=1?NaN:g?0:v);if(e==null?(er=!1,o=w):o=e,m.precision=o+=d,t=Tr(g),i=t.charAt(0),Math.abs(a=v.e)<15e14){for(;i<7&&i!=1||i==1&&t.charAt(1)>3;)v=v.times(r),t=Tr(v.d),i=t.charAt(0),c++;a=v.e,i>1?(v=new m("0."+t),a++):v=new m(i+"."+t.slice(1))}else return p=Je(m,o+2,w).times(a+""),v=se(new m(i+"."+t.slice(1)),o-d).plus(p),m.precision=w,e==null?W(v,w,A,er=!0):v;for(u=v,h=f=v=dr(v.minus(1),v.plus(1),o,1),s=W(v.times(v),o,1),n=3;;){if(f=W(f.times(s),o,1),p=h.plus(dr(f,new m(n),o,1)),Tr(p.d).slice(0,o)===Tr(h.d).slice(0,o))if(h=h.times(2),a!==0&&(h=h.plus(Je(m,o+2,w).times(a+""))),h=dr(h,new m(c),o,1),e==null)if(xe(h.d,o-d,A,l))m.precision=o+=d,p=f=v=dr(u.minus(1),u.plus(1),o,1),s=W(v.times(v),o,1),n=l=1;else return W(h,m.precision=w,A,er=!0);else return m.precision=w,h;h=p,n+=2}}function Zn(r){return String(r.s*r.s/0)}function wt(r,e){var t,i,n;for((t=e.indexOf("."))>-1&&(e=e.replace(".","")),(i=e.search(/e/i))>0?(t<0&&(t=i),t+=+e.slice(i+1),e=e.substring(0,i)):t<0&&(t=e.length),i=0;e.charCodeAt(i)===48;i++);for(n=e.length;e.charCodeAt(n-1)===48;--n);if(e=e.slice(i,n),e){if(n-=i,r.e=t=t-i-1,r.d=[],i=(t+1)%rr,t<0&&(i+=rr),i<n){for(i&&r.d.push(+e.slice(0,i)),n-=rr;i<n;)r.d.push(+e.slice(i,i+=rr));e=e.slice(i),i=rr-e.length}else i-=n;for(;i--;)e+="0";r.d.push(+e),er&&(r.e>r.constructor.maxE?(r.d=null,r.e=NaN):r.e<r.constructor.minE&&(r.e=0,r.d=[0]))}else r.e=0,r.d=[0];return r}function aa(r,e){var t,i,n,a,f,l,h,p,o;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),qn.test(e))return wt(r,e)}else if(e==="Infinity"||e==="NaN")return+e||(r.s=NaN),r.e=NaN,r.d=null,r;if(ea.test(e))t=16,e=e.toLowerCase();else if(ra.test(e))t=2;else if(ta.test(e))t=8;else throw Error(ce+e);for(a=e.search(/p/i),a>0?(h=+e.slice(a+1),e=e.substring(2,a)):e=e.slice(2),a=e.indexOf("."),f=a>=0,i=r.constructor,f&&(e=e.replace(".",""),l=e.length,a=l-a,n=Ln(i,new i(t),a,a*2)),p=Le(e,t,jr),o=p.length-1,a=o;p[a]===0;--a)p.pop();return a<0?new i(r.s*0):(r.e=rt(p,o),r.d=p,er=!1,f&&(r=dr(r,n,l*4)),h&&(r=r.times(Math.abs(h)<54?_r(2,h):Ce.pow(2,h))),er=!0,r)}function oa(r,e){var t,i=e.d.length;if(i<3)return e.isZero()?e:Ee(r,2,e,e);t=1.4*Math.sqrt(i),t=t>16?16:t|0,e=e.times(1/et(5,t)),e=Ee(r,2,e,e);for(var n,a=new r(5),f=new r(16),l=new r(20);t--;)n=e.times(e),e=e.times(a.plus(n.times(f.times(n).minus(l))));return e}function Ee(r,e,t,i,n){var a,f,l,h,p=r.precision,o=Math.ceil(p/rr);for(er=!1,h=t.times(t),l=new r(i);;){if(f=dr(l.times(h),new r(e++*e++),p,1),l=n?i.plus(f):i.minus(f),i=dr(f.times(h),new r(e++*e++),p,1),f=l.plus(i),f.d[o]!==void 0){for(a=o;f.d[a]===l.d[a]&&a--;);if(a==-1)break}a=l,l=i,i=f,f=a}return er=!0,f.d.length=o+1,f}function et(r,e){for(var t=r;--e;)t*=r;return t}function Vn(r,e){var t,i=e.s<0,n=kr(r,r.precision,1),a=n.times(.5);if(e=e.abs(),e.lte(a))return ie=i?4:1,e;if(t=e.divToInt(n),t.isZero())ie=i?3:2;else{if(e=e.minus(t.times(n)),e.lte(a))return ie=Ht(t)?i?2:3:i?4:1,e;ie=Ht(t)?i?1:4:i?3:2}return e.minus(n).abs()}function _t(r,e,t,i){var n,a,f,l,h,p,o,u,s,c=r.constructor,d=t!==void 0;if(d?(Ur(t,1,le),i===void 0?i=c.rounding:Ur(i,0,8)):(t=c.precision,i=c.rounding),!r.isFinite())o=Zn(r);else{for(o=te(r),f=o.indexOf("."),d?(n=2,e==16?t=t*4-3:e==8&&(t=t*3-2)):n=e,f>=0&&(o=o.replace(".",""),s=new c(1),s.e=o.length-f,s.d=Le(te(s),10,n),s.e=s.d.length),u=Le(o,10,n),a=h=u.length;u[--h]==0;)u.pop();if(!u[0])o=d?"0p+0":"0";else{if(f<0?a--:(r=new c(r),r.d=u,r.e=a,r=dr(r,s,t,i,0,n),u=r.d,a=r.e,p=On),f=u[t],l=n/2,p=p||u[t+1]!==void 0,p=i<4?(f!==void 0||p)&&(i===0||i===(r.s<0?3:2)):f>l||f===l&&(i===4||p||i===6&&u[t-1]&1||i===(r.s<0?8:7)),u.length=t,p)for(;++u[--t]>n-1;)u[t]=0,t||(++a,u.unshift(1));for(h=u.length;!u[h-1];--h);for(f=0,o="";f<h;f++)o+=Dt.charAt(u[f]);if(d){if(h>1)if(e==16||e==8){for(f=e==16?4:3,--h;h%f;h++)o+="0";for(u=Le(o,n,e),h=u.length;!u[h-1];--h);for(f=1,o="1.";f<h;f++)o+=Dt.charAt(u[f])}else o=o.charAt(0)+"."+o.slice(1);o=o+(a<0?"p":"p+")+a}else if(a<0){for(;++a;)o="0"+o;o="0."+o}else if(++a>h)for(a-=h;a--;)o+="0";else a<h&&(o=o.slice(0,a)+"."+o.slice(a))}o=(e==16?"0x":e==2?"0b":e==8?"0o":"")+o}return r.s<0?"-"+o:o}function Jt(r,e){if(r.length>e)return r.length=e,!0}function sa(r){return new this(r).abs()}function fa(r){return new this(r).acos()}function ca(r){return new this(r).acosh()}function la(r,e){return new this(r).plus(e)}function va(r){return new this(r).asin()}function ha(r){return new this(r).asinh()}function pa(r){return new this(r).atan()}function Da(r){return new this(r).atanh()}function da(r,e){r=new this(r),e=new this(e);var t,i=this.precision,n=this.rounding,a=i+4;return!r.s||!e.s?t=new this(NaN):!r.d&&!e.d?(t=kr(this,a,1).times(e.s>0?.25:.75),t.s=r.s):!e.d||r.isZero()?(t=e.s<0?kr(this,i,n):new this(0),t.s=r.s):!r.d||e.isZero()?(t=kr(this,a,1).times(.5),t.s=r.s):e.s<0?(this.precision=a,this.rounding=1,t=this.atan(dr(r,e,a,1)),e=kr(this,a,1),this.precision=i,this.rounding=n,t=r.s<0?t.minus(e):t.plus(e)):t=this.atan(dr(r,e,a,1)),t}function ma(r){return new this(r).cbrt()}function ga(r){return W(r=new this(r),r.e+1,2)}function wa(r,e,t){return new this(r).clamp(e,t)}function ya(r){if(!r||typeof r!="object")throw Error(je+"Object expected");var e,t,i,n=r.defaults===!0,a=["precision",1,le,"rounding",0,8,"toExpNeg",-ye,0,"toExpPos",0,ye,"maxE",0,ye,"minE",-ye,0,"modulo",0,9];for(e=0;e<a.length;e+=3)if(t=a[e],n&&(this[t]=dt[t]),(i=r[t])!==void 0)if(Ir(i)===i&&i>=a[e+1]&&i<=a[e+2])this[t]=i;else throw Error(ce+t+": "+i);if(t="crypto",n&&(this[t]=dt[t]),(i=r[t])!==void 0)if(i===!0||i===!1||i===0||i===1)if(i)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[t]=!0;else throw Error(Pn);else this[t]=!1;else throw Error(ce+t+": "+i);return this}function Aa(r){return new this(r).cos()}function Fa(r){return new this(r).cosh()}function Hn(r){var e,t,i;function n(a){var f,l,h,p=this;if(!(p instanceof n))return new n(a);if(p.constructor=n,Gt(a)){p.s=a.s,er?!a.d||a.e>n.maxE?(p.e=NaN,p.d=null):a.e<n.minE?(p.e=0,p.d=[0]):(p.e=a.e,p.d=a.d.slice()):(p.e=a.e,p.d=a.d?a.d.slice():a.d);return}if(h=typeof a,h==="number"){if(a===0){p.s=1/a<0?-1:1,p.e=0,p.d=[0];return}if(a<0?(a=-a,p.s=-1):p.s=1,a===~~a&&a<1e7){for(f=0,l=a;l>=10;l/=10)f++;er?f>n.maxE?(p.e=NaN,p.d=null):f<n.minE?(p.e=0,p.d=[0]):(p.e=f,p.d=[a]):(p.e=f,p.d=[a]);return}else if(a*0!==0){a||(p.s=NaN),p.e=NaN,p.d=null;return}return wt(p,a.toString())}else if(h!=="string")throw Error(ce+a);return(l=a.charCodeAt(0))===45?(a=a.slice(1),p.s=-1):(l===43&&(a=a.slice(1)),p.s=1),qn.test(a)?wt(p,a):aa(p,a)}if(n.prototype=q,n.ROUND_UP=0,n.ROUND_DOWN=1,n.ROUND_CEIL=2,n.ROUND_FLOOR=3,n.ROUND_HALF_UP=4,n.ROUND_HALF_DOWN=5,n.ROUND_HALF_EVEN=6,n.ROUND_HALF_CEIL=7,n.ROUND_HALF_FLOOR=8,n.EUCLID=9,n.config=n.set=ya,n.clone=Hn,n.isDecimal=Gt,n.abs=sa,n.acos=fa,n.acosh=ca,n.add=la,n.asin=va,n.asinh=ha,n.atan=pa,n.atanh=Da,n.atan2=da,n.cbrt=ma,n.ceil=ga,n.clamp=wa,n.cos=Aa,n.cosh=Fa,n.div=Ea,n.exp=Ca,n.floor=_a,n.hypot=Ba,n.ln=Sa,n.log=Ma,n.log10=ba,n.log2=xa,n.max=Na,n.min=Ta,n.mod=za,n.mul=Oa,n.pow=Ia,n.random=Pa,n.round=$a,n.sign=qa,n.sin=Ra,n.sinh=La,n.sqrt=Ua,n.sub=Za,n.sum=Va,n.tan=Ha,n.tanh=Ja,n.trunc=Ga,r===void 0&&(r={}),r&&r.defaults!==!0)for(i=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],e=0;e<i.length;)r.hasOwnProperty(t=i[e++])||(r[t]=this[t]);return n.config(r),n}function Ea(r,e){return new this(r).div(e)}function Ca(r){return new this(r).exp()}function _a(r){return W(r=new this(r),r.e+1,3)}function Ba(){var r,e,t=new this(0);for(er=!1,r=0;r<arguments.length;)if(e=new this(arguments[r++]),e.d)t.d&&(t=t.plus(e.times(e)));else{if(e.s)return er=!0,new this(1/0);t=e}return er=!0,t.sqrt()}function Gt(r){return r instanceof Ce||r&&r.toStringTag===$n||!1}function Sa(r){return new this(r).ln()}function Ma(r,e){return new this(r).log(e)}function xa(r){return new this(r).log(2)}function ba(r){return new this(r).log(10)}function Na(){return Un(this,arguments,"lt")}function Ta(){return Un(this,arguments,"gt")}function za(r,e){return new this(r).mod(e)}function Oa(r,e){return new this(r).mul(e)}function Ia(r,e){return new this(r).pow(e)}function Pa(r){var e,t,i,n,a=0,f=new this(1),l=[];if(r===void 0?r=this.precision:Ur(r,1,le),i=Math.ceil(r/rr),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(i));a<i;)n=e[a],n>=429e7?e[a]=crypto.getRandomValues(new Uint32Array(1))[0]:l[a++]=n%1e7;else if(crypto.randomBytes){for(e=crypto.randomBytes(i*=4);a<i;)n=e[a]+(e[a+1]<<8)+(e[a+2]<<16)+((e[a+3]&127)<<24),n>=214e7?crypto.randomBytes(4).copy(e,a):(l.push(n%1e7),a+=4);a=i/4}else throw Error(Pn);else for(;a<i;)l[a++]=Math.random()*1e7|0;for(i=l[--a],r%=rr,i&&r&&(n=_r(10,rr-r),l[a]=(i/n|0)*n);l[a]===0;a--)l.pop();if(a<0)t=0,l=[0];else{for(t=-1;l[0]===0;t-=rr)l.shift();for(i=1,n=l[0];n>=10;n/=10)i++;i<rr&&(t-=rr-i)}return f.e=t,f.d=l,f}function $a(r){return W(r=new this(r),r.e+1,this.rounding)}function qa(r){return r=new this(r),r.d?r.d[0]?r.s:0*r.s:r.s||NaN}function Ra(r){return new this(r).sin()}function La(r){return new this(r).sinh()}function Ua(r){return new this(r).sqrt()}function Za(r,e){return new this(r).sub(e)}function Va(){var r=0,e=arguments,t=new this(e[r]);for(er=!1;t.s&&++r<e.length;)t=t.plus(e[r]);return er=!0,W(t,this.precision,this.rounding)}function Ha(r){return new this(r).tan()}function Ja(r){return new this(r).tanh()}function Ga(r){return W(r=new this(r),r.e+1,1)}q[Symbol.for("nodejs.util.inspect.custom")]=q.toString;q[Symbol.toStringTag]="Decimal";var Ce=q.constructor=Hn(dt);Ve=new Ce(Ve);He=new Ce(He);var Ya="BigNumber",Ka=["?on","config"],Xa=X(Ya,Ka,r=>{var{on:e,config:t}=r,i=Ce.clone({precision:t.precision,modulo:Ce.EUCLID});return i.prototype=Object.create(i.prototype),i.prototype.type="BigNumber",i.prototype.isBigNumber=!0,i.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},i.fromJSON=function(n){return new i(n.value)},e&&e("config",function(n,a){n.precision!==a.precision&&i.config({precision:n.precision})}),i},{isClass:!0}),Jn={exports:{}};/**
 * @license Complex.js v2.1.1 12/05/2020
 *
 * Copyright (c) 2020, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/(function(r,e){(function(t){var i=Math.cosh||function(u){return Math.abs(u)<1e-9?1-u:(Math.exp(u)+Math.exp(-u))*.5},n=Math.sinh||function(u){return Math.abs(u)<1e-9?u:(Math.exp(u)-Math.exp(-u))*.5},a=function(u){var s=Math.PI/4;if(-s>u||u>s)return Math.cos(u)-1;var c=u*u;return c*(c*(c*(c*(c*(c*(c*(c/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-1/2)},f=function(u,s){var c=Math.abs(u),d=Math.abs(s);return c<3e3&&d<3e3?Math.sqrt(c*c+d*d):(c<d?(c=d,d=u/s):d=s/u,c*Math.sqrt(1+d*d))},l=function(){throw SyntaxError("Invalid Param")};function h(u,s){var c=Math.abs(u),d=Math.abs(s);return u===0?Math.log(d):s===0?Math.log(c):c<3e3&&d<3e3?Math.log(u*u+s*s)*.5:(u=u/2,s=s/2,.5*Math.log(u*u+s*s)+Math.LN2)}var p=function(u,s){var c={re:0,im:0};if(u==null)c.re=c.im=0;else if(s!==void 0)c.re=u,c.im=s;else switch(typeof u){case"object":if("im"in u&&"re"in u)c.re=u.re,c.im=u.im;else if("abs"in u&&"arg"in u){if(!Number.isFinite(u.abs)&&Number.isFinite(u.arg))return o.INFINITY;c.re=u.abs*Math.cos(u.arg),c.im=u.abs*Math.sin(u.arg)}else if("r"in u&&"phi"in u){if(!Number.isFinite(u.r)&&Number.isFinite(u.phi))return o.INFINITY;c.re=u.r*Math.cos(u.phi),c.im=u.r*Math.sin(u.phi)}else u.length===2?(c.re=u[0],c.im=u[1]):l();break;case"string":c.im=c.re=0;var d=u.match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g),v=1,g=0;d===null&&l();for(var m=0;m<d.length;m++){var A=d[m];A===" "||A==="	"||A===`
`||(A==="+"?v++:A==="-"?g++:A==="i"||A==="I"?(v+g===0&&l(),d[m+1]!==" "&&!isNaN(d[m+1])?(c.im+=parseFloat((g%2?"-":"")+d[m+1]),m++):c.im+=parseFloat((g%2?"-":"")+"1"),v=g=0):((v+g===0||isNaN(A))&&l(),d[m+1]==="i"||d[m+1]==="I"?(c.im+=parseFloat((g%2?"-":"")+A),m++):c.re+=parseFloat((g%2?"-":"")+A),v=g=0))}v+g>0&&l();break;case"number":c.im=0,c.re=u;break;default:l()}return isNaN(c.re)||isNaN(c.im),c};function o(u,s){if(!(this instanceof o))return new o(u,s);var c=p(u,s);this.re=c.re,this.im=c.im}o.prototype={re:0,im:0,sign:function(){var u=this.abs();return new o(this.re/u,this.im/u)},add:function(u,s){var c=new o(u,s);return this.isInfinite()&&c.isInfinite()?o.NAN:this.isInfinite()||c.isInfinite()?o.INFINITY:new o(this.re+c.re,this.im+c.im)},sub:function(u,s){var c=new o(u,s);return this.isInfinite()&&c.isInfinite()?o.NAN:this.isInfinite()||c.isInfinite()?o.INFINITY:new o(this.re-c.re,this.im-c.im)},mul:function(u,s){var c=new o(u,s);return this.isInfinite()&&c.isZero()||this.isZero()&&c.isInfinite()?o.NAN:this.isInfinite()||c.isInfinite()?o.INFINITY:c.im===0&&this.im===0?new o(this.re*c.re,0):new o(this.re*c.re-this.im*c.im,this.re*c.im+this.im*c.re)},div:function(u,s){var c=new o(u,s);if(this.isZero()&&c.isZero()||this.isInfinite()&&c.isInfinite())return o.NAN;if(this.isInfinite()||c.isZero())return o.INFINITY;if(this.isZero()||c.isInfinite())return o.ZERO;u=this.re,s=this.im;var d=c.re,v=c.im,g,m;return v===0?new o(u/d,s/d):Math.abs(d)<Math.abs(v)?(m=d/v,g=d*m+v,new o((u*m+s)/g,(s*m-u)/g)):(m=v/d,g=v*m+d,new o((u+s*m)/g,(s-u*m)/g))},pow:function(u,s){var c=new o(u,s);if(u=this.re,s=this.im,c.isZero())return o.ONE;if(c.im===0){if(s===0&&u>0)return new o(Math.pow(u,c.re),0);if(u===0)switch((c.re%4+4)%4){case 0:return new o(Math.pow(s,c.re),0);case 1:return new o(0,Math.pow(s,c.re));case 2:return new o(-Math.pow(s,c.re),0);case 3:return new o(0,-Math.pow(s,c.re))}}if(u===0&&s===0&&c.re>0&&c.im>=0)return o.ZERO;var d=Math.atan2(s,u),v=h(u,s);return u=Math.exp(c.re*v-c.im*d),s=c.im*v+c.re*d,new o(u*Math.cos(s),u*Math.sin(s))},sqrt:function(){var u=this.re,s=this.im,c=this.abs(),d,v;if(u>=0){if(s===0)return new o(Math.sqrt(u),0);d=.5*Math.sqrt(2*(c+u))}else d=Math.abs(s)/Math.sqrt(2*(c-u));return u<=0?v=.5*Math.sqrt(2*(c-u)):v=Math.abs(s)/Math.sqrt(2*(c+u)),new o(d,s<0?-v:v)},exp:function(){var u=Math.exp(this.re);return this.im,new o(u*Math.cos(this.im),u*Math.sin(this.im))},expm1:function(){var u=this.re,s=this.im;return new o(Math.expm1(u)*Math.cos(s)+a(s),Math.exp(u)*Math.sin(s))},log:function(){var u=this.re,s=this.im;return new o(h(u,s),Math.atan2(s,u))},abs:function(){return f(this.re,this.im)},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){var u=this.re,s=this.im;return new o(Math.sin(u)*i(s),Math.cos(u)*n(s))},cos:function(){var u=this.re,s=this.im;return new o(Math.cos(u)*i(s),-Math.sin(u)*n(s))},tan:function(){var u=2*this.re,s=2*this.im,c=Math.cos(u)+i(s);return new o(Math.sin(u)/c,n(s)/c)},cot:function(){var u=2*this.re,s=2*this.im,c=Math.cos(u)-i(s);return new o(-Math.sin(u)/c,n(s)/c)},sec:function(){var u=this.re,s=this.im,c=.5*i(2*s)+.5*Math.cos(2*u);return new o(Math.cos(u)*i(s)/c,Math.sin(u)*n(s)/c)},csc:function(){var u=this.re,s=this.im,c=.5*i(2*s)-.5*Math.cos(2*u);return new o(Math.sin(u)*i(s)/c,-Math.cos(u)*n(s)/c)},asin:function(){var u=this.re,s=this.im,c=new o(s*s-u*u+1,-2*u*s).sqrt(),d=new o(c.re-s,c.im+u).log();return new o(d.im,-d.re)},acos:function(){var u=this.re,s=this.im,c=new o(s*s-u*u+1,-2*u*s).sqrt(),d=new o(c.re-s,c.im+u).log();return new o(Math.PI/2-d.im,d.re)},atan:function(){var u=this.re,s=this.im;if(u===0){if(s===1)return new o(0,1/0);if(s===-1)return new o(0,-1/0)}var c=u*u+(1-s)*(1-s),d=new o((1-s*s-u*u)/c,-2*u/c).log();return new o(-.5*d.im,.5*d.re)},acot:function(){var u=this.re,s=this.im;if(s===0)return new o(Math.atan2(1,u),0);var c=u*u+s*s;return c!==0?new o(u/c,-s/c).atan():new o(u!==0?u/0:0,s!==0?-s/0:0).atan()},asec:function(){var u=this.re,s=this.im;if(u===0&&s===0)return new o(0,1/0);var c=u*u+s*s;return c!==0?new o(u/c,-s/c).acos():new o(u!==0?u/0:0,s!==0?-s/0:0).acos()},acsc:function(){var u=this.re,s=this.im;if(u===0&&s===0)return new o(Math.PI/2,1/0);var c=u*u+s*s;return c!==0?new o(u/c,-s/c).asin():new o(u!==0?u/0:0,s!==0?-s/0:0).asin()},sinh:function(){var u=this.re,s=this.im;return new o(n(u)*Math.cos(s),i(u)*Math.sin(s))},cosh:function(){var u=this.re,s=this.im;return new o(i(u)*Math.cos(s),n(u)*Math.sin(s))},tanh:function(){var u=2*this.re,s=2*this.im,c=i(u)+Math.cos(s);return new o(n(u)/c,Math.sin(s)/c)},coth:function(){var u=2*this.re,s=2*this.im,c=i(u)-Math.cos(s);return new o(n(u)/c,-Math.sin(s)/c)},csch:function(){var u=this.re,s=this.im,c=Math.cos(2*s)-i(2*u);return new o(-2*n(u)*Math.cos(s)/c,2*i(u)*Math.sin(s)/c)},sech:function(){var u=this.re,s=this.im,c=Math.cos(2*s)+i(2*u);return new o(2*i(u)*Math.cos(s)/c,-2*n(u)*Math.sin(s)/c)},asinh:function(){var u=this.im;this.im=-this.re,this.re=u;var s=this.asin();return this.re=-this.im,this.im=u,u=s.re,s.re=-s.im,s.im=u,s},acosh:function(){var u=this.acos();if(u.im<=0){var s=u.re;u.re=-u.im,u.im=s}else{var s=u.im;u.im=-u.re,u.re=s}return u},atanh:function(){var u=this.re,s=this.im,c=u>1&&s===0,d=1-u,v=1+u,g=d*d+s*s,m=g!==0?new o((v*d-s*s)/g,(s*d+v*s)/g):new o(u!==-1?u/0:0,s!==0?s/0:0),A=m.re;return m.re=h(m.re,m.im)/2,m.im=Math.atan2(m.im,A)/2,c&&(m.im=-m.im),m},acoth:function(){var u=this.re,s=this.im;if(u===0&&s===0)return new o(0,Math.PI/2);var c=u*u+s*s;return c!==0?new o(u/c,-s/c).atanh():new o(u!==0?u/0:0,s!==0?-s/0:0).atanh()},acsch:function(){var u=this.re,s=this.im;if(s===0)return new o(u!==0?Math.log(u+Math.sqrt(u*u+1)):1/0,0);var c=u*u+s*s;return c!==0?new o(u/c,-s/c).asinh():new o(u!==0?u/0:0,s!==0?-s/0:0).asinh()},asech:function(){var u=this.re,s=this.im;if(this.isZero())return o.INFINITY;var c=u*u+s*s;return c!==0?new o(u/c,-s/c).acosh():new o(u!==0?u/0:0,s!==0?-s/0:0).acosh()},inverse:function(){if(this.isZero())return o.INFINITY;if(this.isInfinite())return o.ZERO;var u=this.re,s=this.im,c=u*u+s*s;return new o(u/c,-s/c)},conjugate:function(){return new o(this.re,-this.im)},neg:function(){return new o(-this.re,-this.im)},ceil:function(u){return u=Math.pow(10,u||0),new o(Math.ceil(this.re*u)/u,Math.ceil(this.im*u)/u)},floor:function(u){return u=Math.pow(10,u||0),new o(Math.floor(this.re*u)/u,Math.floor(this.im*u)/u)},round:function(u){return u=Math.pow(10,u||0),new o(Math.round(this.re*u)/u,Math.round(this.im*u)/u)},equals:function(u,s){var c=new o(u,s);return Math.abs(c.re-this.re)<=o.EPSILON&&Math.abs(c.im-this.im)<=o.EPSILON},clone:function(){return new o(this.re,this.im)},toString:function(){var u=this.re,s=this.im,c="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(u)<o.EPSILON&&(u=0),Math.abs(s)<o.EPSILON&&(s=0),s===0?c+u:(u!==0?(c+=u,c+=" ",s<0?(s=-s,c+="-"):c+="+",c+=" "):s<0&&(s=-s,c+="-"),s!==1&&(c+=s),c+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return this.im===0?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return this.im===0&&this.re===0},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!(this.isNaN()||this.isFinite())}},o.ZERO=new o(0,0),o.ONE=new o(1,0),o.I=new o(0,1),o.PI=new o(Math.PI,0),o.E=new o(Math.E,0),o.INFINITY=new o(1/0,1/0),o.NAN=new o(NaN,NaN),o.EPSILON=1e-15,Object.defineProperty(o,"__esModule",{value:!0}),o.default=o,o.Complex=o,r.exports=o})()})(Jn);var Qa=Jn.exports;const br=ki(Qa);var Wa="Complex",ka=[],ja=X(Wa,ka,()=>(Object.defineProperty(br,"name",{value:"Complex"}),br.prototype.constructor=br,br.prototype.type="Complex",br.prototype.isComplex=!0,br.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},br.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},br.prototype.format=function(r){var e="",t=this.im,i=this.re,n=pt(this.re,r),a=pt(this.im,r),f=gr(r)?r:r?r.precision:null;if(f!==null){var l=Math.pow(10,-f);Math.abs(i/t)<l&&(i=0),Math.abs(t/i)<l&&(t=0)}return t===0?e=n:i===0?t===1?e="i":t===-1?e="-i":e=a+"i":t<0?t===-1?e=n+" - i":e=n+" - "+a.substring(1)+"i":t===1?e=n+" + i":e=n+" + "+a+"i",e},br.fromPolar=function(r){switch(arguments.length){case 1:{var e=arguments[0];if(typeof e=="object")return br(e);throw new TypeError("Input has to be an object with r and phi keys.")}case 2:{var t=arguments[0],i=arguments[1];if(gr(t)){if(_n(i)&&i.hasBase("ANGLE")&&(i=i.toNumber("rad")),gr(i))return new br({r:t,phi:i});throw new TypeError("Phi is not a number nor an angle unit.")}else throw new TypeError("Radius r is not a number.")}default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},br.prototype.valueOf=br.prototype.toString,br.fromJSON=function(r){return new br(r)},br.compare=function(r,e){return r.re>e.re?1:r.re<e.re?-1:r.im>e.im?1:r.im<e.im?-1:0},br),{isClass:!0}),ro="Fraction",eo=[],to=X(ro,eo,()=>(Object.defineProperty(ne,"name",{value:"Fraction"}),ne.prototype.constructor=ne,ne.prototype.type="Fraction",ne.prototype.isFraction=!0,ne.prototype.toJSON=function(){return{mathjs:"Fraction",n:this.s*this.n,d:this.d}},ne.fromJSON=function(r){return new ne(r)},ne),{isClass:!0}),no="Matrix",io=[],uo=X(no,io,()=>{function r(){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator")}return r.prototype.type="Matrix",r.prototype.isMatrix=!0,r.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},r.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},r.prototype.create=function(e,t){throw new Error("Cannot invoke create on a Matrix interface")},r.prototype.subset=function(e,t,i){throw new Error("Cannot invoke subset on a Matrix interface")},r.prototype.get=function(e){throw new Error("Cannot invoke get on a Matrix interface")},r.prototype.set=function(e,t,i){throw new Error("Cannot invoke set on a Matrix interface")},r.prototype.resize=function(e,t){throw new Error("Cannot invoke resize on a Matrix interface")},r.prototype.reshape=function(e,t){throw new Error("Cannot invoke reshape on a Matrix interface")},r.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},r.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},r.prototype.map=function(e,t){throw new Error("Cannot invoke map on a Matrix interface")},r.prototype.forEach=function(e){throw new Error("Cannot invoke forEach on a Matrix interface")},r.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},r.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},r.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},r.prototype.format=function(e){throw new Error("Cannot invoke format on a Matrix interface")},r.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},r},{isClass:!0});function ht(r,e,t){var i=r.constructor,n=new i(2),a="";if(t){if(t<1)throw new Error("size must be in greater than 0");if(!Br(t))throw new Error("size must be an integer");if(r.greaterThan(n.pow(t-1).sub(1))||r.lessThan(n.pow(t-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(t-1,", 2^").concat(t-1,"-1]"));if(!r.isInteger())throw new Error("Value must be an integer");r.lessThan(0)&&(r=r.add(n.pow(t))),a="i".concat(t)}switch(e){case 2:return"".concat(r.toBinary()).concat(a);case 8:return"".concat(r.toOctal()).concat(a);case 16:return"".concat(r.toHexadecimal()).concat(a);default:throw new Error("Base ".concat(e," not supported "))}}function ao(r,e){if(typeof e=="function")return e(r);if(!r.isFinite())return r.isNaN()?"NaN":r.gt(0)?"Infinity":"-Infinity";var{notation:t,precision:i,wordSize:n}=xn(e);switch(t){case"fixed":return so(r,i);case"exponential":return Yt(r,i);case"engineering":return oo(r,i);case"bin":return ht(r,2,n);case"oct":return ht(r,8,n);case"hex":return ht(r,16,n);case"auto":{var a=Kt(e==null?void 0:e.lowerExp,-3),f=Kt(e==null?void 0:e.upperExp,5);if(r.isZero())return"0";var l,h=r.toSignificantDigits(i),p=h.e;return p>=a&&p<f?l=h.toFixed():l=Yt(r,i),l.replace(/((\.\d*?)(0+))($|e)/,function(){var o=arguments[2],u=arguments[4];return o!=="."?o+u:u})}default:throw new Error('Unknown notation "'+t+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function oo(r,e){var t=r.e,i=t%3===0?t:t<0?t-3-t%3:t-t%3,n=r.mul(Math.pow(10,-i)),a=n.toPrecision(e);if(a.includes("e")){var f=r.constructor;a=new f(a).toFixed()}return a+"e"+(t>=0?"+":"")+i.toString()}function Yt(r,e){return e!==void 0?r.toExponential(e-1):r.toExponential()}function so(r,e){return r.toFixed(e)}function Kt(r,e){return gr(r)?r:Nr(r)?r.toNumber():e}function Mr(r,e){var t=fo(r,e);return e&&typeof e=="object"&&"truncate"in e&&t.length>e.truncate?t.substring(0,e.truncate-3)+"...":t}function fo(r,e){if(typeof r=="number")return pt(r,e);if(Nr(r))return ao(r,e);if(co(r))return!e||e.fraction!=="decimal"?r.s*r.n+"/"+r.d:r.toString();if(Array.isArray(r))return Gn(r,e);if(ee(r))return Xt(r);if(typeof r=="function")return r.syntax?String(r.syntax):"function";if(r&&typeof r=="object"){if(typeof r.format=="function")return r.format(e);if(r&&r.toString(e)!=={}.toString())return r.toString(e);var t=Object.keys(r).map(i=>Xt(i)+": "+Mr(r[i],e));return"{"+t.join(", ")+"}"}return String(r)}function Xt(r){for(var e=String(r),t="",i=0;i<e.length;){var n=e.charAt(i);t+=n in Qt?Qt[n]:n,i++}return'"'+t+'"'}var Qt={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"};function Gn(r,e){if(Array.isArray(r)){for(var t="[",i=r.length,n=0;n<i;n++)n!==0&&(t+=", "),t+=Gn(r[n],e);return t+="]",t}else return Mr(r,e)}function co(r){return r&&typeof r=="object"&&typeof r.s=="number"&&typeof r.n=="number"&&typeof r.d=="number"||!1}function cr(r,e,t){if(!(this instanceof cr))throw new SyntaxError("Constructor must be called with the new operator");this.actual=r,this.expected=e,this.relation=t,this.message="Dimension mismatch ("+(Array.isArray(r)?"["+r.join(", ")+"]":r)+" "+(this.relation||"!=")+" "+(Array.isArray(e)?"["+e.join(", ")+"]":e)+")",this.stack=new Error().stack}cr.prototype=new RangeError;cr.prototype.constructor=RangeError;cr.prototype.name="DimensionError";cr.prototype.isDimensionError=!0;function me(r,e,t){if(!(this instanceof me))throw new SyntaxError("Constructor must be called with the new operator");this.index=r,arguments.length<3?(this.min=0,this.max=e):(this.min=e,this.max=t),this.min!==void 0&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":this.max!==void 0&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=new Error().stack}me.prototype=new RangeError;me.prototype.constructor=RangeError;me.prototype.name="IndexError";me.prototype.isIndexError=!0;function Zr(r){for(var e=[];Array.isArray(r);)e.push(r.length),r=r[0];return e}function Yn(r,e,t){var i,n=r.length;if(n!==e[t])throw new cr(n,e[t]);if(t<e.length-1){var a=t+1;for(i=0;i<n;i++){var f=r[i];if(!Array.isArray(f))throw new cr(e.length-1,e.length,"<");Yn(r[i],e,a)}}else for(i=0;i<n;i++)if(Array.isArray(r[i]))throw new cr(e.length+1,e.length,">")}function Wt(r,e){var t=e.length===0;if(t){if(Array.isArray(r))throw new cr(r.length,0)}else Yn(r,e,0)}function yr(r,e){if(r!==void 0){if(!gr(r)||!Br(r))throw new TypeError("Index must be an integer (value: "+r+")");if(r<0||typeof e=="number"&&r>=e)throw new me(r,e)}}function kt(r,e,t){if(!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new Error("Resizing to scalar is not supported");e.forEach(function(n){if(!gr(n)||!Br(n)||n<0)throw new TypeError("Invalid size, must contain positive integers (size: "+Mr(e)+")")}),(gr(r)||Nr(r))&&(r=[r]);var i=t!==void 0?t:0;return yt(r,e,0,i),r}function yt(r,e,t,i){var n,a,f=r.length,l=e[t],h=Math.min(f,l);if(r.length=l,t<e.length-1){var p=t+1;for(n=0;n<h;n++)a=r[n],Array.isArray(a)||(a=[a],r[n]=a),yt(a,e,p,i);for(n=h;n<l;n++)a=[],r[n]=a,yt(a,e,p,i)}else{for(n=0;n<h;n++)for(;Array.isArray(r[n]);)r[n]=r[n][0];for(n=h;n<l;n++)r[n]=i}}function Kn(r,e){var t=vo(r),i=t.length;if(!Array.isArray(r)||!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new cr(0,i,"!=");e=Bt(e,i);var n=Xn(e);if(i!==n)throw new cr(n,i,"!=");try{return lo(t,e)}catch(a){throw a instanceof cr?new cr(n,i,"!="):a}}function Bt(r,e){var t=Xn(r),i=r.slice(),n=-1,a=r.indexOf(n),f=r.indexOf(n,a+1)>=0;if(f)throw new Error("More than one wildcard in sizes");var l=a>=0,h=e%t===0;if(l)if(h)i[a]=-e/t;else throw new Error("Could not replace wildcard, since "+e+" is no multiple of "+-t);return i}function Xn(r){return r.reduce((e,t)=>e*t,1)}function lo(r,e){for(var t=r,i,n=e.length-1;n>0;n--){var a=e[n];i=[];for(var f=t.length/a,l=0;l<f;l++)i.push(t.slice(l*a,(l+1)*a));t=i}return t}function Qn(r,e,t,i){var n=i||Zr(r);if(t)for(var a=0;a<t;a++)r=[r],n.unshift(1);for(r=Wn(r,e,0);n.length<e;)n.push(1);return r}function Wn(r,e,t){var i,n;if(Array.isArray(r)){var a=t+1;for(i=0,n=r.length;i<n;i++)r[i]=Wn(r[i],e,a)}else for(var f=t;f<e;f++)r=[r];return r}function vo(r){if(!Array.isArray(r))return r;var e=[];return r.forEach(function t(i){Array.isArray(i)?i.forEach(t):e.push(i)}),e}function Ge(r,e){for(var t,i=0,n=0;n<r.length;n++){var a=r[n],f=Array.isArray(a);if(n===0&&f&&(i=a.length),f&&a.length!==i)return;var l=f?Ge(a,e):e(a);if(t===void 0)t=l;else if(t!==l)return"mixed"}return t}function kn(r,e,t,i){if(i<t){if(r.length!==e.length)throw new cr(r.length,e.length);for(var n=[],a=0;a<r.length;a++)n[a]=kn(r[a],e[a],t,i+1);return n}else return r.concat(e)}function jn(){var r=Array.prototype.slice.call(arguments,0,-1),e=Array.prototype.slice.call(arguments,-1);if(r.length===1)return r[0];if(r.length>1)return r.slice(1).reduce(function(t,i){return kn(t,i,e,0)},r[0]);throw new Error("Wrong number of arguments in function concat")}function ri(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];for(var i=e.map(s=>s.length),n=Math.max(...i),a=new Array(n).fill(null),f=0;f<e.length;f++)for(var l=e[f],h=i[f],p=0;p<h;p++){var o=n-h+p;l[p]>a[o]&&(a[o]=l[p])}for(var u=0;u<e.length;u++)ei(e[u],a);return a}function ei(r,e){for(var t=e.length,i=r.length,n=0;n<i;n++){var a=t-i+n;if(r[n]<e[a]&&r[n]>1||r[n]>e[a])throw new Error("shape missmatch: missmatch is found in arg with shape (".concat(r,") not possible to broadcast dimension ").concat(i," with size ").concat(r[n]," to size ").concat(e[a]))}}function At(r,e){var t=Zr(r);if(fe(t,e))return r;ei(t,e);var i=ri(t,e),n=i.length,a=[...Array(n-t.length).fill(1),...t],f=po(r);t.length<n&&(f=Kn(f,a),t=Zr(f));for(var l=0;l<n;l++)t[l]<i[l]&&(f=ho(f,i[l],l),t=Zr(f));return f}function ho(r,e,t){return jn(...Array(e).fill(r),t)}function po(r){return Ue([],r)}function ti(r){return Object.keys(r.signatures||{}).reduce(function(e,t){var i=(t.match(/,/g)||[]).length+1;return Math.max(e,i)},-1)}var Do="DenseMatrix",mo=["Matrix"],go=X(Do,mo,r=>{var{Matrix:e}=r;function t(o,u){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");if(u&&!ee(u))throw new Error("Invalid datatype: "+u);if(xr(o))o.type==="DenseMatrix"?(this._data=Fr(o._data),this._size=Fr(o._size),this._datatype=u||o._datatype):(this._data=o.toArray(),this._size=o.size(),this._datatype=u||o._datatype);else if(o&&wr(o.data)&&wr(o.size))this._data=o.data,this._size=o.size,Wt(this._data,this._size),this._datatype=u||o.datatype;else if(wr(o))this._data=p(o),this._size=Zr(this._data),Wt(this._data,this._size),this._datatype=u;else{if(o)throw new TypeError("Unsupported type of data ("+Ae(o)+")");this._data=[],this._size=[0],this._datatype=u}}t.prototype=new e,t.prototype.createDenseMatrix=function(o,u){return new t(o,u)},Object.defineProperty(t,"name",{value:"DenseMatrix"}),t.prototype.constructor=t,t.prototype.type="DenseMatrix",t.prototype.isDenseMatrix=!0,t.prototype.getDataType=function(){return Ge(this._data,Ae)},t.prototype.storage=function(){return"dense"},t.prototype.datatype=function(){return this._datatype},t.prototype.create=function(o,u){return new t(o,u)},t.prototype.subset=function(o,u,s){switch(arguments.length){case 1:return i(this,o);case 2:case 3:return a(this,o,u,s);default:throw new SyntaxError("Wrong number of arguments")}},t.prototype.get=function(o){if(!wr(o))throw new TypeError("Array expected");if(o.length!==this._size.length)throw new cr(o.length,this._size.length);for(var u=0;u<o.length;u++)yr(o[u],this._size[u]);for(var s=this._data,c=0,d=o.length;c<d;c++){var v=o[c];yr(v,s.length),s=s[v]}return s},t.prototype.set=function(o,u,s){if(!wr(o))throw new TypeError("Array expected");if(o.length<this._size.length)throw new cr(o.length,this._size.length,"<");var c,d,v,g=o.map(function(A){return A+1});h(this,g,s);var m=this._data;for(c=0,d=o.length-1;c<d;c++)v=o[c],yr(v,m.length),m=m[v];return v=o[o.length-1],yr(v,m.length),m[v]=u,this};function i(o,u){if(!Et(u))throw new TypeError("Invalid index");var s=u.isScalar();if(s)return o.get(u.min());var c=u.size();if(c.length!==o._size.length)throw new cr(c.length,o._size.length);for(var d=u.min(),v=u.max(),g=0,m=o._size.length;g<m;g++)yr(d[g],o._size[g]),yr(v[g],o._size[g]);return new t(n(o._data,u,c.length,0),o._datatype)}function n(o,u,s,c){var d=c===s-1,v=u.dimension(c);return d?v.map(function(g){return yr(g,o.length),o[g]}).valueOf():v.map(function(g){yr(g,o.length);var m=o[g];return n(m,u,s,c+1)}).valueOf()}function a(o,u,s,c){if(!u||u.isIndex!==!0)throw new TypeError("Invalid index");var d=u.size(),v=u.isScalar(),g;if(xr(s)?(g=s.size(),s=s.valueOf()):g=Zr(s),v){if(g.length!==0)throw new TypeError("Scalar expected");o.set(u.min(),s,c)}else{if(!fe(g,d))try{g.length===0?s=At([s],d):s=At(s,d),g=Zr(s)}catch{}if(d.length<o._size.length)throw new cr(d.length,o._size.length,"<");if(g.length<d.length){for(var m=0,A=0;d[m]===1&&g[m]===1;)m++;for(;d[m]===1;)A++,m++;s=Qn(s,d.length,A,g)}if(!fe(d,g))throw new cr(d,g,">");var w=u.max().map(function(D){return D+1});h(o,w,c);var F=d.length,y=0;f(o._data,u,s,F,y)}return o}function f(o,u,s,c,d){var v=d===c-1,g=u.dimension(d);v?g.forEach(function(m,A){yr(m),o[m]=s[A[0]]}):g.forEach(function(m,A){yr(m),f(o[m],u,s[A[0]],c,d+1)})}t.prototype.resize=function(o,u,s){if(!Ze(o))throw new TypeError("Array or Matrix expected");var c=o.valueOf().map(v=>Array.isArray(v)&&v.length===1?v[0]:v),d=s?this.clone():this;return l(d,c,u)};function l(o,u,s){if(u.length===0){for(var c=o._data;wr(c);)c=c[0];return c}return o._size=u.slice(0),o._data=kt(o._data,o._size,s),o}t.prototype.reshape=function(o,u){var s=u?this.clone():this;s._data=Kn(s._data,o);var c=s._size.reduce((d,v)=>d*v);return s._size=Bt(o,c),s};function h(o,u,s){for(var c=o._size.slice(0),d=!1;c.length<u.length;)c.push(0),d=!0;for(var v=0,g=u.length;v<g;v++)u[v]>c[v]&&(c[v]=u[v],d=!0);d&&l(o,c,s)}t.prototype.clone=function(){var o=new t({data:Fr(this._data),size:Fr(this._size),datatype:this._datatype});return o},t.prototype.size=function(){return this._size.slice(0)},t.prototype.map=function(o){var u=this,s=ti(o),c=function g(m,A){return wr(m)?m.map(function(w,F){return g(w,A.concat(F))}):s===1?o(m):s===2?o(m,A):o(m,A,u)},d=c(this._data,[]),v=this._datatype!==void 0?Ge(d,Ae):void 0;return new t(d,v)},t.prototype.forEach=function(o){var u=this,s=function c(d,v){wr(d)?d.forEach(function(g,m){c(g,v.concat(m))}):o(d,v,u)};s(this._data,[])},t.prototype[Symbol.iterator]=function*(){var o=function*u(s,c){if(wr(s))for(var d=0;d<s.length;d++)yield*u(s[d],c.concat(d));else yield{value:s,index:c}};yield*o(this._data,[])},t.prototype.rows=function(){var o=[],u=this.size();if(u.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");var s=this._data;for(var c of s)o.push(new t([c],this._datatype));return o},t.prototype.columns=function(){var o=this,u=[],s=this.size();if(s.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var c=this._data,d=function(m){var A=c.map(w=>[w[m]]);u.push(new t(A,o._datatype))},v=0;v<s[1];v++)d(v);return u},t.prototype.toArray=function(){return Fr(this._data)},t.prototype.valueOf=function(){return this._data},t.prototype.format=function(o){return Mr(this._data,o)},t.prototype.toString=function(){return Mr(this._data)},t.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},t.prototype.diagonal=function(o){if(o){if(Nr(o)&&(o=o.toNumber()),!gr(o)||!Br(o))throw new TypeError("The parameter k must be an integer number")}else o=0;for(var u=o>0?o:0,s=o<0?-o:0,c=this._size[0],d=this._size[1],v=Math.min(c-s,d-u),g=[],m=0;m<v;m++)g[m]=this._data[m+s][m+u];return new t({data:g,size:[v],datatype:this._datatype})},t.diagonal=function(o,u,s,c){if(!wr(o))throw new TypeError("Array expected, size parameter");if(o.length!==2)throw new Error("Only two dimensions matrix are supported");if(o=o.map(function(_){if(Nr(_)&&(_=_.toNumber()),!gr(_)||!Br(_)||_<1)throw new Error("Size values must be positive integers");return _}),s){if(Nr(s)&&(s=s.toNumber()),!gr(s)||!Br(s))throw new TypeError("The parameter k must be an integer number")}else s=0;var d=s>0?s:0,v=s<0?-s:0,g=o[0],m=o[1],A=Math.min(g-v,m-d),w;if(wr(u)){if(u.length!==A)throw new Error("Invalid value array length");w=function(B){return u[B]}}else if(xr(u)){var F=u.size();if(F.length!==1||F[0]!==A)throw new Error("Invalid matrix length");w=function(B){return u.get([B])}}else w=function(){return u};c||(c=Nr(w(0))?w(0).mul(0):0);var y=[];if(o.length>0){y=kt(y,o,c);for(var D=0;D<A;D++)y[D+v][D+d]=w(D)}return new t({data:y,size:[g,m]})},t.fromJSON=function(o){return new t(o)},t.prototype.swapRows=function(o,u){if(!gr(o)||!Br(o)||!gr(u)||!Br(u))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return yr(o,this._size[0]),yr(u,this._size[0]),t._swapRows(o,u,this._data),this},t._swapRows=function(o,u,s){var c=s[o];s[o]=s[u],s[u]=c};function p(o){return xr(o)?p(o.valueOf()):wr(o)?o.map(p):o}return t},{isClass:!0});function ve(r,e,t){return r&&typeof r.map=="function"?r.map(function(i){return ve(i,e)}):e(r)}var jt="isInteger",wo=["typed"],yo=X(jt,wo,r=>{var{typed:e}=r;return e(jt,{number:Br,BigNumber:function(i){return i.isInt()},bigint:function(i){return!0},Fraction:function(i){return i.d===1&&isFinite(i.n)},"Array | Matrix":e.referToSelf(t=>i=>ve(i,t))})}),ni="number",St="number, number";function ii(r){return Math.abs(r)}ii.signature=ni;function ui(r,e){return r+e}ui.signature=St;function ai(r,e){return r-e}ai.signature=St;function oi(r,e){return r*e}oi.signature=St;function si(r){return-r}si.signature=ni;function tt(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e-9,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(t<=0)throw new Error("Relative tolerance must be greater than 0");if(i<0)throw new Error("Absolute tolerance must be at least 0");return r.isNaN()||e.isNaN()?!1:!r.isFinite()||!e.isFinite()?r.eq(e):r.eq(e)?!0:r.minus(e).abs().lte(r.constructor.max(r.constructor.max(r.abs(),e.abs()).mul(t),i))}function Ao(r,e,t,i){return De(r.re,e.re,t,i)&&De(r.im,e.im,t,i)}var nt=X("compareUnits",["typed"],r=>{var{typed:e}=r;return{"Unit, Unit":e.referToSelf(t=>(i,n)=>{if(!i.equalBase(n))throw new Error("Cannot compare units with different base");return e.find(t,[i.valueType(),n.valueType()])(i.value,n.value)})}}),Ye="equalScalar",Fo=["typed","config"],Eo=X(Ye,Fo,r=>{var{typed:e,config:t}=r,i=nt({typed:e});return e(Ye,{"boolean, boolean":function(a,f){return a===f},"number, number":function(a,f){return De(a,f,t.relTol,t.absTol)},"BigNumber, BigNumber":function(a,f){return a.eq(f)||tt(a,f,t.relTol,t.absTol)},"bigint, bigint":function(a,f){return a===f},"Fraction, Fraction":function(a,f){return a.equals(f)},"Complex, Complex":function(a,f){return Ao(a,f,t.relTol,t.absTol)}},i)});X(Ye,["typed","config"],r=>{var{typed:e,config:t}=r;return e(Ye,{"number, number":function(n,a){return De(n,a,t.relTol,t.absTol)}})});var Co="SparseMatrix",_o=["typed","equalScalar","Matrix"],Bo=X(Co,_o,r=>{var{typed:e,equalScalar:t,Matrix:i}=r;function n(v,g){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(g&&!ee(g))throw new Error("Invalid datatype: "+g);if(xr(v))a(this,v,g);else if(v&&wr(v.index)&&wr(v.ptr)&&wr(v.size))this._values=v.values,this._index=v.index,this._ptr=v.ptr,this._size=v.size,this._datatype=g||v.datatype;else if(wr(v))f(this,v,g);else{if(v)throw new TypeError("Unsupported type of data ("+Ae(v)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=g}}function a(v,g,m){g.type==="SparseMatrix"?(v._values=g._values?Fr(g._values):void 0,v._index=Fr(g._index),v._ptr=Fr(g._ptr),v._size=Fr(g._size),v._datatype=m||g._datatype):f(v,g.valueOf(),m||g._datatype)}function f(v,g,m){v._values=[],v._index=[],v._ptr=[],v._datatype=m;var A=g.length,w=0,F=t,y=0;if(ee(m)&&(F=e.find(t,[m,m])||t,y=e.convert(0,m)),A>0){var D=0;do{v._ptr.push(v._index.length);for(var _=0;_<A;_++){var B=g[_];if(wr(B)){if(D===0&&w<B.length&&(w=B.length),D<B.length){var E=B[D];F(E,y)||(v._values.push(E),v._index.push(_))}}else D===0&&w<1&&(w=1),F(B,y)||(v._values.push(B),v._index.push(_))}D++}while(D<w)}v._ptr.push(v._index.length),v._size=[A,w]}n.prototype=new i,n.prototype.createSparseMatrix=function(v,g){return new n(v,g)},Object.defineProperty(n,"name",{value:"SparseMatrix"}),n.prototype.constructor=n,n.prototype.type="SparseMatrix",n.prototype.isSparseMatrix=!0,n.prototype.getDataType=function(){return Ge(this._values,Ae)},n.prototype.storage=function(){return"sparse"},n.prototype.datatype=function(){return this._datatype},n.prototype.create=function(v,g){return new n(v,g)},n.prototype.density=function(){var v=this._size[0],g=this._size[1];return v!==0&&g!==0?this._index.length/(v*g):0},n.prototype.subset=function(v,g,m){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return l(this,v);case 2:case 3:return h(this,v,g,m);default:throw new SyntaxError("Wrong number of arguments")}};function l(v,g){if(!Et(g))throw new TypeError("Invalid index");var m=g.isScalar();if(m)return v.get(g.min());var A=g.size();if(A.length!==v._size.length)throw new cr(A.length,v._size.length);var w,F,y,D,_=g.min(),B=g.max();for(w=0,F=v._size.length;w<F;w++)yr(_[w],v._size[w]),yr(B[w],v._size[w]);var E=v._values,S=v._index,x=v._ptr,z=g.dimension(0),L=g.dimension(1),I=[],O=[];z.forEach(function(T,H){O[T]=H[0],I[T]=!0});var b=E?[]:void 0,J=[],V=[];return L.forEach(function(T){for(V.push(J.length),y=x[T],D=x[T+1];y<D;y++)w=S[y],I[w]===!0&&(J.push(O[w]),b&&b.push(E[y]))}),V.push(J.length),new n({values:b,index:J,ptr:V,size:A,datatype:v._datatype})}function h(v,g,m,A){if(!g||g.isIndex!==!0)throw new TypeError("Invalid index");var w=g.size(),F=g.isScalar(),y;if(xr(m)?(y=m.size(),m=m.toArray()):y=Zr(m),F){if(y.length!==0)throw new TypeError("Scalar expected");v.set(g.min(),m,A)}else{if(w.length!==1&&w.length!==2)throw new cr(w.length,v._size.length,"<");if(y.length<w.length){for(var D=0,_=0;w[D]===1&&y[D]===1;)D++;for(;w[D]===1;)_++,D++;m=Qn(m,w.length,_,y)}if(!fe(w,y))throw new cr(w,y,">");if(w.length===1){var B=g.dimension(0);B.forEach(function(x,z){yr(x),v.set([x,0],m[z[0]],A)})}else{var E=g.dimension(0),S=g.dimension(1);E.forEach(function(x,z){yr(x),S.forEach(function(L,I){yr(L),v.set([x,L],m[z[0]][I[0]],A)})})}}return v}n.prototype.get=function(v){if(!wr(v))throw new TypeError("Array expected");if(v.length!==this._size.length)throw new cr(v.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var g=v[0],m=v[1];yr(g,this._size[0]),yr(m,this._size[1]);var A=p(g,this._ptr[m],this._ptr[m+1],this._index);return A<this._ptr[m+1]&&this._index[A]===g?this._values[A]:0},n.prototype.set=function(v,g,m){if(!wr(v))throw new TypeError("Array expected");if(v.length!==this._size.length)throw new cr(v.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var A=v[0],w=v[1],F=this._size[0],y=this._size[1],D=t,_=0;ee(this._datatype)&&(D=e.find(t,[this._datatype,this._datatype])||t,_=e.convert(0,this._datatype)),(A>F-1||w>y-1)&&(s(this,Math.max(A+1,F),Math.max(w+1,y),m),F=this._size[0],y=this._size[1]),yr(A,F),yr(w,y);var B=p(A,this._ptr[w],this._ptr[w+1],this._index);return B<this._ptr[w+1]&&this._index[B]===A?D(g,_)?o(B,w,this._values,this._index,this._ptr):this._values[B]=g:D(g,_)||u(B,A,w,g,this._values,this._index,this._ptr),this};function p(v,g,m,A){if(m-g===0)return m;for(var w=g;w<m;w++)if(A[w]===v)return w;return g}function o(v,g,m,A,w){m.splice(v,1),A.splice(v,1);for(var F=g+1;F<w.length;F++)w[F]--}function u(v,g,m,A,w,F,y){w.splice(v,0,A),F.splice(v,0,g);for(var D=m+1;D<y.length;D++)y[D]++}n.prototype.resize=function(v,g,m){if(!Ze(v))throw new TypeError("Array or Matrix expected");var A=v.valueOf().map(F=>Array.isArray(F)&&F.length===1?F[0]:F);if(A.length!==2)throw new Error("Only two dimensions matrix are supported");A.forEach(function(F){if(!gr(F)||!Br(F)||F<0)throw new TypeError("Invalid size, must contain positive integers (size: "+Mr(A)+")")});var w=m?this.clone():this;return s(w,A[0],A[1],g)};function s(v,g,m,A){var w=A||0,F=t,y=0;ee(v._datatype)&&(F=e.find(t,[v._datatype,v._datatype])||t,y=e.convert(0,v._datatype),w=e.convert(w,v._datatype));var D=!F(w,y),_=v._size[0],B=v._size[1],E,S,x;if(m>B){for(S=B;S<m;S++)if(v._ptr[S]=v._values.length,D)for(E=0;E<_;E++)v._values.push(w),v._index.push(E);v._ptr[m]=v._values.length}else m<B&&(v._ptr.splice(m+1,B-m),v._values.splice(v._ptr[m],v._values.length),v._index.splice(v._ptr[m],v._index.length));if(B=m,g>_){if(D){var z=0;for(S=0;S<B;S++){v._ptr[S]=v._ptr[S]+z,x=v._ptr[S+1]+z;var L=0;for(E=_;E<g;E++,L++)v._values.splice(x+L,0,w),v._index.splice(x+L,0,E),z++}v._ptr[B]=v._values.length}}else if(g<_){var I=0;for(S=0;S<B;S++){v._ptr[S]=v._ptr[S]-I;var O=v._ptr[S],b=v._ptr[S+1]-I;for(x=O;x<b;x++)E=v._index[x],E>g-1&&(v._values.splice(x,1),v._index.splice(x,1),I++)}v._ptr[S]=v._values.length}return v._size[0]=g,v._size[1]=m,v}n.prototype.reshape=function(v,g){if(!wr(v))throw new TypeError("Array expected");if(v.length!==2)throw new Error("Sparse matrices can only be reshaped in two dimensions");v.forEach(function(T){if(!gr(T)||!Br(T)||T<=-2||T===0)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+Mr(v)+")")});var m=this._size[0]*this._size[1];v=Bt(v,m);var A=v[0]*v[1];if(m!==A)throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var w=g?this.clone():this;if(this._size[0]===v[0]&&this._size[1]===v[1])return w;for(var F=[],y=0;y<w._ptr.length;y++)for(var D=0;D<w._ptr[y+1]-w._ptr[y];D++)F.push(y);for(var _=w._values.slice(),B=w._index.slice(),E=0;E<w._index.length;E++){var S=B[E],x=F[E],z=S*w._size[1]+x;F[E]=z%v[1],B[E]=Math.floor(z/v[1])}w._values.length=0,w._index.length=0,w._ptr.length=v[1]+1,w._size=v.slice();for(var L=0;L<w._ptr.length;L++)w._ptr[L]=0;for(var I=0;I<_.length;I++){var O=B[I],b=F[I],J=_[I],V=p(O,w._ptr[b],w._ptr[b+1],w._index);u(V,O,b,J,w._values,w._index,w._ptr)}return w},n.prototype.clone=function(){var v=new n({values:this._values?Fr(this._values):void 0,index:Fr(this._index),ptr:Fr(this._ptr),size:Fr(this._size),datatype:this._datatype});return v},n.prototype.size=function(){return this._size.slice(0)},n.prototype.map=function(v,g){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var m=this,A=this._size[0],w=this._size[1],F=ti(v),y=function(_,B,E){return F===1?v(_):F===2?v(_,[B,E]):v(_,[B,E],m)};return c(this,0,A-1,0,w-1,y,g)};function c(v,g,m,A,w,F,y){var D=[],_=[],B=[],E=t,S=0;ee(v._datatype)&&(E=e.find(t,[v._datatype,v._datatype])||t,S=e.convert(0,v._datatype));for(var x=function(k,Q,lr){k=F(k,Q,lr),E(k,S)||(D.push(k),_.push(Q))},z=A;z<=w;z++){B.push(D.length);var L=v._ptr[z],I=v._ptr[z+1];if(y)for(var O=L;O<I;O++){var b=v._index[O];b>=g&&b<=m&&x(v._values[O],b-g,z-A)}else{for(var J={},V=L;V<I;V++){var T=v._index[V];J[T]=v._values[V]}for(var H=g;H<=m;H++){var K=H in J?J[H]:0;x(K,H-g,z-A)}}}return B.push(D.length),new n({values:D,index:_,ptr:B,size:[m-g+1,w-A+1]})}n.prototype.forEach=function(v,g){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var m=this,A=this._size[0],w=this._size[1],F=0;F<w;F++){var y=this._ptr[F],D=this._ptr[F+1];if(g)for(var _=y;_<D;_++){var B=this._index[_];v(this._values[_],[B,F],m)}else{for(var E={},S=y;S<D;S++){var x=this._index[S];E[x]=this._values[S]}for(var z=0;z<A;z++){var L=z in E?E[z]:0;v(L,[z,F],m)}}}},n.prototype[Symbol.iterator]=function*(){if(!this._values)throw new Error("Cannot iterate a Pattern only matrix");for(var v=this._size[1],g=0;g<v;g++)for(var m=this._ptr[g],A=this._ptr[g+1],w=m;w<A;w++){var F=this._index[w];yield{value:this._values[w],index:[F,g]}}},n.prototype.toArray=function(){return d(this._values,this._index,this._ptr,this._size,!0)},n.prototype.valueOf=function(){return d(this._values,this._index,this._ptr,this._size,!1)};function d(v,g,m,A,w){var F=A[0],y=A[1],D=[],_,B;for(_=0;_<F;_++)for(D[_]=[],B=0;B<y;B++)D[_][B]=0;for(B=0;B<y;B++)for(var E=m[B],S=m[B+1],x=E;x<S;x++)_=g[x],D[_][B]=v?w?Fr(v[x]):v[x]:1;return D}return n.prototype.format=function(v){for(var g=this._size[0],m=this._size[1],A=this.density(),w="Sparse Matrix ["+Mr(g,v)+" x "+Mr(m,v)+"] density: "+Mr(A,v)+`
`,F=0;F<m;F++)for(var y=this._ptr[F],D=this._ptr[F+1],_=y;_<D;_++){var B=this._index[_];w+=`
    (`+Mr(B,v)+", "+Mr(F,v)+") ==> "+(this._values?Mr(this._values[_],v):"X")}return w},n.prototype.toString=function(){return Mr(this.toArray())},n.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},n.prototype.diagonal=function(v){if(v){if(Nr(v)&&(v=v.toNumber()),!gr(v)||!Br(v))throw new TypeError("The parameter k must be an integer number")}else v=0;var g=v>0?v:0,m=v<0?-v:0,A=this._size[0],w=this._size[1],F=Math.min(A-m,w-g),y=[],D=[],_=[];_[0]=0;for(var B=g;B<w&&y.length<F;B++)for(var E=this._ptr[B],S=this._ptr[B+1],x=E;x<S;x++){var z=this._index[x];if(z===B-g+m){y.push(this._values[x]),D[y.length-1]=z-m;break}}return _.push(y.length),new n({values:y,index:D,ptr:_,size:[F,1]})},n.fromJSON=function(v){return new n(v)},n.diagonal=function(v,g,m,A,w){if(!wr(v))throw new TypeError("Array expected, size parameter");if(v.length!==2)throw new Error("Only two dimensions matrix are supported");if(v=v.map(function(T){if(Nr(T)&&(T=T.toNumber()),!gr(T)||!Br(T)||T<1)throw new Error("Size values must be positive integers");return T}),m){if(Nr(m)&&(m=m.toNumber()),!gr(m)||!Br(m))throw new TypeError("The parameter k must be an integer number")}else m=0;var F=t,y=0;ee(w)&&(F=e.find(t,[w,w])||t,y=e.convert(0,w));var D=m>0?m:0,_=m<0?-m:0,B=v[0],E=v[1],S=Math.min(B-_,E-D),x;if(wr(g)){if(g.length!==S)throw new Error("Invalid value array length");x=function(H){return g[H]}}else if(xr(g)){var z=g.size();if(z.length!==1||z[0]!==S)throw new Error("Invalid matrix length");x=function(H){return g.get([H])}}else x=function(){return g};for(var L=[],I=[],O=[],b=0;b<E;b++){O.push(L.length);var J=b-D;if(J>=0&&J<S){var V=x(J);F(V,y)||(I.push(J+_),L.push(V))}}return O.push(L.length),new n({values:L,index:I,ptr:O,size:[B,E]})},n.prototype.swapRows=function(v,g){if(!gr(v)||!Br(v)||!gr(g)||!Br(g))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return yr(v,this._size[0]),yr(g,this._size[0]),n._swapRows(v,g,this._size[1],this._values,this._index,this._ptr),this},n._forEachRow=function(v,g,m,A,w){for(var F=A[v],y=A[v+1],D=F;D<y;D++)w(m[D],g[D])},n._swapRows=function(v,g,m,A,w,F){for(var y=0;y<m;y++){var D=F[y],_=F[y+1],B=p(v,D,_,w),E=p(g,D,_,w);if(B<_&&E<_&&w[B]===v&&w[E]===g){if(A){var S=A[B];A[B]=A[E],A[E]=S}continue}if(B<_&&w[B]===v&&(E>=_||w[E]!==g)){var x=A?A[B]:void 0;w.splice(E,0,g),A&&A.splice(E,0,x),w.splice(E<=B?B+1:B,1),A&&A.splice(E<=B?B+1:B,1);continue}if(E<_&&w[E]===g&&(B>=_||w[B]!==v)){var z=A?A[E]:void 0;w.splice(B,0,v),A&&A.splice(B,0,z),w.splice(B<=E?E+1:E,1),A&&A.splice(B<=E?E+1:E,1)}}},n},{isClass:!0}),So="number",Mo=["typed"];function xo(r){var e=r.match(/(0[box])([0-9a-fA-F]*)\.([0-9a-fA-F]*)/);if(e){var t={"0b":2,"0o":8,"0x":16}[e[1]],i=e[2],n=e[3];return{input:r,radix:t,integerPart:i,fractionalPart:n}}else return null}function bo(r){for(var e=parseInt(r.integerPart,r.radix),t=0,i=0;i<r.fractionalPart.length;i++){var n=parseInt(r.fractionalPart[i],r.radix);t+=n/Math.pow(r.radix,i+1)}var a=e+t;if(isNaN(a))throw new SyntaxError('String "'+r.input+'" is not a valid number');return a}var No=X(So,Mo,r=>{var{typed:e}=r,t=e("number",{"":function(){return 0},number:function(n){return n},string:function(n){if(n==="NaN")return NaN;var a=xo(n);if(a)return bo(a);var f=0,l=n.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);l&&(f=Number(l[2]),n=l[1]);var h=Number(n);if(isNaN(h))throw new SyntaxError('String "'+n+'" is not a valid number');if(l){if(h>2**f-1)throw new SyntaxError('String "'.concat(n,'" is out of range'));h>=2**(f-1)&&(h=h-2**f)}return h},BigNumber:function(n){return n.toNumber()},bigint:function(n){return Number(n)},Fraction:function(n){return n.valueOf()},Unit:e.referToSelf(i=>n=>{var a=n.clone();return a.value=i(n.value),a}),null:function(n){return 0},"Unit, string | Unit":function(n,a){return n.toNumber(a)},"Array | Matrix":e.referToSelf(i=>n=>ve(n,i))});return t.fromJSON=function(i){return parseFloat(i.value)},t}),To="bignumber",zo=["typed","BigNumber"],Oo=X(To,zo,r=>{var{typed:e,BigNumber:t}=r;return e("bignumber",{"":function(){return new t(0)},number:function(n){return new t(n+"")},string:function(n){var a=n.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);if(a){var f=a[2],l=t(a[1]),h=new t(2).pow(Number(f));if(l.gt(h.sub(1)))throw new SyntaxError('String "'.concat(n,'" is out of range'));var p=new t(2).pow(Number(f)-1);return l.gte(p)?l.sub(h):l}return new t(n)},BigNumber:function(n){return n},bigint:function(n){return new t(n.toString())},Unit:e.referToSelf(i=>n=>{var a=n.clone();return a.value=i(n.value),a}),Fraction:function(n){return new t(n.n).div(n.d).times(n.s)},null:function(n){return new t(0)},"Array | Matrix":e.referToSelf(i=>n=>ve(n,i))})}),Io="fraction",Po=["typed","Fraction"],$o=X(Io,Po,r=>{var{typed:e,Fraction:t}=r;return e("fraction",{number:function(n){if(!isFinite(n)||isNaN(n))throw new Error(n+" cannot be represented as a fraction");return new t(n)},string:function(n){return new t(n)},"number, number":function(n,a){return new t(n,a)},null:function(n){return new t(0)},BigNumber:function(n){return new t(n.toString())},bigint:function(n){return new t(n.toString())},Fraction:function(n){return n},Unit:e.referToSelf(i=>n=>{var a=n.clone();return a.value=i(n.value),a}),Object:function(n){return new t(n)},"Array | Matrix":e.referToSelf(i=>n=>ve(n,i))})}),rn="matrix",qo=["typed","Matrix","DenseMatrix","SparseMatrix"],Ro=X(rn,qo,r=>{var{typed:e,Matrix:t,DenseMatrix:i,SparseMatrix:n}=r;return e(rn,{"":function(){return a([])},string:function(l){return a([],l)},"string, string":function(l,h){return a([],l,h)},Array:function(l){return a(l)},Matrix:function(l){return a(l,l.storage())},"Array | Matrix, string":a,"Array | Matrix, string, string":a});function a(f,l,h){if(l==="dense"||l==="default"||l===void 0)return new i(f,h);if(l==="sparse")return new n(f,h);throw new TypeError("Unknown matrix type "+JSON.stringify(l)+".")}}),en="unaryMinus",Lo=["typed"],Uo=X(en,Lo,r=>{var{typed:e}=r;return e(en,{number:si,"Complex | BigNumber | Fraction":t=>t.neg(),bigint:t=>-t,Unit:e.referToSelf(t=>i=>{var n=i.clone();return n.value=e.find(t,n.valueType())(i.value),n}),"Array | Matrix":e.referToSelf(t=>i=>ve(i,t))})}),tn="abs",Zo=["typed"],Vo=X(tn,Zo,r=>{var{typed:e}=r;return e(tn,{number:ii,"Complex | BigNumber | Fraction | Unit":t=>t.abs(),bigint:t=>t<0n?-t:t,"Array | Matrix":e.referToSelf(t=>i=>ve(i,t))})}),nn="addScalar",Ho=["typed"],Jo=X(nn,Ho,r=>{var{typed:e}=r;return e(nn,{"number, number":ui,"Complex, Complex":function(i,n){return i.add(n)},"BigNumber, BigNumber":function(i,n){return i.plus(n)},"bigint, bigint":function(i,n){return i+n},"Fraction, Fraction":function(i,n){return i.add(n)},"Unit, Unit":e.referToSelf(t=>(i,n)=>{if(i.value===null||i.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(n.value===null||n.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!i.equalBase(n))throw new Error("Units do not match");var a=i.clone();return a.value=e.find(t,[a.valueType(),n.valueType()])(a.value,n.value),a.fixPrefix=!1,a})})}),un="subtractScalar",Go=["typed"],Yo=X(un,Go,r=>{var{typed:e}=r;return e(un,{"number, number":ai,"Complex, Complex":function(i,n){return i.sub(n)},"BigNumber, BigNumber":function(i,n){return i.minus(n)},"bigint, bigint":function(i,n){return i-n},"Fraction, Fraction":function(i,n){return i.sub(n)},"Unit, Unit":e.referToSelf(t=>(i,n)=>{if(i.value===null||i.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(n.value===null||n.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!i.equalBase(n))throw new Error("Units do not match");var a=i.clone();return a.value=e.find(t,[a.valueType(),n.valueType()])(a.value,n.value),a.fixPrefix=!1,a})})}),Ko="matAlgo11xS0s",Xo=["typed","equalScalar"],Qo=X(Ko,Xo,r=>{var{typed:e,equalScalar:t}=r;return function(n,a,f,l){var h=n._values,p=n._index,o=n._ptr,u=n._size,s=n._datatype;if(!h)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var c=u[0],d=u[1],v,g=t,m=0,A=f;typeof s=="string"&&(v=s,g=e.find(t,[v,v]),m=e.convert(0,v),a=e.convert(a,v),A=e.find(f,[v,v]));for(var w=[],F=[],y=[],D=0;D<d;D++){y[D]=F.length;for(var _=o[D],B=o[D+1],E=_;E<B;E++){var S=p[E],x=l?A(a,h[E]):A(h[E],a);g(x,m)||(F.push(S),w.push(x))}}return y[d]=F.length,n.createSparseMatrix({values:w,index:F,ptr:y,size:[c,d],datatype:v})}}),Wo="matAlgo12xSfs",ko=["typed","DenseMatrix"],it=X(Wo,ko,r=>{var{typed:e,DenseMatrix:t}=r;return function(n,a,f,l){var h=n._values,p=n._index,o=n._ptr,u=n._size,s=n._datatype;if(!h)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var c=u[0],d=u[1],v,g=f;typeof s=="string"&&(v=s,a=e.convert(a,v),g=e.find(f,[v,v]));for(var m=[],A=[],w=[],F=0;F<d;F++){for(var y=F+1,D=o[F],_=o[F+1],B=D;B<_;B++){var E=p[B];A[E]=h[B],w[E]=y}for(var S=0;S<c;S++)F===0&&(m[S]=[]),w[S]===y?m[S][F]=l?g(a,A[S]):g(A[S],a):m[S][F]=l?g(a,0):g(0,a)}return new t({data:m,size:[c,d],datatype:v})}}),jo="matAlgo14xDs",rs=["typed"],fi=X(jo,rs,r=>{var{typed:e}=r;return function(n,a,f,l){var h=n._data,p=n._size,o=n._datatype,u,s=f;typeof o=="string"&&(u=o,a=e.convert(a,u),s=e.find(f,[u,u]));var c=p.length>0?t(s,0,p,p[0],h,a,l):[];return n.createDenseMatrix({data:c,size:Fr(p),datatype:u})};function t(i,n,a,f,l,h,p){var o=[];if(n===a.length-1)for(var u=0;u<f;u++)o[u]=p?i(h,l[u]):i(l[u],h);else for(var s=0;s<f;s++)o[s]=t(i,n+1,a,a[n+1],l[s],h,p);return o}}),es="matAlgo03xDSf",ts=["typed"],ut=X(es,ts,r=>{var{typed:e}=r;return function(i,n,a,f){var l=i._data,h=i._size,p=i._datatype||i.getDataType(),o=n._values,u=n._index,s=n._ptr,c=n._size,d=n._datatype||n._data===void 0?n._datatype:n.getDataType();if(h.length!==c.length)throw new cr(h.length,c.length);if(h[0]!==c[0]||h[1]!==c[1])throw new RangeError("Dimension mismatch. Matrix A ("+h+") must match Matrix B ("+c+")");if(!o)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var v=h[0],g=h[1],m,A=0,w=a;typeof p=="string"&&p===d&&p!=="mixed"&&(m=p,A=e.convert(0,m),w=e.find(a,[m,m]));for(var F=[],y=0;y<v;y++)F[y]=[];for(var D=[],_=[],B=0;B<g;B++){for(var E=B+1,S=s[B],x=s[B+1],z=S;z<x;z++){var L=u[z];D[L]=f?w(o[z],l[L][B]):w(l[L][B],o[z]),_[L]=E}for(var I=0;I<v;I++)_[I]===E?F[I][B]=D[I]:F[I][B]=f?w(A,l[I][B]):w(l[I][B],A)}return i.createDenseMatrix({data:F,size:[v,g],datatype:p===i._datatype&&d===n._datatype?m:void 0})}}),ns="matAlgo05xSfSf",is=["typed","equalScalar"],us=X(ns,is,r=>{var{typed:e,equalScalar:t}=r;return function(n,a,f){var l=n._values,h=n._index,p=n._ptr,o=n._size,u=n._datatype||n._data===void 0?n._datatype:n.getDataType(),s=a._values,c=a._index,d=a._ptr,v=a._size,g=a._datatype||a._data===void 0?a._datatype:a.getDataType();if(o.length!==v.length)throw new cr(o.length,v.length);if(o[0]!==v[0]||o[1]!==v[1])throw new RangeError("Dimension mismatch. Matrix A ("+o+") must match Matrix B ("+v+")");var m=o[0],A=o[1],w,F=t,y=0,D=f;typeof u=="string"&&u===g&&u!=="mixed"&&(w=u,F=e.find(t,[w,w]),y=e.convert(0,w),D=e.find(f,[w,w]));var _=l&&s?[]:void 0,B=[],E=[],S=_?[]:void 0,x=_?[]:void 0,z=[],L=[],I,O,b,J;for(O=0;O<A;O++){E[O]=B.length;var V=O+1;for(b=p[O],J=p[O+1];b<J;b++)I=h[b],B.push(I),z[I]=V,S&&(S[I]=l[b]);for(b=d[O],J=d[O+1];b<J;b++)I=c[b],z[I]!==V&&B.push(I),L[I]=V,x&&(x[I]=s[b]);if(_)for(b=E[O];b<B.length;){I=B[b];var T=z[I],H=L[I];if(T===V||H===V){var K=T===V?S[I]:y,nr=H===V?x[I]:y,k=D(K,nr);F(k,y)?B.splice(b,1):(_.push(k),b++)}}}return E[A]=B.length,n.createSparseMatrix({values:_,index:B,ptr:E,size:[m,A],datatype:u===n._datatype&&g===a._datatype?w:void 0})}}),as="matAlgo13xDD",os=["typed"],ss=X(as,os,r=>{var{typed:e}=r;return function(n,a,f){var l=n._data,h=n._size,p=n._datatype,o=a._data,u=a._size,s=a._datatype,c=[];if(h.length!==u.length)throw new cr(h.length,u.length);for(var d=0;d<h.length;d++){if(h[d]!==u[d])throw new RangeError("Dimension mismatch. Matrix A ("+h+") must match Matrix B ("+u+")");c[d]=h[d]}var v,g=f;typeof p=="string"&&p===s&&(v=p,g=e.find(f,[v,v]));var m=c.length>0?t(g,0,c,c[0],l,o):[];return n.createDenseMatrix({data:m,size:c,datatype:v})};function t(i,n,a,f,l,h){var p=[];if(n===a.length-1)for(var o=0;o<f;o++)p[o]=i(l[o],h[o]);else for(var u=0;u<f;u++)p[u]=t(i,n+1,a,a[n+1],l[u],h[u]);return p}});function Sr(r,e){if(fe(r.size(),e.size()))return[r,e];var t=ri(r.size(),e.size());return[r,e].map(i=>fs(i,t))}function fs(r,e){return fe(r.size(),e)?r:r.create(At(r.valueOf(),e),r.datatype())}var cs="matrixAlgorithmSuite",ls=["typed","matrix"],be=X(cs,ls,r=>{var{typed:e,matrix:t}=r,i=ss({typed:e}),n=fi({typed:e});return function(f){var l=f.elop,h=f.SD||f.DS,p;l?(p={"DenseMatrix, DenseMatrix":(c,d)=>i(...Sr(c,d),l),"Array, Array":(c,d)=>i(...Sr(t(c),t(d)),l).valueOf(),"Array, DenseMatrix":(c,d)=>i(...Sr(t(c),d),l),"DenseMatrix, Array":(c,d)=>i(...Sr(c,t(d)),l)},f.SS&&(p["SparseMatrix, SparseMatrix"]=(c,d)=>f.SS(...Sr(c,d),l,!1)),f.DS&&(p["DenseMatrix, SparseMatrix"]=(c,d)=>f.DS(...Sr(c,d),l,!1),p["Array, SparseMatrix"]=(c,d)=>f.DS(...Sr(t(c),d),l,!1)),h&&(p["SparseMatrix, DenseMatrix"]=(c,d)=>h(...Sr(d,c),l,!0),p["SparseMatrix, Array"]=(c,d)=>h(...Sr(t(d),c),l,!0))):(p={"DenseMatrix, DenseMatrix":e.referToSelf(c=>(d,v)=>i(...Sr(d,v),c)),"Array, Array":e.referToSelf(c=>(d,v)=>i(...Sr(t(d),t(v)),c).valueOf()),"Array, DenseMatrix":e.referToSelf(c=>(d,v)=>i(...Sr(t(d),v),c)),"DenseMatrix, Array":e.referToSelf(c=>(d,v)=>i(...Sr(d,t(v)),c))},f.SS&&(p["SparseMatrix, SparseMatrix"]=e.referToSelf(c=>(d,v)=>f.SS(...Sr(d,v),c,!1))),f.DS&&(p["DenseMatrix, SparseMatrix"]=e.referToSelf(c=>(d,v)=>f.DS(...Sr(d,v),c,!1)),p["Array, SparseMatrix"]=e.referToSelf(c=>(d,v)=>f.DS(...Sr(t(d),v),c,!1))),h&&(p["SparseMatrix, DenseMatrix"]=e.referToSelf(c=>(d,v)=>h(...Sr(v,d),c,!0)),p["SparseMatrix, Array"]=e.referToSelf(c=>(d,v)=>h(...Sr(t(v),d),c,!0))));var o=f.scalar||"any",u=f.Ds||f.Ss;u&&(l?(p["DenseMatrix,"+o]=(c,d)=>n(c,d,l,!1),p[o+", DenseMatrix"]=(c,d)=>n(d,c,l,!0),p["Array,"+o]=(c,d)=>n(t(c),d,l,!1).valueOf(),p[o+", Array"]=(c,d)=>n(t(d),c,l,!0).valueOf()):(p["DenseMatrix,"+o]=e.referToSelf(c=>(d,v)=>n(d,v,c,!1)),p[o+", DenseMatrix"]=e.referToSelf(c=>(d,v)=>n(v,d,c,!0)),p["Array,"+o]=e.referToSelf(c=>(d,v)=>n(t(d),v,c,!1).valueOf()),p[o+", Array"]=e.referToSelf(c=>(d,v)=>n(t(v),d,c,!0).valueOf())));var s=f.sS!==void 0?f.sS:f.Ss;return l?(f.Ss&&(p["SparseMatrix,"+o]=(c,d)=>f.Ss(c,d,l,!1)),s&&(p[o+", SparseMatrix"]=(c,d)=>s(d,c,l,!0))):(f.Ss&&(p["SparseMatrix,"+o]=e.referToSelf(c=>(d,v)=>f.Ss(d,v,c,!1))),s&&(p[o+", SparseMatrix"]=e.referToSelf(c=>(d,v)=>s(v,d,c,!0)))),l&&l.signatures&&Nu(p,l.signatures),p}}),vs="matAlgo01xDSid",hs=["typed"],ci=X(vs,hs,r=>{var{typed:e}=r;return function(i,n,a,f){var l=i._data,h=i._size,p=i._datatype||i.getDataType(),o=n._values,u=n._index,s=n._ptr,c=n._size,d=n._datatype||n._data===void 0?n._datatype:n.getDataType();if(h.length!==c.length)throw new cr(h.length,c.length);if(h[0]!==c[0]||h[1]!==c[1])throw new RangeError("Dimension mismatch. Matrix A ("+h+") must match Matrix B ("+c+")");if(!o)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var v=h[0],g=h[1],m=typeof p=="string"&&p!=="mixed"&&p===d?p:void 0,A=m?e.find(a,[m,m]):a,w,F,y=[];for(w=0;w<v;w++)y[w]=[];var D=[],_=[];for(F=0;F<g;F++){for(var B=F+1,E=s[F],S=s[F+1],x=E;x<S;x++)w=u[x],D[w]=f?A(o[x],l[w][F]):A(l[w][F],o[x]),_[w]=B;for(w=0;w<v;w++)_[w]===B?y[w][F]=D[w]:y[w][F]=l[w][F]}return i.createDenseMatrix({data:y,size:[v,g],datatype:p===i._datatype&&d===n._datatype?m:void 0})}}),ps="matAlgo04xSidSid",Ds=["typed","equalScalar"],ds=X(ps,Ds,r=>{var{typed:e,equalScalar:t}=r;return function(n,a,f){var l=n._values,h=n._index,p=n._ptr,o=n._size,u=n._datatype||n._data===void 0?n._datatype:n.getDataType(),s=a._values,c=a._index,d=a._ptr,v=a._size,g=a._datatype||a._data===void 0?a._datatype:a.getDataType();if(o.length!==v.length)throw new cr(o.length,v.length);if(o[0]!==v[0]||o[1]!==v[1])throw new RangeError("Dimension mismatch. Matrix A ("+o+") must match Matrix B ("+v+")");var m=o[0],A=o[1],w,F=t,y=0,D=f;typeof u=="string"&&u===g&&u!=="mixed"&&(w=u,F=e.find(t,[w,w]),y=e.convert(0,w),D=e.find(f,[w,w]));var _=l&&s?[]:void 0,B=[],E=[],S=l&&s?[]:void 0,x=l&&s?[]:void 0,z=[],L=[],I,O,b,J,V;for(O=0;O<A;O++){E[O]=B.length;var T=O+1;for(J=p[O],V=p[O+1],b=J;b<V;b++)I=h[b],B.push(I),z[I]=T,S&&(S[I]=l[b]);for(J=d[O],V=d[O+1],b=J;b<V;b++)if(I=c[b],z[I]===T){if(S){var H=D(S[I],s[b]);F(H,y)?z[I]=null:S[I]=H}}else B.push(I),L[I]=T,x&&(x[I]=s[b]);if(S&&x)for(b=E[O];b<B.length;)I=B[b],z[I]===T?(_[b]=S[I],b++):L[I]===T?(_[b]=x[I],b++):B.splice(b,1)}return E[A]=B.length,n.createSparseMatrix({values:_,index:B,ptr:E,size:[m,A],datatype:u===n._datatype&&g===a._datatype?w:void 0})}}),ms="matAlgo10xSids",gs=["typed","DenseMatrix"],li=X(ms,gs,r=>{var{typed:e,DenseMatrix:t}=r;return function(n,a,f,l){var h=n._values,p=n._index,o=n._ptr,u=n._size,s=n._datatype;if(!h)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var c=u[0],d=u[1],v,g=f;typeof s=="string"&&(v=s,a=e.convert(a,v),g=e.find(f,[v,v]));for(var m=[],A=[],w=[],F=0;F<d;F++){for(var y=F+1,D=o[F],_=o[F+1],B=D;B<_;B++){var E=p[B];A[E]=h[B],w[E]=y}for(var S=0;S<c;S++)F===0&&(m[S]=[]),w[S]===y?m[S][F]=l?g(a,A[S]):g(A[S],a):m[S][F]=a}return new t({data:m,size:[c,d],datatype:v})}}),ws="multiplyScalar",ys=["typed"],As=X(ws,ys,r=>{var{typed:e}=r;return e("multiplyScalar",{"number, number":oi,"Complex, Complex":function(i,n){return i.mul(n)},"BigNumber, BigNumber":function(i,n){return i.times(n)},"bigint, bigint":function(i,n){return i*n},"Fraction, Fraction":function(i,n){return i.mul(n)},"number | Fraction | BigNumber | Complex, Unit":(t,i)=>i.multiply(t),"Unit, number | Fraction | BigNumber | Complex | Unit":(t,i)=>t.multiply(i)})}),an="multiply",Fs=["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],Es=X(an,Fs,r=>{var{typed:e,matrix:t,addScalar:i,multiplyScalar:n,equalScalar:a,dot:f}=r,l=Qo({typed:e,equalScalar:a}),h=fi({typed:e});function p(y,D){switch(y.length){case 1:switch(D.length){case 1:if(y[0]!==D[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(y[0]!==D[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+y[0]+") must match Matrix rows ("+D[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+D.length+" dimensions)")}break;case 2:switch(D.length){case 1:if(y[1]!==D[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+y[1]+") must match Vector length ("+D[0]+")");break;case 2:if(y[1]!==D[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+y[1]+") must match Matrix B rows ("+D[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+D.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+y.length+" dimensions)")}}function o(y,D,_){if(_===0)throw new Error("Cannot multiply two empty vectors");return f(y,D)}function u(y,D){if(D.storage()!=="dense")throw new Error("Support for SparseMatrix not implemented");return s(y,D)}function s(y,D){var _=y._data,B=y._size,E=y._datatype||y.getDataType(),S=D._data,x=D._size,z=D._datatype||D.getDataType(),L=B[0],I=x[1],O,b=i,J=n;E&&z&&E===z&&typeof E=="string"&&E!=="mixed"&&(O=E,b=e.find(i,[O,O]),J=e.find(n,[O,O]));for(var V=[],T=0;T<I;T++){for(var H=J(_[0],S[0][T]),K=1;K<L;K++)H=b(H,J(_[K],S[K][T]));V[T]=H}return y.createDenseMatrix({data:V,size:[I],datatype:E===y._datatype&&z===D._datatype?O:void 0})}var c=e("_multiplyMatrixVector",{"DenseMatrix, any":v,"SparseMatrix, any":A}),d=e("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":g,"DenseMatrix, SparseMatrix":m,"SparseMatrix, DenseMatrix":w,"SparseMatrix, SparseMatrix":F});function v(y,D){var _=y._data,B=y._size,E=y._datatype||y.getDataType(),S=D._data,x=D._datatype||D.getDataType(),z=B[0],L=B[1],I,O=i,b=n;E&&x&&E===x&&typeof E=="string"&&E!=="mixed"&&(I=E,O=e.find(i,[I,I]),b=e.find(n,[I,I]));for(var J=[],V=0;V<z;V++){for(var T=_[V],H=b(T[0],S[0]),K=1;K<L;K++)H=O(H,b(T[K],S[K]));J[V]=H}return y.createDenseMatrix({data:J,size:[z],datatype:E===y._datatype&&x===D._datatype?I:void 0})}function g(y,D){var _=y._data,B=y._size,E=y._datatype||y.getDataType(),S=D._data,x=D._size,z=D._datatype||D.getDataType(),L=B[0],I=B[1],O=x[1],b,J=i,V=n;E&&z&&E===z&&typeof E=="string"&&E!=="mixed"&&E!=="mixed"&&(b=E,J=e.find(i,[b,b]),V=e.find(n,[b,b]));for(var T=[],H=0;H<L;H++){var K=_[H];T[H]=[];for(var nr=0;nr<O;nr++){for(var k=V(K[0],S[0][nr]),Q=1;Q<I;Q++)k=J(k,V(K[Q],S[Q][nr]));T[H][nr]=k}}return y.createDenseMatrix({data:T,size:[L,O],datatype:E===y._datatype&&z===D._datatype?b:void 0})}function m(y,D){var _=y._data,B=y._size,E=y._datatype||y.getDataType(),S=D._values,x=D._index,z=D._ptr,L=D._size,I=D._datatype||D._data===void 0?D._datatype:D.getDataType();if(!S)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var O=B[0],b=L[1],J,V=i,T=n,H=a,K=0;E&&I&&E===I&&typeof E=="string"&&E!=="mixed"&&(J=E,V=e.find(i,[J,J]),T=e.find(n,[J,J]),H=e.find(a,[J,J]),K=e.convert(0,J));for(var nr=[],k=[],Q=[],lr=D.createSparseMatrix({values:nr,index:k,ptr:Q,size:[O,b],datatype:E===y._datatype&&I===D._datatype?J:void 0}),ar=0;ar<b;ar++){Q[ar]=k.length;var tr=z[ar],or=z[ar+1];if(or>tr)for(var ir=0,j=0;j<O;j++){for(var Ar=j+1,Dr=void 0,ur=tr;ur<or;ur++){var fr=x[ur];ir!==Ar?(Dr=T(_[j][fr],S[ur]),ir=Ar):Dr=V(Dr,T(_[j][fr],S[ur]))}ir===Ar&&!H(Dr,K)&&(k.push(j),nr.push(Dr))}}return Q[b]=k.length,lr}function A(y,D){var _=y._values,B=y._index,E=y._ptr,S=y._datatype||y._data===void 0?y._datatype:y.getDataType();if(!_)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var x=D._data,z=D._datatype||D.getDataType(),L=y._size[0],I=D._size[0],O=[],b=[],J=[],V,T=i,H=n,K=a,nr=0;S&&z&&S===z&&typeof S=="string"&&S!=="mixed"&&(V=S,T=e.find(i,[V,V]),H=e.find(n,[V,V]),K=e.find(a,[V,V]),nr=e.convert(0,V));var k=[],Q=[];J[0]=0;for(var lr=0;lr<I;lr++){var ar=x[lr];if(!K(ar,nr))for(var tr=E[lr],or=E[lr+1],ir=tr;ir<or;ir++){var j=B[ir];Q[j]?k[j]=T(k[j],H(ar,_[ir])):(Q[j]=!0,b.push(j),k[j]=H(ar,_[ir]))}}for(var Ar=b.length,Dr=0;Dr<Ar;Dr++){var ur=b[Dr];O[Dr]=k[ur]}return J[1]=b.length,y.createSparseMatrix({values:O,index:b,ptr:J,size:[L,1],datatype:S===y._datatype&&z===D._datatype?V:void 0})}function w(y,D){var _=y._values,B=y._index,E=y._ptr,S=y._datatype||y._data===void 0?y._datatype:y.getDataType();if(!_)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var x=D._data,z=D._datatype||D.getDataType(),L=y._size[0],I=D._size[0],O=D._size[1],b,J=i,V=n,T=a,H=0;S&&z&&S===z&&typeof S=="string"&&S!=="mixed"&&(b=S,J=e.find(i,[b,b]),V=e.find(n,[b,b]),T=e.find(a,[b,b]),H=e.convert(0,b));for(var K=[],nr=[],k=[],Q=y.createSparseMatrix({values:K,index:nr,ptr:k,size:[L,O],datatype:S===y._datatype&&z===D._datatype?b:void 0}),lr=[],ar=[],tr=0;tr<O;tr++){k[tr]=nr.length;for(var or=tr+1,ir=0;ir<I;ir++){var j=x[ir][tr];if(!T(j,H))for(var Ar=E[ir],Dr=E[ir+1],ur=Ar;ur<Dr;ur++){var fr=B[ur];ar[fr]!==or?(ar[fr]=or,nr.push(fr),lr[fr]=V(j,_[ur])):lr[fr]=J(lr[fr],V(j,_[ur]))}}for(var Cr=k[tr],$r=nr.length,zr=Cr;zr<$r;zr++){var sr=nr[zr];K[zr]=lr[sr]}}return k[O]=nr.length,Q}function F(y,D){var _=y._values,B=y._index,E=y._ptr,S=y._datatype||y._data===void 0?y._datatype:y.getDataType(),x=D._values,z=D._index,L=D._ptr,I=D._datatype||D._data===void 0?D._datatype:D.getDataType(),O=y._size[0],b=D._size[1],J=_&&x,V,T=i,H=n;S&&I&&S===I&&typeof S=="string"&&S!=="mixed"&&(V=S,T=e.find(i,[V,V]),H=e.find(n,[V,V]));for(var K=J?[]:void 0,nr=[],k=[],Q=y.createSparseMatrix({values:K,index:nr,ptr:k,size:[O,b],datatype:S===y._datatype&&I===D._datatype?V:void 0}),lr=J?[]:void 0,ar=[],tr,or,ir,j,Ar,Dr,ur,fr,Cr=0;Cr<b;Cr++){k[Cr]=nr.length;var $r=Cr+1;for(Ar=L[Cr],Dr=L[Cr+1],j=Ar;j<Dr;j++)if(fr=z[j],J)for(or=E[fr],ir=E[fr+1],tr=or;tr<ir;tr++)ur=B[tr],ar[ur]!==$r?(ar[ur]=$r,nr.push(ur),lr[ur]=H(x[j],_[tr])):lr[ur]=T(lr[ur],H(x[j],_[tr]));else for(or=E[fr],ir=E[fr+1],tr=or;tr<ir;tr++)ur=B[tr],ar[ur]!==$r&&(ar[ur]=$r,nr.push(ur));if(J)for(var zr=k[Cr],sr=nr.length,Or=zr;Or<sr;Or++){var Jr=nr[Or];K[Or]=lr[Jr]}}return k[b]=nr.length,Q}return e(an,n,{"Array, Array":e.referTo("Matrix, Matrix",y=>(D,_)=>{p(Zr(D),Zr(_));var B=y(t(D),t(_));return xr(B)?B.valueOf():B}),"Matrix, Matrix":function(D,_){var B=D.size(),E=_.size();return p(B,E),B.length===1?E.length===1?o(D,_,B[0]):u(D,_):E.length===1?c(D,_):d(D,_)},"Matrix, Array":e.referTo("Matrix,Matrix",y=>(D,_)=>y(D,t(_))),"Array, Matrix":e.referToSelf(y=>(D,_)=>y(t(D,_.storage()),_)),"SparseMatrix, any":function(D,_){return l(D,_,n,!1)},"DenseMatrix, any":function(D,_){return h(D,_,n,!1)},"any, SparseMatrix":function(D,_){return l(_,D,n,!0)},"any, DenseMatrix":function(D,_){return h(_,D,n,!0)},"Array, any":function(D,_){return h(t(D),_,n,!1).valueOf()},"any, Array":function(D,_){return h(t(_),D,n,!0).valueOf()},"any, any":n,"any, any, ...any":e.referToSelf(y=>(D,_,B)=>{for(var E=y(D,_),S=0;S<B.length;S++)E=y(E,B[S]);return E})})}),on="subtract",Cs=["typed","matrix","equalScalar","subtractScalar","unaryMinus","DenseMatrix","concat"],_s=X(on,Cs,r=>{var{typed:e,matrix:t,equalScalar:i,subtractScalar:n,unaryMinus:a,DenseMatrix:f,concat:l}=r,h=ci({typed:e}),p=ut({typed:e}),o=us({typed:e,equalScalar:i}),u=li({typed:e,DenseMatrix:f}),s=it({typed:e,DenseMatrix:f}),c=be({typed:e,matrix:t,concat:l});return e(on,{"any, any":n},c({elop:n,SS:o,DS:h,SD:p,Ss:s,sS:u}))}),Bs="matAlgo07xSSf",Ss=["typed","DenseMatrix"],Mt=X(Bs,Ss,r=>{var{typed:e,DenseMatrix:t}=r;return function(a,f,l){var h=a._size,p=a._datatype||a._data===void 0?a._datatype:a.getDataType(),o=f._size,u=f._datatype||f._data===void 0?f._datatype:f.getDataType();if(h.length!==o.length)throw new cr(h.length,o.length);if(h[0]!==o[0]||h[1]!==o[1])throw new RangeError("Dimension mismatch. Matrix A ("+h+") must match Matrix B ("+o+")");var s=h[0],c=h[1],d,v=0,g=l;typeof p=="string"&&p===u&&p!=="mixed"&&(d=p,v=e.convert(0,d),g=e.find(l,[d,d]));var m,A,w=[];for(m=0;m<s;m++)w[m]=[];var F=[],y=[],D=[],_=[];for(A=0;A<c;A++){var B=A+1;for(i(a,A,D,F,B),i(f,A,_,y,B),m=0;m<s;m++){var E=D[m]===B?F[m]:v,S=_[m]===B?y[m]:v;w[m][A]=g(E,S)}}return new t({data:w,size:[s,c],datatype:p===a._datatype&&u===f._datatype?d:void 0})};function i(n,a,f,l,h){for(var p=n._values,o=n._index,u=n._ptr,s=u[a],c=u[a+1];s<c;s++){var d=o[s];f[d]=h,l[d]=p[s]}}}),sn="conj",Ms=["typed"],xs=X(sn,Ms,r=>{var{typed:e}=r;return e(sn,{"number | BigNumber | Fraction":t=>t,Complex:t=>t.conjugate(),"Array | Matrix":e.referToSelf(t=>i=>ve(i,t))})}),fn="concat",bs=["typed","matrix","isInteger"],Ns=X(fn,bs,r=>{var{typed:e,matrix:t,isInteger:i}=r;return e(fn,{"...Array | Matrix | number | BigNumber":function(a){var f,l=a.length,h=-1,p,o=!1,u=[];for(f=0;f<l;f++){var s=a[f];if(xr(s)&&(o=!0),gr(s)||Nr(s)){if(f!==l-1)throw new Error("Dimension must be specified as last argument");if(p=h,h=s.valueOf(),!i(h))throw new TypeError("Integer number expected for dimension");if(h<0||f>0&&h>p)throw new me(h,p+1)}else{var c=Fr(s).valueOf(),d=Zr(c);if(u[f]=c,p=h,h=d.length-1,f>0&&h!==p)throw new cr(p+1,h+1)}}if(u.length===0)throw new SyntaxError("At least one matrix expected");for(var v=u.shift();u.length;)v=jn(v,u.shift(),h);return o?t(v):v},"...string":function(a){return a.join("")}})});function Ts(){throw new Error('No "bignumber" implementation available')}function zs(){throw new Error('No "fraction" implementation available')}function Os(){throw new Error('No "matrix" implementation available')}var cn="size",Is=["typed","config","?matrix"],Ps=X(cn,Is,r=>{var{typed:e,config:t,matrix:i}=r;return e(cn,{Matrix:function(a){return a.create(a.size())},Array:Zr,string:function(a){return t.matrix==="Array"?[a.length]:i([a.length])},"number | Complex | BigNumber | Unit | boolean | null":function(a){return t.matrix==="Array"?[]:i?i([]):Os()}})}),ln="transpose",$s=["typed","matrix"],qs=X(ln,$s,r=>{var{typed:e,matrix:t}=r;return e(ln,{Array:f=>i(t(f)).valueOf(),Matrix:i,any:Fr});function i(f){var l=f.size(),h;switch(l.length){case 1:h=f.clone();break;case 2:{var p=l[0],o=l[1];if(o===0)throw new RangeError("Cannot transpose a 2D matrix with no columns (size: "+Mr(l)+")");switch(f.storage()){case"dense":h=n(f,p,o);break;case"sparse":h=a(f,p,o);break}}break;default:throw new RangeError("Matrix must be a vector or two dimensional (size: "+Mr(l)+")")}return h}function n(f,l,h){for(var p=f._data,o=[],u,s=0;s<h;s++){u=o[s]=[];for(var c=0;c<l;c++)u[c]=Fr(p[c][s])}return f.createDenseMatrix({data:o,size:[h,l],datatype:f._datatype})}function a(f,l,h){for(var p=f._values,o=f._index,u=f._ptr,s=p?[]:void 0,c=[],d=[],v=[],g=0;g<l;g++)v[g]=0;var m,A,w;for(m=0,A=o.length;m<A;m++)v[o[m]]++;for(var F=0,y=0;y<l;y++)d.push(F),F+=v[y],v[y]=d[y];for(d.push(F),w=0;w<h;w++)for(var D=u[w],_=u[w+1],B=D;B<_;B++){var E=v[o[B]]++;c[E]=w,p&&(s[E]=Fr(p[B]))}return f.createSparseMatrix({values:s,index:c,ptr:d,size:[h,l],datatype:f._datatype})}}),Rs="numeric",Ls=["number","?bignumber","?fraction"],Us=X(Rs,Ls,r=>{var{number:e,bignumber:t,fraction:i}=r,n={string:!0,number:!0,BigNumber:!0,Fraction:!0},a={number:f=>e(f),BigNumber:t?f=>t(f):Ts,bigint:f=>BigInt(f),Fraction:i?f=>i(f):zs};return function(l){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"number",p=arguments.length>2?arguments[2]:void 0;if(p!==void 0)throw new SyntaxError("numeric() takes one or two arguments");var o=Ae(l);if(!(o in n))throw new TypeError("Cannot convert "+l+' of type "'+o+'"; valid input types are '+Object.keys(n).join(", "));if(!(h in a))throw new TypeError("Cannot convert "+l+' to type "'+h+'"; valid output types are '+Object.keys(a).join(", "));return h===o?l:a[h](l)}}),vn="divideScalar",Zs=["typed","numeric"],Vs=X(vn,Zs,r=>{var{typed:e,numeric:t}=r;return e(vn,{"number, number":function(n,a){return n/a},"Complex, Complex":function(n,a){return n.div(a)},"BigNumber, BigNumber":function(n,a){return n.div(a)},"bigint, bigint":function(n,a){return n/a},"Fraction, Fraction":function(n,a){return n.div(a)},"Unit, number | Complex | Fraction | BigNumber | Unit":(i,n)=>i.divide(n),"number | Fraction | Complex | BigNumber, Unit":(i,n)=>n.divideInto(i)})});function xt(r){var{DenseMatrix:e}=r;return function(i,n,a){var f=i.size();if(f.length!==2)throw new RangeError("Matrix must be two dimensional (size: "+Mr(f)+")");var l=f[0],h=f[1];if(l!==h)throw new RangeError("Matrix must be square (size: "+Mr(f)+")");var p=[];if(xr(n)){var o=n.size(),u=n._data;if(o.length===1){if(o[0]!==l)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var s=0;s<l;s++)p[s]=[u[s]];return new e({data:p,size:[l,1],datatype:n._datatype})}if(o.length===2){if(o[0]!==l||o[1]!==1)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");if(Bn(n)){if(a){p=[];for(var c=0;c<l;c++)p[c]=[u[c][0]];return new e({data:p,size:[l,1],datatype:n._datatype})}return n}if(Sn(n)){for(var d=0;d<l;d++)p[d]=[0];for(var v=n._values,g=n._index,m=n._ptr,A=m[1],w=m[0];w<A;w++){var F=g[w];p[F][0]=v[w]}return new e({data:p,size:[l,1],datatype:n._datatype})}}throw new RangeError("Dimension mismatch. The right side has to be either 1- or 2-dimensional vector.")}if(wr(n)){var y=Zr(n);if(y.length===1){if(y[0]!==l)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var D=0;D<l;D++)p[D]=[n[D]];return new e({data:p,size:[l,1]})}if(y.length===2){if(y[0]!==l||y[1]!==1)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var _=0;_<l;_++)p[_]=[n[_][0]];return new e({data:p,size:[l,1]})}throw new RangeError("Dimension mismatch. The right side has to be either 1- or 2-dimensional vector.")}}}var hn="lsolve",Hs=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],Js=X(hn,Hs,r=>{var{typed:e,matrix:t,divideScalar:i,multiplyScalar:n,subtractScalar:a,equalScalar:f,DenseMatrix:l}=r,h=xt({DenseMatrix:l});return e(hn,{"SparseMatrix, Array | Matrix":function(s,c){return o(s,c)},"DenseMatrix, Array | Matrix":function(s,c){return p(s,c)},"Array, Array | Matrix":function(s,c){var d=t(s),v=p(d,c);return v.valueOf()}});function p(u,s){s=h(u,s,!0);for(var c=s._data,d=u._size[0],v=u._size[1],g=[],m=u._data,A=0;A<v;A++){var w=c[A][0]||0,F=void 0;if(f(w,0))F=0;else{var y=m[A][A];if(f(y,0))throw new Error("Linear system cannot be solved since matrix is singular");F=i(w,y);for(var D=A+1;D<d;D++)c[D]=[a(c[D][0]||0,n(F,m[D][A]))]}g[A]=[F]}return new l({data:g,size:[d,1]})}function o(u,s){s=h(u,s,!0);for(var c=s._data,d=u._size[0],v=u._size[1],g=u._values,m=u._index,A=u._ptr,w=[],F=0;F<v;F++){var y=c[F][0]||0;if(f(y,0))w[F]=[0];else{for(var D=0,_=[],B=[],E=A[F],S=A[F+1],x=E;x<S;x++){var z=m[x];z===F?D=g[x]:z>F&&(_.push(g[x]),B.push(z))}if(f(D,0))throw new Error("Linear system cannot be solved since matrix is singular");for(var L=i(y,D),I=0,O=B.length;I<O;I++){var b=B[I];c[b]=[a(c[b][0]||0,n(L,_[I]))]}w[F]=[L]}}return new l({data:w,size:[d,1]})}}),pn="usolve",Gs=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],Ys=X(pn,Gs,r=>{var{typed:e,matrix:t,divideScalar:i,multiplyScalar:n,subtractScalar:a,equalScalar:f,DenseMatrix:l}=r,h=xt({DenseMatrix:l});return e(pn,{"SparseMatrix, Array | Matrix":function(s,c){return o(s,c)},"DenseMatrix, Array | Matrix":function(s,c){return p(s,c)},"Array, Array | Matrix":function(s,c){var d=t(s),v=p(d,c);return v.valueOf()}});function p(u,s){s=h(u,s,!0);for(var c=s._data,d=u._size[0],v=u._size[1],g=[],m=u._data,A=v-1;A>=0;A--){var w=c[A][0]||0,F=void 0;if(f(w,0))F=0;else{var y=m[A][A];if(f(y,0))throw new Error("Linear system cannot be solved since matrix is singular");F=i(w,y);for(var D=A-1;D>=0;D--)c[D]=[a(c[D][0]||0,n(F,m[D][A]))]}g[A]=[F]}return new l({data:g,size:[d,1]})}function o(u,s){s=h(u,s,!0);for(var c=s._data,d=u._size[0],v=u._size[1],g=u._values,m=u._index,A=u._ptr,w=[],F=v-1;F>=0;F--){var y=c[F][0]||0;if(f(y,0))w[F]=[0];else{for(var D=0,_=[],B=[],E=A[F],S=A[F+1],x=S-1;x>=E;x--){var z=m[x];z===F?D=g[x]:z<F&&(_.push(g[x]),B.push(z))}if(f(D,0))throw new Error("Linear system cannot be solved since matrix is singular");for(var L=i(y,D),I=0,O=B.length;I<O;I++){var b=B[I];c[b]=[a(c[b][0],n(L,_[I]))]}w[F]=[L]}}return new l({data:w,size:[d,1]})}}),Ke="smaller",Ks=["typed","config","matrix","DenseMatrix","concat"],Xs=X(Ke,Ks,r=>{var{typed:e,config:t,matrix:i,DenseMatrix:n,concat:a}=r,f=ut({typed:e}),l=Mt({typed:e,DenseMatrix:n}),h=it({typed:e,DenseMatrix:n}),p=be({typed:e,matrix:i,concat:a}),o=nt({typed:e});return e(Ke,Qs({typed:e,config:t}),{"boolean, boolean":(u,s)=>u<s,"BigNumber, BigNumber":function(s,c){return s.lt(c)&&!tt(s,c,t.relTol,t.absTol)},"bigint, bigint":(u,s)=>u<s,"Fraction, Fraction":(u,s)=>u.compare(s)===-1,"Complex, Complex":function(s,c){throw new TypeError("No ordering relation is defined for complex numbers")}},o,p({SS:l,DS:f,Ss:h}))}),Qs=X(Ke,["typed","config"],r=>{var{typed:e,config:t}=r;return e(Ke,{"number, number":function(n,a){return n<a&&!De(n,a,t.relTol,t.absTol)}})}),Xe="larger",Ws=["typed","config","matrix","DenseMatrix","concat"],ks=X(Xe,Ws,r=>{var{typed:e,config:t,matrix:i,DenseMatrix:n,concat:a}=r,f=ut({typed:e}),l=Mt({typed:e,DenseMatrix:n}),h=it({typed:e,DenseMatrix:n}),p=be({typed:e,matrix:i,concat:a}),o=nt({typed:e});return e(Xe,js({typed:e,config:t}),{"boolean, boolean":(u,s)=>u>s,"BigNumber, BigNumber":function(s,c){return s.gt(c)&&!tt(s,c,t.relTol,t.absTol)},"bigint, bigint":(u,s)=>u>s,"Fraction, Fraction":(u,s)=>u.compare(s)===1,"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},o,p({SS:l,DS:f,Ss:h}))}),js=X(Xe,["typed","config"],r=>{var{typed:e,config:t}=r;return e(Xe,{"number, number":function(n,a){return n>a&&!De(n,a,t.relTol,t.absTol)}})}),Qe="largerEq",rf=["typed","config","matrix","DenseMatrix","concat"],ef=X(Qe,rf,r=>{var{typed:e,config:t,matrix:i,DenseMatrix:n,concat:a}=r,f=ut({typed:e}),l=Mt({typed:e,DenseMatrix:n}),h=it({typed:e,DenseMatrix:n}),p=be({typed:e,matrix:i,concat:a}),o=nt({typed:e});return e(Qe,tf({typed:e,config:t}),{"boolean, boolean":(u,s)=>u>=s,"BigNumber, BigNumber":function(s,c){return s.gte(c)||tt(s,c,t.relTol,t.absTol)},"bigint, bigint":function(s,c){return s>=c},"Fraction, Fraction":(u,s)=>u.compare(s)!==-1,"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},o,p({SS:l,DS:f,Ss:h}))}),tf=X(Qe,["typed","config"],r=>{var{typed:e,config:t}=r;return e(Qe,{"number, number":function(n,a){return n>=a||De(n,a,t.relTol,t.absTol)}})}),nf="FibonacciHeap",uf=["smaller","larger"],af=X(nf,uf,r=>{var{smaller:e,larger:t}=r,i=1/Math.log((1+Math.sqrt(5))/2);function n(){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");this._minimum=null,this._size=0}n.prototype.type="FibonacciHeap",n.prototype.isFibonacciHeap=!0,n.prototype.insert=function(o,u){var s={key:o,value:u,degree:0};if(this._minimum){var c=this._minimum;s.left=c,s.right=c.right,c.right=s,s.right.left=s,e(o,c.key)&&(this._minimum=s)}else s.left=s,s.right=s,this._minimum=s;return this._size++,s},n.prototype.size=function(){return this._size},n.prototype.clear=function(){this._minimum=null,this._size=0},n.prototype.isEmpty=function(){return this._size===0},n.prototype.extractMinimum=function(){var o=this._minimum;if(o===null)return o;for(var u=this._minimum,s=o.degree,c=o.child;s>0;){var d=c.right;c.left.right=c.right,c.right.left=c.left,c.left=u,c.right=u.right,u.right=c,c.right.left=c,c.parent=null,c=d,s--}return o.left.right=o.right,o.right.left=o.left,o===o.right?u=null:(u=o.right,u=p(u,this._size)),this._size--,this._minimum=u,o},n.prototype.remove=function(o){this._minimum=a(this._minimum,o,-1),this.extractMinimum()};function a(o,u,s){u.key=s;var c=u.parent;return c&&e(u.key,c.key)&&(f(o,u,c),l(o,c)),e(u.key,o.key)&&(o=u),o}function f(o,u,s){u.left.right=u.right,u.right.left=u.left,s.degree--,s.child===u&&(s.child=u.right),s.degree===0&&(s.child=null),u.left=o,u.right=o.right,o.right=u,u.right.left=u,u.parent=null,u.mark=!1}function l(o,u){var s=u.parent;s&&(u.mark?(f(o,u,s),l(s)):u.mark=!0)}var h=function(u,s){u.left.right=u.right,u.right.left=u.left,u.parent=s,s.child?(u.left=s.child,u.right=s.child.right,s.child.right=u,u.right.left=u):(s.child=u,u.right=u,u.left=u),s.degree++,u.mark=!1};function p(o,u){var s=Math.floor(Math.log(u)*i)+1,c=new Array(s),d=0,v=o;if(v)for(d++,v=v.right;v!==o;)d++,v=v.right;for(var g;d>0;){for(var m=v.degree,A=v.right;g=c[m],!!g;){if(t(v.key,g.key)){var w=g;g=v,v=w}h(g,v),c[m]=null,m++}c[m]=v,v=A,d--}o=null;for(var F=0;F<s;F++)g=c[F],g&&(o?(g.left.right=g.right,g.right.left=g.left,g.left=o,g.right=o.right,o.right=g,g.right.left=g,e(g.key,o.key)&&(o=g)):o=g);return o}return n},{isClass:!0}),of="Spa",sf=["addScalar","equalScalar","FibonacciHeap"],ff=X(of,sf,r=>{var{addScalar:e,equalScalar:t,FibonacciHeap:i}=r;function n(){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");this._values=[],this._heap=new i}return n.prototype.type="Spa",n.prototype.isSpa=!0,n.prototype.set=function(a,f){if(this._values[a])this._values[a].value=f;else{var l=this._heap.insert(a,f);this._values[a]=l}},n.prototype.get=function(a){var f=this._values[a];return f?f.value:0},n.prototype.accumulate=function(a,f){var l=this._values[a];l?l.value=e(l.value,f):(l=this._heap.insert(a,f),this._values[a]=l)},n.prototype.forEach=function(a,f,l){var h=this._heap,p=this._values,o=[],u=h.extractMinimum();for(u&&o.push(u);u&&u.key<=f;)u.key>=a&&(t(u.value,0)||l(u.key,u.value,this)),u=h.extractMinimum(),u&&o.push(u);for(var s=0;s<o.length;s++){var c=o[s];u=h.insert(c.key,c.value),p[u.key]=u}},n.prototype.swap=function(a,f){var l=this._values[a],h=this._values[f];if(!l&&h)l=this._heap.insert(a,h.value),this._heap.remove(h),this._values[a]=l,this._values[f]=void 0;else if(l&&!h)h=this._heap.insert(f,l.value),this._heap.remove(l),this._values[f]=h,this._values[a]=void 0;else if(l&&h){var p=l.value;l.value=h.value,h.value=p}},n},{isClass:!0}),Dn="add",cf=["typed","matrix","addScalar","equalScalar","DenseMatrix","SparseMatrix","concat"],lf=X(Dn,cf,r=>{var{typed:e,matrix:t,addScalar:i,equalScalar:n,DenseMatrix:a,SparseMatrix:f,concat:l}=r,h=ci({typed:e}),p=ds({typed:e,equalScalar:n}),o=li({typed:e,DenseMatrix:a}),u=be({typed:e,matrix:t,concat:l});return e(Dn,{"any, any":i,"any, any, ...any":e.referToSelf(s=>(c,d,v)=>{for(var g=s(c,d),m=0;m<v.length;m++)g=s(g,v[m]);return g})},u({elop:i,DS:h,SS:p,Ss:o}))}),dn="dot",vf=["typed","addScalar","multiplyScalar","conj","size"],hf=X(dn,vf,r=>{var{typed:e,addScalar:t,multiplyScalar:i,conj:n,size:a}=r;return e(dn,{"Array | DenseMatrix, Array | DenseMatrix":l,"SparseMatrix, SparseMatrix":h});function f(o,u){var s=p(o),c=p(u),d,v;if(s.length===1)d=s[0];else if(s.length===2&&s[1]===1)d=s[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+s.join(", ")+")");if(c.length===1)v=c[0];else if(c.length===2&&c[1]===1)v=c[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+c.join(", ")+")");if(d!==v)throw new RangeError("Vectors must have equal length ("+d+" != "+v+")");if(d===0)throw new RangeError("Cannot calculate the dot product of empty vectors");return d}function l(o,u){var s=f(o,u),c=xr(o)?o._data:o,d=xr(o)?o._datatype||o.getDataType():void 0,v=xr(u)?u._data:u,g=xr(u)?u._datatype||u.getDataType():void 0,m=p(o).length===2,A=p(u).length===2,w=t,F=i;if(d&&g&&d===g&&typeof d=="string"&&d!=="mixed"){var y=d;w=e.find(t,[y,y]),F=e.find(i,[y,y])}if(!m&&!A){for(var D=F(n(c[0]),v[0]),_=1;_<s;_++)D=w(D,F(n(c[_]),v[_]));return D}if(!m&&A){for(var B=F(n(c[0]),v[0][0]),E=1;E<s;E++)B=w(B,F(n(c[E]),v[E][0]));return B}if(m&&!A){for(var S=F(n(c[0][0]),v[0]),x=1;x<s;x++)S=w(S,F(n(c[x][0]),v[x]));return S}if(m&&A){for(var z=F(n(c[0][0]),v[0][0]),L=1;L<s;L++)z=w(z,F(n(c[L][0]),v[L][0]));return z}}function h(o,u){f(o,u);for(var s=o._index,c=o._values,d=u._index,v=u._values,g=0,m=t,A=i,w=0,F=0;w<s.length&&F<d.length;){var y=s[w],D=d[F];if(y<D){w++;continue}if(y>D){F++;continue}y===D&&(g=m(g,A(c[w],v[F])),w++,F++)}return g}function p(o){return xr(o)?o.size():a(o)}}),mn="lup",pf=["typed","matrix","abs","addScalar","divideScalar","multiplyScalar","subtractScalar","larger","equalScalar","unaryMinus","DenseMatrix","SparseMatrix","Spa"],Df=X(mn,pf,r=>{var{typed:e,matrix:t,abs:i,addScalar:n,divideScalar:a,multiplyScalar:f,subtractScalar:l,larger:h,equalScalar:p,unaryMinus:o,DenseMatrix:u,SparseMatrix:s,Spa:c}=r;return e(mn,{DenseMatrix:function(m){return d(m)},SparseMatrix:function(m){return v(m)},Array:function(m){var A=t(m),w=d(A);return{L:w.L.valueOf(),U:w.U.valueOf(),p:w.p}}});function d(g){var m=g._size[0],A=g._size[1],w=Math.min(m,A),F=Fr(g._data),y=[],D=[m,w],_=[],B=[w,A],E,S,x,z=[];for(E=0;E<m;E++)z[E]=E;for(S=0;S<A;S++){if(S>0)for(E=0;E<m;E++){var L=Math.min(E,S),I=0;for(x=0;x<L;x++)I=n(I,f(F[E][x],F[x][S]));F[E][S]=l(F[E][S],I)}var O=S,b=0,J=0;for(E=S;E<m;E++){var V=F[E][S],T=i(V);h(T,b)&&(O=E,b=T,J=V)}if(S!==O&&(z[S]=[z[O],z[O]=z[S]][0],u._swapRows(S,O,F)),S<m)for(E=S+1;E<m;E++){var H=F[E][S];p(H,0)||(F[E][S]=a(F[E][S],J))}}for(S=0;S<A;S++)for(E=0;E<m;E++){if(S===0&&(E<A&&(_[E]=[]),y[E]=[]),E<S){E<A&&(_[E][S]=F[E][S]),S<m&&(y[E][S]=0);continue}if(E===S){E<A&&(_[E][S]=F[E][S]),S<m&&(y[E][S]=1);continue}E<A&&(_[E][S]=0),S<m&&(y[E][S]=F[E][S])}var K=new u({data:y,size:D}),nr=new u({data:_,size:B}),k=[];for(E=0,w=z.length;E<w;E++)k[z[E]]=E;return{L:K,U:nr,p:k,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
P: `+this.p}}}function v(g){var m=g._size[0],A=g._size[1],w=Math.min(m,A),F=g._values,y=g._index,D=g._ptr,_=[],B=[],E=[],S=[m,w],x=[],z=[],L=[],I=[w,A],O,b,J,V=[],T=[];for(O=0;O<m;O++)V[O]=O,T[O]=O;var H=function(k,Q){var lr=T[k],ar=T[Q];V[lr]=Q,V[ar]=k,T[k]=ar,T[Q]=lr},K=function(){var k=new c;b<m&&(E.push(_.length),_.push(1),B.push(b)),L.push(x.length);var Q=D[b],lr=D[b+1];for(J=Q;J<lr;J++)O=y[J],k.set(V[O],F[J]);b>0&&k.forEach(0,b-1,function(ir,j){s._forEachRow(ir,_,B,E,function(Ar,Dr){Ar>ir&&k.accumulate(Ar,o(f(Dr,j)))})});var ar=b,tr=k.get(b),or=i(tr);k.forEach(b+1,m-1,function(ir,j){var Ar=i(j);h(Ar,or)&&(ar=ir,or=Ar,tr=j)}),b!==ar&&(s._swapRows(b,ar,S[1],_,B,E),s._swapRows(b,ar,I[1],x,z,L),k.swap(b,ar),H(b,ar)),k.forEach(0,m-1,function(ir,j){ir<=b?(x.push(j),z.push(ir)):(j=a(j,tr),p(j,0)||(_.push(j),B.push(ir)))})};for(b=0;b<A;b++)K();return L.push(x.length),E.push(_.length),{L:new s({values:_,index:B,ptr:E,size:S}),U:new s({values:x,index:z,ptr:L,size:I}),p:V,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
P: `+this.p}}}});function df(r,e,t,i){for(var n=r._values,a=r._index,f=r._ptr,l=r._size,h=r._datatype,p=l[0],o=l[1],u=i&&r._values?[]:null,s=[],c=[],d=0,v=0;v<o;v++){c[v]=d;for(var g=t?t[v]:v,m=f[g],A=f[g+1],w=m;w<A;w++){var F=e?e[a[w]]:a[w];s[d]=F,u&&(u[d]=n[w]),d++}}return c[o]=d,r.createSparseMatrix({values:u,index:s,ptr:c,size:[p,o],datatype:h})}function vi(r,e,t,i,n,a,f){var l=0;for(t[f]=r;l>=0;){var h=t[f+l],p=t[i+h];p===-1?(l--,a[e++]=h):(t[i+h]=t[n+p],++l,t[f+l]=p)}return e}function mf(r,e){if(!r)return null;var t=0,i,n=[],a=[],f=0,l=e,h=2*e;for(i=0;i<e;i++)a[f+i]=-1;for(i=e-1;i>=0;i--)r[i]!==-1&&(a[l+i]=a[f+r[i]],a[f+r[i]]=i);for(i=0;i<e;i++)r[i]===-1&&(t=vi(i,t,a,f,l,n,h));return n}function gf(r,e){if(!r)return null;var t=r._index,i=r._ptr,n=r._size,a=n[0],f=n[1],l=[],h=[],p=0,o=f,u,s;if(e)for(u=0;u<a;u++)h[o+u]=-1;for(var c=0;c<f;c++){l[c]=-1,h[p+c]=-1;for(var d=i[c],v=i[c+1],g=d;g<v;g++){var m=t[g];for(u=e?h[o+m]:m;u!==-1&&u<c;u=s)s=h[p+u],h[p+u]=c,s===-1&&(l[u]=c);e&&(h[o+m]=c)}}return l}function wf(r,e,t){for(var i=r._values,n=r._index,a=r._ptr,f=r._size,l=f[1],h=0,p=0;p<l;p++){var o=a[p];for(a[p]=h;o<a[p+1];o++)e(n[o],p,i?i[o]:1,t)&&(n[h]=n[o],i&&(i[h]=i[o]),h++)}return a[l]=h,n.splice(h,n.length-h),i&&i.splice(h,i.length-h),h}function oe(r){return-r-2}var yf="csAmd",Af=["add","multiply","transpose"],Ff=X(yf,Af,r=>{var{add:e,multiply:t,transpose:i}=r;return function(o,u){if(!u||o<=0||o>3)return null;var s=u._size,c=s[0],d=s[1],v=0,g=Math.max(16,10*Math.sqrt(d));g=Math.min(d-2,g);var m=n(o,u,c,d,g);wf(m,h,null);for(var A=m._index,w=m._ptr,F=w[d],y=[],D=[],_=0,B=d+1,E=2*(d+1),S=3*(d+1),x=4*(d+1),z=5*(d+1),L=6*(d+1),I=7*(d+1),O=y,b=a(d,w,D,_,S,O,E,I,B,L,x,z),J=f(d,w,D,z,x,L,g,B,S,O,E),V=0,T,H,K,nr,k,Q,lr,ar,tr,or,ir,j,Ar,Dr,ur,fr;J<d;){for(K=-1;V<d&&(K=D[S+V])===-1;V++);D[E+K]!==-1&&(O[D[E+K]]=-1),D[S+V]=D[E+K];var Cr=D[x+K],$r=D[B+K];J+=$r;var zr=0;D[B+K]=-$r;var sr=w[K],Or=Cr===0?sr:F,Jr=Or;for(nr=1;nr<=Cr+1;nr++){for(nr>Cr?(Q=K,lr=sr,ar=D[_+K]-Cr):(Q=A[sr++],lr=w[Q],ar=D[_+Q]),k=1;k<=ar;k++)T=A[lr++],!((tr=D[B+T])<=0)&&(zr+=tr,D[B+T]=-tr,A[Jr++]=T,D[E+T]!==-1&&(O[D[E+T]]=O[T]),O[T]!==-1?D[E+O[T]]=D[E+T]:D[S+D[z+T]]=D[E+T]);Q!==K&&(w[Q]=oe(K),D[L+Q]=0)}for(Cr!==0&&(F=Jr),D[z+K]=zr,w[K]=Or,D[_+K]=Jr-Or,D[x+K]=-2,b=l(b,v,D,L,d),or=Or;or<Jr;or++)if(T=A[or],!((ir=D[x+T])<=0)){tr=-D[B+T];var ft=b-tr;for(sr=w[T],j=w[T]+ir-1;sr<=j;sr++)Q=A[sr],D[L+Q]>=b?D[L+Q]-=tr:D[L+Q]!==0&&(D[L+Q]=D[z+Q]+ft)}for(or=Or;or<Jr;or++){for(T=A[or],j=w[T],Ar=j+D[x+T]-1,Dr=j,ur=0,fr=0,sr=j;sr<=Ar;sr++)if(Q=A[sr],D[L+Q]!==0){var _e=D[L+Q]-b;_e>0?(fr+=_e,A[Dr++]=Q,ur+=Q):(w[Q]=oe(K),D[L+Q]=0)}D[x+T]=Dr-j+1;var C=Dr,M=j+D[_+T];for(sr=Ar+1;sr<M;sr++){H=A[sr];var N=D[B+H];N<=0||(fr+=N,A[Dr++]=H,ur+=H)}fr===0?(w[T]=oe(K),tr=-D[B+T],zr-=tr,$r+=tr,J+=tr,D[B+T]=0,D[x+T]=-1):(D[z+T]=Math.min(D[z+T],fr),A[Dr]=A[C],A[C]=A[j],A[j]=K,D[_+T]=Dr-j+1,ur=(ur<0?-ur:ur)%d,D[E+T]=D[I+ur],D[I+ur]=T,O[T]=ur)}for(D[z+K]=zr,v=Math.max(v,zr),b=l(b+v,v,D,L,d),or=Or;or<Jr;or++)if(T=A[or],!(D[B+T]>=0))for(ur=O[T],T=D[I+ur],D[I+ur]=-1;T!==-1&&D[E+T]!==-1;T=D[E+T],b++){for(ar=D[_+T],ir=D[x+T],sr=w[T]+1;sr<=w[T]+ar-1;sr++)D[L+A[sr]]=b;var P=T;for(H=D[E+T];H!==-1;){var R=D[_+H]===ar&&D[x+H]===ir;for(sr=w[H]+1;R&&sr<=w[H]+ar-1;sr++)D[L+A[sr]]!==b&&(R=0);R?(w[H]=oe(T),D[B+T]+=D[B+H],D[B+H]=0,D[x+H]=-1,H=D[E+H],D[E+P]=H):(P=H,H=D[E+H])}}for(sr=Or,or=Or;or<Jr;or++)T=A[or],!((tr=-D[B+T])<=0)&&(D[B+T]=tr,fr=D[z+T]+zr-tr,fr=Math.min(fr,d-J-tr),D[S+fr]!==-1&&(O[D[S+fr]]=T),D[E+T]=D[S+fr],O[T]=-1,D[S+fr]=T,V=Math.min(V,fr),D[z+T]=fr,A[sr++]=T);D[B+K]=$r,(D[_+K]=sr-Or)===0&&(w[K]=-1,D[L+K]=0),Cr!==0&&(F=sr)}for(T=0;T<d;T++)w[T]=oe(w[T]);for(H=0;H<=d;H++)D[S+H]=-1;for(H=d;H>=0;H--)D[B+H]>0||(D[E+H]=D[S+w[H]],D[S+w[H]]=H);for(Q=d;Q>=0;Q--)D[B+Q]<=0||w[Q]!==-1&&(D[E+Q]=D[S+w[Q]],D[S+w[Q]]=Q);for(K=0,T=0;T<=d;T++)w[T]===-1&&(K=vi(T,K,D,S,E,y,L));return y.splice(y.length-1,1),y};function n(p,o,u,s,c){var d=i(o);if(p===1&&s===u)return e(o,d);if(p===2){for(var v=d._index,g=d._ptr,m=0,A=0;A<u;A++){var w=g[A];if(g[A]=m,!(g[A+1]-w>c))for(var F=g[A+1];w<F;w++)v[m++]=v[w]}return g[u]=m,o=i(d),t(d,o)}return t(d,o)}function a(p,o,u,s,c,d,v,g,m,A,w,F){for(var y=0;y<p;y++)u[s+y]=o[y+1]-o[y];u[s+p]=0;for(var D=0;D<=p;D++)u[c+D]=-1,d[D]=-1,u[v+D]=-1,u[g+D]=-1,u[m+D]=1,u[A+D]=1,u[w+D]=0,u[F+D]=u[s+D];var _=l(0,0,u,A,p);return u[w+p]=-2,o[p]=-1,u[A+p]=0,_}function f(p,o,u,s,c,d,v,g,m,A,w){for(var F=0,y=0;y<p;y++){var D=u[s+y];if(D===0)u[c+y]=-2,F++,o[y]=-1,u[d+y]=0;else if(D>v)u[g+y]=0,u[c+y]=-1,F++,o[y]=oe(p),u[g+p]++;else{var _=u[m+D];_!==-1&&(A[_]=y),u[w+y]=u[m+D],u[m+D]=y}}return F}function l(p,o,u,s,c){if(p<2||p+o<0){for(var d=0;d<c;d++)u[s+d]!==0&&(u[s+d]=1);p=2}return p}function h(p,o){return p!==o}});function Ef(r,e,t,i,n,a,f){var l,h,p=0,o;if(r<=e||t[i+e]<=t[n+r])return-1;t[n+r]=t[i+e];var u=t[a+r];if(t[a+r]=e,u===-1)p=1,o=r;else{for(p=2,o=u;o!==t[f+o];o=t[f+o]);for(l=u;l!==o;l=h)h=t[f+l],t[f+l]=o}return{jleaf:p,q:o}}var Cf="csCounts",_f=["transpose"],Bf=X(Cf,_f,r=>{var{transpose:e}=r;return function(t,i,n,a){if(!t||!i||!n)return null;var f=t._size,l=f[0],h=f[1],p,o,u,s,c,d,v,g=4*h+(a?h+l+1:0),m=[],A=0,w=h,F=2*h,y=3*h,D=4*h,_=5*h+1;for(u=0;u<g;u++)m[u]=-1;var B=[],E=e(t),S=E._index,x=E._ptr;for(u=0;u<h;u++)for(o=n[u],B[o]=m[y+o]===-1?1:0;o!==-1&&m[y+o]===-1;o=i[o])m[y+o]=u;if(a){for(u=0;u<h;u++)m[n[u]]=u;for(p=0;p<l;p++){for(u=h,d=x[p],v=x[p+1],c=d;c<v;c++)u=Math.min(u,m[S[c]]);m[_+p]=m[D+u],m[D+u]=p}}for(p=0;p<h;p++)m[A+p]=p;for(u=0;u<h;u++){for(o=n[u],i[o]!==-1&&B[i[o]]--,s=a?m[D+u]:o;s!==-1;s=a?m[_+s]:-1)for(c=x[s];c<x[s+1];c++){p=S[c];var z=Ef(p,o,m,y,w,F,A);z.jleaf>=1&&B[o]++,z.jleaf===2&&B[z.q]--}i[o]!==-1&&(m[A+o]=i[o])}for(o=0;o<h;o++)i[o]!==-1&&(B[i[o]]+=B[o]);return B}}),Sf="csSqr",Mf=["add","multiply","transpose"],xf=X(Sf,Mf,r=>{var{add:e,multiply:t,transpose:i}=r,n=Ff({add:e,multiply:t,transpose:i}),a=Bf({transpose:i});return function(h,p,o){var u=p._ptr,s=p._size,c=s[1],d,v={};if(v.q=n(h,p),h&&!v.q)return null;if(o){var g=h?df(p,null,v.q,0):p;v.parent=gf(g,1);var m=mf(v.parent,c);if(v.cp=a(g,v.parent,m,1),g&&v.parent&&v.cp&&f(g,v))for(v.unz=0,d=0;d<c;d++)v.unz+=v.cp[d]}else v.unz=4*u[c]+c,v.lnz=v.unz;return v};function f(l,h){var p=l._ptr,o=l._index,u=l._size,s=u[0],c=u[1];h.pinv=[],h.leftmost=[];var d=h.parent,v=h.pinv,g=h.leftmost,m=[],A=0,w=s,F=s+c,y=s+2*c,D,_,B,E,S;for(_=0;_<c;_++)m[w+_]=-1,m[F+_]=-1,m[y+_]=0;for(D=0;D<s;D++)g[D]=-1;for(_=c-1;_>=0;_--)for(E=p[_],S=p[_+1],B=E;B<S;B++)g[o[B]]=_;for(D=s-1;D>=0;D--)v[D]=-1,_=g[D],_!==-1&&(m[y+_]++===0&&(m[F+_]=D),m[A+D]=m[w+_],m[w+_]=D);for(h.lnz=0,h.m2=s,_=0;_<c;_++)if(D=m[w+_],h.lnz++,D<0&&(D=h.m2++),v[D]=_,!(--y[_]<=0)){h.lnz+=m[y+_];var x=d[_];x!==-1&&(m[y+x]===0&&(m[F+x]=m[F+_]),m[A+m[F+_]]=m[w+x],m[w+x]=m[A+D],m[y+x]+=m[y+_])}for(D=0;D<s;D++)v[D]<0&&(v[D]=_++);return!0}});function Ft(r,e){return r[e]<0}function hi(r,e){r[e]=oe(r[e])}function gn(r){return r<0?oe(r):r}function bf(r,e,t,i,n){var a=e._index,f=e._ptr,l=e._size,h=l[1],p,o,u,s=0;for(i[0]=r;s>=0;){r=i[s];var c=n?n[r]:r;Ft(f,r)||(hi(f,r),i[h+s]=c<0?0:gn(f[c]));var d=1;for(o=i[h+s],u=c<0?0:gn(f[c+1]);o<u;o++)if(p=a[o],!Ft(f,p)){i[h+s]=o,i[++s]=p,d=0;break}d&&(s--,i[--t]=r)}return t}function Nf(r,e,t,i,n){var a=r._ptr,f=r._size,l=e._index,h=e._ptr,p=f[1],o,u,s,c=p;for(u=h[t],s=h[t+1],o=u;o<s;o++){var d=l[o];Ft(a,d)||(c=bf(d,r,c,i,n))}for(o=c;o<p;o++)hi(a,i[o]);return c}var Tf="csSpsolve",zf=["divideScalar","multiply","subtract"],Of=X(Tf,zf,r=>{var{divideScalar:e,multiply:t,subtract:i}=r;return function(a,f,l,h,p,o,u){var s=a._values,c=a._index,d=a._ptr,v=a._size,g=v[1],m=f._values,A=f._index,w=f._ptr,F,y,D,_,B=Nf(a,f,l,h,o);for(F=B;F<g;F++)p[h[F]]=0;for(y=w[l],D=w[l+1],F=y;F<D;F++)p[A[F]]=m[F];for(var E=B;E<g;E++){var S=h[E],x=o?o[S]:S;if(!(x<0))for(y=d[x],D=d[x+1],p[S]=e(p[S],s[u?y:D-1]),F=u?y+1:y,_=u?D:D-1;F<_;F++){var z=c[F];p[z]=i(p[z],t(s[F],p[S]))}}return B}}),If="csLu",Pf=["abs","divideScalar","multiply","subtract","larger","largerEq","SparseMatrix"],$f=X(If,Pf,r=>{var{abs:e,divideScalar:t,multiply:i,subtract:n,larger:a,largerEq:f,SparseMatrix:l}=r,h=Of({divideScalar:t,multiply:i,subtract:n});return function(o,u,s){if(!o)return null;var c=o._size,d=c[1],v,g=100,m=100;u&&(v=u.q,g=u.lnz||g,m=u.unz||m);var A=[],w=[],F=[],y=new l({values:A,index:w,ptr:F,size:[d,d]}),D=[],_=[],B=[],E=new l({values:D,index:_,ptr:B,size:[d,d]}),S=[],x,z,L=[],I=[];for(x=0;x<d;x++)L[x]=0,S[x]=-1,F[x+1]=0;g=0,m=0;for(var O=0;O<d;O++){F[O]=g,B[O]=m;var b=v?v[O]:O,J=h(y,o,b,I,L,S,1),V=-1,T=-1;for(z=J;z<d;z++)if(x=I[z],S[x]<0){var H=e(L[x]);a(H,T)&&(T=H,V=x)}else _[m]=S[x],D[m++]=L[x];if(V===-1||T<=0)return null;S[b]<0&&f(e(L[b]),i(T,s))&&(V=b);var K=L[V];for(_[m]=O,D[m++]=K,S[V]=O,w[g]=V,A[g++]=1,z=J;z<d;z++)x=I[z],S[x]<0&&(w[g]=x,A[g++]=t(L[x],K)),L[x]=0}for(F[d]=g,B[d]=m,z=0;z<g;z++)w[z]=S[w[z]];return A.splice(g,A.length-g),w.splice(g,w.length-g),D.splice(m,D.length-m),_.splice(m,_.length-m),{L:y,U:E,pinv:S}}}),wn="slu",qf=["typed","abs","add","multiply","transpose","divideScalar","subtract","larger","largerEq","SparseMatrix"],Rf=X(wn,qf,r=>{var{typed:e,abs:t,add:i,multiply:n,transpose:a,divideScalar:f,subtract:l,larger:h,largerEq:p,SparseMatrix:o}=r,u=xf({add:i,multiply:n,transpose:a}),s=$f({abs:t,divideScalar:f,multiply:n,subtract:l,larger:h,largerEq:p,SparseMatrix:o});return e(wn,{"SparseMatrix, number, number":function(d,v,g){if(!Br(v)||v<0||v>3)throw new Error("Symbolic Ordering and Analysis order must be an integer number in the interval [0, 3]");if(g<0||g>1)throw new Error("Partial pivoting threshold must be a number from 0 to 1");var m=u(v,d,!1),A=s(d,m,g);return{L:A.L,U:A.U,p:A.pinv,q:m.q,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
p: `+this.p.toString()+(this.q?`
q: `+this.q.toString():"")+`
`}}}})});function yn(r,e){var t,i=e.length,n=[];if(r)for(t=0;t<i;t++)n[r[t]]=e[t];else for(t=0;t<i;t++)n[t]=e[t];return n}var An="lusolve",Lf=["typed","matrix","lup","slu","usolve","lsolve","DenseMatrix"],Uf=X(An,Lf,r=>{var{typed:e,matrix:t,lup:i,slu:n,usolve:a,lsolve:f,DenseMatrix:l}=r,h=xt({DenseMatrix:l});return e(An,{"Array, Array | Matrix":function(s,c){s=t(s);var d=i(s),v=o(d.L,d.U,d.p,null,c);return v.valueOf()},"DenseMatrix, Array | Matrix":function(s,c){var d=i(s);return o(d.L,d.U,d.p,null,c)},"SparseMatrix, Array | Matrix":function(s,c){var d=i(s);return o(d.L,d.U,d.p,null,c)},"SparseMatrix, Array | Matrix, number, number":function(s,c,d,v){var g=n(s,d,v);return o(g.L,g.U,g.p,g.q,c)},"Object, Array | Matrix":function(s,c){return o(s.L,s.U,s.p,s.q,c)}});function p(u){if(xr(u))return u;if(wr(u))return t(u);throw new TypeError("Invalid Matrix LU decomposition")}function o(u,s,c,d,v){u=p(u),s=p(s),c&&(v=h(u,v,!0),v._data=yn(c,v._data));var g=f(u,v),m=a(s,g);return d&&(m._data=yn(d,m._data)),m}}),pi=Xa({config:de}),Zf=ja({}),Di=to({}),bt=uo({}),re=go({Matrix:bt}),hr=ku({BigNumber:pi,Complex:Zf,DenseMatrix:re,Fraction:Di}),di=Vo({typed:hr}),Ne=Jo({typed:hr}),Vf=xs({typed:hr}),he=Eo({config:de,typed:hr}),Hf=yo({typed:hr}),Te=As({typed:hr}),Jf=No({typed:hr}),at=Bo({Matrix:bt,equalScalar:he,typed:hr}),ot=Yo({typed:hr}),Gf=Oo({BigNumber:pi,typed:hr}),mi=Uo({typed:hr}),Yf=$o({Fraction:Di,typed:hr}),Vr=Ro({DenseMatrix:re,Matrix:bt,SparseMatrix:at,typed:hr}),Kf=Us({bignumber:Gf,fraction:Yf,number:Jf}),Xf=Ps({matrix:Vr,config:de,typed:hr}),Qf=qs({matrix:Vr,typed:hr}),ze=Ns({isInteger:Hf,matrix:Vr,typed:hr}),st=Vs({numeric:Kf,typed:hr}),Wf=ef({DenseMatrix:re,concat:ze,config:de,matrix:Vr,typed:hr}),kf=Js({DenseMatrix:re,divideScalar:st,equalScalar:he,matrix:Vr,multiplyScalar:Te,subtractScalar:ot,typed:hr}),jf=Xs({DenseMatrix:re,concat:ze,config:de,matrix:Vr,typed:hr}),r0=_s({DenseMatrix:re,concat:ze,equalScalar:he,matrix:Vr,subtractScalar:ot,typed:hr,unaryMinus:mi}),e0=Ys({DenseMatrix:re,divideScalar:st,equalScalar:he,matrix:Vr,multiplyScalar:Te,subtractScalar:ot,typed:hr}),Qr=lf({DenseMatrix:re,SparseMatrix:at,addScalar:Ne,concat:ze,equalScalar:he,matrix:Vr,typed:hr}),t0=hf({addScalar:Ne,conj:Vf,multiplyScalar:Te,size:Xf,typed:hr}),Nt=ks({DenseMatrix:re,concat:ze,config:de,matrix:Vr,typed:hr}),n0=Es({addScalar:Ne,dot:t0,equalScalar:he,matrix:Vr,multiplyScalar:Te,typed:hr}),i0=Rf({SparseMatrix:at,abs:di,add:Qr,divideScalar:st,larger:Nt,largerEq:Wf,multiply:n0,subtract:r0,transpose:Qf,typed:hr}),u0=af({larger:Nt,smaller:jf}),a0=ff({FibonacciHeap:u0,addScalar:Ne,equalScalar:he}),o0=Df({DenseMatrix:re,Spa:a0,SparseMatrix:at,abs:di,addScalar:Ne,divideScalar:st,equalScalar:he,larger:Nt,matrix:Vr,multiplyScalar:Te,subtractScalar:ot,typed:hr,unaryMinus:mi}),s0=Uf({DenseMatrix:re,lsolve:kf,lup:o0,matrix:Vr,slu:i0,typed:hr,usolve:e0});class f0{constructor(e=5,t=Array(e).fill(.5*Math.PI),i=Array(e).fill(0),n=-9.8){this.n=e,this.thetas=t,this.thetaDots=i,this.g=n}A(e){let t=[];for(let i=0;i<this.n;i++){let n=[];for(let a=0;a<this.n;a++)n.push((this.n-Math.max(i,a))*Math.cos(e[i]-e[a]));t.push(n)}return t}b(e,t){let i=[];for(let n=0;n<this.n;n++){let a=0;for(let f=0;f<this.n;f++)a-=(this.n-Math.max(n,f))*Math.sin(e[n]-e[f])*t[f]**2;a-=this.g*(this.n-n)*Math.sin(e[n]),i.push(a)}return i}f(e,t){let i=this.A(e),n=this.b(e,t);return[t,s0(i,n).map(a=>a[0])]}RK4(e,t,i){let n=this.f(t,i),a=this.f(Qr(t,n[0].map(o=>.5*e*o)),Qr(i,n[1].map(o=>.5*e*o))),f=this.f(Qr(t,a[0].map(o=>.5*e*o)),Qr(i,a[1].map(o=>.5*e*o))),l=this.f(Qr(t,f[0].map(o=>1*e*o)),Qr(i,f[1].map(o=>1*e*o))),h=Qr(n[0],a[0].map(o=>2*o),f[0].map(o=>2*o),l[0]).map(o=>o*e/6),p=Qr(n[1],a[1].map(o=>2*o),f[1].map(o=>2*o),l[1]).map(o=>o*e/6);return[Qr(t,h),i=Qr(i,p)]}tick(e){let t=this.RK4(e,this.thetas,this.thetaDots);this.thetas=t[0],this.thetaDots=t[1]}get coordinates(){let e=0,t=0,i=[];for(let n=0;n<this.thetas.length;n++){let a=this.thetas[n];e+=Math.sin(a),t+=Math.cos(a),i.push({x:e,y:t})}return i}}const c0={class:"absolute flex flex-wrap gap-1 w-full p-1"},l0=Wr("div",{class:"i-la-stop"},null,-1),v0=[l0],h0={key:0,class:"i-la-play"},p0={key:1,class:"i-la-pause"},D0=Wr("div",{class:"flex-1"},null,-1),d0={class:"p-2 text-xs font-mono border-1 border-dark-100 dark-border-light-300"},m0=["width","height"],g0=["x1","x2","y2","stroke"],w0=["cx","cy"],y0=["x1","y1","x2","y2","stroke-width"],A0=["fill","cx","cy","r"],_0={__name:"Pendulums",setup(r){const e=Tt(),t=ct({w:1e3,h:1e3}),i=zt(()=>pe.pcs.length);Ki(e,f=>{t.w=f[0].contentRect.width,t.h=f[0].contentRect.height});const n=ct([]);for(let f=0;f<2;f++)n[f]=a(-f);function a(f=0){const l=ct({}),h=zt(()=>new f0(pe.pcs.length,Array(pe.pcs.length).fill(1).map((o,u)=>Math.PI+(f!=0?1:-2)*Math.PI*(1-Math.random()/(u+1))/4),Array(pe.pcs.length).fill(1).map(()=>(f!=0?-4:2)*Math.random()+.5))),p=Tt([]);return Ot(()=>ue.ticks,(o,u)=>{o<u&&(o=u+1),h.value.tick((o-u)*.0015),p.value=h.value.coordinates}),Ot(p,(o,u)=>{o.forEach((s,c)=>{var d;if(s.x*((d=u==null?void 0:u[c])==null?void 0:d.x)<0){const v=pe.full.notes[c];It(()=>{const g=ji(v);l[v]=!0,Pt(v.slice(0,-1),parseInt(v.slice(-1))-4+f,!1,1,.5),ru(g+f*12,{attack:1}),It(()=>{l[v]=!1,Pt(v.slice(0,-1),parseInt(v.slice(-1))-4+f,!0),eu(g+f*12)},120)},2)}})}),{coords:p,n:i,active:l}}return(f,l)=>(Kr(),Xr(Pe,null,[Wr("div",c0,[Wr("button",{class:"p-2 border-1 border-dark-100 dark-border-light-300",onClick:l[0]||(l[0]=h=>Lr(ue).stopped=!0)},v0),Wr("button",{class:"p-2 border-1 border-dark-100 dark-border-light-300",onClick:l[1]||(l[1]=h=>Lr(ue).playing=!Lr(ue).playing)},[Lr(ue).playing?(Kr(),Xr("div",p0)):(Kr(),Xr("div",h0))]),D0,Wr("div",d0,Xi(Lr(ue).ticks),1)]),Lr(ue).started?Qi("",!0):(Kr(),Xr("div",{key:0,class:"absolute bottom-0 top-0 left-0 right-0 flex items-center justify-center text-2xl z-100",onClick:l[2]||(l[2]=h=>Lr(ue).playing=!0)},"Press anywhere")),(Kr(),Xr("svg",{class:"select-none min-h-100svh min-w-full",id:"metronome",ref_key:"svg",ref:e,version:"1.1",baseProfile:"full",xmlns:"http://www.w3.org/2000/svg",style:{"user-select":"none","touch-action":"none"}},[Wr("rect",{width:t.w,height:t.h,stroke:"white",fill:"#2222"},null,8,m0),Wr("line",{class:"transition",x1:t.w/2,x2:t.w/2,y1:0,y2:t.h,stroke:Lr($t).note.velocity>0?Lr(qt)(Lr($t).note.pitch):"#999"},null,8,g0),Wr("circle",{cx:t.w/2,cy:t.h/10,r:8,fill:"currentColor"},null,8,w0),(Kr(!0),Xr(Pe,null,lt(n,(h,p)=>(Kr(),Xr("g",{key:h},[(Kr(!0),Xr(Pe,null,lt(h.coords,(o,u)=>(Kr(),Xr("g",{key:o},[Wr("line",{x1:u===0?t.w/2:t.w/2+h.coords[u-1].x*t.h/(i.value+1),y1:u===0?t.h/10:t.h/10-h.coords[u-1].y*t.h/(i.value+1),x2:t.w/2+o.x*t.h/(i.value+1),y2:t.h/10-o.y*t.h/(i.value+1),"stroke-width":(p*2+1)*2,stroke:"currentColor"},null,8,y0)]))),128)),(Kr(!0),Xr(Pe,null,lt(h.coords,(o,u)=>(Kr(),Xr("g",{key:o},[Wr("circle",{style:Wi([{"transform-origin":"center","transform-box":"fill-box",transition:"transform 1s ease-in-out"},{transform:`scale(${h.active[Lr(pe).full.notes[u]]?2:1})`}]),fill:Lr(qt)(Lr(tu)[Lr(pe).pcs[u]],4),cx:t.w/2+o.x*t.h/(i.value+1),cy:t.h/10-o.y*t.h/(i.value+1),r:(p+1)*10},null,12,A0)]))),128))]))),128))],512))],64))}};export{_0 as default};
