import{bd as ti,D as $e,am as ii}from"./theme.Bw6rsLYr.js";import{q as si,r as Ne,an as ai,ap as ni,u as Me,d as ut,o as ri,h as bt,x as Ge,y as He,A as ae,E as ye,I as li,C as Et,D as At,P as Ye,V as je,H as oi}from"./framework.BjEhsXnI.js";/**!
 * audioMotion-analyzer
 * High-resolution real-time graphic audio spectrum analyzer JS module
 *
 * @version 4.5.0
 * @author  Henrique Avila Vianna <hvianna@gmail.com> <https://henriquevianna.com>
 * @license AGPL-3.0-or-later
 */const hi="4.5.0",wt=Math.PI,Pe=2*wt,_t=wt/2,Ct=8.17579892,Tt="dual-combined",tt="dual-horizontal",xe="single",Re="dual-vertical",Bt="bar-index",It="bar-level",at="gradient",kt=60,Ot="click",ci="fullscreenchange",Ut="resize",di="#111",$t="",Dt="A",Ft="B",Nt="C",Mt="D",Gt="468",it="sans-serif",fi="#0f0",ui="#7f7f7f22",ze=10,Ht="create",Pt="fschange",_i="lores",gi=Ut,gt="user",mi="#000c",zt="#fff",pi="#4f4",qt="#888",vi="#555",mt="bark",Qe="linear",qe="log",pt="mel",Xt=["#a35","#c66","#e94","#ed0","#9d5","#4d8","#2cb","#0bc","#09c","#36b"],Yt=[["classic",{colorStops:["red",{color:"yellow",level:.85,pos:.6},{color:"lime",level:.475}]}],["prism",{colorStops:Xt}],["rainbow",{dir:"h",colorStops:["#817",...Xt,"#639"]}],["orangered",{bgColor:"#3e2f29",colorStops:["OrangeRed"]}],["steelblue",{bgColor:"#222c35",colorStops:["SteelBlue"]}]],Ke={alphaBars:!1,ansiBands:!1,barSpace:.1,bgAlpha:.7,channelLayout:xe,colorMode:at,fadePeaks:!1,fftSize:8192,fillAlpha:1,frequencyScale:qe,gradient:Yt[0][0],gravity:3.8,height:void 0,ledBars:!1,linearAmplitude:!1,linearBoost:1,lineWidth:0,loRes:!1,lumiBars:!1,maxDecibels:-25,maxFPS:0,maxFreq:22e3,minDecibels:-85,minFreq:20,mirror:0,mode:0,noteLabels:!1,outlineBars:!1,overlay:!1,peakFadeTime:750,peakHoldTime:500,peakLine:!1,radial:!1,radialInvert:!1,radius:.3,reflexAlpha:.15,reflexBright:1,reflexFit:!0,reflexRatio:0,roundBars:!1,showBgColor:!0,showFPS:!1,showPeaks:!0,showScaleX:!0,showScaleY:!1,smoothing:.5,spinSpeed:0,splitGradient:!1,start:!0,trueLeds:!1,useCanvas:!0,volume:1,weightingFilter:$t,width:void 0},wi=["ERR_AUDIO_CONTEXT_FAIL","Could not create audio context. Web Audio API not supported?"],Ri=["ERR_INVALID_AUDIO_CONTEXT","Provided audio context is not valid"],Li=["ERR_UNKNOWN_GRADIENT","Unknown gradient"],vt=["ERR_FREQUENCY_TOO_LOW","Frequency values must be >= 1"],yi=["ERR_INVALID_MODE","Invalid mode"],xi=["ERR_REFLEX_OUT_OF_RANGE","Reflex ratio must be >= 0 and < 1"],Si=["ERR_INVALID_AUDIO_SOURCE","Audio source must be an instance of HTMLMediaElement or AudioNode"],bi=["ERR_GRADIENT_INVALID_NAME","Gradient name must be a non-empty string"],Ei=["ERR_GRADIENT_NOT_AN_OBJECT","Gradient options must be an object"],Ai=["ERR_GRADIENT_MISSING_COLOR","Gradient colorStops must be a non-empty array"];class fe extends Error{constructor(e,i){const[s,n]=e;super(n+(i!==void 0?`: ${i}`:"")),this.name="AudioMotionError",this.code=s}}const Vt=(le,e)=>console.warn(`${le} is deprecated. Use ${e} instead.`),Wt=le=>{for(const e in le)return!1;return!0},st=(le,e,i="toLowerCase")=>e[Math.max(0,e.indexOf((""+le)[i]()))],Ci=(le,e,i,s,n)=>e+(s-e)*(n-le)/(i-le);Array.prototype.findLastIndex||(Array.prototype.findLastIndex=function(le){let e=this.length;for(;e-- >0;)if(le(this[e]))return e;return-1});class Ti{constructor(e,i={}){this._ready=!1,this._aux={},this._canvasGradients=[],this._destroyed=!1,this._energy={val:0,peak:0,hold:0},this._flg={},this._fps=0,this._gradients={},this._last=0,this._outNodes=[],this._ownContext=!1,this._selectedGrads=[],this._sources=[],e instanceof Element||(Wt(i)&&!Wt(e)&&(i=e),e=null),this._ownCanvas=!(i.canvas instanceof HTMLCanvasElement);const s=this._ownCanvas?document.createElement("canvas"):i.canvas;s.style="max-width: 100%;",this._ctx=s.getContext("2d");for(const[p,x]of Yt)this.registerGradient(p,x);this._container=e||!this._ownCanvas&&s.parentElement||document.body,this._defaultWidth=this._container.clientWidth||640,this._defaultHeight=this._container.clientHeight||270;let n;if(!(i.source&&(n=i.source.context))){if(!(n=i.audioCtx))try{n=new(window.AudioContext||window.webkitAudioContext),this._ownContext=!0}catch{throw new fe(wi)}}if(!n.createGain)throw new fe(Ri);const c=this._analyzer=[n.createAnalyser(),n.createAnalyser()],r=this._splitter=n.createChannelSplitter(2),l=this._merger=n.createChannelMerger(2);this._input=n.createGain(),this._output=n.createGain(),i.source&&this.connectInput(i.source);for(const p of[0,1])r.connect(c[p],p);l.connect(this._output),i.connectSpeakers!==!1&&this.connectOutput();for(const p of["_scaleX","_scaleR"])this[p]=document.createElement("canvas").getContext("2d");this._fsEl=i.fsElement||s;const o=()=>{this._fsTimeout||(this._fsTimeout=window.setTimeout(()=>{this._fsChanging||(this._setCanvas(gi),this._fsTimeout=0)},kt))};window.ResizeObserver&&(this._observer=new ResizeObserver(o),this._observer.observe(this._container)),this._controller=new AbortController;const m=this._controller.signal;window.addEventListener(Ut,o,{signal:m}),s.addEventListener(ci,()=>{this._fsChanging=!0,this._fsTimeout&&window.clearTimeout(this._fsTimeout),this._setCanvas(Pt),this._fsTimeout=window.setTimeout(()=>{this._fsChanging=!1,this._fsTimeout=0},kt)},{signal:m});const f=()=>{n.state=="suspended"&&n.resume(),window.removeEventListener(Ot,f)};window.addEventListener(Ot,f),document.addEventListener("visibilitychange",()=>{document.visibilityState!="hidden"&&(this._frames=0,this._time=performance.now())},{signal:m}),this._setProps(i,!0),this.useCanvas&&this._ownCanvas&&this._container.appendChild(s),this._ready=!0,this._setCanvas(Ht)}get alphaBars(){return this._alphaBars}set alphaBars(e){this._alphaBars=!!e,this._calcBars()}get ansiBands(){return this._ansiBands}set ansiBands(e){this._ansiBands=!!e,this._calcBars()}get barSpace(){return this._barSpace}set barSpace(e){this._barSpace=+e||0,this._calcBars()}get channelLayout(){return this._chLayout}set channelLayout(e){this._chLayout=st(e,[xe,tt,Re,Tt]),this._input.disconnect(),this._input.connect(this._chLayout!=xe?this._splitter:this._analyzer[0]),this._analyzer[0].disconnect(),this._outNodes.length&&this._analyzer[0].connect(this._chLayout!=xe?this._merger:this._output),this._calcBars(),this._makeGrad()}get colorMode(){return this._colorMode}set colorMode(e){this._colorMode=st(e,[at,Bt,It])}get fadePeaks(){return this._fadePeaks}set fadePeaks(e){this._fadePeaks=!!e}get fftSize(){return this._analyzer[0].fftSize}set fftSize(e){for(const s of[0,1])this._analyzer[s].fftSize=e;const i=this._analyzer[0].frequencyBinCount;this._fftData=[new Float32Array(i),new Float32Array(i)],this._calcBars()}get frequencyScale(){return this._frequencyScale}set frequencyScale(e){this._frequencyScale=st(e,[qe,mt,pt,Qe]),this._calcBars()}get gradient(){return this._selectedGrads[0]}set gradient(e){this._setGradient(e)}get gradientLeft(){return this._selectedGrads[0]}set gradientLeft(e){this._setGradient(e,0)}get gradientRight(){return this._selectedGrads[1]}set gradientRight(e){this._setGradient(e,1)}get gravity(){return this._gravity}set gravity(e){this._gravity=e>0?+e:this._gravity||Ke.gravity}get height(){return this._height}set height(e){this._height=e,this._setCanvas(gt)}get ledBars(){return this._showLeds}set ledBars(e){this._showLeds=!!e,this._calcBars()}get linearAmplitude(){return this._linearAmplitude}set linearAmplitude(e){this._linearAmplitude=!!e}get linearBoost(){return this._linearBoost}set linearBoost(e){this._linearBoost=e>=1?+e:1}get lineWidth(){return this._lineWidth}set lineWidth(e){this._lineWidth=+e||0}get loRes(){return this._loRes}set loRes(e){this._loRes=!!e,this._setCanvas(_i)}get lumiBars(){return this._lumiBars}set lumiBars(e){this._lumiBars=!!e,this._calcBars(),this._makeGrad()}get maxDecibels(){return this._analyzer[0].maxDecibels}set maxDecibels(e){for(const i of[0,1])this._analyzer[i].maxDecibels=e}get maxFPS(){return this._maxFPS}set maxFPS(e){this._maxFPS=e<0?0:+e||0}get maxFreq(){return this._maxFreq}set maxFreq(e){if(e<1)throw new fe(vt);this._maxFreq=Math.min(e,this.audioCtx.sampleRate/2),this._calcBars()}get minDecibels(){return this._analyzer[0].minDecibels}set minDecibels(e){for(const i of[0,1])this._analyzer[i].minDecibels=e}get minFreq(){return this._minFreq}set minFreq(e){if(e<1)throw new fe(vt);this._minFreq=+e,this._calcBars()}get mirror(){return this._mirror}set mirror(e){this._mirror=Math.sign(e)|0,this._calcBars(),this._makeGrad()}get mode(){return this._mode}set mode(e){const i=e|0;if(i>=0&&i<=10&&i!=9)this._mode=i,this._calcBars(),this._makeGrad();else throw new fe(yi,e)}get noteLabels(){return this._noteLabels}set noteLabels(e){this._noteLabels=!!e,this._createScales()}get outlineBars(){return this._outlineBars}set outlineBars(e){this._outlineBars=!!e,this._calcBars()}get peakFadeTime(){return this._peakFadeTime}set peakFadeTime(e){this._peakFadeTime=e>=0?+e:this._peakFadeTime||Ke.peakFadeTime}get peakHoldTime(){return this._peakHoldTime}set peakHoldTime(e){this._peakHoldTime=+e||0}get peakLine(){return this._peakLine}set peakLine(e){this._peakLine=!!e}get radial(){return this._radial}set radial(e){this._radial=!!e,this._calcBars(),this._makeGrad()}get radialInvert(){return this._radialInvert}set radialInvert(e){this._radialInvert=!!e,this._calcBars(),this._makeGrad()}get radius(){return this._radius}set radius(e){this._radius=+e||0,this._calcBars(),this._makeGrad()}get reflexRatio(){return this._reflexRatio}set reflexRatio(e){if(e=+e||0,e<0||e>=1)throw new fe(xi);this._reflexRatio=e,this._calcBars(),this._makeGrad()}get roundBars(){return this._roundBars}set roundBars(e){this._roundBars=!!e,this._calcBars()}get smoothing(){return this._analyzer[0].smoothingTimeConstant}set smoothing(e){for(const i of[0,1])this._analyzer[i].smoothingTimeConstant=e}get spinSpeed(){return this._spinSpeed}set spinSpeed(e){e=+e||0,(this._spinSpeed===void 0||e==0)&&(this._spinAngle=-_t),this._spinSpeed=e}get splitGradient(){return this._splitGradient}set splitGradient(e){this._splitGradient=!!e,this._makeGrad()}get stereo(){return Vt("stereo","channelLayout"),this._chLayout!=xe}set stereo(e){Vt("stereo","channelLayout"),this.channelLayout=e?Re:xe}get trueLeds(){return this._trueLeds}set trueLeds(e){this._trueLeds=!!e}get volume(){return this._output.gain.value}set volume(e){this._output.gain.value=e}get weightingFilter(){return this._weightingFilter}set weightingFilter(e){this._weightingFilter=st(e,[$t,Dt,Ft,Nt,Mt,Gt],"toUpperCase")}get width(){return this._width}set width(e){this._width=e,this._setCanvas(gt)}get audioCtx(){return this._input.context}get canvas(){return this._ctx.canvas}get canvasCtx(){return this._ctx}get connectedSources(){return this._sources}get connectedTo(){return this._outNodes}get fps(){return this._fps}get fsHeight(){return this._fsHeight}get fsWidth(){return this._fsWidth}get isAlphaBars(){return this._flg.isAlpha}get isBandsMode(){return this._flg.isBands}get isDestroyed(){return this._destroyed}get isFullscreen(){return this._fsEl&&(document.fullscreenElement||document.webkitFullscreenElement)===this._fsEl}get isLedBars(){return this._flg.isLeds}get isLumiBars(){return this._flg.isLumi}get isOctaveBands(){return this._flg.isOctaves}get isOn(){return!!this._runId}get isOutlineBars(){return this._flg.isOutline}get pixelRatio(){return this._pixelRatio}get isRoundBars(){return this._flg.isRound}static get version(){return hi}connectInput(e){const i=e instanceof HTMLMediaElement;if(!(i||e.connect))throw new fe(Si);const s=i?this.audioCtx.createMediaElementSource(e):e;return this._sources.includes(s)||(s.connect(this._input),this._sources.push(s)),s}connectOutput(e=this.audioCtx.destination){if(!this._outNodes.includes(e)&&(this._output.connect(e),this._outNodes.push(e),this._outNodes.length==1))for(const i of[0,1])this._analyzer[i].connect(this._chLayout==xe&&!i?this._output:this._merger,0,i)}destroy(){if(!this._ready)return;const{audioCtx:e,canvas:i,_controller:s,_input:n,_merger:c,_observer:r,_ownCanvas:l,_ownContext:o,_splitter:m}=this;this._destroyed=!0,this._ready=!1,this.stop(),s.abort(),r&&r.disconnect(),this.onCanvasResize=null,this.onCanvasDraw=null,this._fsEl=null,this.disconnectInput(),this.disconnectOutput(),n.disconnect(),m.disconnect(),c.disconnect(),o&&e.close(),l&&i.remove(),this._calcBars()}disconnectInput(e,i){e?Array.isArray(e)||(e=[e]):e=Array.from(this._sources);for(const s of e){const n=this._sources.indexOf(s);if(i&&s.mediaStream)for(const c of s.mediaStream.getAudioTracks())c.stop();n>=0&&(s.disconnect(this._input),this._sources.splice(n,1))}}disconnectOutput(e){if(!(e&&!this._outNodes.includes(e))&&(this._output.disconnect(e),this._outNodes=e?this._outNodes.filter(i=>i!==e):[],this._outNodes.length==0))for(const i of[0,1])this._analyzer[i].disconnect()}getBars(){return Array.from(this._bars,({posX:e,freq:i,freqLo:s,freqHi:n,hold:c,peak:r,value:l})=>({posX:e,freq:i,freqLo:s,freqHi:n,hold:c,peak:r,value:l}))}getEnergy(e,i){if(e===void 0)return this._energy.val;if(e!=+e){if(e=="peak")return this._energy.peak;const l={bass:[20,250],lowMid:[250,500],mid:[500,2e3],highMid:[2e3,4e3],treble:[4e3,16e3]};if(!l[e])return null;[e,i]=l[e]}const s=this._freqToBin(e),n=i?this._freqToBin(i):s,c=this._chLayout==xe?1:2;let r=0;for(let l=0;l<c;l++)for(let o=s;o<=n;o++)r+=this._normalizedB(this._fftData[l][o]);return r/(n-s+1)/c}getOptions(e){Array.isArray(e)||(e=[e]);let i={};for(const s of Object.keys(Ke))e.includes(s)||(s=="gradient"&&this.gradientLeft!=this.gradientRight?(i.gradientLeft=this.gradientLeft,i.gradientRight=this.gradientRight):s!="start"&&(i[s]=this[s]));return i}registerGradient(e,i){if(typeof e!="string"||e.trim().length==0)throw new fe(bi);if(typeof i!="object")throw new fe(Ei);const{colorStops:s}=i;if(!Array.isArray(s)||!s.length)throw new fe(Ai);const n=s.length,c=r=>+r!=r||r<0||r>1;s.forEach((r,l)=>{const o=l/Math.max(1,n-1);typeof r!="object"?s[l]={pos:o,color:r}:c(r.pos)&&(r.pos=o),c(r.level)&&(s[l].level=1-l/n)}),s.sort((r,l)=>r.level<l.level?1:r.level>l.level?-1:0),s[0].level=1,this._gradients[e]={bgColor:i.bgColor||di,dir:i.dir,colorStops:s},this._selectedGrads.includes(e)&&this._makeGrad()}setCanvasSize(e,i){this._width=e,this._height=i,this._setCanvas(gt)}setFreqRange(e,i){if(e<1||i<1)throw new fe(vt);this._minFreq=Math.min(e,i),this.maxFreq=Math.max(e,i)}setLedParams(e){let i,s,n;e&&(i=e.maxLeds|0,s=+e.spaceV,n=+e.spaceH),this._ledParams=i>0&&s>0&&n>=0?[i,s,n]:void 0,this._calcBars()}setOptions(e){this._setProps(e)}setSensitivity(e,i){for(const s of[0,1])this._analyzer[s].minDecibels=Math.min(e,i),this._analyzer[s].maxDecibels=Math.max(e,i)}start(){this.toggleAnalyzer(!0)}stop(){this.toggleAnalyzer(!1)}toggleAnalyzer(e){const i=this.isOn;return e===void 0&&(e=!i),i&&!e?(cancelAnimationFrame(this._runId),this._runId=0):!i&&e&&!this._destroyed&&(this._frames=0,this._time=performance.now(),this._runId=requestAnimationFrame(s=>this._draw(s))),this.isOn}toggleFullscreen(){if(this.isFullscreen)document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen&&document.webkitExitFullscreen();else{const e=this._fsEl;if(!e)return;e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen()}}_binToFreq(e){return e*this.audioCtx.sampleRate/this.fftSize||1}_calcBars(){const e=this._bars=[];if(!this._ready){this._flg={isAlpha:!1,isBands:!1,isLeds:!1,isLumi:!1,isOctaves:!1,isOutline:!1,isRound:!1,noLedGap:!1};return}const{_ansiBands:i,_barSpace:s,canvas:n,_chLayout:c,_maxFreq:r,_minFreq:l,_mirror:o,_mode:m,_radial:f,_radialInvert:p,_reflexRatio:x}=this,A=n.width>>1,U=n.height>>1,W=c==Re&&!f,I=c==tt,C=m%10!=0,Q=C&&this._frequencyScale==qe,w=this._showLeds&&C&&!f,G=this._lumiBars&&C&&!f,oe=this._alphaBars&&!G&&m!=ze,Z=this._outlineBars&&C&&!G&&!w,g=this._roundBars&&C&&!G&&!w,K=c!=Re||x>0&&!G,k=n.height-(W&&!w?.5:0)>>W,u=k*(G||f?1:1-x)|0,t=n.width-A*(I||o!=0),H=W?n.height-k*2:0,D=A*(o==-1&&!I&&!f);let ce=Math.min(n.width,n.height)*.375*(c==Re?1:this._radius)|0,P=Math.min(A,U);p&&c!=Re&&([ce,P]=[P,ce]);const F=T=>e.push({...T,peak:[0,0],hold:[0],alpha:[0],value:[0]}),S=T=>{const N=this._freqToBin(T,"floor"),R=this._binToFreq(N),y=this._binToFreq(N+1),q=Math.log2(T/R)/Math.log2(y/R);return[N,q]};let v,$,O;if(Q){const T=(B,V,E)=>+B.toPrecision(E?Math.max(V,1+Math.log10(B)|0):V),N=B=>{const V=[1,1.12,1.25,1.4,1.6,1.8,2,2.24,2.5,2.8,3.15,3.55,4,4.5,5,5.6,6.3,7.1,8,9,10],E=Math.log10(B)|0,me=B/10**E;let _e=1;for(;_e<V.length&&me>V[_e];)_e++;return me-V[_e-1]<V[_e]-me&&_e--,(V[_e]*10**(E+5)|0)/1e5},R=[0,24,12,8,6,4,3,2,1][m],y=i?10**(3/(R*10)):2**(1/R),q=y**.5;let ie=i?7.94328235/(R%2?1:q):Ct;do{let B=ie;const V=T(B/q,4,!0),E=T(B*q,4,!0),[me,_e]=S(V),[Xe,pe]=S(E);i?B=R<4?N(B):T(B,B.toString()[0]<5?3:2):B=T(B,4,!0),B>=l&&F({posX:0,freq:B,freqLo:V,freqHi:E,binLo:me,binHi:Xe,ratioLo:_e,ratioHi:pe}),ie*=y}while(ie<=r);v=t/e.length,e.forEach((B,V)=>B.posX=D+V*v);const X=e[0],te=e[e.length-1];$=this._freqScaling(X.freqLo),O=t/(this._freqScaling(te.freqHi)-$),X.freqLo<l&&(X.freqLo=l,[X.binLo,X.ratioLo]=S(l)),te.freqHi>r&&(te.freqHi=r,[te.binHi,te.ratioHi]=S(r))}else if(C){const T=[0,24,12,8,6,4,3,2,1][m]*10,N=R=>{switch(this._frequencyScale){case mt:return 1960/(26.81/(R+.53)-1);case pt:return 700*(2**R-1);case Qe:return R}};v=t/T,$=this._freqScaling(l),O=t/(this._freqScaling(r)-$);for(let R=0,y=0;R<T;R++,y+=v){const q=N($+y/O),ie=N($+(y+v/2)/O),X=N($+(y+v)/O),[te,B]=S(q),[V,E]=S(X);F({posX:D+y,freq:ie,freqLo:q,freqHi:X,binLo:te,binHi:V,ratioLo:B,ratioHi:E})}}else{v=1,$=this._freqScaling(l),O=t/(this._freqScaling(r)-$);const T=this._freqToBin(l,"floor"),N=this._freqToBin(r);let R=-999;for(let y=T;y<=N;y++){const q=this._binToFreq(y),ie=D+Math.round(O*(this._freqScaling(q)-$));if(ie>R)F({posX:ie,freq:q,freqLo:q,freqHi:q,binLo:y,binHi:y,ratioLo:0,ratioHi:0}),R=ie;else if(e.length){const X=e[e.length-1];X.binHi=y,X.freqHi=q,X.freq=(X.freqLo*q)**.5}}}let ne=0,j=0;if(w){const T=this._pixelRatio/(window.devicePixelRatio>1&&window.screen.height<=540?2:1),N=[[],[128,3,.45],[128,4,.225],[96,6,.225],[80,6,.225],[80,6,.125],[64,6,.125],[48,8,.125],[24,16,.125]],R=this._ledParams,[y,q,ie]=R||N[m];let X,te=u;if(R){const B=2*T;let V;X=y+1;do X--,V=te/X/(1+q),j=V*q;while((V<B||j<B)&&X>1)}else{const B=540/q;j=Math.min(q*T,Math.max(2,te/B+.1|0))}K&&(te+=j),R||(X=Math.min(y,te/(j*2)|0)),ne=ie>=1?ie:v*ie,this._leds=[X,ne,j,te/X-j]}const b=Math.min(v-1,s*(s>0&&s<1?v:1));C&&(v-=Math.max(w?ne:0,b)),e.forEach((T,N)=>{let R=T.posX,y=v;C&&(s==0&&!w?(R|=0,y|=0,N>0&&R>e[N-1].posX+e[N-1].width&&(R--,y++)):R+=Math.max(w?ne:0,b)/2,T.posX=R),T.barCenter=R+(v==1?0:y/2),T.width=y});const ue=[];for(const T of[0,1]){const N=c==Re?(k+H)*T:0,R=N+k,y=N+u-(!w||K?0:j);ue.push({channelTop:N,channelBottom:R,analyzerBottom:y})}this._aux={analyzerHeight:u,analyzerWidth:t,centerX:A,centerY:U,channelCoords:ue,channelHeight:k,channelGap:H,initialX:D,innerRadius:ce,outerRadius:P,scaleMin:$,unitWidth:O},this._flg={isAlpha:oe,isBands:C,isLeds:w,isLumi:G,isOctaves:Q,isOutline:Z,isRound:g,noLedGap:K},this._createScales()}_createScales(){if(!this._ready)return;const{analyzerWidth:e,initialX:i,innerRadius:s,scaleMin:n,unitWidth:c}=this._aux,{canvas:r,_frequencyScale:l,_mirror:o,_noteLabels:m,_radial:f,_scaleX:p,_scaleR:x}=this,A=p.canvas,U=x.canvas,W=[],I=this._chLayout==tt,C=this._chLayout==Re,Q=Math.min(r.width,r.height),w=["C",,"D",,"E","F",,"G",,"A",,"B"],G=Q/34|0,oe=A.height>>1,Z=G>>1,g=oe*(m?.7:1.5),K=Z*(m?1:2),k=2**(1/12);if(!m&&(this._ansiBands||l!=qe))W.push(16,31.5,63,125,250,500,1e3,2e3,4e3),l==Qe?W.push(6e3,8e3,1e4,12e3,14e3,16e3,18e3,2e4,22e3):W.push(8e3,16e3);else{let P=Ct;for(let F=-1;F<11;F++)for(let S=0;S<12;S++){if(P>=this._minFreq&&P<=this._maxFreq){const v=w[S],$=v=="C";(v&&m&&!o&&!I||$)&&W.push(m?[P,v+($?F:"")]:P)}P*=k}}U.width=U.height=Math.max(Q*.15,(s<<1)+C*G);const u=U.width>>1,t=u-G*.7,H=(P,F)=>{const S=Pe*(P/r.width),v=S-_t,$=t*Math.cos(v),O=t*Math.sin(v);x.save(),x.translate(u+$,u+O),x.rotate(S),x.fillText(F,0,0),x.restore()};A.width|=0,p.fillStyle=x.strokeStyle=mi,p.fillRect(0,0,A.width,A.height),x.arc(u,u,u-G/2,0,Pe),x.lineWidth=G,x.stroke(),p.fillStyle=x.fillStyle=zt,p.font=`${oe}px ${it}`,x.font=`${Z}px ${it}`,p.textAlign=x.textAlign="center";let D=-g/4,ce=-K;for(const P of W){const[F,S]=Array.isArray(P)?P:[P,P<1e3?P|0:`${(P/100|0)/10}k`],v=c*(this._freqScaling(F)-n),$=A.height*.75,O=S[0]=="C",ne=oe*(m&&!o&&!I?O?1.2:.6:3);if(p.fillStyle=x.fillStyle=O&&!o&&!I?pi:zt,m){const j=l==qe,b=l==Qe;let ue=["C"];if((j||F>2e3||!b&&F>250||(!f||C)&&(!b&&F>125||F>1e3))&&ue.push("G"),(j||F>4e3||!b&&F>500||(!f||C)&&(!b&&F>250||F>2e3))&&ue.push("E"),(b&&F>4e3||(!f||C)&&(j||F>2e3||!b&&F>500))&&ue.push("D","F","A","B"),!ue.includes(S[0]))continue}v>=D+g/2&&v<=e&&(p.fillText(S,I&&o==-1?e-v:i+v,$,ne),(I||o&&(v>g||o==1))&&p.fillText(S,I&&o!=1?e+v:(i||r.width)-v,$,ne),D=v+Math.min(ne,p.measureText(S).width)/2),v>=ce+K&&v<e-K&&(H(I&&o==1?e-v:v,S),(I||o&&(v>K||o==1))&&H(I&&o!=-1?e+v:-v,S),ce=v)}}_draw(e){this._runId=requestAnimationFrame(a=>this._draw(a));const i=e-this._time,s=e-this._last,n=this._maxFPS?975/this._maxFPS:0;if(s<n)return;this._last=e-(n?s%n:0),this._frames++,i>=1e3&&(this._fps=this._frames/i*1e3,this._frames=0,this._time=e);const{isAlpha:c,isBands:r,isLeds:l,isLumi:o,isOctaves:m,isOutline:f,isRound:p,noLedGap:x}=this._flg,{analyzerHeight:A,centerX:U,centerY:W,channelCoords:I,channelHeight:C,channelGap:Q,initialX:w,innerRadius:G,outerRadius:oe}=this._aux,{_bars:Z,canvas:g,_canvasGradients:K,_chLayout:k,_colorMode:u,_ctx:t,_energy:H,_fadePeaks:D,fillAlpha:ce,_fps:P,_linearAmplitude:F,_lineWidth:S,maxDecibels:v,minDecibels:$,_mirror:O,_mode:ne,overlay:j,_radial:b,showBgColor:ue,showPeaks:T,useCanvas:N,_weightingFilter:R}=this,y=this._scaleX.canvas,q=this._scaleR.canvas,ie=P*this._peakFadeTime/1e3,X=P**2,te=this._gravity*1e3,B=P*this._peakHoldTime/1e3,V=k==Tt,E=k==tt,me=k==Re,_e=k==xe,Xe=l&&this._trueLeds&&u==at,pe=b?g.width:this._aux.analyzerWidth,nt=w+pe,Ve=T&&this._peakLine&&ne==ze,Se=b?oe-G:A,jt=Se/this._pixelRatio,[Qt,qi,We,rt]=this._leds||[];H.val>0&&P>0&&(this._spinAngle+=this._spinSpeed*Pe/60/P);const Kt=a=>{if(this._reflexRatio>0&&!o&&!b){let L,ve;this.reflexFit||me?(L=me&&a==0?C+Q:0,ve=C-A):(L=g.height-A*2,ve=A),t.save(),t.globalAlpha=this.reflexAlpha,this.reflexBright!=1&&(t.filter=`brightness(${this.reflexBright})`),t.setTransform(1,0,0,-1,0,g.height),t.drawImage(g,0,I[a].channelTop,g.width,A,0,L,g.width,ve),t.restore()}},Jt=()=>{this.showScaleX&&(b?(t.save(),t.translate(U,W),this._spinSpeed&&t.rotate(this._spinAngle+_t),t.drawImage(q,-q.width>>1,-q.width>>1),t.restore()):t.drawImage(y,0,g.height-y.height))},Zt=a=>{const L=a**2,ve=424.36,ee=11599.29,Je=25122.25,be=544496.41,Le=148693636,Te=Be=>20*Math.log10(Be);switch(R){case Dt:const Be=Le*L**2/((L+ve)*Math.sqrt((L+ee)*(L+be))*(L+Le));return 2+Te(Be);case Ft:const Ie=Le*L*a/((L+ve)*Math.sqrt(L+Je)*(L+Le));return .17+Te(Ie);case Nt:const ht=Le*L/((L+ve)*(L+Le));return .06+Te(ht);case Mt:const Ze=((103791848e-2-L)**2+108076816e-2*L)/((9837328-L)**2+11723776*L),ct=a/68966888496476e-18*Math.sqrt(Ze/((L+79919.29)*(L+1345600)));return Te(ct);case Gt:const et=-4737338981378384e-39*a**6+2043828333606125e-30*a**4-1363894795463638e-22*L+1,ke=1306612257412824e-34*a**5-2118150887518656e-26*a**3+.0005559488023498642*a,he=.0001246332637532143*a/Math.hypot(et,ke);return 18.2+Te(he)}return 0},lt=(a,L,ve)=>{t.beginPath(),t.moveTo(a,L),t.lineTo(a,ve),t.stroke()},ot=a=>{if(a&&S){const L=t.globalAlpha;t.globalAlpha=1,t.stroke(),t.globalAlpha=L}},Ce=a=>Math.max(0,(a*Qt|0)*(rt+We)-We),ei=a=>{H.val=a,H.peak>0&&(H.hold--,H.hold<0&&(H.peak+=H.hold*te/X/g.height*this._pixelRatio)),a>=H.peak&&(H.peak=a,H.hold=B)};j&&t.clearRect(0,0,g.width,g.height);let Rt=0;const Lt=Z.length,yt=_e?1:2;for(let a=0;a<yt;a++){const{channelTop:L,channelBottom:ve,analyzerBottom:ee}=I[a],Je=this._gradients[this._selectedGrads[a]],be=Je.colorStops,Le=be.length,Te=!ue||l&&!j?"#000":Je.bgColor,Be=me&&b&&a?-1:1,Ie=!a&&O==-1||a&&O==1,ht=!E||a&&O!=1?0:pe>>(a||!Ie),Ze=E&&Ie?-1:1,ct=()=>{const h=y.height,d=h>>1,_=F?100:v,z=F?0:$,Y=F?20:5,re=A/(_-z),we=O!=-1&&(!E||a==0||O==1),Ee=O!=1&&(!E||a!=O);t.save(),t.fillStyle=qt,t.font=`${d}px ${it}`,t.textAlign="right",t.lineWidth=1;for(let Ae=_;Ae>z;Ae-=Y){const De=L+(_-Ae)*re,J=Ae%2==0|0;if(J){const se=De+d*(De==L?.8:.35);we&&t.fillText(Ae,h*.85,se),Ee&&t.fillText(Ae,(E?pe:g.width)-h*.1,se),t.strokeStyle=qt,t.setLineDash([2,4]),t.lineDashOffset=0}else t.strokeStyle=vi,t.setLineDash([2,8]),t.lineDashOffset=1;t.beginPath(),t.moveTo(w+h*J*we,~~De+.5),t.lineTo(nt-h*J*Ee,~~De+.5),t.stroke()}t.restore()},et=(h,d)=>{const _=ge[h]+(h<ge.length-1?(ge[h+1]-ge[h])*d:0);return isNaN(_)?-1/0:_},ke=(h,d=Ze)=>d*Pe*((h+ht)/g.width)+this._spinAngle,he=(h,d,_)=>{const z=G+d*Be,Y=ke(h,_);return[U+z*Math.cos(Y),W+z*Math.sin(Y)]},dt=(h,d,_,z,Y)=>{t.beginPath();for(const re of O&&!E?[1,-1]:[Ze]){const[we,Ee]=p?[ke(h,re),ke(h+_,re)]:[];t.moveTo(...he(h,d,re)),t.lineTo(...he(h,d+z,re)),p?t.arc(U,W,G+(d+z)*Be,we,Ee,re!=1):t.lineTo(...he(h+_,d+z,re)),t.lineTo(...he(h+_,d,re)),p&&!Y&&t.arc(U,W,G+d*Be,Ee,we,re==1)}ot(Y),t.fill()},ft=(h=0,d=0)=>{let _;if(u==at&&!Xe||ne==ze)_=K[a];else{const z=u==Bt?d%Le:be.findLastIndex(Y=>l?Ce(h)<=Ce(Y.level):h<=Y.level);_=be[z].color}t.fillStyle=t.strokeStyle=_};if(N){if(E&&!b){const h=pe*(a+Ie),d=Ie?-1:1;t.setTransform(d,0,0,1,h,0)}if((!j||ue)&&(j&&(t.globalAlpha=this.bgAlpha),t.fillStyle=Te,(a==0||!b&&!V)&&t.fillRect(w,L-Q,pe,(j&&this.reflexAlpha==1?A:C)+Q),t.globalAlpha=1),this.showScaleY&&!o&&!b&&(a==0||!V)&&ct(),l?(t.setLineDash([rt,We]),t.lineWidth=Z[0].width):t.lineWidth=f?Math.min(S,Z[0].width/2):S,t.save(),!b){const h=new Path2D;h.rect(0,L,g.width,A),t.clip(h)}}let ge=this._fftData[a];this._analyzer[a].getFloatFrequencyData(ge),R&&(ge=ge.map((h,d)=>h+Zt(this._binToFreq(d)))),t.beginPath();let Ue=[];for(let h=0;h<Lt;h++){const d=Z[h],{posX:_,barCenter:z,width:Y,freq:re,binLo:we,binHi:Ee,ratioLo:Ae,ratioHi:De}=d;let J=Math.max(et(we,Ae),et(Ee,De));for(let M=we+1;M<Ee;M++)ge[M]>J&&(J=ge[M]);if(J=this._normalizedB(J),d.value[a]=J,Rt+=J,d.peak[a]>0&&d.alpha[a]>0&&(d.hold[a]--,d.hold[a]<0)){if(D&&!Ve){const M=!c||f&&S>0?1:c?d.peak[a]:ce;d.alpha[a]=M*(1+d.hold[a]/ie)}else d.peak[a]+=d.hold[a]*te/X/jt;d.alpha[a]<=0&&(d.peak[a]=0)}if(J>=d.peak[a]&&(d.peak[a]=J,d.hold[a]=B,d.alpha[a]=!c||f&&S>0?1:c?J:ce),!N)continue;t.globalAlpha=o||c?J:f?ce:1,ft(J,h);const se=o?Se:l?Ce(J):J*Se|0;if(ne==ze){const M=h?0:(this._normalizedB(ge[Z[1].binLo])*Se+se)/2;if(b){if(h==0&&(E&&t.moveTo(...he(0,0)),t.lineTo(...he(0,_<0?M:se))),_>=0){const de=[_,se];t.lineTo(...he(...de)),Ue.push(de)}}else{if(h==0)if(O==-1&&!E)t.moveTo(w,ee-(_<w?M:se));else{const de=we?this._normalizedB(ge[we-1])*Se:se;t.moveTo(w-S,ee-de)}(E||O!=-1||_>=w)&&t.lineTo(_,ee-se)}}else if(l){if(ue&&!j&&(a==0||!V)){const M=t.globalAlpha;t.strokeStyle=ui,t.globalAlpha=1,lt(z,L,ee),t.strokeStyle=t.fillStyle,t.globalAlpha=M}if(Xe){const M=o?0:be.findLastIndex(Oe=>Ce(J)<=Ce(Oe.level));let de=ee;for(let Oe=Le-1;Oe>=M;Oe--){t.strokeStyle=be[Oe].color;let St=ee-(Oe==M?se:Ce(be[Oe].level));lt(z,de,St),de=St-We}}else lt(z,ee,ee-se)}else if(_>=w)if(b)dt(_,0,Y,se,f);else if(p){const M=Y/2,de=ee+M;t.beginPath(),t.moveTo(_,de),t.lineTo(_,de-se),t.arc(z,de-se,M,wt,Pe),t.lineTo(_+Y,de),ot(f),t.fill()}else{const M=f?t.lineWidth:0;t.beginPath(),t.rect(_,ee+M,Y,-se-M),ot(f),t.fill()}const Fe=d.peak[a],xt=d.alpha[a];if(Fe>0&&xt>0&&T&&!Ve&&!o&&_>=w&&_<nt){if(D?t.globalAlpha=xt:f&&S>0?t.globalAlpha=1:c&&(t.globalAlpha=Fe),(u==It||Xe)&&ft(Fe),l){const M=Ce(Fe);M>=We&&t.fillRect(_,ee-M,Y,rt)}else if(!b)t.fillRect(_,ee-Fe*Se,Y,2);else if(ne!=ze){const M=Fe*Se;dt(_,M,Y,!this._radialInvert||me||M+G>=2?-2:2)}}}if(N){if(t.globalAlpha=1,ne==ze){if(ft(),b&&!E){if(O){let h;for(;h=Ue.pop();)t.lineTo(...he(...h,-1))}t.closePath()}if(S>0&&t.stroke(),ce>0){if(b){const h=E?ke(pe>>1):0,d=E?ke(pe):Pe;t.moveTo(...he(E?pe>>1:0,0)),t.arc(U,W,G,h,d,E?!Ie:!0)}else t.lineTo(nt,ee),t.lineTo(w,ee);t.globalAlpha=ce,t.fill(),t.globalAlpha=1}if((Ve||b&&T)&&(Ue=[],t.beginPath(),Z.forEach((h,d)=>{let _=h.posX,z=h.peak[a],Y=d?"lineTo":"moveTo";if(b&&_<0){const re=Z[d+1];z=Ci(_,z,re.posX,re.peak[a],0),_=0}z*=Se,Ve?(t[Y](...b?he(_,z):[_,ee-z]),b&&O&&!E&&Ue.push([_,z])):z>0&&dt(_,z,1,-2)}),Ve)){let h;for(;h=Ue.pop();)t.lineTo(...he(...h,-1));t.lineWidth=1,t.stroke()}}t.restore(),E&&!b&&t.setTransform(1,0,0,1,0,0),(!E&&!V||a)&&Kt(a)}}if(ei(Rt/(Lt<<yt-1)),N&&(O&&!b&&!E&&(t.setTransform(-1,0,0,1,g.width-w,0),t.drawImage(g,w,0,U,g.height,0,0,U,g.height),t.setTransform(1,0,0,1,0,0)),t.setLineDash([]),Jt()),this.showFPS){const a=y.height;t.font=`bold ${a}px ${it}`,t.fillStyle=fi,t.textAlign="right",t.fillText(Math.round(P),g.width-a,a*2)}this.onCanvasDraw&&(t.save(),t.fillStyle=t.strokeStyle=K[0],this.onCanvasDraw(this,{timestamp:e,canvasGradients:K}),t.restore())}_freqScaling(e){switch(this._frequencyScale){case qe:return Math.log2(e);case mt:return 26.81*e/(1960+e)-.53;case pt:return Math.log2(1+e/700);case Qe:return e}}_freqToBin(e,i="round"){const s=this._analyzer[0].frequencyBinCount-1,n=Math[i](e*this.fftSize/this.audioCtx.sampleRate);return n<s?n:s}_makeGrad(){if(!this._ready)return;const{canvas:e,_ctx:i,_radial:s,_reflexRatio:n}=this,{analyzerWidth:c,centerX:r,centerY:l,initialX:o,innerRadius:m,outerRadius:f}=this._aux,{isLumi:p}=this._flg,x=this._chLayout==Re,A=1-n,U=p?e.height:e.height*(1-n*!x)|0;for(const W of[0,1]){const I=this._gradients[this._selectedGrads[W]],C=I.colorStops,Q=I.dir=="h";let w;if(s?w=i.createRadialGradient(r,l,f,r,l,m-(f-m)*x):w=i.createLinearGradient(...Q?[o,0,o+c,0]:[0,0,0,U]),C){const G=x&&!this._splitGradient&&(!Q||s);for(let oe=0;oe<1+G;oe++){const Z=C.length-1;C.forEach((g,K)=>{let k=g.pos;if(G&&(k/=2),x&&!p&&!s&&!Q&&(k*=A,!G&&k>.5*A&&(k+=.5*n)),oe==1)if(s||p){const u=Z-K;g=C[u],k=1-g.pos/2}else K==0&&k>0&&w.addColorStop(.5,g.color),k+=.5;w.addColorStop(k,g.color),x&&K==Z&&k<.5&&w.addColorStop(.5,g.color)})}}this._canvasGradients[W]=w}}_normalizedB(e){const i=this._linearAmplitude,s=i?1/this._linearBoost:1,n=(o,m,f)=>o<=m?m:o>=f?f:o,c=o=>10**(o/20);let r=this.maxDecibels,l=this.minDecibels;return i&&(r=c(r),l=c(l),e=c(e)**s),n((e-l)/(r-l)**s,0,1)}_setCanvas(e){if(!this._ready)return;const{canvas:i,_ctx:s}=this,n=this._scaleX.canvas,c=window.devicePixelRatio/(this._loRes+1);let r=window.screen.width*c,l=window.screen.height*c;Math.abs(window.orientation)==90&&r<l&&([r,l]=[l,r]);const o=this.isFullscreen,m=o&&this._fsEl==i,f=m?r:(this._width||this._container.clientWidth||this._defaultWidth)*c|0,p=m?l:(this._height||this._container.clientHeight||this._defaultHeight)*c|0;this._pixelRatio=c,this._fsWidth=r,this._fsHeight=l,!(e!=Ht&&i.width==f&&i.height==p)&&(i.width=f,i.height=p,this.overlay||(s.fillStyle="#000",s.fillRect(0,0,f,p)),s.lineJoin="bevel",n.width=f,n.height=Math.max(20*c,Math.min(f,p)/32|0),this._calcBars(),this._makeGrad(),this._fsStatus!==void 0&&this._fsStatus!==o&&(e=Pt),this._fsStatus=o,this.onCanvasResize&&this.onCanvasResize(e,this))}_setGradient(e,i){if(!this._gradients.hasOwnProperty(e))throw new fe(Li,e);[0,1].includes(i)||(this._selectedGrads[1]=e,i=0),this._selectedGrads[i]=e,this._makeGrad()}_setProps(e,i){const s=["onCanvasDraw","onCanvasResize"],n=["gradientLeft","gradientRight","stereo"],c=Object.keys(Ke).filter(r=>r!="start").concat(s,n);(i||e===void 0)&&(e={...Ke,...e});for(const r of Object.keys(e))s.includes(r)&&typeof e[r]!="function"?this[r]=void 0:c.includes(r)&&(this[r]=e[r]);e.start!==void 0&&this.toggleAnalyzer(e.start)}}const Bi={class:"flex flex-col justify-center bg-black relative"},Ii=["width","height"],ki={class:"flex absolute top-2 left-20"},Oi={key:0,class:"i-la-play"},Di={key:1,class:"i-la-pause"},Fi={key:0,class:"i-la-arrow-left"},Ni={key:1,class:"i-la-arrow-down"},Mi={class:"absolute top-14 left-2 flex flex-col text-white items-center overscroll-none overflow-x-hidden overflow-y-scroll bg-dark-900 bg-op-20 backdrop-blur op-40 hover-op-100 transition"},Gi={class:"is-group flex flex-col gap-2"},Hi={class:"fixed overflow-clip text-white transition bottom-2 left-30 rounded-xl overflow-hidden"},Pi={class:"relative"},zi={__name:"PitchSpectrogram",setup(le){let e,i,s,n;const c=Ne(),r=Ne(),l=Ne(),{width:o,height:m}=ai();ni(c);const f=Ne(!1),p=Ne(!1),x=Ne(!1),A=Me("vertical",!1);ut([o,m],([u,t])=>{!r.value&&!i||(r.value.width=i.width=u,r.value.height=i.height=t,k())}),ri(()=>{ti(),e=r.value.getContext("2d"),i=document.createElement("canvas"),s=i.getContext("2d"),i.width=o.value,i.height=m.value,k();const u=r.value.captureStream();l.value.srcObject=u,l.value.play().then(()=>{var t,H;return(H=(t=l.value)==null?void 0:t.requestPictureInPicture)==null?void 0:H.call(t)}).catch(t=>console.error(t))});const U=$e(Me("smoothing",.5),0,.9),W=$e(Me("frame",2),1,4),I=$e(Me("speed",1),1,4),C=$e(Me("steepness",10),3,30),Q=$e(Me("midpoint",.5),0,1);ut(W,u=>n&&(n.fftSize=Math.pow(2,11+u))),ut(U,u=>n&&(n.smoothing=u));function w(){navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!1,autoGainControl:!0,noiseSuppression:!1},video:!1}).then(async u=>{n=new Ti(null,{mode:1,connectSpeakers:!1,volume:0,fftSize:8192,smoothing:U.value,useCanvas:!1,onCanvasDraw:K});const t=n.audioCtx.createMediaStreamSource(u);n.connectInput(t),x.value=!0}).catch(u=>{console.log("mic denied",u)})}const G=u=>12*(Math.log(Number(u)/440)/Math.log(2)),oe=(u,t)=>`hsl(${G(u)*30}, ${t*100}%, ${t*75}%)`,Z=u=>1/(1+Math.exp(-C.value*(u-Q.value)));let g;const K=u=>{if(!f.value){g=u.getBars(),s.drawImage(r.value,0,0,o.value,m.value);for(let t=0;t<g.length;t++)e.fillStyle=oe((g[t].freqLo+g[t].freqHi)/2,Z(g[t].value[0])),A.value?e.fillRect(t*(o.value/g.length),0,o.value/g.length,I.value):e.fillRect(o.value-I.value,m.value-(t+1)*(m.value/g.length),I.value,m.value/g.length);A.value?e.translate(0,I.value):e.translate(-I.value,0),e.drawImage(i,0,0,o.value,m.value),e.setTransform(1,0,0,1,0,0)}};function k(){e.fillStyle="#000",e.fillRect(0,0,o.value,m.value)}return bt(" ",u=>{u.preventDefault(),f.value=!f.value}),bt("Enter",u=>{u.preventDefault(),k()}),(u,t)=>{const H=ii;return Ge(),He("div",Bi,[ae("div",{class:"fullscreen-container text-white",id:"screen",ref_key:"screen",ref:c},[ae("canvas",{class:"max-w-full",id:"spectrogram",onPointerdown:t[0]||(t[0]=D=>f.value=!f.value),ref_key:"canvasElement",ref:r,width:ye(o),height:ye(m)},null,40,Ii),x.value?li("",!0):(Ge(),He("button",{key:0,class:"absolute m-auto top-0 w-full h-full",onClick:t[1]||(t[1]=D=>w())},"START"))],512),ae("div",ki,[ae("button",{class:"text-xl select-none cursor-pointer",onPointerdown:t[2]||(t[2]=D=>f.value=!f.value)},[f.value?(Ge(),He("div",Oi)):(Ge(),He("div",Di))],32),ae("button",{class:"text-xl select-none cursor-pointer",onPointerdown:t[3]||(t[3]=D=>A.value=!ye(A))},[ye(A)?(Ge(),He("div",Ni)):(Ge(),He("div",Fi))],32),ae("button",{class:"text-xl select-none cursor-pointer",onPointerdown:t[4]||(t[4]=D=>k())},t[11]||(t[11]=[ae("div",{class:"i-la-trash-alt"},null,-1)]),32)]),Et(ae("div",Mi,[ae("div",Gi,[Ye(H,{modelValue:ye(I),"onUpdate:modelValue":t[5]||(t[5]=D=>je(I)?I.value=D:null),min:1,max:5,step:1,fixed:0,param:"SPEED"},null,8,["modelValue"]),Ye(H,{modelValue:ye(W),"onUpdate:modelValue":t[6]||(t[6]=D=>je(W)?W.value=D:null),min:1,max:4,step:1,fixed:0,param:"FRAME"},null,8,["modelValue"]),Ye(H,{modelValue:ye(C),"onUpdate:modelValue":t[7]||(t[7]=D=>je(C)?C.value=D:null),min:3,max:30,step:1e-4,fixed:2,param:"CONTRAST"},null,8,["modelValue"]),Ye(H,{modelValue:ye(Q),"onUpdate:modelValue":t[8]||(t[8]=D=>je(Q)?Q.value=D:null),min:0,max:1,step:1e-4,param:"MIDPOINT",fixed:2},null,8,["modelValue"]),Ye(H,{modelValue:ye(U),"onUpdate:modelValue":t[9]||(t[9]=D=>je(U)?U.value=D:null),min:0,max:1,step:1e-4,param:"SMOOTH",fixed:2},null,8,["modelValue"])])],512),[[At,x.value]]),ae("button",{class:"absolute bottom-4 left-4 text-xl select-none cursor-pointer transition",style:oi({opacity:p.value?1:.5}),onPointerdown:t[10]||(t[10]=D=>p.value=!p.value)},t[12]||(t[12]=[ae("div",{class:"i-la-external-link-square-alt"},null,-1)]),36),Et(ae("div",Hi,[ae("div",Pi,[t[13]||(t[13]=ae("div",{class:"absolute p-2 opacity-70 touch-none select-none text-md"},"Right click here to enter Picture-In-Picture mode",-1)),ae("video",{class:"max-h-50 max-w-full",ref_key:"video",ref:l},null,512)])],512),[[At,p.value]])])}}},Wi=si(zi,[["__scopeId","data-v-60857c2b"]]);export{Wi as default};
