import{_ as B}from"./ControlStart.D2BwjSxM.js";import{aD as $,c as N}from"./theme.DSsKat3F.js";import{q as S,an as T,c as q,x as l,y as d,E as t,M as F,N as M,ac as P,I as V,A as e,F as k,B as v,H as w,G as c}from"./framework.BY0U24KH.js";const A={class:"fullscreen-container overflow-clip",id:"screen"},D=["opacity","viewBox"],E={id:"grad",x1:"0",x2:"0",y1:"0",y2:"1"},G=["stop-color"],H=["stop-color"],I=["stop-color"],X=["stop-color"],L=["width","height"],R=["x1","y1","x2","y2"],W=["transform"],j=["cy"],J=["y2"],K={style:{"user-select":"none",transition:"all 300ms ease"},fill:"gray","font-size":"20px","text-anchor":"middle",y:"40"},O=["y2"],Q=["fill","cy"],U=["y"],Y=["y"],Z=["y"],tt=["y"],et={__name:"PitchTuner",setup(ot){const{width:n,height:s}=T(),{init:C,tuner:o}=$(),_=q(()=>{var i,u;const a=b((i=o.note)==null?void 0:i.frequency);if(!a)return"#333";const y=(u=o.note)==null?void 0:u.octave;return N(a,y)});function z(){C()}function b(a){return 12*(Math.log(a/o.middleA)/Math.log(2))%12}return(a,y)=>{var i,u,m,h,x,g;const p=B;return l(),d("div",A,[t(o).running?V("",!0):(l(),F(p,{key:0,class:"absolute z-20",onClick:y[0]||(y[0]=r=>z())},{default:M(()=>[P("Start tuner")]),_:1})),(l(),d("svg",{id:"tuner",opacity:t(o).running?1:.3,version:"1.1",baseProfile:"full","font-family":"Commissioner, sans-serif","stroke-linecap":"round","dominant-baseline":"middle","text-anchor":"middle",viewBox:`0 0 ${t(n)} ${t(s)}`,xmlns:"http://www.w3.org/2000/svg"},[e("defs",null,[e("linearGradient",E,[e("stop",{"stop-color":_.value,"stop-opacity":"1",offset:"0%"},null,8,G),e("stop",{"stop-color":_.value,"stop-opacity":"1",offset:"10%"},null,8,H),e("stop",{"stop-color":_.value,"stop-opacity":"0.8",offset:"50%"},null,8,I),e("stop",{"stop-color":_.value,"stop-opacity":"0.2",offset:"100%"},null,8,X)])]),e("rect",{width:t(n),height:t(s),rx:"5",fill:"url(#grad)"},null,8,L),(l(!0),d(k,null,v(t(o).spec.slice(0,100),(r,f)=>(l(),d("line",{key:f,style:{transition:"all 200ms ease"},stroke:"currentColor","stroke-width":"2",x1:f*t(n)/100,y1:t(s),x2:f*t(n)/100,y2:t(s)-r*4},null,8,R))),128)),e("g",{class:"center",transform:`translate(${t(n)/2},0)`},[e("circle",{class:"op-20",r:"8",fill:"currentColor",cy:t(s)*.3},null,8,j),(l(),d(k,null,v(11,r=>e("g",{key:r,style:w({transform:`translateX(${t(n)/12*(r-6)}px)`})},[e("line",{stroke:"gray",opacity:"0.7","stroke-width":"2",y1:60,y2:t(s)*.3},null,8,J),e("text",K,c((r-6)*10),1)],4)),64)),e("g",{class:"meter",style:w([{"user-select":"none",transition:"all 600ms ease"},{transform:`translateX(${t(n)/100*((i=t(o).note)==null?void 0:i.cents)}px)`}])},[e("line",{stroke:"black","stroke-linecap":"round","stroke-width":"2",y1:60,y2:t(s)*.3},null,8,O),e("circle",{class:"filter brightness-120",r:"8",fill:t(o).note.color,cy:t(s)*.3},null,8,Q)],4),e("text",{style:{"user-select":"none",transition:"all 300ms ease"},fill:"currentColor","font-size":"6rem",y:t(s)*.4},c((u=t(o).note)==null?void 0:u.name),9,U),e("text",{class:"op-80",style:{"user-select":"none",transition:"all 300ms ease"},fill:"currentColor","font-size":"2rem",y:t(s)*.46},c((m=t(o).note)==null?void 0:m.octave),9,Y),e("text",{class:"font-mono op-70",style:{"user-select":"none",transition:"all 300ms ease"},fill:"currentColor","font-size":"2rem","text-anchor":"end",x:80,y:t(s)*.6},c((h=t(o).note)==null?void 0:h.frequency.toFixed(2))+" Hz",9,Z),e("text",{class:"font-mono op-50",style:{"user-select":"none",transition:"all 300ms ease"},fill:"currentColor","font-size":"2rem","text-anchor":"end",x:80,y:t(s)*.55},c(((x=t(o).note)==null?void 0:x.cents)>0?"+":"")+c((g=t(o).note)==null?void 0:g.cents)+" cents",9,tt)],8,W)],8,D))])}}},lt=S(et,[["__scopeId","data-v-e485b3b7"]]);export{lt as default};
