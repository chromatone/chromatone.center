import{_ as B}from"./ControlStart.BzlxhaiX.js";import{ag as N,aC as S,c as C}from"./theme.C1cSeBFq.js";import{_ as T,d as F,v as a,x as c,u as t,I as P,J as V,a5 as q,G as A,z as e,F as m,A as h,E as _,D as i}from"./framework.BMHKg3V0.js";const D={class:"fullscreen-container overflow-clip",id:"screen"},E=["opacity","viewBox"],G={id:"grad",x1:"0",x2:"0",y1:"0",y2:"1"},I=["stop-color"],M=["stop-color"],X=["stop-color"],H=["stop-color"],J=["width","height"],L={class:"spectrum"},R=["x1","y1","x2","y2"],W={class:"notes"},j=["fill","transform"],K=["transform"],O=["cy"],Q=["y2"],U={style:{"user-select":"none",transition:"all 300ms ease"},fill:"gray","font-size":"20px","text-anchor":"middle",y:"40"},Y=["y2"],Z=["fill","cy"],tt=["y"],et=["y"],ot=["y"],st=["y"],nt={__name:"PitchTuner",setup(rt){const{width:l,height:s}=N(),{init:$,tuner:o}=S(),y=F(()=>{var d,f;const u=b((d=o.note)==null?void 0:d.frequency);if(!u)return"#333";const n=(f=o.note)==null?void 0:f.octave;return C(u,n)});function z(){$()}function b(u){return 12*(Math.log(u/o.middleA)/Math.log(2))%12}return(u,n)=>{var d,f,g,k,v,w;const x=B;return a(),c("div",D,[t(o).running?A("",!0):(a(),P(x,{key:0,class:"absolute z-20",onClick:n[0]||(n[0]=r=>z())},{default:V(()=>n[1]||(n[1]=[q("Start tuner")])),_:1})),(a(),c("svg",{id:"tuner",opacity:t(o).running?1:.3,version:"1.1",baseProfile:"full","font-family":"Commissioner, sans-serif","stroke-linecap":"round","dominant-baseline":"middle","text-anchor":"middle",viewBox:`0 0 ${t(l)} ${t(s)}`,xmlns:"http://www.w3.org/2000/svg"},[e("defs",null,[e("linearGradient",G,[e("stop",{"stop-color":y.value,"stop-opacity":"1",offset:"0%"},null,8,I),e("stop",{"stop-color":y.value,"stop-opacity":"1",offset:"10%"},null,8,M),e("stop",{"stop-color":y.value,"stop-opacity":"0.8",offset:"50%"},null,8,X),e("stop",{"stop-color":y.value,"stop-opacity":"0.2",offset:"100%"},null,8,H)])]),e("rect",{width:t(l),height:t(s),rx:"5",fill:"url(#grad)"},null,8,J),e("g",L,[(a(!0),c(m,null,h(t(o).spec.slice(0,100),(r,p)=>(a(),c("line",{key:p,style:{transition:"all 200ms ease"},stroke:"currentColor","stroke-width":"2",x1:p*t(l)/100,y1:t(s),x2:p*t(l)/100,y2:t(s)-r*4},null,8,R))),128))]),e("g",{class:"clock",style:_({transform:`translate(${t(l)/2}px,${t(s)*.75}px)`})},[n[3]||(n[3]=e("circle",{class:"center",r:"4",fill:"currentColor"},null,-1)),e("g",W,[(a(),c(m,null,h(12,r=>e("circle",{key:r,r:"8",fill:t(C)(r,4),cy:"-100",transform:`rotate(${r*30})`},null,8,j)),64))]),e("g",{class:"transition duration-700",style:_({transform:`rotate(${(t(o).note.value+3)*30}deg)`})},[n[2]||(n[2]=e("line",{y2:"-100",stroke:"currentColor","stroke-width":"4"},null,-1)),e("line",{class:"transition duration-700",y2:"-80",stroke:"currentColor","stroke-width":"2",style:_({transform:`rotate(${t(o).note.cents*3.6}deg)`})},null,4)],4)],4),e("g",{class:"center",transform:`translate(${t(l)/2},0)`},[e("circle",{class:"op-20",r:"8",fill:"currentColor",cy:t(s)*.3},null,8,O),(a(),c(m,null,h(11,r=>e("g",{key:r,style:_({transform:`translateX(${t(l)/12*(r-6)}px)`})},[e("line",{stroke:"gray",opacity:"0.7","stroke-width":"2",y1:60,y2:t(s)*.3},null,8,Q),e("text",U,i((r-6)*10),1)],4)),64)),e("g",{class:"meter",style:_([{"user-select":"none",transition:"all 600ms ease"},{transform:`translateX(${t(l)/100*((d=t(o).note)==null?void 0:d.cents)}px)`}])},[e("line",{stroke:"black","stroke-linecap":"round","stroke-width":"2",y1:60,y2:t(s)*.3},null,8,Y),e("circle",{class:"filter brightness-120",r:"8",fill:t(o).note.color,cy:t(s)*.3},null,8,Z)],4),e("text",{style:{"user-select":"none",transition:"all 300ms ease"},fill:"currentColor","font-size":"6rem",y:t(s)*.4},i((f=t(o).note)==null?void 0:f.name)+" "+i((t(o).note.value+3)%12),9,tt),e("text",{class:"op-80",style:{"user-select":"none",transition:"all 300ms ease"},fill:"currentColor","font-size":"2rem",y:t(s)*.46},i((g=t(o).note)==null?void 0:g.octave),9,et),e("text",{class:"font-mono op-70",style:{"user-select":"none",transition:"all 300ms ease"},fill:"currentColor","font-size":"2rem","text-anchor":"end",x:80,y:t(s)*.55},i((k=t(o).note)==null?void 0:k.frequency.toFixed(2))+" Hz",9,ot),e("text",{class:"font-mono op-50",style:{"user-select":"none",transition:"all 300ms ease"},fill:"currentColor","font-size":"2rem","text-anchor":"end",x:80,y:t(s)*.5},i(((v=t(o).note)==null?void 0:v.cents)>0?"+":"")+i((w=t(o).note)==null?void 0:w.cents)+" cents",9,st)],8,K)],8,E))])}}},ct=T(nt,[["__scopeId","data-v-f579a45a"]]);export{ct as default};
