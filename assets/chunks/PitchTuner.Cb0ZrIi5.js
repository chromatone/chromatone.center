import{_ as I}from"./ControlStart.CcToJLov.js";import{aD as N,c as $}from"./theme.DBR-QhFZ.js";import{q as T,ap as q,c as F,x as l,y as a,E as t,M,N as P,af as V,I as A,A as e,F as m,B as x,H as _,G as c,K as D,L as E}from"./framework.nFF1SKKu.js";const z=f=>(D("data-v-f579a45a"),f=f(),E(),f),G={class:"fullscreen-container overflow-clip",id:"screen"},H=["opacity","viewBox"],L={id:"grad",x1:"0",x2:"0",y1:"0",y2:"1"},X=["stop-color"],K=["stop-color"],R=["stop-color"],W=["stop-color"],j=["width","height"],J={class:"spectrum"},O=["x1","y1","x2","y2"],Q=z(()=>e("circle",{class:"center",r:"4",fill:"currentColor"},null,-1)),U={class:"notes"},Y=["fill","transform"],Z=z(()=>e("line",{y2:"-100",stroke:"currentColor","stroke-width":"4"},null,-1)),tt=["transform"],et=["cy"],ot=["y2"],st={style:{"user-select":"none",transition:"all 300ms ease"},fill:"gray","font-size":"20px","text-anchor":"middle",y:"40"},nt=["y2"],rt=["fill","cy"],lt=["y"],ct=["y"],at=["y"],it=["y"],ut={__name:"PitchTuner",setup(f){const{width:r,height:s}=q(),{init:B,tuner:o}=N(),p=F(()=>{var u,d;const i=b((u=o.note)==null?void 0:u.frequency);if(!i)return"#333";const y=(d=o.note)==null?void 0:d.octave;return $(i,y)});function S(){B()}function b(i){return 12*(Math.log(i/o.middleA)/Math.log(2))%12}return(i,y)=>{var u,d,k,v,w,C;const g=I;return l(),a("div",G,[t(o).running?A("",!0):(l(),M(g,{key:0,class:"absolute z-20",onClick:y[0]||(y[0]=n=>S())},{default:P(()=>[V("Start tuner")]),_:1})),(l(),a("svg",{id:"tuner",opacity:t(o).running?1:.3,version:"1.1",baseProfile:"full","font-family":"Commissioner, sans-serif","stroke-linecap":"round","dominant-baseline":"middle","text-anchor":"middle",viewBox:`0 0 ${t(r)} ${t(s)}`,xmlns:"http://www.w3.org/2000/svg"},[e("defs",null,[e("linearGradient",L,[e("stop",{"stop-color":p.value,"stop-opacity":"1",offset:"0%"},null,8,X),e("stop",{"stop-color":p.value,"stop-opacity":"1",offset:"10%"},null,8,K),e("stop",{"stop-color":p.value,"stop-opacity":"0.8",offset:"50%"},null,8,R),e("stop",{"stop-color":p.value,"stop-opacity":"0.2",offset:"100%"},null,8,W)])]),e("rect",{width:t(r),height:t(s),rx:"5",fill:"url(#grad)"},null,8,j),e("g",J,[(l(!0),a(m,null,x(t(o).spec.slice(0,100),(n,h)=>(l(),a("line",{key:h,style:{transition:"all 200ms ease"},stroke:"currentColor","stroke-width":"2",x1:h*t(r)/100,y1:t(s),x2:h*t(r)/100,y2:t(s)-n*4},null,8,O))),128))]),e("g",{class:"clock",style:_({transform:`translate(${t(r)/2}px,${t(s)*.75}px)`})},[Q,e("g",U,[(l(),a(m,null,x(12,n=>e("circle",{key:n,r:"8",fill:t($)(n,4),cy:"-100",transform:`rotate(${n*30})`},null,8,Y)),64))]),e("g",{class:"transition duration-700",style:_({transform:`rotate(${(t(o).note.value+3)*30}deg)`})},[Z,e("line",{class:"transition duration-700",y2:"-80",stroke:"currentColor","stroke-width":"2",style:_({transform:`rotate(${t(o).note.cents*3.6}deg)`})},null,4)],4)],4),e("g",{class:"center",transform:`translate(${t(r)/2},0)`},[e("circle",{class:"op-20",r:"8",fill:"currentColor",cy:t(s)*.3},null,8,et),(l(),a(m,null,x(11,n=>e("g",{key:n,style:_({transform:`translateX(${t(r)/12*(n-6)}px)`})},[e("line",{stroke:"gray",opacity:"0.7","stroke-width":"2",y1:60,y2:t(s)*.3},null,8,ot),e("text",st,c((n-6)*10),1)],4)),64)),e("g",{class:"meter",style:_([{"user-select":"none",transition:"all 600ms ease"},{transform:`translateX(${t(r)/100*((u=t(o).note)==null?void 0:u.cents)}px)`}])},[e("line",{stroke:"black","stroke-linecap":"round","stroke-width":"2",y1:60,y2:t(s)*.3},null,8,nt),e("circle",{class:"filter brightness-120",r:"8",fill:t(o).note.color,cy:t(s)*.3},null,8,rt)],4),e("text",{style:{"user-select":"none",transition:"all 300ms ease"},fill:"currentColor","font-size":"6rem",y:t(s)*.4},c((d=t(o).note)==null?void 0:d.name)+" "+c((t(o).note.value+3)%12),9,lt),e("text",{class:"op-80",style:{"user-select":"none",transition:"all 300ms ease"},fill:"currentColor","font-size":"2rem",y:t(s)*.46},c((k=t(o).note)==null?void 0:k.octave),9,ct),e("text",{class:"font-mono op-70",style:{"user-select":"none",transition:"all 300ms ease"},fill:"currentColor","font-size":"2rem","text-anchor":"end",x:80,y:t(s)*.55},c((v=t(o).note)==null?void 0:v.frequency.toFixed(2))+" Hz",9,at),e("text",{class:"font-mono op-50",style:{"user-select":"none",transition:"all 300ms ease"},fill:"currentColor","font-size":"2rem","text-anchor":"end",x:80,y:t(s)*.5},c(((w=t(o).note)==null?void 0:w.cents)>0?"+":"")+c((C=t(o).note)==null?void 0:C.cents)+" cents",9,it)],8,tt)],8,H))])}}},pt=T(ut,[["__scopeId","data-v-f579a45a"]]);export{pt as default};
