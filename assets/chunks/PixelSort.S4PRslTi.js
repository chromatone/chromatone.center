import{r as g,c as H,d as L,x as r,y as i,A as h,I as v,F as _,B as x,C as P,D as A,G as E,E as F,H as M}from"./framework.lMKQGQ9G.js";import{n as R}from"./theme.Cw6MaptY.js";const $={class:"container mx-auto p-4"},N={class:"mb-4"},V=h("label",{class:"cursor-pointer bg-blue-500 hover-bg-blue-600 text-white font-bold py-2 px-4 rounded",for:"fileInput"},"Load Image",-1),j={key:0,class:"mb-4"},z=["src"],G={key:1,class:"grid grid-cols-12 gap-2"},O={class:"text-xs font-semibold mb-1 text-center"},T=h("div",{class:"flex-1"},null,-1),W={__name:"PixelSort",setup(q){const u=g(null),m=g(null),w=t=>{const e=t.target.files[0];e&&(u.value=URL.createObjectURL(e))},y=t=>{const e=document.createElement("canvas"),s=e.getContext("2d");e.width=t.width,e.height=t.height,s.drawImage(t,0,0,t.width,t.height);const n=s.getImageData(0,0,e.width,e.height).data,o=Array(12).fill().map(()=>Array(5).fill(0));let d=0;for(let l=0;l<n.length;l+=4){const c=n[l],D=n[l+1],I=n[l+2],[S,J,U]=k(c,D,I),f=b(S),p=Math.floor(U*5);f!==-1&&p<5&&(o[f][p]++,d++)}return o.map(l=>l.map(c=>c/d))},b=t=>{const e=t*360;for(let s=0;s<12;s++){const a=s*30,n=(a-15+360)%360,o=(a+15)%360;if(n>o){if(e>=n||e<o)return s}else if(e>=n&&e<o)return s}return-1},k=(t,e,s)=>{t/=255,e/=255,s/=255;const a=Math.max(t,e,s),n=Math.min(t,e,s);let o,d,l=(a+n)/2;if(a===n)o=d=0;else{const c=a-n;switch(d=l>.5?c/(2-a-n):c/(a+n),a){case t:o=(e-s)/c+(e<s?6:0);break;case e:o=(s-t)/c+2;break;case s:o=(t-e)/c+4;break}o/=6}return[o,d,l]},C=(t,e)=>{const s=t*30%360,a=5+e*15;return`hsl(${s}, 100%, ${a}%)`},B=H(()=>m.value?m.value.map(t=>t.reduce((e,s)=>e+s,0)):null);return L(u,async()=>{if(u.value){const t=new Image;t.src=u.value,await t.decode(),m.value=y(t)}}),(t,e)=>(r(),i("div",$,[h("div",N,[V,h("input",{class:"hidden",id:"fileInput",type:"file",accept:"image/*",onChange:w},null,32)]),u.value?(r(),i("div",j,[h("img",{class:"max-w-30",src:u.value,alt:"Uploaded image"},null,8,z)])):v("",!0),m.value?(r(),i("div",G,[(r(!0),i(_,null,x(m.value,(s,a)=>P((r(),i("div",{class:"col-span-1 min-h-50 flex flex-col items-stretch",key:a},[h("div",O,E(F(R)[a]),1),(r(!0),i(_,null,x(s.toReversed(),(n,o)=>(r(),i("div",{class:"p-0",key:o,style:M({flex:`${n*10}`,backgroundColor:C(a,4-o)})},null,4))),128)),T])),[[A,B.value[a]>.01]])),128))])):v("",!0)]))}};export{W as default};
