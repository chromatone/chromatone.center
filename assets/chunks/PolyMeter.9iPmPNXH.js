import{X as N,b8 as y,aC as R,aF as b,e as h}from"./theme.BUIsQubF.js";import{D as w,M as P,r as F,I as E,q as a,f as n,s as c,F as g,Y as k,u as T}from"./framework.DprnlfsI.js";const $={class:"max-h-100vh",version:"1.1",baseProfile:"full",viewBox:"0 0 500 500",xmlns:"http://www.w3.org/2000/svg"},q=["transform"],A=["r"],D=["transform"],I=["y2","stroke-width","stroke"],L=["r","fill","cy"],C=1,_=3,O=192,Y={__name:"PolyMeter",setup(Q){const l=N(),x=(e=0,t=1)=>e/(192*C*t)%1*360,u=w([1,2,3,4,5,6]),f=w(["1P","8P","5P","4P","3M","9M"]),B=P(()=>f.map(e=>y(l.note+_,e))),p=P(()=>B.value.map(e=>R(b(e)))),M=O*C,i=F({});let m=0,d=!0;return E(()=>l.ticks,e=>{if(e<m){i.value={},d=!0,m=e;return}e===1&&d?(d=!1,i.value={},u.forEach((t,s)=>h(y(l.note+_,f[s])))):e>0&&u.forEach((t,s)=>{const r=M*t,v=Math.floor(e/r),o=e%r/r;v>(i.value[t]??-1)&&o<.1&&(i.value[t]=v,h(y(l.note+_,f[s])))}),m=e}),(e,t)=>(n(),a("svg",$,[(n(!0),a(g,null,k(u.toReversed(),(s,r)=>(n(),a("g",{key:s,transform:`translate(250, 250) rotate(${x(T(l).ticks,s)}) `},[c("circle",{r:20+s*20,fill:"#3333",stroke:"black","stroke-width":"1"},null,8,A),(n(!0),a(g,null,k(s,(v,o)=>(n(),a("g",{key:o,transform:`rotate(${360*o/s}) `},[c("line",{y2:-20-s*20,"stroke-width":o==0?2:1,stroke:o==0?p.value.toReversed()[r]:"#aaa3"},null,8,I),c("circle",{r:o==0?4:2,fill:p.value.toReversed()[r],cy:-20-s*20+3},null,8,L)],8,D))),128))],8,q))),128)),t[0]||(t[0]=c("line",{transform:"translate(250 0)",y1:"30",y2:"250",stroke:"white",opacity:".2"},null,-1)),t[1]||(t[1]=c("circle",{r:"3",fill:"#aaa",transform:"translate(250, 250) "},null,-1))]))}};export{Y as default};
