import{T as R,aT as y,aw as T,az as M,e as p}from"./theme.DkSlrVce.js";import{H as w,G as P,r as b,J as E,c as a,h as n,F as g,Q as k,u as F,i as c}from"./framework.DqGUeSFU.js";const Q={class:"max-h-100vh",version:"1.1",baseProfile:"full",viewBox:"0 0 500 500",xmlns:"http://www.w3.org/2000/svg"},$=["transform"],z=["r"],A=["transform"],G=["y2","stroke-width","stroke"],H=["r","fill","cy"],x=1,_=3,J=192,j={__name:"PolyMeter",setup(L){const l=R(),B=(e=0,t=1)=>e/(192*x*t)%1*360,u=w([1,2,3,4,5,6]),f=w(["1P","8P","5P","4P","3M","9M"]),C=P(()=>f.map(e=>y(l.note+_,e))),h=P(()=>C.value.map(e=>T(M(e)))),N=J*x,i=b({});let m=0,d=!0;return E(()=>l.ticks,e=>{if(e<m){i.value={},d=!0,m=e;return}e===1&&d?(d=!1,i.value={},u.forEach((t,s)=>p(y(l.note+_,f[s])))):e>0&&u.forEach((t,s)=>{const r=N*t,v=Math.floor(e/r),o=e%r/r;v>(i.value[t]??-1)&&o<.1&&(i.value[t]=v,p(y(l.note+_,f[s])))}),m=e}),(e,t)=>(a(),n("svg",Q,[(a(!0),n(g,null,k(u.toReversed(),(s,r)=>(a(),n("g",{key:s,transform:`translate(250, 250) rotate(${B(F(l).ticks,s)}) `},[c("circle",{r:20+s*20,fill:"#3333",stroke:"black","stroke-width":"1"},null,8,z),(a(!0),n(g,null,k(s,(v,o)=>(a(),n("g",{key:o,transform:`rotate(${360*o/s}) `},[c("line",{y2:-20-s*20,"stroke-width":o==0?2:1,stroke:o==0?h.value.toReversed()[r]:"#aaa3"},null,8,G),c("circle",{r:o==0?4:2,fill:h.value.toReversed()[r],cy:-20-s*20+3},null,8,H)],8,A))),128))],8,$))),128)),t[0]||(t[0]=c("line",{transform:"translate(250 0)",y1:"30",y2:"250",stroke:"white",opacity:".2"},null,-1)),t[1]||(t[1]=c("circle",{r:"3",fill:"#aaa",transform:"translate(250, 250) "},null,-1))]))}};export{j as default};
