import{X as R,b9 as y,aC as b,aF as E,e as h}from"./theme.oPgoCdSG.js";import{r as w,e as P,a as F,w as M,B as a,C as n,F as g,G as C,u as T,E as c}from"./framework.B_b_ZswS.js";const $={class:"max-h-100vh",version:"1.1",baseProfile:"full",viewBox:"0 0 500 500",xmlns:"http://www.w3.org/2000/svg"},A=["transform"],G=["r"],L=["transform"],O=["y2","stroke-width","stroke"],Q=["r","fill","cy"],k=1,_=3,S=192,z={__name:"PolyMeter",setup(V){const l=R(),B=(e=0,t=1)=>e/(192*k*t)%1*360,u=w([1,2,3,4,5,6]),f=w(["1P","8P","5P","4P","3M","9M"]),x=P(()=>f.map(e=>y(l.note+_,e))),p=P(()=>x.value.map(e=>b(E(e)))),N=S*k,i=F({});let m=0,d=!0;return M(()=>l.ticks,e=>{if(e<m){i.value={},d=!0,m=e;return}e===1&&d?(d=!1,i.value={},u.forEach((t,s)=>h(y(l.note+_,f[s])))):e>0&&u.forEach((t,s)=>{const r=N*t,v=Math.floor(e/r),o=e%r/r;v>(i.value[t]??-1)&&o<.1&&(i.value[t]=v,h(y(l.note+_,f[s])))}),m=e}),(e,t)=>(a(),n("svg",$,[(a(!0),n(g,null,C(u.toReversed(),(s,r)=>(a(),n("g",{key:s,transform:`translate(250, 250) rotate(${B(T(l).ticks,s)}) `},[c("circle",{r:20+s*20,fill:"#3333",stroke:"black","stroke-width":"1"},null,8,G),(a(!0),n(g,null,C(s,(v,o)=>(a(),n("g",{key:o,transform:`rotate(${360*o/s}) `},[c("line",{y2:-20-s*20,"stroke-width":o==0?2:1,stroke:o==0?p.value.toReversed()[r]:"#aaa3"},null,8,O),c("circle",{r:o==0?4:2,fill:p.value.toReversed()[r],cy:-20-s*20+3},null,8,Q)],8,L))),128))],8,A))),128)),t[0]||(t[0]=c("line",{transform:"translate(250 0)",y1:"30",y2:"250",stroke:"white",opacity:".2"},null,-1)),t[1]||(t[1]=c("circle",{r:"3",fill:"#aaa",transform:"translate(250, 250) "},null,-1))]))}};export{z as default};
