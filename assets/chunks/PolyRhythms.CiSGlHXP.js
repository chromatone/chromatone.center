import{Y as N,b9 as y,aD as b,aG as E,e as p}from"./theme.CgSqoG0K.js";import{r as w,e as P,a as F,w as M,B as a,C as n,F as g,G as k,u as T,E as c}from"./framework.B_b_ZswS.js";const G={class:"max-h-100vh",version:"1.1",baseProfile:"full",viewBox:"0 0 500 500",xmlns:"http://www.w3.org/2000/svg"},$=["transform"],A=["r"],D=["transform"],L=["y2","stroke-width","stroke"],O=["r","fill","cy"],B=1,h=3,Q=192,q={__name:"PolyRhythms",setup(S){const l=N(),C=(e=0,t=1)=>e/(192*B*t)%1*360,u=w([1,2,3,4,5,6]),f=w(["1P","8P","5P","4P","3M","9M"]),R=P(()=>f.map(e=>y(l.note+h,e))),_=P(()=>R.value.map(e=>b(E(e)))),x=Q*B,i=F({});let m=0,d=!0;return M(()=>l.ticks,e=>{if(e<m){i.value={},d=!0,m=e;return}e===1&&d?(d=!1,i.value={},u.forEach((t,s)=>p(y(l.note+h,f[s])))):e>0&&u.forEach((t,s)=>{const r=x*t,v=Math.floor(e/r),o=e%r/r;v>(i.value[t]??-1)&&o<.1&&(i.value[t]=v,p(y(l.note+h,f[s])))}),m=e}),(e,t)=>(a(),n("svg",G,[(a(!0),n(g,null,k(u.toReversed(),(s,r)=>(a(),n("g",{key:s,transform:`translate(250, 250) rotate(${C(T(l).ticks,s)}) `},[c("circle",{r:20+s*20,fill:"#3333",stroke:"black","stroke-width":"1"},null,8,A),(a(!0),n(g,null,k(s,(v,o)=>(a(),n("g",{key:o,transform:`rotate(${360*o/s}) `},[c("line",{y2:-20-s*20,"stroke-width":o==0?2:1,stroke:o==0?_.value.toReversed()[r]:"#aaa3"},null,8,L),c("circle",{r:o==0?4:2,fill:_.value.toReversed()[r],cy:-20-s*20+3},null,8,O)],8,D))),128))],8,$))),128)),t[0]||(t[0]=c("line",{transform:"translate(250 0)",y1:"30",y2:"250",stroke:"white",opacity:".2"},null,-1)),t[1]||(t[1]=c("circle",{r:"3",fill:"#aaa",transform:"translate(250, 250) "},null,-1))]))}};export{q as default};
