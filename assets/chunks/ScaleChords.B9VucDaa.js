import{K as z,g as c,ak as g,n as y,x as C,z as i,aB as D,aC as S,d as j,aD as A,aE as E,V as L,r as F,A as I,i as M,c as V}from"./theme.DVUjZV0k.js";import{e as K,c as k,f,g as h,h as p,m as $,l as e,F as x,j as w,p as N,n as O,_ as q,r as G,z as H}from"./framework.DBqT_UJK.js";const J={class:"flex flex-1 w-full"},Q=["onPointerdown","onPointerup","onPointerleave","onPointerout","onPointercancel"],R={__name:"ScaleChordsCard",props:{chord:{type:Object,default:()=>({})},degree:{type:Number,default:0}},setup(n){const P=n,{isDark:b}=K(),d=k(()=>P.chord.intervals.map(v=>z(v)+P.degree+c.tonic+69-12+g.offset*12));function m(v,l,t){return Array.from({length:v.intervals.length},(r,a)=>a+1+t).map(A(v.aliases[0],y[(l+c.tonic)%12]+(4+g.offset))).map(E)}return(v,l)=>(f(),h("button",{class:O(["text-sm flex flex-col border-1 border-op-10 dark-border-light-900 dark-border-op-10 border-dark-200 rounded overflow-hidden",{active:d.value.filter(t=>e(S)[t]).length==d.value.length}]),style:N([{"scroll-snap-align":"center",flex:"0 0 90px"},{backgroundColor:e(j)(n.chord.chroma,(n.degree+e(c).tonic)%12,.2,e(b)?4:14).lch}])},[p("div",{class:"p-1 text-start",onPointerdown:l[0]||(l[0]=t=>e(C)(d.value)),onPointerup:l[1]||(l[1]=t=>e(i)(d.value)),onPointerleave:l[2]||(l[2]=t=>e(i)(d.value)),onPointerout:l[3]||(l[3]=t=>e(i)(d.value)),onPointercancel:l[4]||(l[4]=t=>e(i)(d.value))},$(e(y)[(n.degree+e(c).tonic)%12])+$(n.chord.aliases[0]),33),p("div",J,[(f(!0),h(x,null,w(d.value,(t,r)=>(f(),h("div",{class:"py-2 px-1 flex-1",key:t,style:N({backgroundColor:e(D)(t,e(S)[t]?1:.3)}),onPointerdown:a=>e(C)(m(n.chord,n.degree,r)),onPointerup:a=>e(i)(m(n.chord,n.degree,r)),onPointerleave:a=>e(i)(m(n.chord,n.degree,r)),onPointerout:a=>e(i)(m(n.chord,n.degree,r)),onPointercancel:a=>e(i)(m(n.chord,n.degree,r))},null,44,Q))),128))])],6))}},T={class:"gap-2 p-4 items-center",style:{display:"grid","grid-template-columns":"repeat(auto-fill, minmax(90px, 1fr))"}},U={class:"flex items-center gap-2 px-2"},W={class:"text-sm w-4"},X=["onPointerdown","onPointerup","onPointercancel","onPointerout"],Y={__name:"ScaleChords",emits:["chord"],setup(n,{emit:P}){const b=P,d=k(()=>L().map(t=>{const r=[0,...t.chroma.split("").map((o,s)=>o==1?s:!1).filter(Boolean)];let a={};return r.forEach(o=>a[o]=v(F(t.chroma.split(""),o).join(""))),{...t,degrees:r,degreeChords:a}}));function m(t="101010010100",r="100010010000"){let a=t.split(""),o=r.split("");if(o.reduce((u,B)=>Number(B)+Number(u))<3)return!1;for(let u=0;u<12;u++)if(o[u]==1&&a[u]!=1)return!1;return!0}function v(t="101010010100"){return I().filter(r=>m(t,r.chroma))}const l=k(()=>d.value.find(t=>t.chroma==c.chroma));return G(),(t,r)=>{var a;return f(),h("div",T,[(f(!0),h(x,null,w((a=l.value)==null?void 0:a.degrees,o=>(f(),h(x,{key:o},[p("div",U,[p("div",W,$(e(M)[o]),1),r[0]||(r[0]=p("div",{class:"flex-1"},null,-1)),p("div",{class:"font-bold w-8 h-8 rounded-full flex items-center flex-col cursor-pointer",onPointerdown:s=>e(C)(o+e(c).tonic+57+e(g).offset*12),onPointerup:s=>e(i)(o+e(c).tonic+57+e(g).offset*12),onPointercancel:s=>e(i)(o+e(c).tonic+57+e(g).offset*12),onPointerout:s=>e(i)(o+e(c).tonic+57+e(g).offset*12),style:N({backgroundColor:e(V)((o+e(c).tonic)%12,2)})},$(e(y)[(o+e(c).tonic)%12]),45,X)]),(f(!0),h(x,null,w(l.value.degreeChords[o].toSorted((s,u)=>s.intervals.length>u.intervals.length?1:-1),s=>(f(),H(R,{onPointerdown:u=>b("chord",s),key:s,chord:s,degree:o},null,8,["onPointerdown","chord","degree"]))),128))],64))),128))])}}},ee=q(Y,[["__scopeId","data-v-36142b92"]]);export{ee as _};
