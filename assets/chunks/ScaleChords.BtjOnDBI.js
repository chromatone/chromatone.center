import{e as j,c as b,f as v,g,h as f,m as $,l as e,U as k,F as x,j as w,p as N,n as A,_ as E,r as L,z as M}from"./framework.DBqT_UJK.js";import{K as F,g as c,ak as P,n as S,x as B,z as i,aB as I,aC as z,d as V,aD as K,aE as O,V as U,r as q,A as G,i as H,c as J}from"./theme.DVUjZV0k.js";const Q={class:"flex flex-1 w-full"},R=["onPointerdown","onPointerup","onPointerleave","onPointerout","onPointercancel"],T={__name:"ScaleChordsCard",props:{chord:{type:Object,default:()=>({})},degree:{type:Number,default:0}},setup(o){const C=o,{isDark:y}=j(),d=b(()=>C.chord.intervals.map(h=>F(h)+C.degree+c.tonic+69-12+P.offset*12));function m(h,l,a){return Array.from({length:h.intervals.length},(n,r)=>r+1+a).map(K(h.aliases[0],S[(l+c.tonic)%12]+(4+P.offset))).map(O)}return(h,l)=>(v(),g("button",{class:A(["text-sm flex flex-col border-1 border-op-10 dark-border-light-900 dark-border-op-10 border-dark-200 rounded overflow-hidden select-none",{active:d.value.filter(a=>e(z)[a]).length==d.value.length}]),style:N([{"scroll-snap-align":"center",flex:"0 0 90px"},{backgroundColor:e(V)(o.chord.chroma,(o.degree+e(c).tonic)%12,.2,e(y)?4:14).lch}])},[f("div",{class:"p-1 text-start w-full",onPointerdown:l[0]||(l[0]=k(a=>e(B)(d.value),["prevent"])),onPointerup:l[1]||(l[1]=a=>e(i)(d.value)),onPointerleave:l[2]||(l[2]=a=>e(i)(d.value)),onPointerout:l[3]||(l[3]=a=>e(i)(d.value)),onPointercancel:l[4]||(l[4]=a=>e(i)(d.value))},$(e(S)[(o.degree+e(c).tonic)%12])+$(o.chord.aliases[0]),33),f("div",Q,[(v(!0),g(x,null,w(d.value,(a,n)=>(v(),g("div",{class:"py-2 px-1 flex-1",key:a,style:N({backgroundColor:e(I)(a,e(z)[a]?1:.3)}),onPointerdown:k(r=>e(B)(m(o.chord,o.degree,n)),["prevent"]),onPointerup:r=>e(i)(m(o.chord,o.degree,n)),onPointerleave:r=>e(i)(m(o.chord,o.degree,n)),onPointerout:r=>e(i)(m(o.chord,o.degree,n)),onPointercancel:r=>e(i)(m(o.chord,o.degree,n))},null,44,R))),128))])],6))}},W={class:"gap-2 p-4 items-center",style:{display:"grid","grid-template-columns":"repeat(auto-fill, minmax(90px, 1fr))"}},X={class:"flex items-center gap-2 px-2"},Y={class:"text-sm w-4"},Z=["onPointerdown","onPointerup","onPointercancel","onPointerout"],_={__name:"ScaleChords",emits:["chord"],setup(o,{emit:C}){const y=C,d=b(()=>U().map(n=>{const r=[0,...n.chroma.split("").map((t,s)=>t==1?s:!1).filter(Boolean)];let p={};return r.forEach(t=>p[t]=h(q(n.chroma.split(""),t).join(""))),{...n,degrees:r,degreeChords:p}}));function m(n="101010010100",r="100010010000"){let p=n.split(""),t=r.split("");if(t.reduce((u,D)=>Number(D)+Number(u))<3)return!1;for(let u=0;u<12;u++)if(t[u]==1&&p[u]!=1)return!1;return!0}function h(n="101010010100"){return G().filter(r=>m(n,r.chroma))}const l=b(()=>d.value.find(n=>n.chroma==c.chroma)),a=L();return(n,r)=>{var p;return v(),g(x,null,[f("p",null,$(a.value),1),f("div",W,[(v(!0),g(x,null,w((p=l.value)==null?void 0:p.degrees,t=>(v(),g(x,{key:t},[f("div",X,[f("div",Y,$(e(H)[t]),1),r[0]||(r[0]=f("div",{class:"flex-1"},null,-1)),f("div",{class:"font-bold w-8 h-8 rounded-full flex items-center flex-col cursor-pointer select-none",onPointerdown:s=>e(B)(t+e(c).tonic+57+e(P).offset*12),onPointerup:k(s=>e(i)(t+e(c).tonic+57+e(P).offset*12),["stop","prevent"]),onPointercancel:s=>e(i)(t+e(c).tonic+57+e(P).offset*12),onPointerout:s=>e(i)(t+e(c).tonic+57+e(P).offset*12),style:N({backgroundColor:e(J)((t+e(c).tonic)%12,2)})},$(e(S)[(t+e(c).tonic)%12]),45,Z)]),(v(!0),g(x,null,w(l.value.degreeChords[t].toSorted((s,u)=>s.intervals.length>u.intervals.length?1:-1),s=>(v(),M(T,{onPointerdown:u=>{y("chord",s),a.value=s},key:s,chord:s,degree:t},null,8,["onPointerdown","chord","degree"]))),128))],64))),128))])],64)}}},ne=E(_,[["__scopeId","data-v-ad439f35"]]);export{ne as _};
