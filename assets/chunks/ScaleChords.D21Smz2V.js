import{e as j,c as y,f,g as p,h as g,m as C,l as e,U as k,F as $,j as w,p as N,n as A,_ as E,r as L,z as M}from"./framework.DBqT_UJK.js";import{K as F,g as c,ak as P,n as S,x as B,z as i,aB as I,aC as z,d as V,aD as K,aE as O,V as U,r as q,A as G,i as H,c as J}from"./theme.DVUjZV0k.js";const Q={class:"flex flex-1 w-full"},R=["onPointerdown","onPointerup","onPointerleave","onPointerout","onPointercancel"],T={__name:"ScaleChordsCard",props:{chord:{type:Object,default:()=>({})},degree:{type:Number,default:0}},setup(n){const x=n,{isDark:b}=j(),d=y(()=>x.chord.intervals.map(m=>F(m)+x.degree+c.tonic+69-12+P.offset*12));function v(m,l,s){return Array.from({length:m.intervals.length},(o,r)=>r+1+s).map(K(m.aliases[0],S[(l+c.tonic)%12]+(4+P.offset))).map(O)}return(m,l)=>(f(),p("button",{class:A(["text-sm flex flex-col border-1 border-op-10 dark-border-light-900 dark-border-op-10 border-dark-200 rounded overflow-hidden select-none",{active:d.value.filter(s=>e(z)[s]).length==d.value.length}]),style:N([{"scroll-snap-align":"center",flex:"0 0 90px"},{backgroundColor:e(V)(n.chord.chroma,(n.degree+e(c).tonic)%12,.2,e(b)?4:14).lch}])},[g("div",{class:"p-1 text-start w-full",onPointerdown:l[0]||(l[0]=k(s=>e(B)(d.value),["prevent"])),onPointerup:l[1]||(l[1]=s=>e(i)(d.value)),onPointerleave:l[2]||(l[2]=s=>e(i)(d.value)),onPointerout:l[3]||(l[3]=s=>e(i)(d.value)),onPointercancel:l[4]||(l[4]=s=>e(i)(d.value))},C(e(S)[(n.degree+e(c).tonic)%12])+C(n.chord.aliases[0]),33),g("div",Q,[(f(!0),p($,null,w(d.value,(s,o)=>(f(),p("div",{class:"py-2 px-1 flex-1",key:s,style:N({backgroundColor:e(I)(s,e(z)[s]?1:.3)}),onPointerdown:k(r=>e(B)(v(n.chord,n.degree,o)),["prevent"]),onPointerup:r=>e(i)(v(n.chord,n.degree,o)),onPointerleave:r=>e(i)(v(n.chord,n.degree,o)),onPointerout:r=>e(i)(v(n.chord,n.degree,o)),onPointercancel:r=>e(i)(v(n.chord,n.degree,o))},null,44,R))),128))])],6))}},W={class:"gap-2 p-4 items-center",style:{display:"grid","grid-template-columns":"repeat(auto-fill, minmax(90px, 1fr))"}},X={class:"flex items-center gap-2 px-2"},Y={class:"text-sm w-4"},Z=["onPointerdown","onPointerup","onPointercancel","onPointerout"],_={__name:"ScaleChords",emits:["chord"],setup(n,{emit:x}){const b=x,d=y(()=>U().map(o=>{const r=[0,...o.chroma.split("").map((t,a)=>t==1?a:!1).filter(Boolean)];let h={};return r.forEach(t=>h[t]=m(q(o.chroma.split(""),t).join(""))),{...o,degrees:r,degreeChords:h}}));function v(o="101010010100",r="100010010000"){let h=o.split(""),t=r.split("");if(t.reduce((u,D)=>Number(D)+Number(u))<3)return!1;for(let u=0;u<12;u++)if(t[u]==1&&h[u]!=1)return!1;return!0}function m(o="101010010100"){return G().filter(r=>v(o,r.chroma))}const l=y(()=>d.value.find(o=>o.chroma==c.chroma)),s=L();return(o,r)=>{var h;return f(),p("div",W,[(f(!0),p($,null,w((h=l.value)==null?void 0:h.degrees,t=>(f(),p($,{key:t},[g("div",X,[g("div",Y,C(e(H)[t]),1),r[0]||(r[0]=g("div",{class:"flex-1"},null,-1)),g("div",{class:"font-bold w-8 h-8 rounded-full flex items-center flex-col cursor-pointer select-none",onPointerdown:a=>e(B)(t+e(c).tonic+57+e(P).offset*12),onPointerup:k(a=>e(i)(t+e(c).tonic+57+e(P).offset*12),["stop","prevent"]),onPointercancel:a=>e(i)(t+e(c).tonic+57+e(P).offset*12),onPointerout:a=>e(i)(t+e(c).tonic+57+e(P).offset*12),style:N({backgroundColor:e(J)((t+e(c).tonic)%12,2)})},C(e(S)[(t+e(c).tonic)%12]),45,Z)]),(f(!0),p($,null,w(l.value.degreeChords[t].toSorted((a,u)=>a.intervals.length>u.intervals.length?1:-1),a=>(f(),M(T,{onPointerdown:u=>{b("chord",a),s.value=a},key:a,chord:a,degree:t},null,8,["onPointerdown","chord","degree"]))),128))],64))),128))])}}},oe=E(_,[["__scopeId","data-v-ab78d363"]]);export{oe as _};
