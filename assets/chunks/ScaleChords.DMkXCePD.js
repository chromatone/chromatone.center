import{a8 as L,G as w,r as B,c as i,h as d,i as v,B as x,u as e,F as P,Q as C,l as N,a7 as _,k as M,m as j,_ as A,e as E}from"./framework.DqGUeSFU.js";import{G as F,g as l,ag as g,n as k,aw as G,ax as z,v as S,y as h,d as I,ay as V,az as O,P as Q,r as q,z as H,i as J,c as K}from"./theme.BCAJ9CZC.js";const R={class:"text-sm absolute top-2 left-2 w-full z-100 pointer-events-none text-white font-bold"},T=["onPointerdown","onPointerup","onPointerleave","onPointerout","onPointercancel","onPointerenter"],U={key:0,class:"text-10px absolute z-100 top-0 left-1 text-white pointer-events-none"},W={__name:"ScaleChordsCard",props:{chord:{type:Object,default:()=>({})},degree:{type:Number,default:0}},setup(o){const y=o,{isDark:$}=L(),p=w(()=>y.chord.intervals.map(f=>F(f)+y.degree+l.tonic+69-12+g.offset*12));function u(f,b,n,r=0){return Array.from({length:f.intervals.length},(a,t)=>t+1+n).map(V(f.aliases[0],k[(b+l.tonic)%12]+(4+g.offset-r))).map(O)}const m=B(!1);return(f,b)=>(i(),d("div",{class:j(["flex flex-col border-1 p-1 border-op-10 dark-border-light-900 dark-border-op-10 border-dark-200 rounded overflow-hidden select-none relative",{active:p.value.filter(n=>e(z)[n]).length==p.value.length}]),style:N({backgroundColor:e(I)(o.chord.chroma,(o.degree+e(l).tonic)%12,.2,e($)?4:14).lch})},[v("div",R,x(e(k)[(o.degree+e(l).tonic)%12])+x(o.chord.aliases[0]),1),(i(),d(P,null,C([0,1],n=>v("div",{class:"flex flex-1 w-full",key:n},[(i(!0),d(P,null,C(p.value,(r,a)=>(i(),d("button",{class:"relative py-3 px-1 flex-1",key:r,style:N({backgroundColor:e(G)(r-n*12,e(z)[r-n*12]?1:.3)}),onPointerdown:_(t=>{m.value=!0,e(S)(u(o.chord,o.degree,a,n))},["prevent"]),onPointerup:t=>{m.value=!1,e(h)(u(o.chord,o.degree,a,n))},onPointerleave:t=>e(h)(u(o.chord,o.degree,a,n)),onPointerout:t=>e(h)(u(o.chord,o.degree,a,n)),onPointercancel:t=>{m.value=!1,e(h)(u(o.chord,o.degree,a,n))},onPointerenter:t=>m.value&&e(S)(u(o.chord,o.degree,a,n))},[n==1?(i(),d("span",U,x(e(k)[(r-9)%12]),1)):M("",!0)],44,T))),128))])),64))],6))}},X={class:"gap-2 p-4 items-center select-none",style:{display:"grid","grid-template-columns":"repeat(auto-fill, minmax(100px, 1fr))"}},Y={class:"flex items-center gap-2 px-2"},Z={class:"text-sm w-4"},ee=["onPointerdown","onPointerup","onPointercancel","onPointerout"],te={__name:"ScaleChords",emits:["chord"],setup(o,{emit:y}){const $=y,p=w(()=>Q().map(n=>{const r=[0,...n.chroma.split("").map((t,s)=>t==1?s:!1).filter(Boolean)];let a={};return r.forEach(t=>a[t]=m(q(n.chroma.split(""),t).join(""))),{...n,degrees:r,degreeChords:a}}));function u(n="101010010100",r="100010010000"){let a=n.split(""),t=r.split("");if(t.reduce((c,D)=>Number(D)+Number(c))<3)return!1;for(let c=0;c<12;c++)if(t[c]==1&&a[c]!=1)return!1;return!0}function m(n="101010010100"){return H().filter(r=>u(n,r.chroma))}const f=w(()=>p.value.find(n=>n.chroma==l.chroma)),b=B();return(n,r)=>{var a;return i(),d("div",X,[(i(!0),d(P,null,C((a=f.value)==null?void 0:a.degrees,t=>(i(),d(P,{key:t},[v("div",Y,[v("div",Z,x(e(J)[t]),1),r[0]||(r[0]=v("div",{class:"flex-1"},null,-1)),v("div",{class:"font-bold w-8 h-8 rounded-full flex items-center flex-col cursor-pointer select-none text-white",onPointerdown:s=>e(S)(t+e(l).tonic+57+e(g).offset*12),onPointerup:_(s=>e(h)(t+e(l).tonic+57+e(g).offset*12),["stop","prevent"]),onPointercancel:s=>e(h)(t+e(l).tonic+57+e(g).offset*12),onPointerout:s=>e(h)(t+e(l).tonic+57+e(g).offset*12),style:N({backgroundColor:e(K)((t+e(l).tonic)%12,2)})},x(e(k)[(t+e(l).tonic)%12]),45,ee)]),(i(!0),d(P,null,C(f.value.degreeChords[t].toSorted((s,c)=>s.intervals.length>c.intervals.length?1:-1),s=>(i(),E(W,{onPointerdown:c=>{$("chord",s),b.value=s},key:s,chord:s,degree:t},null,8,["onPointerdown","chord","degree"]))),128))],64))),128))])}}},re=A(te,[["__scopeId","data-v-ff17a197"]]);export{re as _};
