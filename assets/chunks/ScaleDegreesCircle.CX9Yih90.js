import{_ as M}from"./SvgRing.CvGQkmf6.js";import{e as O,g as _,h,n as I,r as b,z as D}from"./theme.E3Hbctnp.js";import{E as c,F as f,V as m,W as d,O as w,C as o,G as s,T as N,I as $}from"./framework.BilnkUFq.js";const P={class:"select-none m-2",version:"1.1",baseProfile:"full",viewBox:"100 100 800 800",xmlns:"http://www.w3.org/2000/svg",style:{"touch-action":"none"},"font-family":"Commissioner, sans-serif","text-anchor":"middle","dominant-baseline":"middle"},j=["x1","x2","y1","y2"],E=["transform","onClick"],F=["fill"],T={"font-size":"25",fill:"currentColor"},q={"text-anchor":"middle","dominant-baseline":"middle"},A=["onClick"],G=["x","y"],U={"text-anchor":"middle","dominant-baseline":"middle"},W=["d"],H=["d"],J={class:"degrees"},K={"font-size":"30"},Q=["href","startOffset"],X={"text-anchor":"middle","dominant-baseline":"middle"},Y=["d"],Z=["d"],tt={class:"roman",style:{"pointer-events":"none"}},et={"font-size":"36"},ot=["href","startOffset"],st={"text-anchor":"middle","dominant-baseline":"middle"},g=140,R=30,a=350,r=300,nt=330,at=330,B=260,ct={__name:"ScaleDegreesCircle",props:{chroma:{type:String,default:"1010110101010"},fixed5:{type:Boolean,default:!1}},emits:["update:chroma"],setup(p,{emit:S}){const k=[...O].map((l,e)=>({name:l,pitch:e})),u=g-R,C=B-30,x=p,v=S;function V(l){if(l==0)return;let e=x.chroma.split("");e[l]==1?e[l]=0:e[l]=1,v("update:chroma",e.join(""))}function z(l){let e=x.chroma.split(""),i=l[0];if(i!=0&&!(i==7&&x.fixed5)){if(l.length==1)e[i]==1?e[i]=0:e[i]=1;else{let t=l[1];e[i]==0&&e[t]==1||e[i]==e[t]?(e[i]=1,e[t]=0):(e[i]=0,e[t]=1)}v("update:chroma",e.join(""))}}const y={Tonic:{arc:[-15,15],steps:[0],offset:550,roffset:475,path:"Left",roman:"I"},Supertonic:{arc:[15,75],steps:[1,2],offset:840,roffset:720,path:"Left",roman:"II"},Mediant:{arc:[75,135],steps:[3,4],offset:1e3,roffset:860,path:"Right",roman:"III"},Subdominant:{arc:[135,195],steps:[5,6],offset:650,roffset:550,path:"Right",roman:"IV"},Dominant:{arc:[195,225],steps:[7],offset:365,roffset:315,path:"Right",roman:"V"},Submediant:{arc:[225,285],steps:[8,9],offset:100,roffset:85,path:"Right",roman:"VI"},Subtonic:{arc:[285,345],steps:[10,11],offset:270,roffset:230,path:"Left",roman:"VII"}};return(l,e)=>{const i=M;return c(),f("svg",P,[(c(),f(m,null,d(y,t=>w(i,{class:"cursor-pointer",key:t,onClick:n=>z(t.steps),cx:500,cy:500,radius:nt,thickness:at,from:t.arc[0],to:t.arc[1],op:.3,fill:`hsla(${(t.arc[0]+t.arc[1])/2+30*o(_).tonic},80%,50%,1)`},null,8,["onClick","from","to","fill"])),64)),(c(),f(m,null,d(12,t=>s("g",{class:"fifths",key:t},[p.chroma.split("")[t*7%12]==1&&p.chroma.split("")[(t+1)*7%12]==1?(c(),f("line",{key:0,x1:o(h)(t*7%12,12,u,1e3).x,x2:o(h)((t+1)*7%12,12,u,1e3).x,y1:o(h)(t*7%12,12,u,1e3).y,y2:o(h)((t+1)*7%12,12,u,1e3).y,stroke:"currentColor","stroke-linecap":"round","stroke-width":"2"},null,8,j)):N("",!0)])),64)),(c(!0),f(m,null,d(o(b)(o(k),o(_).tonic),(t,n)=>(c(),f("g",{class:"note cursor-pointer transition-all duration-300 ease-out",key:n,transform:`translate(${o(h)(n,12,g,1e3).x} ${o(h)(n,12,g,1e3).y})`,onClick:L=>o(_).tonic=t.pitch},[s("circle",{class:"transition-all duration-300 ease",r:R,fill:p.chroma.split("")[n]==1?o(I)(t.pitch,3):t.name.length==2?"#5552":"#ccc2"},null,8,F),s("text",T,[s("tspan",q,$(t.name),1)])],8,E))),128)),(c(!0),f(m,null,d(o(b)(o(k),o(_).tonic),(t,n)=>(c(),f("g",{class:"interval cursor-pointer",key:n,onClick:L=>V(n)},[w(i,{class:"transition-all duration-300 ease",cx:500,cy:500,radius:B,thickness:60,from:n*30-15,to:n*30+15,fill:p.chroma.split("")[n]==1?o(I)(t.pitch,3):t.name.length==2?"#5552":"#ccc2"},null,8,["from","to","fill"]),s("text",{x:o(h)(n,12,C,1e3).x,y:o(h)(n,12,C,1e3).y,"font-size":"20","text-anchor":"middle",fill:"currentColor"},[s("tspan",U,$(o(D)[n]),1)],8,G)],8,A))),128)),s("path",{id:"pathRight",d:`M 500 500 m ${-a}, 0 a ${a}, ${a} 0 1, 0 ${a*2}, 0  a ${a}, ${a} 0 1, 0  ${-a*2}, 0`,fill:"none"},null,8,W),s("path",{id:"pathLeft",d:`M 500 500 m ${-a}, 0 a ${a}, ${a} 0 1, 1 ${a*2}, 0  a ${a}, ${a} 0 1, 1  ${-a*2}, 0`,fill:"none"},"//https://stackoverflow.com/questions/5737975/circle-drawing-with-svgs-arc-path",8,H),s("g",J,[s("text",K,[(c(),f(m,null,d(y,(t,n)=>s("textPath",{href:`#path${t.path}`,key:t,startOffset:t.offset,fill:"currentColor"},[s("tspan",X,$(n),1)],8,Q)),64))])]),s("path",{id:"pathBLeft",d:`M 500 500 m ${-r}, 0 a ${r}, ${r} 0 1, 1 ${r*2}, 0  a ${r}, ${r} 0 1, 1  ${-r*2}, 0`,fill:"none"},null,8,Y),s("path",{id:"pathBRight",d:`M 500 500 m ${-r}, 0 a ${r}, ${r} 0 1, 0 ${r*2}, 0  a ${r}, ${r} 0 1, 0  ${-r*2}, 0`,fill:"none"},null,8,Z),s("g",tt,[s("text",et,[(c(),f(m,null,d(y,(t,n)=>s("textPath",{href:`#pathB${t.path}`,key:t,startOffset:t.roffset,fill:"currentColor"},[s("tspan",st,$(t.roman),1)],8,ot)),64))])])])}}};export{ct as _};
