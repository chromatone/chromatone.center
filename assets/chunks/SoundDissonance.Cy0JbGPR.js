import{_ as q,D as C,M as w,I as v,q as l,f as a,u as n,s as t,t as p,F as x,Y as _,z as d,a3 as A}from"./framework.CxSiiyCs.js";import{bx as B,aG as m,n as F,c as g,a0 as G,aS as z,bq as O}from"./theme.DLCqlVTm.js";const E={class:"fullscreen-container",id:"screen"},I=["viewBox"],R={id:"intervalGradient"},j=["stop-color"],H=["stop-color"],N=["transform","onClick"],U=["opacity"],V=["font-weight"],W=["transform","onClick"],Y=["width","opacity"],L=["font-weight"],X=["stroke","stroke-width"],J=["transform"],K={fill:"currentColor","font-family":"Commissioner, sans-serif","font-size":"18px","text-anchor":"end",x:"-5",y:"520"},Q={fill:"currentColor","font-family":"Commissioner, sans-serif","font-size":"18px","text-anchor":"start",x:"5",y:"520"},Z={key:0,fill:"none",stroke:"currentColor","stroke-width":"3","stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":"10",d:"M0,504.9c22.4-726,93.2-320.8,159.7-254.2c43.1,43.1,63.7,39.9,77.7,48.1c19.7,11.5,27.7,49.8,27.7,49.8c11.4-48.9,35-50,49.8,0.8c18-74.6,51.2-50.4,70.3,21.3c28.9-86.8,97.1-39.9,109.8,25.3c29.4-94.9,76.2-73.7,84.5-22.9c27.4-97.3,109.6-86.7,119.3,86.1c0,0,17.8-110.8,50.6-111.7c32.4-0.9,66.4,13.7,95.6,24.8c21.2,8,37.9,54.5,37.9,54.5s14.2-60.8,42.7-60.8c28.4,0,41.9,53.2,41.9,53.2c20.1-69.4,63.4-42,106.7-65c25.3-13.4,45.4-39.5,67.2-37.1c44.2,4.7,58.8,188,58.8,188"},tt={key:1,fill:"none",stroke:"currentColor","stroke-width":"3","stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":"10",d:"M0,504.9c22.4-726,123.3-349,177.8-272.3C380.1,517.5,953.4,500,1200,500"},et=["transform"],ot=["stroke"],st=["fill"],nt=["fill"],rt=["width"],it=["transform"],lt=["stroke-width","stroke"],at=["r","fill","transform"],ct=["fill"],ft={"font-family":"Commissioner, sans-serif","font-size":"22px","text-anchor":"end",x:"-20",fill:"currentColor",y:"490"},dt={"font-family":"Commissioner, sans-serif","font-size":"22px","text-anchor":"start",x:"20",fill:"currentColor",y:"490"},ht={__name:"SoundDissonance",setup(mt){const u={width:1200,height:600,padW:100,padH:100},M=[0,100,200,300,400,500,600,700,800,900,1e3,1100,1200],$=["1P","m2","M2","m3","M3","P4","TT","P5","m6","M6","m7","M7","P8"],k=["1/1","16/15","9/8","6/5","5/4","4/3","45/32","3/2","8/5","5/3","9/5","15/8","2/1"],b=k.map(i=>1200*Math.log2(i.split("/")[0]/i.split("/")[1])),{svg:S,area:P,mouse:f}=B(),s=C({main:220,cents:w(()=>f.normX*1200),hz:w(()=>s.main*Math.pow(2,s.cents/1200))}),e=C({started:!1,playing:!1,osc:"sine",oscs:["sine","sawtooth8"],envelope:{attack:.2,decay:.2,sustain:1,release:1},setOsc(i){e.osc=i,y.set({oscillator:{type:i}}),h.set({oscillator:{type:i}})}});let y,h;function T(){if(!e.started){const{channel:i}=G("dissonance");y=new z({oscillator:{type:e.osc},filterEnvelope:e.envelope}).connect(i),h=new z({oscillator:{type:e.osc},filterEnvelope:e.envelope}).connect(i),e.started=!0}}return v(()=>f.normY,i=>{h&&h.volume.rampTo(O(i))}),v([()=>s.hz,()=>f.pressed],()=>{e.started&&(f.pressed?!e.playing&&f.inside?(e.playing=!0,y.triggerAttack(s.main),h.triggerAttack(s.hz)):h.frequency.rampTo(s.hz):(e.playing=!1,y.triggerRelease(),h.triggerRelease()))}),(i,r)=>(a(),l("div",E,[(a(),l("svg",{class:"max-h-100svh w-full select-none",id:"dissonance",ref_key:"svg",ref:S,version:"1.1",baseProfile:"full",style:{"touch-action":"none"},viewBox:`-100 -100 ${u.width+2*u.padW} ${u.height+u.padH}`,xmlns:"http://www.w3.org/2000/svg",onMousemove:r[1]||(r[1]=(...o)=>n(f).getCursorPosition&&n(f).getCursorPosition(...o))},[t("defs",null,[t("linearGradient",R,[t("stop",{offset:"0%","stop-color":n(m)(s.main)},null,8,j),t("stop",{offset:"100%","stop-color":n(m)(s.hz)},null,8,H)])]),(a(),l(x,null,_([220,440],(o,c)=>t("g",{class:"cursor-pointer",key:o,transform:`translate(${960+c*140},0)`,onClick:D=>s.main=o},[t("rect",{x:"0",y:"-70",width:"130",height:"60",fill:"currentColor",ry:"20",opacity:s.main==o?.3:.1},null,8,U),t("text",{"font-weight":s.main==o?"bold":"normal",fill:"currentColor","font-family":"Commissioner, sans-serif","font-size":"32px","text-anchor":"start",x:"15",y:"-30"},d(o)+" hz",9,V)],8,N)),64)),r[4]||(r[4]=t("text",{fill:"currentColor","font-family":"Commissioner, sans-serif","font-size":"32px","text-anchor":"middle",x:"600",y:"-30"},"Sensory dissonance curve",-1)),(a(!0),l(x,null,_(e.oscs,(o,c)=>(a(),l("g",{class:"cursor-pointer",key:o,transform:`translate(${c*120},0)`,onClick:D=>e.setOsc(o)},[t("rect",{x:"0",y:"-70",width:o.length*26,height:"60",fill:"currentColor",ry:"20",opacity:e.osc==o?.3:.1},null,8,Y),t("text",{"font-weight":e.osc==o?"bold":"normal",fill:"currentColor","font-family":"Commissioner, sans-serif","font-size":"32px","text-anchor":"start",x:"15",y:"-30"},d(o.toUpperCase()),9,L)],8,W))),128)),t("rect",{ref_key:"area",ref:P,x:"0",y:"0",width:"1200",height:"500",fill:"none",stroke:"currentColor","stroke-width":"1px",opacity:"0.5"},null,512),r[5]||(r[5]=t("text",{fill:"currentColor","font-family":"Commissioner, sans-serif","font-size":"25px","text-anchor":"middle",x:"-20",y:"250","transform-origin":"-20 250",transform:"rotate(-90)"},"Dissonance",-1)),t("line",{x1:"0",x2:"0",y1:"0",y2:"500",stroke:n(m)(s.main),"stroke-width":e.playing?10:1},null,8,X),r[6]||(r[6]=t("text",{fill:"currentColor","font-family":"Commissioner, sans-serif","font-size":"25px","text-anchor":"middle",x:"600",y:"570"},"Frequency ratio (cents)",-1)),(a(),l(x,null,_(M,(o,c)=>t("g",{key:o,transform:`translate(${o},0)`},[r[2]||(r[2]=t("line",{stroke:"currentColor",x1:0,x2:0,y1:0,y2:530,"stroke-width":"1"},null,-1)),t("text",K,d(n(F)[c%12]),1),t("text",Q,d(o),1)],8,J)),64)),e.osc=="sawtooth8"?(a(),l("path",Z)):p("",!0),e.osc=="sine"?(a(),l("path",tt)):p("",!0),(a(!0),l(x,null,_(n(b),(o,c)=>(a(),l("g",{key:o,transform:`translate(${o} 0)`},[t("line",{stroke:n(g)(c,3),opacity:"1","stroke-width":"1",x1:"0",x2:"0",y1:"0",y2:"500"},null,8,ot),t("text",{"font-weight":"bold","font-family":"Commissioner, sans-serif","font-size":"22px","text-anchor":"start",fill:n(g)(c,3),x:"5",y:"25"},d($[c]),9,st),t("text",{"font-family":"Commissioner, sans-serif","font-size":"22px","text-anchor":"start",fill:n(g)(c,3),x:"5",y:"60"},d(k[c]),9,nt)],8,et))),128)),e.playing?(a(),l("rect",{key:2,x:"0",y:"0",width:n(f).x,height:"500",fill:"url(#intervalGradient)",opacity:"0.2"},null,8,rt)):p("",!0),t("g",{transform:`translate(${n(f).x}, 0)`},[t("line",{class:"pointer",x1:"0",x2:"0",y1:"0",y2:"500","stroke-width":e.playing?6:1,stroke:n(m)(s.hz)},null,8,lt),t("circle",{class:"pointer",cx:0,cy:0,r:e.playing?20:10,fill:e.playing?n(m)(s.hz):"currentColor",transform:`translate(0, ${n(f).y})`},null,8,at),t("circle",{class:"pointer",cx:0,cy:500,r:"8",fill:e.playing?n(m)(s.hz):"currentColor"},null,8,ct),t("text",ft,d(s.hz.toFixed(0))+" hz",1),t("text",dt,d(s.cents.toFixed(0)),1)],8,it),e.started?p("",!0):(a(),l("g",{key:3,class:"cursor-pointer",onClick:r[0]||(r[0]=A(o=>T(),["stop","prevent"]))},r[3]||(r[3]=[t("rect",{x:"400",y:"200",width:"400",height:"100",rx:"20",fill:"gray",stroke:"white"},null,-1),t("text",{"font-weight":"bold",fill:"white","font-family":"Commissioner, sans-serif","font-size":"42px","text-anchor":"middle",x:"600",y:"265"},"START AUDIO",-1)])))],40,I))]))}},pt=q(ht,[["__scopeId","data-v-9bc51aa3"]]);export{pt as default};
