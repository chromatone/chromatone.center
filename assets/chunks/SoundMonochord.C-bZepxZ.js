import{J as F,aG as v,F as u,L as b,b2 as z,aI as g}from"./theme.C1cSeBFq.js";import{F as h}from"./fraction.DqatKmli.js";import{r as y,d as r,O as B,v as q,x as p,z as e,u as o,D as s,B as k,F as D,A as H}from"./framework.BMHKg3V0.js";const N={class:"flex flex-col fullscreen-container",id:"screen"},P={class:"py-8 select-none",version:"1.1",baseProfile:"full",viewBox:"-10 -5 120 35",xmlns:"http://www.w3.org/2000/svg","font-family":"Commissioner, sans-serif","font-size":"3px","text-anchor":"middle","dominant-baseline":"middle","stroke-linecap":"round",fill:"white",style:{"touch-action":"none"}},L={id:"ruler","stroke-width":"0.2",stroke:"currentColor"},O=["x1","x2"],S={id:"freqs",stroke:"none",fill:"currentColor"},T={id:"left","text-anchor":"end"},j=["x"],A=["x"],E={id:"right","text-anchor":"start"},G=["x"],I=["x"],J={class:"cursor-pointer",id:"ratio","font-size":"4px",fill:"currentColor"},R=["x"],V=["x"],K=["stroke"],Q={x:"50","font-weight":"bold"},U={class:"cursor-pointer",id:"divided",transform:"translate(0,15)","font-weight":"bold"},W=["stroke","x2"],X=["x"],Y=["stroke","x1"],Z=["x"],tt=["cx"],et={class:"flex flex-wrap justify-center m-4"},ot=["onClick"],dt={__name:"SoundMonochord",setup(nt){function a(c){console.log(c)}const f=y({ratio:F(.8,.05,.95),fraction:r(()=>new h(1-f.ratio).simplify(.001).toFraction(!0)),invFraction:r(()=>new h(f.ratio).simplify(.001).toFraction(!0))}),n=y({freq:F(220,50,2e3),pitch:r(()=>v(n.freq).toFixed()),note:r(()=>u(n.freq).toNote()),cents:r(()=>_(u(n.note).toFrequency(),n.freq))}),l=y({freq:r(()=>n.freq/(1-f.ratio)),pitch:r(()=>(v(l.freq)+120)%12),note:r(()=>u(l.freq).toNote()),cents:r(()=>_(u(l.note).toFrequency(),l.freq))}),d=y({freq:r(()=>n.freq/f.ratio),pitch:r(()=>(v(d.freq)+120)%12),note:r(()=>u(d.freq).toNote()),cents:r(()=>_(u(d.note).toFrequency(),d.freq))}),M={"1/2":1/2,"2/3":2/3,"3/4":3/4,"3/5":3/5,"4/5":4/5,"5/6":5/6,"4/7":4/7,"5/7":5/7,"6/7":6/7,"5/8":5/8,"7/8":7/8,"5/9":5/9,"7/9":7/9,"8/9":8/9,"9/10":9/10,"10/11":10/11,"11/12":11/12,"8/15":8/15,"15/16":15/16,"32/45":32/45},i=b(r(()=>f.ratio),{duration:200,transition:z.easeOutCubic});function C(c){n.freq+=c.delta[0]/4}function $(c){f.ratio-=c.delta[0]/1200}function _(c,t){return-(1200/Math.log10(2))*Math.log10(c/t)%1200}return(c,t)=>{const m=B("drag");return q(),p("div",N,[(q(),p("svg",P,[e("g",L,[t[8]||(t[8]=e("line",{y1:"30",y2:"30",x2:"100"},null,-1)),t[9]||(t[9]=e("line",{y1:"0",y2:"30"},null,-1)),t[10]||(t[10]=e("line",{x1:"100",x2:"100",y1:"0",y2:"30"},null,-1)),e("line",{x1:100*(1-o(i)),x2:100*(1-o(i)),y1:"0",y2:"30"},null,8,O),e("g",S,[e("g",T,[e("text",{x:100*(1-o(i))-2,y:"28"},s(l.freq.toFixed(1))+" Hz",9,j),e("text",{x:100*(1-o(i))-2,y:"24"},s(l.note)+" ("+s(l.cents.toFixed())+" cents) ",9,A)]),e("g",E,[e("text",{x:100*(1-o(i))+2,y:"28"},s(d.freq.toFixed(1))+" Hz",9,G),e("text",{x:100*(1-o(i))+2,y:"24"},s(d.note)+" ("+s(d.cents.toFixed())+" cents) ",9,I)])]),e("g",J,[e("g",{onMousedown:t[0]||(t[0]=x=>{a(n.freq),a(l.freq)})},[e("text",{x:100*(1-o(i))-2,y:"8","text-anchor":"end"},s(f.fraction),9,R)],32),e("g",{onMousedown:t[1]||(t[1]=x=>{a(n.freq),a(d.freq)})},[e("text",{x:100*(1-o(i))+2,y:"8","text-anchor":"start"},s(f.invFraction),9,V)],32)])]),k((q(),p("g",{class:"cursor-pointer",id:"fundamental",onMouseover:t[2]||(t[2]=x=>a(n.freq)),onMousedown:t[3]||(t[3]=x=>a(n.freq))},[e("line",{x2:"100","stroke-width":"4",stroke:o(g)(n.freq)},null,8,K),t[11]||(t[11]=e("circle",{r:"1"},null,-1)),t[12]||(t[12]=e("circle",{cx:"100",r:"1"},null,-1)),e("text",Q,s(n.note)+" "+s(n.freq.toFixed())+" Hz ("+s(n.cents.toFixed())+" cents)",1)],32)),[[m,C]]),k((q(),p("g",U,[e("g",{id:"part1",onMouseover:t[4]||(t[4]=x=>a(l.freq)),onMousedown:t[5]||(t[5]=x=>a(l.freq))},[e("line",{stroke:o(g)(l.freq),"stroke-width":"4",x2:100*(1-o(i))},null,8,W),e("text",{y:"0.3",x:100*(1-o(i))/2},s(l.note),9,X)],32),e("g",{id:"part2",onMouseover:t[6]||(t[6]=x=>a(d.freq)),onMousedown:t[7]||(t[7]=x=>a(d.freq))},[e("line",{stroke:o(g)(d.freq),"stroke-width":"4",x1:100*(1-o(i)),x2:"100"},null,8,Y),e("text",{y:"0.3",x:100-100*o(i)/2},s(d.note),9,Z),e("circle",{cx:100*(1-o(i)),r:"1"},null,8,tt)],32),t[13]||(t[13]=e("circle",{r:"1"},null,-1)),t[14]||(t[14]=e("circle",{r:"1",cx:"100"},null,-1))])),[[m,$]])])),e("div",et,[(q(),p(D,null,H(M,(x,w)=>e("button",{class:"p-2 border-1 shadow m-2",key:w,onClick:rt=>f.ratio=x},s(w),9,ot)),64))])])}}};export{dt as default};
