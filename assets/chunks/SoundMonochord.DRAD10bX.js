import{J as w,aG as y,F as u,X as b,aH as v}from"./theme.DyXcm_Up.js";import{b as q,c as s,av as z,aQ as B,W as H,x as _,y as h,A as t,E as e,G as r,C as F,F as D,B as N}from"./framework.-sYaBLvc.js";import{F as k}from"./fraction.DqatKmli.js";const P={class:"flex flex-col fullscreen-container",id:"screen"},S={class:"py-8 select-none",version:"1.1",baseProfile:"full",viewBox:"-10 -5 120 35",xmlns:"http://www.w3.org/2000/svg","font-family":"Commissioner, sans-serif","font-size":"3px","text-anchor":"middle","dominant-baseline":"middle","stroke-linecap":"round",fill:"white",style:{"touch-action":"none"}},E={id:"ruler","stroke-width":"0.2",stroke:"currentColor"},G=t("line",{y1:"30",y2:"30",x2:"100"},null,-1),T=t("line",{y1:"0",y2:"30"},null,-1),j=t("line",{x1:"100",x2:"100",y1:"0",y2:"30"},null,-1),A=["x1","x2"],J={id:"freqs",stroke:"none",fill:"currentColor"},L={id:"left","text-anchor":"end"},O=["x"],Q=["x"],R={id:"right","text-anchor":"start"},V=["x"],W=["x"],X={class:"cursor-pointer",id:"ratio","font-size":"4px",fill:"currentColor"},I=["x"],K=["x"],U=["stroke"],Y=t("circle",{r:"1"},null,-1),Z=t("circle",{cx:"100",r:"1"},null,-1),tt={x:"50","font-weight":"bold"},et={class:"cursor-pointer",id:"divided",transform:"translate(0,15)","font-weight":"bold"},ot=["stroke","x2"],nt=["x"],st=["stroke","x1"],rt=["x"],it=["cx"],ct=t("circle",{r:"1"},null,-1),lt=t("circle",{r:"1",cx:"100"},null,-1),dt={class:"flex flex-wrap justify-center m-4"},at=["onClick"],qt={__name:"SoundMonochord",setup(ft){const a=q({ratio:w(.8,.05,.95),fraction:s(()=>new k(1-a.ratio).simplify(.001).toFraction(!0)),invFraction:s(()=>new k(a.ratio).simplify(.001).toFraction(!0))}),n=q({freq:w(220,50,2e3),pitch:s(()=>y(n.freq).toFixed()),note:s(()=>u(n.freq).toNote()),cents:s(()=>p(u(n.note).toFrequency(),n.freq))}),c=q({freq:s(()=>n.freq/(1-a.ratio)),pitch:s(()=>(y(c.freq)+120)%12),note:s(()=>u(c.freq).toNote()),cents:s(()=>p(u(c.note).toFrequency(),c.freq))}),l=q({freq:s(()=>n.freq/a.ratio),pitch:s(()=>(y(l.freq)+120)%12),note:s(()=>u(l.freq).toNote()),cents:s(()=>p(u(l.note).toFrequency(),l.freq))}),C={"1/2":1/2,"2/3":2/3,"3/4":3/4,"3/5":3/5,"4/5":4/5,"5/6":5/6,"4/7":4/7,"5/7":5/7,"6/7":6/7,"5/8":5/8,"7/8":7/8,"5/9":5/9,"7/9":7/9,"8/9":8/9,"9/10":9/10,"10/11":10/11,"11/12":11/12,"8/15":8/15,"15/16":15/16,"32/45":32/45},i=z(s(()=>a.ratio),{duration:200,transition:B.easeOutCubic}),{once:d}=b();function M(x){n.freq+=x.delta[0]/4}function $(x){a.ratio-=x.delta[0]/1200}function p(x,o){return-(1200/Math.log10(2))*Math.log10(x/o)%1200}return(x,o)=>{const g=H("drag");return _(),h("div",P,[(_(),h("svg",S,[t("g",E,[G,T,j,t("line",{x1:100*(1-e(i)),x2:100*(1-e(i)),y1:"0",y2:"30"},null,8,A),t("g",J,[t("g",L,[t("text",{x:100*(1-e(i))-2,y:"28"},r(c.freq.toFixed(1))+" Hz",9,O),t("text",{x:100*(1-e(i))-2,y:"24"},r(c.note)+" ("+r(c.cents.toFixed())+" cents) ",9,Q)]),t("g",R,[t("text",{x:100*(1-e(i))+2,y:"28"},r(l.freq.toFixed(1))+" Hz",9,V),t("text",{x:100*(1-e(i))+2,y:"24"},r(l.note)+" ("+r(l.cents.toFixed())+" cents) ",9,W)])]),t("g",X,[t("g",{onMousedown:o[0]||(o[0]=f=>{e(d)(n.freq),e(d)(c.freq)})},[t("text",{x:100*(1-e(i))-2,y:"8","text-anchor":"end"},r(a.fraction),9,I)],32),t("g",{onMousedown:o[1]||(o[1]=f=>{e(d)(n.freq),e(d)(l.freq)})},[t("text",{x:100*(1-e(i))+2,y:"8","text-anchor":"start"},r(a.invFraction),9,K)],32)])]),F((_(),h("g",{class:"cursor-pointer",id:"fundamental",onMouseover:o[2]||(o[2]=f=>e(d)(n.freq)),onMousedown:o[3]||(o[3]=f=>e(d)(n.freq))},[t("line",{x2:"100","stroke-width":"4",stroke:e(v)(n.freq)},null,8,U),Y,Z,t("text",tt,r(n.note)+" "+r(n.freq.toFixed())+" Hz ("+r(n.cents.toFixed())+" cents)",1)],32)),[[g,M]]),F((_(),h("g",et,[t("g",{id:"part1",onMouseover:o[4]||(o[4]=f=>e(d)(c.freq)),onMousedown:o[5]||(o[5]=f=>e(d)(c.freq))},[t("line",{stroke:e(v)(c.freq),"stroke-width":"4",x2:100*(1-e(i))},null,8,ot),t("text",{y:"0.3",x:100*(1-e(i))/2},r(c.note),9,nt)],32),t("g",{id:"part2",onMouseover:o[6]||(o[6]=f=>e(d)(l.freq)),onMousedown:o[7]||(o[7]=f=>e(d)(l.freq))},[t("line",{stroke:e(v)(l.freq),"stroke-width":"4",x1:100*(1-e(i)),x2:"100"},null,8,st),t("text",{y:"0.3",x:100-100*e(i)/2},r(l.note),9,rt),t("circle",{cx:100*(1-e(i)),r:"1"},null,8,it)],32),ct,lt])),[[g,$]])])),t("div",dt,[(_(),h(D,null,N(C,(f,m)=>t("button",{class:"p-2 border-1 shadow m-2",key:m,onClick:xt=>a.ratio=f},r(m),9,at)),64))])])}}};export{qt as default};
