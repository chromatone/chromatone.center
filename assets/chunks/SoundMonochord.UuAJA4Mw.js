import{H as w,aA as y,F as u,aB as g}from"./theme.DReZizmb.js";import{b as q,c as s,av as b,aQ as z,U as B,f as _,g as h,h as t,l as o,m as r,k as F,F as H,j as D}from"./framework.B7TlvOs3.js";import{F as k}from"./fraction.DqatKmli.js";const N={class:"flex flex-col fullscreen-container",id:"screen"},P={class:"py-8 select-none",version:"1.1",baseProfile:"full",viewBox:"-10 -5 120 35",xmlns:"http://www.w3.org/2000/svg","font-family":"Commissioner, sans-serif","font-size":"3px","text-anchor":"middle","dominant-baseline":"middle","stroke-linecap":"round",fill:"white",style:{"touch-action":"none"}},j={id:"ruler","stroke-width":"0.2",stroke:"currentColor"},S=t("line",{y1:"30",y2:"30",x2:"100"},null,-1),T=t("line",{y1:"0",y2:"30"},null,-1),A=t("line",{x1:"100",x2:"100",y1:"0",y2:"30"},null,-1),E=["x1","x2"],L={id:"freqs",stroke:"none",fill:"currentColor"},O={id:"left","text-anchor":"end"},Q=["x"],R=["x"],U={id:"right","text-anchor":"start"},V=["x"],G=["x"],I={class:"cursor-pointer",id:"ratio","font-size":"4px",fill:"currentColor"},J=["x"],K=["x"],W=["stroke"],X=t("circle",{r:"1"},null,-1),Y=t("circle",{cx:"100",r:"1"},null,-1),Z={x:"50","font-weight":"bold"},tt={class:"cursor-pointer",id:"divided",transform:"translate(0,15)","font-weight":"bold"},et=["stroke","x2"],ot=["x"],nt=["stroke","x1"],st=["x"],rt=["cx"],it=t("circle",{r:"1"},null,-1),ct=t("circle",{r:"1",cx:"100"},null,-1),lt={class:"flex flex-wrap justify-center m-4"},dt=["onClick"],ht={__name:"SoundMonochord",setup(at){function d(x){console.log(x)}const a=q({ratio:w(.8,.05,.95),fraction:s(()=>new k(1-a.ratio).simplify(.001).toFraction(!0)),invFraction:s(()=>new k(a.ratio).simplify(.001).toFraction(!0))}),n=q({freq:w(220,50,2e3),pitch:s(()=>y(n.freq).toFixed()),note:s(()=>u(n.freq).toNote()),cents:s(()=>p(u(n.note).toFrequency(),n.freq))}),c=q({freq:s(()=>n.freq/(1-a.ratio)),pitch:s(()=>(y(c.freq)+120)%12),note:s(()=>u(c.freq).toNote()),cents:s(()=>p(u(c.note).toFrequency(),c.freq))}),l=q({freq:s(()=>n.freq/a.ratio),pitch:s(()=>(y(l.freq)+120)%12),note:s(()=>u(l.freq).toNote()),cents:s(()=>p(u(l.note).toFrequency(),l.freq))}),M={"1/2":1/2,"2/3":2/3,"3/4":3/4,"3/5":3/5,"4/5":4/5,"5/6":5/6,"4/7":4/7,"5/7":5/7,"6/7":6/7,"5/8":5/8,"7/8":7/8,"5/9":5/9,"7/9":7/9,"8/9":8/9,"9/10":9/10,"10/11":10/11,"11/12":11/12,"8/15":8/15,"15/16":15/16,"32/45":32/45},i=b(s(()=>a.ratio),{duration:200,transition:z.easeOutCubic});function C(x){n.freq+=x.delta[0]/4}function $(x){a.ratio-=x.delta[0]/1200}function p(x,e){return-(1200/Math.log10(2))*Math.log10(x/e)%1200}return(x,e)=>{const v=B("drag");return _(),h("div",N,[(_(),h("svg",P,[t("g",j,[S,T,A,t("line",{x1:100*(1-o(i)),x2:100*(1-o(i)),y1:"0",y2:"30"},null,8,E),t("g",L,[t("g",O,[t("text",{x:100*(1-o(i))-2,y:"28"},r(c.freq.toFixed(1))+" Hz",9,Q),t("text",{x:100*(1-o(i))-2,y:"24"},r(c.note)+" ("+r(c.cents.toFixed())+" cents) ",9,R)]),t("g",U,[t("text",{x:100*(1-o(i))+2,y:"28"},r(l.freq.toFixed(1))+" Hz",9,V),t("text",{x:100*(1-o(i))+2,y:"24"},r(l.note)+" ("+r(l.cents.toFixed())+" cents) ",9,G)])]),t("g",I,[t("g",{onMousedown:e[0]||(e[0]=f=>{d(n.freq),d(c.freq)})},[t("text",{x:100*(1-o(i))-2,y:"8","text-anchor":"end"},r(a.fraction),9,J)],32),t("g",{onMousedown:e[1]||(e[1]=f=>{d(n.freq),d(l.freq)})},[t("text",{x:100*(1-o(i))+2,y:"8","text-anchor":"start"},r(a.invFraction),9,K)],32)])]),F((_(),h("g",{class:"cursor-pointer",id:"fundamental",onMouseover:e[2]||(e[2]=f=>d(n.freq)),onMousedown:e[3]||(e[3]=f=>d(n.freq))},[t("line",{x2:"100","stroke-width":"4",stroke:o(g)(n.freq)},null,8,W),X,Y,t("text",Z,r(n.note)+" "+r(n.freq.toFixed())+" Hz ("+r(n.cents.toFixed())+" cents)",1)],32)),[[v,C]]),F((_(),h("g",tt,[t("g",{id:"part1",onMouseover:e[4]||(e[4]=f=>d(c.freq)),onMousedown:e[5]||(e[5]=f=>d(c.freq))},[t("line",{stroke:o(g)(c.freq),"stroke-width":"4",x2:100*(1-o(i))},null,8,et),t("text",{y:"0.3",x:100*(1-o(i))/2},r(c.note),9,ot)],32),t("g",{id:"part2",onMouseover:e[6]||(e[6]=f=>d(l.freq)),onMousedown:e[7]||(e[7]=f=>d(l.freq))},[t("line",{stroke:o(g)(l.freq),"stroke-width":"4",x1:100*(1-o(i)),x2:"100"},null,8,nt),t("text",{y:"0.3",x:100-100*o(i)/2},r(l.note),9,st),t("circle",{cx:100*(1-o(i)),r:"1"},null,8,rt)],32),it,ct])),[[v,$]])])),t("div",lt,[(_(),h(H,null,D(M,(f,m)=>t("button",{class:"p-2 border-1 shadow m-2",key:m,onClick:ft=>a.ratio=f},r(m),9,dt)),64))])])}}};export{ht as default};
