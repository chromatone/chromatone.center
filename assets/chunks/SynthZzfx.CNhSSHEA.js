import{_ as n0}from"./MidiKeys.CYJtG8_r.js";import{aH as j,al as s0,ar as o0}from"./theme.DKUtGHOP.js";import{D as u0,M as m0,o as i0,a2 as l0,I as r0,q as H,f as F,s as f0,l as d0,F as p0,Y as c0,e as h0,m as _0,u as w}from"./framework.Bbwy4zmA.js";function M0(...e){return K.play(...e)}const K={volume:.3,sampleRate:44100,x:new AudioContext,play:function(...e){return this.playSamples(this.buildSamples(...e))},playSamples:function(...e){const u=this.x.createBuffer(e.length,e[0].length,this.sampleRate),s=this.x.createBufferSource();return e.map((o,r)=>u.getChannelData(r).set(o)),s.buffer=u,s.connect(this.x.destination),s.start(),s},buildSamples:function(e=1,u=.05,s=220,o=0,r=0,t=.1,p=0,v=1,d=0,x=0,y=0,q=0,c=0,L=0,P=0,Y=0,l=0,C=1,_=0,z=0,b=0){let m=Math.PI*2,S=a0=>a0<0?-1:1,n=this.sampleRate,G=d*=500*m/n/n,I=s*=(1+u*2*Math.random()-u)*m/n,B=[],f=0,O=0,a=0,M=1,Q=0,T=0,i=0,V,h,W=2,J=m*Math.abs(b)*2/n,Z=Math.cos(J),N=Math.sin(J)/2/W,g=1+N,$=-2*Z/g,k=(1-N)/g,U=(1+S(b)*Z)/2/g,t0=-(S(b)+Z)/g,e0=U,X=0,A=0,D=0,E=0;for(o=o*n+9,_*=n,r*=n,t*=n,l*=n,x*=500*m/n**3,P*=m/n,y*=m/n,q*=n,c=c*n|0,e*=this.volume,h=o+_+r+t+l|0;a<h;B[a++]=i*e)++T%(Y*100|0)||(i=p?p>1?p>2?p>3?Math.sin(f*f):Math.max(Math.min(Math.tan(f),1),-1):1-(2*f/m%2+2)%2:1-4*Math.abs(Math.round(f/m)-f/m):Math.sin(f),i=(c?1-z+z*Math.sin(m*a/c):1)*S(i)*Math.abs(i)**v*(a<o?a/o:a<o+_?1-(a-o)/_*(1-C):a<o+_+r?C:a<h-l?(h-a-l)/t*C:0),i=l?i/2+(l>a?0:(a<h-l?1:(h-a)/l)*B[a-l|0]/2/e):i,b&&(i=E=e0*X+t0*(X=A)+U*(A=i)-k*D-$*(D=E))),V=(s+=d+=x)*Math.cos(P*O++),f+=V+V*L*Math.sin(a**5),M&&++M>q&&(s+=y,I+=y,M=0),c&&!(++Q%c)&&(s=I,d=G,M=M||1);return B},getNote:function(e=0,u=440){return u*2**(e/12)}};let R;function x0(){const e=u0({volume:1,randomness:0,frequency:220,shape:1,attack:.12,sustain:.53,release:.15,shapeCurve:.76,slide:0,deltaSlide:0,pitchJump:0,pitchJumpTime:0,repeatTime:0,noise:.1,modulation:0,bitCrush:0,delay:0,sustainVolume:.39,decay:.02,tremolo:0}),u=m0(()=>r(e));i0(()=>{K.volume=.3,j.value=!1}),l0(()=>{j.value=!0}),r0(()=>s0.note,t=>{o(t)});const s={volume:{min:0,max:1,default:1,step:.01},randomness:{min:0,max:1,default:.05,step:.01},frequency:{min:20,max:2e4,default:220,step:10},attack:{min:0,max:2,default:.01,step:.01},sustain:{min:0,max:2,default:.3,step:.01},release:{min:0,max:2,default:.1,step:.01},shape:{min:0,max:4,default:0,step:1},shapeCurve:{min:0,max:2,default:1,step:.01},slide:{min:-10,max:10,default:0,step:.1},deltaSlide:{min:-10,max:10,default:0,step:.1},pitchJump:{min:-10,max:10,default:0,step:.1},pitchJumpTime:{min:0,max:2,default:0,step:.01},repeatTime:{min:0,max:2,default:0,step:.01},noise:{min:0,max:1,default:0,step:.01},modulation:{min:0,max:100,default:0,step:1},bitCrush:{min:0,max:1,default:0,step:.01},delay:{min:0,max:2,default:0,step:.01},sustainVolume:{min:0,max:1,default:1,step:.01},decay:{min:0,max:2,default:.1,step:.01},tremolo:{min:0,max:1,default:0,step:.01}};async function o(t){t?.type!="noteoff"&&(t?.type=="noteon"&&(e.frequency=Math.pow(2,(t.number-69)/12)*440),R||(R=M0),R(...u.value))}function r(t){return[t.volume??1,t.randomness??.05,t.frequency??220,t.attack??0,t.sustain??0,t.release??.1,t.shape??0,t.shapeCurve??1,t.slide??0,t.deltaSlide??0,t.pitchJump??0,t.pitchJumpTime??0,t.repeatTime??0,t.noise??0,t.modulation??0,t.bitCrush??0,t.delay??0,t.sustainVolume??1,t.decay??0,t.tremolo??0]}return{sound:e,limits:s}}const b0={class:"flex flex-col gap-gap-4ZZFX"},g0={class:"flex flex-wrap is-group p-4 m-4"},S0={__name:"SynthZzfx",setup(e){const{sound:u,limits:s}=x0();return(o,r)=>{const t=o0,p=n0;return F(),H("div",b0,[f0("div",g0,[(F(!0),H(p0,null,c0(w(s),(v,d)=>(F(),h0(t,_0({ref_for:!0},v,{modelValue:w(u)[d],"onUpdate:modelValue":x=>w(u)[d]=x,param:d}),null,16,["modelValue","onUpdate:modelValue","param"]))),256))]),d0(p)])}}};export{S0 as default};
