import{_ as st}from"./MidiKeys.CjmrRAs_.js";import{aH as L,al as ot,ar as ut}from"./theme.DLCqlVTm.js";import{D as it,M as mt,o as lt,a2 as rt,I as ft,q as j,f as N,s as ct,l as dt,F as pt,Y as ht,e as _t,m as xt,u as R}from"./framework.CxSiiyCs.js";function Mt(...e){return G.play(...e)}const G={volume:.3,sampleRate:44100,audioContext:new AudioContext,play:function(...e){return this.playSamples([this.buildSamples(...e)])},playSamples:function(e,u=1,l=1,o=0,c=!1){const t=e.length,r=e[0].length,_=this.audioContext.createBuffer(t,r,this.sampleRate),n=this.audioContext.createBufferSource();e.forEach((g,p)=>_.getChannelData(p).set(g)),n.buffer=_,n.playbackRate.value=l,n.loop=c;const d=this.audioContext.createGain();d.gain.value=this.volume*u,d.connect(this.audioContext.destination);const M=new StereoPannerNode(this.audioContext,{pan:o});return n.connect(M).connect(d),n.start(),n},buildSamples:function(e=1,u=.05,l=220,o=0,c=0,t=.1,r=0,_=1,n=0,d=0,M=0,g=0,p=0,H=0,q=0,K=0,f=0,S=1,b=0,A=0,v=0){let s=this.sampleRate,i=Math.PI*2,B=Math.abs,V=nt=>nt<0?-1:1,O=n*=500*i/s/s,z=l*=(1+u*2*Math.random()-u)*i/s,Y=0,Q=0,T=0,y=1,x,Z=[],h=0,a=0,m=0,w,W=2,E=i*B(v)*2/s,F=Math.cos(E),I=Math.sin(E)/2/W,C=1+I,$=-2*F/C,tt=(1-I)/C,J=(1+V(v)*F)/2/C,et=-(V(v)+F)/C,at=J,U=0,X=0,k=0,D=0;for(o=o*s||9,b*=s,c*=s,t*=s,f*=s,d*=500*i/s**3,q*=i/s,M*=i/s,g*=s,p=p*s|0,e*=this.volume,x=o+b+c+t+f|0;a<x;Z[a++]=m*e)++T%(K*100|0)||(m=r?r>1?r>2?r>3?r>4?(h/i%1<_/2)*2-1:Math.sin(h**3):Math.max(Math.min(Math.tan(h),1),-1):1-(2*h/i%2+2)%2:1-4*B(Math.round(h/i)-h/i):Math.sin(h),m=(p?1-A+A*Math.sin(i*a/p):1)*(r>4?m:V(m)*B(m)**_)*(a<o?a/o:a<o+b?1-(a-o)/b*(1-S):a<o+b+c?S:a<x-f?(x-a-f)/t*S:0),m=f?m/2+(f>a?0:(a<x-f?1:(x-a)/f)*Z[a-f|0]/2/e):m,v&&(m=D=at*U+et*(U=X)+J*(X=m)-tt*k-$*(k=D))),w=(l+=n+=d)*Math.cos(q*Y++),h+=w+w*H*Math.sin(a**5),y&&++y>g&&(l+=M,z+=M,y=0),p&&!(++Q%p)&&(l=z,n=O,y||=1);return Z},getNote:function(e=0,u=440){return u*2**(e/12)}};let P;function bt(){const e=it({volume:1,randomness:0,frequency:220,shape:1,attack:.12,sustain:.53,release:.15,shapeCurve:.76,slide:0,deltaSlide:0,pitchJump:0,pitchJumpTime:0,repeatTime:0,noise:.1,modulation:0,bitCrush:0,delay:0,sustainVolume:.39,decay:.02,tremolo:0}),u=mt(()=>c(e));lt(()=>{G.volume=.3,L.value=!1}),rt(()=>{L.value=!0}),ft(()=>ot.note,t=>{o(t)});const l={volume:{min:0,max:1,default:1,step:.01},randomness:{min:0,max:1,default:.05,step:.01},frequency:{min:20,max:2e4,default:220,step:10},attack:{min:0,max:2,default:.01,step:.01},sustain:{min:0,max:2,default:.3,step:.01},release:{min:0,max:2,default:.1,step:.01},shape:{min:0,max:4,default:0,step:1},shapeCurve:{min:0,max:2,default:1,step:.01},slide:{min:-10,max:10,default:0,step:.1},deltaSlide:{min:-10,max:10,default:0,step:.1},pitchJump:{min:-10,max:10,default:0,step:.1},pitchJumpTime:{min:0,max:2,default:0,step:.01},repeatTime:{min:0,max:2,default:0,step:.01},noise:{min:0,max:1,default:0,step:.01},modulation:{min:0,max:100,default:0,step:1},bitCrush:{min:0,max:1,default:0,step:.01},delay:{min:0,max:2,default:0,step:.01},sustainVolume:{min:0,max:1,default:1,step:.01},decay:{min:0,max:2,default:.1,step:.01},tremolo:{min:0,max:1,default:0,step:.01}};async function o(t){t?.type!="noteoff"&&(t?.type=="noteon"&&(e.frequency=Math.pow(2,(t.number-69)/12)*440),P||(P=Mt),P(...u.value))}function c(t){return[t.volume??1,t.randomness??.05,t.frequency??220,t.attack??0,t.sustain??0,t.release??.1,t.shape??0,t.shapeCurve??1,t.slide??0,t.deltaSlide??0,t.pitchJump??0,t.pitchJumpTime??0,t.repeatTime??0,t.noise??0,t.modulation??0,t.bitCrush??0,t.delay??0,t.sustainVolume??1,t.decay??0,t.tremolo??0]}return{sound:e,limits:l}}const gt={class:"flex flex-col gap-gap-4ZZFX"},vt={class:"flex flex-wrap is-group p-4 m-4"},Vt={__name:"SynthZzfx",setup(e){const{sound:u,limits:l}=bt();return(o,c)=>{const t=ut,r=st;return N(),j("div",gt,[ct("div",vt,[(N(!0),j(pt,null,ht(R(l),(_,n)=>(N(),_t(t,xt({ref_for:!0},_,{modelValue:R(u)[n],"onUpdate:modelValue":d=>R(u)[n]=d,param:n}),null,16,["modelValue","onUpdate:modelValue","param"]))),256))]),dt(r)])}}};export{Vt as default};
