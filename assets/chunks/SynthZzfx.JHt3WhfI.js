import{_ as s0}from"./MidiKeys.DKlTMc4b.js";import{b5 as j,d as n0,J as i0}from"./theme.D8bEcdRX.js";import{b as m0,c as u0,o as o0,q as r0,d as l0,C as F,D as E,F as f0,G as d0,H as p0,R as c0,a7 as h0,K as R,a0 as _0}from"./framework.BmjQO8gg.js";function M0(...a){return G.play(...a)}const G={volume:.3,sampleRate:44100,x:new AudioContext,play:function(...a){return this.playSamples(this.buildSamples(...a))},playSamples:function(...a){const m=this.x.createBuffer(a.length,a[0].length,this.sampleRate),n=this.x.createBufferSource();return a.map((i,l)=>m.getChannelData(l).set(i)),n.buffer=m,n.connect(this.x.destination),n.start(),n},buildSamples:function(a=1,m=.05,n=220,i=0,l=0,t=.1,p=0,y=1,d=0,b=0,v=0,q=0,c=0,H=0,J=0,L=0,r=0,C=1,_=0,P=0,x=0){let u=Math.PI*2,S=e0=>e0<0?-1:1,s=this.sampleRate,$=d*=500*u/s/s,z=n*=(1+m*2*Math.random()-m)*u/s,B=[],f=0,O=0,e=0,M=1,Q=0,T=0,o=0,V,h,W=2,N=u*Math.abs(x)*2/s,Z=Math.cos(N),U=Math.sin(N)/2/W,g=1+U,Y=-2*Z/g,k=(1-U)/g,X=(1+S(x)*Z)/2/g,t0=-(S(x)+Z)/g,a0=X,A=0,D=0,I=0,K=0;for(i=i*s+9,_*=s,l*=s,t*=s,r*=s,b*=500*u/s**3,J*=u/s,v*=u/s,q*=s,c=c*s|0,a*=this.volume,h=i+_+l+t+r|0;e<h;B[e++]=o*a)++T%(L*100|0)||(o=p?p>1?p>2?p>3?Math.sin(f*f):Math.max(Math.min(Math.tan(f),1),-1):1-(2*f/u%2+2)%2:1-4*Math.abs(Math.round(f/u)-f/u):Math.sin(f),o=(c?1-P+P*Math.sin(u*e/c):1)*S(o)*Math.abs(o)**y*(e<i?e/i:e<i+_?1-(e-i)/_*(1-C):e<i+_+l?C:e<h-r?(h-e-r)/t*C:0),o=r?o/2+(r>e?0:(e<h-r?1:(h-e)/r)*B[e-r|0]/2/a):o,x&&(o=K=a0*A+t0*(A=D)+X*(D=o)-k*I-Y*(I=K))),V=(n+=d+=b)*Math.cos(J*O++),f+=V+V*H*Math.sin(e**5),M&&++M>q&&(n+=v,z+=v,M=0),c&&!(++Q%c)&&(n=z,d=$,M=M||1);return B},getNote:function(a=0,m=440){return m*2**(a/12)}};let w;function b0(){const a=m0({volume:1,randomness:0,frequency:220,shape:1,attack:.12,sustain:.53,release:.15,shapeCurve:.76,slide:0,deltaSlide:0,pitchJump:0,pitchJumpTime:0,repeatTime:0,noise:.1,modulation:0,bitCrush:0,delay:0,sustainVolume:.39,decay:.02,tremolo:0}),m=u0(()=>l(a));o0(()=>{G.volume=.3,j.state.midi=!1}),r0(()=>{j.state.midi=!0}),l0(()=>n0.note,t=>{i(t)});const n={volume:{min:0,max:1,default:1,step:.01},randomness:{min:0,max:1,default:.05,step:.01},frequency:{min:20,max:2e4,default:220,step:10},attack:{min:0,max:2,default:.01,step:.01},sustain:{min:0,max:2,default:.3,step:.01},release:{min:0,max:2,default:.1,step:.01},shape:{min:0,max:4,default:0,step:1},shapeCurve:{min:0,max:2,default:1,step:.01},slide:{min:-10,max:10,default:0,step:.1},deltaSlide:{min:-10,max:10,default:0,step:.1},pitchJump:{min:-10,max:10,default:0,step:.1},pitchJumpTime:{min:0,max:2,default:0,step:.01},repeatTime:{min:0,max:2,default:0,step:.01},noise:{min:0,max:1,default:0,step:.01},modulation:{min:0,max:100,default:0,step:1},bitCrush:{min:0,max:1,default:0,step:.01},delay:{min:0,max:2,default:0,step:.01},sustainVolume:{min:0,max:1,default:1,step:.01},decay:{min:0,max:2,default:.1,step:.01},tremolo:{min:0,max:1,default:0,step:.01}};async function i(t){(t==null?void 0:t.type)!="noteoff"&&((t==null?void 0:t.type)=="noteon"&&(a.frequency=Math.pow(2,(t.number-69)/12)*440),w||(w=M0),w(...m.value))}function l(t){return[t.volume??1,t.randomness??.05,t.frequency??220,t.attack??0,t.sustain??0,t.release??.1,t.shape??0,t.shapeCurve??1,t.slide??0,t.deltaSlide??0,t.pitchJump??0,t.pitchJumpTime??0,t.repeatTime??0,t.noise??0,t.modulation??0,t.bitCrush??0,t.delay??0,t.sustainVolume??1,t.decay??0,t.tremolo??0]}return{sound:a,limits:n}}const x0={class:"flex flex-col gap-gap-4ZZFX"},g0={class:"flex flex-wrap is-group p-4 m-4"},S0={__name:"SynthZzfx",setup(a){const{sound:m,limits:n}=b0();return(i,l)=>{const t=i0,p=s0;return F(),E("div",x0,[f0("div",g0,[(F(!0),E(d0,null,p0(R(n),(y,d)=>(F(),c0(t,h0({ref_for:!0},y,{modelValue:R(m)[d],"onUpdate:modelValue":b=>R(m)[d]=b,param:d}),null,16,["modelValue","onUpdate:modelValue","param"]))),256))]),_0(p)])}}};export{S0 as default};
