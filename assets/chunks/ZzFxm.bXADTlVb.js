import{r as N,P as X,f as d,g as p,h as a,F as C,j as D,k as L,au as Z,m as A,ag as E}from"./framework.DBqT_UJK.js";const j=(...b)=>{let v=R.createBufferSource(),t=R.createBuffer(b.length,b[0].length,m);return b.map((r,c)=>t.getChannelData(c).set(r)),v.buffer=t,v.connect(R.destination),v.start(),v},G=(b=1,v=.05,t=220,r=0,c=0,g=.1,k=0,y=1,n=0,e=0,u=0,s=0,l=0,h=0,f=0,_=0,i=0,S=1,T=0,P=0)=>{let x=2*Math.PI,F=n*=500*x/m**2,I=(0<f?1:-1)*x/4,U=t*=(1+2*v*Math.random()-v)*x/m,V=[],M=0,B=0,o=0,z=1,H=0,$=0,w=0,J,O;for(r=99+m*r,T*=m,c*=m,g*=m,i*=m,e*=500*x/m**3,f*=x/m,u*=x/m,s*=m,l=m*l|0,O=r+T+c+g+i|0;o<O;V[o++]=w)++$%(100*_|0)||(w=k?1<k?2<k?3<k?Math.sin((M%x)**3):Math.max(Math.min(Math.tan(M),1),-1):1-(2*M/x%2+2)%2:1-4*Math.abs(Math.round(M/x)-M/x):Math.sin(M),w=(l?1-P+P*Math.sin(2*Math.PI*o/l):1)*(0<w?1:-1)*Math.abs(w)**y*b*K*(o<r?o/r:o<r+T?1-(o-r)/T*(1-S):o<r+T+c?S:o<O-i?(O-o-i)/g*S:0),w=i?w/2+(i>o?0:(o<O-i?1:(O-o)/i)*V[o-i|0]/2):w),J=(t+=n+=e)*Math.sin(B*f-I),M+=J-J*h*(1-1e9*(Math.sin(o)+1)%2),B+=J-J*h*(1-1e9*(Math.sin(o)**2+1)%2),z&&++z>s&&(t+=u,U+=u,z=0),!l||++H%l||(t=U,n=F,z=z||1);return V},K=.3,m=44100,R=new(window.AudioContext||webkitAudioContext),Q=(b,v,t,r=125)=>{let c,g,k,y,n,e,u,s,l,h,f,_,i,S=0,T,P=[],x=[],F=[],I=0,U=0,V=1,M={},B=m/r*60>>2;for(;V;I++)P=[V=s=_=0],t.map((o,z)=>{for(u=v[o][I]||[0,0,0],V|=!!v[o][I],T=_+(v[o][0].length-2-!s)*B,i=z==t.length-1,g=2,y=_;g<u.length+i;s=++g){for(n=u[g],l=g==u.length+i-1&&i||h!=(u[0]||0)|n|0,k=0;k<B&&s;k++>B-99&&l?f+=(f<1)/99:0)e=(1-f)*P[S++]/2||0,x[y]=(x[y]||0)-e*U+e,F[y]=(F[y++]||0)+e*U+e;n&&(f=n%1,U=u[1]||0,(n|=0)&&(P=M[[h=u[S=0]||0,n]]=M[[h,n]]||(c=[...b[h]],c[2]*=2**((n-12)/12),n>0?G(...c):[])))}_=T});return[x,F]},Y=`
[[[, 0, 22, , .07, .07, 2, 0, , , .5, .01], [2, 0, 426, .01, .2, .48, , 44, , , 200, , , .1], [2, 0, 426, , .02, .2, , 44, , , 200, , , .1], [, 0, 84, , , , , .7, , , , .5, , 6.7, 1, .05], [2, 0, 4e3, , , .03, 2, 1.25, , , , , .02, 6.8, -.3, , .5], [, 0, 209, , .02, .25, 3], [, 0, 655, , , .09, 3, 1.65, , , , , .02, 3.8, -.1, , .2]], [[[, -1, 22, , , , 22, , , , 22, , 17, , 20, , 22, , , , 22, , 20, , , , 22, , 20, , 17, , 22, , 20, , , , 20, , , , 20, , 17, , 20, , 20, , , , 20, , 17, , , , 20, , 17, , 20, , 22, ,]], [[, -1, 15, , , , 15, , , , 15, , 15, , 15, , 15, , , , 15, , 15, , , , 15, , 15, , 17, , 20, , 22, , , , 22, , , , 22, , 17, , 20, , 22, , , , , , , , , , , , 17, , 20, , 17, ,]], [[, -1, 22, , , , 22, , , , 22, , 17, , 20, , 22, , , , 22, , 20, , , , 22, , 20, , 17, , 22, , 20, , , , 20, , , , 20, , 17, , 20, , 20, , , , 20, , 17, , , , 20, , 17, , 20, , 22, ,], [1, 1, 34.5, , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , 34.5, , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , ,], [2, 1, , , , , , , , , , , 34.5, , , , , , 34, , , , , , 34.5, , , , , , 34.5, , 34, , , , , , , , , , , , 34.5, , , , , , 34, , , , , , 34.5, , , , , , 34.5, , 34, ,]], [[, -1, 15, , , , 15, , , , 15, , 15, , 15, , 15, , , , 15, , 15, , , , 15, , 15, , 17, , 20, , 22, , , , 22, , , , 22, , 17, , 20, , 22, , , , , , , , , , , , 17, , 20, , 17, ,], [1, 1, 34.5, , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , 34.5, , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , ,], [2, 1, , , , , , , , , , , 34.5, , , , , , 34, , , , , , 34.5, , , , , , 34.5, , 34, , , , , , , , , , , , 34.5, , , , , , 34, , , , , , 34.5, , , , , , 34.5, , 34.5, ,]], [[, -1, 22, , , , 22, , , , 22, , 17, , 20, , 22, , , , 22, , 20, , , , 22, , 20, , 17, , 22, , 20, , , , 20, , , , 20, , 17, , 20, , 20, , , , 20, , 17, , , , 20, , 17, , 20, , 22, ,], [3, -1, 25, , , , , , 25, , , , , , 25, , , , , , , , 25, , , , , , , , , , , , 25, , , , , , 25, , , , , , 25, , , , , , , , 25, , , , , , , , , , , ,], [1, 1, 34.5, , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , 34.5, , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , ,], [4, -1, , , 32, , 32, , , , , , 32, , , , 32, , 32, , 32, , , , 32, , , , 32, , 32, , 32, , , , 32, , 32, , , , , , 32, , , , 32, , 32, , 32, , , , 32, , , , 32, , 32, , 32, ,], [6, -1, , , , , , , , , 25, , , , , , , , , , , , , , , , 25, , , , , , , , , , , , , , , , 25, , , , , , , , , , , , , , , , 25, , , , , , , ,], [2, 1, , , , , , , , , , , 34.5, , , , , , 34.5, , , , , , 34.5, , , , , , 34.5, , 34.5, , , , , , , , , , , , 34.5, , , , , , 34.5, , , , , , 34.5, , , , , , 34.5, , 34.5, ,]], [[, -1, 15, , , , 15, , , , 15, , 15, , 15, , 15, , , , 15, , 15, , , , 15, , 15, , 17, , 20, , 22, , , , 22, , , , 22, , 17, , 20, , 22, , , , , , , , , , , , 17, , 20, , 17, ,], [3, -1, 25, , , , , , 25, , , , , , 25, , , , , , , , 25, , , , , , , , , , , , 25, , , , , , 25, , , , , , 25, , , , , , , , 25, , , , , , , , , , , ,], [1, 1, 34.5, , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , 34.5, , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , ,], [4, -1, , , 32, , 32, , , , , , 32, , , , 32, , 32, , 32, , , , 32, , , , 32, , 32, , 32, , , , 32, , 32, , , , , , 32, , , , 32, , 32, , 32, , , , 32, , , , 32, , 32, , 32, ,], [6, -1, , , , , , , , , 25, , , , , , , , , , , , , , , , 25, , , , , , , , , , , , , , , , 25, , , , , , , , , , , , , , , , 25, , , , , , , ,], [2, 1, , , , , , , , , , , 34.5, , , , , , 34.5, , , , , , 34.5, , , , , , 34.5, , 34.5, , , , , , , , , , , , 34.5, , , , , , 34.5, , , , , , 34.5, , , , , , 34.5, , 34.5, ,]], [[, -1, 22, , , , 22, , , , 22, , 17, , 20, , 22, , , , 22, , 20, , , , 22, , 20, , 17, , 22, , 20, , , , 20, , , , 20, , 17, , 20, , 20, , , , 20, , 17, , , , 20, , 17, , 20, , 22, ,], [5, 1, 22.5, , , , 22.5, , , , 22.5, , 22.5, , , , 22.5, , , , 22.5, , , , 22.5, , 22.5, , , , 22.5, , 22.5, , 20.5, , , , 20.5, , , , 20.5, , 20.5, , , , 20.5, , , , 20.5, , , , 20.5, , 20.5, , , , 20.5, , 20.5, ,], [3, -1, 25, , , , , , 25, , , , , , 25, , , , , , , , 25, , , , , , , , , , , , 25, , , , , , 25, , , , , , 25, , , , , , , , 25, , , , , , , , , , , ,], [1, 1, 34.5, , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , 34.5, , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , ,], [4, -1, , , 32, , 32, , , , , , 32, , , , 32, , 32, , 32, , , , 32, , , , 32, , 32, , 32, , , , 32, , 32, , , , , , 32, , , , 32, , 32, , 32, , , , 32, , , , 32, , 32, , 32, ,], [6, -1, , , , , , , , , 25, , , , , , , , , , , , , , , , 25, , , , , , , , , , , , , , , , 25, , , , , , , , , , , , , , , , 25, , , , , , , ,], [2, 1, , , , , , , , , , , 34.5, , , , , , 34.5, , , , , , 34.5, , , , , , 34.5, , 34.5, , , , , , , , , , , , 34.5, , , , , , 34.5, , , , , , 34.5, , , , , , 34.5, , 34.5, ,]], [[, -1, 15, , , , 15, , , , 15, , 15, , 15, , 15, , , , 15, , 15, , , , 15, , 15, , 17, , 20, , 22, , , , 22, , , , 22, , 17, , 20, , 22, , , , , , , , , , , , 17, , 20, , 17, ,], [5, 1, 27.5, , , , 27.5, , , , 27.5, , 27.5, , , , 27.5, , , , 27.5, , , , 27.5, , 27.5, , , , 27.5, , 27.5, , 22.5, , , , 22.5, , , , 22.5, , 22.5, , , , 22.5, , , , 22.5, , , , 22.5, , 22.5, , , , 22.5, , 22.5, ,], [3, -1, 25, , , , , , 25, , , , , , 25, , , , , , , , 25, , , , , , , , , , , , 25, , , , , , 25, , , , , , 25, , , , , , , , 25, , , , , , , , , , , ,], [1, 1, 34.5, , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , 34.5, , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , ,], [4, -1, , , 32, , 32, , , , , , 32, , , , 32, , 32, , 32, , , , 32, , , , 32, , 32, , 32, , , , 32, , 32, , , , , , 32, , , , 32, , 32, , 32, , , , 32, , , , 32, , 32, , 32, ,], [6, -1, , , , , , , , , 25, , , , , , , , , , , , , , , , 25, , , , , , , , , , , , , , , , 25, , , , , , , , , , , , , , , , 25, , , , , , , ,], [2, 1, , , , , , , , , , , 34.5, , , , , , 34.5, , , , , , 34.5, , , , , , 34.5, , 34.5, , , , , , , , , , , , 34.5, , , , , , 34.5, , , , , , 34.5, , , , , , 34.5, , 34.5, ,]], [[, -1, 22, , , , 22, , , , 22, , 17, , 20, , 22, , , , 22, , 20, , , , 22, , 20, , 17, , 22, , 20, , , , 20, , , , 20, , 17, , 20, , 20, , , , 20, , 17, , , , 20, , 17, , 20, , 22, ,], [5, 1, 10, , 13, , , , 15, , 17, , , , 20, , 22, , , , 20, , , , 17, , 22, , 22, , 17, , 20, , , , , , , , , , , , , , , , , , , , , , 20, , 17, , 20, , 22, , 25, , 27, ,], [3, -1, 25, , , , , , 25, , , , , , 25, , , , , , , , 25, , , , , , , , , , , , 25, , , , , , 25, , , , , , 25, , , , , , , , 25, , , , , , , , , , , ,], [1, 1, 34.5, , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , 34.5, , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , ,], [4, -1, , , 32, , 32, , , , , , 32, , , , 32, , 32, , 32, , , , 32, , , , 32, , 32, , 32, , , , 32, , 32, , , , , , 32, , , , 32, , 32, , 32, , , , 32, , , , 32, , 32, , 32, ,], [6, -1, , , , , , , , , 25, , , , , , , , , , , , , , , , 25, , , , , , , , , , , , , , , , 25, , , , , , , , , , , , , , , , 25, , , , , , , ,], [2, 1, , , , , , , , , , , 34.5, , , , , , 34.5, , , , , , 34.5, , , , , , 34.5, , 34.5, , , , , , , , , , , , 34.5, , , , , , 34.5, , , , , , 34.5, , , , , , 34.5, , 34.5, ,]], [[, -1, 15.26, , , , 15.26, , , , 15.26, , 15.26, , 15.26, , 15.26, , , , 15.26, , 15.26, , , , 15.26, , 15.26, , 17.26, , 20.26, , 22.26, , , , 22.26, , , , 22.26, , 17.26, , 20.26, , 22.26, , , , , , , , , , , , 17.26, , 20.26, , 17.26, ,], [3, -1, 25, , , , , , 25, , , , , , 25, , , , , , , , 25, , , , , , , , , , , , 25, , , , , , 25, , , , , , 25, , , , , , , , 25, , , , , , , , , , , ,], [1, 1, 34.5, , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , 34.5, , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , ,], [5, 1, , , 27, , 25, , , , 27, , , , 25, , 27, , , , 25, , 22, , 20, , 22, , , , 18, , 20, , 22, , , , 22, , , , 22, , , , 22, , , , 25, , 22, , , , 25, , , , 22, , 25, , 22, ,], [4, -1, , , 32, , 32, , , , , , 32, , , , 32, , 32, , 32, , , , 32, , , , 32, , 32, , 32, , , , 32, , 32, , , , , , 32, , , , 32, , 32, , 32, , , , 32, , , , 32, , 32, , 32, ,], [6, -1, , , , , , , , , 25, , , , , , , , , , , , , , , , 25, , , , , , , , , , , , , , , , 25, , , , , , , , , , , , , , , , 25, , , , , , , ,], [2, 1, , , , , , , , , , , 34.5, , , , , , 34.5, , , , , , 34.5, , , , , , 34.5, , 34.5, , , , , , , , , , , , 34.5, , , , , , 34.5, , , , , , 34.5, , , , , , 34.5, , 34.5, ,]]], [0, 1, 2, 3, 4, 5, 4, 5, 6, 7, 6, 7, 8, 9, 8, 9, 6, 7, 6, 7, 0, 8, 9, 8, 9, 6, 7, 6, 7], 187.5, { "title": "Cuddly Demos - Main Menu", "notes": "This is a conversion of the main menu tune from the Atari ST demo 'The Cuddly Demos', by The Carebears. The original was composed by Jochen Hippel (aka. MadMax). This pattern data was taken from a MOD file - I have no idea who converted it." }]`,q={class:"p-5 flex flex-col mt-20"},W={class:"flex items-center gap-2 p-4 sticky top-12 backdrop-blur-xl self-start"},e2={class:"flex flex-col gap-2"},t2={class:"p-4 flex flex-col gap-2 overflow-x-scroll"},l2={class:"p-0 flex gap-1"},a2=["title"],s2=["onUpdate:modelValue"],n2={class:"p-2 flex flex-col gap-4"},o2=["onUpdate:modelValue"],i2={class:"p-2 flex flex-col gap-2"},r2={class:"flex gap-1 overflow-x-scroll py-2"},u2=["onUpdate:modelValue"],d2={class:"p-2 flex flex-col gap-2"},p2={class:"p-2 flex flex-col gap-2"},c2={class:"flex flex-col gap-4"},f2={class:"text-lg capitalize"},x2=["onUpdate:modelValue"],v2={__name:"ZzFxm",setup(b){const v={volume:"VOL",randomness:"RND",frequency:"FRQ",attack:"ATT",sustain:"SUS",release:"REL",shape:"SHP",shapeCurve:"SHC",slide:"SLI",deltaSlide:"DLS",pitchJump:"PJM",pitchJumpTime:"PJT",repeatTime:"RPT",noise:"NOI",modulation:"MOD",bitCrush:"BIT",delay:"DEL",sustainVolume:"SUV",decay:"DEC",tremolo:"TRM"},t=N(y(Y)),r=N(!1);let c;async function g(){if(r.value)return;let n=Q(...t.value);c=j(...n),c.loop=!0,await R.resume(),r.value=!0}async function k(){r.value&&(c.stop(),c.disconnect(),c=null,await R.suspend(),r.value=!1)}function y(n){return n=n.replace(/,\s*(?=[,\]])/g,",null").replace(new RegExp("(?<=\\[)\\s*,","g"),"null,"),n=n.replace(/(\D)\.(\d)/g,"$10.$2"),JSON.parse(n,(e,u)=>{if(u!==null)return u})}return(n,e)=>{const u=X("tooltip");return d(),p("div",q,[a("div",W,[e[3]||(e[3]=a("a",{class:"text-4xl",href:"https://github.com/keithclark/ZzFXM",target:"_blank"},"FXM",-1)),a("button",{class:"text-button p-8 text-xl",onClick:e[0]||(e[0]=s=>g())},"PLAY"),a("button",{class:"text-button p-8 text-xl",onClick:e[1]||(e[1]=s=>k())},"STOP")]),a("div",e2,[a("div",t2,[e[4]||(e[4]=a("div",{class:"text-xl sticky left-0"},"Instrument list",-1)),a("div",l2,[(d(),p(C,null,D(v,(s,l)=>a("div",{class:"p-0",key:s},[L((d(),p("div",{class:"text-center text-sm dark-bg-dark-8 py-1 rounded-lg w-10",title:l},[Z(A(s),1)],8,a2)),[[u,l]])])),64))]),(d(!0),p(C,null,D(t.value[0],(s,l)=>(d(),p("div",{class:"p-0 flex gap-1",key:s},[(d(),p(C,null,D(20,(h,f)=>a("div",{class:"p-0",key:h},[L(a("input",{class:"text-center text-sm dark-bg-dark-8 py-1 rounded-lg w-10","onUpdate:modelValue":_=>t.value[0][l][f]=_},null,8,s2),[[E,t.value[0][l][f]]])])),64))]))),128))]),a("div",n2,[e[5]||(e[5]=a("div",{class:"text-xl"},"Pattern list",-1)),(d(!0),p(C,null,D(t.value[1],(s,l)=>(d(),p("div",{class:"flex gap-1 flex-col overflow-x-scroll py-2",key:l},[(d(!0),p(C,null,D(s,(h,f)=>(d(),p("div",{class:"p-0 flex gap-1",key:f},[(d(!0),p(C,null,D(h,(_,i)=>(d(),p("div",{class:"p-0",key:i},[L(a("input",{class:"text-center text-sm dark-bg-dark-8 py-1 rounded-lg w-10","onUpdate:modelValue":S=>t.value[1][l][f][i]=S},null,8,o2),[[E,t.value[1][l][f][i]]])]))),128))]))),128))]))),128))]),a("div",i2,[e[6]||(e[6]=a("div",{class:"text-xl"},"Sequence",-1)),a("div",r2,[(d(!0),p(C,null,D(t.value[2],s=>L((d(),p("input",{class:"text-center text-sm dark-bg-dark-8 py-1 rounded-lg w-10",key:s,"onUpdate:modelValue":l=>t.value[2][s]=l},null,8,u2)),[[E,t.value[2][s]]])),128))])]),a("div",d2,[e[7]||(e[7]=a("div",{class:"text-xl"},"Speed",-1)),L(a("input",{class:"dark-bg-dark-8 p-2 rounded-lg","onUpdate:modelValue":e[2]||(e[2]=s=>t.value[3]=s)},null,512),[[E,t.value[3]]])]),a("div",p2,[e[8]||(e[8]=a("div",{class:"text-xl"},"Metadata ",-1)),a("div",c2,[(d(!0),p(C,null,D(t.value[4],(s,l)=>(d(),p("div",{class:"p-0 flex gap-2",key:l},[a("div",f2,A(l)+":",1),L(a("input",{"onUpdate:modelValue":h=>t.value[4][l]=h},null,8,x2),[[E,t.value[4][l]]])]))),128))])])])])}}};export{v2 as default};
