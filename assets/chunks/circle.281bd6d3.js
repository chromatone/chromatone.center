import{_ as z}from"./ring.f8468ea1.js";import{n as M,i as N}from"./theory.61e5aadb.js";import{g as _,n as I}from"./colors.3c2dadc4.js";import{g as h,r as b}from"./calculations.65ee336d.js";import{o as c,c as f,F as m,r as d,d as w,u as e,a as s,h as O,t as $}from"./framework.38382cbc.js";const D={class:"select-none m-2",version:"1.1",baseProfile:"full",viewBox:"100 100 800 800",xmlns:"http://www.w3.org/2000/svg",style:{"touch-action":"none"},"font-family":"Commissioner, sans-serif","text-anchor":"middle","dominant-baseline":"middle"},P=["x1","x2","y1","y2"],j=["transform","onClick"],F=["fill"],q={"font-size":"25",fill:"currentColor"},A={"text-anchor":"middle","dominant-baseline":"middle"},E=["onClick"],T=["x","y"],U={"text-anchor":"middle","dominant-baseline":"middle"},G=["d"],H=["d"],J={class:"degrees"},K={"font-size":"30"},Q=["href","startOffset"],W={"text-anchor":"middle","dominant-baseline":"middle"},X=["d"],Y=["d"],Z={class:"roman",style:{"pointer-events":"none"}},tt={"font-size":"36"},ot=["href","startOffset"],et={"text-anchor":"middle","dominant-baseline":"middle"},g=140,R=30,a=350,r=300,st=330,nt=330,B=260,ft={__name:"circle",props:{chroma:{type:String,default:"1010110101010"},fixed5:{type:Boolean,default:!1}},emits:["update:chroma"],setup(p,{emit:k}){const x=p,C=[...M].map((l,o)=>({name:l,pitch:o})),u=g-R,v=B-30;function S(l){if(l==0)return;let o=x.chroma.split("");o[l]==1?o[l]=0:o[l]=1,k("update:chroma",o.join(""))}function V(l){let o=x.chroma.split(""),i=l[0];if(i!=0&&!(i==7&&x.fixed5)){if(l.length==1)o[i]==1?o[i]=0:o[i]=1;else{let t=l[1];o[i]==0&&o[t]==1||o[i]==o[t]?(o[i]=1,o[t]=0):(o[i]=0,o[t]=1)}k("update:chroma",o.join(""))}}const y={Tonic:{arc:[-15,15],steps:[0],offset:550,roffset:475,path:"Left",roman:"I"},Supertonic:{arc:[15,75],steps:[1,2],offset:840,roffset:720,path:"Left",roman:"II"},Mediant:{arc:[75,135],steps:[3,4],offset:1e3,roffset:860,path:"Right",roman:"III"},Subdominant:{arc:[135,195],steps:[5,6],offset:650,roffset:550,path:"Right",roman:"IV"},Dominant:{arc:[195,225],steps:[7],offset:365,roffset:315,path:"Right",roman:"V"},Submediant:{arc:[225,285],steps:[8,9],offset:100,roffset:85,path:"Right",roman:"VI"},Subtonic:{arc:[285,345],steps:[10,11],offset:270,roffset:230,path:"Left",roman:"VII"}};return(l,o)=>{const i=z;return c(),f("svg",D,[(c(),f(m,null,d(y,t=>w(i,{class:"cursor-pointer",key:t,onClick:n=>V(t.steps),cx:500,cy:500,radius:st,thickness:nt,from:t.arc[0],to:t.arc[1],op:.3,fill:`hsla(${(t.arc[0]+t.arc[1])/2+30*e(_).tonic},80%,50%,1)`},null,8,["onClick","from","to","fill"])),64)),(c(),f(m,null,d(12,t=>s("g",{class:"fifths",key:t},[p.chroma.split("")[t*7%12]==1&&p.chroma.split("")[(t+1)*7%12]==1?(c(),f("line",{key:0,x1:e(h)(t*7%12,12,u,1e3).x,x2:e(h)((t+1)*7%12,12,u,1e3).x,y1:e(h)(t*7%12,12,u,1e3).y,y2:e(h)((t+1)*7%12,12,u,1e3).y,stroke:"currentColor","stroke-linecap":"round","stroke-width":"2"},null,8,P)):O("",!0)])),64)),(c(!0),f(m,null,d(e(b)(e(C),e(_).tonic),(t,n)=>(c(),f("g",{class:"note cursor-pointer transition-all duration-300 ease-out",key:n,transform:`translate(${e(h)(n,12,g,1e3).x} ${e(h)(n,12,g,1e3).y})`,onClick:L=>e(_).tonic=t.pitch},[s("circle",{class:"transition-all duration-300 ease",r:R,fill:p.chroma.split("")[n]==1?e(I)(t.pitch,3):t.name.length==2?"#5552":"#ccc2"},null,8,F),s("text",q,[s("tspan",A,$(t.name),1)])],8,j))),128)),(c(!0),f(m,null,d(e(b)(e(C),e(_).tonic),(t,n)=>(c(),f("g",{class:"interval cursor-pointer",key:n,onClick:L=>S(n)},[w(i,{class:"transition-all duration-300 ease",cx:500,cy:500,radius:B,thickness:60,from:n*30-15,to:n*30+15,fill:p.chroma.split("")[n]==1?e(I)(t.pitch,3):t.name.length==2?"#5552":"#ccc2"},null,8,["from","to","fill"]),s("text",{x:e(h)(n,12,v,1e3).x,y:e(h)(n,12,v,1e3).y,"font-size":"20","text-anchor":"middle",fill:"currentColor"},[s("tspan",U,$(e(N)[n]),1)],8,T)],8,E))),128)),s("path",{id:"pathRight",d:`M 500 500 m ${-a}, 0 a ${a}, ${a} 0 1, 0 ${a*2}, 0  a ${a}, ${a} 0 1, 0  ${-a*2}, 0`,fill:"none"},null,8,G),s("path",{id:"pathLeft",d:`M 500 500 m ${-a}, 0 a ${a}, ${a} 0 1, 1 ${a*2}, 0  a ${a}, ${a} 0 1, 1  ${-a*2}, 0`,fill:"none"},"//https://stackoverflow.com/questions/5737975/circle-drawing-with-svgs-arc-path",8,H),s("g",J,[s("text",K,[(c(),f(m,null,d(y,(t,n)=>s("textPath",{href:`#path${t.path}`,key:t,startOffset:t.offset,fill:"currentColor"},[s("tspan",W,$(n),1)],8,Q)),64))])]),s("path",{id:"pathBLeft",d:`M 500 500 m ${-r}, 0 a ${r}, ${r} 0 1, 1 ${r*2}, 0  a ${r}, ${r} 0 1, 1  ${-r*2}, 0`,fill:"none"},null,8,X),s("path",{id:"pathBRight",d:`M 500 500 m ${-r}, 0 a ${r}, ${r} 0 1, 0 ${r*2}, 0  a ${r}, ${r} 0 1, 0  ${-r*2}, 0`,fill:"none"},null,8,Y),s("g",Z,[s("text",tt,[(c(),f(m,null,d(y,(t,n)=>s("textPath",{href:`#pathB${t.path}`,key:t,startOffset:t.roffset,fill:"currentColor"},[s("tspan",et,$(t.roman),1)],8,ot)),64))])])])}}};export{ft as _};
