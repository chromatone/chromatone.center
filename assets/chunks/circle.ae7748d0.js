import{_ as M}from"./ring.ed44469c.js";import{v as c,b as f,a as m,H as d,T as b,N as s,F as e,B as O,X as _}from"./framework.7e747cd7.js";import{n as V,i as N}from"./theory.61e5aadb.js";import{g as $,n as I}from"./colors.abbc28c6.js";import{g as h,r as w}from"./calculations.3384a913.js";const P={class:"select-none m-2",version:"1.1",baseProfile:"full",viewBox:"100 100 800 800",xmlns:"http://www.w3.org/2000/svg",style:{"touch-action":"none"},"font-family":"Commissioner, sans-serif","text-anchor":"middle","dominant-baseline":"middle"},T=["x1","x2","y1","y2"],j=["transform","onClick"],D=["fill"],F={"font-size":"25",fill:"currentColor"},H={"text-anchor":"middle","dominant-baseline":"middle"},q=["onClick"],A=["x","y"],U={"text-anchor":"middle","dominant-baseline":"middle"},X=["d"],E=["d"],G={class:"degrees"},J={"font-size":"30"},K=["href","startOffset"],Q={"text-anchor":"middle","dominant-baseline":"middle"},W=["d"],Y=["d"],Z={class:"roman",style:{"pointer-events":"none"}},tt={"font-size":"36"},ot=["href","startOffset"],st={"text-anchor":"middle","dominant-baseline":"middle"},g=140,R=30,a=350,r=300,et=330,nt=330,B=260,ft={__name:"circle",props:{chroma:{type:String,default:"1010110101010"},fixed5:{type:Boolean,default:!1}},emits:["update:chroma"],setup(p,{emit:k}){const x=p,C=[...V].map((l,o)=>({name:l,pitch:o})),u=g-R,v=B-30;function S(l){if(l==0)return;let o=x.chroma.split("");o[l]==1?o[l]=0:o[l]=1,k("update:chroma",o.join(""))}function z(l){let o=x.chroma.split(""),i=l[0];if(i!=0&&!(i==7&&x.fixed5)){if(l.length==1)o[i]==1?o[i]=0:o[i]=1;else{let t=l[1];o[i]==0&&o[t]==1||o[i]==o[t]?(o[i]=1,o[t]=0):(o[i]=0,o[t]=1)}k("update:chroma",o.join(""))}}const y={Tonic:{arc:[-15,15],steps:[0],offset:550,roffset:475,path:"Left",roman:"I"},Supertonic:{arc:[15,75],steps:[1,2],offset:840,roffset:720,path:"Left",roman:"II"},Mediant:{arc:[75,135],steps:[3,4],offset:1e3,roffset:860,path:"Right",roman:"III"},Subdominant:{arc:[135,195],steps:[5,6],offset:650,roffset:550,path:"Right",roman:"IV"},Dominant:{arc:[195,225],steps:[7],offset:365,roffset:315,path:"Right",roman:"V"},Submediant:{arc:[225,285],steps:[8,9],offset:100,roffset:85,path:"Right",roman:"VI"},Subtonic:{arc:[285,345],steps:[10,11],offset:270,roffset:230,path:"Left",roman:"VII"}};return(l,o)=>{const i=M;return c(),f("svg",P,[(c(),f(m,null,d(y,t=>b(i,{class:"cursor-pointer",key:t,onClick:n=>z(t.steps),cx:500,cy:500,radius:et,thickness:nt,from:t.arc[0],to:t.arc[1],op:.3,fill:`hsla(${(t.arc[0]+t.arc[1])/2+30*s($).tonic},80%,50%,1)`},null,8,["onClick","from","to","fill"])),64)),(c(),f(m,null,d(12,t=>e("g",{class:"fifths",key:t},[p.chroma.split("")[t*7%12]==1&&p.chroma.split("")[(t+1)*7%12]==1?(c(),f("line",{key:0,x1:s(h)(t*7%12,12,u,1e3).x,x2:s(h)((t+1)*7%12,12,u,1e3).x,y1:s(h)(t*7%12,12,u,1e3).y,y2:s(h)((t+1)*7%12,12,u,1e3).y,stroke:"currentColor","stroke-linecap":"round","stroke-width":"2"},null,8,T)):O("",!0)])),64)),(c(!0),f(m,null,d(s(w)(s(C),s($).tonic),(t,n)=>(c(),f("g",{class:"note cursor-pointer transition-all duration-300 ease-out",key:n,transform:`translate(${s(h)(n,12,g,1e3).x} ${s(h)(n,12,g,1e3).y})`,onClick:L=>s($).tonic=t.pitch},[e("circle",{class:"transition-all duration-300 ease",r:R,fill:p.chroma.split("")[n]==1?s(I)(t.pitch,3):t.name.length==2?"#5552":"#ccc2"},null,8,D),e("text",F,[e("tspan",H,_(t.name),1)])],8,j))),128)),(c(!0),f(m,null,d(s(w)(s(C),s($).tonic),(t,n)=>(c(),f("g",{class:"interval cursor-pointer",key:n,onClick:L=>S(n)},[b(i,{class:"transition-all duration-300 ease",cx:500,cy:500,radius:B,thickness:60,from:n*30-15,to:n*30+15,fill:p.chroma.split("")[n]==1?s(I)(t.pitch,3):t.name.length==2?"#5552":"#ccc2"},null,8,["from","to","fill"]),e("text",{x:s(h)(n,12,v,1e3).x,y:s(h)(n,12,v,1e3).y,"font-size":"20","text-anchor":"middle",fill:"currentColor"},[e("tspan",U,_(s(N)[n]),1)],8,A)],8,q))),128)),e("path",{id:"pathRight",d:`M 500 500 m ${-a}, 0 a ${a}, ${a} 0 1, 0 ${a*2}, 0  a ${a}, ${a} 0 1, 0  ${-a*2}, 0`,fill:"none"},null,8,X),e("path",{id:"pathLeft",d:`M 500 500 m ${-a}, 0 a ${a}, ${a} 0 1, 1 ${a*2}, 0  a ${a}, ${a} 0 1, 1  ${-a*2}, 0`,fill:"none"},"//https://stackoverflow.com/questions/5737975/circle-drawing-with-svgs-arc-path",8,E),e("g",G,[e("text",J,[(c(),f(m,null,d(y,(t,n)=>e("textPath",{href:`#path${t.path}`,key:t,startOffset:t.offset,fill:"currentColor"},[e("tspan",Q,_(n),1)],8,K)),64))])]),e("path",{id:"pathBLeft",d:`M 500 500 m ${-r}, 0 a ${r}, ${r} 0 1, 1 ${r*2}, 0  a ${r}, ${r} 0 1, 1  ${-r*2}, 0`,fill:"none"},null,8,W),e("path",{id:"pathBRight",d:`M 500 500 m ${-r}, 0 a ${r}, ${r} 0 1, 0 ${r*2}, 0  a ${r}, ${r} 0 1, 0  ${-r*2}, 0`,fill:"none"},null,8,Y),e("g",Z,[e("text",tt,[(c(),f(m,null,d(y,(t,n)=>e("textPath",{href:`#pathB${t.path}`,key:t,startOffset:t.roffset,fill:"currentColor"},[e("tspan",st,_(t.roman),1)],8,ot)),64))])])])}}};export{ft as _};
