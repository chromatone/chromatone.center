typeof BigInt>"u"&&(BigInt=function(t){if(isNaN(t))throw new Error("");return t});const o=BigInt(0),u=BigInt(1),I=BigInt(2),v=BigInt(3),_=BigInt(5),w=BigInt(10);BigInt(Number.MAX_SAFE_INTEGER);const A=2e3,s={s:u,n:o,d:u};function y(t,n){try{t=BigInt(t)}catch{throw b()}return t*n}function N(t){return typeof t=="bigint"?t:Math.floor(t)}function g(t,n){if(n===o)throw D();const i=Object.create(T.prototype);i.s=t<o?-u:u,t=t<o?-t:t;const e=E(t,n);return i.n=t/e,i.d=n/e,i}const P=[I*I,I,I*I,I,I*I,I*v,I,I*v];function C(t){const n=Object.create(null);if(t<=u)return n[t]=u,n;const i=e=>{n[e]=(n[e]||o)+u};for(;t%I===o;)i(I),t/=I;for(;t%v===o;)i(v),t/=v;for(;t%_===o;)i(_),t/=_;for(let e=0,f=I+_;f*f<=t;){for(;t%f===o;)i(f),t/=f;f+=P[e],e=e+1&7}return t>u&&i(t),n}const a=function(t,n){let i=o,e=u,f=u;if(t!=null)if(n!==void 0){if(typeof t=="bigint")i=t;else{if(isNaN(t))throw b();if(t%1!==0)throw k();i=BigInt(t)}if(typeof n=="bigint")e=n;else{if(isNaN(n))throw b();if(n%1!==0)throw k();e=BigInt(n)}f=i*e}else if(typeof t=="object"){if("d"in t&&"n"in t)i=BigInt(t.n),e=BigInt(t.d),"s"in t&&(i*=BigInt(t.s));else if(0 in t)i=BigInt(t[0]),1 in t&&(e=BigInt(t[1]));else if(typeof t=="bigint")i=t;else throw b();f=i*e}else if(typeof t=="number"){if(isNaN(t))throw b();if(t<0&&(f=-u,t=-t),t%1===0)i=BigInt(t);else{let r=1,l=0,d=1,B=1,c=1,m=1e7;for(t>=1&&(r=10**Math.floor(1+Math.log10(t)),t/=r);d<=m&&c<=m;){let h=(l+B)/(d+c);if(t===h){d+c<=m?(i=l+B,e=d+c):c>d?(i=B,e=c):(i=l,e=d);break}else t>h?(l+=B,d+=c):(B+=l,c+=d),d>m?(i=B,e=c):(i=l,e=d)}i=BigInt(i)*BigInt(r),e=BigInt(e)}}else if(typeof t=="string"){let r=0,l=o,d=o,B=o,c=u,m=u,h=t.replace(/_/g,"").match(/\d+|./g);if(h===null)throw b();if(h[r]==="-"?(f=-u,r++):h[r]==="+"&&r++,h.length===r+1?d=y(h[r++],f):h[r+1]==="."||h[r]==="."?(h[r]!=="."&&(l=y(h[r++],f)),r++,(r+1===h.length||h[r+1]==="("&&h[r+3]===")"||h[r+1]==="'"&&h[r+3]==="'")&&(d=y(h[r],f),c=w**BigInt(h[r].length),r++),(h[r]==="("&&h[r+2]===")"||h[r]==="'"&&h[r+2]==="'")&&(B=y(h[r+1],f),m=w**BigInt(h[r+1].length)-u,r+=3)):h[r+1]==="/"||h[r+1]===":"?(d=y(h[r],f),c=y(h[r+2],u),r+=3):h[r+3]==="/"&&h[r+1]===" "&&(l=y(h[r],f),d=y(h[r+2],f),c=y(h[r+4],u),r+=5),h.length<=r)e=c*m,f=i=B+e*l+m*d;else throw b()}else if(typeof t=="bigint")i=t,f=t,e=u;else throw b();if(e===o)throw D();s.s=f<o?-u:u,s.n=i<o?-i:i,s.d=e<o?-e:e};function S(t,n,i){let e=u;for(;n>o;t=t*t%i,n>>=u)n&u&&(e=e*t%i);return e}function L(t,n){for(;n%I===o;n/=I);for(;n%_===o;n/=_);if(n===u)return o;let i=w%n,e=1;for(;i!==u;e++)if(i=i*w%n,e>A)return o;return BigInt(e)}function j(t,n,i){let e=u,f=S(w,i,n);for(let r=0;r<300;r++){if(e===f)return BigInt(r);e=e*w%n,f=f*w%n}return 0}function E(t,n){if(!t)return n;if(!n)return t;for(;;){if(t%=n,!t)return n;if(n%=t,!n)return t}}function T(t,n){if(a(t,n),this instanceof T)t=E(s.d,s.n),this.s=s.s,this.n=s.n/t,this.d=s.d/t;else return g(s.s*s.n,s.d)}const D=function(){return new Error("Division by Zero")},b=function(){return new Error("Invalid argument")},k=function(){return new Error("Parameters must be integer")};T.prototype={s:u,n:o,d:u,abs:function(){return g(this.n,this.d)},neg:function(){return g(-this.s*this.n,this.d)},add:function(t,n){return a(t,n),g(this.s*this.n*s.d+s.s*this.d*s.n,this.d*s.d)},sub:function(t,n){return a(t,n),g(this.s*this.n*s.d-s.s*this.d*s.n,this.d*s.d)},mul:function(t,n){return a(t,n),g(this.s*s.s*this.n*s.n,this.d*s.d)},div:function(t,n){return a(t,n),g(this.s*s.s*this.n*s.d,this.d*s.n)},clone:function(){return g(this.s*this.n,this.d)},mod:function(t,n){if(t===void 0)return g(this.s*this.n%this.d,u);if(a(t,n),o===s.n*this.d)throw D();return g(this.s*(s.d*this.n)%(s.n*this.d),s.d*this.d)},gcd:function(t,n){return a(t,n),g(E(s.n,this.n)*E(s.d,this.d),s.d*this.d)},lcm:function(t,n){return a(t,n),s.n===o&&this.n===o?g(o,u):g(s.n*this.n,E(s.n,this.n)*E(s.d,this.d))},inverse:function(){return g(this.s*this.d,this.n)},pow:function(t,n){if(a(t,n),s.d===u)return s.s<o?g((this.s*this.d)**s.n,this.n**s.n):g((this.s*this.n)**s.n,this.d**s.n);if(this.s<o)return null;let i=C(this.n),e=C(this.d),f=u,r=u;for(let l in i)if(l!=="1"){if(l==="0"){f=o;break}if(i[l]*=s.n,i[l]%s.d===o)i[l]/=s.d;else return null;f*=BigInt(l)**i[l]}for(let l in e)if(l!=="1"){if(e[l]*=s.n,e[l]%s.d===o)e[l]/=s.d;else return null;r*=BigInt(l)**e[l]}return s.s<o?g(r,f):g(f,r)},log:function(t,n){if(a(t,n),this.s<=o||s.s<=o)return null;const i=Object.create(null),e=C(s.n),f=C(s.d),r=C(this.n),l=C(this.d);for(const c in f)e[c]=(e[c]||o)-f[c];for(const c in l)r[c]=(r[c]||o)-l[c];for(const c in e)c!=="1"&&(i[c]=!0);for(const c in r)c!=="1"&&(i[c]=!0);let d=null,B=null;for(const c in i){const m=e[c]||o,h=r[c]||o;if(m===o){if(h!==o)return null;continue}let F=h,O=m;const M=E(F,O);if(F/=M,O/=M,d===null&&B===null)d=F,B=O;else if(F*B!==d*O)return null}return d!==null&&B!==null?g(d,B):null},equals:function(t,n){return a(t,n),this.s*this.n*s.d===s.s*s.n*this.d},lt:function(t,n){return a(t,n),this.s*this.n*s.d<s.s*s.n*this.d},lte:function(t,n){return a(t,n),this.s*this.n*s.d<=s.s*s.n*this.d},gt:function(t,n){return a(t,n),this.s*this.n*s.d>s.s*s.n*this.d},gte:function(t,n){return a(t,n),this.s*this.n*s.d>=s.s*s.n*this.d},compare:function(t,n){a(t,n);let i=this.s*this.n*s.d-s.s*s.n*this.d;return(o<i)-(i<o)},ceil:function(t){return t=w**BigInt(t||0),g(N(this.s*t*this.n/this.d)+(t*this.n%this.d>o&&this.s>=o?u:o),t)},floor:function(t){return t=w**BigInt(t||0),g(N(this.s*t*this.n/this.d)-(t*this.n%this.d>o&&this.s<o?u:o),t)},round:function(t){return t=w**BigInt(t||0),g(N(this.s*t*this.n/this.d)+this.s*((this.s>=o?u:o)+I*(t*this.n%this.d)>this.d?u:o),t)},roundTo:function(t,n){a(t,n);const i=this.n*s.d,e=this.d*s.n,f=i%e;let r=N(i/e);return f+f>=e&&r++,g(this.s*r*s.n,s.d)},divisible:function(t,n){return a(t,n),s.n===o?!1:this.n*s.d%(s.n*this.d)===o},valueOf:function(){return Number(this.s*this.n)/Number(this.d)},toString:function(t=15){let n=this.n,i=this.d,e=L(n,i),f=j(n,i,e),r=this.s<o?"-":"";if(r+=N(n/i),n%=i,n*=w,n&&(r+="."),e){for(let l=f;l--;)r+=N(n/i),n%=i,n*=w;r+="(";for(let l=e;l--;)r+=N(n/i),n%=i,n*=w;r+=")"}else for(let l=t;n&&l--;)r+=N(n/i),n%=i,n*=w;return r},toFraction:function(t=!1){let n=this.n,i=this.d,e=this.s<o?"-":"";if(i===u)e+=n;else{const f=N(n/i);t&&f>o&&(e+=f,e+=" ",n%=i),e+=n,e+="/",e+=i}return e},toLatex:function(t=!1){let n=this.n,i=this.d,e=this.s<o?"-":"";if(i===u)e+=n;else{const f=N(n/i);t&&f>o&&(e+=f,n%=i),e+="\\frac{",e+=n,e+="}{",e+=i,e+="}"}return e},toContinued:function(){let t=this.n,n=this.d;const i=[];for(;n;){i.push(N(t/n));const e=t%n;t=n,n=e}return i},simplify:function(t=.001){const n=BigInt(Math.ceil(1/t)),i=this.abs(),e=i.toContinued();for(let f=1;f<e.length;f++){let r=g(e[f-1],u);for(let d=f-2;d>=0;d--)r=r.inverse().add(e[d]);let l=r.sub(i);if(l.n*n<l.d)return r.mul(this.s)}return this}};export{T as F};
