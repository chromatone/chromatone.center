import{g as A}from"./midi.e7db086d.js";import{g as I,a as d}from"./index.be7eb4a8.js";import{q as O,n as p,u as q,t as h,d as z,k as y,f as w,i as D,l as v}from"./index.140cffd8.js";var f={empty:!0,name:"",symbol:"",root:"",rootDegree:0,type:"",tonic:null,setNum:NaN,quality:"Unknown",chroma:"",normalized:"",aliases:[],notes:[],intervals:[]};function l(t){const[e,r,n,o]=O(t);return e===""?["",t]:e==="A"&&o==="ug"?["","aug"]:[e+r,n+o]}function a(t){if(t==="")return f;if(Array.isArray(t)&&t.length===2)return m(t[1],t[0]);{const[e,r]=l(t),n=m(r,e);return n.empty?m(t):n}}function m(t,e,r){const n=I(t),o=p(e||""),s=p(r||"");if(n.empty||e&&o.empty||r&&s.empty)return f;const $=q(o.pc,s.pc),i=n.intervals.indexOf($)+1;if(!s.empty&&!i)return f;const c=Array.from(n.intervals);for(let u=1;u<i;u++){const b=c[0][0],k=c[0][1],x=parseInt(b,10)+7;c.push(`${x}${k}`),c.shift()}const g=o.empty?[]:c.map(u=>h(o,u));t=n.aliases.indexOf(t)!==-1?t:n.aliases[0];const C=`${o.empty?"":o.pc}${t}${s.empty||i<=1?"":"/"+s.pc}`,S=`${e?o.pc+" ":""}${n.name}${i>1&&r?" over "+s.pc:""}`;return{...n,name:S,symbol:C,type:n.name,root:s.name,intervals:c,rootDegree:i,tonic:o.name,notes:g}}var N=z("Chord.chord","Chord.get",a);function U(t,e){const[r,n]=l(t);return r?h(r,e)+n:t}function _(t){const e=a(t),r=y(e.chroma);return w().filter(n=>r(n.chroma)).map(n=>n.name)}function j(t){const e=a(t),r=y(e.chroma);return d().filter(n=>r(n.chroma)).map(n=>e.tonic+n.aliases[0])}function B(t){const e=a(t),r=D(e.chroma);return d().filter(n=>r(n.chroma)).map(n=>e.tonic+n.aliases[0])}function E(t){const{intervals:e,tonic:r}=a(t),n=v(e,r);return o=>o?n(o>0?o-1:o):""}function F(t){const{intervals:e,tonic:r}=a(t);return v(e,r)}var K={getChord:m,get:a,detect:A,chordScales:_,extended:j,reduced:B,tokenize:l,transpose:U,degrees:E,steps:F,chord:N};export{K as c};
