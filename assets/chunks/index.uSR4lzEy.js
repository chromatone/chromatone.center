import{i as I,K as Dt,a8 as Mt,E as Ct,a9 as Pt,g as A}from"./framework.IUYQRuva.js";function Ot(){try{return"constructor"in GestureEvent}catch{return!1}}function rt(){return typeof window<"u"&&"ontouchstart"in window}function ot(s){return"pointerId"in s?null:s.type==="touchend"?s.changedTouches:s.targetTouches}function X(s){return Array.from(ot(s)).map(t=>t.identifier)}function p(s){const t="buttons"in s?s.buttons:0,{shiftKey:e,altKey:n,metaKey:i,ctrlKey:r}=s;return{buttons:t,shiftKey:e,altKey:n,metaKey:i,ctrlKey:r}}const W=s=>s;function b(s,t=W){const e=ot(s),{clientX:n,clientY:i}=e?e[0]:s;return t([n,i])}function $(s,t,e=W){const[n,i]=Array.from(s.touches).filter(g=>t.includes(g.identifier));if(!n||!i)throw Error("The event doesn't have two pointers matching the pointerIds");const r=i.clientX-n.clientX,o=i.clientY-n.clientY,a=(i.clientX+n.clientX)/2,u=(i.clientY+n.clientY)/2,f=Math.hypot(r,o),l=-(Math.atan2(r,o)*180)/Math.PI,m=e([f,l]),w=e([a,u]);return{values:m,origin:w}}function xt(s,t=W){const{scrollX:e,scrollY:n,scrollLeft:i,scrollTop:r}=s.currentTarget;return t([e||i||0,n||r||0])}const q=40,Z=800;function at(s,t=W){let{deltaX:e,deltaY:n,deltaMode:i}=s;return i===1?(e*=q,n*=q):i===2&&(e*=Z,n*=Z),t([e,n])}function J(s,t=W){return t([s.scale,s.rotation])}function ct(){}function ut(...s){return s.length===0?ct:s.length===1?s[0]:function(){var t;for(let e of s)t=e.apply(this,arguments)||t;return t}}function S(s,t){if(s===void 0){if(t===void 0)throw new Error("Must define fallback value if undefined is expected");s=t}return Array.isArray(s)?s:[s,s]}function Q(s,t){return Object.assign({},t,s||{})}function z(s,...t){return typeof s=="function"?s(...t):s}function x(s){return{_active:!1,_blocked:!1,_intentional:[!1,!1],_movement:[0,0],_initial:[0,0],_bounds:[[-1/0,1/0],[-1/0,1/0]],_lastEventType:void 0,_dragStarted:!1,_dragPreventScroll:!1,_dragIsTap:!0,_dragDelayed:!1,event:void 0,intentional:!1,values:[0,0],velocities:[0,0],delta:[0,0],movement:[0,0],offset:[0,0],lastOffset:[0,0],direction:[0,0],initial:[0,0],previous:[0,0],first:!1,last:!1,active:!1,timeStamp:0,startTime:0,elapsedTime:0,cancel:ct,canceled:!1,memo:void 0,args:void 0,...s}}function lt(){const s={hovering:!1,scrolling:!1,wheeling:!1,dragging:!1,moving:!1,pinching:!1,touches:0,buttons:0,down:!1,shiftKey:!1,altKey:!1,metaKey:!1,ctrlKey:!1,locked:!1},t=x({_pointerId:void 0,axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0,tap:!1,swipe:[0,0]}),e=x({_pointerIds:[],da:[0,0],vdva:[0,0],origin:void 0,turns:0}),n=x({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0}),i=x({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0}),r=x({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0});return{shared:s,drag:t,pinch:e,wheel:n,move:i,scroll:r}}class kt{constructor(t){this.classes=t,this.pointerIds=new Set,this.touchIds=new Set,this.supportsTouchEvents=rt(),this.supportsGestureEvents=Ot(),this.bind=(...e)=>{const n={};for(let i of this.classes)new i(this,e).addBindings(n);for(let i in this.nativeRefs)c(n,i,r=>this.nativeRefs[i]({...this.state.shared,event:r,args:e}));return this.config.domTarget?Ht(this,n):Lt(this,n)},this.clean=()=>{const{eventOptions:e,domTarget:n}=this.config,i=A(n);i&&H(i,dt(this.domListeners),e),Object.values(this.timeouts).forEach(clearTimeout),Kt(this)},this.classes=t,this.state=lt(),this.timeouts={},this.domListeners=[],this.windowListeners={}}}function ht(s,t){"pointerId"in t?s.pointerIds.add(t.pointerId):s.touchIds=new Set(X(t))}function ft(s,t){"pointerId"in t?s.pointerIds.delete(t.pointerId):X(t).forEach(e=>s.touchIds.delete(e))}function Kt(s){const{config:{window:t,eventOptions:e},windowListeners:n}=s,i=A(t);if(i){for(let r in n){const o=n[r];H(i,o,e)}s.windowListeners={}}}function At({config:s,windowListeners:t},e,n=s.eventOptions){const i=A(s.window);i&&(H(i,t[e],n),delete t[e])}function Wt({config:s,windowListeners:t},e,n=[],i=s.eventOptions){const r=A(s.window);r&&(H(r,t[e],i),gt(r,t[e]=n,i))}function Ht({config:s,domListeners:t},e){const{eventOptions:n,domTarget:i}=s,r=A(i);if(!r)throw new Error("domTarget must be defined");H(r,dt(t),n);for(let[o,a]of Object.entries(e)){const u=o.slice(2).toLowerCase();t.push([u,ut(...a)])}gt(r,t,n)}function Lt({config:s},t){const e={},n=s.eventOptions.capture?"Capture":"";for(let[i,r]of Object.entries(t)){const o=Array.isArray(r)?r:[r],a=i+n;e[a]=ut(...o)}return e}function dt(s=[]){return s.splice(0,s.length)}function c(s,t,e){s[t]||(s[t]=[]),s[t].push(e)}function gt(s,t=[],e={}){if(s)for(let[n,i]of t)s.addEventListener(n,i,e)}function H(s,t=[],e={}){if(s)for(let[n,i]of t)s.removeEventListener(n,i,e)}function V(s,t){return s.map((e,n)=>e+t[n])}function B(s,t){return s.map((e,n)=>e-t[n])}function K(s){return Math.hypot(...s)}function pt(s,t=s){const e=K(t),n=e===0?0:1/e,i=t.map(o=>n*o);return{distance:K(s),direction:i}}function vt(s,t,e){const n=K(t),i=n===0?0:1/n,r=e===0?0:1/e,o=r*n,a=t.map(l=>r*l),u=t.map(l=>i*l),f=K(s);return{velocities:a,velocity:o,distance:f,direction:u}}function Y(s){return Math.sign?Math.sign(s):+(s>0)-+(s<0)||+s}function Rt(s,t,e){return Math.max(t,Math.min(s,e))}function zt(s,t){return Math.pow(s,t*5)}function tt(s,t,e){return t===0||Math.abs(t)===1/0?zt(s,e):s*t*e/(t+e*s)}function et(s,t,e,n=.15){return n===0?Rt(s,t,e):s<t?-tt(t-s,e-t,n)+t:s>e?+tt(s-e,e-t,n)+e:s}const d=new Map,Vt=s=>s;class mt{constructor(t,e=[]){this.controller=t,this.args=e,this.debounced=!0,this.setTimeout=(n,i=140,...r)=>{clearTimeout(this.controller.timeouts[this.stateKey]),this.controller.timeouts[this.stateKey]=window.setTimeout(n,i,...r)},this.clearTimeout=()=>{clearTimeout(this.controller.timeouts[this.stateKey])},this.fireGestureHandler=(n=!1)=>{if(this.state._blocked)return this.debounced||(this.state._active=!1,this.clean()),null;if(!n&&!this.state.intentional&&!this.config.triggerAllEvents)return null;if(this.state.intentional){const u=this.state.active,f=this.state._active;this.state.active=f,this.state.first=f&&!u,this.state.last=u&&!f,this.controller.state.shared[this.ingKey]=f}const i=this.controller.pointerIds.size||this.controller.touchIds.size,r=this.controller.state.shared.buttons>0||i>0,o={...this.controller.state.shared,...this.state,...this.mapStateValues(this.state),locked:!!document.pointerLockElement,touches:i,down:r},a=this.handler(o);return this.state.memo=a!==void 0?a:this.state.memo,o},this.controller=t,this.args=e}get config(){return this.controller.config[this.stateKey]}get enabled(){return this.controller.config.enabled&&this.config.enabled}get state(){return this.controller.state[this.stateKey]}get handler(){return this.controller.handlers[this.stateKey]}get transform(){return this.config.transform||this.controller.config.transform||Vt}updateSharedState(t){Object.assign(this.controller.state.shared,t)}updateGestureState(t){Object.assign(this.state,t)}checkIntentionality(t,e){return{_intentional:t,_blocked:!1}}getMovement(t){const{rubberband:e,threshold:n}=this.config,{_bounds:i,_initial:r,_active:o,_intentional:a,lastOffset:u,movement:f}=this.state,l=this.getInternalMovement(t,this.state),m=this.transform(n).map(Math.abs),w=a[0]===!1?st(l[0],m[0]):a[0],g=a[1]===!1?st(l[1],m[1]):a[1],y=this.checkIntentionality([w,g],l);if(y._blocked)return{...y,_movement:l,delta:[0,0]};const v=y._intentional,Gt=l;let O=[v[0]!==!1?l[0]-v[0]:0,v[1]!==!1?l[1]-v[1]:0];const It=V(O,u),F=o?e:[0,0];return O=nt(i,V(O,r),F),{...y,intentional:v[0]!==!1||v[1]!==!1,_initial:r,_movement:Gt,movement:O,values:t,offset:nt(i,It,F),delta:B(O,f)}}clean(){this.clearTimeout()}}function st(s,t){return Math.abs(s)>=t?Y(s)*t:!1}function nt(s,[t,e],[n,i]){const[[r,o],[a,u]]=s;return[et(t,r,o,n),et(e,a,u,i)]}function h({state:s},t,e){const{timeStamp:n,type:i}=t,r=s.values,o=e?0:n-s.startTime;return{_lastEventType:i,event:t,timeStamp:n,elapsedTime:o,previous:r}}function _({state:s,config:t,stateKey:e,args:n},i,r){const o=s.offset,a=r.timeStamp,{initial:u,bounds:f}=t,l={...lt()[e],_active:!0,args:n,values:i,initial:i,offset:o,lastOffset:o,startTime:a};return{...l,_initial:z(u,l),_bounds:z(f,l)}}class j extends mt{getInternalMovement(t,e){return B(t,e.initial)}checkIntentionality(t,e){if(t[0]===!1&&t[1]===!1)return{_intentional:t,axis:this.state.axis};const[n,i]=e.map(Math.abs),r=this.state.axis||(n>i?"x":n<i?"y":void 0);return!this.config.axis&&!this.config.lockDirection?{_intentional:t,_blocked:!1,axis:r}:r?this.config.axis&&r!==this.config.axis?{_intentional:t,_blocked:!0,axis:r}:(t[r==="x"?1:0]=!1,{_intentional:t,_blocked:!1,axis:r}):{_intentional:[!1,!1],_blocked:!1,axis:r}}getKinematics(t,e){const n=this.getMovement(t);if(!n._blocked){const i=e.timeStamp-this.state.timeStamp;Object.assign(n,vt(n.movement,n.delta,i))}return n}mapStateValues(t){return{xy:t.values,vxvy:t.velocities}}}const Yt=3;function it(s){"persist"in s&&typeof s.persist=="function"&&s.persist()}class St extends j{constructor(){super(...arguments),this.ingKey="dragging",this.stateKey="drag",this.setPointerCapture=t=>{if(this.config.useTouch||document.pointerLockElement)return;const{target:e,pointerId:n}=t;e&&"setPointerCapture"in e&&e.setPointerCapture(n),this.updateGestureState({_dragTarget:e,_dragPointerId:n})},this.releasePointerCapture=()=>{if(this.config.useTouch||document.pointerLockElement)return;const{_dragTarget:t,_dragPointerId:e}=this.state;if(e&&t&&"releasePointerCapture"in t&&(!("hasPointerCapture"in t)||t.hasPointerCapture(e)))try{t.releasePointerCapture(e)}catch{}},this.preventScroll=t=>{this.state._dragPreventScroll&&t.cancelable&&t.preventDefault()},this.getEventId=t=>this.config.useTouch?t.changedTouches[0].identifier:t.pointerId,this.isValidEvent=t=>this.state._pointerId===this.getEventId(t),this.shouldPreventWindowScrollY=this.config.preventWindowScrollY&&this.controller.supportsTouchEvents,this.setUpWindowScrollDetection=t=>{it(t),Wt(this.controller,this.stateKey,[["touchmove",this.preventScroll],["touchend",this.clean.bind(this)],["touchcancel",this.clean.bind(this)]],{passive:!1}),this.setTimeout(this.startDrag.bind(this),250,t)},this.setUpDelayedDragTrigger=t=>{this.state._dragDelayed=!0,it(t),this.setTimeout(this.startDrag.bind(this),this.config.delay,t)},this.setStartState=t=>{const e=b(t,this.transform);this.updateSharedState(p(t)),this.updateGestureState({..._(this,e,t),...h(this,t,!0),_pointerId:this.getEventId(t)}),this.updateGestureState(this.getMovement(e))},this.onDragStart=t=>{ht(this.controller,t),!(!this.enabled||this.state._active)&&(this.setStartState(t),this.setPointerCapture(t),this.shouldPreventWindowScrollY?this.setUpWindowScrollDetection(t):this.config.delay>0?this.setUpDelayedDragTrigger(t):this.startDrag(t,!0))},this.onDragChange=t=>{if(this.state.canceled||!this.state._active||!this.isValidEvent(t)||this.state._lastEventType===t.type&&t.timeStamp===this.state.timeStamp)return;let e;if(document.pointerLockElement){const{movementX:u,movementY:f}=t;e=V(this.transform([u,f]),this.state.values)}else e=b(t,this.transform);const n=this.getKinematics(e,t);if(!this.state._dragStarted){if(this.state._dragDelayed){this.startDrag(t);return}if(this.shouldPreventWindowScrollY)if(!this.state._dragPreventScroll&&n.axis)if(n.axis==="x")this.startDrag(t);else{this.state._active=!1;return}else return;else return}const i=p(t);this.updateSharedState(i);const r=h(this,t),o=K(n._movement);let{_dragIsTap:a}=this.state;a&&o>=Yt&&(a=!1),this.updateGestureState({...r,...n,_dragIsTap:a}),this.fireGestureHandler()},this.onDragEnd=t=>{if(ft(this.controller,t),!this.isValidEvent(t)||(this.clean(),!this.state._active))return;this.state._active=!1;const e=this.state._dragIsTap,[n,i]=this.state.velocities,[r,o]=this.state.movement,[a,u]=this.state._intentional,[f,l]=this.config.swipeVelocity,[m,w]=this.config.swipeDistance,g=this.config.swipeDuration,y={...h(this,t),...this.getMovement(this.state.values)},v=[0,0];y.elapsedTime<g&&(a!==!1&&Math.abs(n)>f&&Math.abs(r)>m&&(v[0]=Y(n)),u!==!1&&Math.abs(i)>l&&Math.abs(o)>w&&(v[1]=Y(i))),this.updateSharedState({buttons:0}),this.updateGestureState({...y,tap:e,swipe:v}),this.fireGestureHandler(this.config.filterTaps&&e===!0)},this.clean=()=>{super.clean(),this.state._dragStarted=!1,this.releasePointerCapture(),At(this.controller,this.stateKey)},this.onCancel=()=>{this.state.canceled||(this.updateGestureState({canceled:!0,_active:!1}),this.updateSharedState({buttons:0}),Dt(this.fireGestureHandler))},this.onClick=t=>{this.state._dragIsTap||t.stopPropagation()}}startDrag(t,e=!1){!this.state._active||this.state._dragStarted||(e||this.setStartState(t),this.updateGestureState({_dragStarted:!0,_dragPreventScroll:!0,cancel:this.onCancel}),this.clearTimeout(),this.fireGestureHandler())}addBindings(t){if(this.config.useTouch?(c(t,"onTouchStart",this.onDragStart),c(t,"onTouchMove",this.onDragChange),c(t,"onTouchEnd",this.onDragEnd),c(t,"onTouchCancel",this.onDragEnd)):(c(t,"onPointerDown",this.onDragStart),c(t,"onPointerMove",this.onDragChange),c(t,"onPointerUp",this.onDragEnd),c(t,"onPointerCancel",this.onDragEnd)),this.config.filterTaps){const e=this.controller.config.eventOptions.capture?"onClick":"onClickCapture";c(t,e,this.onClick)}}}function D(s,t){let e,n=[],i,r=!1;function o(...a){return r&&e===this&&t(a,n)||(i=s.apply(this,a),r=!0,e=this,n=a),i}return o}function R(s,t){if(s===t)return!0;if(s&&t&&typeof s=="object"&&typeof t=="object"){if(s.constructor!==t.constructor)return!1;let e,n,i;if(Array.isArray(s)){if(e=s.length,e!==t.length)return!1;for(n=e;n--!==0;)if(!R(s[n],t[n]))return!1;return!0}let r;if(typeof Map=="function"&&s instanceof Map&&t instanceof Map){if(s.size!==t.size)return!1;for(r=s.entries();!(n=r.next()).done;)if(!t.has(n.value[0]))return!1;for(r=s.entries();!(n=r.next()).done;)if(!R(n.value[1],t.get(n.value[0])))return!1;return!0}if(typeof Set=="function"&&s instanceof Set&&t instanceof Set){if(s.size!==t.size)return!1;for(r=s.entries();!(n=r.next()).done;)if(!t.has(n.value[0]))return!1;return!0}if(s.constructor===RegExp)return s.source===t.source&&s.flags===t.flags;if(s.valueOf!==Object.prototype.valueOf)return s.valueOf()===t.valueOf();if(s.toString!==Object.prototype.toString)return s.toString()===t.toString();if(i=Object.keys(s),e=i.length,e!==Object.keys(t).length)return!1;for(n=e;n--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[n]))return!1;if(typeof Element<"u"&&s instanceof Element)return!1;for(n=e;n--!==0;)if(!(i[n]==="_owner"&&s.$$typeof)&&!R(s[i[n]],t[i[n]]))return!1;return!0}return s!==s&&t!==t}function M(s,t){try{return R(s,t)}catch(e){if((e.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw e}}function L(s={},t){const e={};for(const[n,i]of Object.entries(t))switch(typeof i){case"function":e[n]=i.call(e,s[n],n,s);break;case"object":e[n]=L(s[n],i);break;case"boolean":i&&(e[n]=s[n]);break}return e}const Nt=180,jt=.15,Xt=.5,Bt=50,Ut=250,wt={threshold(s=0){return S(s)},rubberband(s=0){switch(s){case!0:return S(jt);case!1:return S(0);default:return S(s)}},enabled(s=!0){return s},triggerAllEvents(s=!1){return s},initial(s=0){return typeof s=="function"?s:S(s)},transform:!0},U={...wt,axis:!0,lockDirection(s=!1){return s},bounds(s={}){if(typeof s=="function")return r=>U.bounds(s(r));const{left:t=-1/0,right:e=1/0,top:n=-1/0,bottom:i=1/0}=s;return[[t,e],[n,i]]}},Ft=typeof window<"u"&&window.document&&window.document.createElement,$t={enabled(s=!0){return s},domTarget:!0,window(s=Ft?window:void 0){return s},eventOptions({passive:s=!0,capture:t=!1}={}){return{passive:s,capture:t}},transform:!0},qt={...wt,bounds(s,t,{distanceBounds:e={},angleBounds:n={}}){const i=o=>{const a=Q(z(e,o),{min:-1/0,max:1/0});return[a.min,a.max]},r=o=>{const a=Q(z(n,o),{min:-1/0,max:1/0});return[a.min,a.max]};return typeof e!="function"&&typeof n!="function"?[i(),r()]:o=>[i(o),r(o)]}},Zt={...U,useTouch(s=!0){return s&&rt()},preventWindowScrollY(s=!1){return s},threshold(s,t,{filterTaps:e=!1,lockDirection:n=!1,axis:i=void 0}){const r=S(s,e?3:n||i?1:0);return this.filterTaps=e,r},swipeVelocity(s=Xt){return S(s)},swipeDistance(s=Bt){return S(s)},swipeDuration(s=Ut){return s},delay(s=0){switch(s){case!0:return Nt;case!1:return 0;default:return s}}};function E(s){return L(s,$t)}function G(s={}){return L(s,U)}function yt(s={}){return L(s,qt)}function _t(s={}){return L(s,Zt)}function Jt({domTarget:s,eventOptions:t,window:e,enabled:n,...i}){const r=E({domTarget:s,eventOptions:t,window:e,enabled:n});return r.move=G(i),r}function Qt({domTarget:s,eventOptions:t,window:e,enabled:n,...i}){const r=E({domTarget:s,eventOptions:t,window:e,enabled:n});return r.hover={enabled:!0,...i},r}function te({domTarget:s,eventOptions:t,window:e,enabled:n,...i}){const r=E({domTarget:s,eventOptions:t,window:e,enabled:n});return r.drag=_t(i),r}function ee({domTarget:s,eventOptions:t,window:e,enabled:n,...i}){const r=E({domTarget:s,eventOptions:t,window:e,enabled:n});return r.pinch=yt(i),r}function se({domTarget:s,eventOptions:t,window:e,enabled:n,...i}){const r=E({domTarget:s,eventOptions:t,window:e,enabled:n});return r.scroll=G(i),r}function ne({domTarget:s,eventOptions:t,window:e,enabled:n,...i}){const r=E({domTarget:s,eventOptions:t,window:e,enabled:n});return r.wheel=G(i),r}function ie(s,t=new Set){const{drag:e,wheel:n,move:i,scroll:r,pinch:o,hover:a,eventOptions:u,window:f,transform:l,domTarget:m,enabled:w}=s,g=E({domTarget:m,eventOptions:u,transform:l,window:f,enabled:w});return t.has("onDrag")&&(g.drag=_t(e)),t.has("onWheel")&&(g.wheel=G(n)),t.has("onScroll")&&(g.scroll=G(r)),t.has("onMove")&&(g.move=G(i)),t.has("onPinch")&&(g.pinch=yt(o)),t.has("onHover")&&(g.hover={enabled:!0,...a}),g}function T(s,t,e={}){const n=re(s),i=new kt(n);return i.config=t,i.handlers=s,i.nativeRefs=e,Mt()&&!t.manual&&(Ct(i.bind),Pt(i.clean)),i}function re(s){const t=new Set;return s.drag&&t.add(d.get("drag")),s.wheel&&t.add(d.get("wheel")),s.scroll&&t.add(d.get("scroll")),s.move&&t.add(d.get("move")),s.pinch&&t.add(d.get("pinch")),s.hover&&t.add(d.get("hover")),t}function oe(s,t={}){d.set("drag",St);const e=I();return e.value||(e.value=D(te,M)),T({drag:s},e.value(t))}class N extends j{constructor(){super(...arguments),this.ingKey="moving",this.stateKey="move",this.debounced=!0,this.onMove=t=>{this.enabled&&(this.setTimeout(this.onMoveEnd),this.state._active?this.onMoveChange(t):this.onMoveStart(t))},this.onMoveStart=t=>{this.updateSharedState(p(t));const e=b(t,this.transform);this.updateGestureState({..._(this,e,t),...h(this,t,!0)}),this.updateGestureState(this.getMovement(e)),this.fireGestureHandler()},this.onMoveChange=t=>{this.updateSharedState(p(t));const e=b(t,this.transform);this.updateGestureState({...h(this,t),...this.getKinematics(e,t)}),this.fireGestureHandler()},this.onMoveEnd=()=>{if(this.clean(),!this.state._active)return;const t=this.state.values;this.updateGestureState(this.getMovement(t)),this.updateGestureState({velocities:[0,0],velocity:0,_active:!1}),this.fireGestureHandler()},this.hoverTransform=()=>this.controller.config.hover.transform||this.controller.config.transform,this.onPointerEnter=t=>{if(this.controller.state.shared.hovering=!0,!!this.controller.config.enabled){if(this.controller.config.hover.enabled){const e=b(t,this.hoverTransform()),n={...this.controller.state.shared,...this.state,...h(this,t,!0),args:this.args,values:e,active:!0,hovering:!0};this.controller.handlers.hover({...n,...this.mapStateValues(n)})}"move"in this.controller.handlers&&this.onMoveStart(t)}},this.onPointerLeave=t=>{if(this.controller.state.shared.hovering=!1,"move"in this.controller.handlers&&this.onMoveEnd(),!this.controller.config.hover.enabled)return;const e=b(t,this.hoverTransform()),n={...this.controller.state.shared,...this.state,...h(this,t),args:this.args,values:e,active:!1};this.controller.handlers.hover({...n,...this.mapStateValues(n)})}}addBindings(t){"move"in this.controller.handlers&&c(t,"onPointerMove",this.onMove),"hover"in this.controller.handlers&&(c(t,"onPointerEnter",this.onPointerEnter),c(t,"onPointerLeave",this.onPointerLeave))}}class ae extends mt{getInternalMovement(t,e){const n=e.values[1];let[i,r=n]=t,o=r-n,a=e.turns;return Math.abs(o)>270&&(a+=Y(o)),B([i,r-360*a],e.initial)}getKinematics(t,e){const n=this.getMovement(t),i=(t[1]-n._movement[1]-this.state.initial[1])/360,r=e.timeStamp-this.state.timeStamp,{distance:o,velocity:a,...u}=vt(n.movement,n.delta,r);return{turns:i,...n,...u}}mapStateValues(t){return{da:t.values,vdva:t.velocities}}}const ce=7,ue=260;class Et extends ae{constructor(){super(...arguments),this.ingKey="pinching",this.stateKey="pinch",this.onPinchStart=t=>{ht(this.controller,t);const e=this.controller.touchIds;if(!this.enabled||this.state._active&&this.state._pointerIds.every(o=>e.has(o))||e.size<2)return;const n=Array.from(e).slice(0,2),{values:i,origin:r}=$(t,n,this.transform);this.updateSharedState(p(t)),this.updateGestureState({..._(this,i,t),...h(this,t,!0),_pointerIds:n,cancel:this.onCancel,origin:r}),this.updateGestureState(this.getMovement(i)),this.fireGestureHandler()},this.onPinchChange=t=>{const{canceled:e,_active:n}=this.state;if(e||!n||t.timeStamp===this.state.timeStamp)return;const i=p(t);this.updateSharedState(i);try{const{values:r,origin:o}=$(t,this.state._pointerIds,this.transform),a=this.getKinematics(r,t);this.updateGestureState({...h(this,t),...a,origin:o}),this.fireGestureHandler()}catch{this.onPinchEnd(t)}},this.onPinchEnd=t=>{ft(this.controller,t);const e=X(t);this.state._pointerIds.every(n=>!e.includes(n))||(this.clean(),this.state._active&&(this.updateGestureState({...h(this,t),...this.getMovement(this.state.values),_active:!1}),this.fireGestureHandler()))},this.onCancel=()=>{this.state.canceled||(this.updateGestureState({_active:!1,canceled:!0}),this.fireGestureHandler())},this.onGestureStart=t=>{if(!this.enabled)return;t.preventDefault();const e=J(t,this.transform);this.updateSharedState(p(t)),this.updateGestureState({..._(this,e,t),...h(this,t,!0),origin:[t.clientX,t.clientY],cancel:this.onCancel}),this.updateGestureState(this.getMovement(e)),this.fireGestureHandler()},this.onGestureChange=t=>{const{canceled:e,_active:n}=this.state;if(e||!n)return;t.preventDefault();const i=p(t);this.updateSharedState(i);const r=J(t,this.transform);r[0]=(r[0]-this.state.event.scale)*ue+this.state.values[0];const o=this.getKinematics(r,t);this.updateGestureState({...h(this,t),...o,origin:[t.clientX,t.clientY]}),this.fireGestureHandler()},this.onGestureEnd=t=>{this.clean(),this.state._active&&(this.updateGestureState({...h(this,t),...this.getMovement(this.state.values),_active:!1,origin:[t.clientX,t.clientY]}),this.fireGestureHandler())},this.wheelShouldRun=t=>this.enabled&&t.ctrlKey,this.getWheelValuesFromEvent=t=>{const[,e]=at(t,this.transform),{values:[n,i]}=this.state;return{values:[n-e*ce,i!==void 0?i:0],origin:[t.clientX,t.clientY],delta:[0,e]}},this.onWheel=t=>{this.wheelShouldRun(t)&&(this.setTimeout(this.onWheelEnd),this.state._active?this.onWheelChange(t):this.onWheelStart(t))},this.onWheelStart=t=>{const{values:e,delta:n,origin:i}=this.getWheelValuesFromEvent(t);t.cancelable&&t.preventDefault(),this.updateSharedState(p(t)),this.updateGestureState({..._(this,e,t),...h(this,t,!0),initial:this.state.values,offset:e,delta:n,origin:i}),this.updateGestureState(this.getMovement(e)),this.fireGestureHandler()},this.onWheelChange=t=>{t.cancelable&&t.preventDefault(),this.updateSharedState(p(t));const{values:e,origin:n,delta:i}=this.getWheelValuesFromEvent(t);this.updateGestureState({...h(this,t),...this.getKinematics(e,t),origin:n,delta:i}),this.fireGestureHandler()},this.onWheelEnd=()=>{this.clean(),this.state._active&&(this.state._active=!1,this.updateGestureState(this.getMovement(this.state.values)),this.fireGestureHandler())}}addBindings(t){this.controller.config.domTarget&&!this.controller.supportsTouchEvents&&this.controller.supportsGestureEvents?(c(t,"onGestureStart",this.onGestureStart),c(t,"onGestureChange",this.onGestureChange),c(t,"onGestureEnd",this.onGestureEnd)):(c(t,"onTouchStart",this.onPinchStart),c(t,"onTouchMove",this.onPinchChange),c(t,"onTouchEnd",this.onPinchEnd),c(t,"onTouchCancel",this.onPinchEnd),c(t,"onWheel",this.onWheel))}}class Tt extends j{constructor(){super(...arguments),this.ingKey="scrolling",this.stateKey="scroll",this.debounced=!0,this.handleEvent=t=>{if(!this.enabled)return;this.clearTimeout(),this.setTimeout(this.onEnd);const e=xt(t,this.transform);if(this.updateSharedState(p(t)),this.state._active)this.updateGestureState({...h(this,t),...this.getKinematics(e,t)});else{this.updateGestureState({..._(this,e,t),...h(this,t,!0),initial:this.state.values});const n=this.getMovement(e),i=pt(n.delta);this.updateGestureState(n),this.updateGestureState(i)}this.fireGestureHandler()},this.onEnd=()=>{this.clean(),this.state._active&&(this.updateGestureState({...this.getMovement(this.state.values),_active:!1,velocities:[0,0],velocity:0}),this.fireGestureHandler())}}addBindings(t){c(t,"onScroll",this.handleEvent)}}class bt extends j{constructor(){super(...arguments),this.ingKey="wheeling",this.stateKey="wheel",this.debounced=!0,this.handleEvent=t=>{if(t.ctrlKey&&"pinch"in this.controller.handlers||!this.enabled)return;this.setTimeout(this.onEnd),this.updateSharedState(p(t));const e=V(at(t,this.transform),this.state.values);if(this.state._active)this.updateGestureState({...h(this,t),...this.getKinematics(e,t)});else{this.updateGestureState({..._(this,e,t),...h(this,t,!0),initial:this.state.values});const n=this.getMovement(e),i=pt(n.delta);this.updateGestureState(n),this.updateGestureState(i)}this.fireGestureHandler()},this.onEnd=()=>{if(this.clean(),!this.state._active)return;const t=this.getMovement(this.state.values);this.updateGestureState(t),this.updateGestureState({_active:!1,velocities:[0,0],velocity:0}),this.fireGestureHandler()}}addBindings(t){c(t,"onWheel",this.handleEvent)}}const le=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;function he(s){const t={},e={},n=new Set;for(let i in s)le.test(i)?(n.add(RegExp.lastMatch),e[i]=s[i]):t[i]=s[i];return[e,t,n]}function be(s,t){const[e,n,i]=he(s);d.set("drag",St),d.set("hover",N),d.set("move",N),d.set("pinch",Et),d.set("scroll",Tt),d.set("wheel",bt);const r=ie(t,i),o={};return i.has("onDrag")&&(o.drag=k(e,"onDrag")),i.has("onWheel")&&(o.wheel=k(e,"onWheel")),i.has("onScroll")&&(o.scroll=k(e,"onScroll")),i.has("onMove")&&(o.move=k(e,"onMove")),i.has("onPinch")&&(o.pinch=k(e,"onPinch")),i.has("onHover")&&(o.hover=e.onHover),T(o,r,n)}function k(s,t){const e=t+"Start",n=t+"End";return r=>{let o;return r.first&&e in s&&s[e](r),t in s&&(o=s[t](r)),r.last&&n in s&&s[n](r),o}}function fe(s,t={}){d.set("hover",N);const e=I();return e.value||(e.value=D(Qt,M)),T({hover:s},e.value(t))}function de(s,t={}){d.set("move",N);const e=I();return e.value||(e.value=D(Jt,M)),T({move:s},e.value(t))}function ge(s,t={}){d.set("pinch",Et);const e=I();return e.value||(e.value=D(ee,M)),T({pinch:s},e.value(t))}function pe(s,t={}){d.set("scroll",Tt);const e=I();return e.value||(e.value=D(se,M)),T({scroll:s},e.value(t))}function ve(s,t={}){d.set("wheel",bt);const e=I();return e.value||(e.value=D(ne,M)),T({wheel:s},e.value(t))}const C=(s,t)=>({created:s,unmounted:t,bind:s,unbind:t}),P=s=>`Your v-${s} directive must have a handler specified as a value`,me=()=>C((e,n,i)=>{if(!n.value)throw new Error(P("drag"));e.gestures||(e.gestures={});const r=oe(n.value,{domTarget:e,manual:!0});r.bind(),e.gestures.drag=r},(e,n,i)=>{!e.gestures||!e.gestures.drag||e.gestures.drag.clean()}),Se=()=>C((e,n,i)=>{if(!n.value)throw new Error(P("move"));e.gestures||(e.gestures={});const r=de(n.value,{domTarget:e,manual:!0});r.bind(),e.gestures.move=r},(e,n,i)=>{!e.gestures||!e.gestures.move||e.gestures.move.clean()}),we=()=>C((e,n,i)=>{if(!n.value)throw new Error(P("hover"));e.gestures||(e.gestures={});const r=fe(n.value,{domTarget:e,manual:!0});r.bind(),e.gestures.hover=r},(e,n,i)=>{!e.gestures||!e.gestures.hover||e.gestures.hover.clean()}),ye=()=>C((e,n,i)=>{if(!n.value)throw new Error(P("pinch"));e.gestures||(e.gestures={});const r=ge(n.value,{domTarget:e,manual:!0});r.bind(),e.gestures.pinch=r},(e,n,i)=>{!e.gestures||!e.gestures.pinch||e.gestures.pinch.clean()}),_e=()=>C((e,n,i)=>{if(!n.value)throw new Error(P("wheel"));e.gestures||(e.gestures={});const r=ve(n.value,{domTarget:e,manual:!0});r.bind(),e.gestures.wheel=r},(e,n,i)=>{!e.gestures||!e.gestures.wheel||e.gestures.wheel.clean()}),Ee=()=>C((e,n,i)=>{if(!n.value)throw new Error(P("scroll"));e.gestures||(e.gestures={});const r=pe(n.value,{domTarget:e,manual:!0});r.bind(),e.gestures.drag=r},(e,n,i)=>{!e.gestures||!e.gestures.drag||e.gestures.drag.clean()}),Ge={install(s,t){Object.entries({drag:me,hover:we,move:Se,pinch:ye,scroll:Ee,wheel:_e}).forEach(([n,i])=>s.directive(n,i()))}};export{Ge as G,be as a,oe as u};
