import{_ as k,C as z,j as x,o as i,c as r,a,t as c,u as l,h as y,q as N,F as b,r as S,y as $,w as B,A as C,I as _,E as h,v as j,p as E,i as F}from"./framework.38382cbc.js";import{g as H,n as u,b as V,e as m}from"./colors.3c2dadc4.js";import{r as M}from"./calculations.65ee336d.js";import{a as A,b as I,n as p,f as q}from"./theory.61e5aadb.js";import{w}from"./index.654bd828.js";import{u as L}from"./midi.7a56e39e.js";const P=e=>(E("data-v-b4f43e45"),e=e(),F(),e),G={key:0,class:"flex justify-center my-2 px-2"},J={class:"absolute right-4"},K={class:"font-bold text-xl flex-1 text-center"},O=P(()=>a("defs",null,[a("filter",{id:"shadowButton",x:"-50%",height:"200%",width:"300%"},[a("feDropShadow",{dx:"0",dy:"3",stdDeviation:"4","flood-color":"#2225"})])],-1)),Q={class:"white"},R=["transform","onMousedown"],U=["fill"],W=["fill"],X=["fill"],Y=["font-weight"],Z={class:"black"},tt=["transform","onMousedown"],et=["fill","data-check"],ot=["fill","stroke"],st=["fill","font-weight"],lt={y:"176",x:"45"},at={y:"50",x:"45"},nt={__name:"keys",props:{chroma:{type:String,default:"100000000000"},letters:{type:Boolean,defualt:!1},pitch:{type:Number,default:0},scale:{type:String},roman:{type:String,default:""},title:{type:Boolean,default:!0},playAll:{type:Boolean,default:!1}},emits:["update:pitch"],setup(e,{emit:it}){const n=e;L();const d=z({white:[3,5,7,8,10,0,2],black:[4,6,null,9,11,1],chroma:x(()=>M(n.chroma.split(""),-n.pitch)),scale:x(()=>M(H.chroma.split(""),-n.pitch)),title:x(()=>{var o,s;return(o=A.get(n.chroma))!=null&&o.empty?(s=I.get(n.chroma))!=null&&s.empty?"":I.get(n.chroma).aliases[0]:A.get(n.chroma).aliases[0]})});function g(o){return o!=null&&d.chroma[o]=="1"}function D(o){return n.scale&&o!=null&&d.chroma[o]=="1"}function f(o,s,t){return o==null?"transparent":o==n.pitch?w(u(o,4)).toHex():g(o)&&!s?w(u(o,3.5)).toHex():p[o].length!=2?"#eee":"#999"}return(o,s)=>(i(),r("div",{class:"flex flex-col m-1 rounded-2xl cursor-pointer transition-all duration-300 ease relative select-none touch-none px-2",onMousedown:s[0]||(s[0]=t=>e.playAll&&h(l(V)(e.chroma,e.pitch))),onTouchend:s[1]||(s[1]=t=>e.playAll&&h(l(m)(e.chroma,e.pitch))),onTouchcancel:s[2]||(s[2]=t=>e.playAll&&h(l(m)(e.chroma,e.pitch))),onMouseup:s[3]||(s[3]=t=>e.playAll&&h(l(m)(e.chroma,e.pitch))),onMouseleave:s[4]||(s[4]=t=>e.playAll&&h(l(m)(e.chroma,e.pitch))),style:j({backgroundColor:l(u)(e.pitch,2,1,.5)})},[e.title?(i(),r("div",G,[a("div",J,c(e.roman),1),a("div",K,c(l(p)[e.pitch])+c(d.title),1)])):y("",!0),(i(),r("svg",{class:N(["w-full mt-2",{letters:e.letters}]),id:"chroma-keys",version:"1.1",baseProfile:"full",viewBox:"-10 -20 720 360",xmlns:"http://www.w3.org/2000/svg","font-family":"Commissioner, sans-serif","font-weight":"200","font-size":"40","text-anchor":"middle","dominant-baseline":"middle"},[O,a("g",Q,[(i(!0),r(b,null,S(d.white,(t,v)=>(i(),r("g",{class:"key",key:t,transform:`translate(${v*100+5} 30)`,onMousedown:$(T=>o.$emit("update:pitch",t),["stop"])},[a("rect",{class:"transition-all duration-300 ease-out",width:"90",height:"290",rx:"45",fill:f(t,!0),style:{filter:"url(#shadowButton)"}},null,8,U),a("circle",{class:"transition-all duration-300 ease-out",cy:"245",cx:"45",r:"45",fill:f(t)},null,8,W),B(a("text",{class:"pointer-events-none",y:"250",x:"45",fill:l(w)(l(u)(t)).isDark()?"white":"black"},[a("tspan",{"font-weight":t==e.pitch?800:200},c(l(p)[t]),9,Y)],8,X),[[C,g(t)]])],40,R))),128))]),a("g",Z,[(i(!0),r(b,null,S(d.black,(t,v)=>(i(),r("g",{class:"key",key:t,transform:`translate(${v*100+55} -10)`,onMousedown:$(T=>o.$emit("update:pitch",t),["stop"])},[t?(i(),r("rect",{key:0,class:"transition-all duration-300 ease-out",width:"90",height:"220",rx:"45",style:{filter:"url(#shadowButton)"},fill:f(t,!0),"data-check":t},null,8,et)):y("",!0),t?(i(),r("circle",{key:1,class:"transition-all duration-300 ease-out",cy:"175",cx:"45",r:"45",fill:f(t),"stroke-width":"8",stroke:D(t)?l(u)(t,3):"transparent"},null,8,ot)):y("",!0),B(a("text",{class:"pointer-events-none",fill:l(w)(l(u)(t)).isDark()?"white":"black","font-weight":t==e.pitch?800:200},[a("tspan",lt,c(l(p)[t]),1),a("tspan",at,c(l(q)[t]),1)],8,st),[[C,g(t)]])],40,tt))),128))])],2)),_(o.$slots,"default",{},void 0,!0)],36))}},mt=k(nt,[["__scopeId","data-v-b4f43e45"]]);export{mt as _};
