import{Q as N,P as h,i as k,r as V,q as g,k as C,v as F,b as S,F as i,f as q,X as c,_ as D}from"./framework.7e747cd7.js";import{l as I}from"./midi.290fabf9.js";import{u as P}from"./index.2a79020c.js";const j={class:"p-1"},w={class:"text-lg font-bold"},H={class:"text-sm"},K=N({__name:"knob",props:{max:{type:Number,default:100},min:{type:Number,default:0},modelValue:{type:Number,default:50},step:{type:Number,default:1},param:{type:String,default:"param"},unit:{type:String,default:""},fixed:{type:Number,default:1},cc:{type:Number,default:0},channel:{type:Number,default:0}},emits:["update:modelValue"],setup(s,{emit:d}){const n=s,m=h();P(t=>{b(t)},{domTarget:m,preventWindowScrollY:!0});const e=k({active:!1,internal:0,initial:0,external:V(()=>y(e.internal))}),p=I({number:n.cc,channel:n.channel});g(p,t=>{e.internal=t*100,d("update:modelValue",e.external)});function b(t){const{delta:[a,l],dragging:r,shiftKey:u}=t;e.active=r;let o=u?12:4;e.internal-=l/o,e.internal+=a/o,e.internal>100&&(e.internal=100),e.internal<0&&(e.internal=0),d("update:modelValue",e.external)}C(()=>{e.internal=v(n.modelValue)});function _(){e.internal=e.initial,d("update:modelValue",e.external)}function v(t){return f(t,n.min,n.max,0,100,n.step)}function y(t){return f(t,0,100,n.min,n.max,n.step)}function f(t,a=0,l=100,r=0,u=100,o=1){u=Number(u),r=Number(r),l=Number(l),a=Number(a);let x=(t-a)*(u-r)/(l-a)+r;return Math.round(x/o)*o}return(t,a)=>(F(),S("div",{class:"knob",ref_key:"knob",ref:m,onDblclick:a[0]||(a[0]=l=>_())},[i("div",{class:"level",style:q({height:e.internal+"%"})},null,4),i("div",j,[i("div",w,c(s.modelValue.toFixed(s.fixed))+c(s.unit),1),i("div",H,c(s.param.toUpperCase()),1)])],544))}});const T=D(K,[["__scopeId","data-v-d1bc98e2"]]);export{T as _};
