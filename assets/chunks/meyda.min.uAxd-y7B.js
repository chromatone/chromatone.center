import{A as ee}from"./theme.CBQtom7y.js";function te(C,T){for(var M=0;M<T.length;M++){const S=T[M];if(typeof S!="string"&&!Array.isArray(S)){for(const w in S)if(w!=="default"&&!(w in C)){const A=Object.getOwnPropertyDescriptor(S,w);A&&Object.defineProperty(C,w,A.get?A:{enumerable:!0,get:()=>S[w]})}}}return Object.freeze(Object.defineProperty(C,Symbol.toStringTag,{value:"Module"}))}var k={exports:{}},re=k.exports,H;function ae(){return H||(H=1,function(C,T){(function(M,S){C.exports=S()})(re,function(){function M(t,e,a){for(var r,n=0,i=e.length;n<i;n++)!r&&n in e||(r||(r=Array.prototype.slice.call(e,0,n)),r[n]=e[n]);return t.concat(r||Array.prototype.slice.call(e))}var S=Object.freeze({__proto__:null,blackman:function(t){for(var e=new Float32Array(t),a=2*Math.PI/(t-1),r=2*a,n=0;n<t/2;n++)e[n]=.42-.5*Math.cos(n*a)+.08*Math.cos(n*r);for(n=Math.ceil(t/2);n>0;n--)e[t-n]=e[n-1];return e},hamming:function(t){for(var e=new Float32Array(t),a=0;a<t;a++)e[a]=.54-.46*Math.cos(2*Math.PI*(a/t-1));return e},hanning:function(t){for(var e=new Float32Array(t),a=0;a<t;a++)e[a]=.5-.5*Math.cos(2*Math.PI*a/(t-1));return e},sine:function(t){for(var e=Math.PI/(t-1),a=new Float32Array(t),r=0;r<t;r++)a[r]=Math.sin(e*r);return a}}),w={};function A(t){for(;t%2==0&&t>1;)t/=2;return t===1}function R(t,e){if(e!=="rect"){if(e!==""&&e||(e="hanning"),w[e]||(w[e]={}),!w[e][t.length])try{w[e][t.length]=S[e](t.length)}catch{throw new Error("Invalid windowing function")}t=function(a,r){for(var n=[],i=0;i<Math.min(a.length,r.length);i++)n[i]=a[i]*r[i];return n}(t,w[e][t.length])}return t}function D(t,e,a){for(var r=new Float32Array(t),n=0;n<r.length;n++)r[n]=n*e/a,r[n]=13*Math.atan(r[n]/1315.8)+3.5*Math.atan(Math.pow(r[n]/7518,2));return r}function q(t){return Float32Array.from(t)}function P(t){return 1125*Math.log(1+t/700)}function N(t,e,a){for(var r,n=new Float32Array(t+2),i=new Float32Array(t+2),f=e/2,s=P(0),u=(P(f)-s)/(t+1),o=new Array(t+2),l=0;l<n.length;l++)n[l]=l*u,i[l]=(r=n[l],700*(Math.exp(r/1125)-1)),o[l]=Math.floor((a+1)*i[l]/e);for(var h=new Array(t),c=0;c<h.length;c++){for(h[c]=new Array(a/2+1).fill(0),l=o[c];l<o[c+1];l++)h[c][l]=(l-o[c])/(o[c+1]-o[c]);for(l=o[c+1];l<o[c+2];l++)h[c][l]=(o[c+2]-l)/(o[c+2]-o[c+1])}return h}function G(t,e,a,r,n,i,f){r===void 0&&(r=5),n===void 0&&(n=2),i===void 0&&(i=!0),f===void 0&&(f=440);var s=Math.floor(a/2)+1,u=new Array(a).fill(0).map(function(m,p){return t*function(g,b){return Math.log2(16*g/b)}(e*p/a,f)});u[0]=u[1]-1.5*t;var o,l,h,c=u.slice(1).map(function(m,p){return Math.max(m-u[p])},1).concat([1]),y=Math.round(t/2),v=new Array(t).fill(0).map(function(m,p){return u.map(function(g){return(10*t+y+g-p)%t-y})}),d=v.map(function(m,p){return m.map(function(g,b){return Math.exp(-.5*Math.pow(2*v[p][b]/c[b],2))})});if(l=(o=d)[0].map(function(){return 0}),h=o.reduce(function(m,p){return p.forEach(function(g,b){m[b]+=Math.pow(g,2)}),m},l).map(Math.sqrt),d=o.map(function(m,p){return m.map(function(g,b){return g/(h[b]||1)})}),n){var I=u.map(function(m){return Math.exp(-.5*Math.pow((m/t-r)/n,2))});d=d.map(function(m){return m.map(function(p,g){return p*I[g]})})}return i&&(d=M(M([],d.slice(3),!0),d.slice(0,3))),d.map(function(m){return m.slice(0,s)})}function _(t,e){for(var a=0,r=0,n=0;n<e.length;n++)a+=Math.pow(n,t)*Math.abs(e[n]),r+=e[n];return a/r}function B(t){var e=t.ampSpectrum,a=t.barkScale,r=t.numberOfBarkBands,n=r===void 0?24:r;if(typeof e!="object"||typeof a!="object")throw new TypeError;var i=n,f=new Float32Array(i),s=0,u=e,o=new Int32Array(i+1);o[0]=0;for(var l=a[u.length-1]/i,h=1,c=0;c<u.length;c++)for(;a[c]>l;)o[h++]=c,l=h*a[u.length-1]/i;for(o[i]=u.length-1,c=0;c<i;c++){for(var y=0,v=o[c];v<o[c+1];v++)y+=u[v];f[c]=Math.pow(y,.23)}for(c=0;c<f.length;c++)s+=f[c];return{specific:f,total:s}}function X(t){var e=t.ampSpectrum;if(typeof e!="object")throw new TypeError;for(var a=new Float32Array(e.length),r=0;r<a.length;r++)a[r]=Math.pow(e[r],2);return a}function V(t){var e=t.ampSpectrum,a=t.melFilterBank,r=t.bufferSize;if(typeof e!="object")throw new TypeError("Valid ampSpectrum is required to generate melBands");if(typeof a!="object")throw new TypeError("Valid melFilterBank is required to generate melBands");for(var n=X({ampSpectrum:e}),i=a.length,f=Array(i),s=new Float32Array(i),u=0;u<s.length;u++){f[u]=new Float32Array(r/2),s[u]=0;for(var o=0;o<r/2;o++)f[u][o]=a[u][o]*n[o],s[u]+=f[u][o];s[u]=Math.log(s[u]+1)}return Array.prototype.slice.call(s)}function J(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var E=null,L=J(function(t,e){var a=t.length;return e=e||2,E&&E[a]||function(r){(E=E||{})[r]=new Array(r*r);for(var n=Math.PI/r,i=0;i<r;i++)for(var f=0;f<r;f++)E[r][f+i*r]=Math.cos(n*(f+.5)*i)}(a),t.map(function(){return 0}).map(function(r,n){return e*t.reduce(function(i,f,s,u){return i+f*E[a][s+n*a]},0)})}),U=Object.freeze({__proto__:null,amplitudeSpectrum:function(t){return t.ampSpectrum},buffer:function(t){return t.signal},chroma:function(t){var e=t.ampSpectrum,a=t.chromaFilterBank;if(typeof e!="object")throw new TypeError("Valid ampSpectrum is required to generate chroma");if(typeof a!="object")throw new TypeError("Valid chromaFilterBank is required to generate chroma");var r=a.map(function(i,f){return e.reduce(function(s,u,o){return s+u*i[o]},0)}),n=Math.max.apply(Math,r);return n?r.map(function(i){return i/n}):r},complexSpectrum:function(t){return t.complexSpectrum},energy:function(t){var e=t.signal;if(typeof e!="object")throw new TypeError;for(var a=0,r=0;r<e.length;r++)a+=Math.pow(Math.abs(e[r]),2);return a},loudness:B,melBands:V,mfcc:function(t){var e=t.ampSpectrum,a=t.melFilterBank,r=t.numberOfMFCCCoefficients,n=t.bufferSize,i=Math.min(40,Math.max(1,r||13));if(a.length<i)throw new Error("Insufficient filter bank for requested number of coefficients");var f=V({ampSpectrum:e,melFilterBank:a,bufferSize:n});return L(f).slice(0,i)},perceptualSharpness:function(t){for(var e=B({ampSpectrum:t.ampSpectrum,barkScale:t.barkScale}),a=e.specific,r=0,n=0;n<a.length;n++)r+=n<15?(n+1)*a[n+1]:.066*Math.exp(.171*(n+1));return r*=.11/e.total},perceptualSpread:function(t){for(var e=B({ampSpectrum:t.ampSpectrum,barkScale:t.barkScale}),a=0,r=0;r<e.specific.length;r++)e.specific[r]>a&&(a=e.specific[r]);return Math.pow((e.total-a)/e.total,2)},powerSpectrum:X,rms:function(t){var e=t.signal;if(typeof e!="object")throw new TypeError;for(var a=0,r=0;r<e.length;r++)a+=Math.pow(e[r],2);return a/=e.length,a=Math.sqrt(a)},spectralCentroid:function(t){var e=t.ampSpectrum;if(typeof e!="object")throw new TypeError;return _(1,e)},spectralCrest:function(t){var e=t.ampSpectrum;if(typeof e!="object")throw new TypeError;var a=0,r=-1/0;return e.forEach(function(n){a+=Math.pow(n,2),r=n>r?n:r}),a/=e.length,a=Math.sqrt(a),r/a},spectralFlatness:function(t){var e=t.ampSpectrum;if(typeof e!="object")throw new TypeError;for(var a=0,r=0,n=0;n<e.length;n++)a+=Math.log(e[n]),r+=e[n];return Math.exp(a/e.length)*e.length/r},spectralFlux:function(t){var e=t.signal,a=t.previousSignal,r=t.bufferSize;if(typeof e!="object"||typeof a!="object")throw new TypeError;for(var n=0,i=-r/2;i<e.length/2-1;i++)x=Math.abs(e[i])-Math.abs(a[i]),n+=(x+Math.abs(x))/2;return n},spectralKurtosis:function(t){var e=t.ampSpectrum;if(typeof e!="object")throw new TypeError;var a=e,r=_(1,a),n=_(2,a),i=_(3,a),f=_(4,a);return(-3*Math.pow(r,4)+6*r*n-4*r*i+f)/Math.pow(Math.sqrt(n-Math.pow(r,2)),4)},spectralRolloff:function(t){var e=t.ampSpectrum,a=t.sampleRate;if(typeof e!="object")throw new TypeError;for(var r=e,n=a/(2*(r.length-1)),i=0,f=0;f<r.length;f++)i+=r[f];for(var s=.99*i,u=r.length-1;i>s&&u>=0;)i-=r[u],--u;return(u+1)*n},spectralSkewness:function(t){var e=t.ampSpectrum;if(typeof e!="object")throw new TypeError;var a=_(1,e),r=_(2,e),n=_(3,e);return(2*Math.pow(a,3)-3*a*r+n)/Math.pow(Math.sqrt(r-Math.pow(a,2)),3)},spectralSlope:function(t){var e=t.ampSpectrum,a=t.sampleRate,r=t.bufferSize;if(typeof e!="object")throw new TypeError;for(var n=0,i=0,f=new Float32Array(e.length),s=0,u=0,o=0;o<e.length;o++){n+=e[o];var l=o*a/r;f[o]=l,s+=l*l,i+=l,u+=l*e[o]}return(e.length*u-i*n)/(n*(s-Math.pow(i,2)))},spectralSpread:function(t){var e=t.ampSpectrum;if(typeof e!="object")throw new TypeError;return Math.sqrt(_(2,e)-Math.pow(_(1,e),2))},zcr:function(t){var e=t.signal;if(typeof e!="object")throw new TypeError;for(var a=0,r=1;r<e.length;r++)(e[r-1]>=0&&e[r]<0||e[r-1]<0&&e[r]>=0)&&a++;return a}});function Q(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return Array.from(t)}var z={},j={},F={bitReverseArray:function(t){if(z[t]===void 0){for(var e=(t-1).toString(2).length,a="0".repeat(e),r={},n=0;n<t;n++){var i=n.toString(2);i=a.substr(i.length)+i,i=[].concat(Q(i)).reverse().join(""),r[n]=parseInt(i,2)}z[t]=r}return z[t]},multiply:function(t,e){return{real:t.real*e.real-t.imag*e.imag,imag:t.real*e.imag+t.imag*e.real}},add:function(t,e){return{real:t.real+e.real,imag:t.imag+e.imag}},subtract:function(t,e){return{real:t.real-e.real,imag:t.imag-e.imag}},euler:function(t,e){var a=-2*Math.PI*t/e;return{real:Math.cos(a),imag:Math.sin(a)}},conj:function(t){return t.imag*=-1,t},constructComplexArray:function(t){var e={};e.real=t.real===void 0?t.slice():t.real.slice();var a=e.real.length;return j[a]===void 0&&(j[a]=Array.apply(null,Array(a)).map(Number.prototype.valueOf,0)),e.imag=j[a].slice(),e}},W=function(t){var e={};t.real===void 0||t.imag===void 0?e=F.constructComplexArray(t):(e.real=t.real.slice(),e.imag=t.imag.slice());var a=e.real.length,r=Math.log2(a);if(Math.round(r)!=r)throw new Error("Input size must be a power of 2.");if(e.real.length!=e.imag.length)throw new Error("Real and imaginary components must have the same length.");for(var n=F.bitReverseArray(a),i={real:[],imag:[]},f=0;f<a;f++)i.real[n[f]]=e.real[f],i.imag[n[f]]=e.imag[f];for(var s=0;s<a;s++)e.real[s]=i.real[s],e.imag[s]=i.imag[s];for(var u=1;u<=r;u++)for(var o=Math.pow(2,u),l=0;l<o/2;l++)for(var h=F.euler(l,o),c=0;c<a/o;c++){var y=o*c+l,v=o*c+l+o/2,d={real:e.real[y],imag:e.imag[y]},I={real:e.real[v],imag:e.imag[v]},m=F.multiply(h,I),p=F.subtract(d,m);e.real[v]=p.real,e.imag[v]=p.imag;var g=F.add(m,d);e.real[y]=g.real,e.imag[y]=g.imag}return e},Y=W,Z=function(){function t(e,a){var r=this;if(this._m=a,!e.audioContext)throw this._m.errors.noAC;if(e.bufferSize&&!A(e.bufferSize))throw this._m._errors.notPow2;if(!e.source)throw this._m._errors.noSource;this._m.audioContext=e.audioContext,this._m.bufferSize=e.bufferSize||this._m.bufferSize||256,this._m.hopSize=e.hopSize||this._m.hopSize||this._m.bufferSize,this._m.sampleRate=e.sampleRate||this._m.audioContext.sampleRate||44100,this._m.callback=e.callback,this._m.windowingFunction=e.windowingFunction||"hanning",this._m.featureExtractors=U,this._m.EXTRACTION_STARTED=e.startImmediately||!1,this._m.channel=typeof e.channel=="number"?e.channel:0,this._m.inputs=e.inputs||1,this._m.outputs=e.outputs||1,this._m.numberOfMFCCCoefficients=e.numberOfMFCCCoefficients||this._m.numberOfMFCCCoefficients||13,this._m.numberOfBarkBands=e.numberOfBarkBands||this._m.numberOfBarkBands||24,this._m.spn=this._m.audioContext.createScriptProcessor(this._m.bufferSize,this._m.inputs,this._m.outputs),this._m.spn.connect(this._m.audioContext.destination),this._m._featuresToExtract=e.featureExtractors||[],this._m.barkScale=D(this._m.bufferSize,this._m.sampleRate,this._m.bufferSize),this._m.melFilterBank=N(Math.max(this._m.melBands,this._m.numberOfMFCCCoefficients),this._m.sampleRate,this._m.bufferSize),this._m.inputData=null,this._m.previousInputData=null,this._m.frame=null,this._m.previousFrame=null,this.setSource(e.source),this._m.spn.onaudioprocess=function(n){var i;r._m.inputData!==null&&(r._m.previousInputData=r._m.inputData),r._m.inputData=n.inputBuffer.getChannelData(r._m.channel),r._m.previousInputData?((i=new Float32Array(r._m.previousInputData.length+r._m.inputData.length-r._m.hopSize)).set(r._m.previousInputData.slice(r._m.hopSize)),i.set(r._m.inputData,r._m.previousInputData.length-r._m.hopSize)):i=r._m.inputData;var f=function(s,u,o){if(s.length<u)throw new Error("Buffer is too short for frame length");if(o<1)throw new Error("Hop length cannot be less that 1");if(u<1)throw new Error("Frame length cannot be less that 1");var l=1+Math.floor((s.length-u)/o);return new Array(l).fill(0).map(function(h,c){return s.slice(c*o,c*o+u)})}(i,r._m.bufferSize,r._m.hopSize);f.forEach(function(s){r._m.frame=s;var u=r._m.extract(r._m._featuresToExtract,r._m.frame,r._m.previousFrame);typeof r._m.callback=="function"&&r._m.EXTRACTION_STARTED&&r._m.callback(u),r._m.previousFrame=r._m.frame})}}return t.prototype.start=function(e){this._m._featuresToExtract=e||this._m._featuresToExtract,this._m.EXTRACTION_STARTED=!0},t.prototype.stop=function(){this._m.EXTRACTION_STARTED=!1},t.prototype.setSource=function(e){this._m.source&&this._m.source.disconnect(this._m.spn),this._m.source=e,this._m.source.connect(this._m.spn)},t.prototype.setChannel=function(e){e<=this._m.inputs?this._m.channel=e:console.error("Channel ".concat(e," does not exist. Make sure you've provided a value for 'inputs' that is greater than ").concat(e," when instantiating the MeydaAnalyzer"))},t.prototype.get=function(e){return this._m.inputData?this._m.extract(e||this._m._featuresToExtract,this._m.inputData,this._m.previousInputData):null},t}(),O={audioContext:null,spn:null,bufferSize:512,sampleRate:44100,melBands:26,chromaBands:12,callback:null,windowingFunction:"hanning",featureExtractors:U,EXTRACTION_STARTED:!1,numberOfMFCCCoefficients:13,numberOfBarkBands:24,_featuresToExtract:[],windowing:R,_errors:{notPow2:new Error("Meyda: Buffer size must be a power of 2, e.g. 64 or 512"),featureUndef:new Error("Meyda: No features defined."),invalidFeatureFmt:new Error("Meyda: Invalid feature format"),invalidInput:new Error("Meyda: Invalid input."),noAC:new Error("Meyda: No AudioContext specified."),noSource:new Error("Meyda: No source node specified.")},createMeydaAnalyzer:function(t){return new Z(t,Object.assign({},O))},listAvailableFeatureExtractors:function(){return Object.keys(this.featureExtractors)},extract:function(t,e,a){var r=this;if(!e)throw this._errors.invalidInput;if(typeof e!="object")throw this._errors.invalidInput;if(!t)throw this._errors.featureUndef;if(!A(e.length))throw this._errors.notPow2;this.barkScale!==void 0&&this.barkScale.length==this.bufferSize||(this.barkScale=D(this.bufferSize,this.sampleRate,this.bufferSize)),this.melFilterBank!==void 0&&this.barkScale.length==this.bufferSize&&this.melFilterBank.length==this.melBands||(this.melFilterBank=N(Math.max(this.melBands,this.numberOfMFCCCoefficients),this.sampleRate,this.bufferSize)),this.chromaFilterBank!==void 0&&this.chromaFilterBank.length==this.chromaBands||(this.chromaFilterBank=G(this.chromaBands,this.sampleRate,this.bufferSize)),"buffer"in e&&e.buffer===void 0?this.signal=q(e):this.signal=e;var n=$(e,this.windowingFunction,this.bufferSize);if(this.signal=n.windowedSignal,this.complexSpectrum=n.complexSpectrum,this.ampSpectrum=n.ampSpectrum,a){var i=$(a,this.windowingFunction,this.bufferSize);this.previousSignal=i.windowedSignal,this.previousComplexSpectrum=i.complexSpectrum,this.previousAmpSpectrum=i.ampSpectrum}var f=function(s){return r.featureExtractors[s]({ampSpectrum:r.ampSpectrum,chromaFilterBank:r.chromaFilterBank,complexSpectrum:r.complexSpectrum,signal:r.signal,bufferSize:r.bufferSize,sampleRate:r.sampleRate,barkScale:r.barkScale,melFilterBank:r.melFilterBank,previousSignal:r.previousSignal,previousAmpSpectrum:r.previousAmpSpectrum,previousComplexSpectrum:r.previousComplexSpectrum,numberOfMFCCCoefficients:r.numberOfMFCCCoefficients,numberOfBarkBands:r.numberOfBarkBands})};if(typeof t=="object")return t.reduce(function(s,u){var o;return Object.assign({},s,((o={})[u]=f(u),o))},{});if(typeof t=="string")return f(t);throw this._errors.invalidFeatureFmt}},$=function(t,e,a){var r={};t.buffer===void 0?r.signal=q(t):r.signal=t,r.windowedSignal=R(r.signal,e),r.complexSpectrum=Y(r.windowedSignal),r.ampSpectrum=new Float32Array(a/2);for(var n=0;n<a/2;n++)r.ampSpectrum[n]=Math.sqrt(Math.pow(r.complexSpectrum.real[n],2)+Math.pow(r.complexSpectrum.imag[n],2));return r};return typeof window<"u"&&(window.Meyda=O),O})}(k)),k.exports}var K=ae();const ne=ee(K),oe=te({__proto__:null,default:ne},[K]);export{ne as M,oe as m};
