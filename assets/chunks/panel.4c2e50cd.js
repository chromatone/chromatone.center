import{m as o,j as I,k as S,n as D}from"./midi.a65cc3de.js";import{_ as C,o as n,c as i,a as e,F as b,r as h,n as p,u as t,t as v,p as w,h as $,l as M,d as O,g as k,m as P,w as _,S as A,f as L,U as T}from"./framework.aa37bc02.js";import{n as g}from"./colors.0dc03560.js";import{c as m}from"./synth.99a34600.js";import{u as B}from"./tempo.0cfd0346.js";const N=d=>(w("data-v-c45d7832"),d=d(),$(),d),U={class:"flex is-group p-2 items-center flex-wrap justify-between"},V={class:"flex flex-col gap-1"},j=N(()=>e("div",{class:"font-bold mr-2"},"Channel filter",-1)),F={class:"grid grid-cols-8"},z=["onClick"],E={__name:"channels",setup(d){function r(){let f=o.filter[1];for(let c=1;c<=16;c++)o.filter[c]=!f;f&&I()}return(f,c)=>(n(),i("div",U,[e("div",V,[j,e("div",{class:"channel filtered flex items-center justify-center",onClick:c[0]||(c[0]=s=>r())},"TOGGLE ALL")]),e("div",F,[(n(),i(b,null,h(16,s=>e("div",{class:p(["channel",{filtered:!t(o).filter[s],active:t(o).note.channel==s}]),key:s,onClick:y=>t(o).filter[s]=!t(o).filter[s]},v(s),11,z)),64))])]))}},G=C(E,[["__scopeId","data-v-c45d7832"]]);const l=d=>(w("data-v-4b07f2a1"),d=d(),$(),d),K={class:"layer w-full z-40 flex flex-col"},H={key:0,class:"p-2 border border-red-500 text-red-500 flex flex-wrap gap-2 w-full"},R=l(()=>e("a",{class:"font-normal underline",href:"/site_permissions_for_chromatonecenter-1.0-an+fx.xpi"},"Install site permission (recent Firefox)",-1)),W=l(()=>e("span",null,"or",-1)),Y=l(()=>e("a",{class:"font-normal underline",href:"https://caniuse.com/?search=midi",target:"_blank"},"use a compatible browser ",-1)),q=l(()=>e("span",null,"or ",-1)),J=l(()=>e("a",{class:"font-normal underline",href:"https://apps.apple.com/ru/app/web-midi-browser/id953846217",target:"_blank"},"Web MIDI Browser on iOS",-1)),Q=l(()=>e("span",null,"or ",-1)),X=l(()=>e("div",{class:"font-normal text-dark-200 dark-text-light-100"},"use your PC keyboard",-1)),Z={key:1,class:"flex flex-col gap-1 justify-center flex-wrap bg-light-400 dark-bg-dark-400"},tt={class:"flex is-group"},et={class:"flex m-2"},ot={class:"font-normal p-2 border border-green-500 text-green-500 select-none rounded-lg",href:"/practice/midi/monitor/"},st={key:0},nt={key:1},it={class:"flex"},lt={class:"is-group flex"},at={key:0,class:"i-la-play"},dt={key:1,class:"i-la-pause"},rt=l(()=>e("div",{class:"i-la-stop"},null,-1)),ct=[rt],_t={class:"w-2em"},ut={class:"flex-1"},pt={class:"is-group"},ft={class:"text-button border"},vt={class:"flex flex-wrap is-group"},mt=l(()=>e("div",{class:"i-tabler-keyboard"},null,-1)),bt=l(()=>e("div",{class:"m-0"},"PC keyboard",-1)),ht=[mt,bt],yt=l(()=>e("div",{class:"i-fad-midiplug"},null,-1)),xt=l(()=>e("div",{class:"m-0"},"MIDI OUT",-1)),kt=[yt,xt],gt=l(()=>e("div",{class:"i-la-clock"},null,-1)),It=l(()=>e("div",{class:"m-0"},"CLOCK OUT",-1)),Ct=[gt,It],wt=l(()=>e("div",{class:"i-la-sync"},null,-1)),$t=l(()=>e("div",{class:"m-0"},"SYNC TABS",-1)),St=[wt,$t],Dt={key:0,class:"i-bi-volume-up"},Mt={key:1,class:"i-bi-volume-off"},Ot=l(()=>e("div",{class:"m-0"},"MIDI Synth",-1)),Pt={class:"flex-button"},At=l(()=>e("span",null,"OUT CH",-1)),Lt=["value"],Tt={__name:"panel",setup(d){const r=B();var f=navigator.userAgent.toLowerCase().indexOf("firefox")>-1;return(c,s)=>{var x;const y=G,u=M("tooltip");return n(),i("div",K,[t(o).enabled?(n(),i("div",Z,[e("div",tt,[e("div",et,[e("a",ot,[t(o).available?(n(),i("span",st,"MIDI ")):(n(),i("span",nt,"Plug in your MIDI device"))])]),e("div",it,[e("div",lt,[e("button",{class:"play text-button",onClick:s[0]||(s[0]=a=>t(o).playing=!t(o).playing)},[t(o).playing?(n(),i("div",dt)):(n(),i("div",at))]),e("button",{class:"text-button border",onClick:s[1]||(s[1]=a=>t(S)())},ct)]),(x=t(o).note)!=null&&x.name?(n(),i("div",{key:0,class:"text-button w-3em transition-all duration-50 cursor-pointer flex",onMousedown:s[2]||(s[2]=a=>t(D)(t(o).note)),onMouseup:s[3]||(s[3]=a=>t(I)(t(o).note)),style:P({borderColor:t(g)(t(o).note.pitch,t(o).note.octA),color:t(g)(t(o).note.pitch,t(o).note.octA)})},[e("div",_t,v(t(o).note.name),1),e("div",ut,v(t(o).note.accidental),1)],36)):k("",!0)])]),e("div",pt,[(n(!0),i(b,null,h(t(o).outputs,a=>(n(),i("button",ft,[e("span",null,v(a.name),1)]))),256))]),e("div",vt,[_((n(),i("button",{class:p(["flex-button border opacity-30",{active:t(o).keyboard}]),onClick:s[4]||(s[4]=a=>t(o).keyboard=!t(o).keyboard),"aria-label":"Play MIDI with PC keyboard"},ht,2)),[[u,"Play MIDI with PC keyboard",void 0,{bottom:!0}]]),_((n(),i("button",{class:p(["flex-button opacity-30",{active:t(o).out}]),onClick:s[5]||(s[5]=a=>t(o).out=!t(o).out)},kt,2)),[[u,"Output MIDI to external devices",void 0,{bottom:!0}]]),_((n(),i("button",{class:p(["flex-button opacity-30",{active:t(r).midiClock}]),onClick:s[6]||(s[6]=a=>t(r).midiClock=!t(r).midiClock)},Ct,2)),[[u,"Output MIDI CLOCK to external devices",void 0,{bottom:!0}]]),_((n(),i("button",{class:p(["flex-button opacity-30",{active:t(r).tabSync}]),onClick:s[7]||(s[7]=a=>t(r).tabSync=!t(r).tabSync)},St,2)),[[u,"Sync multiple tabs transpost",void 0,{bottom:!0}]]),_((n(),i("button",{class:p(["flex-button border opacity-30",{active:t(m).state.midi}]),onClick:s[8]||(s[8]=a=>t(m).state.midi=!t(m).state.midi)},[t(m).state.midi?(n(),i("div",Dt)):(n(),i("div",Mt)),Ot],2)),[[u,"Play synth on MIDI input",void 0,{bottom:!0}]]),_((n(),i("button",Pt,[At,_(e("select",{class:"bg-transparent text-xl font-bold","onUpdate:modelValue":s[9]||(s[9]=a=>t(o).channel=a)},[(n(),i(b,null,h(16,a=>e("option",{key:a,value:a},v(a),9,Lt)),64))],512),[[A,t(o).channel]])])),[[u,"Output MIDI channel",void 0,{bottom:!0}]])]),L(y,{style:{flex:"1 1 100px"}}),T(c.$slots,"default",{class:"is-group mx-1 p-1"},void 0,!0)])):(n(),i("div",H,[O("MIDI is not available. Please "),t(f)?(n(),i(b,{key:0},[R,W],64)):k("",!0),Y,q,J,Q,X]))])}}},Ft=C(Tt,[["__scopeId","data-v-4b07f2a1"]]);export{Ft as _};
