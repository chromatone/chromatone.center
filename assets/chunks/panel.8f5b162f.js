import{_ as k,v as n,b as i,F as s,a as m,H as y,z as p,N as t,X as b,A as g,c as I,j as w,L as $,f as M,B as D,Z as u,I as O,T as A,J as S}from"./framework.7e747cd7.js";import{m as e,j as C,k as P,n as j}from"./midi.290fabf9.js";import{n as x}from"./colors.fcf9eae3.js";import{c as f}from"./synth.220fb0dd.js";import{u as L}from"./tempo.81daff25.js";const T=d=>(g("data-v-c45d7832"),d=d(),I(),d),B={class:"flex is-group p-2 items-center flex-wrap justify-between"},U={class:"flex flex-col gap-1"},z=T(()=>s("div",{class:"font-bold mr-2"},"Channel filter",-1)),F={class:"grid grid-cols-8"},H=["onClick"],N={__name:"channels",setup(d){function r(){let v=e.filter[1];for(let o=1;o<=16;o++)e.filter[o]=!v;v&&C()}return(v,o)=>(n(),i("div",B,[s("div",U,[z,s("div",{class:"channel filtered flex items-center justify-center",onClick:o[0]||(o[0]=c=>r())},"TOGGLE ALL")]),s("div",F,[(n(),i(m,null,y(16,c=>s("div",{class:p(["channel",{filtered:!t(e).filter[c],active:t(e).note.channel==c}]),key:c,onClick:_=>t(e).filter[c]=!t(e).filter[c]},b(c),11,H)),64))])]))}},G=k(N,[["__scopeId","data-v-c45d7832"]]);const a=d=>(g("data-v-2cbb4f96"),d=d(),I(),d),K={class:"layer w-full z-40 flex flex-col"},Z={key:0,class:"p-2 border border-red-500 text-red-500 flex flex-wrap gap-2 w-full"},E=a(()=>s("a",{class:"font-normal underline",href:"https://caniuse.com/?search=midi",target:"_blank"},"use a compatible browser",-1)),J=a(()=>s("span",null,"or ",-1)),R=a(()=>s("a",{class:"font-normal underline",href:"https://apps.apple.com/ru/app/web-midi-browser/id953846217",target:"_blank"},"Web MIDI Browser on iOS",-1)),V=a(()=>s("span",null,"or ",-1)),W=a(()=>s("div",{class:"font-normal text-dark-200 dark-text-light-100"},"just use your PC keyboard",-1)),X={key:1,class:"flex flex-col gap-1 justify-center flex-wrap bg-light-400 dark-bg-dark-400"},Y={class:"flex is-group"},q={class:"flex m-2"},Q={class:"font-normal p-2 border border-green-500 text-green-500 select-none rounded-lg",href:"/practice/midi/monitor/"},tt={key:0},st={key:1},et={class:"flex"},ot={class:"is-group flex"},nt={key:0,class:"i-la-play"},it={key:1,class:"i-la-pause"},lt=a(()=>s("div",{class:"i-la-stop"},null,-1)),at=[lt],dt={class:"w-2em"},ct={class:"flex-1"},rt={class:"is-group"},_t={class:"text-button border"},ut={class:"flex flex-wrap is-group"},pt=a(()=>s("div",{class:"i-tabler-keyboard"},null,-1)),vt=a(()=>s("div",{class:"m-0"},"PC keyboard",-1)),bt=[pt,vt],ft=a(()=>s("div",{class:"i-fad-midiplug"},null,-1)),mt=a(()=>s("div",{class:"m-0"},"MIDI OUT",-1)),yt=[ft,mt],ht=a(()=>s("div",{class:"i-la-clock"},null,-1)),xt=a(()=>s("div",{class:"m-0"},"CLOCK OUT",-1)),kt=[ht,xt],gt=a(()=>s("div",{class:"i-la-sync"},null,-1)),It=a(()=>s("div",{class:"m-0"},"SYNC TABS",-1)),Ct=[gt,It],wt={key:0,class:"i-bi-volume-up"},$t={key:1,class:"i-bi-volume-off"},Mt=a(()=>s("div",{class:"m-0"},"MIDI Synth",-1)),Dt={class:"flex-button"},Ot=a(()=>s("span",null,"OUT CH",-1)),At=["value"],St={__name:"panel",setup(d){const r=L();return navigator.userAgent.toLowerCase().indexOf("firefox")>-1,(v,o)=>{var h;const c=G,_=w("tooltip");return n(),i("div",K,[t(e).enabled?(n(),i("div",X,[s("div",Y,[s("div",q,[s("a",Q,[t(e).available?(n(),i("span",tt,"MIDI ")):(n(),i("span",st,"Plug in your MIDI device"))])]),s("div",et,[s("div",ot,[s("button",{class:"play text-button",onClick:o[0]||(o[0]=l=>t(e).playing=!t(e).playing)},[t(e).playing?(n(),i("div",it)):(n(),i("div",nt))]),s("button",{class:"text-button border",onClick:o[1]||(o[1]=l=>t(P)())},at)]),(h=t(e).note)!=null&&h.name?(n(),i("div",{key:0,class:"text-button w-3em transition-all duration-50 cursor-pointer flex",onMousedown:o[2]||(o[2]=l=>t(j)(t(e).note)),onMouseup:o[3]||(o[3]=l=>t(C)(t(e).note)),style:M({borderColor:t(x)(t(e).note.pitch,t(e).note.octA),color:t(x)(t(e).note.pitch,t(e).note.octA)})},[s("div",dt,b(t(e).note.name),1),s("div",ct,b(t(e).note.accidental),1)],36)):D("",!0)])]),s("div",rt,[(n(!0),i(m,null,y(t(e).outputs,l=>(n(),i("button",_t,[s("span",null,b(l.name),1)]))),256))]),s("div",ut,[u((n(),i("button",{class:p(["flex-button border opacity-30",{active:t(e).keyboard}]),onClick:o[4]||(o[4]=l=>t(e).keyboard=!t(e).keyboard),"aria-label":"Play MIDI with PC keyboard"},bt,2)),[[_,"Play MIDI with PC keyboard",void 0,{bottom:!0}]]),u((n(),i("button",{class:p(["flex-button opacity-30",{active:t(e).out}]),onClick:o[5]||(o[5]=l=>t(e).out=!t(e).out)},yt,2)),[[_,"Output MIDI to external devices",void 0,{bottom:!0}]]),u((n(),i("button",{class:p(["flex-button opacity-30",{active:t(r).midiClock}]),onClick:o[6]||(o[6]=l=>t(r).midiClock=!t(r).midiClock)},kt,2)),[[_,"Output MIDI CLOCK to external devices",void 0,{bottom:!0}]]),u((n(),i("button",{class:p(["flex-button opacity-30",{active:t(r).tabSync}]),onClick:o[7]||(o[7]=l=>t(r).tabSync=!t(r).tabSync)},Ct,2)),[[_,"Sync multiple tabs transpost",void 0,{bottom:!0}]]),u((n(),i("button",{class:p(["flex-button border opacity-30",{active:t(f).state.midi}]),onClick:o[8]||(o[8]=l=>t(f).state.midi=!t(f).state.midi)},[t(f).state.midi?(n(),i("div",wt)):(n(),i("div",$t)),Mt],2)),[[_,"Play synth on MIDI input",void 0,{bottom:!0}]]),u((n(),i("button",Dt,[Ot,u(s("select",{class:"bg-transparent text-xl font-bold","onUpdate:modelValue":o[9]||(o[9]=l=>t(e).channel=l)},[(n(),i(m,null,y(16,l=>s("option",{key:l,value:l},b(l),9,At)),64))],512),[[O,t(e).channel]])])),[[_,"Output MIDI channel",void 0,{bottom:!0}]])]),A(c,{style:{flex:"1 1 100px"}}),S(v.$slots,"default",{class:"is-group mx-1 p-1"},void 0,!0)])):(n(),i("div",Z,[$("MIDI is not available. Please "),E,J,R,V,W]))])}}},Ut=k(St,[["__scopeId","data-v-2cbb4f96"]]);export{Ut as _};
