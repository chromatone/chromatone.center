import{ab as Ur,B as Hr}from"./theme.DLCqlVTm.js";function Gr(ni){throw new Error('Could not dynamically require "'+ni+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Ui={exports:{}};const Wr={},jr=Object.freeze(Object.defineProperty({__proto__:null,default:Wr},Symbol.toStringTag,{value:"Module"})),gr=Ur(jr);var Ii={exports:{}},Zr=Ii.exports,_r;function Kr(){return _r||(_r=1,function(ni,ye){(function(Y,Ot){Ot(ye)})(Zr,function(Y){var Ot=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,7,9,32,4,318,1,80,3,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,68,8,2,0,3,0,2,3,2,4,2,0,15,1,83,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,7,19,58,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,343,9,54,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,10,5350,0,7,14,11465,27,2343,9,87,9,39,4,60,6,26,9,535,9,470,0,2,54,8,3,82,0,12,1,19628,1,4178,9,519,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,245,1,2,9,726,6,110,6,6,9,4759,9,787719,239],Tt=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,4,51,13,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,39,27,10,22,251,41,7,1,17,2,60,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,31,9,2,0,3,0,2,37,2,0,26,0,2,0,45,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,200,32,32,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,26,3994,6,582,6842,29,1763,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,433,44,212,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,42,9,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,229,29,3,0,496,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],R="‌‍·̀-ͯ·҃-֑҇-ׇֽֿׁׂׅׄؐ-ًؚ-٩ٰۖ-ۜ۟-۪ۤۧۨ-ۭ۰-۹ܑܰ-݊ަ-ް߀-߉߫-߽߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࢗ-࢟࣊-ࣣ࣡-ःऺ-़ा-ॏ॑-ॗॢॣ०-९ঁ-ঃ়া-ৄেৈো-্ৗৢৣ০-৯৾ਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣ૦-૯ૺ-૿ଁ-ଃ଼ା-ୄେୈୋ-୍୕-ୗୢୣ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఀ-ఄ఼ా-ౄె-ైొ-్ౕౖౢౣ౦-౯ಁ-ಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣ೦-೯ೳഀ-ഃ഻഼ാ-ൄെ-ൈൊ-്ൗൢൣ൦-൯ඁ-ඃ්ා-ුූෘ-ෟ෦-෯ෲෳัิ-ฺ็-๎๐-๙ັິ-ຼ່-໎໐-໙༘༙༠-༩༹༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှ၀-၉ၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟፩-፱ᜒ-᜕ᜲ-᜴ᝒᝓᝲᝳ឴-៓៝០-៩᠋-᠍᠏-᠙ᢩᤠ-ᤫᤰ-᤻᥆-᥏᧐-᧚ᨗ-ᨛᩕ-ᩞ᩠-᩿᩼-᪉᪐-᪙᪰-᪽ᪿ-ᫎᬀ-ᬄ᬴-᭄᭐-᭙᭫-᭳ᮀ-ᮂᮡ-ᮭ᮰-᮹᯦-᯳ᰤ-᰷᱀-᱉᱐-᱙᳐-᳔᳒-᳨᳭᳴᳷-᳹᷀-᷿‌‍‿⁀⁔⃐-⃥⃜⃡-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯・꘠-꘩꙯ꙴ-꙽ꚞꚟ꛰꛱ꠂ꠆ꠋꠣ-ꠧ꠬ꢀꢁꢴ-ꣅ꣐-꣙꣠-꣱ꣿ-꤉ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀꧐-꧙ꧥ꧰-꧹ꨩ-ꨶꩃꩌꩍ꩐-꩙ꩻ-ꩽꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꫫ-ꫯꫵ꫶ꯣ-ꯪ꯬꯭꯰-꯹ﬞ︀-️︠-︯︳︴﹍-﹏０-９＿･",We="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙՠ-ֈא-תׯ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࡠ-ࡪࡰ-ࢇࢉ-ࢎࢠ-ࣉऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱৼਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡૹଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘ-ౚౝౠౡಀಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೝೞೠೡೱೲഄ-ഌഎ-ഐഒ-ഺഽൎൔ-ൖൟ-ൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄຆ-ຊຌ-ຣລວ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏽᏸ-ᏽᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜑᜟ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡸᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭌᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᲀ-ᲊᲐ-ᲺᲽ-Ჿᳩ-ᳬᳮ-ᳳᳵᳶᳺᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕ℘-ℝℤΩℨK-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞ々-〇〡-〩〱-〵〸-〼ぁ-ゖ゛-ゟァ-ヺー-ヿㄅ-ㄯㄱ-ㆎㆠ-ㆿㇰ-ㇿ㐀-䶿一-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꟍꟐꟑꟓꟕ-Ƛꟲ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꣽꣾꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭩꭰ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",he={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},Ve="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",si={5:Ve,"5module":Ve+" export import",6:Ve+" const class extends export import super"},fe=/^in(stanceof)?$/,At=new RegExp("["+We+"]"),ai=new RegExp("["+We+R+"]");function D(i,a){for(var _=65536,C=0;C<a.length;C+=2){if(_+=a[C],_>i)return!1;if(_+=a[C+1],_>=i)return!0}return!1}function Jt(i,a){return i<65?i===36:i<91?!0:i<97?i===95:i<123?!0:i<=65535?i>=170&&At.test(String.fromCharCode(i)):a===!1?!1:D(i,Tt)}function ht(i,a){return i<48?i===36:i<58?!0:i<65?!1:i<91?!0:i<97?i===95:i<123?!0:i<=65535?i>=170&&ai.test(String.fromCharCode(i)):a===!1?!1:D(i,Tt)||D(i,Ot)}var kt=function(a,_){_===void 0&&(_={}),this.label=a,this.keyword=_.keyword,this.beforeExpr=!!_.beforeExpr,this.startsExpr=!!_.startsExpr,this.isLoop=!!_.isLoop,this.isAssign=!!_.isAssign,this.prefix=!!_.prefix,this.postfix=!!_.postfix,this.binop=_.binop||null,this.updateContext=null};function ut(i,a){return new kt(i,{beforeExpr:!0,binop:a})}var ce={beforeExpr:!0},wt={startsExpr:!0},Zt={};function It(i,a){return a===void 0&&(a={}),a.keyword=i,Zt[i]=new kt(i,a)}var P={num:new kt("num",wt),regexp:new kt("regexp",wt),string:new kt("string",wt),name:new kt("name",wt),privateId:new kt("privateId",wt),eof:new kt("eof"),bracketL:new kt("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new kt("]"),braceL:new kt("{",{beforeExpr:!0,startsExpr:!0}),braceR:new kt("}"),parenL:new kt("(",{beforeExpr:!0,startsExpr:!0}),parenR:new kt(")"),comma:new kt(",",ce),semi:new kt(";",ce),colon:new kt(":",ce),dot:new kt("."),question:new kt("?",ce),questionDot:new kt("?."),arrow:new kt("=>",ce),template:new kt("template"),invalidTemplate:new kt("invalidTemplate"),ellipsis:new kt("...",ce),backQuote:new kt("`",wt),dollarBraceL:new kt("${",{beforeExpr:!0,startsExpr:!0}),eq:new kt("=",{beforeExpr:!0,isAssign:!0}),assign:new kt("_=",{beforeExpr:!0,isAssign:!0}),incDec:new kt("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new kt("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:ut("||",1),logicalAND:ut("&&",2),bitwiseOR:ut("|",3),bitwiseXOR:ut("^",4),bitwiseAND:ut("&",5),equality:ut("==/!=/===/!==",6),relational:ut("</>/<=/>=",7),bitShift:ut("<</>>/>>>",8),plusMin:new kt("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:ut("%",10),star:ut("*",10),slash:ut("/",10),starstar:new kt("**",{beforeExpr:!0}),coalesce:ut("??",1),_break:It("break"),_case:It("case",ce),_catch:It("catch"),_continue:It("continue"),_debugger:It("debugger"),_default:It("default",ce),_do:It("do",{isLoop:!0,beforeExpr:!0}),_else:It("else",ce),_finally:It("finally"),_for:It("for",{isLoop:!0}),_function:It("function",wt),_if:It("if"),_return:It("return",ce),_switch:It("switch"),_throw:It("throw",ce),_try:It("try"),_var:It("var"),_const:It("const"),_while:It("while",{isLoop:!0}),_with:It("with"),_new:It("new",{beforeExpr:!0,startsExpr:!0}),_this:It("this",wt),_super:It("super",wt),_class:It("class",wt),_extends:It("extends",ce),_export:It("export"),_import:It("import",wt),_null:It("null",wt),_true:It("true",wt),_false:It("false",wt),_in:It("in",{beforeExpr:!0,binop:7}),_instanceof:It("instanceof",{beforeExpr:!0,binop:7}),_typeof:It("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:It("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:It("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},Ft=/\r\n?|\n|\u2028|\u2029/,Re=new RegExp(Ft.source,"g");function Kt(i){return i===10||i===13||i===8232||i===8233}function ze(i,a,_){_===void 0&&(_=i.length);for(var C=a;C<_;C++){var L=i.charCodeAt(C);if(Kt(L))return C<_-1&&L===13&&i.charCodeAt(C+1)===10?C+2:C+1}return-1}var je=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,Dt=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,xe=Object.prototype,ct=xe.hasOwnProperty,pi=xe.toString,et=Object.hasOwn||function(i,a){return ct.call(i,a)},de=Array.isArray||function(i){return pi.call(i)==="[object Array]"},Ee=Object.create(null);function Ct(i){return Ee[i]||(Ee[i]=new RegExp("^(?:"+i.replace(/ /g,"|")+")$"))}function $t(i){return i<=65535?String.fromCharCode(i):(i-=65536,String.fromCharCode((i>>10)+55296,(i&1023)+56320))}var Pi=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,Be=function(a,_){this.line=a,this.column=_};Be.prototype.offset=function(a){return new Be(this.line,this.column+a)};var Pe=function(a,_,C){this.start=_,this.end=C,a.sourceFile!==null&&(this.source=a.sourceFile)};function di(i,a){for(var _=1,C=0;;){var L=ze(i,C,a);if(L<0)return new Be(_,a-C);++_,C=L}}var Ut={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},Ze=!1;function gi(i){var a={};for(var _ in Ut)a[_]=i&&et(i,_)?i[_]:Ut[_];if(a.ecmaVersion==="latest"?a.ecmaVersion=1e8:a.ecmaVersion==null?(!Ze&&typeof console=="object"&&console.warn&&(Ze=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),a.ecmaVersion=11):a.ecmaVersion>=2015&&(a.ecmaVersion-=2009),a.allowReserved==null&&(a.allowReserved=a.ecmaVersion<5),(!i||i.allowHashBang==null)&&(a.allowHashBang=a.ecmaVersion>=14),de(a.onToken)){var C=a.onToken;a.onToken=function(L){return C.push(L)}}return de(a.onComment)&&(a.onComment=_i(a,a.onComment)),a}function _i(i,a){return function(_,C,L,H,W,J){var nt={type:_?"Block":"Line",value:C,start:L,end:H};i.locations&&(nt.loc=new Pe(this,W,J)),i.ranges&&(nt.range=[L,H]),a.push(nt)}}var Mt=1,Rt=2,zt=4,Ai=8,Fe=16,Ei=32,Ke=64,Ti=128,Te=256,Xe=512,oi=Mt|Rt|Te;function hi(i,a){return Rt|(i?zt:0)|(a?Ai:0)}var Ht=0,Qe=1,Lt=2,vi=3,bt=4,t=5,e=function(a,_,C){this.options=a=gi(a),this.sourceFile=a.sourceFile,this.keywords=Ct(si[a.ecmaVersion>=6?6:a.sourceType==="module"?"5module":5]);var L="";a.allowReserved!==!0&&(L=he[a.ecmaVersion>=6?6:a.ecmaVersion===5?5:3],a.sourceType==="module"&&(L+=" await")),this.reservedWords=Ct(L);var H=(L?L+" ":"")+he.strict;this.reservedWordsStrict=Ct(H),this.reservedWordsStrictBind=Ct(H+" "+he.strictBind),this.input=String(_),this.containsEsc=!1,C?(this.pos=C,this.lineStart=this.input.lastIndexOf(`
`,C-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(Ft).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=P.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=a.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&a.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(Mt),this.regexpState=null,this.privateNameStack=[]},r={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};e.prototype.parse=function(){var a=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(a)},r.inFunction.get=function(){return(this.currentVarScope().flags&Rt)>0},r.inGenerator.get=function(){return(this.currentVarScope().flags&Ai)>0},r.inAsync.get=function(){return(this.currentVarScope().flags&zt)>0},r.canAwait.get=function(){for(var i=this.scopeStack.length-1;i>=0;i--){var a=this.scopeStack[i],_=a.flags;if(_&(Te|Xe))return!1;if(_&Rt)return(_&zt)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction},r.allowSuper.get=function(){var i=this.currentThisScope(),a=i.flags;return(a&Ke)>0||this.options.allowSuperOutsideMethod},r.allowDirectSuper.get=function(){return(this.currentThisScope().flags&Ti)>0},r.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())},r.allowNewDotTarget.get=function(){for(var i=this.scopeStack.length-1;i>=0;i--){var a=this.scopeStack[i],_=a.flags;if(_&(Te|Xe)||_&Rt&&!(_&Fe))return!0}return!1},r.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&Te)>0},e.extend=function(){for(var a=[],_=arguments.length;_--;)a[_]=arguments[_];for(var C=this,L=0;L<a.length;L++)C=a[L](C);return C},e.parse=function(a,_){return new this(_,a).parse()},e.parseExpressionAt=function(a,_,C){var L=new this(C,a,_);return L.nextToken(),L.parseExpression()},e.tokenizer=function(a,_){return new this(_,a)},Object.defineProperties(e.prototype,r);var n=e.prototype,s=/^(?:'((?:\\[^]|[^'\\])*?)'|"((?:\\[^]|[^"\\])*?)")/;n.strictDirective=function(i){if(this.options.ecmaVersion<5)return!1;for(;;){Dt.lastIndex=i,i+=Dt.exec(this.input)[0].length;var a=s.exec(this.input.slice(i));if(!a)return!1;if((a[1]||a[2])==="use strict"){Dt.lastIndex=i+a[0].length;var _=Dt.exec(this.input),C=_.index+_[0].length,L=this.input.charAt(C);return L===";"||L==="}"||Ft.test(_[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(L)||L==="!"&&this.input.charAt(C+1)==="=")}i+=a[0].length,Dt.lastIndex=i,i+=Dt.exec(this.input)[0].length,this.input[i]===";"&&i++}},n.eat=function(i){return this.type===i?(this.next(),!0):!1},n.isContextual=function(i){return this.type===P.name&&this.value===i&&!this.containsEsc},n.eatContextual=function(i){return this.isContextual(i)?(this.next(),!0):!1},n.expectContextual=function(i){this.eatContextual(i)||this.unexpected()},n.canInsertSemicolon=function(){return this.type===P.eof||this.type===P.braceR||Ft.test(this.input.slice(this.lastTokEnd,this.start))},n.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},n.semicolon=function(){!this.eat(P.semi)&&!this.insertSemicolon()&&this.unexpected()},n.afterTrailingComma=function(i,a){if(this.type===i)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),a||this.next(),!0},n.expect=function(i){this.eat(i)||this.unexpected()},n.unexpected=function(i){this.raise(i??this.start,"Unexpected token")};var o=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};n.checkPatternErrors=function(i,a){if(i){i.trailingComma>-1&&this.raiseRecoverable(i.trailingComma,"Comma is not permitted after the rest element");var _=a?i.parenthesizedAssign:i.parenthesizedBind;_>-1&&this.raiseRecoverable(_,a?"Assigning to rvalue":"Parenthesized pattern")}},n.checkExpressionErrors=function(i,a){if(!i)return!1;var _=i.shorthandAssign,C=i.doubleProto;if(!a)return _>=0||C>=0;_>=0&&this.raise(_,"Shorthand property assignments are valid only in destructuring patterns"),C>=0&&this.raiseRecoverable(C,"Redefinition of __proto__ property")},n.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},n.isSimpleAssignTarget=function(i){return i.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(i.expression):i.type==="Identifier"||i.type==="MemberExpression"};var h=e.prototype;h.parseTopLevel=function(i){var a=Object.create(null);for(i.body||(i.body=[]);this.type!==P.eof;){var _=this.parseStatement(null,!0,a);i.body.push(_)}if(this.inModule)for(var C=0,L=Object.keys(this.undefinedExports);C<L.length;C+=1){var H=L[C];this.raiseRecoverable(this.undefinedExports[H].start,"Export '"+H+"' is not defined")}return this.adaptDirectivePrologue(i.body),this.next(),i.sourceType=this.options.sourceType,this.finishNode(i,"Program")};var u={kind:"loop"},l={kind:"switch"};h.isLet=function(i){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;Dt.lastIndex=this.pos;var a=Dt.exec(this.input),_=this.pos+a[0].length,C=this.input.charCodeAt(_);if(C===91||C===92)return!0;if(i)return!1;if(C===123||C>55295&&C<56320)return!0;if(Jt(C,!0)){for(var L=_+1;ht(C=this.input.charCodeAt(L),!0);)++L;if(C===92||C>55295&&C<56320)return!0;var H=this.input.slice(_,L);if(!fe.test(H))return!0}return!1},h.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;Dt.lastIndex=this.pos;var i=Dt.exec(this.input),a=this.pos+i[0].length,_;return!Ft.test(this.input.slice(this.pos,a))&&this.input.slice(a,a+8)==="function"&&(a+8===this.input.length||!(ht(_=this.input.charCodeAt(a+8))||_>55295&&_<56320))},h.isUsingKeyword=function(i,a){if(this.options.ecmaVersion<17||!this.isContextual(i?"await":"using"))return!1;Dt.lastIndex=this.pos;var _=Dt.exec(this.input),C=this.pos+_[0].length;if(Ft.test(this.input.slice(this.pos,C)))return!1;if(i){var L=C+5,H;if(this.input.slice(C,L)!=="using"||L===this.input.length||ht(H=this.input.charCodeAt(L))||H>55295&&H<56320)return!1;Dt.lastIndex=L;var W=Dt.exec(this.input);if(W&&Ft.test(this.input.slice(L,L+W[0].length)))return!1}if(a){var J=C+2,nt;if(this.input.slice(C,J)==="of"&&(J===this.input.length||!ht(nt=this.input.charCodeAt(J))&&!(nt>55295&&nt<56320)))return!1}var gt=this.input.charCodeAt(C);return Jt(gt,!0)||gt===92},h.isAwaitUsing=function(i){return this.isUsingKeyword(!0,i)},h.isUsing=function(i){return this.isUsingKeyword(!1,i)},h.parseStatement=function(i,a,_){var C=this.type,L=this.startNode(),H;switch(this.isLet(i)&&(C=P._var,H="let"),C){case P._break:case P._continue:return this.parseBreakContinueStatement(L,C.keyword);case P._debugger:return this.parseDebuggerStatement(L);case P._do:return this.parseDoStatement(L);case P._for:return this.parseForStatement(L);case P._function:return i&&(this.strict||i!=="if"&&i!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(L,!1,!i);case P._class:return i&&this.unexpected(),this.parseClass(L,!0);case P._if:return this.parseIfStatement(L);case P._return:return this.parseReturnStatement(L);case P._switch:return this.parseSwitchStatement(L);case P._throw:return this.parseThrowStatement(L);case P._try:return this.parseTryStatement(L);case P._const:case P._var:return H=H||this.value,i&&H!=="var"&&this.unexpected(),this.parseVarStatement(L,H);case P._while:return this.parseWhileStatement(L);case P._with:return this.parseWithStatement(L);case P.braceL:return this.parseBlock(!0,L);case P.semi:return this.parseEmptyStatement(L);case P._export:case P._import:if(this.options.ecmaVersion>10&&C===P._import){Dt.lastIndex=this.pos;var W=Dt.exec(this.input),J=this.pos+W[0].length,nt=this.input.charCodeAt(J);if(nt===40||nt===46)return this.parseExpressionStatement(L,this.parseExpression())}return this.options.allowImportExportEverywhere||(a||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),C===P._import?this.parseImport(L):this.parseExport(L,_);default:if(this.isAsyncFunction())return i&&this.unexpected(),this.next(),this.parseFunctionStatement(L,!0,!i);var gt=this.isAwaitUsing(!1)?"await using":this.isUsing(!1)?"using":null;if(gt)return a&&this.options.sourceType==="script"&&this.raise(this.start,"Using declaration cannot appear in the top level when source type is `script`"),gt==="await using"&&(this.canAwait||this.raise(this.start,"Await using cannot appear outside of async function"),this.next()),this.next(),this.parseVar(L,!1,gt),this.semicolon(),this.finishNode(L,"VariableDeclaration");var St=this.value,Vt=this.parseExpression();return C===P.name&&Vt.type==="Identifier"&&this.eat(P.colon)?this.parseLabeledStatement(L,St,Vt,i):this.parseExpressionStatement(L,Vt)}},h.parseBreakContinueStatement=function(i,a){var _=a==="break";this.next(),this.eat(P.semi)||this.insertSemicolon()?i.label=null:this.type!==P.name?this.unexpected():(i.label=this.parseIdent(),this.semicolon());for(var C=0;C<this.labels.length;++C){var L=this.labels[C];if((i.label==null||L.name===i.label.name)&&(L.kind!=null&&(_||L.kind==="loop")||i.label&&_))break}return C===this.labels.length&&this.raise(i.start,"Unsyntactic "+a),this.finishNode(i,_?"BreakStatement":"ContinueStatement")},h.parseDebuggerStatement=function(i){return this.next(),this.semicolon(),this.finishNode(i,"DebuggerStatement")},h.parseDoStatement=function(i){return this.next(),this.labels.push(u),i.body=this.parseStatement("do"),this.labels.pop(),this.expect(P._while),i.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(P.semi):this.semicolon(),this.finishNode(i,"DoWhileStatement")},h.parseForStatement=function(i){this.next();var a=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(u),this.enterScope(0),this.expect(P.parenL),this.type===P.semi)return a>-1&&this.unexpected(a),this.parseFor(i,null);var _=this.isLet();if(this.type===P._var||this.type===P._const||_){var C=this.startNode(),L=_?"let":this.value;return this.next(),this.parseVar(C,!0,L),this.finishNode(C,"VariableDeclaration"),this.parseForAfterInit(i,C,a)}var H=this.isContextual("let"),W=!1,J=this.isUsing(!0)?"using":this.isAwaitUsing(!0)?"await using":null;if(J){var nt=this.startNode();return this.next(),J==="await using"&&this.next(),this.parseVar(nt,!0,J),this.finishNode(nt,"VariableDeclaration"),this.parseForAfterInit(i,nt,a)}var gt=this.containsEsc,St=new o,Vt=this.start,ie=a>-1?this.parseExprSubscripts(St,"await"):this.parseExpression(!0,St);return this.type===P._in||(W=this.options.ecmaVersion>=6&&this.isContextual("of"))?(a>-1?(this.type===P._in&&this.unexpected(a),i.await=!0):W&&this.options.ecmaVersion>=8&&(ie.start===Vt&&!gt&&ie.type==="Identifier"&&ie.name==="async"?this.unexpected():this.options.ecmaVersion>=9&&(i.await=!1)),H&&W&&this.raise(ie.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(ie,!1,St),this.checkLValPattern(ie),this.parseForIn(i,ie)):(this.checkExpressionErrors(St,!0),a>-1&&this.unexpected(a),this.parseFor(i,ie))},h.parseForAfterInit=function(i,a,_){return(this.type===P._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&a.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===P._in?_>-1&&this.unexpected(_):i.await=_>-1),this.parseForIn(i,a)):(_>-1&&this.unexpected(_),this.parseFor(i,a))},h.parseFunctionStatement=function(i,a,_){return this.next(),this.parseFunction(i,v|(_?0:m),!1,a)},h.parseIfStatement=function(i){return this.next(),i.test=this.parseParenExpression(),i.consequent=this.parseStatement("if"),i.alternate=this.eat(P._else)?this.parseStatement("if"):null,this.finishNode(i,"IfStatement")},h.parseReturnStatement=function(i){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(P.semi)||this.insertSemicolon()?i.argument=null:(i.argument=this.parseExpression(),this.semicolon()),this.finishNode(i,"ReturnStatement")},h.parseSwitchStatement=function(i){this.next(),i.discriminant=this.parseParenExpression(),i.cases=[],this.expect(P.braceL),this.labels.push(l),this.enterScope(0);for(var a,_=!1;this.type!==P.braceR;)if(this.type===P._case||this.type===P._default){var C=this.type===P._case;a&&this.finishNode(a,"SwitchCase"),i.cases.push(a=this.startNode()),a.consequent=[],this.next(),C?a.test=this.parseExpression():(_&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),_=!0,a.test=null),this.expect(P.colon)}else a||this.unexpected(),a.consequent.push(this.parseStatement(null));return this.exitScope(),a&&this.finishNode(a,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(i,"SwitchStatement")},h.parseThrowStatement=function(i){return this.next(),Ft.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),i.argument=this.parseExpression(),this.semicolon(),this.finishNode(i,"ThrowStatement")};var f=[];h.parseCatchClauseParam=function(){var i=this.parseBindingAtom(),a=i.type==="Identifier";return this.enterScope(a?Ei:0),this.checkLValPattern(i,a?bt:Lt),this.expect(P.parenR),i},h.parseTryStatement=function(i){if(this.next(),i.block=this.parseBlock(),i.handler=null,this.type===P._catch){var a=this.startNode();this.next(),this.eat(P.parenL)?a.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),a.param=null,this.enterScope(0)),a.body=this.parseBlock(!1),this.exitScope(),i.handler=this.finishNode(a,"CatchClause")}return i.finalizer=this.eat(P._finally)?this.parseBlock():null,!i.handler&&!i.finalizer&&this.raise(i.start,"Missing catch or finally clause"),this.finishNode(i,"TryStatement")},h.parseVarStatement=function(i,a,_){return this.next(),this.parseVar(i,!1,a,_),this.semicolon(),this.finishNode(i,"VariableDeclaration")},h.parseWhileStatement=function(i){return this.next(),i.test=this.parseParenExpression(),this.labels.push(u),i.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(i,"WhileStatement")},h.parseWithStatement=function(i){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),i.object=this.parseParenExpression(),i.body=this.parseStatement("with"),this.finishNode(i,"WithStatement")},h.parseEmptyStatement=function(i){return this.next(),this.finishNode(i,"EmptyStatement")},h.parseLabeledStatement=function(i,a,_,C){for(var L=0,H=this.labels;L<H.length;L+=1){var W=H[L];W.name===a&&this.raise(_.start,"Label '"+a+"' is already declared")}for(var J=this.type.isLoop?"loop":this.type===P._switch?"switch":null,nt=this.labels.length-1;nt>=0;nt--){var gt=this.labels[nt];if(gt.statementStart===i.start)gt.statementStart=this.start,gt.kind=J;else break}return this.labels.push({name:a,kind:J,statementStart:this.start}),i.body=this.parseStatement(C?C.indexOf("label")===-1?C+"label":C:"label"),this.labels.pop(),i.label=_,this.finishNode(i,"LabeledStatement")},h.parseExpressionStatement=function(i,a){return i.expression=a,this.semicolon(),this.finishNode(i,"ExpressionStatement")},h.parseBlock=function(i,a,_){for(i===void 0&&(i=!0),a===void 0&&(a=this.startNode()),a.body=[],this.expect(P.braceL),i&&this.enterScope(0);this.type!==P.braceR;){var C=this.parseStatement(null);a.body.push(C)}return _&&(this.strict=!1),this.next(),i&&this.exitScope(),this.finishNode(a,"BlockStatement")},h.parseFor=function(i,a){return i.init=a,this.expect(P.semi),i.test=this.type===P.semi?null:this.parseExpression(),this.expect(P.semi),i.update=this.type===P.parenR?null:this.parseExpression(),this.expect(P.parenR),i.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(i,"ForStatement")},h.parseForIn=function(i,a){var _=this.type===P._in;return this.next(),a.type==="VariableDeclaration"&&a.declarations[0].init!=null&&(!_||this.options.ecmaVersion<8||this.strict||a.kind!=="var"||a.declarations[0].id.type!=="Identifier")&&this.raise(a.start,(_?"for-in":"for-of")+" loop variable declaration may not have an initializer"),i.left=a,i.right=_?this.parseExpression():this.parseMaybeAssign(),this.expect(P.parenR),i.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(i,_?"ForInStatement":"ForOfStatement")},h.parseVar=function(i,a,_,C){for(i.declarations=[],i.kind=_;;){var L=this.startNode();if(this.parseVarId(L,_),this.eat(P.eq)?L.init=this.parseMaybeAssign(a):!C&&_==="const"&&!(this.type===P._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():!C&&(_==="using"||_==="await using")&&this.options.ecmaVersion>=17&&this.type!==P._in&&!this.isContextual("of")?this.raise(this.lastTokEnd,"Missing initializer in "+_+" declaration"):!C&&L.id.type!=="Identifier"&&!(a&&(this.type===P._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):L.init=null,i.declarations.push(this.finishNode(L,"VariableDeclarator")),!this.eat(P.comma))break}return i},h.parseVarId=function(i,a){i.id=a==="using"||a==="await using"?this.parseIdent():this.parseBindingAtom(),this.checkLValPattern(i.id,a==="var"?Qe:Lt,!1)};var v=1,m=2,d=4;h.parseFunction=function(i,a,_,C,L){this.initFunction(i),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!C)&&(this.type===P.star&&a&m&&this.unexpected(),i.generator=this.eat(P.star)),this.options.ecmaVersion>=8&&(i.async=!!C),a&v&&(i.id=a&d&&this.type!==P.name?null:this.parseIdent(),i.id&&!(a&m)&&this.checkLValSimple(i.id,this.strict||i.generator||i.async?this.treatFunctionsAsVar?Qe:Lt:vi));var H=this.yieldPos,W=this.awaitPos,J=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(hi(i.async,i.generator)),a&v||(i.id=this.type===P.name?this.parseIdent():null),this.parseFunctionParams(i),this.parseFunctionBody(i,_,!1,L),this.yieldPos=H,this.awaitPos=W,this.awaitIdentPos=J,this.finishNode(i,a&v?"FunctionDeclaration":"FunctionExpression")},h.parseFunctionParams=function(i){this.expect(P.parenL),i.params=this.parseBindingList(P.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},h.parseClass=function(i,a){this.next();var _=this.strict;this.strict=!0,this.parseClassId(i,a),this.parseClassSuper(i);var C=this.enterClassBody(),L=this.startNode(),H=!1;for(L.body=[],this.expect(P.braceL);this.type!==P.braceR;){var W=this.parseClassElement(i.superClass!==null);W&&(L.body.push(W),W.type==="MethodDefinition"&&W.kind==="constructor"?(H&&this.raiseRecoverable(W.start,"Duplicate constructor in the same class"),H=!0):W.key&&W.key.type==="PrivateIdentifier"&&p(C,W)&&this.raiseRecoverable(W.key.start,"Identifier '#"+W.key.name+"' has already been declared"))}return this.strict=_,this.next(),i.body=this.finishNode(L,"ClassBody"),this.exitClassBody(),this.finishNode(i,a?"ClassDeclaration":"ClassExpression")},h.parseClassElement=function(i){if(this.eat(P.semi))return null;var a=this.options.ecmaVersion,_=this.startNode(),C="",L=!1,H=!1,W="method",J=!1;if(this.eatContextual("static")){if(a>=13&&this.eat(P.braceL))return this.parseClassStaticBlock(_),_;this.isClassElementNameStart()||this.type===P.star?J=!0:C="static"}if(_.static=J,!C&&a>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===P.star)&&!this.canInsertSemicolon()?H=!0:C="async"),!C&&(a>=9||!H)&&this.eat(P.star)&&(L=!0),!C&&!H&&!L){var nt=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?W=nt:C=nt)}if(C?(_.computed=!1,_.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),_.key.name=C,this.finishNode(_.key,"Identifier")):this.parseClassElementName(_),a<13||this.type===P.parenL||W!=="method"||L||H){var gt=!_.static&&k(_,"constructor"),St=gt&&i;gt&&W!=="method"&&this.raise(_.key.start,"Constructor can't have get/set modifier"),_.kind=gt?"constructor":W,this.parseClassMethod(_,L,H,St)}else this.parseClassField(_);return _},h.isClassElementNameStart=function(){return this.type===P.name||this.type===P.privateId||this.type===P.num||this.type===P.string||this.type===P.bracketL||this.type.keyword},h.parseClassElementName=function(i){this.type===P.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),i.computed=!1,i.key=this.parsePrivateIdent()):this.parsePropertyName(i)},h.parseClassMethod=function(i,a,_,C){var L=i.key;i.kind==="constructor"?(a&&this.raise(L.start,"Constructor can't be a generator"),_&&this.raise(L.start,"Constructor can't be an async method")):i.static&&k(i,"prototype")&&this.raise(L.start,"Classes may not have a static property named prototype");var H=i.value=this.parseMethod(a,_,C);return i.kind==="get"&&H.params.length!==0&&this.raiseRecoverable(H.start,"getter should have no params"),i.kind==="set"&&H.params.length!==1&&this.raiseRecoverable(H.start,"setter should have exactly one param"),i.kind==="set"&&H.params[0].type==="RestElement"&&this.raiseRecoverable(H.params[0].start,"Setter cannot use rest params"),this.finishNode(i,"MethodDefinition")},h.parseClassField=function(i){return k(i,"constructor")?this.raise(i.key.start,"Classes can't have a field named 'constructor'"):i.static&&k(i,"prototype")&&this.raise(i.key.start,"Classes can't have a static field named 'prototype'"),this.eat(P.eq)?(this.enterScope(Xe|Ke),i.value=this.parseMaybeAssign(),this.exitScope()):i.value=null,this.semicolon(),this.finishNode(i,"PropertyDefinition")},h.parseClassStaticBlock=function(i){i.body=[];var a=this.labels;for(this.labels=[],this.enterScope(Te|Ke);this.type!==P.braceR;){var _=this.parseStatement(null);i.body.push(_)}return this.next(),this.exitScope(),this.labels=a,this.finishNode(i,"StaticBlock")},h.parseClassId=function(i,a){this.type===P.name?(i.id=this.parseIdent(),a&&this.checkLValSimple(i.id,Lt,!1)):(a===!0&&this.unexpected(),i.id=null)},h.parseClassSuper=function(i){i.superClass=this.eat(P._extends)?this.parseExprSubscripts(null,!1):null},h.enterClassBody=function(){var i={declared:Object.create(null),used:[]};return this.privateNameStack.push(i),i.declared},h.exitClassBody=function(){var i=this.privateNameStack.pop(),a=i.declared,_=i.used;if(this.options.checkPrivateFields)for(var C=this.privateNameStack.length,L=C===0?null:this.privateNameStack[C-1],H=0;H<_.length;++H){var W=_[H];et(a,W.name)||(L?L.used.push(W):this.raiseRecoverable(W.start,"Private field '#"+W.name+"' must be declared in an enclosing class"))}};function p(i,a){var _=a.key.name,C=i[_],L="true";return a.type==="MethodDefinition"&&(a.kind==="get"||a.kind==="set")&&(L=(a.static?"s":"i")+a.kind),C==="iget"&&L==="iset"||C==="iset"&&L==="iget"||C==="sget"&&L==="sset"||C==="sset"&&L==="sget"?(i[_]="true",!1):C?!0:(i[_]=L,!1)}function k(i,a){var _=i.computed,C=i.key;return!_&&(C.type==="Identifier"&&C.name===a||C.type==="Literal"&&C.value===a)}h.parseExportAllDeclaration=function(i,a){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(i.exported=this.parseModuleExportName(),this.checkExport(a,i.exported,this.lastTokStart)):i.exported=null),this.expectContextual("from"),this.type!==P.string&&this.unexpected(),i.source=this.parseExprAtom(),this.options.ecmaVersion>=16&&(i.attributes=this.parseWithClause()),this.semicolon(),this.finishNode(i,"ExportAllDeclaration")},h.parseExport=function(i,a){if(this.next(),this.eat(P.star))return this.parseExportAllDeclaration(i,a);if(this.eat(P._default))return this.checkExport(a,"default",this.lastTokStart),i.declaration=this.parseExportDefaultDeclaration(),this.finishNode(i,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())i.declaration=this.parseExportDeclaration(i),i.declaration.type==="VariableDeclaration"?this.checkVariableExport(a,i.declaration.declarations):this.checkExport(a,i.declaration.id,i.declaration.id.start),i.specifiers=[],i.source=null,this.options.ecmaVersion>=16&&(i.attributes=[]);else{if(i.declaration=null,i.specifiers=this.parseExportSpecifiers(a),this.eatContextual("from"))this.type!==P.string&&this.unexpected(),i.source=this.parseExprAtom(),this.options.ecmaVersion>=16&&(i.attributes=this.parseWithClause());else{for(var _=0,C=i.specifiers;_<C.length;_+=1){var L=C[_];this.checkUnreserved(L.local),this.checkLocalExport(L.local),L.local.type==="Literal"&&this.raise(L.local.start,"A string literal cannot be used as an exported binding without `from`.")}i.source=null,this.options.ecmaVersion>=16&&(i.attributes=[])}this.semicolon()}return this.finishNode(i,"ExportNamedDeclaration")},h.parseExportDeclaration=function(i){return this.parseStatement(null)},h.parseExportDefaultDeclaration=function(){var i;if(this.type===P._function||(i=this.isAsyncFunction())){var a=this.startNode();return this.next(),i&&this.next(),this.parseFunction(a,v|d,!1,i)}else if(this.type===P._class){var _=this.startNode();return this.parseClass(_,"nullableID")}else{var C=this.parseMaybeAssign();return this.semicolon(),C}},h.checkExport=function(i,a,_){i&&(typeof a!="string"&&(a=a.type==="Identifier"?a.name:a.value),et(i,a)&&this.raiseRecoverable(_,"Duplicate export '"+a+"'"),i[a]=!0)},h.checkPatternExport=function(i,a){var _=a.type;if(_==="Identifier")this.checkExport(i,a,a.start);else if(_==="ObjectPattern")for(var C=0,L=a.properties;C<L.length;C+=1){var H=L[C];this.checkPatternExport(i,H)}else if(_==="ArrayPattern")for(var W=0,J=a.elements;W<J.length;W+=1){var nt=J[W];nt&&this.checkPatternExport(i,nt)}else _==="Property"?this.checkPatternExport(i,a.value):_==="AssignmentPattern"?this.checkPatternExport(i,a.left):_==="RestElement"&&this.checkPatternExport(i,a.argument)},h.checkVariableExport=function(i,a){if(i)for(var _=0,C=a;_<C.length;_+=1){var L=C[_];this.checkPatternExport(i,L.id)}},h.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()},h.parseExportSpecifier=function(i){var a=this.startNode();return a.local=this.parseModuleExportName(),a.exported=this.eatContextual("as")?this.parseModuleExportName():a.local,this.checkExport(i,a.exported,a.exported.start),this.finishNode(a,"ExportSpecifier")},h.parseExportSpecifiers=function(i){var a=[],_=!0;for(this.expect(P.braceL);!this.eat(P.braceR);){if(_)_=!1;else if(this.expect(P.comma),this.afterTrailingComma(P.braceR))break;a.push(this.parseExportSpecifier(i))}return a},h.parseImport=function(i){return this.next(),this.type===P.string?(i.specifiers=f,i.source=this.parseExprAtom()):(i.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),i.source=this.type===P.string?this.parseExprAtom():this.unexpected()),this.options.ecmaVersion>=16&&(i.attributes=this.parseWithClause()),this.semicolon(),this.finishNode(i,"ImportDeclaration")},h.parseImportSpecifier=function(){var i=this.startNode();return i.imported=this.parseModuleExportName(),this.eatContextual("as")?i.local=this.parseIdent():(this.checkUnreserved(i.imported),i.local=i.imported),this.checkLValSimple(i.local,Lt),this.finishNode(i,"ImportSpecifier")},h.parseImportDefaultSpecifier=function(){var i=this.startNode();return i.local=this.parseIdent(),this.checkLValSimple(i.local,Lt),this.finishNode(i,"ImportDefaultSpecifier")},h.parseImportNamespaceSpecifier=function(){var i=this.startNode();return this.next(),this.expectContextual("as"),i.local=this.parseIdent(),this.checkLValSimple(i.local,Lt),this.finishNode(i,"ImportNamespaceSpecifier")},h.parseImportSpecifiers=function(){var i=[],a=!0;if(this.type===P.name&&(i.push(this.parseImportDefaultSpecifier()),!this.eat(P.comma)))return i;if(this.type===P.star)return i.push(this.parseImportNamespaceSpecifier()),i;for(this.expect(P.braceL);!this.eat(P.braceR);){if(a)a=!1;else if(this.expect(P.comma),this.afterTrailingComma(P.braceR))break;i.push(this.parseImportSpecifier())}return i},h.parseWithClause=function(){var i=[];if(!this.eat(P._with))return i;this.expect(P.braceL);for(var a={},_=!0;!this.eat(P.braceR);){if(_)_=!1;else if(this.expect(P.comma),this.afterTrailingComma(P.braceR))break;var C=this.parseImportAttribute(),L=C.key.type==="Identifier"?C.key.name:C.key.value;et(a,L)&&this.raiseRecoverable(C.key.start,"Duplicate attribute key '"+L+"'"),a[L]=!0,i.push(C)}return i},h.parseImportAttribute=function(){var i=this.startNode();return i.key=this.type===P.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never"),this.expect(P.colon),this.type!==P.string&&this.unexpected(),i.value=this.parseExprAtom(),this.finishNode(i,"ImportAttribute")},h.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===P.string){var i=this.parseLiteral(this.value);return Pi.test(i.value)&&this.raise(i.start,"An export name cannot include a lone surrogate."),i}return this.parseIdent(!0)},h.adaptDirectivePrologue=function(i){for(var a=0;a<i.length&&this.isDirectiveCandidate(i[a]);++a)i[a].directive=i[a].expression.raw.slice(1,-1)},h.isDirectiveCandidate=function(i){return this.options.ecmaVersion>=5&&i.type==="ExpressionStatement"&&i.expression.type==="Literal"&&typeof i.expression.value=="string"&&(this.input[i.start]==='"'||this.input[i.start]==="'")};var y=e.prototype;y.toAssignable=function(i,a,_){if(this.options.ecmaVersion>=6&&i)switch(i.type){case"Identifier":this.inAsync&&i.name==="await"&&this.raise(i.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":i.type="ObjectPattern",_&&this.checkPatternErrors(_,!0);for(var C=0,L=i.properties;C<L.length;C+=1){var H=L[C];this.toAssignable(H,a),H.type==="RestElement"&&(H.argument.type==="ArrayPattern"||H.argument.type==="ObjectPattern")&&this.raise(H.argument.start,"Unexpected token")}break;case"Property":i.kind!=="init"&&this.raise(i.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(i.value,a);break;case"ArrayExpression":i.type="ArrayPattern",_&&this.checkPatternErrors(_,!0),this.toAssignableList(i.elements,a);break;case"SpreadElement":i.type="RestElement",this.toAssignable(i.argument,a),i.argument.type==="AssignmentPattern"&&this.raise(i.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":i.operator!=="="&&this.raise(i.left.end,"Only '=' operator can be used for specifying default value."),i.type="AssignmentPattern",delete i.operator,this.toAssignable(i.left,a);break;case"ParenthesizedExpression":this.toAssignable(i.expression,a,_);break;case"ChainExpression":this.raiseRecoverable(i.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!a)break;default:this.raise(i.start,"Assigning to rvalue")}else _&&this.checkPatternErrors(_,!0);return i},y.toAssignableList=function(i,a){for(var _=i.length,C=0;C<_;C++){var L=i[C];L&&this.toAssignable(L,a)}if(_){var H=i[_-1];this.options.ecmaVersion===6&&a&&H&&H.type==="RestElement"&&H.argument.type!=="Identifier"&&this.unexpected(H.argument.start)}return i},y.parseSpread=function(i){var a=this.startNode();return this.next(),a.argument=this.parseMaybeAssign(!1,i),this.finishNode(a,"SpreadElement")},y.parseRestBinding=function(){var i=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==P.name&&this.unexpected(),i.argument=this.parseBindingAtom(),this.finishNode(i,"RestElement")},y.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case P.bracketL:var i=this.startNode();return this.next(),i.elements=this.parseBindingList(P.bracketR,!0,!0),this.finishNode(i,"ArrayPattern");case P.braceL:return this.parseObj(!0)}return this.parseIdent()},y.parseBindingList=function(i,a,_,C){for(var L=[],H=!0;!this.eat(i);)if(H?H=!1:this.expect(P.comma),a&&this.type===P.comma)L.push(null);else{if(_&&this.afterTrailingComma(i))break;if(this.type===P.ellipsis){var W=this.parseRestBinding();this.parseBindingListItem(W),L.push(W),this.type===P.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(i);break}else L.push(this.parseAssignableListItem(C))}return L},y.parseAssignableListItem=function(i){var a=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(a),a},y.parseBindingListItem=function(i){return i},y.parseMaybeDefault=function(i,a,_){if(_=_||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(P.eq))return _;var C=this.startNodeAt(i,a);return C.left=_,C.right=this.parseMaybeAssign(),this.finishNode(C,"AssignmentPattern")},y.checkLValSimple=function(i,a,_){a===void 0&&(a=Ht);var C=a!==Ht;switch(i.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(i.name)&&this.raiseRecoverable(i.start,(C?"Binding ":"Assigning to ")+i.name+" in strict mode"),C&&(a===Lt&&i.name==="let"&&this.raiseRecoverable(i.start,"let is disallowed as a lexically bound name"),_&&(et(_,i.name)&&this.raiseRecoverable(i.start,"Argument name clash"),_[i.name]=!0),a!==t&&this.declareName(i.name,a,i.start));break;case"ChainExpression":this.raiseRecoverable(i.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":C&&this.raiseRecoverable(i.start,"Binding member expression");break;case"ParenthesizedExpression":return C&&this.raiseRecoverable(i.start,"Binding parenthesized expression"),this.checkLValSimple(i.expression,a,_);default:this.raise(i.start,(C?"Binding":"Assigning to")+" rvalue")}},y.checkLValPattern=function(i,a,_){switch(a===void 0&&(a=Ht),i.type){case"ObjectPattern":for(var C=0,L=i.properties;C<L.length;C+=1){var H=L[C];this.checkLValInnerPattern(H,a,_)}break;case"ArrayPattern":for(var W=0,J=i.elements;W<J.length;W+=1){var nt=J[W];nt&&this.checkLValInnerPattern(nt,a,_)}break;default:this.checkLValSimple(i,a,_)}},y.checkLValInnerPattern=function(i,a,_){switch(a===void 0&&(a=Ht),i.type){case"Property":this.checkLValInnerPattern(i.value,a,_);break;case"AssignmentPattern":this.checkLValPattern(i.left,a,_);break;case"RestElement":this.checkLValPattern(i.argument,a,_);break;default:this.checkLValPattern(i,a,_)}};var S=function(a,_,C,L,H){this.token=a,this.isExpr=!!_,this.preserveSpace=!!C,this.override=L,this.generator=!!H},g={b_stat:new S("{",!1),b_expr:new S("{",!0),b_tmpl:new S("${",!1),p_stat:new S("(",!1),p_expr:new S("(",!0),q_tmpl:new S("`",!0,!0,function(i){return i.tryReadTemplateToken()}),f_stat:new S("function",!1),f_expr:new S("function",!0),f_expr_gen:new S("function",!0,!1,null,!0),f_gen:new S("function",!1,!1,null,!0)},w=e.prototype;w.initialContext=function(){return[g.b_stat]},w.curContext=function(){return this.context[this.context.length-1]},w.braceIsBlock=function(i){var a=this.curContext();return a===g.f_expr||a===g.f_stat?!0:i===P.colon&&(a===g.b_stat||a===g.b_expr)?!a.isExpr:i===P._return||i===P.name&&this.exprAllowed?Ft.test(this.input.slice(this.lastTokEnd,this.start)):i===P._else||i===P.semi||i===P.eof||i===P.parenR||i===P.arrow?!0:i===P.braceL?a===g.b_stat:i===P._var||i===P._const||i===P.name?!1:!this.exprAllowed},w.inGeneratorContext=function(){for(var i=this.context.length-1;i>=1;i--){var a=this.context[i];if(a.token==="function")return a.generator}return!1},w.updateContext=function(i){var a,_=this.type;_.keyword&&i===P.dot?this.exprAllowed=!1:(a=_.updateContext)?a.call(this,i):this.exprAllowed=_.beforeExpr},w.overrideContext=function(i){this.curContext()!==i&&(this.context[this.context.length-1]=i)},P.parenR.updateContext=P.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var i=this.context.pop();i===g.b_stat&&this.curContext().token==="function"&&(i=this.context.pop()),this.exprAllowed=!i.isExpr},P.braceL.updateContext=function(i){this.context.push(this.braceIsBlock(i)?g.b_stat:g.b_expr),this.exprAllowed=!0},P.dollarBraceL.updateContext=function(){this.context.push(g.b_tmpl),this.exprAllowed=!0},P.parenL.updateContext=function(i){var a=i===P._if||i===P._for||i===P._with||i===P._while;this.context.push(a?g.p_stat:g.p_expr),this.exprAllowed=!0},P.incDec.updateContext=function(){},P._function.updateContext=P._class.updateContext=function(i){i.beforeExpr&&i!==P._else&&!(i===P.semi&&this.curContext()!==g.p_stat)&&!(i===P._return&&Ft.test(this.input.slice(this.lastTokEnd,this.start)))&&!((i===P.colon||i===P.braceL)&&this.curContext()===g.b_stat)?this.context.push(g.f_expr):this.context.push(g.f_stat),this.exprAllowed=!1},P.colon.updateContext=function(){this.curContext().token==="function"&&this.context.pop(),this.exprAllowed=!0},P.backQuote.updateContext=function(){this.curContext()===g.q_tmpl?this.context.pop():this.context.push(g.q_tmpl),this.exprAllowed=!1},P.star.updateContext=function(i){if(i===P._function){var a=this.context.length-1;this.context[a]===g.f_expr?this.context[a]=g.f_expr_gen:this.context[a]=g.f_gen}this.exprAllowed=!0},P.name.updateContext=function(i){var a=!1;this.options.ecmaVersion>=6&&i!==P.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(a=!0),this.exprAllowed=a};var c=e.prototype;c.checkPropClash=function(i,a,_){if(!(this.options.ecmaVersion>=9&&i.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(i.computed||i.method||i.shorthand))){var C=i.key,L;switch(C.type){case"Identifier":L=C.name;break;case"Literal":L=String(C.value);break;default:return}var H=i.kind;if(this.options.ecmaVersion>=6){L==="__proto__"&&H==="init"&&(a.proto&&(_?_.doubleProto<0&&(_.doubleProto=C.start):this.raiseRecoverable(C.start,"Redefinition of __proto__ property")),a.proto=!0);return}L="$"+L;var W=a[L];if(W){var J;H==="init"?J=this.strict&&W.init||W.get||W.set:J=W.init||W[H],J&&this.raiseRecoverable(C.start,"Redefinition of property")}else W=a[L]={init:!1,get:!1,set:!1};W[H]=!0}},c.parseExpression=function(i,a){var _=this.start,C=this.startLoc,L=this.parseMaybeAssign(i,a);if(this.type===P.comma){var H=this.startNodeAt(_,C);for(H.expressions=[L];this.eat(P.comma);)H.expressions.push(this.parseMaybeAssign(i,a));return this.finishNode(H,"SequenceExpression")}return L},c.parseMaybeAssign=function(i,a,_){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(i);this.exprAllowed=!1}var C=!1,L=-1,H=-1,W=-1;a?(L=a.parenthesizedAssign,H=a.trailingComma,W=a.doubleProto,a.parenthesizedAssign=a.trailingComma=-1):(a=new o,C=!0);var J=this.start,nt=this.startLoc;(this.type===P.parenL||this.type===P.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=i==="await");var gt=this.parseMaybeConditional(i,a);if(_&&(gt=_.call(this,gt,J,nt)),this.type.isAssign){var St=this.startNodeAt(J,nt);return St.operator=this.value,this.type===P.eq&&(gt=this.toAssignable(gt,!1,a)),C||(a.parenthesizedAssign=a.trailingComma=a.doubleProto=-1),a.shorthandAssign>=gt.start&&(a.shorthandAssign=-1),this.type===P.eq?this.checkLValPattern(gt):this.checkLValSimple(gt),St.left=gt,this.next(),St.right=this.parseMaybeAssign(i),W>-1&&(a.doubleProto=W),this.finishNode(St,"AssignmentExpression")}else C&&this.checkExpressionErrors(a,!0);return L>-1&&(a.parenthesizedAssign=L),H>-1&&(a.trailingComma=H),gt},c.parseMaybeConditional=function(i,a){var _=this.start,C=this.startLoc,L=this.parseExprOps(i,a);if(this.checkExpressionErrors(a))return L;if(this.eat(P.question)){var H=this.startNodeAt(_,C);return H.test=L,H.consequent=this.parseMaybeAssign(),this.expect(P.colon),H.alternate=this.parseMaybeAssign(i),this.finishNode(H,"ConditionalExpression")}return L},c.parseExprOps=function(i,a){var _=this.start,C=this.startLoc,L=this.parseMaybeUnary(a,!1,!1,i);return this.checkExpressionErrors(a)||L.start===_&&L.type==="ArrowFunctionExpression"?L:this.parseExprOp(L,_,C,-1,i)},c.parseExprOp=function(i,a,_,C,L){var H=this.type.binop;if(H!=null&&(!L||this.type!==P._in)&&H>C){var W=this.type===P.logicalOR||this.type===P.logicalAND,J=this.type===P.coalesce;J&&(H=P.logicalAND.binop);var nt=this.value;this.next();var gt=this.start,St=this.startLoc,Vt=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,L),gt,St,H,L),ie=this.buildBinary(a,_,i,Vt,nt,W||J);return(W&&this.type===P.coalesce||J&&(this.type===P.logicalOR||this.type===P.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(ie,a,_,C,L)}return i},c.buildBinary=function(i,a,_,C,L,H){C.type==="PrivateIdentifier"&&this.raise(C.start,"Private identifier can only be left side of binary expression");var W=this.startNodeAt(i,a);return W.left=_,W.operator=L,W.right=C,this.finishNode(W,H?"LogicalExpression":"BinaryExpression")},c.parseMaybeUnary=function(i,a,_,C){var L=this.start,H=this.startLoc,W;if(this.isContextual("await")&&this.canAwait)W=this.parseAwait(C),a=!0;else if(this.type.prefix){var J=this.startNode(),nt=this.type===P.incDec;J.operator=this.value,J.prefix=!0,this.next(),J.argument=this.parseMaybeUnary(null,!0,nt,C),this.checkExpressionErrors(i,!0),nt?this.checkLValSimple(J.argument):this.strict&&J.operator==="delete"&&x(J.argument)?this.raiseRecoverable(J.start,"Deleting local variable in strict mode"):J.operator==="delete"&&I(J.argument)?this.raiseRecoverable(J.start,"Private fields can not be deleted"):a=!0,W=this.finishNode(J,nt?"UpdateExpression":"UnaryExpression")}else if(!a&&this.type===P.privateId)(C||this.privateNameStack.length===0)&&this.options.checkPrivateFields&&this.unexpected(),W=this.parsePrivateIdent(),this.type!==P._in&&this.unexpected();else{if(W=this.parseExprSubscripts(i,C),this.checkExpressionErrors(i))return W;for(;this.type.postfix&&!this.canInsertSemicolon();){var gt=this.startNodeAt(L,H);gt.operator=this.value,gt.prefix=!1,gt.argument=W,this.checkLValSimple(W),this.next(),W=this.finishNode(gt,"UpdateExpression")}}if(!_&&this.eat(P.starstar))if(a)this.unexpected(this.lastTokStart);else return this.buildBinary(L,H,W,this.parseMaybeUnary(null,!1,!1,C),"**",!1);else return W};function x(i){return i.type==="Identifier"||i.type==="ParenthesizedExpression"&&x(i.expression)}function I(i){return i.type==="MemberExpression"&&i.property.type==="PrivateIdentifier"||i.type==="ChainExpression"&&I(i.expression)||i.type==="ParenthesizedExpression"&&I(i.expression)}c.parseExprSubscripts=function(i,a){var _=this.start,C=this.startLoc,L=this.parseExprAtom(i,a);if(L.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return L;var H=this.parseSubscripts(L,_,C,!1,a);return i&&H.type==="MemberExpression"&&(i.parenthesizedAssign>=H.start&&(i.parenthesizedAssign=-1),i.parenthesizedBind>=H.start&&(i.parenthesizedBind=-1),i.trailingComma>=H.start&&(i.trailingComma=-1)),H},c.parseSubscripts=function(i,a,_,C,L){for(var H=this.options.ecmaVersion>=8&&i.type==="Identifier"&&i.name==="async"&&this.lastTokEnd===i.end&&!this.canInsertSemicolon()&&i.end-i.start===5&&this.potentialArrowAt===i.start,W=!1;;){var J=this.parseSubscript(i,a,_,C,H,W,L);if(J.optional&&(W=!0),J===i||J.type==="ArrowFunctionExpression"){if(W){var nt=this.startNodeAt(a,_);nt.expression=J,J=this.finishNode(nt,"ChainExpression")}return J}i=J}},c.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(P.arrow)},c.parseSubscriptAsyncArrow=function(i,a,_,C){return this.parseArrowExpression(this.startNodeAt(i,a),_,!0,C)},c.parseSubscript=function(i,a,_,C,L,H,W){var J=this.options.ecmaVersion>=11,nt=J&&this.eat(P.questionDot);C&&nt&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var gt=this.eat(P.bracketL);if(gt||nt&&this.type!==P.parenL&&this.type!==P.backQuote||this.eat(P.dot)){var St=this.startNodeAt(a,_);St.object=i,gt?(St.property=this.parseExpression(),this.expect(P.bracketR)):this.type===P.privateId&&i.type!=="Super"?St.property=this.parsePrivateIdent():St.property=this.parseIdent(this.options.allowReserved!=="never"),St.computed=!!gt,J&&(St.optional=nt),i=this.finishNode(St,"MemberExpression")}else if(!C&&this.eat(P.parenL)){var Vt=new o,ie=this.yieldPos,$e=this.awaitPos,Oe=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var Ae=this.parseExprList(P.parenR,this.options.ecmaVersion>=8,!1,Vt);if(L&&!nt&&this.shouldParseAsyncArrow())return this.checkPatternErrors(Vt,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=ie,this.awaitPos=$e,this.awaitIdentPos=Oe,this.parseSubscriptAsyncArrow(a,_,Ae,W);this.checkExpressionErrors(Vt,!0),this.yieldPos=ie||this.yieldPos,this.awaitPos=$e||this.awaitPos,this.awaitIdentPos=Oe||this.awaitIdentPos;var qe=this.startNodeAt(a,_);qe.callee=i,qe.arguments=Ae,J&&(qe.optional=nt),i=this.finishNode(qe,"CallExpression")}else if(this.type===P.backQuote){(nt||H)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var Ue=this.startNodeAt(a,_);Ue.tag=i,Ue.quasi=this.parseTemplate({isTagged:!0}),i=this.finishNode(Ue,"TaggedTemplateExpression")}return i},c.parseExprAtom=function(i,a,_){this.type===P.slash&&this.readRegexp();var C,L=this.potentialArrowAt===this.start;switch(this.type){case P._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),C=this.startNode(),this.next(),this.type===P.parenL&&!this.allowDirectSuper&&this.raise(C.start,"super() call outside constructor of a subclass"),this.type!==P.dot&&this.type!==P.bracketL&&this.type!==P.parenL&&this.unexpected(),this.finishNode(C,"Super");case P._this:return C=this.startNode(),this.next(),this.finishNode(C,"ThisExpression");case P.name:var H=this.start,W=this.startLoc,J=this.containsEsc,nt=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!J&&nt.name==="async"&&!this.canInsertSemicolon()&&this.eat(P._function))return this.overrideContext(g.f_expr),this.parseFunction(this.startNodeAt(H,W),0,!1,!0,a);if(L&&!this.canInsertSemicolon()){if(this.eat(P.arrow))return this.parseArrowExpression(this.startNodeAt(H,W),[nt],!1,a);if(this.options.ecmaVersion>=8&&nt.name==="async"&&this.type===P.name&&!J&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return nt=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(P.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(H,W),[nt],!0,a)}return nt;case P.regexp:var gt=this.value;return C=this.parseLiteral(gt.value),C.regex={pattern:gt.pattern,flags:gt.flags},C;case P.num:case P.string:return this.parseLiteral(this.value);case P._null:case P._true:case P._false:return C=this.startNode(),C.value=this.type===P._null?null:this.type===P._true,C.raw=this.type.keyword,this.next(),this.finishNode(C,"Literal");case P.parenL:var St=this.start,Vt=this.parseParenAndDistinguishExpression(L,a);return i&&(i.parenthesizedAssign<0&&!this.isSimpleAssignTarget(Vt)&&(i.parenthesizedAssign=St),i.parenthesizedBind<0&&(i.parenthesizedBind=St)),Vt;case P.bracketL:return C=this.startNode(),this.next(),C.elements=this.parseExprList(P.bracketR,!0,!0,i),this.finishNode(C,"ArrayExpression");case P.braceL:return this.overrideContext(g.b_expr),this.parseObj(!1,i);case P._function:return C=this.startNode(),this.next(),this.parseFunction(C,0);case P._class:return this.parseClass(this.startNode(),!1);case P._new:return this.parseNew();case P.backQuote:return this.parseTemplate();case P._import:return this.options.ecmaVersion>=11?this.parseExprImport(_):this.unexpected();default:return this.parseExprAtomDefault()}},c.parseExprAtomDefault=function(){this.unexpected()},c.parseExprImport=function(i){var a=this.startNode();if(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import"),this.next(),this.type===P.parenL&&!i)return this.parseDynamicImport(a);if(this.type===P.dot){var _=this.startNodeAt(a.start,a.loc&&a.loc.start);return _.name="import",a.meta=this.finishNode(_,"Identifier"),this.parseImportMeta(a)}else this.unexpected()},c.parseDynamicImport=function(i){if(this.next(),i.source=this.parseMaybeAssign(),this.options.ecmaVersion>=16)this.eat(P.parenR)?i.options=null:(this.expect(P.comma),this.afterTrailingComma(P.parenR)?i.options=null:(i.options=this.parseMaybeAssign(),this.eat(P.parenR)||(this.expect(P.comma),this.afterTrailingComma(P.parenR)||this.unexpected())));else if(!this.eat(P.parenR)){var a=this.start;this.eat(P.comma)&&this.eat(P.parenR)?this.raiseRecoverable(a,"Trailing comma is not allowed in import()"):this.unexpected(a)}return this.finishNode(i,"ImportExpression")},c.parseImportMeta=function(i){this.next();var a=this.containsEsc;return i.property=this.parseIdent(!0),i.property.name!=="meta"&&this.raiseRecoverable(i.property.start,"The only valid meta property for import is 'import.meta'"),a&&this.raiseRecoverable(i.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(i.start,"Cannot use 'import.meta' outside a module"),this.finishNode(i,"MetaProperty")},c.parseLiteral=function(i){var a=this.startNode();return a.value=i,a.raw=this.input.slice(this.start,this.end),a.raw.charCodeAt(a.raw.length-1)===110&&(a.bigint=a.value!=null?a.value.toString():a.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(a,"Literal")},c.parseParenExpression=function(){this.expect(P.parenL);var i=this.parseExpression();return this.expect(P.parenR),i},c.shouldParseArrow=function(i){return!this.canInsertSemicolon()},c.parseParenAndDistinguishExpression=function(i,a){var _=this.start,C=this.startLoc,L,H=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var W=this.start,J=this.startLoc,nt=[],gt=!0,St=!1,Vt=new o,ie=this.yieldPos,$e=this.awaitPos,Oe;for(this.yieldPos=0,this.awaitPos=0;this.type!==P.parenR;)if(gt?gt=!1:this.expect(P.comma),H&&this.afterTrailingComma(P.parenR,!0)){St=!0;break}else if(this.type===P.ellipsis){Oe=this.start,nt.push(this.parseParenItem(this.parseRestBinding())),this.type===P.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}else nt.push(this.parseMaybeAssign(!1,Vt,this.parseParenItem));var Ae=this.lastTokEnd,qe=this.lastTokEndLoc;if(this.expect(P.parenR),i&&this.shouldParseArrow(nt)&&this.eat(P.arrow))return this.checkPatternErrors(Vt,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=ie,this.awaitPos=$e,this.parseParenArrowList(_,C,nt,a);(!nt.length||St)&&this.unexpected(this.lastTokStart),Oe&&this.unexpected(Oe),this.checkExpressionErrors(Vt,!0),this.yieldPos=ie||this.yieldPos,this.awaitPos=$e||this.awaitPos,nt.length>1?(L=this.startNodeAt(W,J),L.expressions=nt,this.finishNodeAt(L,"SequenceExpression",Ae,qe)):L=nt[0]}else L=this.parseParenExpression();if(this.options.preserveParens){var Ue=this.startNodeAt(_,C);return Ue.expression=L,this.finishNode(Ue,"ParenthesizedExpression")}else return L},c.parseParenItem=function(i){return i},c.parseParenArrowList=function(i,a,_,C){return this.parseArrowExpression(this.startNodeAt(i,a),_,!1,C)};var A=[];c.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var i=this.startNode();if(this.next(),this.options.ecmaVersion>=6&&this.type===P.dot){var a=this.startNodeAt(i.start,i.loc&&i.loc.start);a.name="new",i.meta=this.finishNode(a,"Identifier"),this.next();var _=this.containsEsc;return i.property=this.parseIdent(!0),i.property.name!=="target"&&this.raiseRecoverable(i.property.start,"The only valid meta property for new is 'new.target'"),_&&this.raiseRecoverable(i.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(i.start,"'new.target' can only be used in functions and class static block"),this.finishNode(i,"MetaProperty")}var C=this.start,L=this.startLoc;return i.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),C,L,!0,!1),this.eat(P.parenL)?i.arguments=this.parseExprList(P.parenR,this.options.ecmaVersion>=8,!1):i.arguments=A,this.finishNode(i,"NewExpression")},c.parseTemplateElement=function(i){var a=i.isTagged,_=this.startNode();return this.type===P.invalidTemplate?(a||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),_.value={raw:this.value.replace(/\r\n?/g,`
`),cooked:null}):_.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),_.tail=this.type===P.backQuote,this.finishNode(_,"TemplateElement")},c.parseTemplate=function(i){i===void 0&&(i={});var a=i.isTagged;a===void 0&&(a=!1);var _=this.startNode();this.next(),_.expressions=[];var C=this.parseTemplateElement({isTagged:a});for(_.quasis=[C];!C.tail;)this.type===P.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(P.dollarBraceL),_.expressions.push(this.parseExpression()),this.expect(P.braceR),_.quasis.push(C=this.parseTemplateElement({isTagged:a}));return this.next(),this.finishNode(_,"TemplateLiteral")},c.isAsyncProp=function(i){return!i.computed&&i.key.type==="Identifier"&&i.key.name==="async"&&(this.type===P.name||this.type===P.num||this.type===P.string||this.type===P.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===P.star)&&!Ft.test(this.input.slice(this.lastTokEnd,this.start))},c.parseObj=function(i,a){var _=this.startNode(),C=!0,L={};for(_.properties=[],this.next();!this.eat(P.braceR);){if(C)C=!1;else if(this.expect(P.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(P.braceR))break;var H=this.parseProperty(i,a);i||this.checkPropClash(H,L,a),_.properties.push(H)}return this.finishNode(_,i?"ObjectPattern":"ObjectExpression")},c.parseProperty=function(i,a){var _=this.startNode(),C,L,H,W;if(this.options.ecmaVersion>=9&&this.eat(P.ellipsis))return i?(_.argument=this.parseIdent(!1),this.type===P.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(_,"RestElement")):(_.argument=this.parseMaybeAssign(!1,a),this.type===P.comma&&a&&a.trailingComma<0&&(a.trailingComma=this.start),this.finishNode(_,"SpreadElement"));this.options.ecmaVersion>=6&&(_.method=!1,_.shorthand=!1,(i||a)&&(H=this.start,W=this.startLoc),i||(C=this.eat(P.star)));var J=this.containsEsc;return this.parsePropertyName(_),!i&&!J&&this.options.ecmaVersion>=8&&!C&&this.isAsyncProp(_)?(L=!0,C=this.options.ecmaVersion>=9&&this.eat(P.star),this.parsePropertyName(_)):L=!1,this.parsePropertyValue(_,i,C,L,H,W,a,J),this.finishNode(_,"Property")},c.parseGetterSetter=function(i){var a=i.key.name;this.parsePropertyName(i),i.value=this.parseMethod(!1),i.kind=a;var _=i.kind==="get"?0:1;if(i.value.params.length!==_){var C=i.value.start;i.kind==="get"?this.raiseRecoverable(C,"getter should have no params"):this.raiseRecoverable(C,"setter should have exactly one param")}else i.kind==="set"&&i.value.params[0].type==="RestElement"&&this.raiseRecoverable(i.value.params[0].start,"Setter cannot use rest params")},c.parsePropertyValue=function(i,a,_,C,L,H,W,J){(_||C)&&this.type===P.colon&&this.unexpected(),this.eat(P.colon)?(i.value=a?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,W),i.kind="init"):this.options.ecmaVersion>=6&&this.type===P.parenL?(a&&this.unexpected(),i.method=!0,i.value=this.parseMethod(_,C),i.kind="init"):!a&&!J&&this.options.ecmaVersion>=5&&!i.computed&&i.key.type==="Identifier"&&(i.key.name==="get"||i.key.name==="set")&&this.type!==P.comma&&this.type!==P.braceR&&this.type!==P.eq?((_||C)&&this.unexpected(),this.parseGetterSetter(i)):this.options.ecmaVersion>=6&&!i.computed&&i.key.type==="Identifier"?((_||C)&&this.unexpected(),this.checkUnreserved(i.key),i.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=L),a?i.value=this.parseMaybeDefault(L,H,this.copyNode(i.key)):this.type===P.eq&&W?(W.shorthandAssign<0&&(W.shorthandAssign=this.start),i.value=this.parseMaybeDefault(L,H,this.copyNode(i.key))):i.value=this.copyNode(i.key),i.kind="init",i.shorthand=!0):this.unexpected()},c.parsePropertyName=function(i){if(this.options.ecmaVersion>=6){if(this.eat(P.bracketL))return i.computed=!0,i.key=this.parseMaybeAssign(),this.expect(P.bracketR),i.key;i.computed=!1}return i.key=this.type===P.num||this.type===P.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")},c.initFunction=function(i){i.id=null,this.options.ecmaVersion>=6&&(i.generator=i.expression=!1),this.options.ecmaVersion>=8&&(i.async=!1)},c.parseMethod=function(i,a,_){var C=this.startNode(),L=this.yieldPos,H=this.awaitPos,W=this.awaitIdentPos;return this.initFunction(C),this.options.ecmaVersion>=6&&(C.generator=i),this.options.ecmaVersion>=8&&(C.async=!!a),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(hi(a,C.generator)|Ke|(_?Ti:0)),this.expect(P.parenL),C.params=this.parseBindingList(P.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(C,!1,!0,!1),this.yieldPos=L,this.awaitPos=H,this.awaitIdentPos=W,this.finishNode(C,"FunctionExpression")},c.parseArrowExpression=function(i,a,_,C){var L=this.yieldPos,H=this.awaitPos,W=this.awaitIdentPos;return this.enterScope(hi(_,!1)|Fe),this.initFunction(i),this.options.ecmaVersion>=8&&(i.async=!!_),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,i.params=this.toAssignableList(a,!0),this.parseFunctionBody(i,!0,!1,C),this.yieldPos=L,this.awaitPos=H,this.awaitIdentPos=W,this.finishNode(i,"ArrowFunctionExpression")},c.parseFunctionBody=function(i,a,_,C){var L=a&&this.type!==P.braceL,H=this.strict,W=!1;if(L)i.body=this.parseMaybeAssign(C),i.expression=!0,this.checkParams(i,!1);else{var J=this.options.ecmaVersion>=7&&!this.isSimpleParamList(i.params);(!H||J)&&(W=this.strictDirective(this.end),W&&J&&this.raiseRecoverable(i.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var nt=this.labels;this.labels=[],W&&(this.strict=!0),this.checkParams(i,!H&&!W&&!a&&!_&&this.isSimpleParamList(i.params)),this.strict&&i.id&&this.checkLValSimple(i.id,t),i.body=this.parseBlock(!1,void 0,W&&!H),i.expression=!1,this.adaptDirectivePrologue(i.body.body),this.labels=nt}this.exitScope()},c.isSimpleParamList=function(i){for(var a=0,_=i;a<_.length;a+=1){var C=_[a];if(C.type!=="Identifier")return!1}return!0},c.checkParams=function(i,a){for(var _=Object.create(null),C=0,L=i.params;C<L.length;C+=1){var H=L[C];this.checkLValInnerPattern(H,Qe,a?null:_)}},c.parseExprList=function(i,a,_,C){for(var L=[],H=!0;!this.eat(i);){if(H)H=!1;else if(this.expect(P.comma),a&&this.afterTrailingComma(i))break;var W=void 0;_&&this.type===P.comma?W=null:this.type===P.ellipsis?(W=this.parseSpread(C),C&&this.type===P.comma&&C.trailingComma<0&&(C.trailingComma=this.start)):W=this.parseMaybeAssign(!1,C),L.push(W)}return L},c.checkUnreserved=function(i){var a=i.start,_=i.end,C=i.name;if(this.inGenerator&&C==="yield"&&this.raiseRecoverable(a,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&C==="await"&&this.raiseRecoverable(a,"Cannot use 'await' as identifier inside an async function"),!(this.currentThisScope().flags&oi)&&C==="arguments"&&this.raiseRecoverable(a,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(C==="arguments"||C==="await")&&this.raise(a,"Cannot use "+C+" in class static initialization block"),this.keywords.test(C)&&this.raise(a,"Unexpected keyword '"+C+"'"),!(this.options.ecmaVersion<6&&this.input.slice(a,_).indexOf("\\")!==-1)){var L=this.strict?this.reservedWordsStrict:this.reservedWords;L.test(C)&&(!this.inAsync&&C==="await"&&this.raiseRecoverable(a,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(a,"The keyword '"+C+"' is reserved"))}},c.parseIdent=function(i){var a=this.parseIdentNode();return this.next(!!i),this.finishNode(a,"Identifier"),i||(this.checkUnreserved(a),a.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=a.start)),a},c.parseIdentNode=function(){var i=this.startNode();return this.type===P.name?i.name=this.value:this.type.keyword?(i.name=this.type.keyword,(i.name==="class"||i.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop(),this.type=P.name):this.unexpected(),i},c.parsePrivateIdent=function(){var i=this.startNode();return this.type===P.privateId?i.name=this.value:this.unexpected(),this.next(),this.finishNode(i,"PrivateIdentifier"),this.options.checkPrivateFields&&(this.privateNameStack.length===0?this.raise(i.start,"Private field '#"+i.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(i)),i},c.parseYield=function(i){this.yieldPos||(this.yieldPos=this.start);var a=this.startNode();return this.next(),this.type===P.semi||this.canInsertSemicolon()||this.type!==P.star&&!this.type.startsExpr?(a.delegate=!1,a.argument=null):(a.delegate=this.eat(P.star),a.argument=this.parseMaybeAssign(i)),this.finishNode(a,"YieldExpression")},c.parseAwait=function(i){this.awaitPos||(this.awaitPos=this.start);var a=this.startNode();return this.next(),a.argument=this.parseMaybeUnary(null,!0,!1,i),this.finishNode(a,"AwaitExpression")};var b=e.prototype;b.raise=function(i,a){var _=di(this.input,i);a+=" ("+_.line+":"+_.column+")",this.sourceFile&&(a+=" in "+this.sourceFile);var C=new SyntaxError(a);throw C.pos=i,C.loc=_,C.raisedAt=this.pos,C},b.raiseRecoverable=b.raise,b.curPosition=function(){if(this.options.locations)return new Be(this.curLine,this.pos-this.lineStart)};var E=e.prototype,N=function(a){this.flags=a,this.var=[],this.lexical=[],this.functions=[]};E.enterScope=function(i){this.scopeStack.push(new N(i))},E.exitScope=function(){this.scopeStack.pop()},E.treatFunctionsAsVarInScope=function(i){return i.flags&Rt||!this.inModule&&i.flags&Mt},E.declareName=function(i,a,_){var C=!1;if(a===Lt){var L=this.currentScope();C=L.lexical.indexOf(i)>-1||L.functions.indexOf(i)>-1||L.var.indexOf(i)>-1,L.lexical.push(i),this.inModule&&L.flags&Mt&&delete this.undefinedExports[i]}else if(a===bt){var H=this.currentScope();H.lexical.push(i)}else if(a===vi){var W=this.currentScope();this.treatFunctionsAsVar?C=W.lexical.indexOf(i)>-1:C=W.lexical.indexOf(i)>-1||W.var.indexOf(i)>-1,W.functions.push(i)}else for(var J=this.scopeStack.length-1;J>=0;--J){var nt=this.scopeStack[J];if(nt.lexical.indexOf(i)>-1&&!(nt.flags&Ei&&nt.lexical[0]===i)||!this.treatFunctionsAsVarInScope(nt)&&nt.functions.indexOf(i)>-1){C=!0;break}if(nt.var.push(i),this.inModule&&nt.flags&Mt&&delete this.undefinedExports[i],nt.flags&oi)break}C&&this.raiseRecoverable(_,"Identifier '"+i+"' has already been declared")},E.checkLocalExport=function(i){this.scopeStack[0].lexical.indexOf(i.name)===-1&&this.scopeStack[0].var.indexOf(i.name)===-1&&(this.undefinedExports[i.name]=i)},E.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]},E.currentVarScope=function(){for(var i=this.scopeStack.length-1;;i--){var a=this.scopeStack[i];if(a.flags&(oi|Xe|Te))return a}},E.currentThisScope=function(){for(var i=this.scopeStack.length-1;;i--){var a=this.scopeStack[i];if(a.flags&(oi|Xe|Te)&&!(a.flags&Fe))return a}};var O=function(a,_,C){this.type="",this.start=_,this.end=0,a.options.locations&&(this.loc=new Pe(a,C)),a.options.directSourceFile&&(this.sourceFile=a.options.directSourceFile),a.options.ranges&&(this.range=[_,0])},z=e.prototype;z.startNode=function(){return new O(this,this.start,this.startLoc)},z.startNodeAt=function(i,a){return new O(this,i,a)};function T(i,a,_,C){return i.type=a,i.end=_,this.options.locations&&(i.loc.end=C),this.options.ranges&&(i.range[1]=_),i}z.finishNode=function(i,a){return T.call(this,i,a,this.lastTokEnd,this.lastTokEndLoc)},z.finishNodeAt=function(i,a,_,C){return T.call(this,i,a,_,C)},z.copyNode=function(i){var a=new O(this,i.start,this.startLoc);for(var _ in i)a[_]=i[_];return a};var V="Gara Garay Gukh Gurung_Khema Hrkt Katakana_Or_Hiragana Kawi Kirat_Rai Krai Nag_Mundari Nagm Ol_Onal Onao Sunu Sunuwar Todhri Todr Tulu_Tigalari Tutg Unknown Zzzz",B="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",q=B+" Extended_Pictographic",U=q,G=U+" EBase EComp EMod EPres ExtPict",Q=G,$=Q,it={9:B,10:q,11:U,12:G,13:Q,14:$},st="Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji",Z={9:"",10:"",11:"",12:"",13:"",14:st},K="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",rt="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",ot=rt+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",at=ot+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",ft=at+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",lt=ft+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",_t=lt+" "+V,xt={9:rt,10:ot,11:at,12:ft,13:lt,14:_t},pt={};function Xt(i){var a=pt[i]={binary:Ct(it[i]+" "+K),binaryOfStrings:Ct(Z[i]),nonBinary:{General_Category:Ct(K),Script:Ct(xt[i])}};a.nonBinary.Script_Extensions=a.nonBinary.Script,a.nonBinary.gc=a.nonBinary.General_Category,a.nonBinary.sc=a.nonBinary.Script,a.nonBinary.scx=a.nonBinary.Script_Extensions}for(var Gt=0,te=[9,10,11,12,13,14];Gt<te.length;Gt+=1){var Wt=te[Gt];Xt(Wt)}var tt=e.prototype,Bt=function(a,_){this.parent=a,this.base=_||this};Bt.prototype.separatedFrom=function(a){for(var _=this;_;_=_.parent)for(var C=a;C;C=C.parent)if(_.base===C.base&&_!==C)return!0;return!1},Bt.prototype.sibling=function(){return new Bt(this.parent,this.base)};var qt=function(a){this.parser=a,this.validFlags="gim"+(a.options.ecmaVersion>=6?"uy":"")+(a.options.ecmaVersion>=9?"s":"")+(a.options.ecmaVersion>=13?"d":"")+(a.options.ecmaVersion>=15?"v":""),this.unicodeProperties=pt[a.options.ecmaVersion>=14?14:a.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=Object.create(null),this.backReferenceNames=[],this.branchID=null};qt.prototype.reset=function(a,_,C){var L=C.indexOf("v")!==-1,H=C.indexOf("u")!==-1;this.start=a|0,this.source=_+"",this.flags=C,L&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=H&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=H&&this.parser.options.ecmaVersion>=9)},qt.prototype.raise=function(a){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+a)},qt.prototype.at=function(a,_){_===void 0&&(_=!1);var C=this.source,L=C.length;if(a>=L)return-1;var H=C.charCodeAt(a);if(!(_||this.switchU)||H<=55295||H>=57344||a+1>=L)return H;var W=C.charCodeAt(a+1);return W>=56320&&W<=57343?(H<<10)+W-56613888:H},qt.prototype.nextIndex=function(a,_){_===void 0&&(_=!1);var C=this.source,L=C.length;if(a>=L)return L;var H=C.charCodeAt(a),W;return!(_||this.switchU)||H<=55295||H>=57344||a+1>=L||(W=C.charCodeAt(a+1))<56320||W>57343?a+1:a+2},qt.prototype.current=function(a){return a===void 0&&(a=!1),this.at(this.pos,a)},qt.prototype.lookahead=function(a){return a===void 0&&(a=!1),this.at(this.nextIndex(this.pos,a),a)},qt.prototype.advance=function(a){a===void 0&&(a=!1),this.pos=this.nextIndex(this.pos,a)},qt.prototype.eat=function(a,_){return _===void 0&&(_=!1),this.current(_)===a?(this.advance(_),!0):!1},qt.prototype.eatChars=function(a,_){_===void 0&&(_=!1);for(var C=this.pos,L=0,H=a;L<H.length;L+=1){var W=H[L],J=this.at(C,_);if(J===-1||J!==W)return!1;C=this.nextIndex(C,_)}return this.pos=C,!0},tt.validateRegExpFlags=function(i){for(var a=i.validFlags,_=i.flags,C=!1,L=!1,H=0;H<_.length;H++){var W=_.charAt(H);a.indexOf(W)===-1&&this.raise(i.start,"Invalid regular expression flag"),_.indexOf(W,H+1)>-1&&this.raise(i.start,"Duplicate regular expression flag"),W==="u"&&(C=!0),W==="v"&&(L=!0)}this.options.ecmaVersion>=15&&C&&L&&this.raise(i.start,"Invalid regular expression flag")};function Qt(i){for(var a in i)return!0;return!1}tt.validateRegExpPattern=function(i){this.regexp_pattern(i),!i.switchN&&this.options.ecmaVersion>=9&&Qt(i.groupNames)&&(i.switchN=!0,this.regexp_pattern(i))},tt.regexp_pattern=function(i){i.pos=0,i.lastIntValue=0,i.lastStringValue="",i.lastAssertionIsQuantifiable=!1,i.numCapturingParens=0,i.maxBackReference=0,i.groupNames=Object.create(null),i.backReferenceNames.length=0,i.branchID=null,this.regexp_disjunction(i),i.pos!==i.source.length&&(i.eat(41)&&i.raise("Unmatched ')'"),(i.eat(93)||i.eat(125))&&i.raise("Lone quantifier brackets")),i.maxBackReference>i.numCapturingParens&&i.raise("Invalid escape");for(var a=0,_=i.backReferenceNames;a<_.length;a+=1){var C=_[a];i.groupNames[C]||i.raise("Invalid named capture referenced")}},tt.regexp_disjunction=function(i){var a=this.options.ecmaVersion>=16;for(a&&(i.branchID=new Bt(i.branchID,null)),this.regexp_alternative(i);i.eat(124);)a&&(i.branchID=i.branchID.sibling()),this.regexp_alternative(i);a&&(i.branchID=i.branchID.parent),this.regexp_eatQuantifier(i,!0)&&i.raise("Nothing to repeat"),i.eat(123)&&i.raise("Lone quantifier brackets")},tt.regexp_alternative=function(i){for(;i.pos<i.source.length&&this.regexp_eatTerm(i););},tt.regexp_eatTerm=function(i){return this.regexp_eatAssertion(i)?(i.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(i)&&i.switchU&&i.raise("Invalid quantifier"),!0):(i.switchU?this.regexp_eatAtom(i):this.regexp_eatExtendedAtom(i))?(this.regexp_eatQuantifier(i),!0):!1},tt.regexp_eatAssertion=function(i){var a=i.pos;if(i.lastAssertionIsQuantifiable=!1,i.eat(94)||i.eat(36))return!0;if(i.eat(92)){if(i.eat(66)||i.eat(98))return!0;i.pos=a}if(i.eat(40)&&i.eat(63)){var _=!1;if(this.options.ecmaVersion>=9&&(_=i.eat(60)),i.eat(61)||i.eat(33))return this.regexp_disjunction(i),i.eat(41)||i.raise("Unterminated group"),i.lastAssertionIsQuantifiable=!_,!0}return i.pos=a,!1},tt.regexp_eatQuantifier=function(i,a){return a===void 0&&(a=!1),this.regexp_eatQuantifierPrefix(i,a)?(i.eat(63),!0):!1},tt.regexp_eatQuantifierPrefix=function(i,a){return i.eat(42)||i.eat(43)||i.eat(63)||this.regexp_eatBracedQuantifier(i,a)},tt.regexp_eatBracedQuantifier=function(i,a){var _=i.pos;if(i.eat(123)){var C=0,L=-1;if(this.regexp_eatDecimalDigits(i)&&(C=i.lastIntValue,i.eat(44)&&this.regexp_eatDecimalDigits(i)&&(L=i.lastIntValue),i.eat(125)))return L!==-1&&L<C&&!a&&i.raise("numbers out of order in {} quantifier"),!0;i.switchU&&!a&&i.raise("Incomplete quantifier"),i.pos=_}return!1},tt.regexp_eatAtom=function(i){return this.regexp_eatPatternCharacters(i)||i.eat(46)||this.regexp_eatReverseSolidusAtomEscape(i)||this.regexp_eatCharacterClass(i)||this.regexp_eatUncapturingGroup(i)||this.regexp_eatCapturingGroup(i)},tt.regexp_eatReverseSolidusAtomEscape=function(i){var a=i.pos;if(i.eat(92)){if(this.regexp_eatAtomEscape(i))return!0;i.pos=a}return!1},tt.regexp_eatUncapturingGroup=function(i){var a=i.pos;if(i.eat(40)){if(i.eat(63)){if(this.options.ecmaVersion>=16){var _=this.regexp_eatModifiers(i),C=i.eat(45);if(_||C){for(var L=0;L<_.length;L++){var H=_.charAt(L);_.indexOf(H,L+1)>-1&&i.raise("Duplicate regular expression modifiers")}if(C){var W=this.regexp_eatModifiers(i);!_&&!W&&i.current()===58&&i.raise("Invalid regular expression modifiers");for(var J=0;J<W.length;J++){var nt=W.charAt(J);(W.indexOf(nt,J+1)>-1||_.indexOf(nt)>-1)&&i.raise("Duplicate regular expression modifiers")}}}}if(i.eat(58)){if(this.regexp_disjunction(i),i.eat(41))return!0;i.raise("Unterminated group")}}i.pos=a}return!1},tt.regexp_eatCapturingGroup=function(i){if(i.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(i):i.current()===63&&i.raise("Invalid group"),this.regexp_disjunction(i),i.eat(41))return i.numCapturingParens+=1,!0;i.raise("Unterminated group")}return!1},tt.regexp_eatModifiers=function(i){for(var a="",_=0;(_=i.current())!==-1&&pe(_);)a+=$t(_),i.advance();return a};function pe(i){return i===105||i===109||i===115}tt.regexp_eatExtendedAtom=function(i){return i.eat(46)||this.regexp_eatReverseSolidusAtomEscape(i)||this.regexp_eatCharacterClass(i)||this.regexp_eatUncapturingGroup(i)||this.regexp_eatCapturingGroup(i)||this.regexp_eatInvalidBracedQuantifier(i)||this.regexp_eatExtendedPatternCharacter(i)},tt.regexp_eatInvalidBracedQuantifier=function(i){return this.regexp_eatBracedQuantifier(i,!0)&&i.raise("Nothing to repeat"),!1},tt.regexp_eatSyntaxCharacter=function(i){var a=i.current();return Se(a)?(i.lastIntValue=a,i.advance(),!0):!1};function Se(i){return i===36||i>=40&&i<=43||i===46||i===63||i>=91&&i<=94||i>=123&&i<=125}tt.regexp_eatPatternCharacters=function(i){for(var a=i.pos,_=0;(_=i.current())!==-1&&!Se(_);)i.advance();return i.pos!==a},tt.regexp_eatExtendedPatternCharacter=function(i){var a=i.current();return a!==-1&&a!==36&&!(a>=40&&a<=43)&&a!==46&&a!==63&&a!==91&&a!==94&&a!==124?(i.advance(),!0):!1},tt.regexp_groupSpecifier=function(i){if(i.eat(63)){this.regexp_eatGroupName(i)||i.raise("Invalid group");var a=this.options.ecmaVersion>=16,_=i.groupNames[i.lastStringValue];if(_)if(a)for(var C=0,L=_;C<L.length;C+=1){var H=L[C];H.separatedFrom(i.branchID)||i.raise("Duplicate capture group name")}else i.raise("Duplicate capture group name");a?(_||(i.groupNames[i.lastStringValue]=[])).push(i.branchID):i.groupNames[i.lastStringValue]=!0}},tt.regexp_eatGroupName=function(i){if(i.lastStringValue="",i.eat(60)){if(this.regexp_eatRegExpIdentifierName(i)&&i.eat(62))return!0;i.raise("Invalid capture group name")}return!1},tt.regexp_eatRegExpIdentifierName=function(i){if(i.lastStringValue="",this.regexp_eatRegExpIdentifierStart(i)){for(i.lastStringValue+=$t(i.lastIntValue);this.regexp_eatRegExpIdentifierPart(i);)i.lastStringValue+=$t(i.lastIntValue);return!0}return!1},tt.regexp_eatRegExpIdentifierStart=function(i){var a=i.pos,_=this.options.ecmaVersion>=11,C=i.current(_);return i.advance(_),C===92&&this.regexp_eatRegExpUnicodeEscapeSequence(i,_)&&(C=i.lastIntValue),ge(C)?(i.lastIntValue=C,!0):(i.pos=a,!1)};function ge(i){return Jt(i,!0)||i===36||i===95}tt.regexp_eatRegExpIdentifierPart=function(i){var a=i.pos,_=this.options.ecmaVersion>=11,C=i.current(_);return i.advance(_),C===92&&this.regexp_eatRegExpUnicodeEscapeSequence(i,_)&&(C=i.lastIntValue),_e(C)?(i.lastIntValue=C,!0):(i.pos=a,!1)};function _e(i){return ht(i,!0)||i===36||i===95||i===8204||i===8205}tt.regexp_eatAtomEscape=function(i){return this.regexp_eatBackReference(i)||this.regexp_eatCharacterClassEscape(i)||this.regexp_eatCharacterEscape(i)||i.switchN&&this.regexp_eatKGroupName(i)?!0:(i.switchU&&(i.current()===99&&i.raise("Invalid unicode escape"),i.raise("Invalid escape")),!1)},tt.regexp_eatBackReference=function(i){var a=i.pos;if(this.regexp_eatDecimalEscape(i)){var _=i.lastIntValue;if(i.switchU)return _>i.maxBackReference&&(i.maxBackReference=_),!0;if(_<=i.numCapturingParens)return!0;i.pos=a}return!1},tt.regexp_eatKGroupName=function(i){if(i.eat(107)){if(this.regexp_eatGroupName(i))return i.backReferenceNames.push(i.lastStringValue),!0;i.raise("Invalid named reference")}return!1},tt.regexp_eatCharacterEscape=function(i){return this.regexp_eatControlEscape(i)||this.regexp_eatCControlLetter(i)||this.regexp_eatZero(i)||this.regexp_eatHexEscapeSequence(i)||this.regexp_eatRegExpUnicodeEscapeSequence(i,!1)||!i.switchU&&this.regexp_eatLegacyOctalEscapeSequence(i)||this.regexp_eatIdentityEscape(i)},tt.regexp_eatCControlLetter=function(i){var a=i.pos;if(i.eat(99)){if(this.regexp_eatControlLetter(i))return!0;i.pos=a}return!1},tt.regexp_eatZero=function(i){return i.current()===48&&!De(i.lookahead())?(i.lastIntValue=0,i.advance(),!0):!1},tt.regexp_eatControlEscape=function(i){var a=i.current();return a===116?(i.lastIntValue=9,i.advance(),!0):a===110?(i.lastIntValue=10,i.advance(),!0):a===118?(i.lastIntValue=11,i.advance(),!0):a===102?(i.lastIntValue=12,i.advance(),!0):a===114?(i.lastIntValue=13,i.advance(),!0):!1},tt.regexp_eatControlLetter=function(i){var a=i.current();return se(a)?(i.lastIntValue=a%32,i.advance(),!0):!1};function se(i){return i>=65&&i<=90||i>=97&&i<=122}tt.regexp_eatRegExpUnicodeEscapeSequence=function(i,a){a===void 0&&(a=!1);var _=i.pos,C=a||i.switchU;if(i.eat(117)){if(this.regexp_eatFixedHexDigits(i,4)){var L=i.lastIntValue;if(C&&L>=55296&&L<=56319){var H=i.pos;if(i.eat(92)&&i.eat(117)&&this.regexp_eatFixedHexDigits(i,4)){var W=i.lastIntValue;if(W>=56320&&W<=57343)return i.lastIntValue=(L-55296)*1024+(W-56320)+65536,!0}i.pos=H,i.lastIntValue=L}return!0}if(C&&i.eat(123)&&this.regexp_eatHexDigits(i)&&i.eat(125)&&le(i.lastIntValue))return!0;C&&i.raise("Invalid unicode escape"),i.pos=_}return!1};function le(i){return i>=0&&i<=1114111}tt.regexp_eatIdentityEscape=function(i){if(i.switchU)return this.regexp_eatSyntaxCharacter(i)?!0:i.eat(47)?(i.lastIntValue=47,!0):!1;var a=i.current();return a!==99&&(!i.switchN||a!==107)?(i.lastIntValue=a,i.advance(),!0):!1},tt.regexp_eatDecimalEscape=function(i){i.lastIntValue=0;var a=i.current();if(a>=49&&a<=57){do i.lastIntValue=10*i.lastIntValue+(a-48),i.advance();while((a=i.current())>=48&&a<=57);return!0}return!1};var Ce=0,Yt=1,ae=2;tt.regexp_eatCharacterClassEscape=function(i){var a=i.current();if(Li(a))return i.lastIntValue=-1,i.advance(),Yt;var _=!1;if(i.switchU&&this.options.ecmaVersion>=9&&((_=a===80)||a===112)){i.lastIntValue=-1,i.advance();var C;if(i.eat(123)&&(C=this.regexp_eatUnicodePropertyValueExpression(i))&&i.eat(125))return _&&C===ae&&i.raise("Invalid property name"),C;i.raise("Invalid property name")}return Ce};function Li(i){return i===100||i===68||i===115||i===83||i===119||i===87}tt.regexp_eatUnicodePropertyValueExpression=function(i){var a=i.pos;if(this.regexp_eatUnicodePropertyName(i)&&i.eat(61)){var _=i.lastStringValue;if(this.regexp_eatUnicodePropertyValue(i)){var C=i.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(i,_,C),Yt}}if(i.pos=a,this.regexp_eatLoneUnicodePropertyNameOrValue(i)){var L=i.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(i,L)}return Ce},tt.regexp_validateUnicodePropertyNameAndValue=function(i,a,_){et(i.unicodeProperties.nonBinary,a)||i.raise("Invalid property name"),i.unicodeProperties.nonBinary[a].test(_)||i.raise("Invalid property value")},tt.regexp_validateUnicodePropertyNameOrValue=function(i,a){if(i.unicodeProperties.binary.test(a))return Yt;if(i.switchV&&i.unicodeProperties.binaryOfStrings.test(a))return ae;i.raise("Invalid property name")},tt.regexp_eatUnicodePropertyName=function(i){var a=0;for(i.lastStringValue="";mi(a=i.current());)i.lastStringValue+=$t(a),i.advance();return i.lastStringValue!==""};function mi(i){return se(i)||i===95}tt.regexp_eatUnicodePropertyValue=function(i){var a=0;for(i.lastStringValue="";Ni(a=i.current());)i.lastStringValue+=$t(a),i.advance();return i.lastStringValue!==""};function Ni(i){return mi(i)||De(i)}tt.regexp_eatLoneUnicodePropertyNameOrValue=function(i){return this.regexp_eatUnicodePropertyValue(i)},tt.regexp_eatCharacterClass=function(i){if(i.eat(91)){var a=i.eat(94),_=this.regexp_classContents(i);return i.eat(93)||i.raise("Unterminated character class"),a&&_===ae&&i.raise("Negated character class may contain strings"),!0}return!1},tt.regexp_classContents=function(i){return i.current()===93?Yt:i.switchV?this.regexp_classSetExpression(i):(this.regexp_nonEmptyClassRanges(i),Yt)},tt.regexp_nonEmptyClassRanges=function(i){for(;this.regexp_eatClassAtom(i);){var a=i.lastIntValue;if(i.eat(45)&&this.regexp_eatClassAtom(i)){var _=i.lastIntValue;i.switchU&&(a===-1||_===-1)&&i.raise("Invalid character class"),a!==-1&&_!==-1&&a>_&&i.raise("Range out of order in character class")}}},tt.regexp_eatClassAtom=function(i){var a=i.pos;if(i.eat(92)){if(this.regexp_eatClassEscape(i))return!0;if(i.switchU){var _=i.current();(_===99||Le(_))&&i.raise("Invalid class escape"),i.raise("Invalid escape")}i.pos=a}var C=i.current();return C!==93?(i.lastIntValue=C,i.advance(),!0):!1},tt.regexp_eatClassEscape=function(i){var a=i.pos;if(i.eat(98))return i.lastIntValue=8,!0;if(i.switchU&&i.eat(45))return i.lastIntValue=45,!0;if(!i.switchU&&i.eat(99)){if(this.regexp_eatClassControlLetter(i))return!0;i.pos=a}return this.regexp_eatCharacterClassEscape(i)||this.regexp_eatCharacterEscape(i)},tt.regexp_classSetExpression=function(i){var a=Yt,_;if(!this.regexp_eatClassSetRange(i))if(_=this.regexp_eatClassSetOperand(i)){_===ae&&(a=ae);for(var C=i.pos;i.eatChars([38,38]);){if(i.current()!==38&&(_=this.regexp_eatClassSetOperand(i))){_!==ae&&(a=Yt);continue}i.raise("Invalid character in character class")}if(C!==i.pos)return a;for(;i.eatChars([45,45]);)this.regexp_eatClassSetOperand(i)||i.raise("Invalid character in character class");if(C!==i.pos)return a}else i.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(i)){if(_=this.regexp_eatClassSetOperand(i),!_)return a;_===ae&&(a=ae)}},tt.regexp_eatClassSetRange=function(i){var a=i.pos;if(this.regexp_eatClassSetCharacter(i)){var _=i.lastIntValue;if(i.eat(45)&&this.regexp_eatClassSetCharacter(i)){var C=i.lastIntValue;return _!==-1&&C!==-1&&_>C&&i.raise("Range out of order in character class"),!0}i.pos=a}return!1},tt.regexp_eatClassSetOperand=function(i){return this.regexp_eatClassSetCharacter(i)?Yt:this.regexp_eatClassStringDisjunction(i)||this.regexp_eatNestedClass(i)},tt.regexp_eatNestedClass=function(i){var a=i.pos;if(i.eat(91)){var _=i.eat(94),C=this.regexp_classContents(i);if(i.eat(93))return _&&C===ae&&i.raise("Negated character class may contain strings"),C;i.pos=a}if(i.eat(92)){var L=this.regexp_eatCharacterClassEscape(i);if(L)return L;i.pos=a}return null},tt.regexp_eatClassStringDisjunction=function(i){var a=i.pos;if(i.eatChars([92,113])){if(i.eat(123)){var _=this.regexp_classStringDisjunctionContents(i);if(i.eat(125))return _}else i.raise("Invalid escape");i.pos=a}return null},tt.regexp_classStringDisjunctionContents=function(i){for(var a=this.regexp_classString(i);i.eat(124);)this.regexp_classString(i)===ae&&(a=ae);return a},tt.regexp_classString=function(i){for(var a=0;this.regexp_eatClassSetCharacter(i);)a++;return a===1?Yt:ae},tt.regexp_eatClassSetCharacter=function(i){var a=i.pos;if(i.eat(92))return this.regexp_eatCharacterEscape(i)||this.regexp_eatClassSetReservedPunctuator(i)?!0:i.eat(98)?(i.lastIntValue=8,!0):(i.pos=a,!1);var _=i.current();return _<0||_===i.lookahead()&&Oi(_)||Mi(_)?!1:(i.advance(),i.lastIntValue=_,!0)};function Oi(i){return i===33||i>=35&&i<=38||i>=42&&i<=44||i===46||i>=58&&i<=64||i===94||i===96||i===126}function Mi(i){return i===40||i===41||i===45||i===47||i>=91&&i<=93||i>=123&&i<=125}tt.regexp_eatClassSetReservedPunctuator=function(i){var a=i.current();return ui(a)?(i.lastIntValue=a,i.advance(),!0):!1};function ui(i){return i===33||i===35||i===37||i===38||i===44||i===45||i>=58&&i<=62||i===64||i===96||i===126}tt.regexp_eatClassControlLetter=function(i){var a=i.current();return De(a)||a===95?(i.lastIntValue=a%32,i.advance(),!0):!1},tt.regexp_eatHexEscapeSequence=function(i){var a=i.pos;if(i.eat(120)){if(this.regexp_eatFixedHexDigits(i,2))return!0;i.switchU&&i.raise("Invalid escape"),i.pos=a}return!1},tt.regexp_eatDecimalDigits=function(i){var a=i.pos,_=0;for(i.lastIntValue=0;De(_=i.current());)i.lastIntValue=10*i.lastIntValue+(_-48),i.advance();return i.pos!==a};function De(i){return i>=48&&i<=57}tt.regexp_eatHexDigits=function(i){var a=i.pos,_=0;for(i.lastIntValue=0;Ye(_=i.current());)i.lastIntValue=16*i.lastIntValue+Je(_),i.advance();return i.pos!==a};function Ye(i){return i>=48&&i<=57||i>=65&&i<=70||i>=97&&i<=102}function Je(i){return i>=65&&i<=70?10+(i-65):i>=97&&i<=102?10+(i-97):i-48}tt.regexp_eatLegacyOctalEscapeSequence=function(i){if(this.regexp_eatOctalDigit(i)){var a=i.lastIntValue;if(this.regexp_eatOctalDigit(i)){var _=i.lastIntValue;a<=3&&this.regexp_eatOctalDigit(i)?i.lastIntValue=a*64+_*8+i.lastIntValue:i.lastIntValue=a*8+_}else i.lastIntValue=a;return!0}return!1},tt.regexp_eatOctalDigit=function(i){var a=i.current();return Le(a)?(i.lastIntValue=a-48,i.advance(),!0):(i.lastIntValue=0,!1)};function Le(i){return i>=48&&i<=55}tt.regexp_eatFixedHexDigits=function(i,a){var _=i.pos;i.lastIntValue=0;for(var C=0;C<a;++C){var L=i.current();if(!Ye(L))return i.pos=_,!1;i.lastIntValue=16*i.lastIntValue+Je(L),i.advance()}return!0};var we=function(a){this.type=a.type,this.value=a.value,this.start=a.start,this.end=a.end,a.options.locations&&(this.loc=new Pe(a,a.startLoc,a.endLoc)),a.options.ranges&&(this.range=[a.start,a.end])},mt=e.prototype;mt.next=function(i){!i&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new we(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},mt.getToken=function(){return this.next(),new we(this)},typeof Symbol<"u"&&(mt[Symbol.iterator]=function(){var i=this;return{next:function(){var a=i.getToken();return{done:a.type===P.eof,value:a}}}}),mt.nextToken=function(){var i=this.curContext();if((!i||!i.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(P.eof);if(i.override)return i.override(this);this.readToken(this.fullCharCodeAtPos())},mt.readToken=function(i){return Jt(i,this.options.ecmaVersion>=6)||i===92?this.readWord():this.getTokenFromCode(i)},mt.fullCharCodeAtPos=function(){var i=this.input.charCodeAt(this.pos);if(i<=55295||i>=56320)return i;var a=this.input.charCodeAt(this.pos+1);return a<=56319||a>=57344?i:(i<<10)+a-56613888},mt.skipBlockComment=function(){var i=this.options.onComment&&this.curPosition(),a=this.pos,_=this.input.indexOf("*/",this.pos+=2);if(_===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=_+2,this.options.locations)for(var C=void 0,L=a;(C=ze(this.input,L,this.pos))>-1;)++this.curLine,L=this.lineStart=C;this.options.onComment&&this.options.onComment(!0,this.input.slice(a+2,_),a,this.pos,i,this.curPosition())},mt.skipLineComment=function(i){for(var a=this.pos,_=this.options.onComment&&this.curPosition(),C=this.input.charCodeAt(this.pos+=i);this.pos<this.input.length&&!Kt(C);)C=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(a+i,this.pos),a,this.pos,_,this.curPosition())},mt.skipSpace=function(){t:for(;this.pos<this.input.length;){var i=this.input.charCodeAt(this.pos);switch(i){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break t}break;default:if(i>8&&i<14||i>=5760&&je.test(String.fromCharCode(i)))++this.pos;else break t}}},mt.finishToken=function(i,a){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var _=this.type;this.type=i,this.value=a,this.updateContext(_)},mt.readToken_dot=function(){var i=this.input.charCodeAt(this.pos+1);if(i>=48&&i<=57)return this.readNumber(!0);var a=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&i===46&&a===46?(this.pos+=3,this.finishToken(P.ellipsis)):(++this.pos,this.finishToken(P.dot))},mt.readToken_slash=function(){var i=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):i===61?this.finishOp(P.assign,2):this.finishOp(P.slash,1)},mt.readToken_mult_modulo_exp=function(i){var a=this.input.charCodeAt(this.pos+1),_=1,C=i===42?P.star:P.modulo;return this.options.ecmaVersion>=7&&i===42&&a===42&&(++_,C=P.starstar,a=this.input.charCodeAt(this.pos+2)),a===61?this.finishOp(P.assign,_+1):this.finishOp(C,_)},mt.readToken_pipe_amp=function(i){var a=this.input.charCodeAt(this.pos+1);if(a===i){if(this.options.ecmaVersion>=12){var _=this.input.charCodeAt(this.pos+2);if(_===61)return this.finishOp(P.assign,3)}return this.finishOp(i===124?P.logicalOR:P.logicalAND,2)}return a===61?this.finishOp(P.assign,2):this.finishOp(i===124?P.bitwiseOR:P.bitwiseAND,1)},mt.readToken_caret=function(){var i=this.input.charCodeAt(this.pos+1);return i===61?this.finishOp(P.assign,2):this.finishOp(P.bitwiseXOR,1)},mt.readToken_plus_min=function(i){var a=this.input.charCodeAt(this.pos+1);return a===i?a===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||Ft.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(P.incDec,2):a===61?this.finishOp(P.assign,2):this.finishOp(P.plusMin,1)},mt.readToken_lt_gt=function(i){var a=this.input.charCodeAt(this.pos+1),_=1;return a===i?(_=i===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+_)===61?this.finishOp(P.assign,_+1):this.finishOp(P.bitShift,_)):a===33&&i===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(a===61&&(_=2),this.finishOp(P.relational,_))},mt.readToken_eq_excl=function(i){var a=this.input.charCodeAt(this.pos+1);return a===61?this.finishOp(P.equality,this.input.charCodeAt(this.pos+2)===61?3:2):i===61&&a===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(P.arrow)):this.finishOp(i===61?P.eq:P.prefix,1)},mt.readToken_question=function(){var i=this.options.ecmaVersion;if(i>=11){var a=this.input.charCodeAt(this.pos+1);if(a===46){var _=this.input.charCodeAt(this.pos+2);if(_<48||_>57)return this.finishOp(P.questionDot,2)}if(a===63){if(i>=12){var C=this.input.charCodeAt(this.pos+2);if(C===61)return this.finishOp(P.assign,3)}return this.finishOp(P.coalesce,2)}}return this.finishOp(P.question,1)},mt.readToken_numberSign=function(){var i=this.options.ecmaVersion,a=35;if(i>=13&&(++this.pos,a=this.fullCharCodeAtPos(),Jt(a,!0)||a===92))return this.finishToken(P.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+$t(a)+"'")},mt.getTokenFromCode=function(i){switch(i){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(P.parenL);case 41:return++this.pos,this.finishToken(P.parenR);case 59:return++this.pos,this.finishToken(P.semi);case 44:return++this.pos,this.finishToken(P.comma);case 91:return++this.pos,this.finishToken(P.bracketL);case 93:return++this.pos,this.finishToken(P.bracketR);case 123:return++this.pos,this.finishToken(P.braceL);case 125:return++this.pos,this.finishToken(P.braceR);case 58:return++this.pos,this.finishToken(P.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(P.backQuote);case 48:var a=this.input.charCodeAt(this.pos+1);if(a===120||a===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(a===111||a===79)return this.readRadixNumber(8);if(a===98||a===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(i);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(i);case 124:case 38:return this.readToken_pipe_amp(i);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(i);case 60:case 62:return this.readToken_lt_gt(i);case 61:case 33:return this.readToken_eq_excl(i);case 63:return this.readToken_question();case 126:return this.finishOp(P.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+$t(i)+"'")},mt.finishOp=function(i,a){var _=this.input.slice(this.pos,this.pos+a);return this.pos+=a,this.finishToken(i,_)},mt.readRegexp=function(){for(var i,a,_=this.pos;;){this.pos>=this.input.length&&this.raise(_,"Unterminated regular expression");var C=this.input.charAt(this.pos);if(Ft.test(C)&&this.raise(_,"Unterminated regular expression"),i)i=!1;else{if(C==="[")a=!0;else if(C==="]"&&a)a=!1;else if(C==="/"&&!a)break;i=C==="\\"}++this.pos}var L=this.input.slice(_,this.pos);++this.pos;var H=this.pos,W=this.readWord1();this.containsEsc&&this.unexpected(H);var J=this.regexpState||(this.regexpState=new qt(this));J.reset(_,L,W),this.validateRegExpFlags(J),this.validateRegExpPattern(J);var nt=null;try{nt=new RegExp(L,W)}catch{}return this.finishToken(P.regexp,{pattern:L,flags:W,value:nt})},mt.readInt=function(i,a,_){for(var C=this.options.ecmaVersion>=12&&a===void 0,L=_&&this.input.charCodeAt(this.pos)===48,H=this.pos,W=0,J=0,nt=0,gt=a??1/0;nt<gt;++nt,++this.pos){var St=this.input.charCodeAt(this.pos),Vt=void 0;if(C&&St===95){L&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),J===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),nt===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),J=St;continue}if(St>=97?Vt=St-97+10:St>=65?Vt=St-65+10:St>=48&&St<=57?Vt=St-48:Vt=1/0,Vt>=i)break;J=St,W=W*i+Vt}return C&&J===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===H||a!=null&&this.pos-H!==a?null:W};function ve(i,a){return a?parseInt(i,8):parseFloat(i.replace(/_/g,""))}function be(i){return typeof BigInt!="function"?null:BigInt(i.replace(/_/g,""))}mt.readRadixNumber=function(i){var a=this.pos;this.pos+=2;var _=this.readInt(i);return _==null&&this.raise(this.start+2,"Expected number in radix "+i),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(_=be(this.input.slice(a,this.pos)),++this.pos):Jt(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(P.num,_)},mt.readNumber=function(i){var a=this.pos;!i&&this.readInt(10,void 0,!0)===null&&this.raise(a,"Invalid number");var _=this.pos-a>=2&&this.input.charCodeAt(a)===48;_&&this.strict&&this.raise(a,"Invalid number");var C=this.input.charCodeAt(this.pos);if(!_&&!i&&this.options.ecmaVersion>=11&&C===110){var L=be(this.input.slice(a,this.pos));return++this.pos,Jt(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(P.num,L)}_&&/[89]/.test(this.input.slice(a,this.pos))&&(_=!1),C===46&&!_&&(++this.pos,this.readInt(10),C=this.input.charCodeAt(this.pos)),(C===69||C===101)&&!_&&(C=this.input.charCodeAt(++this.pos),(C===43||C===45)&&++this.pos,this.readInt(10)===null&&this.raise(a,"Invalid number")),Jt(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var H=ve(this.input.slice(a,this.pos),_);return this.finishToken(P.num,H)},mt.readCodePoint=function(){var i=this.input.charCodeAt(this.pos),a;if(i===123){this.options.ecmaVersion<6&&this.unexpected();var _=++this.pos;a=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,a>1114111&&this.invalidStringToken(_,"Code point out of bounds")}else a=this.readHexChar(4);return a},mt.readString=function(i){for(var a="",_=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var C=this.input.charCodeAt(this.pos);if(C===i)break;C===92?(a+=this.input.slice(_,this.pos),a+=this.readEscapedChar(!1),_=this.pos):C===8232||C===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(Kt(C)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return a+=this.input.slice(_,this.pos++),this.finishToken(P.string,a)};var me={};mt.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(i){if(i===me)this.readInvalidTemplateToken();else throw i}this.inTemplateElement=!1},mt.invalidStringToken=function(i,a){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw me;this.raise(i,a)},mt.readTmplToken=function(){for(var i="",a=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var _=this.input.charCodeAt(this.pos);if(_===96||_===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===P.template||this.type===P.invalidTemplate)?_===36?(this.pos+=2,this.finishToken(P.dollarBraceL)):(++this.pos,this.finishToken(P.backQuote)):(i+=this.input.slice(a,this.pos),this.finishToken(P.template,i));if(_===92)i+=this.input.slice(a,this.pos),i+=this.readEscapedChar(!0),a=this.pos;else if(Kt(_)){switch(i+=this.input.slice(a,this.pos),++this.pos,_){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:i+=`
`;break;default:i+=String.fromCharCode(_);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),a=this.pos}else++this.pos}},mt.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(P.invalidTemplate,this.input.slice(this.start,this.pos));case"\r":this.input[this.pos+1]===`
`&&++this.pos;case`
`:case"\u2028":case"\u2029":++this.curLine,this.lineStart=this.pos+1;break}this.raise(this.start,"Unterminated template")},mt.readEscapedChar=function(i){var a=this.input.charCodeAt(++this.pos);switch(++this.pos,a){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return $t(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),i){var _=this.pos-1;this.invalidStringToken(_,"Invalid escape sequence in template string")}default:if(a>=48&&a<=55){var C=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],L=parseInt(C,8);return L>255&&(C=C.slice(0,-1),L=parseInt(C,8)),this.pos+=C.length-1,a=this.input.charCodeAt(this.pos),(C!=="0"||a===56||a===57)&&(this.strict||i)&&this.invalidStringToken(this.pos-1-C.length,i?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(L)}return Kt(a)?(this.options.locations&&(this.lineStart=this.pos,++this.curLine),""):String.fromCharCode(a)}},mt.readHexChar=function(i){var a=this.pos,_=this.readInt(16,i);return _===null&&this.invalidStringToken(a,"Bad character escape sequence"),_},mt.readWord1=function(){this.containsEsc=!1;for(var i="",a=!0,_=this.pos,C=this.options.ecmaVersion>=6;this.pos<this.input.length;){var L=this.fullCharCodeAtPos();if(ht(L,C))this.pos+=L<=65535?1:2;else if(L===92){this.containsEsc=!0,i+=this.input.slice(_,this.pos);var H=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var W=this.readCodePoint();(a?Jt:ht)(W,C)||this.invalidStringToken(H,"Invalid Unicode escape"),i+=$t(W),_=this.pos}else break;a=!1}return i+this.input.slice(_,this.pos)},mt.readWord=function(){var i=this.readWord1(),a=P.name;return this.keywords.test(i)&&(a=Zt[i]),this.finishToken(a,i)};var Ne="8.15.0";e.acorn={Parser:e,version:Ne,defaultOptions:Ut,Position:Be,SourceLocation:Pe,getLineInfo:di,Node:O,TokenType:kt,tokTypes:P,keywordTypes:Zt,TokContext:S,tokContexts:g,isIdentifierChar:ht,isIdentifierStart:Jt,Token:we,isNewLine:Kt,lineBreak:Ft,lineBreakG:Re,nonASCIIwhitespace:je};function yi(i,a){return e.parse(i,a)}function xi(i,a,_){return e.parseExpressionAt(i,a,_)}function wi(i,a){return e.tokenizer(i,a)}Y.Node=O,Y.Parser=e,Y.Position=Be,Y.SourceLocation=Pe,Y.TokContext=S,Y.Token=we,Y.TokenType=kt,Y.defaultOptions=Ut,Y.getLineInfo=di,Y.isIdentifierChar=ht,Y.isIdentifierStart=Jt,Y.isNewLine=Kt,Y.keywordTypes=Zt,Y.lineBreak=Ft,Y.lineBreakG=Re,Y.nonASCIIwhitespace=je,Y.parse=yi,Y.parseExpressionAt=xi,Y.tokContexts=g,Y.tokTypes=P,Y.tokenizer=wi,Y.version=Ne})}(Ii,Ii.exports)),Ii.exports}/*!
 * Paper.js v0.12.18 - The Swiss Army Knife of Vector Graphics Scripting.
 * http://paperjs.org/
 *
 * Copyright (c) 2011 - 2020, Jürg Lehni & Jonathan Puckey
 * http://juerglehni.com/ & https://puckey.studio/
 *
 * Distributed under the MIT license. See LICENSE file for details.
 *
 * All rights reserved.
 *
 * Date: Wed Jul 17 14:57:24 2024 +0200
 *
 ***
 *
 * Straps.js - Class inheritance library with support for bean-style accessors
 *
 * Copyright (c) 2006 - 2020 Jürg Lehni
 * http://juerglehni.com/
 *
 * Distributed under the MIT license.
 *
 ***
 *
 * Acorn.js
 * https://marijnhaverbeke.nl/acorn/
 *
 * Acorn is a tiny, fast JavaScript parser written in JavaScript,
 * created by Marijn Haverbeke and released under an MIT license.
 *
 */var Xr=Ui.exports,vr;function Qr(){return vr||(vr=1,function(ni){(function(ye,Y){ye=ye||gr;var Ot=ye.window,Tt=ye.document,R=new function(){var t=/^(statics|enumerable|beans|preserve)$/,e=[],r=e.slice,n=Object.create,s=Object.getOwnPropertyDescriptor,o=Object.defineProperty,h=e.forEach||function(d,p){for(var k=0,y=this.length;k<y;k++)d.call(p,this[k],k,this)},u=function(d,p){for(var k in this)this.hasOwnProperty(k)&&d.call(p,this[k],k,this)},l=Object.assign||function(d){for(var p=1,k=arguments.length;p<k;p++){var y=arguments[p];for(var S in y)y.hasOwnProperty(S)&&(d[S]=y[S])}return d},f=function(d,p,k){if(d){var y=s(d,"length");(y&&typeof y.value=="number"?h:u).call(d,p,k=k||d)}return k};function v(d,p,k,y,S){var g={};function w(b,E){E=E||(E=s(p,b))&&(E.get?E:E.value),typeof E=="string"&&E[0]==="#"&&(E=d[E.substring(1)]||E);var N=typeof E=="function",O=E,z=S||N&&!E.base?E&&E.get?b in d:d[b]:null,T;(!S||!z)&&(N&&z&&(E.base=z),N&&y!==!1&&(T=b.match(/^([gs]et|is)(([A-Z])(.*))$/))&&(g[T[3].toLowerCase()+T[4]]=T[2]),(!O||N||!O.get||typeof O.get!="function"||!m.isPlainObject(O))&&(O={value:O,writable:!0}),(s(d,b)||{configurable:!0}).configurable&&(O.configurable=!0,O.enumerable=k??!T),o(d,b,O))}if(p){for(var c in p)p.hasOwnProperty(c)&&!t.test(c)&&w(c);for(var c in g){var x=g[c],I=d["set"+x],A=d["get"+x]||I&&d["is"+x];A&&(y===!0||A.length===0)&&w(c,{get:A,set:I})}}return d}function m(){for(var d=0,p=arguments.length;d<p;d++){var k=arguments[d];k&&l(this,k)}return this}return v(m,{inject:function(d){if(d){var p=d.statics===!0?d:d.statics,k=d.beans,y=d.preserve;p!==d&&v(this.prototype,d,d.enumerable,k,y),v(this,p,null,k,y)}for(var S=1,g=arguments.length;S<g;S++)this.inject(arguments[S]);return this},extend:function(){for(var d=this,p,k,y=0,S,g=arguments.length;y<g&&!(p&&k);y++)S=arguments[y],p=p||S.initialize,k=k||S.prototype;return p=p||function(){d.apply(this,arguments)},k=p.prototype=k||n(this.prototype),o(k,"constructor",{value:p,writable:!0,configurable:!0}),v(p,this),arguments.length&&this.inject.apply(p,arguments),p.base=d,p}}).inject({enumerable:!1,initialize:m,set:m,inject:function(){for(var d=0,p=arguments.length;d<p;d++){var k=arguments[d];k&&v(this,k,k.enumerable,k.beans,k.preserve)}return this},extend:function(){var d=n(this);return d.inject.apply(d,arguments)},each:function(d,p){return f(this,d,p)},clone:function(){return new this.constructor(this)},statics:{set:l,each:f,create:n,define:o,describe:s,clone:function(d){return l(new d.constructor,d)},isPlainObject:function(d){var p=d!=null&&d.constructor;return p&&(p===Object||p===m||p.name==="Object")},pick:function(d,p){return d!==Y?d:p},slice:function(d,p,k){return r.call(d,p,k)}}})};ni.exports=R,R.inject({enumerable:!1,toString:function(){return this._id!=null?(this._class||"Object")+(this._name?" '"+this._name+"'":" @"+this._id):"{ "+R.each(this,function(t,e){if(!/^_/.test(e)){var r=typeof t;this.push(e+": "+(r==="number"?fe.instance.number(t):r==="string"?"'"+t+"'":t))}},[]).join(", ")+" }"},getClassName:function(){return this._class||""},importJSON:function(t){return R.importJSON(t,this)},exportJSON:function(t){return R.exportJSON(this,t)},toJSON:function(){return R.serialize(this)},set:function(t,e){return t&&R.filter(this,t,e,this._prioritize),this}},{beans:!1,statics:{exports:{},extend:function t(){var e=t.base.apply(this,arguments),r=e.prototype._class;return r&&!R.exports[r]&&(R.exports[r]=e),e},equals:function(t,e){if(t===e)return!0;if(t&&t.equals)return t.equals(e);if(e&&e.equals)return e.equals(t);if(t&&e&&typeof t=="object"&&typeof e=="object"){if(Array.isArray(t)&&Array.isArray(e)){var r=t.length;if(r!==e.length)return!1;for(;r--;)if(!R.equals(t[r],e[r]))return!1}else{var n=Object.keys(t),r=n.length;if(r!==Object.keys(e).length)return!1;for(;r--;){var s=n[r];if(!(e.hasOwnProperty(s)&&R.equals(t[s],e[s])))return!1}}return!0}return!1},read:function(t,e,r,n){if(this===R){var s=this.peek(t,e);return t.__index++,s}var o=this.prototype,h=o._readIndex,u=e||h&&t.__index||0,l=t.length,f=t[u];if(n=n||l-u,f instanceof this||r&&r.readNull&&f==null&&n<=1)return h&&(t.__index=u+1),f&&r&&r.clone?f.clone():f;if(f=R.create(o),h&&(f.__read=!0),f=f.initialize.apply(f,u>0||u+n<l?R.slice(t,u,u+n):t)||f,h){t.__index=u+f.__read;var v=f.__filtered;v&&(t.__filtered=v,f.__filtered=Y),f.__read=Y}return f},peek:function(t,e){return t[t.__index=e||t.__index||0]},remain:function(t){return t.length-(t.__index||0)},readList:function(t,e,r,n){for(var s=[],o,h=e||0,u=n?h+n:t.length,l=h;l<u;l++)s.push(Array.isArray(o=t[l])?this.read(o,0,r):this.read(t,l,r,1));return s},readNamed:function(t,e,r,n,s){var o=this.getNamed(t,e),h=o!==Y;if(h){var u=t.__filtered;if(!u){var l=this.getSource(t);u=t.__filtered=R.create(l),u.__unfiltered=l}u[e]=Y}return this.read(h?[o]:t,r,n,s)},readSupported:function(t,e){var r=this.getSource(t),n=this,s=!1;return r&&Object.keys(r).forEach(function(o){if(o in e){var h=n.readNamed(t,o);h!==Y&&(e[o]=h),s=!0}}),s},getSource:function(t){var e=t.__source;if(e===Y){var r=t.length===1&&t[0];e=t.__source=r&&R.isPlainObject(r)?r:null}return e},getNamed:function(t,e){var r=this.getSource(t);if(r)return e?r[e]:t.__filtered||r},hasNamed:function(t,e){return!!this.getNamed(t,e)},filter:function(t,e,r,n){var s;function o(v){if(!(r&&v in r)&&!(s&&v in s)){var m=e[v];m!==Y&&(t[v]=m)}}if(n){for(var h={},u=0,l,f=n.length;u<f;u++)(l=n[u])in e&&(o(l),h[l]=!0);s=h}return Object.keys(e.__unfiltered||e).forEach(o),t},isPlainValue:function(t,e){return R.isPlainObject(t)||Array.isArray(t)||e&&typeof t=="string"},serialize:function(t,e,r,n){e=e||{};var s=!n,o;if(s&&(e.formatter=new fe(e.precision),n={length:0,definitions:{},references:{},add:function(m,d){var p="#"+m._id,k=this.references[p];if(!k){this.length++;var y=d.call(m),S=m._class;S&&y[0]!==S&&y.unshift(S),this.definitions[p]=y,k=this.references[p]=[p]}return k}}),t&&t._serialize){o=t._serialize(e,n);var h=t._class;h&&!t._compactSerialize&&(s||!r)&&o[0]!==h&&o.unshift(h)}else if(Array.isArray(t)){o=[];for(var u=0,l=t.length;u<l;u++)o[u]=R.serialize(t[u],e,r,n)}else if(R.isPlainObject(t)){o={};for(var f=Object.keys(t),u=0,l=f.length;u<l;u++){var v=f[u];o[v]=R.serialize(t[v],e,r,n)}}else typeof t=="number"?o=e.formatter.number(t,e.precision):o=t;return s&&n.length>0?[["dictionary",n.definitions],o]:o},deserialize:function(t,e,r,n,s){var o=t,h=!r,u=h&&t&&t.length&&t[0][0]==="dictionary";if(r=r||{},Array.isArray(t)){var l=t[0],f=l==="dictionary";if(t.length==1&&/^#/.test(l))return r.dictionary[l];l=R.exports[l],o=[];for(var v=l?1:0,m=t.length;v<m;v++)o.push(R.deserialize(t[v],e,r,f,u));if(l){var d=o;e?o=e(l,d,h||s):o=new l(d)}}else if(R.isPlainObject(t)){o={},n&&(r.dictionary=o);for(var p in t)o[p]=R.deserialize(t[p],e,r)}return u?o[1]:o},exportJSON:function(t,e){var r=R.serialize(t,e);return e&&e.asString==!1?r:JSON.stringify(r)},importJSON:function(t,e){return R.deserialize(typeof t=="string"?JSON.parse(t):t,function(r,n,s){var o=s&&e&&e.constructor===r,h=o?e:R.create(r.prototype);if(n.length===1&&h instanceof P&&(o||!(h instanceof Re))){var u=n[0];R.isPlainObject(u)&&(u.insert=!1,o&&(n=n.concat([P.INSERT])))}return(o?h.set:r).apply(h,n),o&&(e=null),h})},push:function(t,e){var r=e.length;if(r<4096)t.push.apply(t,e);else{var n=t.length;t.length+=r;for(var s=0;s<r;s++)t[n+s]=e[s]}return t},splice:function(t,e,r,n){var s=e&&e.length,o=r===Y;r=o?t.length:r,r>t.length&&(r=t.length);for(var h=0;h<s;h++)e[h]._index=r+h;if(o)return R.push(t,e),[];var u=[r,n];e&&R.push(u,e);for(var l=t.splice.apply(t,u),h=0,f=l.length;h<f;h++)l[h]._index=Y;for(var h=r+s,f=t.length;h<f;h++)t[h]._index=h;return l},capitalize:function(t){return t.replace(/\b[a-z]/g,function(e){return e.toUpperCase()})},camelize:function(t){return t.replace(/-(.)/g,function(e,r){return r.toUpperCase()})},hyphenate:function(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}}});var We={on:function(t,e){if(typeof t!="string")R.each(t,function(o,h){this.on(h,o)},this);else{var r=this._eventTypes,n=r&&r[t],s=this._callbacks=this._callbacks||{};s=s[t]=s[t]||[],s.indexOf(e)===-1&&(s.push(e),n&&n.install&&s.length===1&&n.install.call(this,t))}return this},off:function(t,e){if(typeof t!="string"){R.each(t,function(h,u){this.off(u,h)},this);return}var r=this._eventTypes,n=r&&r[t],s=this._callbacks&&this._callbacks[t],o;return s&&(!e||(o=s.indexOf(e))!==-1&&s.length===1?(n&&n.uninstall&&n.uninstall.call(this,t),delete this._callbacks[t]):o!==-1&&s.splice(o,1)),this},once:function(t,e){return this.on(t,function r(){e.apply(this,arguments),this.off(t,r)})},emit:function(t,e){var r=this._callbacks&&this._callbacks[t];if(!r)return!1;var n=R.slice(arguments,1),s=e&&e.target&&!e.currentTarget;r=r.slice(),s&&(e.currentTarget=this);for(var o=0,h=r.length;o<h;o++)if(r[o].apply(this,n)==!1){e&&e.stop&&e.stop();break}return s&&delete e.currentTarget,!0},responds:function(t){return!!(this._callbacks&&this._callbacks[t])},attach:"#on",detach:"#off",fire:"#emit",_installEvents:function(t){var e=this._eventTypes,r=this._callbacks,n=t?"install":"uninstall";if(e){for(var s in r)if(r[s].length>0){var o=e[s],h=o&&o[n];h&&h.call(this,s)}}},statics:{inject:function t(e){var r=e._events;if(r){var n={};R.each(r,function(s,o){var h=typeof s=="string",u=h?s:o,l=R.capitalize(u),f=u.substring(2).toLowerCase();n[f]=h?{}:s,u="_"+u,e["get"+l]=function(){return this[u]},e["set"+l]=function(v){var m=this[u];m&&this.off(f,m),v&&this.on(f,v),this[u]=v}}),e._eventTypes=n}return t.base.apply(this,arguments)}}},he=R.extend({_class:"PaperScope",initialize:function t(){bt=this,this.settings=new R({applyMatrix:!0,insertItems:!0,handleSize:4,hitTolerance:0}),this.project=null,this.projects=[],this.tools=[],this._id=t._id++,t._scopes[this._id]=this;var e=t.prototype;if(!this.support){var r=Ht.getContext(1,1)||{};e.support={nativeDash:"setLineDash"in r||"mozDash"in r,nativeBlendModes:Qe.nativeModes},Ht.release(r)}if(!this.agent){var n=ye.navigator.userAgent.toLowerCase(),s=(/(darwin|win|mac|linux|freebsd|sunos)/.exec(n)||[])[0],o=s==="darwin"?"mac":s,h=e.agent=e.browser={platform:o};o&&(h[o]=!0),n.replace(/(opera|chrome|safari|webkit|firefox|msie|trident|atom|node|jsdom)\/?\s*([.\d]+)(?:.*version\/([.\d]+))?(?:.*rv\:v?([.\d]+))?/g,function(u,l,f,v,m){if(!h.chrome){var d=l==="opera"?v:/^(node|trident)$/.test(l)?m:f;h.version=d,h.versionNumber=parseFloat(d),l={trident:"msie",jsdom:"node"}[l]||l,h.name=l,h[l]=!0}}),h.chrome&&delete h.webkit,h.atom&&delete h.chrome}},version:"0.12.18",getView:function(){var t=this.project;return t&&t._view},getPaper:function(){return this},execute:function(t,e){var r=bt.PaperScript.execute(t,this,e);return zt.updateFocus(),r},install:function(t){var e=this;R.each(["project","view","tool"],function(n){R.define(t,n,{configurable:!0,get:function(){return e[n]}})});for(var r in this)!/^_/.test(r)&&this[r]&&(t[r]=this[r])},setup:function(t){return bt=this,this.project=new It(t),this},createCanvas:function(t,e){return Ht.getCanvas(t,e)},activate:function(){bt=this},clear:function(){for(var t=this.projects,e=this.tools,r=t.length-1;r>=0;r--)t[r].remove();for(var r=e.length-1;r>=0;r--)e[r].remove()},remove:function(){this.clear(),delete he._scopes[this._id]},statics:new function(){function t(e){return e+="Attribute",function(r,n){return r[e](n)||r[e]("data-paper-"+n)}}return{_scopes:{},_id:0,get:function(e){return this._scopes[e]||null},getAttribute:t("get"),hasAttribute:t("has")}}}),Ve=R.extend(We,{initialize:function(t){this._scope=bt,this._index=this._scope[this._list].push(this)-1,(t||!this._scope[this._reference])&&this.activate()},activate:function(){if(!this._scope)return!1;var t=this._scope[this._reference];return t&&t!==this&&t.emit("deactivate"),this._scope[this._reference]=this,this.emit("activate",t),!0},isActive:function(){return this._scope[this._reference]===this},remove:function(){return this._index==null?!1:(R.splice(this._scope[this._list],null,this._index,1),this._scope[this._reference]==this&&(this._scope[this._reference]=null),this._scope=null,!0)},getView:function(){return this._scope.getView()}}),si={findItemBoundsCollisions:function(t,e,r){function n(h){for(var u=new Array(h.length),l=0;l<h.length;l++){var f=h[l].getBounds();u[l]=[f.left,f.top,f.right,f.bottom]}return u}var s=n(t),o=!e||e===t?s:n(e);return this.findBoundsCollisions(s,o,r||0)},findCurveBoundsCollisions:function(t,e,r,n){function s(d){for(var p=Math.min,k=Math.max,y=new Array(d.length),S=0;S<d.length;S++){var g=d[S];y[S]=[p(g[0],g[2],g[4],g[6]),p(g[1],g[3],g[5],g[7]),k(g[0],g[2],g[4],g[6]),k(g[1],g[3],g[5],g[7])]}return y}var o=s(t),h=!e||e===t?o:s(e);if(n){for(var u=this.findBoundsCollisions(o,h,r||0,!1,!0),l=this.findBoundsCollisions(o,h,r||0,!0,!0),f=[],v=0,m=u.length;v<m;v++)f[v]={hor:u[v],ver:l[v]};return f}return this.findBoundsCollisions(o,h,r||0)},findBoundsCollisions:function(t,e,r,n,s){var o=!e||t===e,h=o?t:t.concat(e),u=t.length,l=h.length;function f($,it,st){for(var Z=0,K=$.length;Z<K;){var rt=K+Z>>>1;h[$[rt]][it]<st?Z=rt+1:K=rt}return Z-1}for(var v=n?1:0,m=v+2,d=n?0:1,p=d+2,k=new Array(l),y=0;y<l;y++)k[y]=y;k.sort(function($,it){return h[$][v]-h[it][v]});for(var S=[],g=new Array(u),y=0;y<l;y++){var w=k[y],c=h[w],x=o?w:w-u,I=w<u,A=o||!I,b=I?[]:null;if(S.length){var E=f(S,m,c[v]-r)+1;if(S.splice(0,E),o&&s){b=b.concat(S);for(var N=0;N<S.length;N++){var O=S[N];g[O].push(x)}}else for(var z=c[p],T=c[d],N=0;N<S.length;N++){var O=S[N],V=h[O],B=O<u,q=o||O>=u;(s||(I&&q||A&&B)&&z>=V[d]-r&&T<=V[p]+r)&&(I&&q&&b.push(o?O:O-u),A&&B&&g[O].push(x))}}if(I&&(t===e&&b.push(w),g[w]=b),S.length){var U=c[m],G=f(S,m,U);S.splice(G+1,0,w)}else S.push(w)}for(var y=0;y<g.length;y++){var Q=g[y];Q&&Q.sort(function(it,st){return it-st})}return g}},fe=R.extend({initialize:function(t){this.precision=R.pick(t,5),this.multiplier=Math.pow(10,this.precision)},number:function(t){return this.precision<16?Math.round(t*this.multiplier)/this.multiplier:t},pair:function(t,e,r){return this.number(t)+(r||",")+this.number(e)},point:function(t,e){return this.number(t.x)+(e||",")+this.number(t.y)},size:function(t,e){return this.number(t.width)+(e||",")+this.number(t.height)},rectangle:function(t,e){return this.point(t,e)+(e||",")+this.size(t,e)}});fe.instance=new fe;var At=new function(){var t=[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],e=[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]],r=Math.abs,n=Math.sqrt,s=Math.pow,o=Math.log2||function(m){return Math.log(m)*Math.LOG2E},h=1e-12,u=112e-18;function l(m,d,p){return m<d?d:m>p?p:m}function f(m,d,p){function k(E){var N=E*134217729,O=E-N,z=O+N,T=E-z;return[z,T]}var y=d*d-m*p,S=d*d+m*p;if(r(y)*3<S){var g=k(m),w=k(d),c=k(p),x=d*d,I=w[0]*w[0]-x+2*w[0]*w[1]+w[1]*w[1],A=m*p,b=g[0]*c[0]-A+g[0]*c[1]+g[1]*c[0]+g[1]*c[1];y=x-A+(I-b)}return y}function v(){var m=Math.max.apply(Math,arguments);return m&&(m<1e-8||m>1e8)?s(2,-Math.round(o(m))):0}return{EPSILON:h,MACHINE_EPSILON:u,CURVETIME_EPSILON:1e-8,GEOMETRIC_EPSILON:1e-7,TRIGONOMETRIC_EPSILON:1e-8,ANGULAR_EPSILON:1e-5,KAPPA:4*(n(2)-1)/3,isZero:function(m){return m>=-h&&m<=h},isMachineZero:function(m){return m>=-u&&m<=u},clamp:l,integrate:function(m,d,p,k){for(var y=t[k-2],S=e[k-2],g=(p-d)*.5,w=g+d,c=0,x=k+1>>1,I=k&1?S[c++]*m(w):0;c<x;){var A=g*y[c];I+=S[c++]*(m(w+A)+m(w-A))}return g*I},findRoot:function(m,d,p,k,y,S,g){for(var w=0;w<S;w++){var c=m(p),x=c/d(p),I=p-x;if(r(x)<g){p=I;break}c>0?(y=p,p=I<=k?(k+y)*.5:I):(k=p,p=I>=y?(k+y)*.5:I)}return l(p,k,y)},solveQuadratic:function(m,d,p,k,y,S){var g,w=1/0;if(r(m)<h){if(r(d)<h)return r(p)<h?-1:0;g=-p/d}else{d*=-.5;var c=f(m,d,p);if(c&&r(c)<u){var x=v(r(m),r(d),r(p));x&&(m*=x,d*=x,p*=x,c=f(m,d,p))}if(c>=-u){var I=c<0?0:n(c),A=d+(d<0?-I:I);A===0?(g=p/m,w=-g):(g=A/m,w=p/A)}}var b=0,E=y==null,N=y-h,O=S+h;return isFinite(g)&&(E||g>N&&g<O)&&(k[b++]=E?g:l(g,y,S)),w!==g&&isFinite(w)&&(E||w>N&&w<O)&&(k[b++]=E?w:l(w,y,S)),b},solveCubic:function(m,d,p,k,y,S,g){var w=v(r(m),r(d),r(p),r(k)),c,x,I,A,b;w&&(m*=w,d*=w,p*=w,k*=w);function E(G){c=G;var Q=m*c;x=Q+d,I=x*c+p,A=(Q+x)*c+I,b=I*c+k}if(r(m)<h)m=d,x=p,I=k,c=1/0;else if(r(k)<h)x=d,I=p,c=0;else{E(-(d/m)/3);var N=b/m,O=s(r(N),1/3),z=N<0?-1:1,T=-A/m,V=T>0?1.324717957244746*Math.max(O,n(T)):O,B=c-z*V;if(B!==c){do E(B),B=A===0?c:c-b/A/(1+u);while(z*B>z*c);r(m)*c*c>r(k/c)&&(I=-k/c,x=(I-p)/c)}}var q=At.solveQuadratic(m,x,I,y,S,g),U=S==null;return isFinite(c)&&(q===0||q>0&&c!==y[0]&&c!==y[1])&&(U||c>S-h&&c<g+h)&&(y[q++]=U?c:l(c,S,g)),q}}},ai={_id:1,_pools:{},get:function(t){if(t){var e=this._pools[t];return e||(e=this._pools[t]={_id:1}),e._id++}else return this._id++}},D=R.extend({_class:"Point",_readIndex:!0,initialize:function(e,r){var n=typeof e,s=this.__read,o=0;if(n==="number"){var h=typeof r=="number";this._set(e,h?r:e),s&&(o=h?2:1)}else if(n==="undefined"||e===null)this._set(0,0),s&&(o=e===null?1:0);else{var u=n==="string"?e.split(/[\s,]+/)||[]:e;o=1,Array.isArray(u)?this._set(+u[0],+(u.length>1?u[1]:u[0])):"x"in u?this._set(u.x||0,u.y||0):"width"in u?this._set(u.width||0,u.height||0):"angle"in u?(this._set(u.length||0,0),this.setAngle(u.angle||0)):(this._set(0,0),o=0)}return s&&(this.__read=o),this},set:"#initialize",_set:function(t,e){return this.x=t,this.y=e,this},equals:function(t){return this===t||t&&(this.x===t.x&&this.y===t.y||Array.isArray(t)&&this.x===t[0]&&this.y===t[1])||!1},clone:function(){return new D(this.x,this.y)},toString:function(){var t=fe.instance;return"{ x: "+t.number(this.x)+", y: "+t.number(this.y)+" }"},_serialize:function(t){var e=t.formatter;return[e.number(this.x),e.number(this.y)]},getLength:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},setLength:function(t){if(this.isZero()){var e=this._angle||0;this._set(Math.cos(e)*t,Math.sin(e)*t)}else{var r=t/this.getLength();At.isZero(r)&&this.getAngle(),this._set(this.x*r,this.y*r)}},getAngle:function(){return this.getAngleInRadians.apply(this,arguments)*180/Math.PI},setAngle:function(t){this.setAngleInRadians.call(this,t*Math.PI/180)},getAngleInDegrees:"#getAngle",setAngleInDegrees:"#setAngle",getAngleInRadians:function(){if(arguments.length){var t=D.read(arguments),e=this.getLength()*t.getLength();if(At.isZero(e))return NaN;var r=this.dot(t)/e;return Math.acos(r<-1?-1:r>1?1:r)}else return this.isZero()?this._angle||0:this._angle=Math.atan2(this.y,this.x)},setAngleInRadians:function(t){if(this._angle=t,!this.isZero()){var e=this.getLength();this._set(Math.cos(t)*e,Math.sin(t)*e)}},getQuadrant:function(){return this.x>=0?this.y>=0?1:4:this.y>=0?2:3}},{beans:!1,getDirectedAngle:function(){var t=D.read(arguments);return Math.atan2(this.cross(t),this.dot(t))*180/Math.PI},getDistance:function(){var t=arguments,e=D.read(t),r=e.x-this.x,n=e.y-this.y,s=r*r+n*n,o=R.read(t);return o?s:Math.sqrt(s)},normalize:function(t){t===Y&&(t=1);var e=this.getLength(),r=e!==0?t/e:0,n=new D(this.x*r,this.y*r);return r>=0&&(n._angle=this._angle),n},rotate:function(t,e){if(t===0)return this.clone();t=t*Math.PI/180;var r=e?this.subtract(e):this,n=Math.sin(t),s=Math.cos(t);return r=new D(r.x*s-r.y*n,r.x*n+r.y*s),e?r.add(e):r},transform:function(t){return t?t._transformPoint(this):this},add:function(){var t=D.read(arguments);return new D(this.x+t.x,this.y+t.y)},subtract:function(){var t=D.read(arguments);return new D(this.x-t.x,this.y-t.y)},multiply:function(){var t=D.read(arguments);return new D(this.x*t.x,this.y*t.y)},divide:function(){var t=D.read(arguments);return new D(this.x/t.x,this.y/t.y)},modulo:function(){var t=D.read(arguments);return new D(this.x%t.x,this.y%t.y)},negate:function(){return new D(-this.x,-this.y)},isInside:function(){return ut.read(arguments).contains(this)},isClose:function(){var t=arguments,e=D.read(t),r=R.read(t);return this.getDistance(e)<=r},isCollinear:function(){var t=D.read(arguments);return D.isCollinear(this.x,this.y,t.x,t.y)},isColinear:"#isCollinear",isOrthogonal:function(){var t=D.read(arguments);return D.isOrthogonal(this.x,this.y,t.x,t.y)},isZero:function(){var t=At.isZero;return t(this.x)&&t(this.y)},isNaN:function(){return isNaN(this.x)||isNaN(this.y)},isInQuadrant:function(t){return this.x*(t>1&&t<4?-1:1)>=0&&this.y*(t>2?-1:1)>=0},dot:function(){var t=D.read(arguments);return this.x*t.x+this.y*t.y},cross:function(){var t=D.read(arguments);return this.x*t.y-this.y*t.x},project:function(){var t=D.read(arguments),e=t.isZero()?0:this.dot(t)/t.dot(t);return new D(t.x*e,t.y*e)},statics:{min:function(){var t=arguments,e=D.read(t),r=D.read(t);return new D(Math.min(e.x,r.x),Math.min(e.y,r.y))},max:function(){var t=arguments,e=D.read(t),r=D.read(t);return new D(Math.max(e.x,r.x),Math.max(e.y,r.y))},random:function(){return new D(Math.random(),Math.random())},isCollinear:function(t,e,r,n){return Math.abs(t*n-e*r)<=Math.sqrt((t*t+e*e)*(r*r+n*n))*1e-8},isOrthogonal:function(t,e,r,n){return Math.abs(t*r+e*n)<=Math.sqrt((t*t+e*e)*(r*r+n*n))*1e-8}}},R.each(["round","ceil","floor","abs"],function(t){var e=Math[t];this[t]=function(){return new D(e(this.x),e(this.y))}},{})),Jt=D.extend({initialize:function(e,r,n,s){this._x=e,this._y=r,this._owner=n,this._setter=s},_set:function(t,e,r){return this._x=t,this._y=e,r||this._owner[this._setter](this),this},getX:function(){return this._x},setX:function(t){this._x=t,this._owner[this._setter](this)},getY:function(){return this._y},setY:function(t){this._y=t,this._owner[this._setter](this)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(t){this._owner._changeSelection(this._getSelection(),t)},_getSelection:function(){return this._setter==="setPosition"?4:0}}),ht=R.extend({_class:"Size",_readIndex:!0,initialize:function(e,r){var n=typeof e,s=this.__read,o=0;if(n==="number"){var h=typeof r=="number";this._set(e,h?r:e),s&&(o=h?2:1)}else if(n==="undefined"||e===null)this._set(0,0),s&&(o=e===null?1:0);else{var u=n==="string"?e.split(/[\s,]+/)||[]:e;o=1,Array.isArray(u)?this._set(+u[0],+(u.length>1?u[1]:u[0])):"width"in u?this._set(u.width||0,u.height||0):"x"in u?this._set(u.x||0,u.y||0):(this._set(0,0),o=0)}return s&&(this.__read=o),this},set:"#initialize",_set:function(t,e){return this.width=t,this.height=e,this},equals:function(t){return t===this||t&&(this.width===t.width&&this.height===t.height||Array.isArray(t)&&this.width===t[0]&&this.height===t[1])||!1},clone:function(){return new ht(this.width,this.height)},toString:function(){var t=fe.instance;return"{ width: "+t.number(this.width)+", height: "+t.number(this.height)+" }"},_serialize:function(t){var e=t.formatter;return[e.number(this.width),e.number(this.height)]},add:function(){var t=ht.read(arguments);return new ht(this.width+t.width,this.height+t.height)},subtract:function(){var t=ht.read(arguments);return new ht(this.width-t.width,this.height-t.height)},multiply:function(){var t=ht.read(arguments);return new ht(this.width*t.width,this.height*t.height)},divide:function(){var t=ht.read(arguments);return new ht(this.width/t.width,this.height/t.height)},modulo:function(){var t=ht.read(arguments);return new ht(this.width%t.width,this.height%t.height)},negate:function(){return new ht(-this.width,-this.height)},isZero:function(){var t=At.isZero;return t(this.width)&&t(this.height)},isNaN:function(){return isNaN(this.width)||isNaN(this.height)},statics:{min:function(t,e){return new ht(Math.min(t.width,e.width),Math.min(t.height,e.height))},max:function(t,e){return new ht(Math.max(t.width,e.width),Math.max(t.height,e.height))},random:function(){return new ht(Math.random(),Math.random())}}},R.each(["round","ceil","floor","abs"],function(t){var e=Math[t];this[t]=function(){return new ht(e(this.width),e(this.height))}},{})),kt=ht.extend({initialize:function(e,r,n,s){this._width=e,this._height=r,this._owner=n,this._setter=s},_set:function(t,e,r){return this._width=t,this._height=e,r||this._owner[this._setter](this),this},getWidth:function(){return this._width},setWidth:function(t){this._width=t,this._owner[this._setter](this)},getHeight:function(){return this._height},setHeight:function(t){this._height=t,this._owner[this._setter](this)}}),ut=R.extend({_class:"Rectangle",_readIndex:!0,beans:!0,initialize:function(e,r,n,s){var o=arguments,h=typeof e,u;if(h==="number"?(this._set(e,r,n,s),u=4):h==="undefined"||e===null?(this._set(0,0,0,0),u=e===null?1:0):o.length===1&&(Array.isArray(e)?(this._set.apply(this,e),u=1):e.x!==Y||e.width!==Y?(this._set(e.x||0,e.y||0,e.width||0,e.height||0),u=1):e.from===Y&&e.to===Y&&(this._set(0,0,0,0),R.readSupported(o,this)&&(u=1))),u===Y){var l=D.readNamed(o,"from"),f=R.peek(o),v=l.x,m=l.y,d,p;if(f&&f.x!==Y||R.hasNamed(o,"to")){var k=D.readNamed(o,"to");d=k.x-v,p=k.y-m,d<0&&(v=k.x,d=-d),p<0&&(m=k.y,p=-p)}else{var y=ht.read(o);d=y.width,p=y.height}this._set(v,m,d,p),u=o.__index}var S=o.__filtered;return S&&(this.__filtered=S),this.__read&&(this.__read=u),this},set:"#initialize",_set:function(t,e,r,n){return this.x=t,this.y=e,this.width=r,this.height=n,this},clone:function(){return new ut(this.x,this.y,this.width,this.height)},equals:function(t){var e=R.isPlainValue(t)?ut.read(arguments):t;return e===this||e&&this.x===e.x&&this.y===e.y&&this.width===e.width&&this.height===e.height||!1},toString:function(){var t=fe.instance;return"{ x: "+t.number(this.x)+", y: "+t.number(this.y)+", width: "+t.number(this.width)+", height: "+t.number(this.height)+" }"},_serialize:function(t){var e=t.formatter;return[e.number(this.x),e.number(this.y),e.number(this.width),e.number(this.height)]},getPoint:function(t){var e=t?D:Jt;return new e(this.x,this.y,this,"setPoint")},setPoint:function(){var t=D.read(arguments);this.x=t.x,this.y=t.y},getSize:function(t){var e=t?ht:kt;return new e(this.width,this.height,this,"setSize")},_fw:1,_fh:1,setSize:function(){var t=ht.read(arguments),e=this._sx,r=this._sy,n=t.width,s=t.height;e&&(this.x+=(this.width-n)*e),r&&(this.y+=(this.height-s)*r),this.width=n,this.height=s,this._fw=this._fh=1},getLeft:function(){return this.x},setLeft:function(t){if(!this._fw){var e=t-this.x;this.width-=this._sx===.5?e*2:e}this.x=t,this._sx=this._fw=0},getTop:function(){return this.y},setTop:function(t){if(!this._fh){var e=t-this.y;this.height-=this._sy===.5?e*2:e}this.y=t,this._sy=this._fh=0},getRight:function(){return this.x+this.width},setRight:function(t){if(!this._fw){var e=t-this.x;this.width=this._sx===.5?e*2:e}this.x=t-this.width,this._sx=1,this._fw=0},getBottom:function(){return this.y+this.height},setBottom:function(t){if(!this._fh){var e=t-this.y;this.height=this._sy===.5?e*2:e}this.y=t-this.height,this._sy=1,this._fh=0},getCenterX:function(){return this.x+this.width/2},setCenterX:function(t){this._fw||this._sx===.5?this.x=t-this.width/2:(this._sx&&(this.x+=(t-this.x)*2*this._sx),this.width=(t-this.x)*2),this._sx=.5,this._fw=0},getCenterY:function(){return this.y+this.height/2},setCenterY:function(t){this._fh||this._sy===.5?this.y=t-this.height/2:(this._sy&&(this.y+=(t-this.y)*2*this._sy),this.height=(t-this.y)*2),this._sy=.5,this._fh=0},getCenter:function(t){var e=t?D:Jt;return new e(this.getCenterX(),this.getCenterY(),this,"setCenter")},setCenter:function(){var t=D.read(arguments);return this.setCenterX(t.x),this.setCenterY(t.y),this},getArea:function(){return this.width*this.height},isEmpty:function(){return this.width===0||this.height===0},contains:function(t){return t&&t.width!==Y||(Array.isArray(t)?t:arguments).length===4?this._containsRectangle(ut.read(arguments)):this._containsPoint(D.read(arguments))},_containsPoint:function(t){var e=t.x,r=t.y;return e>=this.x&&r>=this.y&&e<=this.x+this.width&&r<=this.y+this.height},_containsRectangle:function(t){var e=t.x,r=t.y;return e>=this.x&&r>=this.y&&e+t.width<=this.x+this.width&&r+t.height<=this.y+this.height},intersects:function(){var t=ut.read(arguments),e=R.read(arguments)||0;return t.x+t.width>this.x-e&&t.y+t.height>this.y-e&&t.x<this.x+this.width+e&&t.y<this.y+this.height+e},intersect:function(){var t=ut.read(arguments),e=Math.max(this.x,t.x),r=Math.max(this.y,t.y),n=Math.min(this.x+this.width,t.x+t.width),s=Math.min(this.y+this.height,t.y+t.height);return new ut(e,r,n-e,s-r)},unite:function(){var t=ut.read(arguments),e=Math.min(this.x,t.x),r=Math.min(this.y,t.y),n=Math.max(this.x+this.width,t.x+t.width),s=Math.max(this.y+this.height,t.y+t.height);return new ut(e,r,n-e,s-r)},include:function(){var t=D.read(arguments),e=Math.min(this.x,t.x),r=Math.min(this.y,t.y),n=Math.max(this.x+this.width,t.x),s=Math.max(this.y+this.height,t.y);return new ut(e,r,n-e,s-r)},expand:function(){var t=ht.read(arguments),e=t.width,r=t.height;return new ut(this.x-e/2,this.y-r/2,this.width+e,this.height+r)},scale:function(t,e){return this.expand(this.width*t-this.width,this.height*(e===Y?t:e)-this.height)}},R.each([["Top","Left"],["Top","Right"],["Bottom","Left"],["Bottom","Right"],["Left","Center"],["Top","Center"],["Right","Center"],["Bottom","Center"]],function(t,e){var r=t.join(""),n=/^[RL]/.test(r);e>=4&&(t[1]+=n?"Y":"X");var s=t[n?0:1],o=t[n?1:0],h="get"+s,u="get"+o,l="set"+s,f="set"+o,v="get"+r,m="set"+r;this[v]=function(d){var p=d?D:Jt;return new p(this[h](),this[u](),this,m)},this[m]=function(){var d=D.read(arguments);this[l](d.x),this[f](d.y)}},{beans:!0})),ce=ut.extend({initialize:function(e,r,n,s,o,h){this._set(e,r,n,s,!0),this._owner=o,this._setter=h},_set:function(t,e,r,n,s){return this._x=t,this._y=e,this._width=r,this._height=n,s||this._owner[this._setter](this),this}},new function(){var t=ut.prototype;return R.each(["x","y","width","height"],function(e){var r=R.capitalize(e),n="_"+e;this["get"+r]=function(){return this[n]},this["set"+r]=function(s){this[n]=s,this._dontNotify||this._owner[this._setter](this)}},R.each(["Point","Size","Center","Left","Top","Right","Bottom","CenterX","CenterY","TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],function(e){var r="set"+e;this[r]=function(){this._dontNotify=!0,t[r].apply(this,arguments),this._dontNotify=!1,this._owner[this._setter](this)}},{isSelected:function(){return!!(this._owner._selection&2)},setSelected:function(e){var r=this._owner;r._changeSelection&&r._changeSelection(2,e)}}))}),wt=R.extend({_class:"Matrix",initialize:function t(e,r){var n=arguments,s=n.length,o=!0;if(s>=6?this._set.apply(this,n):s===1||s===2?e instanceof t?this._set(e._a,e._b,e._c,e._d,e._tx,e._ty,r):Array.isArray(e)?this._set.apply(this,r?e.concat([r]):e):o=!1:s?o=!1:this.reset(),!o)throw new Error("Unsupported matrix parameters");return this},set:"#initialize",_set:function(t,e,r,n,s,o,h){return this._a=t,this._b=e,this._c=r,this._d=n,this._tx=s,this._ty=o,h||this._changed(),this},_serialize:function(t,e){return R.serialize(this.getValues(),t,!0,e)},_changed:function(){var t=this._owner;t&&(t._applyMatrix?t.transform(null,!0):t._changed(25))},clone:function(){return new wt(this._a,this._b,this._c,this._d,this._tx,this._ty)},equals:function(t){return t===this||t&&this._a===t._a&&this._b===t._b&&this._c===t._c&&this._d===t._d&&this._tx===t._tx&&this._ty===t._ty},toString:function(){var t=fe.instance;return"[["+[t.number(this._a),t.number(this._c),t.number(this._tx)].join(", ")+"], ["+[t.number(this._b),t.number(this._d),t.number(this._ty)].join(", ")+"]]"},reset:function(t){return this._a=this._d=1,this._b=this._c=this._tx=this._ty=0,t||this._changed(),this},apply:function(t,e){var r=this._owner;return r?(r.transform(null,R.pick(t,!0),e),this.isIdentity()):!1},translate:function(){var t=D.read(arguments),e=t.x,r=t.y;return this._tx+=e*this._a+r*this._c,this._ty+=e*this._b+r*this._d,this._changed(),this},scale:function(){var t=arguments,e=D.read(t),r=D.read(t,0,{readNull:!0});return r&&this.translate(r),this._a*=e.x,this._b*=e.x,this._c*=e.y,this._d*=e.y,r&&this.translate(r.negate()),this._changed(),this},rotate:function(t){t*=Math.PI/180;var e=D.read(arguments,1),r=e.x,n=e.y,s=Math.cos(t),o=Math.sin(t),h=r-r*s+n*o,u=n-r*o-n*s,l=this._a,f=this._b,v=this._c,m=this._d;return this._a=s*l+o*v,this._b=s*f+o*m,this._c=-o*l+s*v,this._d=-o*f+s*m,this._tx+=h*l+u*v,this._ty+=h*f+u*m,this._changed(),this},shear:function(){var t=arguments,e=D.read(t),r=D.read(t,0,{readNull:!0});r&&this.translate(r);var n=this._a,s=this._b;return this._a+=e.y*this._c,this._b+=e.y*this._d,this._c+=e.x*n,this._d+=e.x*s,r&&this.translate(r.negate()),this._changed(),this},skew:function(){var t=arguments,e=D.read(t),r=D.read(t,0,{readNull:!0}),n=Math.PI/180,s=new D(Math.tan(e.x*n),Math.tan(e.y*n));return this.shear(s,r)},append:function(t,e){if(t){var r=this._a,n=this._b,s=this._c,o=this._d,h=t._a,u=t._c,l=t._b,f=t._d,v=t._tx,m=t._ty;this._a=h*r+l*s,this._c=u*r+f*s,this._b=h*n+l*o,this._d=u*n+f*o,this._tx+=v*r+m*s,this._ty+=v*n+m*o,e||this._changed()}return this},prepend:function(t,e){if(t){var r=this._a,n=this._b,s=this._c,o=this._d,h=this._tx,u=this._ty,l=t._a,f=t._c,v=t._b,m=t._d,d=t._tx,p=t._ty;this._a=l*r+f*n,this._c=l*s+f*o,this._b=v*r+m*n,this._d=v*s+m*o,this._tx=l*h+f*u+d,this._ty=v*h+m*u+p,e||this._changed()}return this},appended:function(t){return this.clone().append(t)},prepended:function(t){return this.clone().prepend(t)},invert:function(){var t=this._a,e=this._b,r=this._c,n=this._d,s=this._tx,o=this._ty,h=t*n-e*r,u=null;return h&&!isNaN(h)&&isFinite(s)&&isFinite(o)&&(this._a=n/h,this._b=-e/h,this._c=-r/h,this._d=t/h,this._tx=(r*o-n*s)/h,this._ty=(e*s-t*o)/h,u=this),u},inverted:function(){return this.clone().invert()},concatenate:"#append",preConcatenate:"#prepend",chain:"#appended",_shiftless:function(){return new wt(this._a,this._b,this._c,this._d,0,0)},_orNullIfIdentity:function(){return this.isIdentity()?null:this},isIdentity:function(){return this._a===1&&this._b===0&&this._c===0&&this._d===1&&this._tx===0&&this._ty===0},isInvertible:function(){var t=this._a*this._d-this._c*this._b;return t&&!isNaN(t)&&isFinite(this._tx)&&isFinite(this._ty)},isSingular:function(){return!this.isInvertible()},transform:function(t,e,r){return arguments.length<3?this._transformPoint(D.read(arguments)):this._transformCoordinates(t,e,r)},_transformPoint:function(t,e,r){var n=t.x,s=t.y;return e||(e=new D),e._set(n*this._a+s*this._c+this._tx,n*this._b+s*this._d+this._ty,r)},_transformCoordinates:function(t,e,r){for(var n=0,s=2*r;n<s;n+=2){var o=t[n],h=t[n+1];e[n]=o*this._a+h*this._c+this._tx,e[n+1]=o*this._b+h*this._d+this._ty}return e},_transformCorners:function(t){var e=t.x,r=t.y,n=e+t.width,s=r+t.height,o=[e,r,n,r,n,s,e,s];return this._transformCoordinates(o,o,4)},_transformBounds:function(t,e,r){for(var n=this._transformCorners(t),s=n.slice(0,2),o=s.slice(),h=2;h<8;h++){var u=n[h],l=h&1;u<s[l]?s[l]=u:u>o[l]&&(o[l]=u)}return e||(e=new ut),e._set(s[0],s[1],o[0]-s[0],o[1]-s[1],r)},inverseTransform:function(){return this._inverseTransform(D.read(arguments))},_inverseTransform:function(t,e,r){var n=this._a,s=this._b,o=this._c,h=this._d,u=this._tx,l=this._ty,f=n*h-s*o,v=null;if(f&&!isNaN(f)&&isFinite(u)&&isFinite(l)){var m=t.x-this._tx,d=t.y-this._ty;e||(e=new D),v=e._set((m*h-d*o)/f,(d*n-m*s)/f,r)}return v},decompose:function(){var t=this._a,e=this._b,r=this._c,n=this._d,s=t*n-e*r,o=Math.sqrt,h=Math.atan2,u=180/Math.PI,l,f,v;if(t!==0||e!==0){var m=o(t*t+e*e);l=Math.acos(t/m)*(e>0?1:-1),f=[m,s/m],v=[h(t*r+e*n,m*m),0]}else if(r!==0||n!==0){var d=o(r*r+n*n);l=Math.asin(r/d)*(n>0?1:-1),f=[s/d,d],v=[0,h(t*r+e*n,d*d)]}else l=0,v=f=[0,0];return{translation:this.getTranslation(),rotation:l*u,scaling:new D(f),skewing:new D(v[0]*u,v[1]*u)}},getValues:function(){return[this._a,this._b,this._c,this._d,this._tx,this._ty]},getTranslation:function(){return new D(this._tx,this._ty)},getScaling:function(){return this.decompose().scaling},getRotation:function(){return this.decompose().rotation},applyToContext:function(t){this.isIdentity()||t.transform(this._a,this._b,this._c,this._d,this._tx,this._ty)}},R.each(["a","b","c","d","tx","ty"],function(t){var e=R.capitalize(t),r="_"+t;this["get"+e]=function(){return this[r]},this["set"+e]=function(n){this[r]=n,this._changed()}},{})),Zt=R.extend({_class:"Line",initialize:function(e,r,n,s,o){var h=!1;arguments.length>=4?(this._px=e,this._py=r,this._vx=n,this._vy=s,h=o):(this._px=e.x,this._py=e.y,this._vx=r.x,this._vy=r.y,h=n),h||(this._vx-=this._px,this._vy-=this._py)},getPoint:function(){return new D(this._px,this._py)},getVector:function(){return new D(this._vx,this._vy)},getLength:function(){return this.getVector().getLength()},intersect:function(t,e){return Zt.intersect(this._px,this._py,this._vx,this._vy,t._px,t._py,t._vx,t._vy,!0,e)},getSide:function(t,e){return Zt.getSide(this._px,this._py,this._vx,this._vy,t.x,t.y,!0,e)},getDistance:function(t){return Math.abs(this.getSignedDistance(t))},getSignedDistance:function(t){return Zt.getSignedDistance(this._px,this._py,this._vx,this._vy,t.x,t.y,!0)},isCollinear:function(t){return D.isCollinear(this._vx,this._vy,t._vx,t._vy)},isOrthogonal:function(t){return D.isOrthogonal(this._vx,this._vy,t._vx,t._vy)},statics:{intersect:function(t,e,r,n,s,o,h,u,l,f){l||(r-=t,n-=e,h-=s,u-=o);var v=r*u-n*h;if(!At.isMachineZero(v)){var m=t-s,d=e-o,p=(h*d-u*m)/v,k=(r*d-n*m)/v,y=1e-12,S=-y,g=1+y;if(f||S<p&&p<g&&S<k&&k<g)return f||(p=p<=0?0:p>=1?1:p),new D(t+p*r,e+p*n)}},getSide:function(t,e,r,n,s,o,h,u){h||(r-=t,n-=e);var l=s-t,f=o-e,v=l*n-f*r;return!u&&At.isMachineZero(v)&&(v=(l*r+l*r)/(r*r+n*n),v>=0&&v<=1&&(v=0)),v<0?-1:v>0?1:0},getSignedDistance:function(t,e,r,n,s,o,h){return h||(r-=t,n-=e),r===0?n>0?s-t:t-s:n===0?r<0?o-e:e-o:((s-t)*n-(o-e)*r)/(n>r?n*Math.sqrt(1+r*r/(n*n)):r*Math.sqrt(1+n*n/(r*r)))},getDistance:function(t,e,r,n,s,o,h){return Math.abs(Zt.getSignedDistance(t,e,r,n,s,o,h))}}}),It=Ve.extend({_class:"Project",_list:"projects",_reference:"project",_compactSerialize:!0,initialize:function(e){Ve.call(this,!0),this._children=[],this._namedChildren={},this._activeLayer=null,this._currentStyle=new _i(null,null,this),this._view=zt.create(this,e||Ht.getCanvas(1,1)),this._selectionItems={},this._selectionCount=0,this._updateVersion=0},_serialize:function(t,e){return R.serialize(this._children,t,!0,e)},_changed:function(t,e){if(t&1){var r=this._view;r&&(r._needsUpdate=!0,!r._requested&&r._autoUpdate&&r.requestUpdate())}var n=this._changes;if(n&&e){var s=this._changesById,o=e._id,h=s[o];h?h.flags|=t:n.push(s[o]={item:e,flags:t})}},clear:function(){for(var t=this._children,e=t.length-1;e>=0;e--)t[e].remove()},isEmpty:function(){return!this._children.length},remove:function t(){return t.base.call(this)?(this._view&&this._view.remove(),!0):!1},getView:function(){return this._view},getCurrentStyle:function(){return this._currentStyle},setCurrentStyle:function(t){this._currentStyle.set(t)},getIndex:function(){return this._index},getOptions:function(){return this._scope.settings},getLayers:function(){return this._children},getActiveLayer:function(){return this._activeLayer||new Re({project:this,insert:!0})},getSymbolDefinitions:function(){var t=[],e={};return this.getItems({class:je,match:function(r){var n=r._definition,s=n._id;return e[s]||(e[s]=!0,t.push(n)),!1}}),t},getSymbols:"getSymbolDefinitions",getSelectedItems:function(){var t=this._selectionItems,e=[];for(var r in t){var n=t[r],s=n._selection;s&1&&n.isInserted()?e.push(n):s||this._updateSelection(n)}return e},_updateSelection:function(t){var e=t._id,r=this._selectionItems;t._selection?r[e]!==t&&(this._selectionCount++,r[e]=t):r[e]===t&&(this._selectionCount--,delete r[e])},selectAll:function(){for(var t=this._children,e=0,r=t.length;e<r;e++)t[e].setFullySelected(!0)},deselectAll:function(){var t=this._selectionItems;for(var e in t)t[e].setFullySelected(!1)},addLayer:function(t){return this.insertLayer(Y,t)},insertLayer:function(t,e){if(e instanceof Re){e._remove(!1,!0),R.splice(this._children,[e],t,0),e._setProject(this,!0);var r=e._name;r&&e.setName(r),this._changes&&e._changed(5),this._activeLayer||(this._activeLayer=e)}else e=null;return e},_insertItem:function(t,e,r){return e=this.insertLayer(t,e)||(this._activeLayer||this._insertItem(Y,new Re(P.NO_INSERT),!0)).insertChild(t,e),r&&e.activate&&e.activate(),e},getItems:function(t){return P._getItems(this,t)},getItem:function(t){return P._getItems(this,t,null,null,!0)[0]||null},importJSON:function(t){this.activate();var e=this._activeLayer;return R.importJSON(t,e&&e.isEmpty()&&e)},removeOn:function(t){var e=this._removeSets;if(e){t==="mouseup"&&(e.mousedrag=null);var r=e[t];if(r){for(var n in r){var s=r[n];for(var o in e){var h=e[o];h&&h!=r&&delete h[s._id]}s.remove()}e[t]=null}}},draw:function(t,e,r){this._updateVersion++,t.save(),e.applyToContext(t);for(var n=this._children,s=new R({offset:new D(0,0),pixelRatio:r,viewMatrix:e.isIdentity()?null:e,matrices:[new wt],updateMatrix:!0}),o=0,h=n.length;o<h;o++)n[o].draw(t,s);if(t.restore(),this._selectionCount>0){t.save(),t.strokeWidth=1;var u=this._selectionItems,l=this._scope.settings.handleSize,f=this._updateVersion;for(var v in u)u[v]._drawSelection(t,e,l,u,f);t.restore()}}}),P=R.extend(We,{statics:{extend:function t(e){return e._serializeFields&&(e._serializeFields=R.set({},this.prototype._serializeFields,e._serializeFields)),t.base.apply(this,arguments)},INSERT:{insert:!0},NO_INSERT:{insert:!1}},_class:"Item",_name:null,_applyMatrix:!0,_canApplyMatrix:!0,_canScaleStroke:!1,_pivot:null,_visible:!0,_blendMode:"normal",_opacity:1,_locked:!1,_guide:!1,_clipMask:!1,_selection:0,_selectBounds:!0,_selectChildren:!1,_serializeFields:{name:null,applyMatrix:null,matrix:new wt,pivot:null,visible:!0,blendMode:"normal",opacity:1,locked:!1,guide:!1,clipMask:!1,selected:!1,data:{}},_prioritize:["applyMatrix"]},new function(){var t=["onMouseDown","onMouseUp","onMouseDrag","onClick","onDoubleClick","onMouseMove","onMouseEnter","onMouseLeave"];return R.each(t,function(e){this._events[e]={install:function(r){this.getView()._countItemEvent(r,1)},uninstall:function(r){this.getView()._countItemEvent(r,-1)}}},{_events:{onFrame:{install:function(){this.getView()._animateItem(this,!0)},uninstall:function(){this.getView()._animateItem(this,!1)}},onLoad:{},onError:{}},statics:{_itemHandlers:t}})},{initialize:function(){},_initialize:function(t,e){var r=t&&R.isPlainObject(t),n=r&&t.internal===!0,s=this._matrix=new wt,o=r&&t.project||bt.project,h=bt.settings;return this._id=n?null:ai.get(),this._parent=this._index=null,this._applyMatrix=this._canApplyMatrix&&h.applyMatrix,e&&s.translate(e),s._owner=this,this._style=new _i(o._currentStyle,this,o),n||r&&t.insert==!1||!h.insertItems&&!(r&&t.insert==!0)?this._setProject(o):(r&&t.parent||o)._insertItem(Y,this,!0),r&&t!==P.NO_INSERT&&t!==P.INSERT&&this.set(t,{internal:!0,insert:!0,project:!0,parent:!0}),r},_serialize:function(t,e){var r={},n=this;function s(o){for(var h in o){var u=n[h];R.equals(u,h==="leading"?o.fontSize*1.2:o[h])||(r[h]=R.serialize(u,t,h!=="data",e))}}return s(this._serializeFields),this instanceof Ft||s(this._style._defaults),[this._class,r]},_changed:function(t){var e=this._symbol,r=this._parent||e,n=this._project;t&8&&(this._bounds=this._position=this._decomposed=Y),t&16&&(this._globalMatrix=Y),r&&t&72&&P._clearBoundsCache(r),t&2&&P._clearBoundsCache(this),n&&n._changed(t,this),e&&e._changed(t)},getId:function(){return this._id},getName:function(){return this._name},setName:function(t){if(this._name&&this._removeNamed(),t===+t+"")throw new Error("Names consisting only of numbers are not supported.");var e=this._getOwner();if(t&&e){var r=e._children,n=e._namedChildren;(n[t]=n[t]||[]).push(this),t in r||(r[t]=this)}this._name=t||Y,this._changed(256)},getStyle:function(){return this._style},setStyle:function(t){this.getStyle().set(t)}},R.each(["locked","visible","blendMode","opacity","guide"],function(t){var e=R.capitalize(t),r="_"+t,n={locked:256,visible:265};this["get"+e]=function(){return this[r]},this["set"+e]=function(s){s!=this[r]&&(this[r]=s,this._changed(n[t]||257))}},{}),{beans:!0,getSelection:function(){return this._selection},setSelection:function(t){if(t!==this._selection){this._selection=t;var e=this._project;e&&(e._updateSelection(this),this._changed(257))}},_changeSelection:function(t,e){var r=this._selection;this.setSelection(e?r|t:r&~t)},isSelected:function(){if(this._selectChildren){for(var t=this._children,e=0,r=t.length;e<r;e++)if(t[e].isSelected())return!0}return!!(this._selection&1)},setSelected:function(t){if(this._selectChildren)for(var e=this._children,r=0,n=e.length;r<n;r++)e[r].setSelected(t);this._changeSelection(1,t)},isFullySelected:function(){var t=this._children,e=!!(this._selection&1);if(t&&e){for(var r=0,n=t.length;r<n;r++)if(!t[r].isFullySelected())return!1;return!0}return e},setFullySelected:function(t){var e=this._children;if(e)for(var r=0,n=e.length;r<n;r++)e[r].setFullySelected(t);this._changeSelection(1,t)},isClipMask:function(){return this._clipMask},setClipMask:function(t){this._clipMask!=(t=!!t)&&(this._clipMask=t,t&&(this.setFillColor(null),this.setStrokeColor(null)),this._changed(257),this._parent&&this._parent._changed(2048))},getData:function(){return this._data||(this._data={}),this._data},setData:function(t){this._data=t},getPosition:function(t){var e=t?D:Jt,r=this._position||(this._position=this._getPositionFromBounds());return new e(r.x,r.y,this,"setPosition")},setPosition:function(){this.translate(D.read(arguments).subtract(this.getPosition(!0)))},_getPositionFromBounds:function(t){return this._pivot?this._matrix._transformPoint(this._pivot):(t||this.getBounds()).getCenter(!0)},getPivot:function(){var t=this._pivot;return t?new Jt(t.x,t.y,this,"setPivot"):null},setPivot:function(){this._pivot=D.read(arguments,0,{clone:!0,readNull:!0}),this._position=Y}},R.each({getStrokeBounds:{stroke:!0},getHandleBounds:{handle:!0},getInternalBounds:{internal:!0}},function(t,e){this[e]=function(r){return this.getBounds(r,t)}},{beans:!0,getBounds:function(t,e){var r=e||t instanceof wt,n=R.set({},r?e:t,this._boundsOptions);(!n.stroke||this.getStrokeScaling())&&(n.cacheItem=this);var s=this._getCachedBounds(r&&t,n).rect;return arguments.length?s:new ce(s.x,s.y,s.width,s.height,this,"setBounds")},setBounds:function(){var t=ut.read(arguments),e=this.getBounds(),r=this._matrix,n=new wt,s=t.getCenter();n.translate(s),(t.width!=e.width||t.height!=e.height)&&(r.isInvertible()||(r.set(r._backup||new wt().translate(r.getTranslation())),e=this.getBounds()),n.scale(e.width!==0?t.width/e.width:0,e.height!==0?t.height/e.height:0)),s=e.getCenter(),n.translate(-s.x,-s.y),this.transform(n)},_getBounds:function(t,e){var r=this._children;return!r||!r.length?new ut:(P._updateBoundsCache(this,e.cacheItem),P._getBounds(r,t,e))},_getBoundsCacheKey:function(t,e){return[t.stroke?1:0,t.handle?1:0,e?1:0].join("")},_getCachedBounds:function(t,e,r){t=t&&t._orNullIfIdentity();var n=e.internal&&!r,s=e.cacheItem,o=n?null:this._matrix._orNullIfIdentity(),h=s&&(!t||t.equals(o))&&this._getBoundsCacheKey(e,n),u=this._bounds;if(P._updateBoundsCache(this._parent||this._symbol,s),h&&u&&h in u){var l=u[h];return{rect:l.rect.clone(),nonscaling:l.nonscaling}}var f=this._getBounds(t||o,e),v=f.rect||f,m=this._style,d=f.nonscaling||m.hasStroke()&&!m.getStrokeScaling();if(h){u||(this._bounds=u={});var l=u[h]={rect:v.clone(),nonscaling:d,internal:n}}return{rect:v,nonscaling:d}},_getStrokeMatrix:function(t,e){var r=this.getStrokeScaling()?null:e&&e.internal?this:this._parent||this._symbol&&this._symbol._item,n=r?r.getViewMatrix().invert():t;return n&&n._shiftless()},statics:{_updateBoundsCache:function(t,e){if(t&&e){var r=e._id,n=t._boundsCache=t._boundsCache||{ids:{},list:[]};n.ids[r]||(n.list.push(e),n.ids[r]=e)}},_clearBoundsCache:function(t){var e=t._boundsCache;if(e){t._bounds=t._position=t._boundsCache=Y;for(var r=0,n=e.list,s=n.length;r<s;r++){var o=n[r];o!==t&&(o._bounds=o._position=Y,o._boundsCache&&P._clearBoundsCache(o))}}},_getBounds:function(t,e,r){var n=1/0,s=-n,o=n,h=s,u=!1;r=r||{};for(var l=0,f=t.length;l<f;l++){var v=t[l];if(v._visible&&!v.isEmpty(!0)){var m=v._getCachedBounds(e&&e.appended(v._matrix),r,!0),d=m.rect;n=Math.min(d.x,n),o=Math.min(d.y,o),s=Math.max(d.x+d.width,s),h=Math.max(d.y+d.height,h),m.nonscaling&&(u=!0)}}return{rect:isFinite(n)?new ut(n,o,s-n,h-o):new ut,nonscaling:u}}}}),{beans:!0,_decompose:function(){return this._applyMatrix?null:this._decomposed||(this._decomposed=this._matrix.decompose())},getRotation:function(){var t=this._decompose();return t?t.rotation:0},setRotation:function(t){var e=this.getRotation();if(e!=null&&t!=null){var r=this._decomposed;this.rotate(t-e),r&&(r.rotation=t,this._decomposed=r)}},getScaling:function(){var t=this._decompose(),e=t&&t.scaling;return new Jt(e?e.x:1,e?e.y:1,this,"setScaling")},setScaling:function(){var t=this.getScaling(),e=D.read(arguments,0,{clone:!0,readNull:!0});if(t&&e&&!t.equals(e)){var r=this.getRotation(),n=this._decomposed,s=new wt,o=At.isZero;if(o(t.x)||o(t.y))s.translate(n.translation),r&&s.rotate(r),s.scale(e.x,e.y),this._matrix.set(s);else{var h=this.getPosition(!0);s.translate(h),r&&s.rotate(r),s.scale(e.x/t.x,e.y/t.y),r&&s.rotate(-r),s.translate(h.negate()),this.transform(s)}n&&(n.scaling=e,this._decomposed=n)}},getMatrix:function(){return this._matrix},setMatrix:function(){var t=this._matrix;t.set.apply(t,arguments)},getGlobalMatrix:function(t){var e=this._globalMatrix;if(e)for(var r=this._parent,n=[];r;){if(!r._globalMatrix){e=null;for(var s=0,o=n.length;s<o;s++)n[s]._globalMatrix=null;break}n.push(r),r=r._parent}if(!e){e=this._globalMatrix=this._matrix.clone();var r=this._parent;r&&e.prepend(r.getGlobalMatrix(!0))}return t?e:e.clone()},getViewMatrix:function(){return this.getGlobalMatrix().prepend(this.getView()._matrix)},getApplyMatrix:function(){return this._applyMatrix},setApplyMatrix:function(t){(this._applyMatrix=this._canApplyMatrix&&!!t)&&this.transform(null,!0)},getTransformContent:"#getApplyMatrix",setTransformContent:"#setApplyMatrix"},{getProject:function(){return this._project},_setProject:function(t,e){if(this._project!==t){this._project&&this._installEvents(!1),this._project=t;for(var r=this._children,n=0,s=r&&r.length;n<s;n++)r[n]._setProject(t);e=!0}e&&this._installEvents(!0)},getView:function(){return this._project._view},_installEvents:function t(e){t.base.call(this,e);for(var r=this._children,n=0,s=r&&r.length;n<s;n++)r[n]._installEvents(e)},getLayer:function(){for(var t=this;t=t._parent;)if(t instanceof Re)return t;return null},getParent:function(){return this._parent},setParent:function(t){return t.addChild(this)},_getOwner:"#getParent",getChildren:function(){return this._children},setChildren:function(t){this.removeChildren(),this.addChildren(t)},getFirstChild:function(){return this._children&&this._children[0]||null},getLastChild:function(){return this._children&&this._children[this._children.length-1]||null},getNextSibling:function(){var t=this._getOwner();return t&&t._children[this._index+1]||null},getPreviousSibling:function(){var t=this._getOwner();return t&&t._children[this._index-1]||null},getIndex:function(){return this._index},setIndex:function(t){var e=this._parent,r=e&&e._children;r&&e.insertChildren(t in r?t:Y,[this])},equals:function(t){return t===this||t&&this._class===t._class&&this._style.equals(t._style)&&this._matrix.equals(t._matrix)&&this._locked===t._locked&&this._visible===t._visible&&this._blendMode===t._blendMode&&this._opacity===t._opacity&&this._clipMask===t._clipMask&&this._guide===t._guide&&this._equals(t)||!1},_equals:function(t){return R.equals(this._children,t._children)},clone:function(t){var e=new this.constructor(P.NO_INSERT),r=this._children,n=R.pick(t?t.insert:Y,t===Y||t===!0),s=R.pick(t?t.deep:Y,!0);r&&e.copyAttributes(this),(!r||s)&&e.copyContent(this),r||e.copyAttributes(this),n&&e.insertAbove(this);var o=this._name,h=this._parent;if(o&&h){for(var r=h._children,u=o,l=1;r[o];)o=u+" "+l++;o!==u&&e.setName(o)}return e},copyContent:function(t){for(var e=t._children,r=0,n=e&&e.length;r<n;r++)this.addChild(e[r].clone(!1),!0)},copyAttributes:function(t,e){this.setStyle(t._style);for(var r=["_locked","_visible","_blendMode","_opacity","_clipMask","_guide"],n=0,s=r.length;n<s;n++){var o=r[n];t.hasOwnProperty(o)&&(this[o]=t[o])}e||this._matrix.set(t._matrix,!0),this.setApplyMatrix(t._applyMatrix),this.setPivot(t._pivot),this.setSelection(t._selection);var h=t._data,u=t._name;this._data=h?R.clone(h):null,u&&this.setName(u)},rasterize:function(t,e){var r,n,s;R.isPlainObject(t)?(r=t.resolution,n=t.insert,s=t.raster):(r=t,n=e),s||(s=new ze(P.NO_INSERT));var o=this.getStrokeBounds(),h=(r||this.getView().getResolution())/72,u=o.getTopLeft().floor(),l=o.getBottomRight().ceil(),f=new ht(l.subtract(u)),v=f.multiply(h);if(s.setSize(v,!0),!v.isZero()){var m=s.getContext(!0),d=new wt().scale(h).translate(u.negate());m.save(),d.applyToContext(m),this.draw(m,new R({matrices:[d]})),m.restore()}return s._matrix.set(new wt().translate(u.add(f.divide(2))).scale(1/h)),(n===Y||n)&&s.insertAbove(this),s},contains:function(){var t=this._matrix;return t.isInvertible()&&!!this._contains(t._inverseTransform(D.read(arguments)))},_contains:function(t){var e=this._children;if(e){for(var r=e.length-1;r>=0;r--)if(e[r].contains(t))return!0;return!1}return t.isInside(this.getInternalBounds())},isInside:function(){return ut.read(arguments).contains(this.getBounds())},_asPathItem:function(){return new Ct.Rectangle({rectangle:this.getInternalBounds(),matrix:this._matrix,insert:!1})},intersects:function(t,e){return t instanceof P?this._asPathItem().getIntersections(t._asPathItem(),null,e,!0).length>0:!1}},new function(){function t(){var n=arguments;return this._hitTest(D.read(n),xe.getOptions(n))}function e(){var n=arguments,s=D.read(n),o=xe.getOptions(n),h=[];return this._hitTest(s,new R({all:h},o)),h}function r(n,s,o,h){var u=this._children;if(u)for(var l=u.length-1;l>=0;l--){var f=u[l],v=f!==h&&f._hitTest(n,s,o);if(v&&!s.all)return v}return null}return It.inject({hitTest:t,hitTestAll:e,_hitTest:r}),{hitTest:t,hitTestAll:e,_hitTestChildren:r}},{_hitTest:function(t,e,r){if(this._locked||!this._visible||this._guide&&!e.guides||this.isEmpty())return null;var n=this._matrix,s=r?r.appended(n):this.getGlobalMatrix().prepend(this.getView()._matrix),o=Math.max(e.tolerance,1e-12),h=e._tolerancePadding=new ht(Ct._getStrokePadding(o,n._shiftless().invert()));if(t=n._inverseTransform(t),!t||!this._children&&!this.getBounds({internal:!0,stroke:!0,handle:!0}).expand(h.multiply(2))._containsPoint(t))return null;var u=!(e.guides&&!this._guide||e.selected&&!this.isSelected()||e.type&&e.type!==R.hyphenate(this._class)||e.class&&!(this instanceof e.class)),l=e.match,f=this,v,m;function d(c){return c&&l&&!l(c)&&(c=null),c&&e.all&&e.all.push(c),c}function p(c,x){var I=x?v["get"+x]():f.getPosition();if(t.subtract(I).divide(h).length<=1)return new xe(c,f,{name:x?R.hyphenate(x):c,point:I})}var k=e.position,y=e.center,S=e.bounds;if(u&&this._parent&&(k||y||S)){if((y||S)&&(v=this.getInternalBounds()),m=k&&p("position")||y&&p("center","Center"),!m&&S)for(var g=["TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],w=0;w<8&&!m;w++)m=p("bounds",g[w]);m=d(m)}return m||(m=this._hitTestChildren(t,e,s)||u&&d(this._hitTestSelf(t,e,s,this.getStrokeScaling()?null:s._shiftless().invert()))||null),m&&m.point&&(m.point=n.transform(m.point)),m},_hitTestSelf:function(t,e){if(e.fill&&this.hasFill()&&this._contains(t))return new xe("fill",this)},matches:function(t,e){function r(h,u){for(var l in h)if(h.hasOwnProperty(l)){var f=h[l],v=u[l];if(R.isPlainObject(f)&&R.isPlainObject(v)){if(!r(f,v))return!1}else if(!R.equals(f,v))return!1}return!0}var n=typeof t;if(n==="object"){for(var s in t)if(t.hasOwnProperty(s)&&!this.matches(s,t[s]))return!1;return!0}else{if(n==="function")return t(this);if(t==="match")return e(this);var o=/^(empty|editable)$/.test(t)?this["is"+R.capitalize(t)]():t==="type"?R.hyphenate(this._class):this[t];if(t==="class"){if(typeof e=="function")return this instanceof e;o=this._class}if(typeof e=="function")return!!e(o);if(e){if(e.test)return e.test(o);if(R.isPlainObject(e))return r(e,o)}return R.equals(o,e)}},getItems:function(t){return P._getItems(this,t,this._matrix)},getItem:function(t){return P._getItems(this,t,this._matrix,null,!0)[0]||null},statics:{_getItems:function t(e,r,n,s,o){if(!s){var h=typeof r=="object"&&r,u=h&&h.overlapping,l=h&&h.inside,f=u||l,d=f&&ut.read([f]);s={items:[],recursive:h&&h.recursive!==!1,inside:!!l,overlapping:!!u,rect:d,path:u&&new Ct.Rectangle({rectangle:d,insert:!1})},h&&(r=R.filter({},r,{recursive:!0,inside:!0,overlapping:!0}))}var v=e._children,m=s.items,d=s.rect;n=d&&(n||new wt);for(var p=0,k=v&&v.length;p<k;p++){var y=v[p],S=n&&n.appended(y._matrix),g=!0;if(d){var f=y.getBounds(S);if(!d.intersects(f))continue;d.contains(f)||s.overlapping&&(f.contains(d)||s.path.intersects(y,S))||(g=!1)}if(g&&y.matches(r)&&(m.push(y),o)||(s.recursive!==!1&&t(y,r,S,s,o),o&&m.length>0))break}return m}}},{importJSON:function(t){var e=R.importJSON(t,this);return e!==this?this.addChild(e):e},addChild:function(t){return this.insertChild(Y,t)},insertChild:function(t,e){var r=e?this.insertChildren(t,[e]):null;return r&&r[0]},addChildren:function(t){return this.insertChildren(this._children.length,t)},insertChildren:function(t,e){var r=this._children;if(r&&e&&e.length>0){e=R.slice(e);for(var n={},s=e.length-1;s>=0;s--){var o=e[s],h=o&&o._id;!o||n[h]?e.splice(s,1):(o._remove(!1,!0),n[h]=!0)}R.splice(r,e,t,0);for(var u=this._project,l=u._changes,s=0,f=e.length;s<f;s++){var o=e[s],v=o._name;o._parent=this,o._setProject(u,!0),v&&o.setName(v),l&&o._changed(5)}this._changed(11)}else e=null;return e},_insertItem:"#insertChild",_insertAt:function(t,e){var r=t&&t._getOwner(),n=t!==this&&r?this:null;return n&&(n._remove(!1,!0),r._insertItem(t._index+e,n)),n},insertAbove:function(t){return this._insertAt(t,1)},insertBelow:function(t){return this._insertAt(t,0)},sendToBack:function(){var t=this._getOwner();return t?t._insertItem(0,this):null},bringToFront:function(){var t=this._getOwner();return t?t._insertItem(Y,this):null},appendTop:"#addChild",appendBottom:function(t){return this.insertChild(0,t)},moveAbove:"#insertAbove",moveBelow:"#insertBelow",addTo:function(t){return t._insertItem(Y,this)},copyTo:function(t){return this.clone(!1).addTo(t)},reduce:function(t){var e=this._children;if(e&&e.length===1){var r=e[0].reduce(t);return this._parent?(r.insertAbove(this),this.remove()):r.remove(),r}return this},_removeNamed:function(){var t=this._getOwner();if(t){var e=t._children,r=t._namedChildren,n=this._name,s=r[n],o=s?s.indexOf(this):-1;o!==-1&&(e[n]==this&&delete e[n],s.splice(o,1),s.length?e[n]=s[0]:delete r[n])}},_remove:function(t,e){var r=this._getOwner(),n=this._project,s=this._index;return this._style&&this._style._dispose(),r?(this._name&&this._removeNamed(),s!=null&&(n._activeLayer===this&&(n._activeLayer=this.getNextSibling()||this.getPreviousSibling()),R.splice(r._children,null,s,1)),this._installEvents(!1),t&&n._changes&&this._changed(5),e&&r._changed(11,this),this._parent=null,!0):!1},remove:function(){return this._remove(!0,!0)},replaceWith:function(t){var e=t&&t.insertBelow(this);return e&&this.remove(),e},removeChildren:function(t,e){if(!this._children)return null;t=t||0,e=R.pick(e,this._children.length);for(var r=R.splice(this._children,null,t,e-t),n=r.length-1;n>=0;n--)r[n]._remove(!0,!1);return r.length>0&&this._changed(11),r},clear:"#removeChildren",reverseChildren:function(){if(this._children){this._children.reverse();for(var t=0,e=this._children.length;t<e;t++)this._children[t]._index=t;this._changed(11)}},isEmpty:function(t){var e=this._children,r=e?e.length:0;if(t){for(var n=0;n<r;n++)if(!e[n].isEmpty(t))return!1;return!0}return!r},isEditable:function(){for(var t=this;t;){if(!t._visible||t._locked)return!1;t=t._parent}return!0},hasFill:function(){return this.getStyle().hasFill()},hasStroke:function(){return this.getStyle().hasStroke()},hasShadow:function(){return this.getStyle().hasShadow()},_getOrder:function(t){function e(h){var u=[];do u.unshift(h);while(h=h._parent);return u}for(var r=e(this),n=e(t),s=0,o=Math.min(r.length,n.length);s<o;s++)if(r[s]!=n[s])return r[s]._index<n[s]._index?1:-1;return 0},hasChildren:function(){return this._children&&this._children.length>0},isInserted:function(){return this._parent?this._parent.isInserted():!1},isAbove:function(t){return this._getOrder(t)===-1},isBelow:function(t){return this._getOrder(t)===1},isParent:function(t){return this._parent===t},isChild:function(t){return t&&t._parent===this},isDescendant:function(t){for(var e=this;e=e._parent;)if(e===t)return!0;return!1},isAncestor:function(t){return t?t.isDescendant(this):!1},isSibling:function(t){return this._parent===t._parent},isGroupedWith:function(t){for(var e=this._parent;e;){if(e._parent&&/^(Group|Layer|CompoundPath)$/.test(e._class)&&t.isDescendant(e))return!0;e=e._parent}return!1}},R.each(["rotate","scale","shear","skew"],function(t){var e=t==="rotate";this[t]=function(){var r=arguments,n=(e?R:D).read(r),s=D.read(r,0,{readNull:!0});return this.transform(new wt()[t](n,s||this.getPosition(!0)))}},{translate:function(){var t=new wt;return this.transform(t.translate.apply(t,arguments))},transform:function(t,e,r){var n=this._matrix,s=t&&!t.isIdentity(),o=r&&this._canApplyMatrix||this._applyMatrix&&(s||!n.isIdentity()||e&&this._children);if(!s&&!o)return this;if(s){!t.isInvertible()&&n.isInvertible()&&(n._backup=n.getValues()),n.prepend(t,!0);var h=this._style,u=h.getFillColor(!0),l=h.getStrokeColor(!0);u&&u.transform(t),l&&l.transform(t)}if(o&&(o=this._transformContent(n,e,r))){var f=this._pivot;f&&n._transformPoint(f,f,!0),n.reset(!0),r&&this._canApplyMatrix&&(this._applyMatrix=!0)}var v=this._bounds,m=this._position;(s||o)&&this._changed(25);var d=s&&v&&t.decompose();if(d&&d.skewing.isZero()&&d.rotation%90===0){for(var p in v){var k=v[p];if(k.nonscaling)delete v[p];else if(o||!k.internal){var y=k.rect;t._transformBounds(y,y)}}this._bounds=v;var S=v[this._getBoundsCacheKey(this._boundsOptions||{})];S&&(this._position=this._getPositionFromBounds(S.rect))}else s&&m&&this._pivot&&(this._position=t._transformPoint(m,m));return this},_transformContent:function(t,e,r){var n=this._children;if(n){for(var s=0,o=n.length;s<o;s++)n[s].transform(t,e,r);return!0}},globalToLocal:function(){return this.getGlobalMatrix(!0)._inverseTransform(D.read(arguments))},localToGlobal:function(){return this.getGlobalMatrix(!0)._transformPoint(D.read(arguments))},parentToLocal:function(){return this._matrix._inverseTransform(D.read(arguments))},localToParent:function(){return this._matrix._transformPoint(D.read(arguments))},fitBounds:function(t,e){t=ut.read(arguments);var r=this.getBounds(),n=r.height/r.width,s=t.height/t.width,o=(e?n>s:n<s)?t.width/r.width:t.height/r.height,h=new ut(new D,new ht(r.width*o,r.height*o));h.setCenter(t.getCenter()),this.setBounds(h)}}),{_setStyles:function(t,e,r){var n=this._style,s=this._matrix;if(n.hasFill()&&(t.fillStyle=n.getFillColor().toCanvasStyle(t,s)),n.hasStroke()){t.strokeStyle=n.getStrokeColor().toCanvasStyle(t,s),t.lineWidth=n.getStrokeWidth();var o=n.getStrokeJoin(),h=n.getStrokeCap(),u=n.getMiterLimit();if(o&&(t.lineJoin=o),h&&(t.lineCap=h),u&&(t.miterLimit=u),bt.support.nativeDash){var l=n.getDashArray(),f=n.getDashOffset();l&&l.length&&("setLineDash"in t?(t.setLineDash(l),t.lineDashOffset=f):(t.mozDash=l,t.mozDashOffset=f))}}if(n.hasShadow()){var v=e.pixelRatio||1,m=r._shiftless().prepend(new wt().scale(v,v)),d=m.transform(new D(n.getShadowBlur(),0)),p=m.transform(this.getShadowOffset());t.shadowColor=n.getShadowColor().toCanvasStyle(t),t.shadowBlur=d.getLength(),t.shadowOffsetX=p.x,t.shadowOffsetY=p.y}},draw:function(t,e,r){if(this._updateVersion=this._project._updateVersion,!(!this._visible||this._opacity===0)){var n=e.matrices,s=e.viewMatrix,o=this._matrix,h=n[n.length-1].appended(o);if(h.isInvertible()){s=s?s.appended(h):h,n.push(h),e.updateMatrix&&(this._globalMatrix=h);var u=this._blendMode,l=At.clamp(this._opacity,0,1),f=u==="normal",v=Qe.nativeModes[u],m=f&&l===1||e.dontStart||e.clip||(v||f&&l<1)&&this._canComposite(),d=e.pixelRatio||1,p,k,y;if(!m){var S=this.getStrokeBounds(s);if(!S.width||!S.height){n.pop();return}y=e.offset,k=e.offset=S.getTopLeft().floor(),p=t,t=Ht.getContext(S.getSize().ceil().add(1).multiply(d)),d!==1&&t.scale(d,d)}t.save();var g=r?r.appended(o):this._canScaleStroke&&!this.getStrokeScaling(!0)&&s,w=!m&&e.clipItem,c=!g||w;if(m?(t.globalAlpha=l,v&&(t.globalCompositeOperation=u)):c&&t.translate(-k.x,-k.y),c&&(m?o:s).applyToContext(t),w&&e.clipItem.draw(t,e.extend({clip:!0})),g){t.setTransform(d,0,0,d,0,0);var x=e.offset;x&&t.translate(-x.x,-x.y)}this._draw(t,e,s,g),t.restore(),n.pop(),e.clip&&!e.dontFinish&&t.clip(this.getFillRule()),m||(Qe.process(u,t,p,l,k.subtract(y).multiply(d)),Ht.release(t),e.offset=y)}}},_isUpdated:function(t){var e=this._parent;if(e instanceof $t)return e._isUpdated(t);var r=this._updateVersion===t;return!r&&e&&e._visible&&e._isUpdated(t)&&(this._updateVersion=t,r=!0),r},_drawSelection:function(t,e,r,n,s){var o=this._selection,h=o&1,u=o&2||h&&this._selectBounds,l=o&4;if(this._drawSelected||(h=!1),(h||u||l)&&this._isUpdated(s)){var f,v=this.getSelectedColor(!0)||(f=this.getLayer())&&f.getSelectedColor(!0),m=e.appended(this.getGlobalMatrix(!0)),d=r/2;if(t.strokeStyle=t.fillStyle=v?v.toCanvasStyle(t):"#009dec",h&&this._drawSelected(t,m,n),l){var p=this.getPosition(!0),k=this._parent,y=k?k.localToGlobal(p):p,S=y.x,g=y.y;t.beginPath(),t.arc(S,g,d,0,Math.PI*2,!0),t.stroke();for(var w=[[0,-1],[1,0],[0,1],[-1,0]],c=d,x=r+1,I=0;I<4;I++){var A=w[I],b=A[0],E=A[1];t.moveTo(S+b*c,g+E*c),t.lineTo(S+b*x,g+E*x),t.stroke()}}if(u){var N=m._transformCorners(this.getInternalBounds());t.beginPath();for(var I=0;I<8;I++)t[I?"lineTo":"moveTo"](N[I],N[++I]);t.closePath(),t.stroke();for(var I=0;I<8;I++)t.fillRect(N[I]-d,N[++I]-d,r,r)}}},_canComposite:function(){return!1}},R.each(["down","drag","up","move"],function(t){this["removeOn"+R.capitalize(t)]=function(){var e={};return e[t]=!0,this.removeOn(e)}},{removeOn:function(t){for(var e in t)if(t[e]){var r="mouse"+e,n=this._project,s=n._removeSets=n._removeSets||{};s[r]=s[r]||{},s[r][this._id]=this}return this}}),{tween:function(t,e,r){r||(r=e,e=t,t=null,r||(r=e,e=null));var n=r&&r.easing,s=r&&r.start,o=r!=null&&(typeof r=="number"?r:r.duration),h=new oi(this,t,e,o,n,s);function u(l){h._handleFrame(l.time*1e3),h.running||this.off("frame",u)}return o&&this.on("frame",u),h},tweenTo:function(t,e){return this.tween(null,t,e)},tweenFrom:function(t,e){return this.tween(t,null,e)}}),Ft=P.extend({_class:"Group",_selectBounds:!1,_selectChildren:!0,_serializeFields:{children:[]},initialize:function(e){this._children=[],this._namedChildren={},this._initialize(e)||this.addChildren(Array.isArray(e)?e:arguments)},_changed:function t(e){t.base.call(this,e),e&2050&&(this._clipItem=Y)},_getClipItem:function(){var t=this._clipItem;if(t===Y){t=null;for(var e=this._children,r=0,n=e.length;r<n;r++)if(e[r]._clipMask){t=e[r];break}this._clipItem=t}return t},isClipped:function(){return!!this._getClipItem()},setClipped:function(t){var e=this.getFirstChild();e&&e.setClipMask(t)},_getBounds:function t(e,r){var n=this._getClipItem();return n?n._getCachedBounds(n._matrix.prepended(e),R.set({},r,{stroke:!1})):t.base.call(this,e,r)},_hitTestChildren:function t(e,r,n){var s=this._getClipItem();return(!s||s.contains(e))&&t.base.call(this,e,r,n,s)},_draw:function(t,e){var r=e.clip,n=!r&&this._getClipItem();e=e.extend({clipItem:n,clip:!1}),r?(t.beginPath(),e.dontStart=e.dontFinish=!0):n&&n.draw(t,e.extend({clip:!0}));for(var s=this._children,o=0,h=s.length;o<h;o++){var u=s[o];u!==n&&u.draw(t,e)}}}),Re=Ft.extend({_class:"Layer",initialize:function(){Ft.apply(this,arguments)},_getOwner:function(){return this._parent||this._index!=null&&this._project},isInserted:function t(){return this._parent?t.base.call(this):this._index!=null},activate:function(){this._project._activeLayer=this},_hitTestSelf:function(){}}),Kt=P.extend({_class:"Shape",_applyMatrix:!1,_canApplyMatrix:!1,_canScaleStroke:!0,_serializeFields:{type:null,size:null,radius:null},initialize:function(e,r){this._initialize(e,r)},_equals:function(t){return this._type===t._type&&this._size.equals(t._size)&&R.equals(this._radius,t._radius)},copyContent:function(t){this.setType(t._type),this.setSize(t._size),this.setRadius(t._radius)},getType:function(){return this._type},setType:function(t){this._type=t},getShape:"#getType",setShape:"#setType",getSize:function(){var t=this._size;return new kt(t.width,t.height,this,"setSize")},setSize:function(){var t=ht.read(arguments);if(!this._size)this._size=t.clone();else if(!this._size.equals(t)){var e=this._type,r=t.width,n=t.height;e==="rectangle"?this._radius.set(ht.min(this._radius,t.divide(2).abs())):e==="circle"?(r=n=(r+n)/2,this._radius=r/2):e==="ellipse"&&this._radius._set(r/2,n/2),this._size._set(r,n),this._changed(9)}},getRadius:function(){var t=this._radius;return this._type==="circle"?t:new kt(t.width,t.height,this,"setRadius")},setRadius:function(t){var e=this._type;if(e==="circle"){if(t===this._radius)return;var r=t*2;this._radius=t,this._size._set(r,r)}else if(t=ht.read(arguments),!this._radius)this._radius=t.clone();else{if(this._radius.equals(t))return;if(this._radius.set(t),e==="rectangle"){var r=ht.max(this._size,t.multiply(2));this._size.set(r)}else e==="ellipse"&&this._size._set(t.width*2,t.height*2)}this._changed(9)},isEmpty:function(){return!1},toPath:function(t){var e=new Ct[R.capitalize(this._type)]({center:new D,size:this._size,radius:this._radius,insert:!1});return e.copyAttributes(this),bt.settings.applyMatrix&&e.setApplyMatrix(!0),(t===Y||t)&&e.insertAbove(this),e},toShape:"#clone",_asPathItem:function(){return this.toPath(!1)},_draw:function(t,e,r,n){var s=this._style,o=s.hasFill(),h=s.hasStroke(),u=e.dontFinish||e.clip,l=!n;if(o||h||u){var f=this._type,v=this._radius,m=f==="circle";if(e.dontStart||t.beginPath(),l&&m)t.arc(0,0,v,0,Math.PI*2,!0);else{var d=m?v:v.width,p=m?v:v.height,k=this._size,y=k.width,S=k.height;if(l&&f==="rectangle"&&d===0&&p===0)t.rect(-y/2,-S/2,y,S);else{var g=y/2,w=S/2,c=1-.5522847498307936,x=d*c,I=p*c,A=[-g,-w+p,-g,-w+I,-g+x,-w,-g+d,-w,g-d,-w,g-x,-w,g,-w+I,g,-w+p,g,w-p,g,w-I,g-x,w,g-d,w,-g+d,w,-g+x,w,-g,w-I,-g,w-p];n&&n.transform(A,A,32),t.moveTo(A[0],A[1]),t.bezierCurveTo(A[2],A[3],A[4],A[5],A[6],A[7]),g!==d&&t.lineTo(A[8],A[9]),t.bezierCurveTo(A[10],A[11],A[12],A[13],A[14],A[15]),w!==p&&t.lineTo(A[16],A[17]),t.bezierCurveTo(A[18],A[19],A[20],A[21],A[22],A[23]),g!==d&&t.lineTo(A[24],A[25]),t.bezierCurveTo(A[26],A[27],A[28],A[29],A[30],A[31])}}t.closePath()}!u&&(o||h)&&(this._setStyles(t,e,r),o&&(t.fill(s.getFillRule()),t.shadowColor="rgba(0,0,0,0)"),h&&t.stroke())},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_getBounds:function(t,e){var r=new ut(this._size).setCenter(0,0),n=this._style,s=e.stroke&&n.hasStroke()&&n.getStrokeWidth();return t&&(r=t._transformBounds(r)),s?r.expand(Ct._getStrokePadding(s,this._getStrokeMatrix(t,e))):r}},new function(){function t(r,n,s){var o=r._radius;if(!o.isZero())for(var h=r._size.divide(2),u=1;u<=4;u++){var l=new D(u>1&&u<4?-1:1,u>2?-1:1),f=l.multiply(h),v=f.subtract(l.multiply(o)),m=new ut(s?f.add(l.multiply(s)):f,v);if(m.contains(n))return{point:v,quadrant:u}}}function e(r,n,s,o){var h=r.divide(n);return(!o||h.isInQuadrant(o))&&h.subtract(h.normalize()).multiply(n).divide(s).length<=1}return{_contains:function r(n){if(this._type==="rectangle"){var s=t(this,n);return s?n.subtract(s.point).divide(this._radius).getLength()<=1:r.base.call(this,n)}else return n.divide(this.size).getLength()<=.5},_hitTestSelf:function r(n,s,o,h){var u=!1,l=this._style,f=s.stroke&&l.hasStroke(),v=s.fill&&l.hasFill();if(f||v){var m=this._type,d=this._radius,p=f?l.getStrokeWidth()/2:0,k=s._tolerancePadding.add(Ct._getStrokePadding(p,!l.getStrokeScaling()&&h));if(m==="rectangle"){var y=k.multiply(2),S=t(this,n,y);if(S)u=e(n.subtract(S.point),d,k,S.quadrant);else{var g=new ut(this._size).setCenter(0,0),w=g.expand(y),c=g.expand(y.negate());u=w._containsPoint(n)&&!c._containsPoint(n)}}else u=e(n,d,k)}return u?new xe(f?"stroke":"fill",this):r.base.apply(this,arguments)}}},{statics:new function(){function t(e,r,n,s,o){var h=R.create(Kt.prototype);return h._type=e,h._size=n,h._radius=s,h._initialize(R.getNamed(o),r),h}return{Circle:function(){var e=arguments,r=D.readNamed(e,"center"),n=R.readNamed(e,"radius");return t("circle",r,new ht(n*2),n,e)},Rectangle:function(){var e=arguments,r=ut.readNamed(e,"rectangle"),n=ht.min(ht.readNamed(e,"radius"),r.getSize(!0).divide(2));return t("rectangle",r.getCenter(!0),r.getSize(!0),n,e)},Ellipse:function(){var e=arguments,r=Kt._readEllipse(e),n=r.radius;return t("ellipse",r.center,n.multiply(2),n,e)},_readEllipse:function(e){var r,n;if(R.hasNamed(e,"radius"))r=D.readNamed(e,"center"),n=ht.readNamed(e,"radius");else{var s=ut.readNamed(e,"rectangle");r=s.getCenter(!0),n=s.getSize(!0).divide(2)}return{center:r,radius:n}}}}}),ze=P.extend({_class:"Raster",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!1,handle:!1},_serializeFields:{crossOrigin:null,source:null},_prioritize:["crossOrigin"],_smoothing:"low",beans:!0,initialize:function(e,r){if(!this._initialize(e,r!==Y&&D.read(arguments))){var n,s=typeof e,o=s==="string"?Tt.getElementById(e):s==="object"?e:null;if(o&&o!==P.NO_INSERT){if(o.getContext||o.naturalHeight!=null)n=o;else if(o){var h=ht.read(arguments);h.isZero()||(n=Ht.getCanvas(h))}}n?this.setImage(n):this.setSource(e)}this._size||(this._size=new ht,this._loaded=!1)},_equals:function(t){return this.getSource()===t.getSource()},copyContent:function(t){var e=t._image,r=t._canvas;if(e)this._setImage(e);else if(r){var n=Ht.getCanvas(t._size);n.getContext("2d").drawImage(r,0,0),this._setImage(n)}this._crossOrigin=t._crossOrigin},getSize:function(){var t=this._size;return new kt(t?t.width:0,t?t.height:0,this,"setSize")},setSize:function(t,e){var r=ht.read(arguments);if(r.equals(this._size))e&&this.clear();else if(r.width>0&&r.height>0){var n=!e&&this.getElement();this._setImage(Ht.getCanvas(r)),n&&this.getContext(!0).drawImage(n,0,0,r.width,r.height)}else this._canvas&&Ht.release(this._canvas),this._size=r.clone()},getWidth:function(){return this._size?this._size.width:0},setWidth:function(t){this.setSize(t,this.getHeight())},getHeight:function(){return this._size?this._size.height:0},setHeight:function(t){this.setSize(this.getWidth(),t)},getLoaded:function(){return this._loaded},isEmpty:function(){var t=this._size;return!t||t.width===0&&t.height===0},getResolution:function(){var t=this._matrix,e=new D(0,0).transform(t),r=new D(1,0).transform(t).subtract(e),n=new D(0,1).transform(t).subtract(e);return new ht(72/r.getLength(),72/n.getLength())},getPpi:"#getResolution",getImage:function(){return this._image},setImage:function(t){var e=this;function r(n){var s=e.getView(),o=n&&n.type||"load";s&&e.responds(o)&&(bt=s._scope,e.emit(o,new Fe(n)))}this._setImage(t),this._loaded?setTimeout(r,0):t&&Rt.add(t,{load:function(n){e._setImage(t),r(n)},error:r})},_setImage:function(t){this._canvas&&Ht.release(this._canvas),t&&t.getContext?(this._image=null,this._canvas=t,this._loaded=!0):(this._image=t,this._canvas=null,this._loaded=!!(t&&t.src&&t.complete)),this._size=new ht(t?t.naturalWidth||t.width:0,t?t.naturalHeight||t.height:0),this._context=null,this._changed(1033)},getCanvas:function(){if(!this._canvas){var t=Ht.getContext(this._size);try{this._image&&t.drawImage(this._image,0,0),this._canvas=t.canvas}catch{Ht.release(t)}}return this._canvas},setCanvas:"#setImage",getContext:function(t){return this._context||(this._context=this.getCanvas().getContext("2d")),t&&(this._image=null,this._changed(1025)),this._context},setContext:function(t){this._context=t},getSource:function(){var t=this._image;return t&&t.src||this.toDataURL()},setSource:function(t){var e=new ye.Image,r=this._crossOrigin;r&&(e.crossOrigin=r),t&&(e.src=t),this.setImage(e)},getCrossOrigin:function(){var t=this._image;return t&&t.crossOrigin||this._crossOrigin||""},setCrossOrigin:function(t){this._crossOrigin=t;var e=this._image;e&&(e.crossOrigin=t)},getSmoothing:function(){return this._smoothing},setSmoothing:function(t){this._smoothing=typeof t=="string"?t:t?"low":"off",this._changed(257)},getElement:function(){return this._canvas||this._loaded&&this._image}},{beans:!1,getSubCanvas:function(){var t=ut.read(arguments),e=Ht.getContext(t.getSize());return e.drawImage(this.getCanvas(),t.x,t.y,t.width,t.height,0,0,t.width,t.height),e.canvas},getSubRaster:function(){var t=ut.read(arguments),e=new ze(P.NO_INSERT);return e._setImage(this.getSubCanvas(t)),e.translate(t.getCenter().subtract(this.getSize().divide(2))),e._matrix.prepend(this._matrix),e.insertAbove(this),e},toDataURL:function(){var t=this._image,e=t&&t.src;if(/^data:/.test(e))return e;var r=this.getCanvas();return r?r.toDataURL.apply(r,arguments):null},drawImage:function(t){var e=D.read(arguments,1);this.getContext(!0).drawImage(t,e.x,e.y)},getAverageColor:function(t){var e,r;if(t?t instanceof Ee?(r=t,e=t.getBounds()):typeof t=="object"&&("width"in t?e=new ut(t):"x"in t&&(e=new ut(t.x-.5,t.y-.5,1,1))):e=this.getBounds(),!e)return null;var n=32,s=Math.min(e.width,n),o=Math.min(e.height,n),h=ze._sampleContext;h?h.clearRect(0,0,n+1,n+1):h=ze._sampleContext=Ht.getContext(new ht(n)),h.save();var u=new wt().scale(s/e.width,o/e.height).translate(-e.x,-e.y);u.applyToContext(h),r&&r.draw(h,new R({clip:!0,matrices:[u]})),this._matrix.applyToContext(h);var l=this.getElement(),f=this._size;l&&h.drawImage(l,-f.width/2,-f.height/2),h.restore();for(var v=h.getImageData(.5,.5,Math.ceil(s),Math.ceil(o)).data,m=[0,0,0],d=0,p=0,k=v.length;p<k;p+=4){var y=v[p+3];d+=y,y/=255,m[0]+=v[p]*y,m[1]+=v[p+1]*y,m[2]+=v[p+2]*y}for(var p=0;p<3;p++)m[p]/=d;return d?Ut.read(m):null},getPixel:function(){var t=D.read(arguments),e=this.getContext().getImageData(t.x,t.y,1,1).data;return new Ut("rgb",[e[0]/255,e[1]/255,e[2]/255],e[3]/255)},setPixel:function(){var t=arguments,e=D.read(t),r=Ut.read(t),n=r._convert("rgb"),s=r._alpha,o=this.getContext(!0),h=o.createImageData(1,1),u=h.data;u[0]=n[0]*255,u[1]=n[1]*255,u[2]=n[2]*255,u[3]=s!=null?s*255:255,o.putImageData(h,e.x,e.y)},clear:function(){var t=this._size;this.getContext(!0).clearRect(0,0,t.width+1,t.height+1)},createImageData:function(){var t=ht.read(arguments);return this.getContext().createImageData(t.width,t.height)},getImageData:function(){var t=ut.read(arguments);return t.isEmpty()&&(t=new ut(this._size)),this.getContext().getImageData(t.x,t.y,t.width,t.height)},putImageData:function(t){var e=D.read(arguments,1);this.getContext(!0).putImageData(t,e.x,e.y)},setImageData:function(t){this.setSize(t),this.getContext(!0).putImageData(t,0,0)},_getBounds:function(t,e){var r=new ut(this._size).setCenter(0,0);return t?t._transformBounds(r):r},_hitTestSelf:function(t){if(this._contains(t)){var e=this;return new xe("pixel",e,{offset:t.add(e._size.divide(2)).round(),color:{get:function(){return e.getPixel(this.offset)}}})}},_draw:function(t,e,r){var n=this.getElement();if(n&&n.width>0&&n.height>0){t.globalAlpha=At.clamp(this._opacity,0,1),this._setStyles(t,e,r);var s=this._smoothing,o=s==="off";Mt.setPrefixed(t,o?"imageSmoothingEnabled":"imageSmoothingQuality",o?!1:s),t.drawImage(n,-this._size.width/2,-this._size.height/2)}},_canComposite:function(){return!0}}),je=P.extend({_class:"SymbolItem",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!0},_serializeFields:{symbol:null},initialize:function(e,r){this._initialize(e,r!==Y&&D.read(arguments,1))||this.setDefinition(e instanceof Dt?e:new Dt(e))},_equals:function(t){return this._definition===t._definition},copyContent:function(t){this.setDefinition(t._definition)},getDefinition:function(){return this._definition},setDefinition:function(t){this._definition=t,this._changed(9)},getSymbol:"#getDefinition",setSymbol:"#setDefinition",isEmpty:function(){return this._definition._item.isEmpty()},_getBounds:function(t,e){var r=this._definition._item;return r._getCachedBounds(r._matrix.prepended(t),e)},_hitTestSelf:function(t,e,r){var n=e.extend({all:!1}),s=this._definition._item._hitTest(t,n,r);return s&&(s.item=this),s},_draw:function(t,e){this._definition._item.draw(t,e)}}),Dt=R.extend({_class:"SymbolDefinition",initialize:function(e,r){this._id=ai.get(),this.project=bt.project,e&&this.setItem(e,r)},_serialize:function(t,e){return e.add(this,function(){return R.serialize([this._class,this._item],t,!1,e)})},_changed:function(t){t&8&&P._clearBoundsCache(this),t&1&&this.project._changed(t)},getItem:function(){return this._item},setItem:function(t,e){t._symbol&&(t=t.clone()),this._item&&(this._item._symbol=null),this._item=t,t.remove(),t.setSelected(!1),e||t.setPosition(new D),t._symbol=this,this._changed(9)},getDefinition:"#getItem",setDefinition:"#setItem",place:function(t){return new je(this,t)},clone:function(){return new Dt(this._item.clone(!1))},equals:function(t){return t===this||t&&this._item.equals(t._item)||!1}}),xe=R.extend({_class:"HitResult",initialize:function(e,r,n){this.type=e,this.item=r,n&&this.inject(n)},statics:{getOptions:function(t){var e=t&&R.read(t);return new R({type:null,tolerance:bt.settings.hitTolerance,fill:!e,stroke:!e,segments:!e,handles:!1,ends:!1,position:!1,center:!1,bounds:!1,guides:!1,selected:!1},e)}}}),ct=R.extend({_class:"Segment",beans:!0,_selection:0,initialize:function(e,r,n,s,o,h){var u=arguments.length,l,f,v,m;u>0&&(e==null||typeof e=="object"?u===1&&e&&"point"in e?(l=e.point,f=e.handleIn,v=e.handleOut,m=e.selection):(l=e,f=r,v=n,m=s):(l=[e,r],f=n!==Y?[n,s]:null,v=o!==Y?[o,h]:null)),new pi(l,this,"_point"),new pi(f,this,"_handleIn"),new pi(v,this,"_handleOut"),m&&this.setSelection(m)},_serialize:function(t,e){var r=this._point,n=this._selection,s=n||this.hasHandles()?[r,this._handleIn,this._handleOut]:r;return n&&s.push(n),R.serialize(s,t,!0,e)},_changed:function(t){var e=this._path;if(e){var r=e._curves,n=this._index,s;r&&((!t||t===this._point||t===this._handleIn)&&(s=n>0?r[n-1]:e._closed?r[r.length-1]:null)&&s._changed(),(!t||t===this._point||t===this._handleOut)&&(s=r[n])&&s._changed()),e._changed(41)}},getPoint:function(){return this._point},setPoint:function(){this._point.set(D.read(arguments))},getHandleIn:function(){return this._handleIn},setHandleIn:function(){this._handleIn.set(D.read(arguments))},getHandleOut:function(){return this._handleOut},setHandleOut:function(){this._handleOut.set(D.read(arguments))},hasHandles:function(){return!this._handleIn.isZero()||!this._handleOut.isZero()},isSmooth:function(){var t=this._handleIn,e=this._handleOut;return!t.isZero()&&!e.isZero()&&t.isCollinear(e)},clearHandles:function(){this._handleIn._set(0,0),this._handleOut._set(0,0)},getSelection:function(){return this._selection},setSelection:function(t){var e=this._selection,r=this._path;this._selection=t=t||0,r&&t!==e&&(r._updateSelection(this,e,t),r._changed(257))},_changeSelection:function(t,e){var r=this._selection;this.setSelection(e?r|t:r&~t)},isSelected:function(){return!!(this._selection&7)},setSelected:function(t){this._changeSelection(7,t)},getIndex:function(){return this._index!==Y?this._index:null},getPath:function(){return this._path||null},getCurve:function(){var t=this._path,e=this._index;return t?(e>0&&!t._closed&&e===t._segments.length-1&&e--,t.getCurves()[e]||null):null},getLocation:function(){var t=this.getCurve();return t?new de(t,this===t._segment1?0:1):null},getNext:function(){var t=this._path&&this._path._segments;return t&&(t[this._index+1]||this._path._closed&&t[0])||null},smooth:function(t,e,r){var n=t||{},s=n.type,o=n.factor,h=this.getPrevious(),u=this.getNext(),l=(h||this)._point,f=this._point,v=(u||this)._point,m=l.getDistance(f),d=f.getDistance(v);if(!s||s==="catmull-rom"){var p=o===Y?.5:o,k=Math.pow(m,p),y=k*k,S=Math.pow(d,p),g=S*S;if(!e&&h){var w=2*g+3*S*k+y,c=3*S*(S+k);this.setHandleIn(c!==0?new D((g*l._x+w*f._x-y*v._x)/c-f._x,(g*l._y+w*f._y-y*v._y)/c-f._y):new D)}if(!r&&u){var w=2*y+3*k*S+g,c=3*k*(k+S);this.setHandleOut(c!==0?new D((y*v._x+w*f._x-g*l._x)/c-f._x,(y*v._y+w*f._y-g*l._y)/c-f._y):new D)}}else if(s==="geometric"){if(h&&u){var x=l.subtract(v),I=o===Y?.4:o,A=I*m/(m+d);e||this.setHandleIn(x.multiply(A)),r||this.setHandleOut(x.multiply(A-I))}}else throw new Error("Smoothing method '"+s+"' not supported.")},getPrevious:function(){var t=this._path&&this._path._segments;return t&&(t[this._index-1]||this._path._closed&&t[t.length-1])||null},isFirst:function(){return!this._index},isLast:function(){var t=this._path;return t&&this._index===t._segments.length-1||!1},reverse:function(){var t=this._handleIn,e=this._handleOut,r=t.clone();t.set(e),e.set(r)},reversed:function(){return new ct(this._point,this._handleOut,this._handleIn)},remove:function(){return this._path?!!this._path.removeSegment(this._index):!1},clone:function(){return new ct(this._point,this._handleIn,this._handleOut)},equals:function(t){return t===this||t&&this._class===t._class&&this._point.equals(t._point)&&this._handleIn.equals(t._handleIn)&&this._handleOut.equals(t._handleOut)||!1},toString:function(){var t=["point: "+this._point];return this._handleIn.isZero()||t.push("handleIn: "+this._handleIn),this._handleOut.isZero()||t.push("handleOut: "+this._handleOut),"{ "+t.join(", ")+" }"},transform:function(t){this._transformCoordinates(t,new Array(6),!0),this._changed()},interpolate:function(t,e,r){var n=1-r,s=r,o=t._point,h=e._point,u=t._handleIn,l=e._handleIn,f=e._handleOut,v=t._handleOut;this._point._set(n*o._x+s*h._x,n*o._y+s*h._y,!0),this._handleIn._set(n*u._x+s*l._x,n*u._y+s*l._y,!0),this._handleOut._set(n*v._x+s*f._x,n*v._y+s*f._y,!0),this._changed()},_transformCoordinates:function(t,e,r){var n=this._point,s=!r||!this._handleIn.isZero()?this._handleIn:null,o=!r||!this._handleOut.isZero()?this._handleOut:null,h=n._x,u=n._y,l=2;return e[0]=h,e[1]=u,s&&(e[l++]=s._x+h,e[l++]=s._y+u),o&&(e[l++]=o._x+h,e[l++]=o._y+u),t&&(t._transformCoordinates(e,e,l/2),h=e[0],u=e[1],r?(n._x=h,n._y=u,l=2,s&&(s._x=e[l++]-h,s._y=e[l++]-u),o&&(o._x=e[l++]-h,o._y=e[l++]-u)):(s||(e[l++]=h,e[l++]=u),o||(e[l++]=h,e[l++]=u))),e}}),pi=D.extend({initialize:function(e,r,n){var s,o,h;if(!e)s=o=0;else if((s=e[0])!==Y)o=e[1];else{var u=e;(s=u.x)===Y&&(u=D.read(arguments),s=u.x),o=u.y,h=u.selected}this._x=s,this._y=o,this._owner=r,r[n]=this,h&&this.setSelected(!0)},_set:function(t,e){return this._x=t,this._y=e,this._owner._changed(this),this},getX:function(){return this._x},setX:function(t){this._x=t,this._owner._changed(this)},getY:function(){return this._y},setY:function(t){this._y=t,this._owner._changed(this)},isZero:function(){var t=At.isZero;return t(this._x)&&t(this._y)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(t){this._owner._changeSelection(this._getSelection(),t)},_getSelection:function(){var t=this._owner;return this===t._point?1:this===t._handleIn?2:this===t._handleOut?4:0}}),et=R.extend({_class:"Curve",beans:!0,initialize:function(e,r,n,s,o,h,u,l){var f=arguments.length,v,m,d,p,k,y;f===3?(this._path=e,v=r,m=n):f?f===1?"segment1"in e?(v=new ct(e.segment1),m=new ct(e.segment2)):"point1"in e?(d=e.point1,k=e.handle1,y=e.handle2,p=e.point2):Array.isArray(e)&&(d=[e[0],e[1]],p=[e[6],e[7]],k=[e[2]-e[0],e[3]-e[1]],y=[e[4]-e[6],e[5]-e[7]]):f===2?(v=new ct(e),m=new ct(r)):f===4?(d=e,k=r,y=n,p=s):f===8&&(d=[e,r],p=[u,l],k=[n-e,s-r],y=[o-u,h-l]):(v=new ct,m=new ct),this._segment1=v||new ct(d,null,k),this._segment2=m||new ct(p,y,null)},_serialize:function(t,e){return R.serialize(this.hasHandles()?[this.getPoint1(),this.getHandle1(),this.getHandle2(),this.getPoint2()]:[this.getPoint1(),this.getPoint2()],t,!0,e)},_changed:function(){this._length=this._bounds=Y},clone:function(){return new et(this._segment1,this._segment2)},toString:function(){var t=["point1: "+this._segment1._point];return this._segment1._handleOut.isZero()||t.push("handle1: "+this._segment1._handleOut),this._segment2._handleIn.isZero()||t.push("handle2: "+this._segment2._handleIn),t.push("point2: "+this._segment2._point),"{ "+t.join(", ")+" }"},classify:function(){return et.classify(this.getValues())},remove:function(){var t=!1;if(this._path){var e=this._segment2,r=e._handleOut;t=e.remove(),t&&this._segment1._handleOut.set(r)}return t},getPoint1:function(){return this._segment1._point},setPoint1:function(){this._segment1._point.set(D.read(arguments))},getPoint2:function(){return this._segment2._point},setPoint2:function(){this._segment2._point.set(D.read(arguments))},getHandle1:function(){return this._segment1._handleOut},setHandle1:function(){this._segment1._handleOut.set(D.read(arguments))},getHandle2:function(){return this._segment2._handleIn},setHandle2:function(){this._segment2._handleIn.set(D.read(arguments))},getSegment1:function(){return this._segment1},getSegment2:function(){return this._segment2},getPath:function(){return this._path},getIndex:function(){return this._segment1._index},getNext:function(){var t=this._path&&this._path._curves;return t&&(t[this._segment1._index+1]||this._path._closed&&t[0])||null},getPrevious:function(){var t=this._path&&this._path._curves;return t&&(t[this._segment1._index-1]||this._path._closed&&t[t.length-1])||null},isFirst:function(){return!this._segment1._index},isLast:function(){var t=this._path;return t&&this._segment1._index===t._curves.length-1||!1},isSelected:function(){return this.getPoint1().isSelected()&&this.getHandle1().isSelected()&&this.getHandle2().isSelected()&&this.getPoint2().isSelected()},setSelected:function(t){this.getPoint1().setSelected(t),this.getHandle1().setSelected(t),this.getHandle2().setSelected(t),this.getPoint2().setSelected(t)},getValues:function(t){return et.getValues(this._segment1,this._segment2,t)},getPoints:function(){for(var t=this.getValues(),e=[],r=0;r<8;r+=2)e.push(new D(t[r],t[r+1]));return e}},{getLength:function(){return this._length==null&&(this._length=et.getLength(this.getValues(),0,1)),this._length},getArea:function(){return et.getArea(this.getValues())},getLine:function(){return new Zt(this._segment1._point,this._segment2._point)},getPart:function(t,e){return new et(et.getPart(this.getValues(),t,e))},getPartLength:function(t,e){return et.getLength(this.getValues(),t,e)},divideAt:function(t){return this.divideAtTime(t&&t.curve===this?t.time:this.getTimeAt(t))},divideAtTime:function(t,e){var r=1e-8,n=1-r,s=null;if(t>=r&&t<=n){var o=et.subdivide(this.getValues(),t),h=o[0],u=o[1],l=e||this.hasHandles(),f=this._segment1,v=this._segment2,m=this._path;l&&(f._handleOut._set(h[2]-h[0],h[3]-h[1]),v._handleIn._set(u[4]-u[6],u[5]-u[7]));var d=h[6],p=h[7],k=new ct(new D(d,p),l&&new D(h[4]-d,h[5]-p),l&&new D(u[2]-d,u[3]-p));m?(m.insert(f._index+1,k),s=this.getNext()):(this._segment2=k,this._changed(),s=new et(k,v))}return s},splitAt:function(t){var e=this._path;return e?e.splitAt(t):null},splitAtTime:function(t){return this.splitAt(this.getLocationAtTime(t))},divide:function(t,e){return this.divideAtTime(t===Y?.5:e?t:this.getTimeAt(t))},split:function(t,e){return this.splitAtTime(t===Y?.5:e?t:this.getTimeAt(t))},reversed:function(){return new et(this._segment2.reversed(),this._segment1.reversed())},clearHandles:function(){this._segment1._handleOut._set(0,0),this._segment2._handleIn._set(0,0)},statics:{getValues:function(t,e,r,n){var s=t._point,o=t._handleOut,h=e._handleIn,u=e._point,l=s.x,f=s.y,v=u.x,m=u.y,d=n?[l,f,l,f,v,m,v,m]:[l,f,l+o._x,f+o._y,v+h._x,m+h._y,v,m];return r&&r._transformCoordinates(d,d,4),d},subdivide:function(t,e){var r=t[0],n=t[1],s=t[2],o=t[3],h=t[4],u=t[5],l=t[6],f=t[7];e===Y&&(e=.5);var v=1-e,m=v*r+e*s,d=v*n+e*o,p=v*s+e*h,k=v*o+e*u,y=v*h+e*l,S=v*u+e*f,g=v*m+e*p,w=v*d+e*k,c=v*p+e*y,x=v*k+e*S,I=v*g+e*c,A=v*w+e*x;return[[r,n,m,d,g,w,I,A],[I,A,c,x,y,S,l,f]]},getMonoCurves:function(t,e){var r=[],n=e?0:1,s=t[n+0],o=t[n+2],h=t[n+4],u=t[n+6];if(s>=o==o>=h&&o>=h==h>=u||et.isStraight(t))r.push(t);else{var l=3*(o-h)-s+u,f=2*(s+h)-4*o,v=o-s,m=1e-8,d=1-m,p=[],k=At.solveQuadratic(l,f,v,p,m,d);if(!k)r.push(t);else{p.sort();var y=p[0],S=et.subdivide(t,y);r.push(S[0]),k>1&&(y=(p[1]-y)/(1-y),S=et.subdivide(S[1],y),r.push(S[0])),r.push(S[1])}}return r},solveCubic:function(t,e,r,n,s,o){var h=t[e],u=t[e+2],l=t[e+4],f=t[e+6],v=0;if(!(h<r&&f<r&&u<r&&l<r||h>r&&f>r&&u>r&&l>r)){var m=3*(u-h),d=3*(l-u)-m,p=f-h-m-d;v=At.solveCubic(p,d,m,h-r,n,s,o)}return v},getTimeOf:function(t,e){var r=new D(t[0],t[1]),n=new D(t[6],t[7]),s=1e-12,o=1e-7,h=e.isClose(r,s)?0:e.isClose(n,s)?1:null;if(h===null)for(var u=[e.x,e.y],l=[],f=0;f<2;f++)for(var v=et.solveCubic(t,f,u[f],l,0,1),m=0;m<v;m++){var d=l[m];if(e.isClose(et.getPoint(t,d),o))return d}return e.isClose(r,o)?0:e.isClose(n,o)?1:null},getNearestTime:function(t,e){if(et.isStraight(t)){var r=t[0],n=t[1],s=t[6],o=t[7],h=s-r,u=o-n,l=h*h+u*u;if(l===0)return 0;var f=((e.x-r)*h+(e.y-n)*u)/l;return f<1e-12?0:f>.999999999999?1:et.getTimeOf(t,new D(r+f*h,n+f*u))}var v=100,m=1/0,d=0;function p(S){if(S>=0&&S<=1){var g=e.getDistance(et.getPoint(t,S),!0);if(g<m)return m=g,d=S,!0}}for(var k=0;k<=v;k++)p(k/v);for(var y=1/(v*2);y>1e-8;)!p(d-y)&&!p(d+y)&&(y/=2);return d},getPart:function(t,e,r){var n=e>r;if(n){var s=e;e=r,r=s}return e>0&&(t=et.subdivide(t,e)[1]),r<1&&(t=et.subdivide(t,(r-e)/(1-e))[0]),n?[t[6],t[7],t[4],t[5],t[2],t[3],t[0],t[1]]:t},isFlatEnough:function(t,e){var r=t[0],n=t[1],s=t[2],o=t[3],h=t[4],u=t[5],l=t[6],f=t[7],v=3*s-2*r-l,m=3*o-2*n-f,d=3*h-2*l-r,p=3*u-2*f-n;return Math.max(v*v,d*d)+Math.max(m*m,p*p)<=16*e*e},getArea:function(t){var e=t[0],r=t[1],n=t[2],s=t[3],o=t[4],h=t[5],u=t[6],l=t[7];return 3*((l-r)*(n+o)-(u-e)*(s+h)+s*(e-o)-n*(r-h)+l*(o+e/3)-u*(h+r/3))/20},getBounds:function(t){for(var e=t.slice(0,2),r=e.slice(),n=[0,0],s=0;s<2;s++)et._addBounds(t[s],t[s+2],t[s+4],t[s+6],s,0,e,r,n);return new ut(e[0],e[1],r[0]-e[0],r[1]-e[1])},_addBounds:function(t,e,r,n,s,o,h,u,l){function f(I,A){var b=I-A,E=I+A;b<h[s]&&(h[s]=b),E>u[s]&&(u[s]=E)}o/=2;var v=h[s]+o,m=u[s]-o;if(t<v||e<v||r<v||n<v||t>m||e>m||r>m||n>m)if(e<t!=e<n&&r<t!=r<n)f(t,0),f(n,0);else{var d=3*(e-r)-t+n,p=2*(t+r)-4*e,k=e-t,y=At.solveQuadratic(d,p,k,l),S=1e-8,g=1-S;f(n,0);for(var w=0;w<y;w++){var c=l[w],x=1-c;S<=c&&c<=g&&f(x*x*x*t+3*x*x*c*e+3*x*c*c*r+c*c*c*n,o)}}}}},R.each(["getBounds","getStrokeBounds","getHandleBounds"],function(t){this[t]=function(){this._bounds||(this._bounds={});var e=this._bounds[t];return e||(e=this._bounds[t]=Ct[t]([this._segment1,this._segment2],!1,this._path)),e.clone()}},{}),R.each({isStraight:function(t,e,r,n){if(e.isZero()&&r.isZero())return!0;var s=n.subtract(t);if(s.isZero())return!1;if(s.isCollinear(e)&&s.isCollinear(r)){var o=new Zt(t,n),h=1e-7;if(o.getDistance(t.add(e))<h&&o.getDistance(n.add(r))<h){var u=s.dot(s),l=s.dot(e)/u,f=s.dot(r)/u;return l>=0&&l<=1&&f<=0&&f>=-1}}return!1},isLinear:function(t,e,r,n){var s=n.subtract(t).divide(3);return e.equals(s)&&r.negate().equals(s)}},function(t,e){this[e]=function(r){var n=this._segment1,s=this._segment2;return t(n._point,n._handleOut,s._handleIn,s._point,r)},this.statics[e]=function(r,n){var s=r[0],o=r[1],h=r[6],u=r[7];return t(new D(s,o),new D(r[2]-s,r[3]-o),new D(r[4]-h,r[5]-u),new D(h,u),n)}},{statics:{},hasHandles:function(){return!this._segment1._handleOut.isZero()||!this._segment2._handleIn.isZero()},hasLength:function(t){return(!this.getPoint1().equals(this.getPoint2())||this.hasHandles())&&this.getLength()>(t||0)},isCollinear:function(t){return t&&this.isStraight()&&t.isStraight()&&this.getLine().isCollinear(t.getLine())},isHorizontal:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).y)<1e-8},isVertical:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).x)<1e-8}}),{beans:!1,getLocationAt:function(t,e){return this.getLocationAtTime(e?t:this.getTimeAt(t))},getLocationAtTime:function(t){return t!=null&&t>=0&&t<=1?new de(this,t):null},getTimeAt:function(t,e){return et.getTimeAt(this.getValues(),t,e)},getParameterAt:"#getTimeAt",getTimesWithTangent:function(){var t=D.read(arguments);return t.isZero()?[]:et.getTimesWithTangent(this.getValues(),t)},getOffsetAtTime:function(t){return this.getPartLength(0,t)},getLocationOf:function(){return this.getLocationAtTime(this.getTimeOf(D.read(arguments)))},getOffsetOf:function(){var t=this.getLocationOf.apply(this,arguments);return t?t.getOffset():null},getTimeOf:function(){return et.getTimeOf(this.getValues(),D.read(arguments))},getParameterOf:"#getTimeOf",getNearestLocation:function(){var t=D.read(arguments),e=this.getValues(),r=et.getNearestTime(e,t),n=et.getPoint(e,r);return new de(this,r,n,null,t.getDistance(n))},getNearestPoint:function(){var t=this.getNearestLocation.apply(this,arguments);return t&&t.getPoint()}},new function(){var t=["getPoint","getTangent","getNormal","getWeightedTangent","getWeightedNormal","getCurvature"];return R.each(t,function(e){this[e+"At"]=function(r,n){var s=this.getValues();return et[e](s,n?r:et.getTimeAt(s,r))},this[e+"AtTime"]=function(r){return et[e](this.getValues(),r)}},{statics:{_evaluateMethods:t}})},new function(){function t(n){var s=n[0],o=n[1],h=n[2],u=n[3],l=n[4],f=n[5],v=n[6],m=n[7],d=9*(h-l)+3*(v-s),p=6*(s+l)-12*h,k=3*(h-s),y=9*(u-f)+3*(m-o),S=6*(o+f)-12*u,g=3*(u-o);return function(w){var c=(d*w+p)*w+k,x=(y*w+S)*w+g;return Math.sqrt(c*c+x*x)}}function e(n,s){return Math.max(2,Math.min(16,Math.ceil(Math.abs(s-n)*32)))}function r(n,s,o,h){if(s==null||s<0||s>1)return null;var u=n[0],l=n[1],f=n[2],v=n[3],m=n[4],d=n[5],p=n[6],k=n[7],y=At.isZero;y(f-u)&&y(v-l)&&(f=u,v=l),y(m-p)&&y(d-k)&&(m=p,d=k);var S=3*(f-u),g=3*(m-f)-S,w=p-u-S-g,c=3*(v-l),x=3*(d-v)-c,I=k-l-c-x,A,b;if(o===0)A=s===0?u:s===1?p:((w*s+g)*s+S)*s+u,b=s===0?l:s===1?k:((I*s+x)*s+c)*s+l;else{var E=1e-8,N=1-E;if(s<E?(A=S,b=c):s>N?(A=3*(p-m),b=3*(k-d)):(A=(3*w*s+2*g)*s+S,b=(3*I*s+2*x)*s+c),h){A===0&&b===0&&(s<E||s>N)&&(A=m-f,b=d-v);var O=Math.sqrt(A*A+b*b);O&&(A/=O,b/=O)}if(o===3){var m=6*w*s+2*g,d=6*I*s+2*x,z=Math.pow(A*A+b*b,3/2);A=z!==0?(A*d-b*m)/z:0,b=0}}return o===2?new D(b,-A):new D(A,b)}return{statics:{classify:function(n){var s=n[0],o=n[1],h=n[2],u=n[3],l=n[4],f=n[5],v=n[6],m=n[7],d=s*(m-f)+o*(l-v)+v*f-m*l,p=h*(o-m)+u*(v-s)+s*m-o*v,k=l*(u-o)+f*(s-h)+h*o-u*s,y=3*k,S=y-p,g=S-p+d,w=Math.sqrt(g*g+S*S+y*y),c=w!==0?1/w:0,x=At.isZero,I="serpentine";g*=c,S*=c,y*=c;function A(O,z,T){var V=z!==Y,B=V&&z>0&&z<1,q=V&&T>0&&T<1;return V&&(!(B||q)||O==="loop"&&!(B&&q))&&(O="arch",B=q=!1),{type:O,roots:B||q?B&&q?z<T?[z,T]:[T,z]:[B?z:T]:null}}if(x(g))return x(S)?A(x(y)?"line":"quadratic"):A(I,y/(3*S));var b=3*S*S-4*g*y;if(x(b))return A("cusp",S/(2*g));var E=b>0?Math.sqrt(b/3):Math.sqrt(-b),N=2*g;return A(b>0?I:"loop",(S+E)/N,(S-E)/N)},getLength:function(n,s,o,h){if(s===Y&&(s=0),o===Y&&(o=1),et.isStraight(n)){var u=n;o<1&&(u=et.subdivide(u,o)[0],s/=o),s>0&&(u=et.subdivide(u,s)[1]);var l=u[6]-u[0],f=u[7]-u[1];return Math.sqrt(l*l+f*f)}return At.integrate(h||t(n),s,o,e(s,o))},getTimeAt:function(n,s,o){if(o===Y&&(o=s<0?1:0),s===0)return o;var h=Math.abs,u=1e-12,l=s>0,f=l?o:0,v=l?1:o,m=t(n),d=et.getLength(n,f,v,m),p=h(s)-d;if(h(p)<u)return l?v:f;if(p>u)return null;var k=s/d,y=0;function S(g){return y+=At.integrate(m,o,g,e(o,g)),o=g,y-s}return At.findRoot(S,m,o+k,f,v,32,1e-12)},getPoint:function(n,s){return r(n,s,0,!1)},getTangent:function(n,s){return r(n,s,1,!0)},getWeightedTangent:function(n,s){return r(n,s,1,!1)},getNormal:function(n,s){return r(n,s,2,!0)},getWeightedNormal:function(n,s){return r(n,s,2,!1)},getCurvature:function(n,s){return r(n,s,3,!1).x},getPeaks:function(n){var s=n[0],o=n[1],h=n[2],u=n[3],l=n[4],f=n[5],v=n[6],m=n[7],d=-s+3*h-3*l+v,p=3*s-6*h+3*l,k=-3*s+3*h,y=-o+3*u-3*f+m,S=3*o-6*u+3*f,g=-3*o+3*u,w=1e-8,c=1-w,x=[];return At.solveCubic(9*(d*d+y*y),9*(d*p+S*y),2*(p*p+S*S)+3*(k*d+g*y),k*p+S*g,x,w,c),x.sort()}}}},new function(){function t(p,k,y,S,g,w,c){var x=!c&&y.getPrevious()===g,I=!c&&y!==g&&y.getNext()===g,A=1e-8,b=1-A;if(S!==null&&S>=(x?A:0)&&S<=(I?b:1)&&w!==null&&w>=(I?A:0)&&w<=(x?b:1)){var E=new de(y,S,null,c),N=new de(g,w,null,c);E._intersection=N,N._intersection=E,(!k||k(E))&&de.insert(p,E,!0)}}function e(p,k,y,S,g,w,c,x,I,A,b,E,N){if(++I>=4096||++x>=40)return I;var O=1e-9,z=k[0],T=k[1],V=k[6],B=k[7],q=Zt.getSignedDistance,U=q(z,T,V,B,k[2],k[3]),G=q(z,T,V,B,k[4],k[5]),Q=U*G>0?3/4:4/9,$=Q*Math.min(0,U,G),it=Q*Math.max(0,U,G),st=q(z,T,V,B,p[0],p[1]),Z=q(z,T,V,B,p[2],p[3]),K=q(z,T,V,B,p[4],p[5]),rt=q(z,T,V,B,p[6],p[7]),ot=r(st,Z,K,rt),at=ot[0],ft=ot[1],lt,_t;if(U===0&&G===0&&st===0&&Z===0&&K===0&&rt===0||(lt=n(at,ft,$,it))==null||(_t=n(at.reverse(),ft.reverse(),$,it))==null)return I;var xt=A+(b-A)*lt,pt=A+(b-A)*_t;if(Math.max(N-E,pt-xt)<O){var Xt=(xt+pt)/2,Gt=(E+N)/2;t(g,w,c?S:y,c?Gt:Xt,c?y:S,c?Xt:Gt)}else{p=et.getPart(p,lt,_t);var te=N-E;if(_t-lt>.8)if(pt-xt>te){var Wt=et.subdivide(p,.5),Xt=(xt+pt)/2;I=e(k,Wt[0],S,y,g,w,!c,x,I,E,N,xt,Xt),I=e(k,Wt[1],S,y,g,w,!c,x,I,E,N,Xt,pt)}else{var Wt=et.subdivide(k,.5),Gt=(E+N)/2;I=e(Wt[0],p,S,y,g,w,!c,x,I,E,Gt,xt,pt),I=e(Wt[1],p,S,y,g,w,!c,x,I,Gt,N,xt,pt)}else te===0||te>=O?I=e(k,p,S,y,g,w,!c,x,I,E,N,xt,pt):I=e(p,k,y,S,g,w,c,x,I,xt,pt,E,N)}return I}function r(p,k,y,S){var g=[0,p],w=[1/3,k],c=[2/3,y],x=[1,S],I=k-(2*p+S)/3,A=y-(p+2*S)/3,b;if(I*A<0)b=[[g,w,x],[g,c,x]];else{var E=I/A;b=[E>=2?[g,w,x]:E<=.5?[g,c,x]:[g,w,c,x],[g,x]]}return(I||A)<0?b.reverse():b}function n(p,k,y,S){return p[0][1]<y?s(p,!0,y):k[0][1]>S?s(k,!1,S):p[0][0]}function s(p,k,y){for(var S=p[0][0],g=p[0][1],w=1,c=p.length;w<c;w++){var x=p[w][0],I=p[w][1];if(k?I>=y:I<=y)return I===y?x:S+(y-g)*(x-S)/(I-g);S=x,g=I}return null}function o(p,k,y,S,g){var w=At.isZero;if(w(S)&&w(g)){var c=et.getTimeOf(p,new D(k,y));return c===null?[]:[c]}for(var x=Math.atan2(-g,S),I=Math.sin(x),A=Math.cos(x),b=[],E=[],N=0;N<8;N+=2){var O=p[N]-k,z=p[N+1]-y;b.push(O*A-z*I,O*I+z*A)}return et.solveCubic(b,1,0,E,0,1),E}function h(p,k,y,S,g,w,c){for(var x=k[0],I=k[1],A=k[6],b=k[7],E=o(p,x,I,A-x,b-I),N=0,O=E.length;N<O;N++){var z=E[N],T=et.getPoint(p,z),V=et.getTimeOf(k,T);V!==null&&t(g,w,c?S:y,c?V:z,c?y:S,c?z:V)}}function u(p,k,y,S,g,w){var c=Zt.intersect(p[0],p[1],p[6],p[7],k[0],k[1],k[6],k[7]);c&&t(g,w,y,et.getTimeOf(p,c),S,et.getTimeOf(k,c))}function l(p,k,y,S,g,w){var c=1e-12,x=Math.min,I=Math.max;if(I(p[0],p[2],p[4],p[6])+c>x(k[0],k[2],k[4],k[6])&&x(p[0],p[2],p[4],p[6])-c<I(k[0],k[2],k[4],k[6])&&I(p[1],p[3],p[5],p[7])+c>x(k[1],k[3],k[5],k[7])&&x(p[1],p[3],p[5],p[7])-c<I(k[1],k[3],k[5],k[7])){var A=m(p,k);if(A)for(var b=0;b<2;b++){var E=A[b];t(g,w,y,E[0],S,E[1],!0)}else{var N=et.isStraight(p),O=et.isStraight(k),z=N&&O,T=N&&!O,V=g.length;if((z?u:N||O?h:e)(T?k:p,T?p:k,T?S:y,T?y:S,g,w,T,0,0,0,1,0,1),!z||g.length===V)for(var b=0;b<4;b++){var B=b>>1,q=b&1,U=B*6,G=q*6,Q=new D(p[U],p[U+1]),$=new D(k[G],k[G+1]);Q.isClose($,c)&&t(g,w,y,B,S,q)}}}return g}function f(p,k,y,S){var g=et.classify(p);if(g.type==="loop"){var w=g.roots;t(y,S,k,w[0],k,w[1])}return y}function v(p,k,y,S,g,w){var c=1e-7,x=!k;x&&(k=p);for(var I=p.length,A=k.length,b=new Array(I),E=x?b:new Array(A),N=[],O=0;O<I;O++)b[O]=p[O].getValues(S);if(!x)for(var O=0;O<A;O++)E[O]=k[O].getValues(g);for(var z=si.findCurveBoundsCollisions(b,E,c),T=0;T<I;T++){var V=p[T],B=b[T];x&&f(B,V,N,y);var q=z[T];if(q)for(var U=0;U<q.length;U++){if(w&&N.length)return N;var G=q[U];if(!x||G>T){var Q=k[G],$=E[G];l(B,$,V,Q,N,y)}}}return N}function m(p,k){function y(rt){var ot=rt[6]-rt[0],at=rt[7]-rt[1];return ot*ot+at*at}var S=Math.abs,g=Zt.getDistance,w=1e-8,c=1e-7,x=et.isStraight(p),I=et.isStraight(k),A=x&&I,b=y(p)<y(k),E=b?k:p,N=b?p:k,O=E[0],z=E[1],T=E[6]-O,V=E[7]-z;if(g(O,z,T,V,N[0],N[1],!0)<c&&g(O,z,T,V,N[6],N[7],!0)<c)!A&&g(O,z,T,V,E[2],E[3],!0)<c&&g(O,z,T,V,E[4],E[5],!0)<c&&g(O,z,T,V,N[2],N[3],!0)<c&&g(O,z,T,V,N[4],N[5],!0)<c&&(x=I=A=!0);else if(A)return null;if(x^I)return null;for(var B=[p,k],q=[],U=0;U<4&&q.length<2;U++){var G=U&1,Q=G^1,$=U>>1,it=et.getTimeOf(B[G],new D(B[Q][$?6:0],B[Q][$?7:1]));if(it!=null){var st=G?[$,it]:[it,$];(!q.length||S(st[0]-q[0][0])>w&&S(st[1]-q[0][1])>w)&&q.push(st)}if(U>2&&!q.length)break}if(q.length!==2)q=null;else if(!A){var Z=et.getPart(p,q[0][0],q[1][0]),K=et.getPart(k,q[0][1],q[1][1]);(S(K[2]-Z[2])>c||S(K[3]-Z[3])>c||S(K[4]-Z[4])>c||S(K[5]-Z[5])>c)&&(q=null)}return q}function d(p,k){var y=p[0],S=p[1],g=p[2],w=p[3],c=p[4],x=p[5],I=p[6],A=p[7],b=k.normalize(),E=b.x,N=b.y,O=3*I-9*c+9*g-3*y,z=3*A-9*x+9*w-3*S,T=6*c-12*g+6*y,V=6*x-12*w+6*S,B=3*g-3*y,q=3*w-3*S,U=2*O*N-2*z*E,G=[];if(Math.abs(U)<At.CURVETIME_EPSILON){var Q=O*q-z*B,U=O*V-z*T;if(U!=0){var $=-Q/U;$>=0&&$<=1&&G.push($)}}else{var it=(T*T-4*O*B)*N*N+(-2*T*V+4*z*B+4*O*q)*E*N+(V*V-4*z*q)*E*E,st=T*N-V*E;if(it>=0&&U!=0){var Z=Math.sqrt(it),K=-(st+Z)/U,rt=(-st+Z)/U;K>=0&&K<=1&&G.push(K),rt>=0&&rt<=1&&G.push(rt)}}return G}return{getIntersections:function(p){var k=this.getValues(),y=p&&p!==this&&p.getValues();return y?l(k,y,this,p,[]):f(k,this,[])},statics:{getOverlaps:m,getIntersections:v,getCurveLineIntersections:o,getTimesWithTangent:d}}}),de=R.extend({_class:"CurveLocation",initialize:function(e,r,n,s,o){if(r>=.99999999){var h=e.getNext();h&&(r=0,e=h)}this._setCurve(e),this._time=r,this._point=n||e.getPointAtTime(r),this._overlap=s,this._distance=o,this._intersection=this._next=this._previous=null},_setPath:function(t){this._path=t,this._version=t?t._version:0},_setCurve:function(t){this._setPath(t._path),this._curve=t,this._segment=null,this._segment1=t._segment1,this._segment2=t._segment2},_setSegment:function(t){var e=t.getCurve();e?this._setCurve(e):(this._setPath(t._path),this._segment1=t,this._segment2=null),this._segment=t,this._time=t===this._segment1?0:1,this._point=t._point.clone()},getSegment:function(){var t=this._segment;if(!t){var e=this.getCurve(),r=this.getTime();r===0?t=e._segment1:r===1?t=e._segment2:r!=null&&(t=e.getPartLength(0,r)<e.getPartLength(r,1)?e._segment1:e._segment2),this._segment=t}return t},getCurve:function(){var t=this._path,e=this;t&&t._version!==this._version&&(this._time=this._offset=this._curveOffset=this._curve=null);function r(n){var s=n&&n.getCurve();if(s&&(e._time=s.getTimeOf(e._point))!=null)return e._setCurve(s),s}return this._curve||r(this._segment)||r(this._segment1)||r(this._segment2.getPrevious())},getPath:function(){var t=this.getCurve();return t&&t._path},getIndex:function(){var t=this.getCurve();return t&&t.getIndex()},getTime:function(){var t=this.getCurve(),e=this._time;return t&&e==null?this._time=t.getTimeOf(this._point):e},getParameter:"#getTime",getPoint:function(){return this._point},getOffset:function(){var t=this._offset;if(t==null){t=0;var e=this.getPath(),r=this.getIndex();if(e&&r!=null)for(var n=e.getCurves(),s=0;s<r;s++)t+=n[s].getLength();this._offset=t+=this.getCurveOffset()}return t},getCurveOffset:function(){var t=this._curveOffset;if(t==null){var e=this.getCurve(),r=this.getTime();this._curveOffset=t=r!=null&&e&&e.getPartLength(0,r)}return t},getIntersection:function(){return this._intersection},getDistance:function(){return this._distance},divide:function(){var t=this.getCurve(),e=t&&t.divideAtTime(this.getTime());return e&&this._setSegment(e._segment1),e},split:function(){var t=this.getCurve(),e=t._path,r=t&&t.splitAtTime(this.getTime());return r&&this._setSegment(e.getLastSegment()),r},equals:function(t,e){var r=this===t;if(!r&&t instanceof de){var n=this.getCurve(),s=t.getCurve(),o=n._path,h=s._path;if(o===h){var u=Math.abs,l=1e-7,f=u(this.getOffset()-t.getOffset()),v=!e&&this._intersection,m=!e&&t._intersection;r=(f<l||o&&u(o.getLength()-f)<l)&&(!v&&!m||v&&m&&v.equals(m,!0))}}return r},toString:function(){var t=[],e=this.getPoint(),r=fe.instance;e&&t.push("point: "+e);var n=this.getIndex();n!=null&&t.push("index: "+n);var s=this.getTime();return s!=null&&t.push("time: "+r.number(s)),this._distance!=null&&t.push("distance: "+r.number(this._distance)),"{ "+t.join(", ")+" }"},isTouching:function(){var t=this._intersection;if(t&&this.getTangent().isCollinear(t.getTangent())){var e=this.getCurve(),r=t.getCurve();return!(e.isStraight()&&r.isStraight()&&e.getLine().intersect(r.getLine()))}return!1},isCrossing:function(){var t=this._intersection;if(!t)return!1;var e=this.getTime(),r=t.getTime(),n=1e-8,s=1-n,o=e>=n&&e<=s,h=r>=n&&r<=s;if(o&&h)return!this.isTouching();var u=this.getCurve(),l=u&&e<n?u.getPrevious():u,f=t.getCurve(),v=f&&r<n?f.getPrevious():f;if(e>s&&(u=u.getNext()),r>s&&(f=f.getNext()),!l||!u||!v||!f)return!1;var m=[];function d(E,N){var O=E.getValues(),z=et.classify(O).roots||et.getPeaks(O),T=z.length,V=et.getLength(O,N&&T?z[T-1]:0,!N&&T?z[0]:1);m.push(T?V:V/32)}function p(E,N,O){return N<O?E>N&&E<O:E>N||E<O}o||(d(l,!0),d(u,!1)),h||(d(v,!0),d(f,!1));var k=this.getPoint(),y=Math.min.apply(Math,m),S=o?u.getTangentAtTime(e):u.getPointAt(y).subtract(k),g=o?S.negate():l.getPointAt(-y).subtract(k),w=h?f.getTangentAtTime(r):f.getPointAt(y).subtract(k),c=h?w.negate():v.getPointAt(-y).subtract(k),x=g.getAngle(),I=S.getAngle(),A=c.getAngle(),b=w.getAngle();return!!(o?p(x,A,b)^p(I,A,b)&&p(x,b,A)^p(I,b,A):p(A,x,I)^p(b,x,I)&&p(A,I,x)^p(b,I,x))},hasOverlap:function(){return!!this._overlap}},R.each(et._evaluateMethods,function(t){var e=t+"At";this[t]=function(){var r=this.getCurve(),n=this.getTime();return n!=null&&r&&r[e](n,!0)}},{preserve:!0}),new function(){function t(e,r,n){var s=e.length,o=0,h=s-1;function u(k,y){for(var S=k+y;S>=-1&&S<=s;S+=y){var g=e[(S%s+s)%s];if(!r.getPoint().isClose(g.getPoint(),1e-7))break;if(r.equals(g))return g}return null}for(;o<=h;){var l=o+h>>>1,f=e[l],v;if(n&&(v=r.equals(f)?f:u(l,-1)||u(l,1)))return r._overlap&&(v._overlap=v._intersection._overlap=!0),v;var m=r.getPath(),d=f.getPath(),p=m!==d?m._id-d._id:r.getIndex()+r.getTime()-(f.getIndex()+f.getTime());p<0?h=l-1:o=l+1}return e.splice(o,0,r),r}return{statics:{insert:t,expand:function(e){for(var r=e.slice(),n=e.length-1;n>=0;n--)t(r,e[n]._intersection,!1);return r}}}}),Ee=P.extend({_class:"PathItem",_selectBounds:!1,_canScaleStroke:!0,beans:!0,initialize:function(){},statics:{create:function(t){var e,r,n;if(R.isPlainObject(t)?(r=t.segments,e=t.pathData):Array.isArray(t)?r=t:typeof t=="string"&&(e=t),r){var s=r[0];n=s&&Array.isArray(s[0])}else e&&(n=(e.match(/m/gi)||[]).length>1||/z\s*\S+/i.test(e));var o=n?$t:Ct;return new o(t)}},_asPathItem:function(){return this},isClockwise:function(){return this.getArea()>=0},setClockwise:function(t){this.isClockwise()!=(t=!!t)&&this.reverse()},setPathData:function(t){var e=t&&t.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/ig),r,n=!1,s,o,h=new D,u=new D;function l(c,x){var I=+r[c];return n&&(I+=h[x]),I}function f(c){return new D(l(c,"x"),l(c+1,"y"))}this.clear();for(var v=0,m=e&&e.length;v<m;v++){var d=e[v],p=d[0],k=p.toLowerCase();r=d.match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g);var y=r&&r.length;switch(n=p===k,s==="z"&&!/[mz]/.test(k)&&this.moveTo(h),k){case"m":case"l":for(var S=k==="m",g=0;g<y;g+=2)this[S?"moveTo":"lineTo"](h=f(g)),S&&(u=h,S=!1);o=h;break;case"h":case"v":var w=k==="h"?"x":"y";h=h.clone();for(var g=0;g<y;g++)h[w]=l(g,w),this.lineTo(h);o=h;break;case"c":for(var g=0;g<y;g+=6)this.cubicCurveTo(f(g),o=f(g+2),h=f(g+4));break;case"s":for(var g=0;g<y;g+=4)this.cubicCurveTo(/[cs]/.test(s)?h.multiply(2).subtract(o):h,o=f(g),h=f(g+2)),s=k;break;case"q":for(var g=0;g<y;g+=4)this.quadraticCurveTo(o=f(g),h=f(g+2));break;case"t":for(var g=0;g<y;g+=2)this.quadraticCurveTo(o=/[qt]/.test(s)?h.multiply(2).subtract(o):h,h=f(g)),s=k;break;case"a":for(var g=0;g<y;g+=7)this.arcTo(h=f(g+5),new ht(+r[g],+r[g+1]),+r[g+2],+r[g+4],+r[g+3]);break;case"z":this.closePath(1e-12),h=u;break}s=k}},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_contains:function(t){var e=t.isInside(this.getBounds({internal:!0,handle:!0}))?this._getWinding(t):{};return e.onPath||!!(this.getFillRule()==="evenodd"?e.windingL&1||e.windingR&1:e.winding)},getIntersections:function(t,e,r,n){var s=this===t||!t,o=this._matrix._orNullIfIdentity(),h=s?o:(r||t._matrix)._orNullIfIdentity();return s||this.getBounds(o).intersects(t.getBounds(h),1e-12)?et.getIntersections(this.getCurves(),!s&&t.getCurves(),e,o,h,n):[]},getCrossings:function(t){return this.getIntersections(t,function(e){return e.isCrossing()})},getNearestLocation:function(){for(var t=D.read(arguments),e=this.getCurves(),r=1/0,n=null,s=0,o=e.length;s<o;s++){var h=e[s].getNearestLocation(t);h._distance<r&&(r=h._distance,n=h)}return n},getNearestPoint:function(){var t=this.getNearestLocation.apply(this,arguments);return t&&t.getPoint()},interpolate:function(t,e,r){var n=!this._children,s=n?"_segments":"_children",o=t[s],h=e[s],u=this[s];if(!o||!h||o.length!==h.length)throw new Error("Invalid operands in interpolate() call: "+t+", "+e);var l=u.length,f=h.length;if(l<f)for(var v=n?ct:Ct,m=l;m<f;m++)this.add(new v);else l>f&&this[n?"removeSegments":"removeChildren"](f,l);for(var m=0;m<f;m++)u[m].interpolate(o[m],h[m],r);n&&(this.setClosed(t._closed),this._changed(9))},compare:function(t){var e=!1;if(t){var r=this._children||[this],n=t._children?t._children.slice():[t],s=r.length,o=n.length,h=[],u=0;e=!0;for(var l=si.findItemBoundsCollisions(r,n,At.GEOMETRIC_EPSILON),f=s-1;f>=0&&e;f--){var v=r[f];e=!1;var m=l[f];if(m)for(var d=m.length-1;d>=0&&!e;d--)v.compare(n[m[d]])&&(h[m[d]]||(h[m[d]]=!0,u++),e=!0)}e=e&&u===o}return e}}),Ct=Ee.extend({_class:"Path",_serializeFields:{segments:[],closed:!1},initialize:function(e){this._closed=!1,this._segments=[],this._version=0;var r=arguments,n=Array.isArray(e)?typeof e[0]=="object"?e:r:e&&e.size===Y&&(e.x!==Y||e.point!==Y)?r:null;n&&n.length>0?this.setSegments(n):(this._curves=Y,this._segmentSelection=0,!n&&typeof e=="string"&&(this.setPathData(e),e=null)),this._initialize(!n&&e)},_equals:function(t){return this._closed===t._closed&&R.equals(this._segments,t._segments)},copyContent:function(t){this.setSegments(t._segments),this._closed=t._closed},_changed:function t(e){if(t.base.call(this,e),e&8){if(this._length=this._area=Y,e&32)this._version++;else if(this._curves)for(var r=0,n=this._curves.length;r<n;r++)this._curves[r]._changed()}else e&64&&(this._bounds=Y)},getStyle:function(){var t=this._parent;return(t instanceof $t?t:this)._style},getSegments:function(){return this._segments},setSegments:function(t){var e=this.isFullySelected(),r=t&&t.length;if(this._segments.length=0,this._segmentSelection=0,this._curves=Y,r){var n=t[r-1];typeof n=="boolean"&&(this.setClosed(n),r--),this._add(ct.readList(t,0,{},r))}e&&this.setFullySelected(!0)},getFirstSegment:function(){return this._segments[0]},getLastSegment:function(){return this._segments[this._segments.length-1]},getCurves:function(){var t=this._curves,e=this._segments;if(!t){var r=this._countCurves();t=this._curves=new Array(r);for(var n=0;n<r;n++)t[n]=new et(this,e[n],e[n+1]||e[0])}return t},getFirstCurve:function(){return this.getCurves()[0]},getLastCurve:function(){var t=this.getCurves();return t[t.length-1]},isClosed:function(){return this._closed},setClosed:function(t){if(this._closed!=(t=!!t)){if(this._closed=t,this._curves){var e=this._curves.length=this._countCurves();t&&(this._curves[e-1]=new et(this,this._segments[e-1],this._segments[0]))}this._changed(41)}}},{beans:!0,getPathData:function(t,e){var r=this._segments,n=r.length,s=new fe(e),o=new Array(6),h=!0,u,l,f,v,m,d,p,k,y=[];function S(w,c){if(w._transformCoordinates(t,o),u=o[0],l=o[1],h)y.push("M"+s.pair(u,l)),h=!1;else if(m=o[2],d=o[3],m===u&&d===l&&p===f&&k===v){if(!c){var x=u-f,I=l-v;y.push(x===0?"v"+s.number(I):I===0?"h"+s.number(x):"l"+s.pair(x,I))}}else y.push("c"+s.pair(p-f,k-v)+" "+s.pair(m-f,d-v)+" "+s.pair(u-f,l-v));f=u,v=l,p=o[4],k=o[5]}if(!n)return"";for(var g=0;g<n;g++)S(r[g]);return this._closed&&n>0&&(S(r[0],!0),y.push("z")),y.join("")},isEmpty:function(){return!this._segments.length},_transformContent:function(t){for(var e=this._segments,r=new Array(6),n=0,s=e.length;n<s;n++)e[n]._transformCoordinates(t,r,!0);return!0},_add:function(t,h){for(var r=this._segments,n=this._curves,s=t.length,o=h==null,h=o?r.length:h,u=0;u<s;u++){var l=t[u];l._path&&(l=t[u]=l.clone()),l._path=this,l._index=h+u,l._selection&&this._updateSelection(l,0,l._selection)}if(o)R.push(r,t);else{r.splice.apply(r,[h,0].concat(t));for(var u=h+s,f=r.length;u<f;u++)r[u]._index=u}if(n){var v=this._countCurves(),m=h>0&&h+s-1===v?h-1:h,d=m,p=Math.min(m+s,v);t._curves&&(n.splice.apply(n,[m,0].concat(t._curves)),d+=t._curves.length);for(var u=d;u<p;u++)n.splice(u,0,new et(this,null,null));this._adjustCurves(m,p)}return this._changed(41),t},_adjustCurves:function(t,e){for(var r=this._segments,n=this._curves,s,o=t;o<e;o++)s=n[o],s._path=this,s._segment1=r[o],s._segment2=r[o+1]||r[0],s._changed();(s=n[this._closed&&!t?r.length-1:t-1])&&(s._segment2=r[t]||r[0],s._changed()),(s=n[e])&&(s._segment1=r[e],s._changed())},_countCurves:function(){var t=this._segments.length;return!this._closed&&t>0?t-1:t},add:function(t){var e=arguments;return e.length>1&&typeof t!="number"?this._add(ct.readList(e)):this._add([ct.read(e)])[0]},insert:function(t,e){var r=arguments;return r.length>2&&typeof e!="number"?this._add(ct.readList(r,1),t):this._add([ct.read(r,1)],t)[0]},addSegment:function(){return this._add([ct.read(arguments)])[0]},insertSegment:function(t){return this._add([ct.read(arguments,1)],t)[0]},addSegments:function(t){return this._add(ct.readList(t))},insertSegments:function(t,e){return this._add(ct.readList(e),t)},removeSegment:function(t){return this.removeSegments(t,t+1)[0]||null},removeSegments:function(t,e,r){t=t||0,e=R.pick(e,this._segments.length);var n=this._segments,s=this._curves,o=n.length,h=n.splice(t,e-t),u=h.length;if(!u)return h;for(var l=0;l<u;l++){var f=h[l];f._selection&&this._updateSelection(f,f._selection,0),f._index=f._path=null}for(var l=t,v=n.length;l<v;l++)n[l]._index=l;if(s){for(var m=t>0&&e===o+(this._closed?1:0)?t-1:t,s=s.splice(m,u),l=s.length-1;l>=0;l--)s[l]._path=null;r&&(h._curves=s.slice(1)),this._adjustCurves(m,m)}return this._changed(41),h},clear:"#removeSegments",hasHandles:function(){for(var t=this._segments,e=0,r=t.length;e<r;e++)if(t[e].hasHandles())return!0;return!1},clearHandles:function(){for(var t=this._segments,e=0,r=t.length;e<r;e++)t[e].clearHandles()},getLength:function(){if(this._length==null){for(var t=this.getCurves(),e=0,r=0,n=t.length;r<n;r++)e+=t[r].getLength();this._length=e}return this._length},getArea:function(){var t=this._area;if(t==null){var e=this._segments,r=this._closed;t=0;for(var n=0,s=e.length;n<s;n++){var o=n+1===s;t+=et.getArea(et.getValues(e[n],e[o?0:n+1],null,o&&!r))}this._area=t}return t},isFullySelected:function(){var t=this._segments.length;return this.isSelected()&&t>0&&this._segmentSelection===t*7},setFullySelected:function(t){t&&this._selectSegments(!0),this.setSelected(t)},setSelection:function t(e){e&1||this._selectSegments(!1),t.base.call(this,e)},_selectSegments:function(t){var e=this._segments,r=e.length,n=t?7:0;this._segmentSelection=n*r;for(var s=0;s<r;s++)e[s]._selection=n},_updateSelection:function(t,e,r){t._selection=r;var n=this._segmentSelection+=r-e;n>0&&this.setSelected(!0)},divideAt:function(t){var e=this.getLocationAt(t),r;return e&&(r=e.getCurve().divideAt(e.getCurveOffset()))?r._segment1:null},splitAt:function(t){var e=this.getLocationAt(t),r=e&&e.index,n=e&&e.time,s=1e-8,o=1-s;n>o&&(r++,n=0);var h=this.getCurves();if(r>=0&&r<h.length){n>=s&&h[r++].divideAtTime(n);var u=this.removeSegments(r,this._segments.length,!0),l;return this._closed?(this.setClosed(!1),l=this):(l=new Ct(P.NO_INSERT),l.insertAbove(this),l.copyAttributes(this)),l._add(u,0),this.addSegment(u[0]),l}return null},split:function(t,e){var r,n=e===Y?t:(r=this.getCurves()[t])&&r.getLocationAtTime(e);return n!=null?this.splitAt(n):null},join:function(t,e){var r=e||0;if(t&&t!==this){var n=t._segments,s=this.getLastSegment(),o=t.getLastSegment();if(!o)return this;s&&s._point.isClose(o._point,r)&&t.reverse();var h=t.getFirstSegment();if(s&&s._point.isClose(h._point,r))s.setHandleOut(h._handleOut),this._add(n.slice(1));else{var u=this.getFirstSegment();u&&u._point.isClose(h._point,r)&&t.reverse(),o=t.getLastSegment(),u&&u._point.isClose(o._point,r)?(u.setHandleIn(o._handleIn),this._add(n.slice(0,n.length-1),0)):this._add(n.slice())}t._closed&&this._add([n[0]]),t.remove()}var l=this.getFirstSegment(),f=this.getLastSegment();return l!==f&&l._point.isClose(f._point,r)&&(l.setHandleIn(f._handleIn),f.remove(),this.setClosed(!0)),this},reduce:function(t){for(var e=this.getCurves(),r=t&&t.simplify,n=r?1e-7:0,s=e.length-1;s>=0;s--){var o=e[s];!o.hasHandles()&&(!o.hasLength(n)||r&&o.isCollinear(o.getNext()))&&o.remove()}return this},reverse:function(){this._segments.reverse();for(var t=0,e=this._segments.length;t<e;t++){var r=this._segments[t],n=r._handleIn;r._handleIn=r._handleOut,r._handleOut=n,r._index=t}this._curves=null,this._changed(9)},flatten:function(t){for(var e=new Pi(this,t||.25,256,!0),r=e.parts,n=r.length,s=[],o=0;o<n;o++)s.push(new ct(r[o].curve.slice(0,2)));!this._closed&&n>0&&s.push(new ct(r[n-1].curve.slice(6))),this.setSegments(s)},simplify:function(t){var e=new Be(this).fit(t||2.5);return e&&this.setSegments(e),!!e},smooth:function(t){var e=this,r=t||{},n=r.type||"asymmetric",s=this._segments,o=s.length,h=this._closed;function u(at,ft){var lt=at&&at.index;if(lt!=null){var _t=at.path;if(_t&&_t!==e)throw new Error(at._class+" "+lt+" of "+_t+" is not part of "+e);ft&&at instanceof et&&lt++}else lt=typeof at=="number"?at:ft;return Math.min(lt<0&&h?lt%o:lt<0?lt+o:lt,o-1)}var l=h&&r.from===Y&&r.to===Y,f=u(r.from,0),v=u(r.to,o-1);if(f>v)if(h)f-=o;else{var m=f;f=v,v=m}if(/^(?:asymmetric|continuous)$/.test(n)){var d=n==="asymmetric",p=Math.min,k=v-f+1,y=k-1,S=l?p(k,4):1,g=S,w=S,c=[];if(h||(g=p(1,f),w=p(1,o-v-1)),y+=g+w,y<=1)return;for(var x=0,I=f-g;x<=y;x++,I++)c[x]=s[(I<0?I+o:I)%o]._point;for(var A=c[0]._x+2*c[1]._x,b=c[0]._y+2*c[1]._y,E=2,N=y-1,O=[A],z=[b],T=[E],V=[],B=[],x=1;x<y;x++){var q=x<N,U=q||d?1:2,G=q?4:d?2:7,Q=q?4:d?3:8,$=q?2:d?0:1,it=U/E;E=T[x]=G-it,A=O[x]=Q*c[x]._x+$*c[x+1]._x-it*A,b=z[x]=Q*c[x]._y+$*c[x+1]._y-it*b}V[N]=O[N]/T[N],B[N]=z[N]/T[N];for(var x=y-2;x>=0;x--)V[x]=(O[x]-V[x+1])/T[x],B[x]=(z[x]-B[x+1])/T[x];V[y]=(3*c[y]._x-V[N])/2,B[y]=(3*c[y]._y-B[N])/2;for(var x=g,st=y-w,I=f;x<=st;x++,I++){var Z=s[I<0?I+o:I],K=Z._point,rt=V[x]-K._x,ot=B[x]-K._y;(l||x<st)&&Z.setHandleOut(rt,ot),(l||x>g)&&Z.setHandleIn(-rt,-ot)}}else for(var x=f;x<=v;x++)s[x<0?x+o:x].smooth(r,!l&&x===f,!l&&x===v)},toShape:function(t){if(!this._closed)return null;var e=this._segments,r,n,s,o;function h(d,p){var k=e[d],y=k.getNext(),S=e[p],g=S.getNext();return k._handleOut.isZero()&&y._handleIn.isZero()&&S._handleOut.isZero()&&g._handleIn.isZero()&&y._point.subtract(k._point).isCollinear(g._point.subtract(S._point))}function u(d){var p=e[d],k=p.getPrevious(),y=p.getNext();return k._handleOut.isZero()&&p._handleIn.isZero()&&p._handleOut.isZero()&&y._handleIn.isZero()&&p._point.subtract(k._point).isOrthogonal(y._point.subtract(p._point))}function l(d){var p=e[d],k=p.getNext(),y=p._handleOut,S=k._handleIn,g=.5522847498307936;if(y.isOrthogonal(S)){var w=p._point,c=k._point,x=new Zt(w,y,!0).intersect(new Zt(c,S,!0),!0);return x&&At.isZero(y.getLength()/x.subtract(w).getLength()-g)&&At.isZero(S.getLength()/x.subtract(c).getLength()-g)}return!1}function f(d,p){return e[d]._point.getDistance(e[p]._point)}if(!this.hasHandles()&&e.length===4&&h(0,2)&&h(1,3)&&u(1)?(r=Kt.Rectangle,n=new ht(f(0,3),f(0,1)),o=e[1]._point.add(e[2]._point).divide(2)):e.length===8&&l(0)&&l(2)&&l(4)&&l(6)&&h(1,5)&&h(3,7)?(r=Kt.Rectangle,n=new ht(f(1,6),f(0,3)),s=n.subtract(new ht(f(0,7),f(1,2))).divide(2),o=e[3]._point.add(e[4]._point).divide(2)):e.length===4&&l(0)&&l(1)&&l(2)&&l(3)&&(At.isZero(f(0,2)-f(1,3))?(r=Kt.Circle,s=f(0,2)/2):(r=Kt.Ellipse,s=new ht(f(2,0)/2,f(3,1)/2)),o=e[1]._point),r){var v=this.getPosition(!0),m=new r({center:v,size:n,radius:s,insert:!1});return m.copyAttributes(this,!0),m._matrix.prepend(this._matrix),m.rotate(o.subtract(v).getAngle()+90),(t===Y||t)&&m.insertAbove(this),m}return null},toPath:"#clone",compare:function t(e){if(!e||e instanceof $t)return t.base.call(this,e);var r=this.getCurves(),n=e.getCurves(),s=r.length,o=n.length;if(!s||!o)return s==o;for(var h=r[0].getValues(),u=[],l=0,f,v=0,m,d=0;d<o;d++){var S=n[d].getValues();u.push(S);var p=et.getOverlaps(h,S);if(p){f=!d&&p[0][0]>0?o-1:d,m=p[0][1];break}}for(var k=Math.abs,y=1e-8,S=u[f],g;h&&S;){var p=et.getOverlaps(h,S);if(p){var w=p[0][0];if(k(w-v)<y){v=p[1][0],v===1&&(h=++l<s?r[l].getValues():null,v=0);var c=p[0][1];if(k(c-m)<y){if(g||(g=[f,c]),m=p[1][1],m===1&&(++f>=o&&(f=0),S=u[f]||n[f].getValues(),m=0),!h)return g[0]===f&&g[1]===m;continue}}}break}return!1},_hitTestSelf:function(t,e,r,n){var s=this,o=this.getStyle(),h=this._segments,u=h.length,l=this._closed,f=e._tolerancePadding,v=f,m,d,p,k,y,S,g=e.stroke&&o.hasStroke(),w=e.fill&&o.hasFill(),c=e.curves,x=g?o.getStrokeWidth()/2:w&&e.tolerance>0||c?0:null;x!==null&&(x>0?(m=o.getStrokeJoin(),d=o.getStrokeCap(),p=o.getMiterLimit(),v=v.add(Ct._getStrokePadding(x,n))):m=d="round");function I(V,B){return t.subtract(V).divide(B).length<=1}function A(V,B,q){if(!e.selected||B.isSelected()){var U=V._point;if(B!==U&&(B=B.add(U)),I(B,v))return new xe(q,s,{segment:V,point:B})}}function b(V,B){return(B||e.segments)&&A(V,V._point,"segment")||!B&&e.handles&&(A(V,V._handleIn,"handle-in")||A(V,V._handleOut,"handle-out"))}function E(V){k.add(V)}function N(V){var B=l||V._index>0&&V._index<u-1;if((B?m:d)==="round")return I(V._point,v);if(k=new Ct({internal:!0,closed:!0}),B?V.isSmooth()||Ct._addBevelJoin(V,m,x,p,null,n,E,!0):d==="square"&&Ct._addSquareCap(V,d,x,null,n,E,!0),!k.isEmpty()){var q;return k.contains(t)||(q=k.getNearestLocation(t))&&I(q.getPoint(),f)}}if(e.ends&&!e.segments&&!l){if(S=b(h[0],!0)||b(h[u-1],!0))return S}else if(e.segments||e.handles){for(var O=0;O<u;O++)if(S=b(h[O]))return S}if(x!==null){if(y=this.getNearestLocation(t),y){var z=y.getTime();z===0||z===1&&u>1?N(y.getSegment())||(y=null):I(y.getPoint(),v)||(y=null)}if(!y&&m==="miter"&&u>1)for(var O=0;O<u;O++){var T=h[O];if(t.getDistance(T._point)<=p*x&&N(T)){y=T.getLocation();break}}}return!y&&w&&this._contains(t)||y&&!g&&!c?new xe("fill",this):y?new xe(g?"stroke":"curve",this,{location:y,point:y.getPoint()}):null}},R.each(et._evaluateMethods,function(t){this[t+"At"]=function(e){var r=this.getLocationAt(e);return r&&r[t]()}},{beans:!1,getLocationOf:function(){for(var t=D.read(arguments),e=this.getCurves(),r=0,n=e.length;r<n;r++){var s=e[r].getLocationOf(t);if(s)return s}return null},getOffsetOf:function(){var t=this.getLocationOf.apply(this,arguments);return t?t.getOffset():null},getLocationAt:function(t){if(typeof t=="number"){for(var e=this.getCurves(),r=0,n=0,s=e.length;n<s;n++){var o=r,h=e[n];if(r+=h.getLength(),r>t)return h.getLocationAt(t-o)}if(e.length>0&&t<=this.getLength())return new de(e[e.length-1],1)}else if(t&&t.getPath&&t.getPath()===this)return t;return null},getOffsetsWithTangent:function(){var t=D.read(arguments);if(t.isZero())return[];for(var e=[],r=0,n=this.getCurves(),s=0,o=n.length;s<o;s++){for(var h=n[s],u=h.getTimesWithTangent(t),l=0,f=u.length;l<f;l++){var v=r+h.getOffsetAtTime(u[l]);e.indexOf(v)<0&&e.push(v)}r+=h.length}return e}}),new function(){function t(r,n,s,o){if(o<=0)return;var h=o/2,u=o-2,l=h-1,f=new Array(6),v,m;function d(w){var c=f[w],x=f[w+1];(v!=c||m!=x)&&(r.beginPath(),r.moveTo(v,m),r.lineTo(c,x),r.stroke(),r.beginPath(),r.arc(c,x,h,0,Math.PI*2,!0),r.fill())}for(var p=0,k=n.length;p<k;p++){var y=n[p],S=y._selection;if(y._transformCoordinates(s,f),v=f[0],m=f[1],S&2&&d(2),S&4&&d(4),r.fillRect(v-h,m-h,o,o),u>0&&!(S&1)){var g=r.fillStyle;r.fillStyle="#ffffff",r.fillRect(v-l,m-l,u,u),r.fillStyle=g}}}function e(r,n,s){var o=n._segments,h=o.length,u=new Array(6),l=!0,f,v,m,d,p,k,y,S;function g(c){if(s)c._transformCoordinates(s,u),f=u[0],v=u[1];else{var x=c._point;f=x._x,v=x._y}if(l)r.moveTo(f,v),l=!1;else{if(s)p=u[2],k=u[3];else{var I=c._handleIn;p=f+I._x,k=v+I._y}p===f&&k===v&&y===m&&S===d?r.lineTo(f,v):r.bezierCurveTo(y,S,p,k,f,v)}if(m=f,d=v,s)y=u[4],S=u[5];else{var I=c._handleOut;y=m+I._x,S=d+I._y}}for(var w=0;w<h;w++)g(o[w]);n._closed&&h>0&&g(o[0])}return{_draw:function(r,n,s,o){var h=n.dontStart,u=n.dontFinish||n.clip,l=this.getStyle(),f=l.hasFill(),v=l.hasStroke(),m=l.getDashArray(),d=!bt.support.nativeDash&&v&&m&&m.length;h||r.beginPath(),(f||v&&!d||u)&&(e(r,this,o),this._closed&&r.closePath());function p(c){return m[(c%d+d)%d]}if(!u&&(f||v)&&(this._setStyles(r,n,s),f&&(r.fill(l.getFillRule()),r.shadowColor="rgba(0,0,0,0)"),v)){if(d){h||r.beginPath();for(var k=new Pi(this,.25,32,!1,o),y=k.length,S=-l.getDashOffset(),g,w=0;S>0;)S-=p(w--)+p(w--);for(;S<y;)g=S+p(w++),(S>0||g>0)&&k.drawPart(r,Math.max(S,0),Math.max(g,0)),S=g+p(w++)}r.stroke()}},_drawSelected:function(r,n){r.beginPath(),e(r,this,n),r.stroke(),t(r,this._segments,n,bt.settings.handleSize)}}},new function(){function t(e){var r=e._segments;if(!r.length)throw new Error("Use a moveTo() command first");return r[r.length-1]}return{moveTo:function(){var e=this._segments;e.length===1&&this.removeSegment(0),e.length||this._add([new ct(D.read(arguments))])},moveBy:function(){throw new Error("moveBy() is unsupported on Path items.")},lineTo:function(){this._add([new ct(D.read(arguments))])},cubicCurveTo:function(){var e=arguments,r=D.read(e),n=D.read(e),s=D.read(e),o=t(this);o.setHandleOut(r.subtract(o._point)),this._add([new ct(s,n.subtract(s))])},quadraticCurveTo:function(){var e=arguments,r=D.read(e),n=D.read(e),s=t(this)._point;this.cubicCurveTo(r.add(s.subtract(r).multiply(1/3)),r.add(n.subtract(r).multiply(1/3)),n)},curveTo:function(){var e=arguments,r=D.read(e),n=D.read(e),s=R.pick(R.read(e),.5),o=1-s,h=t(this)._point,u=r.subtract(h.multiply(o*o)).subtract(n.multiply(s*s)).divide(2*s*o);if(u.isNaN())throw new Error("Cannot put a curve through points with parameter = "+s);this.quadraticCurveTo(u,n)},arcTo:function(){var e=arguments,r=Math.abs,n=Math.sqrt,s=t(this),o=s._point,h=D.read(e),u,l=R.peek(e),f=R.pick(l,!0),v,m,d,p;if(typeof f=="boolean")var k=o.add(h).divide(2),u=k.add(k.subtract(o).rotate(f?-90:90));else if(R.remain(e)<=2)u=h,h=D.read(e);else if(!o.equals(h)){var y=ht.read(e),S=At.isZero;if(S(y.width)||S(y.height))return this.lineTo(h);var g=R.read(e),f=!!R.read(e),w=!!R.read(e),k=o.add(h).divide(2),c=o.subtract(k).rotate(-g),x=c.x,I=c.y,A=r(y.width),b=r(y.height),E=A*A,N=b*b,O=x*x,z=I*I,T=n(O/E+z/N);if(T>1&&(A*=T,b*=T,E=A*A,N=b*b),T=(E*N-E*z-N*O)/(E*z+N*O),r(T)<1e-12&&(T=0),T<0)throw new Error("Cannot create an arc with the given arguments");v=new D(A*I/b,-b*x/A).multiply((w===f?-1:1)*n(T)).rotate(g).add(k),p=new wt().translate(v).rotate(g).scale(A,b),d=p._inverseTransform(o),m=d.getDirectedAngle(p._inverseTransform(h)),!f&&m>0?m-=360:f&&m<0&&(m+=360)}if(u){var V=new Zt(o.add(u).divide(2),u.subtract(o).rotate(90),!0),B=new Zt(u.add(h).divide(2),h.subtract(u).rotate(90),!0),q=new Zt(o,h),U=q.getSide(u);if(v=V.intersect(B,!0),!v){if(!U)return this.lineTo(h);throw new Error("Cannot create an arc with the given arguments")}d=o.subtract(v),m=d.getDirectedAngle(h.subtract(v));var G=q.getSide(v,!0);G===0?m=U*r(m):U===G&&(m+=m<0?360:-360)}if(m){for(var Q=1e-5,$=r(m),it=$>=360?4:Math.ceil(($-Q)/90),st=m/it,Z=st*Math.PI/360,K=4/3*Math.sin(Z)/(1+Math.cos(Z)),rt=[],ot=0;ot<=it;ot++){var c=h,at=null;if(ot<it&&(at=d.rotate(90).multiply(K),p?(c=p._transformPoint(d),at=p._transformPoint(d.add(at)).subtract(c)):c=v.add(d)),!ot)s.setHandleOut(at);else{var ft=d.rotate(-90).multiply(K);p&&(ft=p._transformPoint(d.add(ft)).subtract(c)),rt.push(new ct(c,ft,at))}d=d.rotate(st)}this._add(rt)}},lineBy:function(){var e=D.read(arguments),r=t(this)._point;this.lineTo(r.add(e))},curveBy:function(){var e=arguments,r=D.read(e),n=D.read(e),s=R.read(e),o=t(this)._point;this.curveTo(o.add(r),o.add(n),s)},cubicCurveBy:function(){var e=arguments,r=D.read(e),n=D.read(e),s=D.read(e),o=t(this)._point;this.cubicCurveTo(o.add(r),o.add(n),o.add(s))},quadraticCurveBy:function(){var e=arguments,r=D.read(e),n=D.read(e),s=t(this)._point;this.quadraticCurveTo(s.add(r),s.add(n))},arcBy:function(){var e=arguments,r=t(this)._point,n=r.add(D.read(e)),s=R.pick(R.peek(e),!0);typeof s=="boolean"?this.arcTo(n,s):this.arcTo(n,r.add(D.read(e)))},closePath:function(e){this.setClosed(!0),this.join(this,e)}}},{_getBounds:function(t,e){var r=e.handle?"getHandleBounds":e.stroke?"getStrokeBounds":"getBounds";return Ct[r](this._segments,this._closed,this,t,e)},statics:{getBounds:function(t,e,r,n,s,o){var h=t[0];if(!h)return new ut;var u=new Array(6),l=h._transformCoordinates(n,new Array(6)),f=l.slice(0,2),v=f.slice(),m=new Array(2);function d(y){y._transformCoordinates(n,u);for(var S=0;S<2;S++)et._addBounds(l[S],l[S+4],u[S+2],u[S],S,o?o[S]:0,f,v,m);var g=l;l=u,u=g}for(var p=1,k=t.length;p<k;p++)d(t[p]);return e&&d(h),new ut(f[0],f[1],v[0]-f[0],v[1]-f[1])},getStrokeBounds:function(t,e,r,n,s){var o=r.getStyle(),h=o.hasStroke(),u=o.getStrokeWidth(),l=h&&r._getStrokeMatrix(n,s),f=h&&Ct._getStrokePadding(u,l),v=Ct.getBounds(t,e,r,n,s,f);if(!h)return v;var m=u/2,d=o.getStrokeJoin(),p=o.getStrokeCap(),k=o.getMiterLimit(),y=new ut(new ht(f));function S(A){v=v.include(A)}function g(A){v=v.unite(y.setCenter(A._point.transform(n)))}function w(A,b){b==="round"||A.isSmooth()?g(A):Ct._addBevelJoin(A,b,m,k,n,l,S)}function c(A,b){b==="round"?g(A):Ct._addSquareCap(A,b,m,n,l,S)}var x=t.length-(e?0:1);if(x>0){for(var I=1;I<x;I++)w(t[I],d);e?w(t[0],d):(c(t[0],p),c(t[t.length-1],p))}return v},_getStrokePadding:function(t,e){if(!e)return[t,t];var r=new D(t,0).transform(e),n=new D(0,t).transform(e),s=r.getAngleInRadians(),o=r.getLength(),h=n.getLength(),u=Math.sin(s),l=Math.cos(s),f=Math.tan(s),v=Math.atan2(h*f,o),m=Math.atan2(h,f*o);return[Math.abs(o*Math.cos(v)*l+h*Math.sin(v)*u),Math.abs(h*Math.sin(m)*l+o*Math.cos(m)*u)]},_addBevelJoin:function(t,e,r,n,s,o,h,u){var l=t.getCurve(),f=l.getPrevious(),v=l.getPoint1().transform(s),m=f.getNormalAtTime(1).multiply(r).transform(o),d=l.getNormalAtTime(0).multiply(r).transform(o),p=m.getDirectedAngle(d);if((p<0||p>=180)&&(m=m.negate(),d=d.negate()),u&&h(v),h(v.add(m)),e==="miter"){var k=new Zt(v.add(m),new D(-m.y,m.x),!0).intersect(new Zt(v.add(d),new D(-d.y,d.x),!0),!0);k&&v.getDistance(k)<=n*r&&h(k)}h(v.add(d))},_addSquareCap:function(t,e,r,n,s,o,h){var u=t._point.transform(n),l=t.getLocation(),f=l.getNormal().multiply(l.getTime()===0?r:-r).transform(s);e==="square"&&(h&&(o(u.subtract(f)),o(u.add(f))),u=u.add(f.rotate(-90))),o(u.add(f)),o(u.subtract(f))},getHandleBounds:function(t,e,r,n,s){var o=r.getStyle(),h=s.stroke&&o.hasStroke(),u,l;if(h){var f=r._getStrokeMatrix(n,s),v=o.getStrokeWidth()/2,m=v;o.getStrokeJoin()==="miter"&&(m=v*o.getMiterLimit()),o.getStrokeCap()==="square"&&(m=Math.max(m,v*Math.SQRT2)),u=Ct._getStrokePadding(v,f),l=Ct._getStrokePadding(m,f)}for(var d=new Array(6),p=1/0,k=-p,y=p,S=k,g=0,w=t.length;g<w;g++){var c=t[g];c._transformCoordinates(n,d);for(var x=0;x<6;x+=2){var I=x?u:l,A=I?I[0]:0,b=I?I[1]:0,E=d[x],N=d[x+1],O=E-A,z=E+A,T=N-b,V=N+b;O<p&&(p=O),z>k&&(k=z),T<y&&(y=T),V>S&&(S=V)}}return new ut(p,y,k-p,S-y)}}});Ct.inject({statics:new function(){var t=.5522847498307936,e=[new ct([-1,0],[0,t],[0,-t]),new ct([0,-1],[-t,0],[t,0]),new ct([1,0],[0,-t],[0,t]),new ct([0,1],[t,0],[-t,0])];function r(s,o,h){var u=R.getNamed(h),l=new Ct(u&&(u.insert==!0?P.INSERT:u.insert==!1?P.NO_INSERT:null));return l._add(s),l._closed=o,l.set(u,P.INSERT)}function n(s,o,h){for(var u=new Array(4),l=0;l<4;l++){var f=e[l];u[l]=new ct(f._point.multiply(o).add(s),f._handleIn.multiply(o),f._handleOut.multiply(o))}return r(u,!0,h)}return{Line:function(){var s=arguments;return r([new ct(D.readNamed(s,"from")),new ct(D.readNamed(s,"to"))],!1,s)},Circle:function(){var s=arguments,o=D.readNamed(s,"center"),h=R.readNamed(s,"radius");return n(o,new ht(h),s)},Rectangle:function(){var s=arguments,o=ut.readNamed(s,"rectangle"),h=ht.readNamed(s,"radius",0,{readNull:!0}),u=o.getBottomLeft(!0),l=o.getTopLeft(!0),f=o.getTopRight(!0),v=o.getBottomRight(!0),m;if(!h||h.isZero())m=[new ct(u),new ct(l),new ct(f),new ct(v)];else{h=ht.min(h,o.getSize(!0).divide(2));var d=h.width,p=h.height,k=d*t,y=p*t;m=[new ct(u.add(d,0),null,[-k,0]),new ct(u.subtract(0,p),[0,y]),new ct(l.add(0,p),null,[0,-y]),new ct(l.add(d,0),[-k,0],null),new ct(f.subtract(d,0),null,[k,0]),new ct(f.add(0,p),[0,-y],null),new ct(v.subtract(0,p),null,[0,y]),new ct(v.subtract(d,0),[k,0])]}return r(m,!0,s)},RoundRectangle:"#Rectangle",Ellipse:function(){var s=arguments,o=Kt._readEllipse(s);return n(o.center,o.radius,s)},Oval:"#Ellipse",Arc:function(){var s=arguments,o=D.readNamed(s,"from"),h=D.readNamed(s,"through"),u=D.readNamed(s,"to"),l=R.getNamed(s),f=new Ct(l&&l.insert==!1&&P.NO_INSERT);return f.moveTo(o),f.arcTo(h,u),f.set(l)},RegularPolygon:function(){for(var s=arguments,o=D.readNamed(s,"center"),h=R.readNamed(s,"sides"),u=R.readNamed(s,"radius"),l=360/h,f=h%3===0,v=new D(0,f?-u:u),m=f?-1:.5,d=new Array(h),p=0;p<h;p++)d[p]=new ct(o.add(v.rotate((p+m)*l)));return r(d,!0,s)},Star:function(){for(var s=arguments,o=D.readNamed(s,"center"),h=R.readNamed(s,"points")*2,u=R.readNamed(s,"radius1"),l=R.readNamed(s,"radius2"),f=360/h,v=new D(0,-1),m=new Array(h),d=0;d<h;d++)m[d]=new ct(o.add(v.rotate(f*d).multiply(d%2?l:u)));return r(m,!0,s)}}}});var $t=Ee.extend({_class:"CompoundPath",_serializeFields:{children:[]},beans:!0,initialize:function(e){this._children=[],this._namedChildren={},this._initialize(e)||(typeof e=="string"?this.setPathData(e):this.addChildren(Array.isArray(e)?e:arguments))},insertChildren:function t(e,r){var n=r,s=n[0];s&&typeof s[0]=="number"&&(n=[n]);for(var o=r.length-1;o>=0;o--){var h=n[o];n===r&&!(h instanceof Ct)&&(n=R.slice(n)),Array.isArray(h)?n[o]=new Ct({segments:h,insert:!1}):h instanceof $t&&(n.splice.apply(n,[o,1].concat(h.removeChildren())),h.remove())}return t.base.call(this,e,n)},reduce:function t(e){for(var r=this._children,n=r.length-1;n>=0;n--){var s=r[n].reduce(e);s.isEmpty()&&s.remove()}if(!r.length){var s=new Ct(P.NO_INSERT);return s.copyAttributes(this),s.insertAbove(this),this.remove(),s}return t.base.call(this)},isClosed:function(){for(var t=this._children,e=0,r=t.length;e<r;e++)if(!t[e]._closed)return!1;return!0},setClosed:function(t){for(var e=this._children,r=0,n=e.length;r<n;r++)e[r].setClosed(t)},getFirstSegment:function(){var t=this.getFirstChild();return t&&t.getFirstSegment()},getLastSegment:function(){var t=this.getLastChild();return t&&t.getLastSegment()},getCurves:function(){for(var t=this._children,e=[],r=0,n=t.length;r<n;r++)R.push(e,t[r].getCurves());return e},getFirstCurve:function(){var t=this.getFirstChild();return t&&t.getFirstCurve()},getLastCurve:function(){var t=this.getLastChild();return t&&t.getLastCurve()},getArea:function(){for(var t=this._children,e=0,r=0,n=t.length;r<n;r++)e+=t[r].getArea();return e},getLength:function(){for(var t=this._children,e=0,r=0,n=t.length;r<n;r++)e+=t[r].getLength();return e},getPathData:function(t,e){for(var r=this._children,n=[],s=0,o=r.length;s<o;s++){var h=r[s],u=h._matrix;n.push(h.getPathData(t&&!u.isIdentity()?t.appended(u):t,e))}return n.join("")},_hitTestChildren:function t(e,r,n){return t.base.call(this,e,r.class===Ct||r.type==="path"?r:R.set({},r,{fill:!1}),n)},_draw:function(t,e,r,n){var s=this._children;if(s.length){e=e.extend({dontStart:!0,dontFinish:!0}),t.beginPath();for(var o=0,h=s.length;o<h;o++)s[o].draw(t,e,n);if(!e.clip){this._setStyles(t,e,r);var u=this._style;u.hasFill()&&(t.fill(u.getFillRule()),t.shadowColor="rgba(0,0,0,0)"),u.hasStroke()&&t.stroke()}}},_drawSelected:function(t,e,r){for(var n=this._children,s=0,o=n.length;s<o;s++){var h=n[s],u=h._matrix;r[h._id]||h._drawSelected(t,u.isIdentity()?e:e.appended(u))}}},new function(){function t(e,r){var n=e._children;if(r&&!n.length)throw new Error("Use a moveTo() command first");return n[n.length-1]}return R.each(["lineTo","cubicCurveTo","quadraticCurveTo","curveTo","arcTo","lineBy","cubicCurveBy","quadraticCurveBy","curveBy","arcBy"],function(e){this[e]=function(){var r=t(this,!0);r[e].apply(r,arguments)}},{moveTo:function(){var e=t(this),r=e&&e.isEmpty()?e:new Ct(P.NO_INSERT);r!==e&&this.addChild(r),r.moveTo.apply(r,arguments)},moveBy:function(){var e=t(this,!0),r=e&&e.getLastSegment(),n=D.read(arguments);this.moveTo(r?n.add(r._point):n)},closePath:function(e){t(this,!0).closePath(e)}})},R.each(["reverse","flatten","simplify","smooth"],function(t){this[t]=function(e){for(var r=this._children,n,s=0,o=r.length;s<o;s++)n=r[s][t](e)||n;return n}},{}));Ee.inject(new function(){var t=Math.min,e=Math.max,r=Math.abs,n={unite:{1:!0,2:!0},intersect:{2:!0},subtract:{1:!0},exclude:{1:!0,"-1":!0}};function s(g){return g._children||[g]}function o(g,w){var c=g.clone(!1).reduce({simplify:!0}).transform(null,!0,!0);if(w){for(var x=s(c),I=0,A=x.length;I<A;I++){var g=x[I];!g._closed&&!g.isEmpty()&&(g.closePath(1e-12),g.getFirstSegment().setHandleIn(0,0),g.getLastSegment().setHandleOut(0,0))}c=c.resolveCrossings().reorient(c.getFillRule()==="nonzero",!0)}return c}function h(g,w,c,x,I){var A=new $t(P.NO_INSERT);return A.addChildren(g,!0),A=A.reduce({simplify:w}),I&&I.insert==!1||A.insertAbove(x&&c.isSibling(x)&&c.getIndex()<x.getIndex()?x:c),A.copyAttributes(c,!0),A}function u(g){return g.hasOverlap()||g.isCrossing()}function l(g,w,c,x){if(x&&(x.trace==!1||x.stroke)&&/^(subtract|intersect)$/.test(c))return f(g,w,c);var I=o(g,!0),A=w&&g!==w&&o(w,!0),b=n[c];b[c]=!0,A&&(b.subtract||b.exclude)^(A.isClockwise()^I.isClockwise())&&A.reverse();var E=p(de.expand(I.getIntersections(A,u))),N=s(I),O=A&&s(A),z=[],T=[],V;function B(at){for(var ft=0,lt=at.length;ft<lt;ft++){var _t=at[ft];R.push(z,_t._segments),R.push(T,_t.getCurves()),_t._overlapsOnly=!0}}function q(at){for(var ft=[],lt=0,_t=at&&at.length;lt<_t;lt++)ft.push(T[at[lt]]);return ft}if(E.length){B(N),O&&B(O);for(var U=new Array(T.length),G=0,Q=T.length;G<Q;G++)U[G]=T[G].getValues();for(var $=si.findCurveBoundsCollisions(U,U,0,!0),it={},G=0;G<T.length;G++){var st=T[G],Z=st._path._id,K=it[Z]=it[Z]||{};K[st.getIndex()]={hor:q($[G].hor),ver:q($[G].ver)}}for(var G=0,Q=E.length;G<Q;G++)y(E[G]._segment,I,A,it,b);for(var G=0,Q=z.length;G<Q;G++){var rt=z[G],ot=rt._intersection;rt._winding||y(rt,I,A,it,b),ot&&ot._overlap||(rt._path._overlapsOnly=!1)}V=S(z,b)}else V=d(O?N.concat(O):N.slice(),function(at){return!!b[at]});return h(V,!0,g,w,x)}function f(g,w,c){var x=o(g),I=o(w),A=x.getIntersections(I,u),b=c==="subtract",E=c==="divide",N={},O=[];function z(B){if(!N[B._id]&&(E||I.contains(B.getPointAt(B.getLength()/2))^b))return O.unshift(B),N[B._id]=!0}for(var T=A.length-1;T>=0;T--){var V=A[T].split();V&&(z(V)&&V.getFirstSegment().setHandleIn(0,0),x.getLastSegment().setHandleOut(0,0))}return z(x),h(O,!1,g,w)}function v(g,w){for(var c=g;c;){if(c===w)return;c=c._previous}for(;g._next&&g._next!==w;)g=g._next;if(!g._next){for(;w._previous;)w=w._previous;g._next=w,w._previous=g}}function m(g){for(var w=g.length-1;w>=0;w--)g[w].clearHandles()}function d(g,w,c){var x=g&&g.length;if(x){var I=R.each(g,function($,it){this[$._id]={container:null,winding:$.isClockwise()?1:-1,index:it}},{}),A=g.slice().sort(function($,it){return r(it.getArea())-r($.getArea())}),b=A[0],E=si.findItemBoundsCollisions(A,null,At.GEOMETRIC_EPSILON);c==null&&(c=b.isClockwise());for(var N=0;N<x;N++){var O=A[N],z=I[O._id],T=0,V=E[N];if(V){for(var B=null,q=V.length-1;q>=0;q--)if(V[q]<N){B=B||O.getInteriorPoint();var U=A[V[q]];if(U.contains(B)){var G=I[U._id];T=G.winding,z.winding+=T,z.container=G.exclude?G.container:U;break}}}if(w(z.winding)===w(T))z.exclude=!0,g[z.index]=null;else{var Q=z.container;O.setClockwise(Q?!Q.isClockwise():c)}}}return g}function p(g,w,c){var x=w&&[],I=1e-8,A=1-I,b=!1,E=c||[],N=c&&{},O,z,T;function V(ft){return ft._path._id+"."+ft._segment1._index}for(var B=(c&&c.length)-1;B>=0;B--){var q=c[B];q._path&&(N[V(q)]=!0)}for(var B=g.length-1;B>=0;B--){var U=g[B],G=U._time,Q=G,$=w&&!w(U),q=U._curve,it;if(q&&(q!==z?(b=!q.hasHandles()||N&&N[V(q)],O=[],T=null,z=q):T>=I&&(G/=T)),$){O&&O.push(U);continue}else w&&x.unshift(U);if(T=Q,G<I)it=q._segment1;else if(G>A)it=q._segment2;else{var st=q.divideAtTime(G,!0);b&&E.push(q,st),it=st._segment1;for(var Z=O.length-1;Z>=0;Z--){var K=O[Z];K._time=(K._time-G)/(1-G)}}U._setSegment(it);var rt=it._intersection,ot=U._intersection;if(rt){v(rt,ot);for(var at=rt;at;)v(at._intersection,rt),at=at._next}else it._intersection=ot}return c||m(E),x||g}function k(g,w,c,x,I){var A=Array.isArray(w)?w:w[c?"hor":"ver"],b=c?1:0,E=b^1,N=[g.x,g.y],O=N[b],z=N[E],T=1e-9,V=1e-6,B=O-T,q=O+T,U=0,G=0,Q=0,$=0,it=!1,st=!1,Z=1,K=[],rt,ot;function at(tt){var Bt=tt[E+0],qt=tt[E+6];if(!(z<t(Bt,qt)||z>e(Bt,qt))){var Qt=tt[b+0],pe=tt[b+2],Se=tt[b+4],ge=tt[b+6];if(Bt===qt){(Qt<q&&ge>B||ge<q&&Qt>B)&&(it=!0);return}var _e=z===Bt?0:z===qt||B>e(Qt,pe,Se,ge)||q<t(Qt,pe,Se,ge)?1:et.solveCubic(tt,E,z,K,0,1)>0?K[0]:1,se=_e===0?Qt:_e===1?ge:et.getPoint(tt,_e)[c?"y":"x"],le=Bt>qt?1:-1,Ce=rt[E]>rt[E+6]?1:-1,Yt=rt[b+6];return z!==Bt?(se<B?Q+=le:se>q?$+=le:it=!0,se>O-V&&se<O+V&&(Z/=2)):(le!==Ce?Qt<B?Q+=le:Qt>q&&($+=le):Qt!=Yt&&(Yt<q&&se>q?($+=le,it=!0):Yt>B&&se<B&&(Q+=le,it=!0)),Z/=4),rt=tt,!I&&se>B&&se<q&&et.getTangent(tt,_e)[c?"x":"y"]===0&&k(g,w,!c,x,!0)}}function ft(tt){var Bt=tt[E+0],qt=tt[E+2],Qt=tt[E+4],pe=tt[E+6];if(z<=e(Bt,qt,Qt,pe)&&z>=t(Bt,qt,Qt,pe)){for(var Se=tt[b+0],ge=tt[b+2],_e=tt[b+4],se=tt[b+6],le=B>e(Se,ge,_e,se)||q<t(Se,ge,_e,se)?[tt]:et.getMonoCurves(tt,c),Ce,Yt=0,ae=le.length;Yt<ae;Yt++)if(Ce=at(le[Yt]))return Ce}}for(var lt=0,_t=A.length;lt<_t;lt++){var xt=A[lt],pt=xt._path,Xt=xt.getValues(),Gt;if((!lt||A[lt-1]._path!==pt)&&(rt=null,pt._closed||(ot=et.getValues(pt.getLastCurve().getSegment2(),xt.getSegment1(),null,!x),ot[E]!==ot[E+6]&&(rt=ot)),!rt)){rt=Xt;for(var te=pt.getLastCurve();te&&te!==xt;){var Wt=te.getValues();if(Wt[E]!==Wt[E+6]){rt=Wt;break}te=te.getPrevious()}}if(Gt=ft(Xt))return Gt;if(lt+1===_t||A[lt+1]._path!==pt){if(ot&&(Gt=ft(ot)))return Gt;it&&!Q&&!$&&(Q=$=pt.isClockwise(x)^c?1:-1),U+=Q,G+=$,Q=$=0,it&&(st=!0,it=!1),ot=null}}return U=r(U),G=r(G),{winding:e(U,G),windingL:U,windingR:G,quality:Z,onPath:st}}function y(g,w,c,x,I){var A=[],b=g,E=0,T;do{var N=g.getCurve();if(N){var O=N.getLength();A.push({segment:g,curve:N,length:O}),E+=O}g=g.getNext()}while(g&&!g._intersection&&g!==b);for(var z=[.5,.25,.75],T={winding:0,quality:-1},V=.001,B=1-V,q=0;q<z.length&&T.quality<.5;q++)for(var O=E*z[q],U=0,G=A.length;U<G;U++){var Q=A[U],$=Q.length;if(O<=$){var N=Q.curve,it=N._path,st=it._parent,Z=st instanceof $t?st:it,K=At.clamp(N.getTimeAt(O),V,B),rt=N.getPointAtTime(K),ot=r(N.getTangentAtTime(K).y)<Math.SQRT1_2,at=null;if(I.subtract&&c){var ft=Z===w?c:w,lt=ft._getWinding(rt,ot,!0);if(Z===w&&lt.winding||Z===c&&!lt.winding){if(lt.quality<1)continue;at={winding:0,quality:1}}}at=at||k(rt,x[it._id][N.getIndex()],ot,!0),at.quality>T.quality&&(T=at);break}O-=$}for(var U=A.length-1;U>=0;U--)A[U].segment._winding=T}function S(g,w){var c=[],x;function I(_t){var xt;return!!(_t&&!_t._visited&&(!w||w[(xt=_t._winding||{}).winding]&&!(w.unite&&xt.winding===2&&xt.windingL&&xt.windingR)))}function A(_t){if(_t){for(var xt=0,pt=x.length;xt<pt;xt++)if(_t===x[xt])return!0}return!1}function b(_t){for(var xt=_t._segments,pt=0,Xt=xt.length;pt<Xt;pt++)xt[pt]._visited=!0}function E(_t,xt){var pt=_t._intersection,Xt=pt,Gt=[];xt&&(x=[_t]);function te(Wt,tt){for(;Wt&&Wt!==tt;){var Bt=Wt._segment,qt=Bt&&Bt._path;if(qt){var Qt=Bt.getNext()||qt.getFirstSegment(),pe=Qt._intersection;Bt!==_t&&(A(Bt)||A(Qt)||Qt&&I(Bt)&&(I(Qt)||pe&&I(pe._segment)))&&Gt.push(Bt),xt&&x.push(Bt)}Wt=Wt._next}}if(pt){for(te(pt);pt&&pt._previous;)pt=pt._previous;te(pt,Xt)}return Gt}g.sort(function(_t,xt){var pt=_t._intersection,Xt=xt._intersection,Gt=!!(pt&&pt._overlap),te=!!(Xt&&Xt._overlap),Wt=_t._path,tt=xt._path;return Gt^te?Gt?1:-1:!pt^!Xt?pt?1:-1:Wt!==tt?Wt._id-tt._id:_t._index-xt._index});for(var N=0,O=g.length;N<O;N++){var z=g[N],T=I(z),V=null,B=!1,q=!0,U=[],G,Q,$;if(T&&z._path._overlapsOnly){var it=z._path,st=z._intersection._segment._path;it.compare(st)&&(it.getArea()&&c.push(it.clone(!1)),b(it),b(st),T=!1)}for(;T;){var Z=!V,K=E(z,Z),rt=K.shift(),B=!Z&&(A(z)||A(rt)),ot=!B&&rt;if(Z&&(V=new Ct(P.NO_INSERT),G=null),B){(z.isFirst()||z.isLast())&&(q=z._path._closed),z._visited=!0;break}if(ot&&G&&(U.push(G),G=null),G||(ot&&K.push(z),G={start:V._segments.length,crossings:K,visited:Q=[],handleIn:$}),ot&&(z=rt),!I(z)){V.removeSegments(G.start);for(var at=0,ft=Q.length;at<ft;at++)Q[at]._visited=!1;Q.length=0;do z=G&&G.crossings.shift(),(!z||!z._path)&&(z=null,G=U.pop(),G&&(Q=G.visited,$=G.handleIn));while(G&&!I(z));if(!z)break}var lt=z.getNext();V.add(new ct(z._point,$,lt&&z._handleOut)),z._visited=!0,Q.push(z),z=lt||z._path.getFirstSegment(),$=lt&&lt._handleIn}B&&(q&&(V.getFirstSegment().setHandleIn($),V.setClosed(q)),V.getArea()!==0&&c.push(V))}return c}return{_getWinding:function(g,w,c){return k(g,this.getCurves(),w,c)},unite:function(g,w){return l(this,g,"unite",w)},intersect:function(g,w){return l(this,g,"intersect",w)},subtract:function(g,w){return l(this,g,"subtract",w)},exclude:function(g,w){return l(this,g,"exclude",w)},divide:function(g,w){return w&&(w.trace==!1||w.stroke)?f(this,g,"divide"):h([this.subtract(g,w),this.intersect(g,w)],!0,this,g,w)},resolveCrossings:function(){var g=this._children,w=g||[this];function c(G,Q){var $=G&&G._intersection;return $&&$._overlap&&$._path===Q}var x=!1,I=!1,A=this.getIntersections(null,function(G){return G.hasOverlap()&&(x=!0)||G.isCrossing()&&(I=!0)}),b=x&&I&&[];if(A=de.expand(A),x)for(var E=p(A,function(G){return G.hasOverlap()},b),N=E.length-1;N>=0;N--){var O=E[N],z=O._path,T=O._segment,V=T.getPrevious(),B=T.getNext();c(V,z)&&c(B,z)&&(T.remove(),V._handleOut._set(0,0),B._handleIn._set(0,0),V!==T&&!V.getCurve().hasLength()&&(B._handleIn.set(V._handleIn),V.remove()))}I&&(p(A,x&&function(G){var Q=G.getCurve(),$=G.getSegment(),it=G._intersection,st=it._curve,Z=it._segment;if(Q&&st&&Q._path&&st._path)return!0;$&&($._intersection=null),Z&&(Z._intersection=null)},b),b&&m(b),w=S(R.each(w,function(G){R.push(this,G._segments)},[])));var q=w.length,U;return q>1&&g?(w!==g&&this.setChildren(w),U=this):q===1&&!g&&(w[0]!==this&&this.setSegments(w[0].removeSegments()),U=this),U||(U=new $t(P.NO_INSERT),U.addChildren(w),U=U.reduce(),U.copyAttributes(this),this.replaceWith(U)),U},reorient:function(g,w){var c=this._children;return c&&c.length?this.setChildren(d(this.removeChildren(),function(x){return!!(g?x:x&1)},w)):w!==Y&&this.setClockwise(w),this},getInteriorPoint:function(){var g=this.getBounds(),w=g.getCenter(!0);if(!this.contains(w)){for(var c=this.getCurves(),x=w.y,I=[],A=[],b=0,E=c.length;b<E;b++){var N=c[b].getValues(),O=N[1],z=N[3],T=N[5],V=N[7];if(x>=t(O,z,T,V)&&x<=e(O,z,T,V))for(var B=et.getMonoCurves(N),q=0,U=B.length;q<U;q++){var G=B[q],Q=G[1],$=G[7];if(Q!==$&&(x>=Q&&x<=$||x>=$&&x<=Q)){var it=x===Q?G[0]:x===$?G[6]:et.solveCubic(G,1,x,A,0,1)===1?et.getPoint(G,A[0]).x:(G[0]+G[6])/2;I.push(it)}}}I.length>1&&(I.sort(function(st,Z){return st-Z}),w.x=(I[0]+I[1])/2)}return w}}});var Pi=R.extend({_class:"PathFlattener",initialize:function(t,e,r,n,s){var o=[],h=[],u=0,l=1/(r||32),f=t._segments,v=f[0],m;function d(S,g){var w=et.getValues(S,g,s);o.push(w),p(w,S._index,0,1)}function p(S,g,w,c){if(c-w>l&&!(n&&et.isStraight(S))&&!et.isFlatEnough(S,e||.25)){var x=et.subdivide(S,.5),I=(w+c)/2;p(x[0],g,w,I),p(x[1],g,I,c)}else{var A=S[6]-S[0],b=S[7]-S[1],E=Math.sqrt(A*A+b*b);E>0&&(u+=E,h.push({offset:u,curve:S,index:g,time:c}))}}for(var k=1,y=f.length;k<y;k++)m=f[k],d(v,m),v=m;t._closed&&d(m||v,f[0]),this.curves=o,this.parts=h,this.length=u,this.index=0},_get:function(t){for(var e=this.parts,r=e.length,n,s=this.index;n=s,!(!s||e[--s].offset<t););for(;n<r;n++){var o=e[n];if(o.offset>=t){this.index=n;var h=e[n-1],u=h&&h.index===o.index?h.time:0,l=h?h.offset:0;return{index:o.index,time:u+(o.time-u)*(t-l)/(o.offset-l)}}}return{index:e[r-1].index,time:1}},drawPart:function(t,e,r){for(var n=this._get(e),s=this._get(r),o=n.index,h=s.index;o<=h;o++){var u=et.getPart(this.curves[o],o===n.index?n.time:0,o===s.index?s.time:1);o===n.index&&t.moveTo(u[0],u[1]),t.bezierCurveTo.apply(t,u.slice(2))}}},R.each(et._evaluateMethods,function(t){this[t+"At"]=function(e){var r=this._get(e);return et[t](this.curves[r.index],r.time)}},{})),Be=R.extend({initialize:function(t){for(var e=this.points=[],r=t._segments,n=t._closed,s=0,o,h=r.length;s<h;s++){var u=r[s].point;(!o||!o.equals(u))&&e.push(o=u.clone())}n&&(e.unshift(e[e.length-1]),e.push(e[1])),this.closed=n},fit:function(t){var e=this.points,r=e.length,n=null;return r>0&&(n=[new ct(e[0])],r>1&&(this.fitCubic(n,t,0,r-1,e[1].subtract(e[0]),e[r-2].subtract(e[r-1])),this.closed&&(n.shift(),n.pop()))),n},fitCubic:function(t,e,r,n,s,o){var h=this.points;if(n-r===1){var u=h[r],l=h[n],f=u.getDistance(l)/3;this.addCurve(t,[u,u.add(s.normalize(f)),l.add(o.normalize(f)),l]);return}for(var v=this.chordLengthParameterize(r,n),m=Math.max(e,e*e),d,p=!0,k=0;k<=4;k++){var y=this.generateBezier(r,n,v,s,o),S=this.findMaxError(r,n,y,v);if(S.error<e&&p){this.addCurve(t,y);return}if(d=S.index,S.error>=m)break;p=this.reparameterize(r,n,v,y),m=S.error}var g=h[d-1].subtract(h[d+1]);this.fitCubic(t,e,r,d,s,g),this.fitCubic(t,e,d,n,g.negate(),o)},addCurve:function(t,e){var r=t[t.length-1];r.setHandleOut(e[1].subtract(e[0])),t.push(new ct(e[3],e[2].subtract(e[3])))},generateBezier:function(t,e,r,n,s){for(var o=1e-12,h=Math.abs,u=this.points,l=u[t],f=u[e],v=[[0,0],[0,0]],m=[0,0],d=0,p=e-t+1;d<p;d++){var k=r[d],y=1-k,S=3*k*y,g=y*y*y,w=S*y,c=S*k,x=k*k*k,I=n.normalize(w),A=s.normalize(c),b=u[t+d].subtract(l.multiply(g+w)).subtract(f.multiply(c+x));v[0][0]+=I.dot(I),v[0][1]+=I.dot(A),v[1][0]=v[0][1],v[1][1]+=A.dot(A),m[0]+=I.dot(b),m[1]+=A.dot(b)}var E=v[0][0]*v[1][1]-v[1][0]*v[0][1],N,O;if(h(E)>o){var z=v[0][0]*m[1]-v[1][0]*m[0],T=m[0]*v[1][1]-m[1]*v[0][1];N=T/E,O=z/E}else{var V=v[0][0]+v[0][1],B=v[1][0]+v[1][1];N=O=h(V)>o?m[0]/V:h(B)>o?m[1]/B:0}var q=f.getDistance(l),U=o*q,G,Q;if(N<U||O<U)N=O=q/3;else{var $=f.subtract(l);G=n.normalize(N),Q=s.normalize(O),G.dot($)-Q.dot($)>q*q&&(N=O=q/3,G=Q=null)}return[l,l.add(G||n.normalize(N)),f.add(Q||s.normalize(O)),f]},reparameterize:function(t,e,r,n){for(var s=t;s<=e;s++)r[s-t]=this.findRoot(n,this.points[s],r[s-t]);for(var s=1,o=r.length;s<o;s++)if(r[s]<=r[s-1])return!1;return!0},findRoot:function(t,e,r){for(var n=[],s=[],o=0;o<=2;o++)n[o]=t[o+1].subtract(t[o]).multiply(3);for(var o=0;o<=1;o++)s[o]=n[o+1].subtract(n[o]).multiply(2);var h=this.evaluate(3,t,r),u=this.evaluate(2,n,r),l=this.evaluate(1,s,r),f=h.subtract(e),v=u.dot(u)+f.dot(l);return At.isMachineZero(v)?r:r-f.dot(u)/v},evaluate:function(t,e,r){for(var n=e.slice(),s=1;s<=t;s++)for(var o=0;o<=t-s;o++)n[o]=n[o].multiply(1-r).add(n[o+1].multiply(r));return n[0]},chordLengthParameterize:function(t,e){for(var r=[0],n=t+1;n<=e;n++)r[n-t]=r[n-t-1]+this.points[n].getDistance(this.points[n-1]);for(var n=1,s=e-t;n<=s;n++)r[n]/=r[s];return r},findMaxError:function(t,e,r,n){for(var s=Math.floor((e-t+1)/2),o=0,h=t+1;h<e;h++){var u=this.evaluate(3,r,n[h-t]),l=u.subtract(this.points[h]),f=l.x*l.x+l.y*l.y;f>=o&&(o=f,s=h)}return{error:o,index:s}}}),Pe=P.extend({_class:"TextItem",_applyMatrix:!1,_canApplyMatrix:!1,_serializeFields:{content:null},_boundsOptions:{stroke:!1,handle:!1},initialize:function(e){this._content="",this._lines=[];var r=e&&R.isPlainObject(e)&&e.x===Y&&e.y===Y;this._initialize(r&&e,!r&&D.read(arguments))},_equals:function(t){return this._content===t._content},copyContent:function(t){this.setContent(t._content)},getContent:function(){return this._content},setContent:function(t){this._content=""+t,this._lines=this._content.split(/\r\n|\n|\r/mg),this._changed(521)},isEmpty:function(){return!this._content},getCharacterStyle:"#getStyle",setCharacterStyle:"#setStyle",getParagraphStyle:"#getStyle",setParagraphStyle:"#setStyle"}),di=Pe.extend({_class:"PointText",initialize:function(){Pe.apply(this,arguments)},getPoint:function(){var t=this._matrix.getTranslation();return new Jt(t.x,t.y,this,"setPoint")},setPoint:function(){var t=D.read(arguments);this.translate(t.subtract(this._matrix.getTranslation()))},_draw:function(t,e,r){if(this._content){this._setStyles(t,e,r);var n=this._lines,s=this._style,o=s.hasFill(),h=s.hasStroke(),u=s.getLeading(),l=t.shadowColor;t.font=s.getFontStyle(),t.textAlign=s.getJustification();for(var f=0,v=n.length;f<v;f++){t.shadowColor=l;var m=n[f];o&&(t.fillText(m,0,0),t.shadowColor="rgba(0,0,0,0)"),h&&t.strokeText(m,0,0),t.translate(0,u)}}},_getBounds:function(t,e){var r=this._style,n=this._lines,s=n.length,o=r.getJustification(),h=r.getLeading(),u=this.getView().getTextWidth(r.getFontStyle(),n),l=0;o!=="left"&&(l-=u/(o==="center"?2:1));var f=new ut(l,s?-.75*h:0,u,s*h);return t?t._transformBounds(f,f):f}}),Ut=R.extend(new function(){var t={gray:["gray"],rgb:["red","green","blue"],hsb:["hue","saturation","brightness"],hsl:["hue","saturation","lightness"],gradient:["gradient","origin","destination","highlight"]},e={},r={transparent:[0,0,0,0]},n;function s(u){var l=u.match(/^#([\da-f]{2})([\da-f]{2})([\da-f]{2})([\da-f]{2})?$/i)||u.match(/^#([\da-f])([\da-f])([\da-f])([\da-f])?$/i),f="rgb",v;if(l){var m=l[4]?4:3;v=new Array(m);for(var d=0;d<m;d++){var p=l[d+1];v[d]=parseInt(p.length==1?p+p:p,16)/255}}else if(l=u.match(/^(rgb|hsl)a?\((.*)\)$/)){f=l[1],v=l[2].trim().split(/[,\s]+/g);for(var k=f==="hsl",d=0,y=Math.min(v.length,4);d<y;d++){var S=v[d],p=parseFloat(S);if(k)if(d===0){var g=S.match(/([a-z]*)$/)[1];p*={turn:360,rad:180/Math.PI,grad:.9}[g]||1}else d<3&&(p/=100);else d<3&&(p/=/%$/.test(S)?100:255);v[d]=p}}else{var w=r[u];if(!w)if(Ot){n||(n=Ht.getContext(1,1,{willReadFrequently:!0}),n.globalCompositeOperation="copy"),n.fillStyle="rgba(0,0,0,0)",n.fillStyle=u,n.fillRect(0,0,1,1);var c=n.getImageData(0,0,1,1).data;w=r[u]=[c[0]/255,c[1]/255,c[2]/255]}else w=[0,0,0];v=w.slice()}return[f,v]}var o=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]],h={"rgb-hsb":function(u,l,f){var v=Math.max(u,l,f),m=Math.min(u,l,f),d=v-m,p=d===0?0:(v==u?(l-f)/d+(l<f?6:0):v==l?(f-u)/d+2:(u-l)/d+4)*60;return[p,v===0?0:d/v,v]},"hsb-rgb":function(u,l,f){u=(u/60%6+6)%6;var m=Math.floor(u),v=u-m,m=o[m],d=[f,f*(1-l),f*(1-l*v),f*(1-l*(1-v))];return[d[m[0]],d[m[1]],d[m[2]]]},"rgb-hsl":function(u,l,f){var v=Math.max(u,l,f),m=Math.min(u,l,f),d=v-m,p=d===0,k=p?0:(v==u?(l-f)/d+(l<f?6:0):v==l?(f-u)/d+2:(u-l)/d+4)*60,y=(v+m)/2,S=p?0:y<.5?d/(v+m):d/(2-v-m);return[k,S,y]},"hsl-rgb":function(u,l,f){if(u=(u/360%1+1)%1,l===0)return[f,f,f];for(var v=[u+1/3,u,u-1/3],m=f<.5?f*(1+l):f+l-f*l,d=2*f-m,p=[],k=0;k<3;k++){var y=v[k];y<0&&(y+=1),y>1&&(y-=1),p[k]=6*y<1?d+(m-d)*6*y:2*y<1?m:3*y<2?d+(m-d)*(2/3-y)*6:d}return p},"rgb-gray":function(u,l,f){return[u*.2989+l*.587+f*.114]},"gray-rgb":function(u){return[u,u,u]},"gray-hsb":function(u){return[0,0,u]},"gray-hsl":function(u){return[0,0,u]},"gradient-rgb":function(){return[]},"rgb-gradient":function(){return[]}};return R.each(t,function(u,l){e[l]=[],R.each(u,function(f,v){var m=R.capitalize(f),d=/^(hue|saturation)$/.test(f),p=e[l][v]=l==="gradient"?f==="gradient"?function(k){var y=this._components[0];return k=Ze.read(Array.isArray(k)?k:arguments,0,{readNull:!0}),y!==k&&(y&&y._removeOwner(this),k&&k._addOwner(this)),k}:function(){return D.read(arguments,0,{readNull:f==="highlight",clone:!0})}:function(k){return k==null||isNaN(k)?0:+k};this["get"+m]=function(){return this._type===l||d&&/^hs[bl]$/.test(this._type)?this._components[v]:this._convert(l)[v]},this["set"+m]=function(k){this._type!==l&&!(d&&/^hs[bl]$/.test(this._type))&&(this._components=this._convert(l),this._properties=t[l],this._type=l),this._components[v]=p.call(this,k),this._changed()}},this)},{_class:"Color",_readIndex:!0,initialize:function u(l){var f=arguments,v=this.__read,m=0,d,p,k,y;Array.isArray(l)&&(f=l,l=f[0]);var S=l!=null&&typeof l;if(S==="string"&&l in t&&(d=l,l=f[1],Array.isArray(l)?(p=l,k=f[2]):(v&&(m=1),f=R.slice(f,1),S=typeof l)),!p){if(y=S==="number"?f:S==="object"&&l.length!=null?l:null,y){d||(d=y.length>=3?"rgb":"gray");var g=t[d].length;k=y[g],v&&(m+=y===arguments?g+(k!=null?1:0):1),y.length>g&&(y=R.slice(y,0,g))}else if(S==="string"){var w=s(l);d=w[0],p=w[1],p.length===4&&(k=p[3],p.length--)}else if(S==="object")if(l.constructor===u){if(d=l._type,p=l._components.slice(),k=l._alpha,d==="gradient")for(var c=1,x=p.length;c<x;c++){var I=p[c];I&&(p[c]=I.clone())}}else if(l.constructor===Ze)d="gradient",y=f;else{d="hue"in l?"lightness"in l?"hsl":"hsb":"gradient"in l||"stops"in l||"radial"in l?"gradient":"gray"in l?"gray":"rgb";var A=t[d],b=e[d];this._components=p=[];for(var c=0,x=A.length;c<x;c++){var E=l[A[c]];E==null&&!c&&d==="gradient"&&"stops"in l&&(E={stops:l.stops,radial:l.radial}),E=b[c].call(this,E),E!=null&&(p[c]=E)}k=l.alpha}v&&d&&(m=1)}if(this._type=d||"rgb",!p){this._components=p=[];for(var b=e[this._type],c=0,x=b.length;c<x;c++){var E=b[c].call(this,y&&y[c]);E!=null&&(p[c]=E)}}return this._components=p,this._properties=t[this._type],this._alpha=k,v&&(this.__read=m),this},set:"#initialize",_serialize:function(u,l){var f=this.getComponents();return R.serialize(/^(gray|rgb)$/.test(this._type)?f:[this._type].concat(f),u,!0,l)},_changed:function(){this._canvasStyle=null,this._owner&&(this._setter?this._owner[this._setter](this):this._owner._changed(129))},_convert:function(u){var l;return this._type===u?this._components.slice():(l=h[this._type+"-"+u])?l.apply(this,this._components):h["rgb-"+u].apply(this,h[this._type+"-rgb"].apply(this,this._components))},convert:function(u){return new Ut(u,this._convert(u),this._alpha)},getType:function(){return this._type},setType:function(u){this._components=this._convert(u),this._properties=t[u],this._type=u},getComponents:function(){var u=this._components.slice();return this._alpha!=null&&u.push(this._alpha),u},getAlpha:function(){return this._alpha!=null?this._alpha:1},setAlpha:function(u){this._alpha=u==null?null:Math.min(Math.max(u,0),1),this._changed()},hasAlpha:function(){return this._alpha!=null},equals:function(u){var l=R.isPlainValue(u,!0)?Ut.read(arguments):u;return l===this||l&&this._class===l._class&&this._type===l._type&&this.getAlpha()===l.getAlpha()&&R.equals(this._components,l._components)||!1},toString:function(){for(var u=this._properties,l=[],f=this._type==="gradient",v=fe.instance,m=0,d=u.length;m<d;m++){var p=this._components[m];p!=null&&l.push(u[m]+": "+(f?p:v.number(p)))}return this._alpha!=null&&l.push("alpha: "+v.number(this._alpha)),"{ "+l.join(", ")+" }"},toCSS:function(u){var l=this._convert("rgb"),f=u||this._alpha==null?1:this._alpha;function v(m){return Math.round((m<0?0:m>1?1:m)*255)}return l=[v(l[0]),v(l[1]),v(l[2])],f<1&&l.push(f<0?0:f),u?"#"+((1<<24)+(l[0]<<16)+(l[1]<<8)+l[2]).toString(16).slice(1):(l.length==4?"rgba(":"rgb(")+l.join(",")+")"},toCanvasStyle:function(u,l){if(this._canvasStyle)return this._canvasStyle;if(this._type!=="gradient")return this._canvasStyle=this.toCSS();var f=this._components,v=f[0],m=v._stops,d=f[1],p=f[2],k=f[3],y=l&&l.inverted(),S;if(y&&(d=y._transformPoint(d),p=y._transformPoint(p),k&&(k=y._transformPoint(k))),v._radial){var g=p.getDistance(d);if(k){var w=k.subtract(d);w.getLength()>g&&(k=d.add(w.normalize(g-.1)))}var c=k||d;S=u.createRadialGradient(c.x,c.y,0,d.x,d.y,g)}else S=u.createLinearGradient(d.x,d.y,p.x,p.y);for(var x=0,I=m.length;x<I;x++){var A=m[x],b=A._offset;S.addColorStop(b??x/(I-1),A._color.toCanvasStyle())}return this._canvasStyle=S},transform:function(u){if(this._type==="gradient"){for(var l=this._components,f=1,v=l.length;f<v;f++){var m=l[f];u._transformPoint(m,m,!0)}this._changed()}},statics:{_types:t,random:function(){var u=Math.random;return new Ut(u(),u(),u())},_setOwner:function(u,l,f){return u&&(u._owner&&l&&u._owner!==l&&(u=u.clone()),!u._owner^!l&&(u._owner=l||null,u._setter=f||null)),u}}})},new function(){var t={add:function(e,r){return e+r},subtract:function(e,r){return e-r},multiply:function(e,r){return e*r},divide:function(e,r){return e/r}};return R.each(t,function(e,r){this[r]=function(n){n=Ut.read(arguments);for(var s=this._type,o=this._components,h=n._convert(s),u=0,l=o.length;u<l;u++)h[u]=e(o[u],h[u]);return new Ut(s,h,this._alpha!=null?e(this._alpha,n.getAlpha()):null)}},{})}),Ze=R.extend({_class:"Gradient",initialize:function(e,r){this._id=ai.get(),e&&R.isPlainObject(e)&&(this.set(e),e=r=null),this._stops==null&&this.setStops(e||["white","black"]),this._radial==null&&this.setRadial(typeof r=="string"&&r==="radial"||r||!1)},_serialize:function(t,e){return e.add(this,function(){return R.serialize([this._stops,this._radial],t,!0,e)})},_changed:function(){for(var t=0,e=this._owners&&this._owners.length;t<e;t++)this._owners[t]._changed()},_addOwner:function(t){this._owners||(this._owners=[]),this._owners.push(t)},_removeOwner:function(t){var e=this._owners?this._owners.indexOf(t):-1;e!=-1&&(this._owners.splice(e,1),this._owners.length||(this._owners=Y))},clone:function(){for(var t=[],e=0,r=this._stops.length;e<r;e++)t[e]=this._stops[e].clone();return new Ze(t,this._radial)},getStops:function(){return this._stops},setStops:function(t){if(t.length<2)throw new Error("Gradient stop list needs to contain at least two stops.");var e=this._stops;if(e)for(var r=0,n=e.length;r<n;r++)e[r]._owner=Y;e=this._stops=gi.readList(t,0,{clone:!0});for(var r=0,n=e.length;r<n;r++)e[r]._owner=this;this._changed()},getRadial:function(){return this._radial},setRadial:function(t){this._radial=t,this._changed()},equals:function(t){if(t===this)return!0;if(t&&this._class===t._class){var e=this._stops,r=t._stops,n=e.length;if(n===r.length){for(var s=0;s<n;s++)if(!e[s].equals(r[s]))return!1;return!0}}return!1}}),gi=R.extend({_class:"GradientStop",initialize:function(e,r){var n=e,s=r;typeof e=="object"&&r===Y&&(Array.isArray(e)&&typeof e[0]!="number"?(n=e[0],s=e[1]):("color"in e||"offset"in e||"rampPoint"in e)&&(n=e.color,s=e.offset||e.rampPoint||0)),this.setColor(n),this.setOffset(s)},clone:function(){return new gi(this._color.clone(),this._offset)},_serialize:function(t,e){var r=this._color,n=this._offset;return R.serialize(n==null?[r]:[r,n],t,!0,e)},_changed:function(){this._owner&&this._owner._changed(129)},getOffset:function(){return this._offset},setOffset:function(t){this._offset=t,this._changed()},getRampPoint:"#getOffset",setRampPoint:"#setOffset",getColor:function(){return this._color},setColor:function(){Ut._setOwner(this._color,null),this._color=Ut._setOwner(Ut.read(arguments,0),this,"setColor"),this._changed()},equals:function(t){return t===this||t&&this._class===t._class&&this._color.equals(t._color)&&this._offset==t._offset||!1}}),_i=R.extend(new function(){var t={fillColor:null,fillRule:"nonzero",strokeColor:null,strokeWidth:1,strokeCap:"butt",strokeJoin:"miter",strokeScaling:!0,miterLimit:10,dashOffset:0,dashArray:[],shadowColor:null,shadowBlur:0,shadowOffset:new D,selectedColor:null},e=R.set({},t,{fontFamily:"sans-serif",fontWeight:"normal",fontSize:12,leading:null,justification:"left"}),r=R.set({},e,{fillColor:new Ut}),n={strokeWidth:193,strokeCap:193,strokeJoin:193,strokeScaling:201,miterLimit:193,fontFamily:9,fontWeight:9,fontSize:9,font:9,leading:9,justification:9},s={beans:!0},o={_class:"Style",beans:!0,initialize:function(u,l,f){this._values={},this._owner=l,this._project=l&&l._project||f||bt.project,this._defaults=!l||l instanceof Ft?e:l instanceof Pe?r:t,u&&this.set(u)}};return R.each(e,function(h,u){var l=/Color$/.test(u),f=u==="shadowOffset",v=R.capitalize(u),m=n[u],d="set"+v,p="get"+v;o[d]=function(k){var y=this._owner,S=y&&y._children,g=S&&S.length>0&&!(y instanceof $t);if(g)for(var w=0,c=S.length;w<c;w++)S[w]._style[d](k);if((u==="selectedColor"||!g)&&u in this._defaults){var x=this._values[u];x!==k&&(l&&(x&&(Ut._setOwner(x,null),x._canvasStyle=null),k&&k.constructor===Ut&&(k=Ut._setOwner(k,y,g&&d))),this._values[u]=k,y&&y._changed(m||129))}},o[p]=function(k){var y=this._owner,S=y&&y._children,g=S&&S.length>0&&!(y instanceof $t),w;if(g&&!k)for(var c=0,x=S.length;c<x;c++){var I=S[c]._style[p]();if(!c)w=I;else if(!R.equals(w,I))return Y}else if(u in this._defaults){var w=this._values[u];if(w===Y)w=this._defaults[u],w&&w.clone&&(w=w.clone());else{var A=l?Ut:f?D:null;A&&!(w&&w.constructor===A)&&(this._values[u]=w=A.read([w],0,{readNull:!0,clone:!0}))}}return w&&l&&(w=Ut._setOwner(w,y,g&&d)),w},s[p]=function(k){return this._style[p](k)},s[d]=function(k){this._style[d](k)}}),R.each({Font:"FontFamily",WindingRule:"FillRule"},function(h,u){var l="get"+u,f="set"+u;o[l]=s[l]="#get"+h,o[f]=s[f]="#set"+h}),P.inject(s),o},{set:function(t){var e=t instanceof _i,r=e?t._values:t;if(r){for(var n in r)if(n in this._defaults){var s=r[n];this[n]=s&&e&&s.clone?s.clone():s}}},equals:function(t){function e(r,n,s){var o=r._values,h=n._values,u=n._defaults;for(var l in o){var f=o[l],v=h[l];if(!(s&&l in h)&&!R.equals(f,v===Y?u[l]:v))return!1}return!0}return t===this||t&&this._class===t._class&&e(this,t)&&e(t,this,!0)||!1},_dispose:function(){var t;t=this.getFillColor(),t&&(t._canvasStyle=null),t=this.getStrokeColor(),t&&(t._canvasStyle=null),t=this.getShadowColor(),t&&(t._canvasStyle=null)},hasFill:function(){var t=this.getFillColor();return!!t&&t.alpha>0},hasStroke:function(){var t=this.getStrokeColor();return!!t&&t.alpha>0&&this.getStrokeWidth()>0},hasShadow:function(){var t=this.getShadowColor();return!!t&&t.alpha>0&&(this.getShadowBlur()>0||!this.getShadowOffset().isZero())},getView:function(){return this._project._view},getFontStyle:function(){var t=this.getFontSize();return this.getFontWeight()+" "+t+(/[a-z]/i.test(t+"")?" ":"px ")+this.getFontFamily()},getFont:"#getFontFamily",setFont:"#setFontFamily",getLeading:function t(){var e=t.base.call(this),r=this.getFontSize();return/pt|em|%|px/.test(r)&&(r=this.getView().getPixelSize(r)),e??r*1.2}}),Mt=new function(){function t(e,r,n,s){for(var o=["","webkit","moz","Moz","ms","o"],h=r[0].toUpperCase()+r.substring(1),u=0;u<6;u++){var l=o[u],f=l?l+h:r;if(f in e){if(n)e[f]=s;else return e[f];break}}}return{getStyles:function(e){var r=e&&e.nodeType!==9?e.ownerDocument:e,n=r&&r.defaultView;return n&&n.getComputedStyle(e,"")},getBounds:function(e,r){var n=e.ownerDocument,s=n.body,o=n.documentElement,h;try{h=e.getBoundingClientRect()}catch{h={left:0,top:0,width:0,height:0}}var u=h.left-(o.clientLeft||s.clientLeft||0),l=h.top-(o.clientTop||s.clientTop||0);if(!r){var f=n.defaultView;u+=f.pageXOffset||o.scrollLeft||s.scrollLeft,l+=f.pageYOffset||o.scrollTop||s.scrollTop}return new ut(u,l,h.width,h.height)},getViewportBounds:function(e){var r=e.ownerDocument,n=r.defaultView,s=r.documentElement;return new ut(0,0,n.innerWidth||s.clientWidth,n.innerHeight||s.clientHeight)},getOffset:function(e,r){return Mt.getBounds(e,r).getPoint()},getSize:function(e){return Mt.getBounds(e,!0).getSize()},isInvisible:function(e){return Mt.getSize(e).equals(new ht(0,0))},isInView:function(e){return!Mt.isInvisible(e)&&Mt.getViewportBounds(e).intersects(Mt.getBounds(e,!0))},isInserted:function(e){return Tt.body.contains(e)},getPrefixed:function(e,r){return e&&t(e,r)},setPrefixed:function(e,r,n){if(typeof r=="object")for(var s in r)t(e,s,!0,r[s]);else t(e,r,!0,n)}}},Rt={add:function(t,e){if(t)for(var r in e)for(var n=e[r],s=r.split(/[\s,]+/g),o=0,h=s.length;o<h;o++){var u=s[o],l=t===Tt&&(u==="touchstart"||u==="touchmove")?{passive:!1}:!1;t.addEventListener(u,n,l)}},remove:function(t,e){if(t)for(var r in e)for(var n=e[r],s=r.split(/[\s,]+/g),o=0,h=s.length;o<h;o++)t.removeEventListener(s[o],n,!1)},getPoint:function(t){var e=t.targetTouches?t.targetTouches.length?t.targetTouches[0]:t.changedTouches[0]:t;return new D(e.pageX||e.clientX+Tt.documentElement.scrollLeft,e.pageY||e.clientY+Tt.documentElement.scrollTop)},getTarget:function(t){return t.target||t.srcElement},getRelatedTarget:function(t){return t.relatedTarget||t.toElement},getOffset:function(t,e){return Rt.getPoint(t).subtract(Mt.getOffset(e||Rt.getTarget(t)))}};Rt.requestAnimationFrame=new function(){var t=Mt.getPrefixed(Ot,"requestAnimationFrame"),e=!1,r=[],n;function s(){var o=r;r=[];for(var h=0,u=o.length;h<u;h++)o[h]();e=t&&r.length,e&&t(s)}return function(o){r.push(o),t?e||(t(s),e=!0):n||(n=setInterval(s,1e3/60))}};var zt=R.extend(We,{_class:"View",initialize:function t(e,r){function n(m){return r[m]||parseInt(r.getAttribute(m),10)}function s(){var m=Mt.getSize(r);return m.isNaN()||m.isZero()?new ht(n("width"),n("height")):m}var o;if(Ot&&r){this._id=r.getAttribute("id"),this._id==null&&r.setAttribute("id",this._id="paper-view-"+t._id++),Rt.add(r,this._viewEvents);var h="none";if(Mt.setPrefixed(r.style,{userDrag:h,userSelect:h,touchCallout:h,contentZooming:h,tapHighlightColor:"rgba(0,0,0,0)"}),he.hasAttribute(r,"resize")){var u=this;Rt.add(Ot,this._windowEvents={resize:function(){u.setViewSize(s())}})}if(o=s(),he.hasAttribute(r,"stats")&&typeof Stats<"u"){this._stats=new Stats;var l=this._stats.domElement,f=l.style,v=Mt.getOffset(r);f.position="absolute",f.left=v.x+"px",f.top=v.y+"px",Tt.body.appendChild(l)}}else o=new ht(r),r=null;this._project=e,this._scope=e._scope,this._element=r,this._pixelRatio||(this._pixelRatio=Ot&&Ot.devicePixelRatio||1),this._setElementSize(o.width,o.height),this._viewSize=o,t._views.push(this),t._viewsById[this._id]=this,(this._matrix=new wt)._owner=this,t._focused||(t._focused=this),this._frameItems={},this._frameItemCount=0,this._itemEvents={native:{},virtual:{}},this._autoUpdate=!bt.agent.node,this._needsUpdate=!1},remove:function(){if(!this._project)return!1;zt._focused===this&&(zt._focused=null),zt._views.splice(zt._views.indexOf(this),1),delete zt._viewsById[this._id];var t=this._project;return t._view===this&&(t._view=null),Rt.remove(this._element,this._viewEvents),Rt.remove(Ot,this._windowEvents),this._element=this._project=null,this.off("frame"),this._animate=!1,this._frameItems={},!0},_events:R.each(P._itemHandlers.concat(["onResize","onKeyDown","onKeyUp"]),function(t){this[t]={}},{onFrame:{install:function(){this.play()},uninstall:function(){this.pause()}}}),_animate:!1,_time:0,_count:0,getAutoUpdate:function(){return this._autoUpdate},setAutoUpdate:function(t){this._autoUpdate=t,t&&this.requestUpdate()},update:function(){},draw:function(){this.update()},requestUpdate:function(){if(!this._requested){var t=this;Rt.requestAnimationFrame(function(){if(t._requested=!1,t._animate){t.requestUpdate();var e=t._element;(!Mt.getPrefixed(Tt,"hidden")||he.getAttribute(e,"keepalive")==="true")&&Mt.isInView(e)&&t._handleFrame()}t._autoUpdate&&t.update()}),this._requested=!0}},play:function(){this._animate=!0,this.requestUpdate()},pause:function(){this._animate=!1},_handleFrame:function(){bt=this._scope;var t=Date.now()/1e3,e=this._last?t-this._last:0;this._last=t,this.emit("frame",new R({delta:e,time:this._time+=e,count:this._count++})),this._stats&&this._stats.update()},_animateItem:function(t,e){var r=this._frameItems;e?(r[t._id]={item:t,time:0,count:0},++this._frameItemCount===1&&this.on("frame",this._handleFrameItems)):(delete r[t._id],--this._frameItemCount===0&&this.off("frame",this._handleFrameItems))},_handleFrameItems:function(t){for(var e in this._frameItems){var r=this._frameItems[e];r.item.emit("frame",new R(t,{time:r.time+=t.delta,count:r.count++}))}},_changed:function(){this._project._changed(4097),this._bounds=this._decomposed=Y},getElement:function(){return this._element},getPixelRatio:function(){return this._pixelRatio},getResolution:function(){return this._pixelRatio*72},getViewSize:function(){var t=this._viewSize;return new kt(t.width,t.height,this,"setViewSize")},setViewSize:function(){var t=ht.read(arguments),e=t.subtract(this._viewSize);e.isZero()||(this._setElementSize(t.width,t.height),this._viewSize.set(t),this._changed(),this.emit("resize",{size:t,delta:e}),this._autoUpdate&&this.update())},_setElementSize:function(t,e){var r=this._element;r&&(r.width!==t&&(r.width=t),r.height!==e&&(r.height=e))},getBounds:function(){return this._bounds||(this._bounds=this._matrix.inverted()._transformBounds(new ut(new D,this._viewSize))),this._bounds},getSize:function(){return this.getBounds().getSize()},isVisible:function(){return Mt.isInView(this._element)},isInserted:function(){return Mt.isInserted(this._element)},getPixelSize:function(t){var e=this._element,r;if(e){var n=e.parentNode,s=Tt.createElement("div");s.style.fontSize=t,n.appendChild(s),r=parseFloat(Mt.getStyles(s).fontSize),n.removeChild(s)}else r=parseFloat(r);return r},getTextWidth:function(t,e){return 0}},R.each(["rotate","scale","shear","skew"],function(t){var e=t==="rotate";this[t]=function(){var r=arguments,n=(e?R:D).read(r),s=D.read(r,0,{readNull:!0});return this.transform(new wt()[t](n,s||this.getCenter(!0)))}},{_decompose:function(){return this._decomposed||(this._decomposed=this._matrix.decompose())},translate:function(){var t=new wt;return this.transform(t.translate.apply(t,arguments))},getCenter:function(){return this.getBounds().getCenter()},setCenter:function(){var t=D.read(arguments);this.translate(this.getCenter().subtract(t))},getZoom:function(){var t=this._decompose().scaling;return(t.x+t.y)/2},setZoom:function(t){this.transform(new wt().scale(t/this.getZoom(),this.getCenter()))},getRotation:function(){return this._decompose().rotation},setRotation:function(t){var e=this.getRotation();e!=null&&t!=null&&this.rotate(t-e)},getScaling:function(){var t=this._decompose().scaling;return new Jt(t.x,t.y,this,"setScaling")},setScaling:function(){var t=this.getScaling(),e=D.read(arguments,0,{clone:!0,readNull:!0});t&&e&&this.scale(e.x/t.x,e.y/t.y)},getMatrix:function(){return this._matrix},setMatrix:function(){var t=this._matrix;t.set.apply(t,arguments)},transform:function(t){this._matrix.append(t)},scrollBy:function(){this.translate(D.read(arguments).negate())}}),{projectToView:function(){return this._matrix._transformPoint(D.read(arguments))},viewToProject:function(){return this._matrix._inverseTransform(D.read(arguments))},getEventPoint:function(t){return this.viewToProject(Rt.getOffset(t,this._element))}},{statics:{_views:[],_viewsById:{},_id:0,create:function(t,e){Tt&&typeof e=="string"&&(e=Tt.getElementById(e));var r=Ot?Ai:zt;return new r(t,e)}}},new function(){if(!Ot)return;var t,e,r=!1,n=!1;function s(T){var V=Rt.getTarget(T);return V.getAttribute&&zt._viewsById[V.getAttribute("id")]}function o(){var T=zt._focused;if(!T||!T.isVisible()){for(var V=0,B=zt._views.length;V<B;V++)if((T=zt._views[V]).isVisible()){zt._focused=e=T;break}}}function h(T,V,B){T._handleMouseEvent("mousemove",V,B)}var u=Ot.navigator,l,f,v;u.pointerEnabled||u.msPointerEnabled?(l="pointerdown MSPointerDown",f="pointermove MSPointerMove",v="pointerup pointercancel MSPointerUp MSPointerCancel"):(l="touchstart",f="touchmove",v="touchend touchcancel","ontouchstart"in Ot&&u.userAgent.match(/mobile|tablet|ip(ad|hone|od)|android|silk/i)||(l+=" mousedown",f+=" mousemove",v+=" mouseup"));var m={},d={mouseout:function(T){var V=zt._focused,B=Rt.getRelatedTarget(T);if(V&&(!B||B.nodeName==="HTML")){var q=Rt.getOffset(T,V._element),U=q.x,G=Math.abs,Q=G(U),$=1<<25,it=Q-$;q.x=G(it)<Q?it*(U<0?-1:1):U,h(V,T,V.viewToProject(q))}},scroll:o};m[l]=function(T){var V=zt._focused=s(T);r||(r=!0,V._handleMouseEvent("mousedown",T))},d[f]=function(T){var V=zt._focused;if(!n){var B=s(T);B?V!==B&&(V&&h(V,T),t||(t=V),V=zt._focused=e=B):e&&e===V&&(t&&!t.isInserted()&&(t=null),V=zt._focused=t,t=null,o())}V&&h(V,T)},d[l]=function(){n=!0},d[v]=function(T){var V=zt._focused;V&&r&&V._handleMouseEvent("mouseup",T),n=r=!1},Rt.add(Tt,d),Rt.add(Ot,{load:o});var p=!1,k=!1,y={doubleclick:"click",mousedrag:"mousemove"},S=!1,g,w,c,x,I,A,b,E;function N(T,V,B,q,U,G,Q){var $=!1,it;function st(Z,K){if(Z.responds(K)){if(it||(it=new Ti(K,q,U,V||Z,G?U.subtract(G):null)),Z.emit(K,it)&&(p=!0,it.prevented&&(k=!0),it.stopped))return $=!0}else{var rt=y[K];if(rt)return st(Z,rt)}}for(;T&&T!==Q&&!st(T,B);)T=T._parent;return $}function O(T,V,B,q,U,G){return T._project.removeOn(B),k=p=!1,I&&N(I,null,B,q,U,G)||V&&V!==I&&!V.isDescendant(I)&&N(V,null,B==="mousedrag"?"mousemove":B,q,U,G,I)||N(T,I||V||T,B,q,U,G)}var z={mousedown:{mousedown:1,mousedrag:1,click:1,doubleclick:1},mouseup:{mouseup:1,mousedrag:1,click:1,doubleclick:1},mousemove:{mousedrag:1,mousemove:1,mouseenter:1,mouseleave:1}};return{_viewEvents:m,_handleMouseEvent:function(T,V,B){var q=this._itemEvents,U=q.native[T],G=T==="mousemove",Q=this._scope.tool,$=this;function it(ft){return q.virtual[ft]||$.responds(ft)||Q&&Q.responds(ft)}G&&r&&it("mousedrag")&&(T="mousedrag"),B||(B=this.getEventPoint(V));var st=this.getBounds().contains(B),Z=U&&st&&$._project.hitTest(B,{tolerance:0,fill:!0,stroke:!0}),K=Z&&Z.item||null,rt=!1,ot={};if(ot[T.substr(5)]=!0,U&&K!==x&&(x&&N(x,null,"mouseleave",V,B),K&&N(K,null,"mouseenter",V,B),x=K),S^st&&(N(this,null,st?"mouseenter":"mouseleave",V,B),rt=!0),(st||ot.drag)&&!B.equals(w)&&(O(this,K,G?T:"mousemove",V,B,w),rt=!0),S=st,ot.down&&st||ot.up&&g){if(O(this,K,T,V,B,g),ot.down){if(E=K===A&&Date.now()-b<300,c=A=K,!k&&K){for(var at=K;at&&!at.responds("mousedrag");)at=at._parent;at&&(I=K)}g=B}else ot.up&&(!k&&K===c&&(b=Date.now(),O(this,K,E?"doubleclick":"click",V,B,g),E=!1),c=I=null);S=!1,rt=!0}w=B,rt&&Q&&(p=Q._handleMouseEvent(T,V,B,ot)||p),V.cancelable!==!1&&(p&&!ot.move||ot.down&&it("mouseup"))&&V.preventDefault()},_handleKeyEvent:function(T,V,B,q){var U=this._scope,G=U.tool,Q;function $(it){it.responds(T)&&(bt=U,it.emit(T,Q=Q||new Ei(T,V,B,q)))}this.isVisible()&&($(this),G&&G.responds(T)&&$(G))},_countItemEvent:function(T,V){var B=this._itemEvents,q=B.native,U=B.virtual;for(var G in z)q[G]=(q[G]||0)+(z[G][T]||0)*V;U[T]=(U[T]||0)+V},statics:{updateFocus:o,_resetState:function(){r=n=p=S=!1,t=e=g=w=c=x=I=A=b=E=null}}}}),Ai=zt.extend({_class:"CanvasView",initialize:function(e,r){if(!(r instanceof Ot.HTMLCanvasElement)){var n=ht.read(arguments,1);if(n.isZero())throw new Error("Cannot create CanvasView with the provided argument: "+R.slice(arguments,1));r=Ht.getCanvas(n)}var s=this._context=r.getContext("2d");if(s.save(),this._pixelRatio=1,!/^off|false$/.test(he.getAttribute(r,"hidpi"))){var o=Ot.devicePixelRatio||1,h=Mt.getPrefixed(s,"backingStorePixelRatio")||1;this._pixelRatio=o/h}zt.call(this,e,r),this._needsUpdate=!0},remove:function t(){return this._context.restore(),t.base.call(this)},_setElementSize:function t(e,r){var n=this._pixelRatio;if(t.base.call(this,e*n,r*n),n!==1){var s=this._element,o=this._context;if(!he.hasAttribute(s,"resize")){var h=s.style;h.width=e+"px",h.height=r+"px"}o.restore(),o.save(),o.scale(n,n)}},getContext:function(){return this._context},getPixelSize:function t(e){var r=bt.agent,n;if(r&&r.firefox)n=t.base.call(this,e);else{var s=this._context,o=s.font;s.font=e+" serif",n=parseFloat(s.font),s.font=o}return n},getTextWidth:function(t,e){var r=this._context,n=r.font,s=0;r.font=t;for(var o=0,h=e.length;o<h;o++)s=Math.max(s,r.measureText(e[o]).width);return r.font=n,s},update:function(){if(!this._needsUpdate)return!1;var t=this._project,e=this._context,r=this._viewSize;return e.clearRect(0,0,r.width+1,r.height+1),t&&t.draw(e,this._matrix,this._pixelRatio),this._needsUpdate=!1,!0}}),Fe=R.extend({_class:"Event",initialize:function(e){this.event=e,this.type=e&&e.type},prevented:!1,stopped:!1,preventDefault:function(){this.prevented=!0,this.event.preventDefault()},stopPropagation:function(){this.stopped=!0,this.event.stopPropagation()},stop:function(){this.stopPropagation(),this.preventDefault()},getTimeStamp:function(){return this.event.timeStamp},getModifiers:function(){return Ke.modifiers}}),Ei=Fe.extend({_class:"KeyEvent",initialize:function(e,r,n,s){this.type=e,this.event=r,this.key=n,this.character=s},toString:function(){return"{ type: '"+this.type+"', key: '"+this.key+"', character: '"+this.character+"', modifiers: "+this.getModifiers()+" }"}}),Ke=new function(){var t={"	":"tab"," ":"space","\b":"backspace","":"delete",Spacebar:"space",Del:"delete",Win:"meta",Esc:"escape"},e={tab:"	",space:" ",enter:"\r"},r={},n={},s,o,h=new R({shift:!1,control:!1,alt:!1,meta:!1,capsLock:!1,space:!1}).inject({option:{get:function(){return this.alt}},command:{get:function(){var f=bt&&bt.agent;return f&&f.mac?this.meta:this.control}}});function u(f){var v=f.key||f.keyIdentifier;return v=/^U\+/.test(v)?String.fromCharCode(parseInt(v.substr(2),16)):/^Arrow[A-Z]/.test(v)?v.substr(5):v==="Unidentified"||v===Y?String.fromCharCode(f.keyCode):v,t[v]||(v.length>1?R.hyphenate(v):v.toLowerCase())}function l(f,v,m,d){var p=zt._focused,k;if(r[v]=f,f?n[v]=m:delete n[v],v.length>1&&(k=R.camelize(v))in h){h[k]=f;var y=bt&&bt.agent;if(k==="meta"&&y&&y.mac)if(f)s={};else{for(var S in s)S in n&&l(!1,S,s[S],d);s=null}}else f&&s&&(s[v]=m);p&&p._handleKeyEvent(f?"keydown":"keyup",d,v,m)}return Rt.add(Tt,{keydown:function(f){var v=u(f),m=bt&&bt.agent;v.length>1||m&&m.chrome&&(f.altKey||m.mac&&f.metaKey||!m.mac&&f.ctrlKey)?l(!0,v,e[v]||(v.length>1?"":v),f):o=v},keypress:function(f){if(o){var v=u(f),m=f.charCode,d=m>=32?String.fromCharCode(m):v.length>1?"":v;v!==o&&(v=d.toLowerCase()),l(!0,v,d,f),o=null}},keyup:function(f){var v=u(f);v in n&&l(!1,v,n[v],f)}}),Rt.add(Ot,{blur:function(f){for(var v in n)l(!1,v,n[v],f)}}),{modifiers:h,isDown:function(f){return!!r[f]}}},Ti=Fe.extend({_class:"MouseEvent",initialize:function(e,r,n,s,o){this.type=e,this.event=r,this.point=n,this.target=s,this.delta=o},toString:function(){return"{ type: '"+this.type+"', point: "+this.point+", target: "+this.target+(this.delta?", delta: "+this.delta:"")+", modifiers: "+this.getModifiers()+" }"}}),Te=Fe.extend({_class:"ToolEvent",_item:null,initialize:function(e,r,n){this.tool=e,this.type=r,this.event=n},_choosePoint:function(t,e){return t||(e?e.clone():null)},getPoint:function(){return this._choosePoint(this._point,this.tool._point)},setPoint:function(t){this._point=t},getLastPoint:function(){return this._choosePoint(this._lastPoint,this.tool._lastPoint)},setLastPoint:function(t){this._lastPoint=t},getDownPoint:function(){return this._choosePoint(this._downPoint,this.tool._downPoint)},setDownPoint:function(t){this._downPoint=t},getMiddlePoint:function(){return!this._middlePoint&&this.tool._lastPoint?this.tool._point.add(this.tool._lastPoint).divide(2):this._middlePoint},setMiddlePoint:function(t){this._middlePoint=t},getDelta:function(){return!this._delta&&this.tool._lastPoint?this.tool._point.subtract(this.tool._lastPoint):this._delta},setDelta:function(t){this._delta=t},getCount:function(){return this.tool[/^mouse(down|up)$/.test(this.type)?"_downCount":"_moveCount"]},setCount:function(t){this.tool[/^mouse(down|up)$/.test(this.type)?"downCount":"count"]=t},getItem:function(){if(!this._item){var t=this.tool._scope.project.hitTest(this.getPoint());if(t){for(var e=t.item,r=e._parent;/^(Group|CompoundPath)$/.test(r._class);)e=r,r=r._parent;this._item=e}}return this._item},setItem:function(t){this._item=t},toString:function(){return"{ type: "+this.type+", point: "+this.getPoint()+", count: "+this.getCount()+", modifiers: "+this.getModifiers()+" }"}}),Xe=Ve.extend({_class:"Tool",_list:"tools",_reference:"tool",_events:["onMouseDown","onMouseUp","onMouseDrag","onMouseMove","onActivate","onDeactivate","onEditOptions","onKeyDown","onKeyUp"],initialize:function(e){Ve.call(this),this._moveCount=-1,this._downCount=-1,this.set(e)},getMinDistance:function(){return this._minDistance},setMinDistance:function(t){this._minDistance=t,t!=null&&this._maxDistance!=null&&t>this._maxDistance&&(this._maxDistance=t)},getMaxDistance:function(){return this._maxDistance},setMaxDistance:function(t){this._maxDistance=t,this._minDistance!=null&&t!=null&&t<this._minDistance&&(this._minDistance=t)},getFixedDistance:function(){return this._minDistance==this._maxDistance?this._minDistance:null},setFixedDistance:function(t){this._minDistance=this._maxDistance=t},_handleMouseEvent:function(t,e,r,n){bt=this._scope,n.drag&&!this.responds(t)&&(t="mousemove");var s=n.move||n.drag,o=this.responds(t),h=!1,u=this;function l(v,m){var d=r,p=s?u._point:u._downPoint||d;if(s){if(u._moveCount>=0&&d.equals(p))return!1;if(p&&(v!=null||m!=null)){var k=d.subtract(p),y=k.getLength();if(y<(v||0))return!1;m&&(d=p.add(k.normalize(Math.min(y,m))))}u._moveCount++}return u._point=d,u._lastPoint=p||d,n.down&&(u._moveCount=-1,u._downPoint=d,u._downCount++),!0}function f(){o&&(h=u.emit(t,new Te(u,t,e))||h)}if(n.down)l(),f();else if(n.up)l(null,this._maxDistance),f();else if(o)for(;l(this._minDistance,this._maxDistance);)f();return h}}),oi=R.extend(We,{_class:"Tween",statics:{easings:new R({linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return t*(2-t)},easeInOutQuad:function(t){return t<.5?2*t*t:-1+2*(2-t)*t},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return--t*t*t+1},easeInOutCubic:function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return 1- --t*t*t*t},easeInOutQuart:function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){return 1+--t*t*t*t*t},easeInOutQuint:function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t}})},initialize:function t(e,r,n,s,o,h){this.object=e;var u=typeof o,l=u==="function";this.type=l?u:u==="string"?o:"linear",this.easing=l?o:t.easings[this.type],this.duration=s,this.running=!1,this._then=null,this._startTime=null;var f=r||n;this._keys=f?Object.keys(f):[],this._parsedKeys=this._parseKeys(this._keys),this._from=f&&this._getState(r),this._to=f&&this._getState(n),h!==!1&&this.start()},then:function(t){return this._then=t,this},start:function(){return this._startTime=null,this.running=!0,this},stop:function(){return this.running=!1,this},update:function(t){if(this.running){t>=1&&(t=1,this.running=!1);for(var e=this.easing(t),r=this._keys,n=function(v){return typeof v=="function"?v(e,t):v},s=0,o=r&&r.length;s<o;s++){var h=r[s],u=n(this._from[h]),l=n(this._to[h]),f=u&&l&&u.__add&&l.__add?l.__subtract(u).__multiply(e).__add(u):(l-u)*e+u;this._setProperty(this._parsedKeys[h],f)}this.responds("update")&&this.emit("update",new R({progress:t,factor:e})),!this.running&&this._then&&this._then(this.object)}return this},_events:{onUpdate:{}},_handleFrame:function(t){var e=this._startTime,r=e?(t-e)/this.duration:0;e||(this._startTime=t),this.update(r)},_getState:function(t){for(var e=this._keys,r={},n=0,s=e.length;n<s;n++){var o=e[n],h=this._parsedKeys[o],u=this._getProperty(h),l;if(t){var f=this._resolveValue(u,t[o]);this._setProperty(h,f),l=this._getProperty(h),l=l&&l.clone?l.clone():l,this._setProperty(h,u)}else l=u&&u.clone?u.clone():u;r[o]=l}return r},_resolveValue:function(t,e){if(e){if(Array.isArray(e)&&e.length===2){var r=e[0];return r&&r.match&&r.match(/^[+\-\*\/]=/)?this._calculate(t,r[0],e[1]):e}else if(typeof e=="string"){var n=e.match(/^[+\-*/]=(.*)/);if(n){var s=JSON.parse(n[1].replace(/(['"])?([a-zA-Z0-9_]+)(['"])?:/g,'"$2": '));return this._calculate(t,e[0],s)}}}return e},_calculate:function(t,e,r){return bt.PaperScript.calculateBinary(t,e,r)},_parseKeys:function(t){for(var e={},r=0,n=t.length;r<n;r++){var s=t[r],o=s.replace(/\.([^.]*)/g,"/$1").replace(/\[['"]?([^'"\]]*)['"]?\]/g,"/$1");e[s]=o.split("/")}return e},_getProperty:function(t,e){for(var r=this.object,n=0,s=t.length-(e||0);n<s&&r;n++)r=r[t[n]];return r},_setProperty:function(t,e){var r=this._getProperty(t,1);r&&(r[t[t.length-1]]=e)}}),hi={request:function(t){var e=new ye.XMLHttpRequest;return e.open((t.method||"get").toUpperCase(),t.url,R.pick(t.async,!0)),t.mimeType&&e.overrideMimeType(t.mimeType),e.onload=function(){var r=e.status;r===0||r===200?t.onLoad&&t.onLoad.call(e,e.responseText):e.onerror()},e.onerror=function(){var r=e.status,n='Could not load "'+t.url+'" (Status: '+r+")";if(t.onError)t.onError(n,r);else throw new Error(n)},e.send(null)}},Ht=R.exports.CanvasProvider={canvases:[],getCanvas:function(t,e,r){if(!Ot)return null;var n,s=!0;typeof t=="object"&&(e=t.height,t=t.width),this.canvases.length?n=this.canvases.pop():(n=Tt.createElement("canvas"),s=!1);var o=n.getContext("2d",r||{});if(!o)throw new Error("Canvas "+n+" is unable to provide a 2D context.");return n.width===t&&n.height===e?s&&o.clearRect(0,0,t+1,e+1):(n.width=t,n.height=e),o.save(),n},getContext:function(t,e,r){var n=this.getCanvas(t,e,r);return n?n.getContext("2d",r||{}):null},release:function(t){var e=t&&t.canvas?t.canvas:t;e&&e.getContext&&(e.getContext("2d").restore(),this.canvases.push(e))}},Qe=new function(){var t=Math.min,e=Math.max,r=Math.abs,n,s,o,h,u,l,f,v,m,d,p;function k(I,A,b){return .2989*I+.587*A+.114*b}function y(I,A,b,O){var N=O-k(I,A,b);m=I+N,d=A+N,p=b+N;var O=k(m,d,p),z=t(m,d,p),T=e(m,d,p);if(z<0){var V=O-z;m=O+(m-O)*O/V,d=O+(d-O)*O/V,p=O+(p-O)*O/V}if(T>255){var B=255-O,q=T-O;m=O+(m-O)*B/q,d=O+(d-O)*B/q,p=O+(p-O)*B/q}}function S(I,A,b){return e(I,A,b)-t(I,A,b)}function g(I,A,b,E){var N=[I,A,b],O=e(I,A,b),z=t(I,A,b),T;z=z===I?0:z===A?1:2,O=O===I?0:O===A?1:2,T=t(z,O)===0?e(z,O)===1?2:1:0,N[O]>N[z]?(N[T]=(N[T]-N[z])*E/(N[O]-N[z]),N[O]=E):N[T]=N[O]=0,N[z]=0,m=N[0],d=N[1],p=N[2]}var w={multiply:function(){m=u*n/255,d=l*s/255,p=f*o/255},screen:function(){m=u+n-u*n/255,d=l+s-l*s/255,p=f+o-f*o/255},overlay:function(){m=u<128?2*u*n/255:255-2*(255-u)*(255-n)/255,d=l<128?2*l*s/255:255-2*(255-l)*(255-s)/255,p=f<128?2*f*o/255:255-2*(255-f)*(255-o)/255},"soft-light":function(){var I=n*u/255;m=I+u*(255-(255-u)*(255-n)/255-I)/255,I=s*l/255,d=I+l*(255-(255-l)*(255-s)/255-I)/255,I=o*f/255,p=I+f*(255-(255-f)*(255-o)/255-I)/255},"hard-light":function(){m=n<128?2*n*u/255:255-2*(255-n)*(255-u)/255,d=s<128?2*s*l/255:255-2*(255-s)*(255-l)/255,p=o<128?2*o*f/255:255-2*(255-o)*(255-f)/255},"color-dodge":function(){m=u===0?0:n===255?255:t(255,255*u/(255-n)),d=l===0?0:s===255?255:t(255,255*l/(255-s)),p=f===0?0:o===255?255:t(255,255*f/(255-o))},"color-burn":function(){m=u===255?255:n===0?0:e(0,255-(255-u)*255/n),d=l===255?255:s===0?0:e(0,255-(255-l)*255/s),p=f===255?255:o===0?0:e(0,255-(255-f)*255/o)},darken:function(){m=u<n?u:n,d=l<s?l:s,p=f<o?f:o},lighten:function(){m=u>n?u:n,d=l>s?l:s,p=f>o?f:o},difference:function(){m=u-n,m<0&&(m=-m),d=l-s,d<0&&(d=-d),p=f-o,p<0&&(p=-p)},exclusion:function(){m=u+n*(255-u-u)/255,d=l+s*(255-l-l)/255,p=f+o*(255-f-f)/255},hue:function(){g(n,s,o,S(u,l,f)),y(m,d,p,k(u,l,f))},saturation:function(){g(u,l,f,S(n,s,o)),y(m,d,p,k(u,l,f))},luminosity:function(){y(u,l,f,k(n,s,o))},color:function(){y(n,s,o,k(u,l,f))},add:function(){m=t(u+n,255),d=t(l+s,255),p=t(f+o,255)},subtract:function(){m=e(u-n,0),d=e(l-s,0),p=e(f-o,0)},average:function(){m=(u+n)/2,d=(l+s)/2,p=(f+o)/2},negation:function(){m=255-r(255-n-u),d=255-r(255-s-l),p=255-r(255-o-f)}},c=this.nativeModes=R.each(["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","darker","copy","xor"],function(I){this[I]=!0},{}),x=Ht.getContext(1,1,{willReadFrequently:!0});x&&(R.each(w,function(I,A){var b=A==="darken",E=!1;x.save();try{x.fillStyle=b?"#300":"#a00",x.fillRect(0,0,1,1),x.globalCompositeOperation=A,x.globalCompositeOperation===A&&(x.fillStyle=b?"#a00":"#300",x.fillRect(0,0,1,1),E=x.getImageData(0,0,1,1).data[0]!==b?170:51)}catch{}x.restore(),c[A]=E}),Ht.release(x)),this.process=function(I,A,b,E,N){var O=A.canvas,z=I==="normal";if(z||c[I])b.save(),b.setTransform(1,0,0,1,0,0),b.globalAlpha=E,z||(b.globalCompositeOperation=I),b.drawImage(O,N.x,N.y),b.restore();else{var T=w[I];if(!T)return;for(var V=b.getImageData(N.x,N.y,O.width,O.height),B=V.data,q=A.getImageData(0,0,O.width,O.height).data,U=0,G=B.length;U<G;U+=4){n=q[U],u=B[U],s=q[U+1],l=B[U+1],o=q[U+2],f=B[U+2],h=q[U+3],v=B[U+3],T();var Q=h*E/255,$=1-Q;B[U]=Q*m+$*u,B[U+1]=Q*d+$*l,B[U+2]=Q*p+$*f,B[U+3]=h*E+$*v}b.putImageData(V,N.x,N.y)}}},Lt=new function(){var t="http://www.w3.org/2000/svg",e="http://www.w3.org/2000/xmlns",r="http://www.w3.org/1999/xlink",n={href:r,xlink:e,xmlns:e+"/","xmlns:xlink":e+"/"};function s(u,l,f){return h(Tt.createElementNS(t,u),l,f)}function o(u,l){var f=n[l],v=f?u.getAttributeNS(f,l):u.getAttribute(l);return v==="null"?null:v}function h(u,l,f){for(var v in l){var m=l[v],d=n[v];typeof m=="number"&&f&&(m=f.number(m)),d?u.setAttributeNS(d,v,m):u.setAttribute(v,m)}return u}return{svg:t,xmlns:e,xlink:r,create:s,get:o,set:h}},vi=R.each({fillColor:["fill","color"],fillRule:["fill-rule","string"],strokeColor:["stroke","color"],strokeWidth:["stroke-width","number"],strokeCap:["stroke-linecap","string"],strokeJoin:["stroke-linejoin","string"],strokeScaling:["vector-effect","lookup",{true:"none",false:"non-scaling-stroke"},function(t,e){return!e&&(t instanceof Ee||t instanceof Kt||t instanceof Pe)}],miterLimit:["stroke-miterlimit","number"],dashArray:["stroke-dasharray","array"],dashOffset:["stroke-dashoffset","number"],fontFamily:["font-family","string"],fontWeight:["font-weight","string"],fontSize:["font-size","number"],justification:["text-anchor","lookup",{left:"start",center:"middle",right:"end"}],opacity:["opacity","number"],blendMode:["mix-blend-mode","style"]},function(t,e){var r=R.capitalize(e),n=t[2];this[e]={type:t[1],property:e,attribute:t[0],toSVG:n,fromSVG:n&&R.each(n,function(s,o){this[s]=o},{}),exportFilter:t[3],get:"get"+r,set:"set"+r}},{});new function(){var t;function e(w,c,x){var I=new R,A=w.getTranslation();if(c){var b;w.isInvertible()?(w=w._shiftless(),b=w._inverseTransform(A),A=null):b=new D,I[x?"cx":"x"]=b.x,I[x?"cy":"y"]=b.y}if(!w.isIdentity()){var E=w.decompose();if(E){var N=[],O=E.rotation,z=E.scaling,T=E.skewing;A&&!A.isZero()&&N.push("translate("+t.point(A)+")"),O&&N.push("rotate("+t.number(O)+")"),(!At.isZero(z.x-1)||!At.isZero(z.y-1))&&N.push("scale("+t.point(z)+")"),T.x&&N.push("skewX("+t.number(T.x)+")"),T.y&&N.push("skewY("+t.number(T.y)+")"),I.transform=N.join(" ")}else I.transform="matrix("+w.getValues().join(",")+")"}return I}function r(w,c){for(var x=e(w._matrix),I=w._children,A=Lt.create("g",x,t),b=0,E=I.length;b<E;b++){var N=I[b],O=S(N,c);if(O)if(N.isClipMask()){var z=Lt.create("clipPath");z.appendChild(O),k(N,z,"clip"),Lt.set(A,{"clip-path":"url(#"+z.id+")"})}else A.appendChild(O)}return A}function n(w,c){var x=e(w._matrix,!0),I=w.getSize(),A=w.getImage();return x.x-=I.width/2,x.y-=I.height/2,x.width=I.width,x.height=I.height,x.href=c.embedImages==!1&&A&&A.src||w.toDataURL(),Lt.create("image",x,t)}function s(w,c){var x=c.matchShapes;if(x){var I=w.toShape(!1);if(I)return o(I)}var A=w._segments,b=A.length,E,N=e(w._matrix);if(x&&b>=2&&!w.hasHandles())if(b>2){E=w._closed?"polygon":"polyline";for(var O=[],z=0;z<b;z++)O.push(t.point(A[z]._point));N.points=O.join(" ")}else{E="line";var T=A[0]._point,V=A[1]._point;N.set({x1:T.x,y1:T.y,x2:V.x,y2:V.y})}else E="path",N.d=w.getPathData(null,c.precision);return Lt.create(E,N,t)}function o(w){var c=w._type,x=w._radius,I=e(w._matrix,!0,c!=="rectangle");if(c==="rectangle"){c="rect";var A=w._size,b=A.width,E=A.height;I.x-=b/2,I.y-=E/2,I.width=b,I.height=E,x.isZero()&&(x=null)}return x&&(c==="circle"?I.r=x:(I.rx=x.width,I.ry=x.height)),Lt.create(c,I,t)}function h(w,c){var x=e(w._matrix),I=w.getPathData(null,c.precision);return I&&(x.d=I),Lt.create("path",x,t)}function u(w,c){var x=e(w._matrix,!0),I=w._definition,A=p(I,"symbol"),b=I._item,E=b.getStrokeBounds();return A||(A=Lt.create("symbol",{viewBox:t.rectangle(E)}),A.appendChild(S(b,c)),k(I,A,"symbol")),x.href="#"+A.id,x.x+=E.x,x.y+=E.y,x.width=E.width,x.height=E.height,x.overflow="visible",Lt.create("use",x,t)}function l(w){var c=p(w,"color");if(!c){var x=w.getGradient(),I=x._radial,A=w.getOrigin(),b=w.getDestination(),E;if(I){E={cx:A.x,cy:A.y,r:A.getDistance(b)};var N=w.getHighlight();N&&(E.fx=N.x,E.fy=N.y)}else E={x1:A.x,y1:A.y,x2:b.x,y2:b.y};E.gradientUnits="userSpaceOnUse",c=Lt.create((I?"radial":"linear")+"Gradient",E,t);for(var O=x._stops,z=0,T=O.length;z<T;z++){var V=O[z],B=V._color,q=B.getAlpha(),U=V._offset;E={offset:U??z/(T-1)},B&&(E["stop-color"]=B.toCSS(!0)),q<1&&(E["stop-opacity"]=q),c.appendChild(Lt.create("stop",E,t))}k(w,c,"color")}return"url(#"+c.id+")"}function f(w){var c=Lt.create("text",e(w._matrix,!0),t);return c.textContent=w._content,c}var v={Group:r,Layer:r,Raster:n,Path:s,Shape:o,CompoundPath:h,SymbolItem:u,PointText:f};function m(w,c,x,I){var A={},b=!I&&w.getParent(),E=[];return w._name!=null&&(A.id=w._name),R.each(vi,function(N){var O=N.get,z=N.type,T=w[O]();if(N.exportFilter?N.exportFilter(w,T):x.reduceAttributes==!1||!b||!R.equals(b[O](),T)){if(z==="color"&&T!=null){var V=T.getAlpha();V<1&&(A[N.attribute+"-opacity"]=V)}z==="style"?E.push(N.attribute+": "+T):A[N.attribute]=T==null?"none":z==="color"?T.gradient?l(T):T.toCSS(!0):z==="array"?T.join(","):z==="lookup"?N.toSVG[T]:T}}),E.length&&(A.style=E.join(";")),A.opacity===1&&delete A.opacity,w._visible||(A.visibility="hidden"),Lt.set(c,A,t)}var d;function p(w,c){return d||(d={ids:{},svgs:{}}),w&&d.svgs[c+"-"+(w._id||w.__id||(w.__id=ai.get("svg")))]}function k(w,c,x){d||p();var I=d.ids[x]=(d.ids[x]||0)+1;c.id=x+"-"+I,d.svgs[x+"-"+(w._id||w.__id)]=c}function y(w,c){var x=w,I=null;if(d){x=w.nodeName.toLowerCase()==="svg"&&w;for(var A in d.svgs)I||(x||(x=Lt.create("svg"),x.appendChild(w)),I=x.insertBefore(Lt.create("defs"),x.firstChild)),I.appendChild(d.svgs[A]);d=null}return c.asString?new ye.XMLSerializer().serializeToString(x):x}function S(w,c,x){var I=v[w._class],A=I&&I(w,c);if(A){var b=c.onExport;b&&(A=b(w,A,c)||A);var E=JSON.stringify(w._data);E&&E!=="{}"&&E!=="null"&&A.setAttribute("data-paper-data",E)}return A&&m(w,A,c,x)}function g(w){return w||(w={}),t=new fe(w.precision),w}P.inject({exportSVG:function(w){return w=g(w),y(S(this,w,!0),w)}}),It.inject({exportSVG:function(w){w=g(w);var c=this._children,x=this.getView(),I=R.pick(w.bounds,"view"),A=w.matrix||I==="view"&&x._matrix,b=A&&wt.read([A]),E=I==="view"?new ut([0,0],x.getViewSize()):I==="content"?P._getBounds(c,b,{stroke:!0}).rect:ut.read([I],0,{readNull:!0}),N={version:"1.1",xmlns:Lt.svg,"xmlns:xlink":Lt.xlink};E&&(N.width=E.width,N.height=E.height,(E.x||E.x===0||E.y||E.y===0)&&(N.viewBox=t.rectangle(E)));var O=Lt.create("svg",N,t),z=O;b&&!b.isIdentity()&&(z=O.appendChild(Lt.create("g",e(b),t)));for(var T=0,V=c.length;T<V;T++)z.appendChild(S(c[T],w,!0));return y(O,w)}})},new function(){var t={},e;function r(c,x,I,A,b,E){var N=Lt.get(c,x)||E,O=N==null?A?null:I?"":0:I?N:parseFloat(N);return/%\s*$/.test(N)?O/100*(b?1:e[/x|^width/.test(x)?"width":"height"]):O}function n(c,x,I,A,b,E,N){return x=r(c,x||"x",!1,A,b,E),I=r(c,I||"y",!1,A,b,N),A&&(x==null||I==null)?null:new D(x,I)}function s(c,x,I,A,b){return x=r(c,x||"width",!1,A,b),I=r(c,I||"height",!1,A,b),A&&(x==null||I==null)?null:new ht(x,I)}function o(c,x,I){return c==="none"?null:x==="number"?parseFloat(c):x==="array"?c?c.split(/[\s,]+/g).map(parseFloat):[]:x==="color"?S(c)||c:x==="lookup"?I[c]:c}function h(c,x,I,A){var b=c.childNodes,E=x==="clippath",N=x==="defs",O=new Ft,z=O._project,T=z._currentStyle,V=[];if(!E&&!N&&(O=y(O,c,A),z._currentStyle=O._style.clone()),A)for(var B=c.querySelectorAll("defs"),q=0,U=B.length;q<U;q++)g(B[q],I,!1);for(var q=0,U=b.length;q<U;q++){var G=b[q],Q;G.nodeType===1&&!/^defs$/i.test(G.nodeName)&&(Q=g(G,I,!1))&&!(Q instanceof Dt)&&V.push(Q)}return O.addChildren(V),E&&(O=y(O.reduce(),c,A)),z._currentStyle=T,(E||N)&&(O.remove(),O=null),O}function u(c,x){for(var I=c.getAttribute("points").match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g),A=[],b=0,E=I.length;b<E;b+=2)A.push(new D(parseFloat(I[b]),parseFloat(I[b+1])));var N=new Ct(A);return x==="polygon"&&N.closePath(),N}function l(c){return Ee.create(c.getAttribute("d"))}function f(c,x){var I=(r(c,"href",!0)||"").substring(1),A=x==="radialgradient",b;if(I)b=t[I].getGradient(),b._radial^A&&(b=b.clone(),b._radial=A);else{for(var E=c.childNodes,N=[],O=0,z=E.length;O<z;O++){var T=E[O];T.nodeType===1&&N.push(y(new gi,T))}b=new Ze(N,A)}var V,B,q,U=r(c,"gradientUnits",!0)!=="userSpaceOnUse";A?(V=n(c,"cx","cy",!1,U,"50%","50%"),B=V.add(r(c,"r",!1,!1,U,"50%"),0),q=n(c,"fx","fy",!0,U)):(V=n(c,"x1","y1",!1,U,"0%","0%"),B=n(c,"x2","y2",!1,U,"100%","0%"));var G=y(new Ut(b,V,B,q),c);return G._scaleToBounds=U,null}var v={"#document":function(c,x,I,A){for(var b=c.childNodes,E=0,N=b.length;E<N;E++){var O=b[E];if(O.nodeType===1)return g(O,I,A)}},g:h,svg:h,clippath:h,polygon:u,polyline:u,path:l,lineargradient:f,radialgradient:f,image:function(c){var x=new ze(r(c,"href",!0));return x.on("load",function(){var I=s(c);this.setSize(I);var A=n(c).add(I.divide(2));this._matrix.append(new wt().translate(A))}),x},symbol:function(c,x,I,A){return new Dt(h(c,x,I,A),!0)},defs:h,use:function(c){var x=(r(c,"href",!0)||"").substring(1),I=t[x],A=n(c);return I?I instanceof Dt?I.place(A):I.clone().translate(A):null},circle:function(c){return new Kt.Circle(n(c,"cx","cy"),r(c,"r"))},ellipse:function(c){return new Kt.Ellipse({center:n(c,"cx","cy"),radius:s(c,"rx","ry")})},rect:function(c){return new Kt.Rectangle(new ut(n(c),s(c)),s(c,"rx","ry"))},line:function(c){return new Ct.Line(n(c,"x1","y1"),n(c,"x2","y2"))},text:function(c){var x=new di(n(c).add(n(c,"dx","dy")));return x.setContent(c.textContent.trim()||""),x},switch:h};function m(c,x,I,A){if(c.transform){for(var b=(A.getAttribute(I)||"").split(/\)\s*/g),E=new wt,N=0,O=b.length;N<O;N++){var z=b[N];if(!z)break;for(var T=z.split(/\(\s*/),V=T[0].trim(),B=T[1].split(/[\s,]+/g),q=0,U=B.length;q<U;q++)B[q]=parseFloat(B[q]);switch(V){case"matrix":E.append(new wt(B[0],B[1],B[2],B[3],B[4],B[5]));break;case"rotate":E.rotate(B[0],B[1]||0,B[2]||0);break;case"translate":E.translate(B[0],B[1]||0);break;case"scale":E.scale(B);break;case"skewX":E.skew(B[0],0);break;case"skewY":E.skew(0,B[0]);break}}c.transform(E)}}function d(c,x,I){var A=I==="fill-opacity"?"getFillColor":"getStrokeColor",b=c[A]&&c[A]();b&&b.setAlpha(parseFloat(x))}var p=R.set(R.each(vi,function(c){this[c.attribute]=function(x,I){if(x[c.set]&&(x[c.set](o(I,c.type,c.fromSVG)),c.type==="color")){var A=x[c.get]();if(A&&A._scaleToBounds){var b=x.getBounds();A.transform(new wt().translate(b.getPoint()).scale(b.getSize()))}}}},{}),{id:function(c,x){t[x]=c,c.setName&&c.setName(x)},"clip-path":function(c,x){var I=S(x);if(I)if(I=I.clone(),I.setClipMask(!0),c instanceof Ft)c.insertChild(0,I);else return new Ft(I,c)},gradientTransform:m,transform:m,"fill-opacity":d,"stroke-opacity":d,visibility:function(c,x){c.setVisible&&c.setVisible(x==="visible")},display:function(c,x){c.setVisible&&c.setVisible(x!==null)},"stop-color":function(c,x){c.setColor&&c.setColor(x)},"stop-opacity":function(c,x){c._color&&c._color.setAlpha(parseFloat(x))},offset:function(c,x){if(c.setOffset){var I=x.match(/(.*)%$/);c.setOffset(I?I[1]/100:parseFloat(x))}},viewBox:function(c,x,I,A,b){var E=new ut(o(x,"array")),N=s(A,null,null,!0),O,z;if(c instanceof Ft){var T=N?N.divide(E.getSize()):1,z=new wt().scale(T).translate(E.getPoint().negate());O=c}else c instanceof Dt&&(N&&E.setSize(N),O=c._item);if(O){if(k(A,"overflow",b)!=="visible"){var V=new Kt.Rectangle(E);V.setClipMask(!0),O.addChild(V)}z&&O.transform(z)}}});function k(c,x,I){var A=c.attributes[x],b=A&&A.value;if(!b&&c.style){var E=R.camelize(x);b=c.style[E],!b&&I.node[E]!==I.parent[E]&&(b=I.node[E])}return b?b==="none"?null:b:Y}function y(c,x,I){var A=x.parentNode,b={node:Mt.getStyles(x)||{},parent:!I&&!/^defs$/i.test(A.tagName)&&Mt.getStyles(A)||{}};return R.each(p,function(E,N){var O=k(x,N,b);c=O!==Y&&E(c,O,N,x,b)||c}),c}function S(c){var x=c&&c.match(/\((?:["'#]*)([^"')]+)/),I=x&&x[1],A=I&&t[Ot?I.replace(Ot.location.href.split("#")[0]+"#",""):I];return A&&A._scaleToBounds&&(A=A.clone(),A._scaleToBounds=!0),A}function g(c,x,I){var A=c.nodeName.toLowerCase(),b=A!=="#document",E=Tt.body,N,O,z;I&&b&&(e=bt.getView().getSize(),e=s(c,null,null,!0)||e,N=Lt.create("svg",{style:"stroke-width: 1px; stroke-miterlimit: 10"}),O=c.parentNode,z=c.nextSibling,N.appendChild(c),E.appendChild(N));var T=bt.settings,V=T.applyMatrix,B=T.insertItems;T.applyMatrix=!1,T.insertItems=!1;var q=v[A],U=q&&q(c,A,x,I)||null;if(T.insertItems=B,T.applyMatrix=V,U){b&&!(U instanceof Ft)&&(U=y(U,c,I));var G=x.onImport,Q=b&&c.getAttribute("data-paper-data");G&&(U=G(c,U,x)||U),x.expandShapes&&U instanceof Kt&&(U.remove(),U=U.toPath()),Q&&(U._data=JSON.parse(Q))}return N&&(E.removeChild(N),O&&(z?O.insertBefore(c,z):O.appendChild(c))),I&&(t={},U&&R.pick(x.applyMatrix,V)&&U.matrix.apply(!0,!0)),U}function w(c,x,I){if(!c)return null;x=typeof x=="function"?{onLoad:x}:x||{};var A=bt,b=null;function E(T){try{var V=typeof T=="object"?T:new ye.DOMParser().parseFromString(T.trim(),"image/svg+xml");if(!V.nodeName)throw V=null,new Error("Unsupported SVG source: "+c);bt=A,b=g(V,x,!0),(!x||x.insert!==!1)&&I._insertItem(Y,b);var B=x.onLoad;B&&B(b,T)}catch(q){N(q)}}function N(T,V){var B=x.onError;if(B)B(T,V);else throw new Error(T)}if(typeof c=="string"&&!/^[\s\S]*</.test(c)){var O=Tt.getElementById(c);O?E(O):hi.request({url:c,async:!0,onLoad:E,onError:N})}else if(typeof File<"u"&&c instanceof File){var z=new FileReader;return z.onload=function(){E(z.result)},z.onerror=function(){N(z.error)},z.readAsText(c)}else E(c);return b}P.inject({importSVG:function(c,x){return w(c,x,this)}}),It.inject({importSVG:function(c,x){return this.activate(),w(c,x,this)}})},R.exports.PaperScript=(function(){var t=this,e=t.acorn;if(!e&&typeof Gr<"u")try{e=Kr()}catch{}if(!e){var r,n;e=r=n={},function(y,S){if(typeof r=="object"&&typeof n=="object")return S(r);if(typeof Y=="function"&&Y.amd)return Y(["exports"],S);S(y.acorn||(y.acorn={}))}(this,function(y){y.version="0.5.0";var S,g,w,c;y.parse=function(M,F){return g=String(M),w=g.length,I(F),sr(),Mr(S.program)};var x=y.defaultOptions={ecmaVersion:5,strictSemicolons:!1,allowTrailingCommas:!0,forbidReserved:!1,allowReturnOutsideFunction:!1,locations:!1,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null};function I(M){S=M||{};for(var F in x)Object.prototype.hasOwnProperty.call(S,F)||(S[F]=x[F]);c=S.sourceFile||null}var A=y.getLineInfo=function(M,F){for(var j=1,X=0;;){li.lastIndex=X;var dt=li.exec(M);if(dt&&dt.index<F)++j,X=dt.index+dt[0].length;else break}return{line:j,column:F-X}};y.tokenize=function(M,F){g=String(M),w=g.length,I(F),sr();var j={};function X(dt){return Q=N,ei(dt),j.start=E,j.end=N,j.startLoc=O,j.endLoc=z,j.type=T,j.value=V,j}return X.jumpTo=function(dt,vt){if(b=dt,S.locations){q=1,U=li.lastIndex=0;for(var yt;(yt=li.exec(g))&&yt.index<dt;)++q,U=yt.index+yt[0].length}B=vt,fi()},X};var b,E,N,O,z,T,V,B,q,U,G,Q,$,it,st,Z;function K(M,F){var j=A(g,M);F+=" ("+j.line+":"+j.column+")";var X=new SyntaxError(F);throw X.pos=M,X.loc=j,X.raisedAt=b,X}var rt=[],ot={type:"num"},at={type:"regexp"},ft={type:"string"},lt={type:"name"},_t={type:"eof"},xt={keyword:"break"},pt={keyword:"case",beforeExpr:!0},Xt={keyword:"catch"},Gt={keyword:"continue"},te={keyword:"debugger"},Wt={keyword:"default"},tt={keyword:"do",isLoop:!0},Bt={keyword:"else",beforeExpr:!0},qt={keyword:"finally"},Qt={keyword:"for",isLoop:!0},pe={keyword:"function"},Se={keyword:"if"},ge={keyword:"return",beforeExpr:!0},_e={keyword:"switch"},se={keyword:"throw",beforeExpr:!0},le={keyword:"try"},Ce={keyword:"var"},Yt={keyword:"while",isLoop:!0},ae={keyword:"with"},Li={keyword:"new",beforeExpr:!0},mi={keyword:"this"},Ni={keyword:"null",atomValue:null},Oi={keyword:"true",atomValue:!0},Mi={keyword:"false",atomValue:!1},ui={keyword:"in",binop:7,beforeExpr:!0},De={break:xt,case:pt,catch:Xt,continue:Gt,debugger:te,default:Wt,do:tt,else:Bt,finally:qt,for:Qt,function:pe,if:Se,return:ge,switch:_e,throw:se,try:le,var:Ce,while:Yt,with:ae,null:Ni,true:Oi,false:Mi,new:Li,in:ui,instanceof:{keyword:"instanceof",binop:7,beforeExpr:!0},this:mi,typeof:{keyword:"typeof",prefix:!0,beforeExpr:!0},void:{keyword:"void",prefix:!0,beforeExpr:!0},delete:{keyword:"delete",prefix:!0,beforeExpr:!0}},Ye={type:"[",beforeExpr:!0},Je={type:"]"},Le={type:"{",beforeExpr:!0},we={type:"}"},mt={type:"(",beforeExpr:!0},ve={type:")"},be={type:",",beforeExpr:!0},me={type:";",beforeExpr:!0},Ne={type:":",beforeExpr:!0},yi={type:"."},xi={type:"?",beforeExpr:!0},wi={binop:10,beforeExpr:!0},i={isAssign:!0,beforeExpr:!0},a={isAssign:!0,beforeExpr:!0},_={postfix:!0,prefix:!0,isUpdate:!0},C={prefix:!0,beforeExpr:!0},L={binop:1,beforeExpr:!0},H={binop:2,beforeExpr:!0},W={binop:3,beforeExpr:!0},J={binop:4,beforeExpr:!0},nt={binop:5,beforeExpr:!0},gt={binop:6,beforeExpr:!0},St={binop:7,beforeExpr:!0},Vt={binop:8,beforeExpr:!0},ie={binop:9,prefix:!0,beforeExpr:!0},$e={binop:10,beforeExpr:!0};y.tokTypes={bracketL:Ye,bracketR:Je,braceL:Le,braceR:we,parenL:mt,parenR:ve,comma:be,semi:me,colon:Ne,dot:yi,question:xi,slash:wi,eq:i,name:lt,eof:_t,num:ot,regexp:at,string:ft};for(var Oe in De)y.tokTypes["_"+Oe]=De[Oe];function Ae(M){M=M.split(" ");var F="",j=[];t:for(var X=0;X<M.length;++X){for(var dt=0;dt<j.length;++dt)if(j[dt][0].length==M[X].length){j[dt].push(M[X]);continue t}j.push([M[X]])}function vt(Nt){if(Nt.length==1)return F+="return str === "+JSON.stringify(Nt[0])+";";F+="switch(str){";for(var Ie=0;Ie<Nt.length;++Ie)F+="case "+JSON.stringify(Nt[Ie])+":";F+="return true}return false;"}if(j.length>3){j.sort(function(Nt,Ie){return Ie.length-Nt.length}),F+="switch(str.length){";for(var X=0;X<j.length;++X){var yt=j[X];F+="case "+yt[0].length+":",vt(yt)}F+="}"}else vt(M);return new Function("str",F)}var qe=Ae("abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile"),Ue=Ae("class enum extends super const export import"),er=Ae("implements interface let package private protected public static yield"),Vi=Ae("eval arguments"),mr=Ae("break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this"),yr=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,ir="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",xr="̀-ͯ҃-֑҇-ׇֽֿׁׂׅׄؐ-ؚؠ-ىٲ-ۓۧ-ۨۻ-ۼܰ-݊ࠀ-ࠔࠛ-ࠣࠥ-ࠧࠩ-࠭ࡀ-ࡗࣤ-ࣾऀ-ःऺ-़ा-ॏ॑-ॗॢ-ॣ०-९ঁ-ঃ়া-ৄেৈৗয়-ৠਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢ-ૣ૦-૯ଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୟ-ୠ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఁ-ఃె-ైొ-్ౕౖౢ-ౣ౦-౯ಂಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢ-ೣ೦-೯ംഃെ-ൈൗൢ-ൣ൦-൯ංඃ්ා-ුූෘ-ෟෲෳิ-ฺเ-ๅ๐-๙ິ-ູ່-ໍ໐-໙༘༙༠-༩༹༵༷ཁ-ཇཱ-྄྆-྇ྍ-ྗྙ-ྼ࿆က-ဩ၀-၉ၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟ᜎ-ᜐᜠ-ᜰᝀ-ᝐᝲᝳក-ឲ៝០-៩᠋-᠍᠐-᠙ᤠ-ᤫᤰ-᤻ᥑ-ᥭᦰ-ᧀᧈ-ᧉ᧐-᧙ᨀ-ᨕᨠ-ᩓ᩠-᩿᩼-᪉᪐-᪙ᭆ-ᭋ᭐-᭙᭫-᭳᮰-᮹᯦-᯳ᰀ-ᰢ᱀-᱉ᱛ-ᱽ᳐-᳒ᴀ-ᶾḁ-ἕ‌‍‿⁀⁔⃐-⃥⃜⃡-⃰ⶁ-ⶖⷠ-ⷿ〡-〨゙゚Ꙁ-ꙭꙴ-꙽ꚟ꛰-꛱ꟸ-ꠀ꠆ꠋꠣ-ꠧꢀ-ꢁꢴ-꣄꣐-꣙ꣳ-ꣷ꤀-꤉ꤦ-꤭ꤰ-ꥅꦀ-ꦃ꦳-꧀ꨀ-ꨧꩀ-ꩁꩌ-ꩍ꩐-꩙ꩻꫠ-ꫩꫲ-ꫳꯀ-ꯡ꯬꯭꯰-꯹ﬠ-ﬨ︀-️︠-︦︳︴﹍-﹏０-９＿",rr=new RegExp("["+ir+"]"),wr=new RegExp("["+ir+xr+"]"),Ri=/[\n\r\u2028\u2029]/,li=/\r\n|[\n\r\u2028\u2029]/g,zi=y.isIdentifierStart=function(M){return M<65?M===36:M<91?!0:M<97?M===95:M<123?!0:M>=170&&rr.test(String.fromCharCode(M))},nr=y.isIdentifierChar=function(M){return M<48?M===36:M<58?!0:M<65?!1:M<91?!0:M<97?M===95:M<123?!0:M>=170&&wr.test(String.fromCharCode(M))};function ti(){this.line=q,this.column=b-U}function sr(){q=1,b=U=0,B=!0,fi()}function re(M,F){N=b,S.locations&&(z=new ti),T=M,fi(),V=F,B=M.beforeExpr}function br(){var M=S.onComment&&S.locations&&new ti,F=b,j=g.indexOf("*/",b+=2);if(j===-1&&K(b-2,"Unterminated comment"),b=j+2,S.locations){li.lastIndex=F;for(var X;(X=li.exec(g))&&X.index<b;)++q,U=X.index+X[0].length}S.onComment&&S.onComment(!0,g.slice(F+2,j),F,b,M,S.locations&&new ti)}function Hi(){for(var M=b,F=S.onComment&&S.locations&&new ti,j=g.charCodeAt(b+=2);b<w&&j!==10&&j!==13&&j!==8232&&j!==8233;)++b,j=g.charCodeAt(b);S.onComment&&S.onComment(!1,g.slice(M+2,b),M,b,F,S.locations&&new ti)}function fi(){for(;b<w;){var M=g.charCodeAt(b);if(M===32)++b;else if(M===13){++b;var F=g.charCodeAt(b);F===10&&++b,S.locations&&(++q,U=b)}else if(M===10||M===8232||M===8233)++b,S.locations&&(++q,U=b);else if(M>8&&M<14)++b;else if(M===47){var F=g.charCodeAt(b+1);if(F===42)br();else if(F===47)Hi();else break}else if(M===160)++b;else if(M>=5760&&yr.test(String.fromCharCode(M)))++b;else break}}function Sr(){var M=g.charCodeAt(b+1);return M>=48&&M<=57?or(!0):(++b,re(yi))}function Cr(){var M=g.charCodeAt(b+1);return B?(++b,ar()):M===61?ne(a,2):ne(wi,1)}function kr(){var M=g.charCodeAt(b+1);return M===61?ne(a,2):ne($e,1)}function Ir(M){var F=g.charCodeAt(b+1);return F===M?ne(M===124?L:H,2):F===61?ne(a,2):ne(M===124?W:nt,1)}function Pr(){var M=g.charCodeAt(b+1);return M===61?ne(a,2):ne(J,1)}function Ar(M){var F=g.charCodeAt(b+1);return F===M?F==45&&g.charCodeAt(b+2)==62&&Ri.test(g.slice(Q,b))?(b+=3,Hi(),fi(),ei()):ne(_,2):F===61?ne(a,2):ne(ie,1)}function Er(M){var F=g.charCodeAt(b+1),j=1;return F===M?(j=M===62&&g.charCodeAt(b+2)===62?3:2,g.charCodeAt(b+j)===61?ne(a,j+1):ne(Vt,j)):F==33&&M==60&&g.charCodeAt(b+2)==45&&g.charCodeAt(b+3)==45?(b+=4,Hi(),fi(),ei()):(F===61&&(j=g.charCodeAt(b+2)===61?3:2),ne(St,j))}function Tr(M){var F=g.charCodeAt(b+1);return F===61?ne(gt,g.charCodeAt(b+2)===61?3:2):ne(M===61?i:C,1)}function Lr(M){switch(M){case 46:return Sr();case 40:return++b,re(mt);case 41:return++b,re(ve);case 59:return++b,re(me);case 44:return++b,re(be);case 91:return++b,re(Ye);case 93:return++b,re(Je);case 123:return++b,re(Le);case 125:return++b,re(we);case 58:return++b,re(Ne);case 63:return++b,re(xi);case 48:var F=g.charCodeAt(b+1);if(F===120||F===88)return Nr();case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return or(!1);case 34:case 39:return Or(M);case 47:return Cr();case 37:case 42:return kr();case 124:case 38:return Ir(M);case 94:return Pr();case 43:case 45:return Ar(M);case 60:case 62:return Er(M);case 61:case 33:return Tr(M);case 126:return ne(C,1)}return!1}function ei(M){if(M?b=E+1:E=b,S.locations&&(O=new ti),M)return ar();if(b>=w)return re(_t);var F=g.charCodeAt(b);if(zi(F)||F===92)return ur();var j=Lr(F);if(j===!1){var X=String.fromCharCode(F);if(X==="\\"||rr.test(X))return ur();K(b,"Unexpected character '"+X+"'")}return j}function ne(M,F){var j=g.slice(b,b+F);b+=F,re(M,j)}function ar(){for(var dt="",M,F,j=b;;){b>=w&&K(j,"Unterminated regular expression");var X=g.charAt(b);if(Ri.test(X)&&K(j,"Unterminated regular expression"),M)M=!1;else{if(X==="[")F=!0;else if(X==="]"&&F)F=!1;else if(X==="/"&&!F)break;M=X==="\\"}++b}var dt=g.slice(j,b);++b;var vt=hr();vt&&!/^[gmsiy]*$/.test(vt)&&K(j,"Invalid regexp flag");try{var yt=new RegExp(dt,vt)}catch(Nt){Nt instanceof SyntaxError&&K(j,Nt.message),K(Nt)}return re(at,yt)}function bi(M,F){for(var j=b,X=0,dt=0,vt=F??1/0;dt<vt;++dt){var yt=g.charCodeAt(b),Nt;if(yt>=97?Nt=yt-97+10:yt>=65?Nt=yt-65+10:yt>=48&&yt<=57?Nt=yt-48:Nt=1/0,Nt>=M)break;++b,X=X*M+Nt}return b===j||F!=null&&b-j!==F?null:X}function Nr(){b+=2;var M=bi(16);return M==null&&K(E+2,"Expected hexadecimal number"),zi(g.charCodeAt(b))&&K(b,"Identifier directly after number"),re(ot,M)}function or(M){var F=b,j=!1,X=g.charCodeAt(b)===48;!M&&bi(10)===null&&K(F,"Invalid number"),g.charCodeAt(b)===46&&(++b,bi(10),j=!0);var dt=g.charCodeAt(b);(dt===69||dt===101)&&(dt=g.charCodeAt(++b),(dt===43||dt===45)&&++b,bi(10)===null&&K(F,"Invalid number"),j=!0),zi(g.charCodeAt(b))&&K(b,"Identifier directly after number");var vt=g.slice(F,b),yt;return j?yt=parseFloat(vt):!X||vt.length===1?yt=parseInt(vt,10):/[89]/.test(vt)||Z?K(F,"Invalid number"):yt=parseInt(vt,8),re(ot,yt)}function Or(M){b++;for(var F="";;){b>=w&&K(E,"Unterminated string constant");var j=g.charCodeAt(b);if(j===M)return++b,re(ft,F);if(j===92){j=g.charCodeAt(++b);var X=/^[0-7]+/.exec(g.slice(b,b+3));for(X&&(X=X[0]);X&&parseInt(X,8)>255;)X=X.slice(0,-1);if(X==="0"&&(X=null),++b,X)Z&&K(b-2,"Octal literal in strict mode"),F+=String.fromCharCode(parseInt(X,8)),b+=X.length-1;else switch(j){case 110:F+=`
`;break;case 114:F+="\r";break;case 120:F+=String.fromCharCode(Bi(2));break;case 117:F+=String.fromCharCode(Bi(4));break;case 85:F+=String.fromCharCode(Bi(8));break;case 116:F+="	";break;case 98:F+="\b";break;case 118:F+="\v";break;case 102:F+="\f";break;case 48:F+="\0";break;case 13:g.charCodeAt(b)===10&&++b;case 10:S.locations&&(U=b,++q);break;default:F+=String.fromCharCode(j);break}}else(j===13||j===10||j===8232||j===8233)&&K(E,"Unterminated string constant"),F+=String.fromCharCode(j),++b}}function Bi(M){var F=bi(16,M);return F===null&&K(E,"Bad character escape sequence"),F}var ci;function hr(){ci=!1;for(var M,F=!0,j=b;;){var X=g.charCodeAt(b);if(nr(X))ci&&(M+=g.charAt(b)),++b;else if(X===92){ci||(M=g.slice(j,b)),ci=!0,g.charCodeAt(++b)!=117&&K(b,"Expecting Unicode escape sequence \\uXXXX"),++b;var dt=Bi(4),vt=String.fromCharCode(dt);vt||K(b-1,"Invalid Unicode escape"),(F?zi(dt):nr(dt))||K(b-4,"Invalid Unicode escape"),M+=vt}else break;F=!1}return ci?M:g.slice(j,b)}function ur(){var M=hr(),F=lt;return!ci&&mr(M)&&(F=De[M]),re(F,M)}function Et(){G=E,Q=N,$=z,ei()}function Gi(M){if(Z=M,b=E,S.locations)for(;b<U;)U=g.lastIndexOf(`
`,U-2)+1,--q;fi(),ei()}function lr(){this.type=null,this.start=E,this.end=null}function fr(){this.start=O,this.end=null,c!==null&&(this.source=c)}function oe(){var M=new lr;return S.locations&&(M.loc=new fr),S.directSourceFile&&(M.sourceFile=S.directSourceFile),S.ranges&&(M.range=[E,0]),M}function He(M){var F=new lr;return F.start=M.start,S.locations&&(F.loc=new fr,F.loc.start=M.loc.start),S.ranges&&(F.range=[M.range[0],0]),F}function Pt(M,F){return M.type=F,M.end=Q,S.locations&&(M.loc.end=$),S.ranges&&(M.range[1]=Q),M}function Wi(M){return S.ecmaVersion>=5&&M.type==="ExpressionStatement"&&M.expression.type==="Literal"&&M.expression.value==="use strict"}function jt(M){if(T===M)return Et(),!0}function Fi(){return!S.strictSemicolons&&(T===_t||T===we||Ri.test(g.slice(Q,E)))}function ii(){!jt(me)&&!Fi()&&Me()}function ee(M){T===M?Et():Me()}function Me(){K(E,"Unexpected token")}function Di(M){M.type!=="Identifier"&&M.type!=="MemberExpression"&&K(M.start,"Assigning to rvalue"),Z&&M.type==="Identifier"&&Vi(M.name)&&K(M.start,"Assigning to "+M.name+" in strict mode")}function Mr(M){G=Q=b,S.locations&&($=new ti),it=Z=null,st=[],ei();var F=M||oe(),j=!0;for(M||(F.body=[]);T!==_t;){var X=ke();F.body.push(X),j&&Wi(X)&&Gi(!0),j=!1}return Pt(F,"Program")}var ji={kind:"loop"},Vr={kind:"switch"};function ke(){(T===wi||T===a&&V=="/=")&&ei(!0);var M=T,F=oe();switch(M){case xt:case Gt:Et();var j=M===xt;jt(me)||Fi()?F.label=null:T!==lt?Me():(F.label=Ge(),ii());for(var X=0;X<st.length;++X){var dt=st[X];if((F.label==null||dt.name===F.label.name)&&(dt.kind!=null&&(j||dt.kind==="loop")||F.label&&j))break}return X===st.length&&K(F.start,"Unsyntactic "+M.keyword),Pt(F,j?"BreakStatement":"ContinueStatement");case te:return Et(),ii(),Pt(F,"DebuggerStatement");case tt:return Et(),st.push(ji),F.body=ke(),st.pop(),ee(Yt),F.test=Si(),ii(),Pt(F,"DoWhileStatement");case Qt:if(Et(),st.push(ji),ee(mt),T===me)return Zi(F,null);if(T===Ce){var vt=oe();return Et(),pr(vt,!0),Pt(vt,"VariableDeclaration"),vt.declarations.length===1&&jt(ui)?cr(F,vt):Zi(F,vt)}var vt=ue(!1,!0);return jt(ui)?(Di(vt),cr(F,vt)):Zi(F,vt);case pe:return Et(),Ji(F,!0);case Se:return Et(),F.test=Si(),F.consequent=ke(),F.alternate=jt(Bt)?ke():null,Pt(F,"IfStatement");case ge:return!it&&!S.allowReturnOutsideFunction&&K(E,"'return' outside of function"),Et(),jt(me)||Fi()?F.argument=null:(F.argument=ue(),ii()),Pt(F,"ReturnStatement");case _e:Et(),F.discriminant=Si(),F.cases=[],ee(Le),st.push(Vr);for(var yt,Nt;T!=we;)if(T===pt||T===Wt){var Ie=T===pt;yt&&Pt(yt,"SwitchCase"),F.cases.push(yt=oe()),yt.consequent=[],Et(),Ie?yt.test=ue():(Nt&&K(G,"Multiple default clauses"),Nt=!0,yt.test=null),ee(Ne)}else yt||Me(),yt.consequent.push(ke());return yt&&Pt(yt,"SwitchCase"),Et(),st.pop(),Pt(F,"SwitchStatement");case se:return Et(),Ri.test(g.slice(Q,E))&&K(Q,"Illegal newline after throw"),F.argument=ue(),ii(),Pt(F,"ThrowStatement");case le:if(Et(),F.block=Ci(),F.handler=null,T===Xt){var ri=oe();Et(),ee(mt),ri.param=Ge(),Z&&Vi(ri.param.name)&&K(ri.param.start,"Binding "+ri.param.name+" in strict mode"),ee(ve),ri.guard=null,ri.body=Ci(),F.handler=Pt(ri,"CatchClause")}return F.guardedHandlers=rt,F.finalizer=jt(qt)?Ci():null,!F.handler&&!F.finalizer&&K(F.start,"Missing catch or finally clause"),Pt(F,"TryStatement");case Ce:return Et(),pr(F),ii(),Pt(F,"VariableDeclaration");case Yt:return Et(),F.test=Si(),st.push(ji),F.body=ke(),st.pop(),Pt(F,"WhileStatement");case ae:return Z&&K(E,"'with' in strict mode"),Et(),F.object=Si(),F.body=ke(),Pt(F,"WithStatement");case Le:return Ci();case me:return Et(),Pt(F,"EmptyStatement");default:var tr=V,qi=ue();if(M===lt&&qi.type==="Identifier"&&jt(Ne)){for(var X=0;X<st.length;++X)st[X].name===tr&&K(qi.start,"Label '"+tr+"' is already declared");var qr=T.isLoop?"loop":T===_e?"switch":null;return st.push({name:tr,kind:qr}),F.body=ke(),st.pop(),F.label=qi,Pt(F,"LabeledStatement")}else return F.expression=qi,ii(),Pt(F,"ExpressionStatement")}}function Si(){ee(mt);var M=ue();return ee(ve),M}function Ci(M){var F=oe(),j=!0,X=!1,dt;for(F.body=[],ee(Le);!jt(we);){var vt=ke();F.body.push(vt),j&&M&&Wi(vt)&&(dt=X,Gi(X=!0)),j=!1}return X&&!dt&&Gi(!1),Pt(F,"BlockStatement")}function Zi(M,F){return M.init=F,ee(me),M.test=T===me?null:ue(),ee(me),M.update=T===ve?null:ue(),ee(ve),M.body=ke(),st.pop(),Pt(M,"ForStatement")}function cr(M,F){return M.left=F,M.right=ue(),ee(ve),M.body=ke(),st.pop(),Pt(M,"ForInStatement")}function pr(M,F){for(M.declarations=[],M.kind="var";;){var j=oe();if(j.id=Ge(),Z&&Vi(j.id.name)&&K(j.id.start,"Binding "+j.id.name+" in strict mode"),j.init=jt(i)?ue(!0,F):null,M.declarations.push(Pt(j,"VariableDeclarator")),!jt(be))break}return M}function ue(M,F){var j=Ki(F);if(!M&&T===be){var X=He(j);for(X.expressions=[j];jt(be);)X.expressions.push(Ki(F));return Pt(X,"SequenceExpression")}return j}function Ki(M){var F=Rr(M);if(T.isAssign){var j=He(F);return j.operator=V,j.left=F,Et(),j.right=Ki(M),Di(F),Pt(j,"AssignmentExpression")}return F}function Rr(M){var F=zr(M);if(jt(xi)){var j=He(F);return j.test=F,j.consequent=ue(!0),ee(Ne),j.alternate=ue(!0,M),Pt(j,"ConditionalExpression")}return F}function zr(M){return Xi(Qi(),-1,M)}function Xi(M,F,j){var X=T.binop;if(X!=null&&(!j||T!==ui)&&X>F){var dt=He(M);dt.left=M,dt.operator=V;var vt=T;Et(),dt.right=Xi(Qi(),X,j);var yt=Pt(dt,vt===L||vt===H?"LogicalExpression":"BinaryExpression");return Xi(yt,F,j)}return M}function Qi(){if(T.prefix){var M=oe(),F=T.isUpdate;return M.operator=V,M.prefix=!0,B=!0,Et(),M.argument=Qi(),F?Di(M.argument):Z&&M.operator==="delete"&&M.argument.type==="Identifier"&&K(M.start,"Deleting local variable in strict mode"),Pt(M,F?"UpdateExpression":"UnaryExpression")}for(var j=Br();T.postfix&&!Fi();){var M=He(j);M.operator=V,M.prefix=!1,M.argument=j,Di(j),Et(),j=Pt(M,"UpdateExpression")}return j}function Br(){return ki(Yi())}function ki(M,F){if(jt(yi)){var j=He(M);return j.object=M,j.property=Ge(!0),j.computed=!1,ki(Pt(j,"MemberExpression"),F)}else if(jt(Ye)){var j=He(M);return j.object=M,j.property=ue(),j.computed=!0,ee(Je),ki(Pt(j,"MemberExpression"),F)}else if(!F&&jt(mt)){var j=He(M);return j.callee=M,j.arguments=$i(ve,!1),ki(Pt(j,"CallExpression"),F)}else return M}function Yi(){switch(T){case mi:var X=oe();return Et(),Pt(X,"ThisExpression");case lt:return Ge();case ot:case ft:case at:var X=oe();return X.value=V,X.raw=g.slice(E,N),Et(),Pt(X,"Literal");case Ni:case Oi:case Mi:var X=oe();return X.value=T.atomValue,X.raw=T.keyword,Et(),Pt(X,"Literal");case mt:var M=O,F=E;Et();var j=ue();return j.start=F,j.end=N,S.locations&&(j.loc.start=M,j.loc.end=z),S.ranges&&(j.range=[F,N]),ee(ve),j;case Ye:var X=oe();return Et(),X.elements=$i(Je,!0,!0),Pt(X,"ArrayExpression");case Le:return Dr();case pe:var X=oe();return Et(),Ji(X,!1);case Li:return Fr();default:Me()}}function Fr(){var M=oe();return Et(),M.callee=ki(Yi(),!0),jt(mt)?M.arguments=$i(ve,!1):M.arguments=rt,Pt(M,"NewExpression")}function Dr(){var M=oe(),F=!0,j=!1;for(M.properties=[],Et();!jt(we);){if(F)F=!1;else if(ee(be),S.allowTrailingCommas&&jt(we))break;var X={key:dr()},dt=!1,vt;if(jt(Ne)?(X.value=ue(!0),vt=X.kind="init"):S.ecmaVersion>=5&&X.key.type==="Identifier"&&(X.key.name==="get"||X.key.name==="set")?(dt=j=!0,vt=X.kind=X.key.name,X.key=dr(),T!==mt&&Me(),X.value=Ji(oe(),!1)):Me(),X.key.type==="Identifier"&&(Z||j))for(var yt=0;yt<M.properties.length;++yt){var Nt=M.properties[yt];if(Nt.key.name===X.key.name){var Ie=vt==Nt.kind||dt&&Nt.kind==="init"||vt==="init"&&(Nt.kind==="get"||Nt.kind==="set");Ie&&!Z&&vt==="init"&&Nt.kind==="init"&&(Ie=!1),Ie&&K(X.key.start,"Redefinition of property")}}M.properties.push(X)}return Pt(M,"ObjectExpression")}function dr(){return T===ot||T===ft?Yi():Ge(!0)}function Ji(M,F){T===lt?M.id=Ge():F?Me():M.id=null,M.params=[];var j=!0;for(ee(mt);!jt(ve);)j?j=!1:ee(be),M.params.push(Ge());var X=it,dt=st;if(it=!0,st=[],M.body=Ci(!0),it=X,st=dt,Z||M.body.body.length&&Wi(M.body.body[0]))for(var vt=M.id?-1:0;vt<M.params.length;++vt){var yt=vt<0?M.id:M.params[vt];if((er(yt.name)||Vi(yt.name))&&K(yt.start,"Defining '"+yt.name+"' in strict mode"),vt>=0)for(var Nt=0;Nt<vt;++Nt)yt.name===M.params[Nt].name&&K(yt.start,"Argument name clash in strict mode")}return Pt(M,F?"FunctionDeclaration":"FunctionExpression")}function $i(M,F,j){for(var X=[],dt=!0;!jt(M);){if(dt)dt=!1;else if(ee(be),F&&S.allowTrailingCommas&&jt(M))break;j&&T===be?X.push(null):X.push(ue(!0))}return X}function Ge(M){var F=oe();return M&&S.forbidReserved=="everywhere"&&(M=!1),T===lt?(!M&&(S.forbidReserved&&(S.ecmaVersion===3?qe:Ue)(V)||Z&&er(V))&&g.slice(E,N).indexOf("\\")==-1&&K(E,"The keyword '"+V+"' is reserved"),F.name=V):M&&T.keyword?F.name=T.keyword:Me(),B=!1,Et(),Pt(F,"Identifier")}}),e.version||(e=null)}function s(y,S){return(t.acorn||e).parse(y,S)}var o={"+":"__add","-":"__subtract","*":"__multiply","/":"__divide","%":"__modulo","==":"__equals","!=":"__equals"},h={"-":"__negate","+":"__self"},u=R.each(["add","subtract","multiply","divide","modulo","equals","negate"],function(y){this["__"+y]="#"+y},{__self:function(){return this}});D.inject(u),ht.inject(u),Ut.inject(u);function l(y,S,g){var w=o[S];if(y&&y[w]){var c=y[w](g);return S==="!="?!c:c}switch(S){case"+":return y+g;case"-":return y-g;case"*":return y*g;case"/":return y/g;case"%":return y%g;case"==":return y==g;case"!=":return y!=g}}function f(y,S){var g=h[y];if(S&&S[g])return S[g]();switch(y){case"+":return+S;case"-":return-S}}function v(y,S){if(!y)return"";S=S||{};var g=[];function w(Z){for(var K=0,rt=g.length;K<rt;K++){var ot=g[K];if(ot[0]>=Z)break;Z+=ot[1]}return Z}function c(Z){return y.substring(w(Z.range[0]),w(Z.range[1]))}function x(Z,K){return y.substring(w(Z.range[1]),w(K.range[0]))}function I(Z,K){for(var rt=w(Z.range[0]),ot=w(Z.range[1]),at=0,ft=g.length-1;ft>=0;ft--)if(rt>g[ft][0]){at=ft+1;break}g.splice(at,0,[rt,K.length-ot+rt]),y=y.substring(0,rt)+K+y.substring(ot)}function A(Z,K){switch(Z.type){case"UnaryExpression":if(Z.operator in h&&Z.argument.type!=="Literal"){var rt=c(Z.argument);I(Z,'$__("'+Z.operator+'", '+rt+")")}break;case"BinaryExpression":if(Z.operator in o&&Z.left.type!=="Literal"){var ot=c(Z.left),at=c(Z.right),ft=x(Z.left,Z.right),lt=Z.operator;I(Z,"__$__("+ot+","+ft.replace(new RegExp("\\"+lt),'"'+lt+'"')+", "+at+")")}break;case"UpdateExpression":case"AssignmentExpression":var _t=K&&K.type;if(!(_t==="ForStatement"||_t==="BinaryExpression"&&/^[=!<>]/.test(K.operator)||_t==="MemberExpression"&&K.computed)){if(Z.type==="UpdateExpression"){var rt=c(Z.argument),xt="__$__("+rt+', "'+Z.operator[0]+'", 1)',pt=rt+" = "+xt;Z.prefix?pt="("+pt+")":(_t==="AssignmentExpression"||_t==="VariableDeclarator"||_t==="BinaryExpression")&&(c(K.left||K.id)===rt&&(pt=xt),pt=rt+"; "+pt),I(Z,pt)}else if(/^.=$/.test(Z.operator)&&Z.left.type!=="Literal"){var ot=c(Z.left),at=c(Z.right),xt=ot+" = __$__("+ot+', "'+Z.operator[0]+'", '+at+")";I(Z,/^\(.*\)$/.test(c(Z))?"("+xt+")":xt)}}break}}function b(Z){switch(Z.type){case"ExportDefaultDeclaration":I({range:[Z.start,Z.declaration.start]},"module.exports = ");break;case"ExportNamedDeclaration":var K=Z.declaration,rt=Z.specifiers;if(K){var ot=K.declarations;ot&&(ot.forEach(function(ft){I(ft,"module.exports."+c(ft))}),I({range:[Z.start,K.start+K.kind.length]},""))}else if(rt){var at=rt.map(function(ft){var lt=c(ft);return"module.exports."+lt+" = "+lt+"; "}).join("");at&&I(Z,at)}break}}function E(Z,K,rt){if(Z){for(var ot in Z)if(ot!=="range"&&ot!=="loc"){var at=Z[ot];if(Array.isArray(at))for(var ft=0,lt=at.length;ft<lt;ft++)E(at[ft],Z,rt);else at&&typeof at=="object"&&E(at,Z,rt)}rt.operatorOverloading!==!1&&A(Z,K),rt.moduleExports!==!1&&b(Z)}}function N(Z){var K="",rt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(Z=(Math.abs(Z)<<1)+(Z<0?1:0);Z||!K;){var ot=Z&31;Z>>=5,Z&&(ot|=32),K+=rt[ot]}return K}var O=S.url||"",z=S.sourceMaps,T=S.paperFeatures||{},V=S.source||y,B=S.offset||0,q=bt.agent,U=q.versionNumber,G=!1,Q=/\r\n|\n|\r/mg,$;if(z&&(q.chrome&&U>=30||q.webkit&&U>=537.76||q.firefox&&U>=23||q.node)){if(q.node)B-=2;else if(Ot&&O&&!Ot.location.href.indexOf(O)){var it=Tt.getElementsByTagName("html")[0].innerHTML;B=it.substr(0,it.indexOf(y)+1).match(Q).length+1}G=B>0&&!(q.chrome&&U>=36||q.safari&&U>=600||q.firefox&&U>=40||q.node);var st=["AA"+N(G?0:B)+"A"];st.length=(y.match(Q)||[]).length+1+(G?B:0),$={version:3,file:O,names:[],mappings:st.join(";AACA"),sourceRoot:"",sources:[O],sourcesContent:[V]}}return(T.operatorOverloading!==!1||T.moduleExports!==!1)&&E(s(y,{ranges:!0,preserveParens:!0,sourceType:"module"}),null,T),$&&(G&&(y=new Array(B+1).join(`
`)+y),/^(inline|both)$/.test(z)&&(y+=`
//# sourceMappingURL=data:application/json;base64,`+ye.btoa(unescape(encodeURIComponent(JSON.stringify($))))),y+=`
//# sourceURL=`+(O||"paperscript")),{url:O,source:V,code:y,map:$}}function m(y,S,g){bt=S;var w=S.getView(),c=/\btool\.\w+|\s+on(?:Key|Mouse)(?:Up|Down|Move|Drag)\b/.test(y)&&!/\bnew\s+Tool\b/.test(y)?new Xe:null,x=c?c._events:[],I=["onFrame","onResize"].concat(x),A=[],b=[],E,N=typeof y=="object"?y:v(y,g);y=N.code;function O(U,G){for(var Q in U)(G||!/^_/.test(Q))&&new RegExp("([\\b\\s\\W]|^)"+Q.replace(/\$/g,"\\$")+"\\b").test(y)&&(A.push(Q),b.push(U[Q]))}O({__$__:l,$__:f,paper:S,tool:c},!0),O(S),y="var module = { exports: {} }; "+y;var B=R.each(I,function(U){new RegExp("\\s+"+U+"\\b").test(y)&&(A.push(U),this.push("module.exports."+U+" = "+U+";"))},[]).join(`
`);B&&(y+=`
`+B),y+=`
return module.exports;`;var z=bt.agent;if(Tt&&(z.chrome||z.firefox&&z.versionNumber<40)){var T=Tt.createElement("script"),V=Tt.head||Tt.getElementsByTagName("head")[0];z.firefox&&(y=`
`+y),T.appendChild(Tt.createTextNode("document.__paperscript__ = function("+A+") {"+y+`
}`)),V.appendChild(T),E=Tt.__paperscript__,delete Tt.__paperscript__,V.removeChild(T)}else E=Function(A,y);var B=E&&E.apply(S,b),q=B||{};return R.each(x,function(U){var G=q[U];G&&(c[U]=G)}),w&&(q.onResize&&w.setOnResize(q.onResize),w.emit("resize",{size:w.size,delta:new D}),q.onFrame&&w.setOnFrame(q.onFrame),w.requestUpdate()),B}function d(y){if(/^text\/(?:x-|)paperscript$/.test(y.type)&&he.getAttribute(y,"ignore")!=="true"){var S=he.getAttribute(y,"canvas"),g=Tt.getElementById(S),w=y.src||y.getAttribute("data-src"),c=he.hasAttribute(y,"async"),x="data-paper-scope";if(!g)throw new Error('Unable to find canvas with id "'+S+'"');var I=he.get(g.getAttribute(x))||new he().setup(g);return g.setAttribute(x,I._id),w?hi.request({url:w,async:c,mimeType:"text/plain",onLoad:function(A){m(A,I,w)}}):m(y.innerHTML,I,y.baseURI),y.setAttribute("data-paper-ignore","true"),I}}function p(){R.each(Tt&&Tt.getElementsByTagName("script"),d)}function k(y){return y?d(y):p()}return Ot&&(Tt.readyState==="complete"?setTimeout(p):Rt.add(Ot,{load:p})),{compile:v,execute:m,load:k,parse:s,calculateBinary:l,calculateUnary:f}}).call(this);var bt=new(he.inject(R.exports,{Base:R,Numerical:At,Key:Ke,DomEvent:Rt,DomElement:Mt,document:Tt,window:Ot,Symbol:Dt,PlacedSymbol:je}));return bt.agent.node&&gr(bt),typeof Y=="function"&&Y.amd?Y("paper",bt):ni&&(ni.exports=bt),bt}).call(Xr,typeof self=="object"?self:null)}(Ui)),Ui.exports}var Yr=Qr();const $r=Hr(Yr);export{Yr as a,$r as p};
