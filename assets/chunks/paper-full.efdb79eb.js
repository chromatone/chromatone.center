import{a as Hn,c as cn,g as Gn}from"./commonjsHelpers.de833af9.js";function Wn(Jt){throw new Error('Could not dynamically require "'+Jt+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var dn={exports:{}};const jn={},Zn=Object.freeze(Object.defineProperty({__proto__:null,default:jn},Symbol.toStringTag,{value:"Module"})),ln=Hn(Zn);var Ri={exports:{}},fn;function Kn(){return fn||(fn=1,function(Jt,_t){(function(Y,Ve){Ve(_t)})(cn,function(Y){var Ve=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,81,2,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,9,5351,0,7,14,13835,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,983,6,110,6,6,9,4759,9,787719,239],Te=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,4026,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,757,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,3104,541,1507,4938,6,4191],B="‌‍·̀-ͯ·҃-֑҇-ׇֽֿׁׂׅׄؐ-ًؚ-٩ٰۖ-ۜ۟-۪ۤۧۨ-ۭ۰-۹ܑܰ-݊ަ-ް߀-߉߫-߽߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛࢘-࢟࣊-ࣣ࣡-ःऺ-़ा-ॏ॑-ॗॢॣ०-९ঁ-ঃ়া-ৄেৈো-্ৗৢৣ০-৯৾ਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣ૦-૯ૺ-૿ଁ-ଃ଼ା-ୄେୈୋ-୍୕-ୗୢୣ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఀ-ఄ఼ా-ౄె-ైొ-్ౕౖౢౣ౦-౯ಁ-ಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣ೦-೯ೳഀ-ഃ഻഼ാ-ൄെ-ൈൊ-്ൗൢൣ൦-൯ඁ-ඃ්ා-ුූෘ-ෟ෦-෯ෲෳัิ-ฺ็-๎๐-๙ັິ-ຼ່-໎໐-໙༘༙༠-༩༹༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှ၀-၉ၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟፩-፱ᜒ-᜕ᜲ-᜴ᝒᝓᝲᝳ឴-៓៝០-៩᠋-᠍᠏-᠙ᢩᤠ-ᤫᤰ-᤻᥆-᥏᧐-᧚ᨗ-ᨛᩕ-ᩞ᩠-᩿᩼-᪉᪐-᪙᪰-᪽ᪿ-ᫎᬀ-ᬄ᬴-᭄᭐-᭙᭫-᭳ᮀ-ᮂᮡ-ᮭ᮰-᮹᯦-᯳ᰤ-᰷᱀-᱉᱐-᱙᳐-᳔᳒-᳨᳭᳴᳷-᳹᷀-᷿‿⁀⁔⃐-⃥⃜⃡-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯꘠-꘩꙯ꙴ-꙽ꚞꚟ꛰꛱ꠂ꠆ꠋꠣ-ꠧ꠬ꢀꢁꢴ-ꣅ꣐-꣙꣠-꣱ꣿ-꤉ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀꧐-꧙ꧥ꧰-꧹ꨩ-ꨶꩃꩌꩍ꩐-꩙ꩻ-ꩽꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꫫ-ꫯꫵ꫶ꯣ-ꯪ꯬꯭꯰-꯹ﬞ︀-️︠-︯︳︴﹍-﹏０-９＿",zt="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙՠ-ֈא-תׯ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࡠ-ࡪࡰ-ࢇࢉ-ࢎࢠ-ࣉऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱৼਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡૹଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘ-ౚౝౠౡಀಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೝೞೠೡೱೲഄ-ഌഎ-ഐഒ-ഺഽൎൔ-ൖൟ-ൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄຆ-ຊຌ-ຣລວ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏽᏸ-ᏽᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜑᜟ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡸᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭌᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᲀ-ᲈᲐ-ᲺᲽ-Ჿᳩ-ᳬᳮ-ᳳᳵᳶᳺᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕ℘-ℝℤΩℨK-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞ々-〇〡-〩〱-〵〸-〼ぁ-ゖ゛-ゟァ-ヺー-ヿㄅ-ㄯㄱ-ㆎㆠ-ㆿㇰ-ㇿ㐀-䶿一-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꟊꟐꟑꟓꟕ-ꟙꟲ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꣽꣾꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭩꭰ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",rt={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},Et="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",$t={5:Et,"5module":Et+" export import",6:Et+" const class extends export import super"},lt=/^in(stanceof)?$/,Ae=new RegExp("["+zt+"]"),ei=new RegExp("["+zt+B+"]");function D(i,a){for(var x=65536,I=0;I<a.length;I+=2){if(x+=a[I],x>i)return!1;if(x+=a[I+1],x>=i)return!0}return!1}function et(i,a){return i<65?i===36:i<91?!0:i<97?i===95:i<123?!0:i<=65535?i>=170&&Ae.test(String.fromCharCode(i)):a===!1?!1:D(i,Te)}function oe(i,a){return i<48?i===36:i<58?!0:i<65?!1:i<91?!0:i<97?i===95:i<123?!0:i<=65535?i>=170&&ei.test(String.fromCharCode(i)):a===!1?!1:D(i,Te)||D(i,Ve)}var Ce=function(a,x){x===void 0&&(x={}),this.label=a,this.keyword=x.keyword,this.beforeExpr=!!x.beforeExpr,this.startsExpr=!!x.startsExpr,this.isLoop=!!x.isLoop,this.isAssign=!!x.isAssign,this.prefix=!!x.prefix,this.postfix=!!x.postfix,this.binop=x.binop||null,this.updateContext=null};function le(i,a){return new Ce(i,{beforeExpr:!0,binop:a})}var ft={beforeExpr:!0},be={startsExpr:!0},Ke={};function Se(i,a){return a===void 0&&(a={}),a.keyword=i,Ke[i]=new Ce(i,a)}var A={num:new Ce("num",be),regexp:new Ce("regexp",be),string:new Ce("string",be),name:new Ce("name",be),privateId:new Ce("privateId",be),eof:new Ce("eof"),bracketL:new Ce("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new Ce("]"),braceL:new Ce("{",{beforeExpr:!0,startsExpr:!0}),braceR:new Ce("}"),parenL:new Ce("(",{beforeExpr:!0,startsExpr:!0}),parenR:new Ce(")"),comma:new Ce(",",ft),semi:new Ce(";",ft),colon:new Ce(":",ft),dot:new Ce("."),question:new Ce("?",ft),questionDot:new Ce("?."),arrow:new Ce("=>",ft),template:new Ce("template"),invalidTemplate:new Ce("invalidTemplate"),ellipsis:new Ce("...",ft),backQuote:new Ce("`",be),dollarBraceL:new Ce("${",{beforeExpr:!0,startsExpr:!0}),eq:new Ce("=",{beforeExpr:!0,isAssign:!0}),assign:new Ce("_=",{beforeExpr:!0,isAssign:!0}),incDec:new Ce("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new Ce("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:le("||",1),logicalAND:le("&&",2),bitwiseOR:le("|",3),bitwiseXOR:le("^",4),bitwiseAND:le("&",5),equality:le("==/!=/===/!==",6),relational:le("</>/<=/>=",7),bitShift:le("<</>>/>>>",8),plusMin:new Ce("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:le("%",10),star:le("*",10),slash:le("/",10),starstar:new Ce("**",{beforeExpr:!0}),coalesce:le("??",1),_break:Se("break"),_case:Se("case",ft),_catch:Se("catch"),_continue:Se("continue"),_debugger:Se("debugger"),_default:Se("default",ft),_do:Se("do",{isLoop:!0,beforeExpr:!0}),_else:Se("else",ft),_finally:Se("finally"),_for:Se("for",{isLoop:!0}),_function:Se("function",be),_if:Se("if"),_return:Se("return",ft),_switch:Se("switch"),_throw:Se("throw",ft),_try:Se("try"),_var:Se("var"),_const:Se("const"),_while:Se("while",{isLoop:!0}),_with:Se("with"),_new:Se("new",{beforeExpr:!0,startsExpr:!0}),_this:Se("this",be),_super:Se("super",be),_class:Se("class",be),_extends:Se("extends",ft),_export:Se("export"),_import:Se("import",be),_null:Se("null",be),_true:Se("true",be),_false:Se("false",be),_in:Se("in",{beforeExpr:!0,binop:7}),_instanceof:Se("instanceof",{beforeExpr:!0,binop:7}),_typeof:Se("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:Se("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:Se("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},De=/\r\n?|\n|\u2028|\u2029/,Tt=new RegExp(De.source,"g");function Xe(i){return i===10||i===13||i===8232||i===8233}function Lt(i,a,x){x===void 0&&(x=i.length);for(var I=a;I<x;I++){var N=i.charCodeAt(I);if(Xe(N))return I<x-1&&N===13&&i.charCodeAt(I+1)===10?I+2:I+1}return-1}var Dt=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,Qe=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,vt=Object.prototype,de=vt.hasOwnProperty,ci=vt.toString,te=Object.hasOwn||function(i,a){return de.call(i,a)},dt=Array.isArray||function(i){return ci.call(i)==="[object Array]"};function ot(i){return new RegExp("^(?:"+i.replace(/ /g,"|")+")$")}function we(i){return i<=65535?String.fromCharCode(i):(i-=65536,String.fromCharCode((i>>10)+55296,(i&1023)+56320))}var mt=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,St=function(a,x){this.line=a,this.column=x};St.prototype.offset=function(a){return new St(this.line,this.column+a)};var qt=function(a,x,I){this.start=x,this.end=I,a.sourceFile!==null&&(this.source=a.sourceFile)};function Nt(i,a){for(var x=1,I=0;;){var N=Lt(i,I,a);if(N<0)return new St(x,a-I);++x,I=N}}var ti={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},Ge=!1;function ii(i){var a={};for(var x in ti)a[x]=i&&te(i,x)?i[x]:ti[x];if(a.ecmaVersion==="latest"?a.ecmaVersion=1e8:a.ecmaVersion==null?(!Ge&&typeof console=="object"&&console.warn&&(Ge=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),a.ecmaVersion=11):a.ecmaVersion>=2015&&(a.ecmaVersion-=2009),a.allowReserved==null&&(a.allowReserved=a.ecmaVersion<5),(!i||i.allowHashBang==null)&&(a.allowHashBang=a.ecmaVersion>=14),dt(a.onToken)){var I=a.onToken;a.onToken=function(N){return I.push(N)}}return dt(a.onComment)&&(a.onComment=di(a,a.onComment)),a}function di(i,a){return function(x,I,N,H,W,$){var ne={type:x?"Block":"Line",value:I,start:N,end:H};i.locations&&(ne.loc=new qt(this,W,$)),i.ranges&&(ne.range=[N,H]),a.push(ne)}}var kt=1,Re=2,qe=4,Be=8,Pi=16,Ut=32,pi=64,gi=128,Ht=256,_i=kt|Re|Ht;function vi(i,a){return Re|(i?qe:0)|(a?Be:0)}var ni=0,ri=1,Me=2,si=3,Fe=4,mi=5,he=function(a,x,I){this.options=a=ii(a),this.sourceFile=a.sourceFile,this.keywords=ot($t[a.ecmaVersion>=6?6:a.sourceType==="module"?"5module":5]);var N="";a.allowReserved!==!0&&(N=rt[a.ecmaVersion>=6?6:a.ecmaVersion===5?5:3],a.sourceType==="module"&&(N+=" await")),this.reservedWords=ot(N);var H=(N?N+" ":"")+rt.strict;this.reservedWordsStrict=ot(H),this.reservedWordsStrictBind=ot(H+" "+rt.strictBind),this.input=String(x),this.containsEsc=!1,I?(this.pos=I,this.lineStart=this.input.lastIndexOf(`
`,I-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(De).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=A.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=a.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&a.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(kt),this.regexpState=null,this.privateNameStack=[]},e={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};he.prototype.parse=function(){var a=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(a)},e.inFunction.get=function(){return(this.currentVarScope().flags&Re)>0},e.inGenerator.get=function(){return(this.currentVarScope().flags&Be)>0&&!this.currentVarScope().inClassFieldInit},e.inAsync.get=function(){return(this.currentVarScope().flags&qe)>0&&!this.currentVarScope().inClassFieldInit},e.canAwait.get=function(){for(var i=this.scopeStack.length-1;i>=0;i--){var a=this.scopeStack[i];if(a.inClassFieldInit||a.flags&Ht)return!1;if(a.flags&Re)return(a.flags&qe)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction},e.allowSuper.get=function(){var i=this.currentThisScope(),a=i.flags,x=i.inClassFieldInit;return(a&pi)>0||x||this.options.allowSuperOutsideMethod},e.allowDirectSuper.get=function(){return(this.currentThisScope().flags&gi)>0},e.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())},e.allowNewDotTarget.get=function(){var i=this.currentThisScope(),a=i.flags,x=i.inClassFieldInit;return(a&(Re|Ht))>0||x},e.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&Ht)>0},he.extend=function(){for(var a=[],x=arguments.length;x--;)a[x]=arguments[x];for(var I=this,N=0;N<a.length;N++)I=a[N](I);return I},he.parse=function(a,x){return new this(x,a).parse()},he.parseExpressionAt=function(a,x,I){var N=new this(I,a,x);return N.nextToken(),N.parseExpression()},he.tokenizer=function(a,x){return new this(x,a)},Object.defineProperties(he.prototype,e);var t=he.prototype,n=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;t.strictDirective=function(i){if(this.options.ecmaVersion<5)return!1;for(;;){Qe.lastIndex=i,i+=Qe.exec(this.input)[0].length;var a=n.exec(this.input.slice(i));if(!a)return!1;if((a[1]||a[2])==="use strict"){Qe.lastIndex=i+a[0].length;var x=Qe.exec(this.input),I=x.index+x[0].length,N=this.input.charAt(I);return N===";"||N==="}"||De.test(x[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(N)||N==="!"&&this.input.charAt(I+1)==="=")}i+=a[0].length,Qe.lastIndex=i,i+=Qe.exec(this.input)[0].length,this.input[i]===";"&&i++}},t.eat=function(i){return this.type===i?(this.next(),!0):!1},t.isContextual=function(i){return this.type===A.name&&this.value===i&&!this.containsEsc},t.eatContextual=function(i){return this.isContextual(i)?(this.next(),!0):!1},t.expectContextual=function(i){this.eatContextual(i)||this.unexpected()},t.canInsertSemicolon=function(){return this.type===A.eof||this.type===A.braceR||De.test(this.input.slice(this.lastTokEnd,this.start))},t.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},t.semicolon=function(){!this.eat(A.semi)&&!this.insertSemicolon()&&this.unexpected()},t.afterTrailingComma=function(i,a){if(this.type===i)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),a||this.next(),!0},t.expect=function(i){this.eat(i)||this.unexpected()},t.unexpected=function(i){this.raise(i??this.start,"Unexpected token")};var r=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};t.checkPatternErrors=function(i,a){if(i){i.trailingComma>-1&&this.raiseRecoverable(i.trailingComma,"Comma is not permitted after the rest element");var x=a?i.parenthesizedAssign:i.parenthesizedBind;x>-1&&this.raiseRecoverable(x,a?"Assigning to rvalue":"Parenthesized pattern")}},t.checkExpressionErrors=function(i,a){if(!i)return!1;var x=i.shorthandAssign,I=i.doubleProto;if(!a)return x>=0||I>=0;x>=0&&this.raise(x,"Shorthand property assignments are valid only in destructuring patterns"),I>=0&&this.raiseRecoverable(I,"Redefinition of __proto__ property")},t.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},t.isSimpleAssignTarget=function(i){return i.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(i.expression):i.type==="Identifier"||i.type==="MemberExpression"};var s=he.prototype;s.parseTopLevel=function(i){var a=Object.create(null);for(i.body||(i.body=[]);this.type!==A.eof;){var x=this.parseStatement(null,!0,a);i.body.push(x)}if(this.inModule)for(var I=0,N=Object.keys(this.undefinedExports);I<N.length;I+=1){var H=N[I];this.raiseRecoverable(this.undefinedExports[H].start,"Export '"+H+"' is not defined")}return this.adaptDirectivePrologue(i.body),this.next(),i.sourceType=this.options.sourceType,this.finishNode(i,"Program")};var u={kind:"loop"},h={kind:"switch"};s.isLet=function(i){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;Qe.lastIndex=this.pos;var a=Qe.exec(this.input),x=this.pos+a[0].length,I=this.input.charCodeAt(x);if(I===91||I===92)return!0;if(i)return!1;if(I===123||I>55295&&I<56320)return!0;if(et(I,!0)){for(var N=x+1;oe(I=this.input.charCodeAt(N),!0);)++N;if(I===92||I>55295&&I<56320)return!0;var H=this.input.slice(x,N);if(!lt.test(H))return!0}return!1},s.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;Qe.lastIndex=this.pos;var i=Qe.exec(this.input),a=this.pos+i[0].length,x;return!De.test(this.input.slice(this.pos,a))&&this.input.slice(a,a+8)==="function"&&(a+8===this.input.length||!(oe(x=this.input.charCodeAt(a+8))||x>55295&&x<56320))},s.parseStatement=function(i,a,x){var I=this.type,N=this.startNode(),H;switch(this.isLet(i)&&(I=A._var,H="let"),I){case A._break:case A._continue:return this.parseBreakContinueStatement(N,I.keyword);case A._debugger:return this.parseDebuggerStatement(N);case A._do:return this.parseDoStatement(N);case A._for:return this.parseForStatement(N);case A._function:return i&&(this.strict||i!=="if"&&i!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(N,!1,!i);case A._class:return i&&this.unexpected(),this.parseClass(N,!0);case A._if:return this.parseIfStatement(N);case A._return:return this.parseReturnStatement(N);case A._switch:return this.parseSwitchStatement(N);case A._throw:return this.parseThrowStatement(N);case A._try:return this.parseTryStatement(N);case A._const:case A._var:return H=H||this.value,i&&H!=="var"&&this.unexpected(),this.parseVarStatement(N,H);case A._while:return this.parseWhileStatement(N);case A._with:return this.parseWithStatement(N);case A.braceL:return this.parseBlock(!0,N);case A.semi:return this.parseEmptyStatement(N);case A._export:case A._import:if(this.options.ecmaVersion>10&&I===A._import){Qe.lastIndex=this.pos;var W=Qe.exec(this.input),$=this.pos+W[0].length,ne=this.input.charCodeAt($);if(ne===40||ne===46)return this.parseExpressionStatement(N,this.parseExpression())}return this.options.allowImportExportEverywhere||(a||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),I===A._import?this.parseImport(N):this.parseExport(N,x);default:if(this.isAsyncFunction())return i&&this.unexpected(),this.next(),this.parseFunctionStatement(N,!0,!i);var ye=this.value,ke=this.parseExpression();return I===A.name&&ke.type==="Identifier"&&this.eat(A.colon)?this.parseLabeledStatement(N,ye,ke,i):this.parseExpressionStatement(N,ke)}},s.parseBreakContinueStatement=function(i,a){var x=a==="break";this.next(),this.eat(A.semi)||this.insertSemicolon()?i.label=null:this.type!==A.name?this.unexpected():(i.label=this.parseIdent(),this.semicolon());for(var I=0;I<this.labels.length;++I){var N=this.labels[I];if((i.label==null||N.name===i.label.name)&&(N.kind!=null&&(x||N.kind==="loop")||i.label&&x))break}return I===this.labels.length&&this.raise(i.start,"Unsyntactic "+a),this.finishNode(i,x?"BreakStatement":"ContinueStatement")},s.parseDebuggerStatement=function(i){return this.next(),this.semicolon(),this.finishNode(i,"DebuggerStatement")},s.parseDoStatement=function(i){return this.next(),this.labels.push(u),i.body=this.parseStatement("do"),this.labels.pop(),this.expect(A._while),i.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(A.semi):this.semicolon(),this.finishNode(i,"DoWhileStatement")},s.parseForStatement=function(i){this.next();var a=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(u),this.enterScope(0),this.expect(A.parenL),this.type===A.semi)return a>-1&&this.unexpected(a),this.parseFor(i,null);var x=this.isLet();if(this.type===A._var||this.type===A._const||x){var I=this.startNode(),N=x?"let":this.value;return this.next(),this.parseVar(I,!0,N),this.finishNode(I,"VariableDeclaration"),(this.type===A._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&I.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===A._in?a>-1&&this.unexpected(a):i.await=a>-1),this.parseForIn(i,I)):(a>-1&&this.unexpected(a),this.parseFor(i,I))}var H=this.isContextual("let"),W=!1,$=new r,ne=this.parseExpression(a>-1?"await":!0,$);return this.type===A._in||(W=this.options.ecmaVersion>=6&&this.isContextual("of"))?(this.options.ecmaVersion>=9&&(this.type===A._in?a>-1&&this.unexpected(a):i.await=a>-1),H&&W&&this.raise(ne.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(ne,!1,$),this.checkLValPattern(ne),this.parseForIn(i,ne)):(this.checkExpressionErrors($,!0),a>-1&&this.unexpected(a),this.parseFor(i,ne))},s.parseFunctionStatement=function(i,a,x){return this.next(),this.parseFunction(i,l|(x?0:f),!1,a)},s.parseIfStatement=function(i){return this.next(),i.test=this.parseParenExpression(),i.consequent=this.parseStatement("if"),i.alternate=this.eat(A._else)?this.parseStatement("if"):null,this.finishNode(i,"IfStatement")},s.parseReturnStatement=function(i){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(A.semi)||this.insertSemicolon()?i.argument=null:(i.argument=this.parseExpression(),this.semicolon()),this.finishNode(i,"ReturnStatement")},s.parseSwitchStatement=function(i){this.next(),i.discriminant=this.parseParenExpression(),i.cases=[],this.expect(A.braceL),this.labels.push(h),this.enterScope(0);for(var a,x=!1;this.type!==A.braceR;)if(this.type===A._case||this.type===A._default){var I=this.type===A._case;a&&this.finishNode(a,"SwitchCase"),i.cases.push(a=this.startNode()),a.consequent=[],this.next(),I?a.test=this.parseExpression():(x&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),x=!0,a.test=null),this.expect(A.colon)}else a||this.unexpected(),a.consequent.push(this.parseStatement(null));return this.exitScope(),a&&this.finishNode(a,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(i,"SwitchStatement")},s.parseThrowStatement=function(i){return this.next(),De.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),i.argument=this.parseExpression(),this.semicolon(),this.finishNode(i,"ThrowStatement")};var o=[];s.parseCatchClauseParam=function(){var i=this.parseBindingAtom(),a=i.type==="Identifier";return this.enterScope(a?Ut:0),this.checkLValPattern(i,a?Fe:Me),this.expect(A.parenR),i},s.parseTryStatement=function(i){if(this.next(),i.block=this.parseBlock(),i.handler=null,this.type===A._catch){var a=this.startNode();this.next(),this.eat(A.parenL)?a.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),a.param=null,this.enterScope(0)),a.body=this.parseBlock(!1),this.exitScope(),i.handler=this.finishNode(a,"CatchClause")}return i.finalizer=this.eat(A._finally)?this.parseBlock():null,!i.handler&&!i.finalizer&&this.raise(i.start,"Missing catch or finally clause"),this.finishNode(i,"TryStatement")},s.parseVarStatement=function(i,a,x){return this.next(),this.parseVar(i,!1,a,x),this.semicolon(),this.finishNode(i,"VariableDeclaration")},s.parseWhileStatement=function(i){return this.next(),i.test=this.parseParenExpression(),this.labels.push(u),i.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(i,"WhileStatement")},s.parseWithStatement=function(i){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),i.object=this.parseParenExpression(),i.body=this.parseStatement("with"),this.finishNode(i,"WithStatement")},s.parseEmptyStatement=function(i){return this.next(),this.finishNode(i,"EmptyStatement")},s.parseLabeledStatement=function(i,a,x,I){for(var N=0,H=this.labels;N<H.length;N+=1){var W=H[N];W.name===a&&this.raise(x.start,"Label '"+a+"' is already declared")}for(var $=this.type.isLoop?"loop":this.type===A._switch?"switch":null,ne=this.labels.length-1;ne>=0;ne--){var ye=this.labels[ne];if(ye.statementStart===i.start)ye.statementStart=this.start,ye.kind=$;else break}return this.labels.push({name:a,kind:$,statementStart:this.start}),i.body=this.parseStatement(I?I.indexOf("label")===-1?I+"label":I:"label"),this.labels.pop(),i.label=x,this.finishNode(i,"LabeledStatement")},s.parseExpressionStatement=function(i,a){return i.expression=a,this.semicolon(),this.finishNode(i,"ExpressionStatement")},s.parseBlock=function(i,a,x){for(i===void 0&&(i=!0),a===void 0&&(a=this.startNode()),a.body=[],this.expect(A.braceL),i&&this.enterScope(0);this.type!==A.braceR;){var I=this.parseStatement(null);a.body.push(I)}return x&&(this.strict=!1),this.next(),i&&this.exitScope(),this.finishNode(a,"BlockStatement")},s.parseFor=function(i,a){return i.init=a,this.expect(A.semi),i.test=this.type===A.semi?null:this.parseExpression(),this.expect(A.semi),i.update=this.type===A.parenR?null:this.parseExpression(),this.expect(A.parenR),i.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(i,"ForStatement")},s.parseForIn=function(i,a){var x=this.type===A._in;return this.next(),a.type==="VariableDeclaration"&&a.declarations[0].init!=null&&(!x||this.options.ecmaVersion<8||this.strict||a.kind!=="var"||a.declarations[0].id.type!=="Identifier")&&this.raise(a.start,(x?"for-in":"for-of")+" loop variable declaration may not have an initializer"),i.left=a,i.right=x?this.parseExpression():this.parseMaybeAssign(),this.expect(A.parenR),i.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(i,x?"ForInStatement":"ForOfStatement")},s.parseVar=function(i,a,x,I){for(i.declarations=[],i.kind=x;;){var N=this.startNode();if(this.parseVarId(N,x),this.eat(A.eq)?N.init=this.parseMaybeAssign(a):!I&&x==="const"&&!(this.type===A._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():!I&&N.id.type!=="Identifier"&&!(a&&(this.type===A._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):N.init=null,i.declarations.push(this.finishNode(N,"VariableDeclarator")),!this.eat(A.comma))break}return i},s.parseVarId=function(i,a){i.id=this.parseBindingAtom(),this.checkLValPattern(i.id,a==="var"?ri:Me,!1)};var l=1,f=2,_=4;s.parseFunction=function(i,a,x,I,N){this.initFunction(i),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!I)&&(this.type===A.star&&a&f&&this.unexpected(),i.generator=this.eat(A.star)),this.options.ecmaVersion>=8&&(i.async=!!I),a&l&&(i.id=a&_&&this.type!==A.name?null:this.parseIdent(),i.id&&!(a&f)&&this.checkLValSimple(i.id,this.strict||i.generator||i.async?this.treatFunctionsAsVar?ri:Me:si));var H=this.yieldPos,W=this.awaitPos,$=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(vi(i.async,i.generator)),a&l||(i.id=this.type===A.name?this.parseIdent():null),this.parseFunctionParams(i),this.parseFunctionBody(i,x,!1,N),this.yieldPos=H,this.awaitPos=W,this.awaitIdentPos=$,this.finishNode(i,a&l?"FunctionDeclaration":"FunctionExpression")},s.parseFunctionParams=function(i){this.expect(A.parenL),i.params=this.parseBindingList(A.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},s.parseClass=function(i,a){this.next();var x=this.strict;this.strict=!0,this.parseClassId(i,a),this.parseClassSuper(i);var I=this.enterClassBody(),N=this.startNode(),H=!1;for(N.body=[],this.expect(A.braceL);this.type!==A.braceR;){var W=this.parseClassElement(i.superClass!==null);W&&(N.body.push(W),W.type==="MethodDefinition"&&W.kind==="constructor"?(H&&this.raiseRecoverable(W.start,"Duplicate constructor in the same class"),H=!0):W.key&&W.key.type==="PrivateIdentifier"&&v(I,W)&&this.raiseRecoverable(W.key.start,"Identifier '#"+W.key.name+"' has already been declared"))}return this.strict=x,this.next(),i.body=this.finishNode(N,"ClassBody"),this.exitClassBody(),this.finishNode(i,a?"ClassDeclaration":"ClassExpression")},s.parseClassElement=function(i){if(this.eat(A.semi))return null;var a=this.options.ecmaVersion,x=this.startNode(),I="",N=!1,H=!1,W="method",$=!1;if(this.eatContextual("static")){if(a>=13&&this.eat(A.braceL))return this.parseClassStaticBlock(x),x;this.isClassElementNameStart()||this.type===A.star?$=!0:I="static"}if(x.static=$,!I&&a>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===A.star)&&!this.canInsertSemicolon()?H=!0:I="async"),!I&&(a>=9||!H)&&this.eat(A.star)&&(N=!0),!I&&!H&&!N){var ne=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?W=ne:I=ne)}if(I?(x.computed=!1,x.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),x.key.name=I,this.finishNode(x.key,"Identifier")):this.parseClassElementName(x),a<13||this.type===A.parenL||W!=="method"||N||H){var ye=!x.static&&g(x,"constructor"),ke=ye&&i;ye&&W!=="method"&&this.raise(x.key.start,"Constructor can't have get/set modifier"),x.kind=ye?"constructor":W,this.parseClassMethod(x,N,H,ke)}else this.parseClassField(x);return x},s.isClassElementNameStart=function(){return this.type===A.name||this.type===A.privateId||this.type===A.num||this.type===A.string||this.type===A.bracketL||this.type.keyword},s.parseClassElementName=function(i){this.type===A.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),i.computed=!1,i.key=this.parsePrivateIdent()):this.parsePropertyName(i)},s.parseClassMethod=function(i,a,x,I){var N=i.key;i.kind==="constructor"?(a&&this.raise(N.start,"Constructor can't be a generator"),x&&this.raise(N.start,"Constructor can't be an async method")):i.static&&g(i,"prototype")&&this.raise(N.start,"Classes may not have a static property named prototype");var H=i.value=this.parseMethod(a,x,I);return i.kind==="get"&&H.params.length!==0&&this.raiseRecoverable(H.start,"getter should have no params"),i.kind==="set"&&H.params.length!==1&&this.raiseRecoverable(H.start,"setter should have exactly one param"),i.kind==="set"&&H.params[0].type==="RestElement"&&this.raiseRecoverable(H.params[0].start,"Setter cannot use rest params"),this.finishNode(i,"MethodDefinition")},s.parseClassField=function(i){if(g(i,"constructor")?this.raise(i.key.start,"Classes can't have a field named 'constructor'"):i.static&&g(i,"prototype")&&this.raise(i.key.start,"Classes can't have a static field named 'prototype'"),this.eat(A.eq)){var a=this.currentThisScope(),x=a.inClassFieldInit;a.inClassFieldInit=!0,i.value=this.parseMaybeAssign(),a.inClassFieldInit=x}else i.value=null;return this.semicolon(),this.finishNode(i,"PropertyDefinition")},s.parseClassStaticBlock=function(i){i.body=[];var a=this.labels;for(this.labels=[],this.enterScope(Ht|pi);this.type!==A.braceR;){var x=this.parseStatement(null);i.body.push(x)}return this.next(),this.exitScope(),this.labels=a,this.finishNode(i,"StaticBlock")},s.parseClassId=function(i,a){this.type===A.name?(i.id=this.parseIdent(),a&&this.checkLValSimple(i.id,Me,!1)):(a===!0&&this.unexpected(),i.id=null)},s.parseClassSuper=function(i){i.superClass=this.eat(A._extends)?this.parseExprSubscripts(null,!1):null},s.enterClassBody=function(){var i={declared:Object.create(null),used:[]};return this.privateNameStack.push(i),i.declared},s.exitClassBody=function(){var i=this.privateNameStack.pop(),a=i.declared,x=i.used;if(this.options.checkPrivateFields)for(var I=this.privateNameStack.length,N=I===0?null:this.privateNameStack[I-1],H=0;H<x.length;++H){var W=x[H];te(a,W.name)||(N?N.used.push(W):this.raiseRecoverable(W.start,"Private field '#"+W.name+"' must be declared in an enclosing class"))}};function v(i,a){var x=a.key.name,I=i[x],N="true";return a.type==="MethodDefinition"&&(a.kind==="get"||a.kind==="set")&&(N=(a.static?"s":"i")+a.kind),I==="iget"&&N==="iset"||I==="iset"&&N==="iget"||I==="sget"&&N==="sset"||I==="sset"&&N==="sget"?(i[x]="true",!1):I?!0:(i[x]=N,!1)}function g(i,a){var x=i.computed,I=i.key;return!x&&(I.type==="Identifier"&&I.name===a||I.type==="Literal"&&I.value===a)}s.parseExportAllDeclaration=function(i,a){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(i.exported=this.parseModuleExportName(),this.checkExport(a,i.exported,this.lastTokStart)):i.exported=null),this.expectContextual("from"),this.type!==A.string&&this.unexpected(),i.source=this.parseExprAtom(),this.semicolon(),this.finishNode(i,"ExportAllDeclaration")},s.parseExport=function(i,a){if(this.next(),this.eat(A.star))return this.parseExportAllDeclaration(i,a);if(this.eat(A._default))return this.checkExport(a,"default",this.lastTokStart),i.declaration=this.parseExportDefaultDeclaration(),this.finishNode(i,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())i.declaration=this.parseExportDeclaration(i),i.declaration.type==="VariableDeclaration"?this.checkVariableExport(a,i.declaration.declarations):this.checkExport(a,i.declaration.id,i.declaration.id.start),i.specifiers=[],i.source=null;else{if(i.declaration=null,i.specifiers=this.parseExportSpecifiers(a),this.eatContextual("from"))this.type!==A.string&&this.unexpected(),i.source=this.parseExprAtom();else{for(var x=0,I=i.specifiers;x<I.length;x+=1){var N=I[x];this.checkUnreserved(N.local),this.checkLocalExport(N.local),N.local.type==="Literal"&&this.raise(N.local.start,"A string literal cannot be used as an exported binding without `from`.")}i.source=null}this.semicolon()}return this.finishNode(i,"ExportNamedDeclaration")},s.parseExportDeclaration=function(i){return this.parseStatement(null)},s.parseExportDefaultDeclaration=function(){var i;if(this.type===A._function||(i=this.isAsyncFunction())){var a=this.startNode();return this.next(),i&&this.next(),this.parseFunction(a,l|_,!1,i)}else if(this.type===A._class){var x=this.startNode();return this.parseClass(x,"nullableID")}else{var I=this.parseMaybeAssign();return this.semicolon(),I}},s.checkExport=function(i,a,x){i&&(typeof a!="string"&&(a=a.type==="Identifier"?a.name:a.value),te(i,a)&&this.raiseRecoverable(x,"Duplicate export '"+a+"'"),i[a]=!0)},s.checkPatternExport=function(i,a){var x=a.type;if(x==="Identifier")this.checkExport(i,a,a.start);else if(x==="ObjectPattern")for(var I=0,N=a.properties;I<N.length;I+=1){var H=N[I];this.checkPatternExport(i,H)}else if(x==="ArrayPattern")for(var W=0,$=a.elements;W<$.length;W+=1){var ne=$[W];ne&&this.checkPatternExport(i,ne)}else x==="Property"?this.checkPatternExport(i,a.value):x==="AssignmentPattern"?this.checkPatternExport(i,a.left):x==="RestElement"?this.checkPatternExport(i,a.argument):x==="ParenthesizedExpression"&&this.checkPatternExport(i,a.expression)},s.checkVariableExport=function(i,a){if(i)for(var x=0,I=a;x<I.length;x+=1){var N=I[x];this.checkPatternExport(i,N.id)}},s.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()},s.parseExportSpecifier=function(i){var a=this.startNode();return a.local=this.parseModuleExportName(),a.exported=this.eatContextual("as")?this.parseModuleExportName():a.local,this.checkExport(i,a.exported,a.exported.start),this.finishNode(a,"ExportSpecifier")},s.parseExportSpecifiers=function(i){var a=[],x=!0;for(this.expect(A.braceL);!this.eat(A.braceR);){if(x)x=!1;else if(this.expect(A.comma),this.afterTrailingComma(A.braceR))break;a.push(this.parseExportSpecifier(i))}return a},s.parseImport=function(i){return this.next(),this.type===A.string?(i.specifiers=o,i.source=this.parseExprAtom()):(i.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),i.source=this.type===A.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(i,"ImportDeclaration")},s.parseImportSpecifier=function(){var i=this.startNode();return i.imported=this.parseModuleExportName(),this.eatContextual("as")?i.local=this.parseIdent():(this.checkUnreserved(i.imported),i.local=i.imported),this.checkLValSimple(i.local,Me),this.finishNode(i,"ImportSpecifier")},s.parseImportDefaultSpecifier=function(){var i=this.startNode();return i.local=this.parseIdent(),this.checkLValSimple(i.local,Me),this.finishNode(i,"ImportDefaultSpecifier")},s.parseImportNamespaceSpecifier=function(){var i=this.startNode();return this.next(),this.expectContextual("as"),i.local=this.parseIdent(),this.checkLValSimple(i.local,Me),this.finishNode(i,"ImportNamespaceSpecifier")},s.parseImportSpecifiers=function(){var i=[],a=!0;if(this.type===A.name&&(i.push(this.parseImportDefaultSpecifier()),!this.eat(A.comma)))return i;if(this.type===A.star)return i.push(this.parseImportNamespaceSpecifier()),i;for(this.expect(A.braceL);!this.eat(A.braceR);){if(a)a=!1;else if(this.expect(A.comma),this.afterTrailingComma(A.braceR))break;i.push(this.parseImportSpecifier())}return i},s.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===A.string){var i=this.parseLiteral(this.value);return mt.test(i.value)&&this.raise(i.start,"An export name cannot include a lone surrogate."),i}return this.parseIdent(!0)},s.adaptDirectivePrologue=function(i){for(var a=0;a<i.length&&this.isDirectiveCandidate(i[a]);++a)i[a].directive=i[a].expression.raw.slice(1,-1)},s.isDirectiveCandidate=function(i){return this.options.ecmaVersion>=5&&i.type==="ExpressionStatement"&&i.expression.type==="Literal"&&typeof i.expression.value=="string"&&(this.input[i.start]==='"'||this.input[i.start]==="'")};var p=he.prototype;p.toAssignable=function(i,a,x){if(this.options.ecmaVersion>=6&&i)switch(i.type){case"Identifier":this.inAsync&&i.name==="await"&&this.raise(i.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":i.type="ObjectPattern",x&&this.checkPatternErrors(x,!0);for(var I=0,N=i.properties;I<N.length;I+=1){var H=N[I];this.toAssignable(H,a),H.type==="RestElement"&&(H.argument.type==="ArrayPattern"||H.argument.type==="ObjectPattern")&&this.raise(H.argument.start,"Unexpected token")}break;case"Property":i.kind!=="init"&&this.raise(i.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(i.value,a);break;case"ArrayExpression":i.type="ArrayPattern",x&&this.checkPatternErrors(x,!0),this.toAssignableList(i.elements,a);break;case"SpreadElement":i.type="RestElement",this.toAssignable(i.argument,a),i.argument.type==="AssignmentPattern"&&this.raise(i.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":i.operator!=="="&&this.raise(i.left.end,"Only '=' operator can be used for specifying default value."),i.type="AssignmentPattern",delete i.operator,this.toAssignable(i.left,a);break;case"ParenthesizedExpression":this.toAssignable(i.expression,a,x);break;case"ChainExpression":this.raiseRecoverable(i.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!a)break;default:this.raise(i.start,"Assigning to rvalue")}else x&&this.checkPatternErrors(x,!0);return i},p.toAssignableList=function(i,a){for(var x=i.length,I=0;I<x;I++){var N=i[I];N&&this.toAssignable(N,a)}if(x){var H=i[x-1];this.options.ecmaVersion===6&&a&&H&&H.type==="RestElement"&&H.argument.type!=="Identifier"&&this.unexpected(H.argument.start)}return i},p.parseSpread=function(i){var a=this.startNode();return this.next(),a.argument=this.parseMaybeAssign(!1,i),this.finishNode(a,"SpreadElement")},p.parseRestBinding=function(){var i=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==A.name&&this.unexpected(),i.argument=this.parseBindingAtom(),this.finishNode(i,"RestElement")},p.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case A.bracketL:var i=this.startNode();return this.next(),i.elements=this.parseBindingList(A.bracketR,!0,!0),this.finishNode(i,"ArrayPattern");case A.braceL:return this.parseObj(!0)}return this.parseIdent()},p.parseBindingList=function(i,a,x,I){for(var N=[],H=!0;!this.eat(i);)if(H?H=!1:this.expect(A.comma),a&&this.type===A.comma)N.push(null);else{if(x&&this.afterTrailingComma(i))break;if(this.type===A.ellipsis){var W=this.parseRestBinding();this.parseBindingListItem(W),N.push(W),this.type===A.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(i);break}else N.push(this.parseAssignableListItem(I))}return N},p.parseAssignableListItem=function(i){var a=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(a),a},p.parseBindingListItem=function(i){return i},p.parseMaybeDefault=function(i,a,x){if(x=x||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(A.eq))return x;var I=this.startNodeAt(i,a);return I.left=x,I.right=this.parseMaybeAssign(),this.finishNode(I,"AssignmentPattern")},p.checkLValSimple=function(i,a,x){a===void 0&&(a=ni);var I=a!==ni;switch(i.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(i.name)&&this.raiseRecoverable(i.start,(I?"Binding ":"Assigning to ")+i.name+" in strict mode"),I&&(a===Me&&i.name==="let"&&this.raiseRecoverable(i.start,"let is disallowed as a lexically bound name"),x&&(te(x,i.name)&&this.raiseRecoverable(i.start,"Argument name clash"),x[i.name]=!0),a!==mi&&this.declareName(i.name,a,i.start));break;case"ChainExpression":this.raiseRecoverable(i.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":I&&this.raiseRecoverable(i.start,"Binding member expression");break;case"ParenthesizedExpression":return I&&this.raiseRecoverable(i.start,"Binding parenthesized expression"),this.checkLValSimple(i.expression,a,x);default:this.raise(i.start,(I?"Binding":"Assigning to")+" rvalue")}},p.checkLValPattern=function(i,a,x){switch(a===void 0&&(a=ni),i.type){case"ObjectPattern":for(var I=0,N=i.properties;I<N.length;I+=1){var H=N[I];this.checkLValInnerPattern(H,a,x)}break;case"ArrayPattern":for(var W=0,$=i.elements;W<$.length;W+=1){var ne=$[W];ne&&this.checkLValInnerPattern(ne,a,x)}break;default:this.checkLValSimple(i,a,x)}},p.checkLValInnerPattern=function(i,a,x){switch(a===void 0&&(a=ni),i.type){case"Property":this.checkLValInnerPattern(i.value,a,x);break;case"AssignmentPattern":this.checkLValPattern(i.left,a,x);break;case"RestElement":this.checkLValPattern(i.argument,a,x);break;default:this.checkLValPattern(i,a,x)}};var w=function(a,x,I,N,H){this.token=a,this.isExpr=!!x,this.preserveSpace=!!I,this.override=N,this.generator=!!H},m={b_stat:new w("{",!1),b_expr:new w("{",!0),b_tmpl:new w("${",!1),p_stat:new w("(",!1),p_expr:new w("(",!0),q_tmpl:new w("`",!0,!0,function(i){return i.tryReadTemplateToken()}),f_stat:new w("function",!1),f_expr:new w("function",!0),f_expr_gen:new w("function",!0,!1,null,!0),f_gen:new w("function",!1,!1,null,!0)},k=he.prototype;k.initialContext=function(){return[m.b_stat]},k.curContext=function(){return this.context[this.context.length-1]},k.braceIsBlock=function(i){var a=this.curContext();return a===m.f_expr||a===m.f_stat?!0:i===A.colon&&(a===m.b_stat||a===m.b_expr)?!a.isExpr:i===A._return||i===A.name&&this.exprAllowed?De.test(this.input.slice(this.lastTokEnd,this.start)):i===A._else||i===A.semi||i===A.eof||i===A.parenR||i===A.arrow?!0:i===A.braceL?a===m.b_stat:i===A._var||i===A._const||i===A.name?!1:!this.exprAllowed},k.inGeneratorContext=function(){for(var i=this.context.length-1;i>=1;i--){var a=this.context[i];if(a.token==="function")return a.generator}return!1},k.updateContext=function(i){var a,x=this.type;x.keyword&&i===A.dot?this.exprAllowed=!1:(a=x.updateContext)?a.call(this,i):this.exprAllowed=x.beforeExpr},k.overrideContext=function(i){this.curContext()!==i&&(this.context[this.context.length-1]=i)},A.parenR.updateContext=A.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var i=this.context.pop();i===m.b_stat&&this.curContext().token==="function"&&(i=this.context.pop()),this.exprAllowed=!i.isExpr},A.braceL.updateContext=function(i){this.context.push(this.braceIsBlock(i)?m.b_stat:m.b_expr),this.exprAllowed=!0},A.dollarBraceL.updateContext=function(){this.context.push(m.b_tmpl),this.exprAllowed=!0},A.parenL.updateContext=function(i){var a=i===A._if||i===A._for||i===A._with||i===A._while;this.context.push(a?m.p_stat:m.p_expr),this.exprAllowed=!0},A.incDec.updateContext=function(){},A._function.updateContext=A._class.updateContext=function(i){i.beforeExpr&&i!==A._else&&!(i===A.semi&&this.curContext()!==m.p_stat)&&!(i===A._return&&De.test(this.input.slice(this.lastTokEnd,this.start)))&&!((i===A.colon||i===A.braceL)&&this.curContext()===m.b_stat)?this.context.push(m.f_expr):this.context.push(m.f_stat),this.exprAllowed=!1},A.backQuote.updateContext=function(){this.curContext()===m.q_tmpl?this.context.pop():this.context.push(m.q_tmpl),this.exprAllowed=!1},A.star.updateContext=function(i){if(i===A._function){var a=this.context.length-1;this.context[a]===m.f_expr?this.context[a]=m.f_expr_gen:this.context[a]=m.f_gen}this.exprAllowed=!0},A.name.updateContext=function(i){var a=!1;this.options.ecmaVersion>=6&&i!==A.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(a=!0),this.exprAllowed=a};var d=he.prototype;d.checkPropClash=function(i,a,x){if(!(this.options.ecmaVersion>=9&&i.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(i.computed||i.method||i.shorthand))){var I=i.key,N;switch(I.type){case"Identifier":N=I.name;break;case"Literal":N=String(I.value);break;default:return}var H=i.kind;if(this.options.ecmaVersion>=6){N==="__proto__"&&H==="init"&&(a.proto&&(x?x.doubleProto<0&&(x.doubleProto=I.start):this.raiseRecoverable(I.start,"Redefinition of __proto__ property")),a.proto=!0);return}N="$"+N;var W=a[N];if(W){var $;H==="init"?$=this.strict&&W.init||W.get||W.set:$=W.init||W[H],$&&this.raiseRecoverable(I.start,"Redefinition of property")}else W=a[N]={init:!1,get:!1,set:!1};W[H]=!0}},d.parseExpression=function(i,a){var x=this.start,I=this.startLoc,N=this.parseMaybeAssign(i,a);if(this.type===A.comma){var H=this.startNodeAt(x,I);for(H.expressions=[N];this.eat(A.comma);)H.expressions.push(this.parseMaybeAssign(i,a));return this.finishNode(H,"SequenceExpression")}return N},d.parseMaybeAssign=function(i,a,x){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(i);this.exprAllowed=!1}var I=!1,N=-1,H=-1,W=-1;a?(N=a.parenthesizedAssign,H=a.trailingComma,W=a.doubleProto,a.parenthesizedAssign=a.trailingComma=-1):(a=new r,I=!0);var $=this.start,ne=this.startLoc;(this.type===A.parenL||this.type===A.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=i==="await");var ye=this.parseMaybeConditional(i,a);if(x&&(ye=x.call(this,ye,$,ne)),this.type.isAssign){var ke=this.startNodeAt($,ne);return ke.operator=this.value,this.type===A.eq&&(ye=this.toAssignable(ye,!1,a)),I||(a.parenthesizedAssign=a.trailingComma=a.doubleProto=-1),a.shorthandAssign>=ye.start&&(a.shorthandAssign=-1),this.type===A.eq?this.checkLValPattern(ye):this.checkLValSimple(ye),ke.left=ye,this.next(),ke.right=this.parseMaybeAssign(i),W>-1&&(a.doubleProto=W),this.finishNode(ke,"AssignmentExpression")}else I&&this.checkExpressionErrors(a,!0);return N>-1&&(a.parenthesizedAssign=N),H>-1&&(a.trailingComma=H),ye},d.parseMaybeConditional=function(i,a){var x=this.start,I=this.startLoc,N=this.parseExprOps(i,a);if(this.checkExpressionErrors(a))return N;if(this.eat(A.question)){var H=this.startNodeAt(x,I);return H.test=N,H.consequent=this.parseMaybeAssign(),this.expect(A.colon),H.alternate=this.parseMaybeAssign(i),this.finishNode(H,"ConditionalExpression")}return N},d.parseExprOps=function(i,a){var x=this.start,I=this.startLoc,N=this.parseMaybeUnary(a,!1,!1,i);return this.checkExpressionErrors(a)||N.start===x&&N.type==="ArrowFunctionExpression"?N:this.parseExprOp(N,x,I,-1,i)},d.parseExprOp=function(i,a,x,I,N){var H=this.type.binop;if(H!=null&&(!N||this.type!==A._in)&&H>I){var W=this.type===A.logicalOR||this.type===A.logicalAND,$=this.type===A.coalesce;$&&(H=A.logicalAND.binop);var ne=this.value;this.next();var ye=this.start,ke=this.startLoc,Ze=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,N),ye,ke,H,N),Ct=this.buildBinary(a,x,i,Ze,ne,W||$);return(W&&this.type===A.coalesce||$&&(this.type===A.logicalOR||this.type===A.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(Ct,a,x,I,N)}return i},d.buildBinary=function(i,a,x,I,N,H){I.type==="PrivateIdentifier"&&this.raise(I.start,"Private identifier can only be left side of binary expression");var W=this.startNodeAt(i,a);return W.left=x,W.operator=N,W.right=I,this.finishNode(W,H?"LogicalExpression":"BinaryExpression")},d.parseMaybeUnary=function(i,a,x,I){var N=this.start,H=this.startLoc,W;if(this.isContextual("await")&&this.canAwait)W=this.parseAwait(I),a=!0;else if(this.type.prefix){var $=this.startNode(),ne=this.type===A.incDec;$.operator=this.value,$.prefix=!0,this.next(),$.argument=this.parseMaybeUnary(null,!0,ne,I),this.checkExpressionErrors(i,!0),ne?this.checkLValSimple($.argument):this.strict&&$.operator==="delete"&&$.argument.type==="Identifier"?this.raiseRecoverable($.start,"Deleting local variable in strict mode"):$.operator==="delete"&&y($.argument)?this.raiseRecoverable($.start,"Private fields can not be deleted"):a=!0,W=this.finishNode($,ne?"UpdateExpression":"UnaryExpression")}else if(!a&&this.type===A.privateId)(I||this.privateNameStack.length===0)&&this.options.checkPrivateFields&&this.unexpected(),W=this.parsePrivateIdent(),this.type!==A._in&&this.unexpected();else{if(W=this.parseExprSubscripts(i,I),this.checkExpressionErrors(i))return W;for(;this.type.postfix&&!this.canInsertSemicolon();){var ye=this.startNodeAt(N,H);ye.operator=this.value,ye.prefix=!1,ye.argument=W,this.checkLValSimple(W),this.next(),W=this.finishNode(ye,"UpdateExpression")}}if(!x&&this.eat(A.starstar))if(a)this.unexpected(this.lastTokStart);else return this.buildBinary(N,H,W,this.parseMaybeUnary(null,!1,!1,I),"**",!1);else return W};function y(i){return i.type==="MemberExpression"&&i.property.type==="PrivateIdentifier"||i.type==="ChainExpression"&&y(i.expression)}d.parseExprSubscripts=function(i,a){var x=this.start,I=this.startLoc,N=this.parseExprAtom(i,a);if(N.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return N;var H=this.parseSubscripts(N,x,I,!1,a);return i&&H.type==="MemberExpression"&&(i.parenthesizedAssign>=H.start&&(i.parenthesizedAssign=-1),i.parenthesizedBind>=H.start&&(i.parenthesizedBind=-1),i.trailingComma>=H.start&&(i.trailingComma=-1)),H},d.parseSubscripts=function(i,a,x,I,N){for(var H=this.options.ecmaVersion>=8&&i.type==="Identifier"&&i.name==="async"&&this.lastTokEnd===i.end&&!this.canInsertSemicolon()&&i.end-i.start===5&&this.potentialArrowAt===i.start,W=!1;;){var $=this.parseSubscript(i,a,x,I,H,W,N);if($.optional&&(W=!0),$===i||$.type==="ArrowFunctionExpression"){if(W){var ne=this.startNodeAt(a,x);ne.expression=$,$=this.finishNode(ne,"ChainExpression")}return $}i=$}},d.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(A.arrow)},d.parseSubscriptAsyncArrow=function(i,a,x,I){return this.parseArrowExpression(this.startNodeAt(i,a),x,!0,I)},d.parseSubscript=function(i,a,x,I,N,H,W){var $=this.options.ecmaVersion>=11,ne=$&&this.eat(A.questionDot);I&&ne&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var ye=this.eat(A.bracketL);if(ye||ne&&this.type!==A.parenL&&this.type!==A.backQuote||this.eat(A.dot)){var ke=this.startNodeAt(a,x);ke.object=i,ye?(ke.property=this.parseExpression(),this.expect(A.bracketR)):this.type===A.privateId&&i.type!=="Super"?ke.property=this.parsePrivateIdent():ke.property=this.parseIdent(this.options.allowReserved!=="never"),ke.computed=!!ye,$&&(ke.optional=ne),i=this.finishNode(ke,"MemberExpression")}else if(!I&&this.eat(A.parenL)){var Ze=new r,Ct=this.yieldPos,Zt=this.awaitPos,Mt=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var oi=this.parseExprList(A.parenR,this.options.ecmaVersion>=8,!1,Ze);if(N&&!ne&&this.shouldParseAsyncArrow())return this.checkPatternErrors(Ze,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=Ct,this.awaitPos=Zt,this.awaitIdentPos=Mt,this.parseSubscriptAsyncArrow(a,x,oi,W);this.checkExpressionErrors(Ze,!0),this.yieldPos=Ct||this.yieldPos,this.awaitPos=Zt||this.awaitPos,this.awaitIdentPos=Mt||this.awaitIdentPos;var Rt=this.startNodeAt(a,x);Rt.callee=i,Rt.arguments=oi,$&&(Rt.optional=ne),i=this.finishNode(Rt,"CallExpression")}else if(this.type===A.backQuote){(ne||H)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var Vt=this.startNodeAt(a,x);Vt.tag=i,Vt.quasi=this.parseTemplate({isTagged:!0}),i=this.finishNode(Vt,"TaggedTemplateExpression")}return i},d.parseExprAtom=function(i,a,x){this.type===A.slash&&this.readRegexp();var I,N=this.potentialArrowAt===this.start;switch(this.type){case A._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),I=this.startNode(),this.next(),this.type===A.parenL&&!this.allowDirectSuper&&this.raise(I.start,"super() call outside constructor of a subclass"),this.type!==A.dot&&this.type!==A.bracketL&&this.type!==A.parenL&&this.unexpected(),this.finishNode(I,"Super");case A._this:return I=this.startNode(),this.next(),this.finishNode(I,"ThisExpression");case A.name:var H=this.start,W=this.startLoc,$=this.containsEsc,ne=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!$&&ne.name==="async"&&!this.canInsertSemicolon()&&this.eat(A._function))return this.overrideContext(m.f_expr),this.parseFunction(this.startNodeAt(H,W),0,!1,!0,a);if(N&&!this.canInsertSemicolon()){if(this.eat(A.arrow))return this.parseArrowExpression(this.startNodeAt(H,W),[ne],!1,a);if(this.options.ecmaVersion>=8&&ne.name==="async"&&this.type===A.name&&!$&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return ne=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(A.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(H,W),[ne],!0,a)}return ne;case A.regexp:var ye=this.value;return I=this.parseLiteral(ye.value),I.regex={pattern:ye.pattern,flags:ye.flags},I;case A.num:case A.string:return this.parseLiteral(this.value);case A._null:case A._true:case A._false:return I=this.startNode(),I.value=this.type===A._null?null:this.type===A._true,I.raw=this.type.keyword,this.next(),this.finishNode(I,"Literal");case A.parenL:var ke=this.start,Ze=this.parseParenAndDistinguishExpression(N,a);return i&&(i.parenthesizedAssign<0&&!this.isSimpleAssignTarget(Ze)&&(i.parenthesizedAssign=ke),i.parenthesizedBind<0&&(i.parenthesizedBind=ke)),Ze;case A.bracketL:return I=this.startNode(),this.next(),I.elements=this.parseExprList(A.bracketR,!0,!0,i),this.finishNode(I,"ArrayExpression");case A.braceL:return this.overrideContext(m.b_expr),this.parseObj(!1,i);case A._function:return I=this.startNode(),this.next(),this.parseFunction(I,0);case A._class:return this.parseClass(this.startNode(),!1);case A._new:return this.parseNew();case A.backQuote:return this.parseTemplate();case A._import:return this.options.ecmaVersion>=11?this.parseExprImport(x):this.unexpected();default:return this.parseExprAtomDefault()}},d.parseExprAtomDefault=function(){this.unexpected()},d.parseExprImport=function(i){var a=this.startNode();this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import");var x=this.parseIdent(!0);if(this.type===A.parenL&&!i)return this.parseDynamicImport(a);if(this.type===A.dot)return a.meta=x,this.parseImportMeta(a);this.unexpected()},d.parseDynamicImport=function(i){if(this.next(),i.source=this.parseMaybeAssign(),!this.eat(A.parenR)){var a=this.start;this.eat(A.comma)&&this.eat(A.parenR)?this.raiseRecoverable(a,"Trailing comma is not allowed in import()"):this.unexpected(a)}return this.finishNode(i,"ImportExpression")},d.parseImportMeta=function(i){this.next();var a=this.containsEsc;return i.property=this.parseIdent(!0),i.property.name!=="meta"&&this.raiseRecoverable(i.property.start,"The only valid meta property for import is 'import.meta'"),a&&this.raiseRecoverable(i.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(i.start,"Cannot use 'import.meta' outside a module"),this.finishNode(i,"MetaProperty")},d.parseLiteral=function(i){var a=this.startNode();return a.value=i,a.raw=this.input.slice(this.start,this.end),a.raw.charCodeAt(a.raw.length-1)===110&&(a.bigint=a.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(a,"Literal")},d.parseParenExpression=function(){this.expect(A.parenL);var i=this.parseExpression();return this.expect(A.parenR),i},d.shouldParseArrow=function(i){return!this.canInsertSemicolon()},d.parseParenAndDistinguishExpression=function(i,a){var x=this.start,I=this.startLoc,N,H=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var W=this.start,$=this.startLoc,ne=[],ye=!0,ke=!1,Ze=new r,Ct=this.yieldPos,Zt=this.awaitPos,Mt;for(this.yieldPos=0,this.awaitPos=0;this.type!==A.parenR;)if(ye?ye=!1:this.expect(A.comma),H&&this.afterTrailingComma(A.parenR,!0)){ke=!0;break}else if(this.type===A.ellipsis){Mt=this.start,ne.push(this.parseParenItem(this.parseRestBinding())),this.type===A.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}else ne.push(this.parseMaybeAssign(!1,Ze,this.parseParenItem));var oi=this.lastTokEnd,Rt=this.lastTokEndLoc;if(this.expect(A.parenR),i&&this.shouldParseArrow(ne)&&this.eat(A.arrow))return this.checkPatternErrors(Ze,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=Ct,this.awaitPos=Zt,this.parseParenArrowList(x,I,ne,a);(!ne.length||ke)&&this.unexpected(this.lastTokStart),Mt&&this.unexpected(Mt),this.checkExpressionErrors(Ze,!0),this.yieldPos=Ct||this.yieldPos,this.awaitPos=Zt||this.awaitPos,ne.length>1?(N=this.startNodeAt(W,$),N.expressions=ne,this.finishNodeAt(N,"SequenceExpression",oi,Rt)):N=ne[0]}else N=this.parseParenExpression();if(this.options.preserveParens){var Vt=this.startNodeAt(x,I);return Vt.expression=N,this.finishNode(Vt,"ParenthesizedExpression")}else return N},d.parseParenItem=function(i){return i},d.parseParenArrowList=function(i,a,x,I){return this.parseArrowExpression(this.startNodeAt(i,a),x,!1,I)};var c=[];d.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var i=this.startNode(),a=this.parseIdent(!0);if(this.options.ecmaVersion>=6&&this.eat(A.dot)){i.meta=a;var x=this.containsEsc;return i.property=this.parseIdent(!0),i.property.name!=="target"&&this.raiseRecoverable(i.property.start,"The only valid meta property for new is 'new.target'"),x&&this.raiseRecoverable(i.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(i.start,"'new.target' can only be used in functions and class static block"),this.finishNode(i,"MetaProperty")}var I=this.start,N=this.startLoc;return i.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),I,N,!0,!1),this.eat(A.parenL)?i.arguments=this.parseExprList(A.parenR,this.options.ecmaVersion>=8,!1):i.arguments=c,this.finishNode(i,"NewExpression")},d.parseTemplateElement=function(i){var a=i.isTagged,x=this.startNode();return this.type===A.invalidTemplate?(a||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),x.value={raw:this.value,cooked:null}):x.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),x.tail=this.type===A.backQuote,this.finishNode(x,"TemplateElement")},d.parseTemplate=function(i){i===void 0&&(i={});var a=i.isTagged;a===void 0&&(a=!1);var x=this.startNode();this.next(),x.expressions=[];var I=this.parseTemplateElement({isTagged:a});for(x.quasis=[I];!I.tail;)this.type===A.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(A.dollarBraceL),x.expressions.push(this.parseExpression()),this.expect(A.braceR),x.quasis.push(I=this.parseTemplateElement({isTagged:a}));return this.next(),this.finishNode(x,"TemplateLiteral")},d.isAsyncProp=function(i){return!i.computed&&i.key.type==="Identifier"&&i.key.name==="async"&&(this.type===A.name||this.type===A.num||this.type===A.string||this.type===A.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===A.star)&&!De.test(this.input.slice(this.lastTokEnd,this.start))},d.parseObj=function(i,a){var x=this.startNode(),I=!0,N={};for(x.properties=[],this.next();!this.eat(A.braceR);){if(I)I=!1;else if(this.expect(A.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(A.braceR))break;var H=this.parseProperty(i,a);i||this.checkPropClash(H,N,a),x.properties.push(H)}return this.finishNode(x,i?"ObjectPattern":"ObjectExpression")},d.parseProperty=function(i,a){var x=this.startNode(),I,N,H,W;if(this.options.ecmaVersion>=9&&this.eat(A.ellipsis))return i?(x.argument=this.parseIdent(!1),this.type===A.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(x,"RestElement")):(x.argument=this.parseMaybeAssign(!1,a),this.type===A.comma&&a&&a.trailingComma<0&&(a.trailingComma=this.start),this.finishNode(x,"SpreadElement"));this.options.ecmaVersion>=6&&(x.method=!1,x.shorthand=!1,(i||a)&&(H=this.start,W=this.startLoc),i||(I=this.eat(A.star)));var $=this.containsEsc;return this.parsePropertyName(x),!i&&!$&&this.options.ecmaVersion>=8&&!I&&this.isAsyncProp(x)?(N=!0,I=this.options.ecmaVersion>=9&&this.eat(A.star),this.parsePropertyName(x)):N=!1,this.parsePropertyValue(x,i,I,N,H,W,a,$),this.finishNode(x,"Property")},d.parseGetterSetter=function(i){i.kind=i.key.name,this.parsePropertyName(i),i.value=this.parseMethod(!1);var a=i.kind==="get"?0:1;if(i.value.params.length!==a){var x=i.value.start;i.kind==="get"?this.raiseRecoverable(x,"getter should have no params"):this.raiseRecoverable(x,"setter should have exactly one param")}else i.kind==="set"&&i.value.params[0].type==="RestElement"&&this.raiseRecoverable(i.value.params[0].start,"Setter cannot use rest params")},d.parsePropertyValue=function(i,a,x,I,N,H,W,$){(x||I)&&this.type===A.colon&&this.unexpected(),this.eat(A.colon)?(i.value=a?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,W),i.kind="init"):this.options.ecmaVersion>=6&&this.type===A.parenL?(a&&this.unexpected(),i.kind="init",i.method=!0,i.value=this.parseMethod(x,I)):!a&&!$&&this.options.ecmaVersion>=5&&!i.computed&&i.key.type==="Identifier"&&(i.key.name==="get"||i.key.name==="set")&&this.type!==A.comma&&this.type!==A.braceR&&this.type!==A.eq?((x||I)&&this.unexpected(),this.parseGetterSetter(i)):this.options.ecmaVersion>=6&&!i.computed&&i.key.type==="Identifier"?((x||I)&&this.unexpected(),this.checkUnreserved(i.key),i.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=N),i.kind="init",a?i.value=this.parseMaybeDefault(N,H,this.copyNode(i.key)):this.type===A.eq&&W?(W.shorthandAssign<0&&(W.shorthandAssign=this.start),i.value=this.parseMaybeDefault(N,H,this.copyNode(i.key))):i.value=this.copyNode(i.key),i.shorthand=!0):this.unexpected()},d.parsePropertyName=function(i){if(this.options.ecmaVersion>=6){if(this.eat(A.bracketL))return i.computed=!0,i.key=this.parseMaybeAssign(),this.expect(A.bracketR),i.key;i.computed=!1}return i.key=this.type===A.num||this.type===A.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")},d.initFunction=function(i){i.id=null,this.options.ecmaVersion>=6&&(i.generator=i.expression=!1),this.options.ecmaVersion>=8&&(i.async=!1)},d.parseMethod=function(i,a,x){var I=this.startNode(),N=this.yieldPos,H=this.awaitPos,W=this.awaitIdentPos;return this.initFunction(I),this.options.ecmaVersion>=6&&(I.generator=i),this.options.ecmaVersion>=8&&(I.async=!!a),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(vi(a,I.generator)|pi|(x?gi:0)),this.expect(A.parenL),I.params=this.parseBindingList(A.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(I,!1,!0,!1),this.yieldPos=N,this.awaitPos=H,this.awaitIdentPos=W,this.finishNode(I,"FunctionExpression")},d.parseArrowExpression=function(i,a,x,I){var N=this.yieldPos,H=this.awaitPos,W=this.awaitIdentPos;return this.enterScope(vi(x,!1)|Pi),this.initFunction(i),this.options.ecmaVersion>=8&&(i.async=!!x),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,i.params=this.toAssignableList(a,!0),this.parseFunctionBody(i,!0,!1,I),this.yieldPos=N,this.awaitPos=H,this.awaitIdentPos=W,this.finishNode(i,"ArrowFunctionExpression")},d.parseFunctionBody=function(i,a,x,I){var N=a&&this.type!==A.braceL,H=this.strict,W=!1;if(N)i.body=this.parseMaybeAssign(I),i.expression=!0,this.checkParams(i,!1);else{var $=this.options.ecmaVersion>=7&&!this.isSimpleParamList(i.params);(!H||$)&&(W=this.strictDirective(this.end),W&&$&&this.raiseRecoverable(i.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var ne=this.labels;this.labels=[],W&&(this.strict=!0),this.checkParams(i,!H&&!W&&!a&&!x&&this.isSimpleParamList(i.params)),this.strict&&i.id&&this.checkLValSimple(i.id,mi),i.body=this.parseBlock(!1,void 0,W&&!H),i.expression=!1,this.adaptDirectivePrologue(i.body.body),this.labels=ne}this.exitScope()},d.isSimpleParamList=function(i){for(var a=0,x=i;a<x.length;a+=1){var I=x[a];if(I.type!=="Identifier")return!1}return!0},d.checkParams=function(i,a){for(var x=Object.create(null),I=0,N=i.params;I<N.length;I+=1){var H=N[I];this.checkLValInnerPattern(H,ri,a?null:x)}},d.parseExprList=function(i,a,x,I){for(var N=[],H=!0;!this.eat(i);){if(H)H=!1;else if(this.expect(A.comma),a&&this.afterTrailingComma(i))break;var W=void 0;x&&this.type===A.comma?W=null:this.type===A.ellipsis?(W=this.parseSpread(I),I&&this.type===A.comma&&I.trailingComma<0&&(I.trailingComma=this.start)):W=this.parseMaybeAssign(!1,I),N.push(W)}return N},d.checkUnreserved=function(i){var a=i.start,x=i.end,I=i.name;if(this.inGenerator&&I==="yield"&&this.raiseRecoverable(a,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&I==="await"&&this.raiseRecoverable(a,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&I==="arguments"&&this.raiseRecoverable(a,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(I==="arguments"||I==="await")&&this.raise(a,"Cannot use "+I+" in class static initialization block"),this.keywords.test(I)&&this.raise(a,"Unexpected keyword '"+I+"'"),!(this.options.ecmaVersion<6&&this.input.slice(a,x).indexOf("\\")!==-1)){var N=this.strict?this.reservedWordsStrict:this.reservedWords;N.test(I)&&(!this.inAsync&&I==="await"&&this.raiseRecoverable(a,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(a,"The keyword '"+I+"' is reserved"))}},d.parseIdent=function(i){var a=this.parseIdentNode();return this.next(!!i),this.finishNode(a,"Identifier"),i||(this.checkUnreserved(a),a.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=a.start)),a},d.parseIdentNode=function(){var i=this.startNode();return this.type===A.name?i.name=this.value:this.type.keyword?(i.name=this.type.keyword,(i.name==="class"||i.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop()):this.unexpected(),i},d.parsePrivateIdent=function(){var i=this.startNode();return this.type===A.privateId?i.name=this.value:this.unexpected(),this.next(),this.finishNode(i,"PrivateIdentifier"),this.options.checkPrivateFields&&(this.privateNameStack.length===0?this.raise(i.start,"Private field '#"+i.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(i)),i},d.parseYield=function(i){this.yieldPos||(this.yieldPos=this.start);var a=this.startNode();return this.next(),this.type===A.semi||this.canInsertSemicolon()||this.type!==A.star&&!this.type.startsExpr?(a.delegate=!1,a.argument=null):(a.delegate=this.eat(A.star),a.argument=this.parseMaybeAssign(i)),this.finishNode(a,"YieldExpression")},d.parseAwait=function(i){this.awaitPos||(this.awaitPos=this.start);var a=this.startNode();return this.next(),a.argument=this.parseMaybeUnary(null,!0,!1,i),this.finishNode(a,"AwaitExpression")};var b=he.prototype;b.raise=function(i,a){var x=Nt(this.input,i);a+=" ("+x.line+":"+x.column+")";var I=new SyntaxError(a);throw I.pos=i,I.loc=x,I.raisedAt=this.pos,I},b.raiseRecoverable=b.raise,b.curPosition=function(){if(this.options.locations)return new St(this.curLine,this.pos-this.lineStart)};var S=he.prototype,P=function(a){this.flags=a,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1};S.enterScope=function(i){this.scopeStack.push(new P(i))},S.exitScope=function(){this.scopeStack.pop()},S.treatFunctionsAsVarInScope=function(i){return i.flags&Re||!this.inModule&&i.flags&kt},S.declareName=function(i,a,x){var I=!1;if(a===Me){var N=this.currentScope();I=N.lexical.indexOf(i)>-1||N.functions.indexOf(i)>-1||N.var.indexOf(i)>-1,N.lexical.push(i),this.inModule&&N.flags&kt&&delete this.undefinedExports[i]}else if(a===Fe){var H=this.currentScope();H.lexical.push(i)}else if(a===si){var W=this.currentScope();this.treatFunctionsAsVar?I=W.lexical.indexOf(i)>-1:I=W.lexical.indexOf(i)>-1||W.var.indexOf(i)>-1,W.functions.push(i)}else for(var $=this.scopeStack.length-1;$>=0;--$){var ne=this.scopeStack[$];if(ne.lexical.indexOf(i)>-1&&!(ne.flags&Ut&&ne.lexical[0]===i)||!this.treatFunctionsAsVarInScope(ne)&&ne.functions.indexOf(i)>-1){I=!0;break}if(ne.var.push(i),this.inModule&&ne.flags&kt&&delete this.undefinedExports[i],ne.flags&_i)break}I&&this.raiseRecoverable(x,"Identifier '"+i+"' has already been declared")},S.checkLocalExport=function(i){this.scopeStack[0].lexical.indexOf(i.name)===-1&&this.scopeStack[0].var.indexOf(i.name)===-1&&(this.undefinedExports[i.name]=i)},S.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]},S.currentVarScope=function(){for(var i=this.scopeStack.length-1;;i--){var a=this.scopeStack[i];if(a.flags&_i)return a}},S.currentThisScope=function(){for(var i=this.scopeStack.length-1;;i--){var a=this.scopeStack[i];if(a.flags&_i&&!(a.flags&Pi))return a}};var C=function(a,x,I){this.type="",this.start=x,this.end=0,a.options.locations&&(this.loc=new qt(a,I)),a.options.directSourceFile&&(this.sourceFile=a.options.directSourceFile),a.options.ranges&&(this.range=[x,0])},E=he.prototype;E.startNode=function(){return new C(this,this.start,this.startLoc)},E.startNodeAt=function(i,a){return new C(this,i,a)};function L(i,a,x,I){return i.type=a,i.end=x,this.options.locations&&(i.loc.end=I),this.options.ranges&&(i.range[1]=x),i}E.finishNode=function(i,a){return L.call(this,i,a,this.lastTokEnd,this.lastTokEndLoc)},E.finishNodeAt=function(i,a,x,I){return L.call(this,i,a,x,I)},E.copyNode=function(i){var a=new C(this,i.start,this.startLoc);for(var x in i)a[x]=i[x];return a};var O="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",V=O+" Extended_Pictographic",T=V,R=T+" EBase EComp EMod EPres ExtPict",F=R,q=F,U={9:O,10:V,11:T,12:R,13:F,14:q},G="Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji",Q={9:"",10:"",11:"",12:"",13:"",14:G},J="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",ee="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",se=ee+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",Z=se+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",K=Z+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",ie=K+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",ue=ie+" Hrkt Katakana_Or_Hiragana Kawi Nag_Mundari Nagm Unknown Zzzz",ae={9:ee,10:se,11:Z,12:K,13:ie,14:ue},ce={};function fe(i){var a=ce[i]={binary:ot(U[i]+" "+J),binaryOfStrings:ot(Q[i]),nonBinary:{General_Category:ot(J),Script:ot(ae[i])}};a.nonBinary.Script_Extensions=a.nonBinary.Script,a.nonBinary.gc=a.nonBinary.General_Category,a.nonBinary.sc=a.nonBinary.Script,a.nonBinary.scx=a.nonBinary.Script_Extensions}for(var pe=0,me=[9,10,11,12,13,14];pe<me.length;pe+=1){var _e=me[pe];fe(_e)}var re=he.prototype,Oe=function(a){this.parser=a,this.validFlags="gim"+(a.options.ecmaVersion>=6?"uy":"")+(a.options.ecmaVersion>=9?"s":"")+(a.options.ecmaVersion>=13?"d":"")+(a.options.ecmaVersion>=15?"v":""),this.unicodeProperties=ce[a.options.ecmaVersion>=14?14:a.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};Oe.prototype.reset=function(a,x,I){var N=I.indexOf("v")!==-1,H=I.indexOf("u")!==-1;this.start=a|0,this.source=x+"",this.flags=I,N&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=H&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=H&&this.parser.options.ecmaVersion>=9)},Oe.prototype.raise=function(a){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+a)},Oe.prototype.at=function(a,x){x===void 0&&(x=!1);var I=this.source,N=I.length;if(a>=N)return-1;var H=I.charCodeAt(a);if(!(x||this.switchU)||H<=55295||H>=57344||a+1>=N)return H;var W=I.charCodeAt(a+1);return W>=56320&&W<=57343?(H<<10)+W-56613888:H},Oe.prototype.nextIndex=function(a,x){x===void 0&&(x=!1);var I=this.source,N=I.length;if(a>=N)return N;var H=I.charCodeAt(a),W;return!(x||this.switchU)||H<=55295||H>=57344||a+1>=N||(W=I.charCodeAt(a+1))<56320||W>57343?a+1:a+2},Oe.prototype.current=function(a){return a===void 0&&(a=!1),this.at(this.pos,a)},Oe.prototype.lookahead=function(a){return a===void 0&&(a=!1),this.at(this.nextIndex(this.pos,a),a)},Oe.prototype.advance=function(a){a===void 0&&(a=!1),this.pos=this.nextIndex(this.pos,a)},Oe.prototype.eat=function(a,x){return x===void 0&&(x=!1),this.current(x)===a?(this.advance(x),!0):!1},Oe.prototype.eatChars=function(a,x){x===void 0&&(x=!1);for(var I=this.pos,N=0,H=a;N<H.length;N+=1){var W=H[N],$=this.at(I,x);if($===-1||$!==W)return!1;I=this.nextIndex(I,x)}return this.pos=I,!0},re.validateRegExpFlags=function(i){for(var a=i.validFlags,x=i.flags,I=!1,N=!1,H=0;H<x.length;H++){var W=x.charAt(H);a.indexOf(W)===-1&&this.raise(i.start,"Invalid regular expression flag"),x.indexOf(W,H+1)>-1&&this.raise(i.start,"Duplicate regular expression flag"),W==="u"&&(I=!0),W==="v"&&(N=!0)}this.options.ecmaVersion>=15&&I&&N&&this.raise(i.start,"Invalid regular expression flag")},re.validateRegExpPattern=function(i){this.regexp_pattern(i),!i.switchN&&this.options.ecmaVersion>=9&&i.groupNames.length>0&&(i.switchN=!0,this.regexp_pattern(i))},re.regexp_pattern=function(i){i.pos=0,i.lastIntValue=0,i.lastStringValue="",i.lastAssertionIsQuantifiable=!1,i.numCapturingParens=0,i.maxBackReference=0,i.groupNames.length=0,i.backReferenceNames.length=0,this.regexp_disjunction(i),i.pos!==i.source.length&&(i.eat(41)&&i.raise("Unmatched ')'"),(i.eat(93)||i.eat(125))&&i.raise("Lone quantifier brackets")),i.maxBackReference>i.numCapturingParens&&i.raise("Invalid escape");for(var a=0,x=i.backReferenceNames;a<x.length;a+=1){var I=x[a];i.groupNames.indexOf(I)===-1&&i.raise("Invalid named capture referenced")}},re.regexp_disjunction=function(i){for(this.regexp_alternative(i);i.eat(124);)this.regexp_alternative(i);this.regexp_eatQuantifier(i,!0)&&i.raise("Nothing to repeat"),i.eat(123)&&i.raise("Lone quantifier brackets")},re.regexp_alternative=function(i){for(;i.pos<i.source.length&&this.regexp_eatTerm(i););},re.regexp_eatTerm=function(i){return this.regexp_eatAssertion(i)?(i.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(i)&&i.switchU&&i.raise("Invalid quantifier"),!0):(i.switchU?this.regexp_eatAtom(i):this.regexp_eatExtendedAtom(i))?(this.regexp_eatQuantifier(i),!0):!1},re.regexp_eatAssertion=function(i){var a=i.pos;if(i.lastAssertionIsQuantifiable=!1,i.eat(94)||i.eat(36))return!0;if(i.eat(92)){if(i.eat(66)||i.eat(98))return!0;i.pos=a}if(i.eat(40)&&i.eat(63)){var x=!1;if(this.options.ecmaVersion>=9&&(x=i.eat(60)),i.eat(61)||i.eat(33))return this.regexp_disjunction(i),i.eat(41)||i.raise("Unterminated group"),i.lastAssertionIsQuantifiable=!x,!0}return i.pos=a,!1},re.regexp_eatQuantifier=function(i,a){return a===void 0&&(a=!1),this.regexp_eatQuantifierPrefix(i,a)?(i.eat(63),!0):!1},re.regexp_eatQuantifierPrefix=function(i,a){return i.eat(42)||i.eat(43)||i.eat(63)||this.regexp_eatBracedQuantifier(i,a)},re.regexp_eatBracedQuantifier=function(i,a){var x=i.pos;if(i.eat(123)){var I=0,N=-1;if(this.regexp_eatDecimalDigits(i)&&(I=i.lastIntValue,i.eat(44)&&this.regexp_eatDecimalDigits(i)&&(N=i.lastIntValue),i.eat(125)))return N!==-1&&N<I&&!a&&i.raise("numbers out of order in {} quantifier"),!0;i.switchU&&!a&&i.raise("Incomplete quantifier"),i.pos=x}return!1},re.regexp_eatAtom=function(i){return this.regexp_eatPatternCharacters(i)||i.eat(46)||this.regexp_eatReverseSolidusAtomEscape(i)||this.regexp_eatCharacterClass(i)||this.regexp_eatUncapturingGroup(i)||this.regexp_eatCapturingGroup(i)},re.regexp_eatReverseSolidusAtomEscape=function(i){var a=i.pos;if(i.eat(92)){if(this.regexp_eatAtomEscape(i))return!0;i.pos=a}return!1},re.regexp_eatUncapturingGroup=function(i){var a=i.pos;if(i.eat(40)){if(i.eat(63)&&i.eat(58)){if(this.regexp_disjunction(i),i.eat(41))return!0;i.raise("Unterminated group")}i.pos=a}return!1},re.regexp_eatCapturingGroup=function(i){if(i.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(i):i.current()===63&&i.raise("Invalid group"),this.regexp_disjunction(i),i.eat(41))return i.numCapturingParens+=1,!0;i.raise("Unterminated group")}return!1},re.regexp_eatExtendedAtom=function(i){return i.eat(46)||this.regexp_eatReverseSolidusAtomEscape(i)||this.regexp_eatCharacterClass(i)||this.regexp_eatUncapturingGroup(i)||this.regexp_eatCapturingGroup(i)||this.regexp_eatInvalidBracedQuantifier(i)||this.regexp_eatExtendedPatternCharacter(i)},re.regexp_eatInvalidBracedQuantifier=function(i){return this.regexp_eatBracedQuantifier(i,!0)&&i.raise("Nothing to repeat"),!1},re.regexp_eatSyntaxCharacter=function(i){var a=i.current();return Je(a)?(i.lastIntValue=a,i.advance(),!0):!1};function Je(i){return i===36||i>=40&&i<=43||i===46||i===63||i>=91&&i<=94||i>=123&&i<=125}re.regexp_eatPatternCharacters=function(i){for(var a=i.pos,x=0;(x=i.current())!==-1&&!Je(x);)i.advance();return i.pos!==a},re.regexp_eatExtendedPatternCharacter=function(i){var a=i.current();return a!==-1&&a!==36&&!(a>=40&&a<=43)&&a!==46&&a!==63&&a!==91&&a!==94&&a!==124?(i.advance(),!0):!1},re.regexp_groupSpecifier=function(i){if(i.eat(63)){if(this.regexp_eatGroupName(i)){i.groupNames.indexOf(i.lastStringValue)!==-1&&i.raise("Duplicate capture group name"),i.groupNames.push(i.lastStringValue);return}i.raise("Invalid group")}},re.regexp_eatGroupName=function(i){if(i.lastStringValue="",i.eat(60)){if(this.regexp_eatRegExpIdentifierName(i)&&i.eat(62))return!0;i.raise("Invalid capture group name")}return!1},re.regexp_eatRegExpIdentifierName=function(i){if(i.lastStringValue="",this.regexp_eatRegExpIdentifierStart(i)){for(i.lastStringValue+=we(i.lastIntValue);this.regexp_eatRegExpIdentifierPart(i);)i.lastStringValue+=we(i.lastIntValue);return!0}return!1},re.regexp_eatRegExpIdentifierStart=function(i){var a=i.pos,x=this.options.ecmaVersion>=11,I=i.current(x);return i.advance(x),I===92&&this.regexp_eatRegExpUnicodeEscapeSequence(i,x)&&(I=i.lastIntValue),Ue(I)?(i.lastIntValue=I,!0):(i.pos=a,!1)};function Ue(i){return et(i,!0)||i===36||i===95}re.regexp_eatRegExpIdentifierPart=function(i){var a=i.pos,x=this.options.ecmaVersion>=11,I=i.current(x);return i.advance(x),I===92&&this.regexp_eatRegExpUnicodeEscapeSequence(i,x)&&(I=i.lastIntValue),Le(I)?(i.lastIntValue=I,!0):(i.pos=a,!1)};function Le(i){return oe(i,!0)||i===36||i===95||i===8204||i===8205}re.regexp_eatAtomEscape=function(i){return this.regexp_eatBackReference(i)||this.regexp_eatCharacterClassEscape(i)||this.regexp_eatCharacterEscape(i)||i.switchN&&this.regexp_eatKGroupName(i)?!0:(i.switchU&&(i.current()===99&&i.raise("Invalid unicode escape"),i.raise("Invalid escape")),!1)},re.regexp_eatBackReference=function(i){var a=i.pos;if(this.regexp_eatDecimalEscape(i)){var x=i.lastIntValue;if(i.switchU)return x>i.maxBackReference&&(i.maxBackReference=x),!0;if(x<=i.numCapturingParens)return!0;i.pos=a}return!1},re.regexp_eatKGroupName=function(i){if(i.eat(107)){if(this.regexp_eatGroupName(i))return i.backReferenceNames.push(i.lastStringValue),!0;i.raise("Invalid named reference")}return!1},re.regexp_eatCharacterEscape=function(i){return this.regexp_eatControlEscape(i)||this.regexp_eatCControlLetter(i)||this.regexp_eatZero(i)||this.regexp_eatHexEscapeSequence(i)||this.regexp_eatRegExpUnicodeEscapeSequence(i,!1)||!i.switchU&&this.regexp_eatLegacyOctalEscapeSequence(i)||this.regexp_eatIdentityEscape(i)},re.regexp_eatCControlLetter=function(i){var a=i.pos;if(i.eat(99)){if(this.regexp_eatControlLetter(i))return!0;i.pos=a}return!1},re.regexp_eatZero=function(i){return i.current()===48&&!It(i.lookahead())?(i.lastIntValue=0,i.advance(),!0):!1},re.regexp_eatControlEscape=function(i){var a=i.current();return a===116?(i.lastIntValue=9,i.advance(),!0):a===110?(i.lastIntValue=10,i.advance(),!0):a===118?(i.lastIntValue=11,i.advance(),!0):a===102?(i.lastIntValue=12,i.advance(),!0):a===114?(i.lastIntValue=13,i.advance(),!0):!1},re.regexp_eatControlLetter=function(i){var a=i.current();return ze(a)?(i.lastIntValue=a%32,i.advance(),!0):!1};function ze(i){return i>=65&&i<=90||i>=97&&i<=122}re.regexp_eatRegExpUnicodeEscapeSequence=function(i,a){a===void 0&&(a=!1);var x=i.pos,I=a||i.switchU;if(i.eat(117)){if(this.regexp_eatFixedHexDigits(i,4)){var N=i.lastIntValue;if(I&&N>=55296&&N<=56319){var H=i.pos;if(i.eat(92)&&i.eat(117)&&this.regexp_eatFixedHexDigits(i,4)){var W=i.lastIntValue;if(W>=56320&&W<=57343)return i.lastIntValue=(N-55296)*1024+(W-56320)+65536,!0}i.pos=H,i.lastIntValue=N}return!0}if(I&&i.eat(123)&&this.regexp_eatHexDigits(i)&&i.eat(125)&&st(i.lastIntValue))return!0;I&&i.raise("Invalid unicode escape"),i.pos=x}return!1};function st(i){return i>=0&&i<=1114111}re.regexp_eatIdentityEscape=function(i){if(i.switchU)return this.regexp_eatSyntaxCharacter(i)?!0:i.eat(47)?(i.lastIntValue=47,!0):!1;var a=i.current();return a!==99&&(!i.switchN||a!==107)?(i.lastIntValue=a,i.advance(),!0):!1},re.regexp_eatDecimalEscape=function(i){i.lastIntValue=0;var a=i.current();if(a>=49&&a<=57){do i.lastIntValue=10*i.lastIntValue+(a-48),i.advance();while((a=i.current())>=48&&a<=57);return!0}return!1};var We=0,je=1,Ye=2;re.regexp_eatCharacterClassEscape=function(i){var a=i.current();if(pt(a))return i.lastIntValue=-1,i.advance(),je;var x=!1;if(i.switchU&&this.options.ecmaVersion>=9&&((x=a===80)||a===112)){i.lastIntValue=-1,i.advance();var I;if(i.eat(123)&&(I=this.regexp_eatUnicodePropertyValueExpression(i))&&i.eat(125))return x&&I===Ye&&i.raise("Invalid property name"),I;i.raise("Invalid property name")}return We};function pt(i){return i===100||i===68||i===115||i===83||i===119||i===87}re.regexp_eatUnicodePropertyValueExpression=function(i){var a=i.pos;if(this.regexp_eatUnicodePropertyName(i)&&i.eat(61)){var x=i.lastStringValue;if(this.regexp_eatUnicodePropertyValue(i)){var I=i.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(i,x,I),je}}if(i.pos=a,this.regexp_eatLoneUnicodePropertyNameOrValue(i)){var N=i.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(i,N)}return We},re.regexp_validateUnicodePropertyNameAndValue=function(i,a,x){te(i.unicodeProperties.nonBinary,a)||i.raise("Invalid property name"),i.unicodeProperties.nonBinary[a].test(x)||i.raise("Invalid property value")},re.regexp_validateUnicodePropertyNameOrValue=function(i,a){if(i.unicodeProperties.binary.test(a))return je;if(i.switchV&&i.unicodeProperties.binaryOfStrings.test(a))return Ye;i.raise("Invalid property name")},re.regexp_eatUnicodePropertyName=function(i){var a=0;for(i.lastStringValue="";ct(a=i.current());)i.lastStringValue+=we(a),i.advance();return i.lastStringValue!==""};function ct(i){return ze(i)||i===95}re.regexp_eatUnicodePropertyValue=function(i){var a=0;for(i.lastStringValue="";at(a=i.current());)i.lastStringValue+=we(a),i.advance();return i.lastStringValue!==""};function at(i){return ct(i)||It(i)}re.regexp_eatLoneUnicodePropertyNameOrValue=function(i){return this.regexp_eatUnicodePropertyValue(i)},re.regexp_eatCharacterClass=function(i){if(i.eat(91)){var a=i.eat(94),x=this.regexp_classContents(i);return i.eat(93)||i.raise("Unterminated character class"),a&&x===Ye&&i.raise("Negated character class may contain strings"),!0}return!1},re.regexp_classContents=function(i){return i.current()===93?je:i.switchV?this.regexp_classSetExpression(i):(this.regexp_nonEmptyClassRanges(i),je)},re.regexp_nonEmptyClassRanges=function(i){for(;this.regexp_eatClassAtom(i);){var a=i.lastIntValue;if(i.eat(45)&&this.regexp_eatClassAtom(i)){var x=i.lastIntValue;i.switchU&&(a===-1||x===-1)&&i.raise("Invalid character class"),a!==-1&&x!==-1&&a>x&&i.raise("Range out of order in character class")}}},re.regexp_eatClassAtom=function(i){var a=i.pos;if(i.eat(92)){if(this.regexp_eatClassEscape(i))return!0;if(i.switchU){var x=i.current();(x===99||yi(x))&&i.raise("Invalid class escape"),i.raise("Invalid escape")}i.pos=a}var I=i.current();return I!==93?(i.lastIntValue=I,i.advance(),!0):!1},re.regexp_eatClassEscape=function(i){var a=i.pos;if(i.eat(98))return i.lastIntValue=8,!0;if(i.switchU&&i.eat(45))return i.lastIntValue=45,!0;if(!i.switchU&&i.eat(99)){if(this.regexp_eatClassControlLetter(i))return!0;i.pos=a}return this.regexp_eatCharacterClassEscape(i)||this.regexp_eatCharacterEscape(i)},re.regexp_classSetExpression=function(i){var a=je,x;if(!this.regexp_eatClassSetRange(i))if(x=this.regexp_eatClassSetOperand(i)){x===Ye&&(a=Ye);for(var I=i.pos;i.eatChars([38,38]);){if(i.current()!==38&&(x=this.regexp_eatClassSetOperand(i))){x!==Ye&&(a=je);continue}i.raise("Invalid character in character class")}if(I!==i.pos)return a;for(;i.eatChars([45,45]);)this.regexp_eatClassSetOperand(i)||i.raise("Invalid character in character class");if(I!==i.pos)return a}else i.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(i)){if(x=this.regexp_eatClassSetOperand(i),!x)return a;x===Ye&&(a=Ye)}},re.regexp_eatClassSetRange=function(i){var a=i.pos;if(this.regexp_eatClassSetCharacter(i)){var x=i.lastIntValue;if(i.eat(45)&&this.regexp_eatClassSetCharacter(i)){var I=i.lastIntValue;return x!==-1&&I!==-1&&x>I&&i.raise("Range out of order in character class"),!0}i.pos=a}return!1},re.regexp_eatClassSetOperand=function(i){return this.regexp_eatClassSetCharacter(i)?je:this.regexp_eatClassStringDisjunction(i)||this.regexp_eatNestedClass(i)},re.regexp_eatNestedClass=function(i){var a=i.pos;if(i.eat(91)){var x=i.eat(94),I=this.regexp_classContents(i);if(i.eat(93))return x&&I===Ye&&i.raise("Negated character class may contain strings"),I;i.pos=a}if(i.eat(92)){var N=this.regexp_eatCharacterClassEscape(i);if(N)return N;i.pos=a}return null},re.regexp_eatClassStringDisjunction=function(i){var a=i.pos;if(i.eatChars([92,113])){if(i.eat(123)){var x=this.regexp_classStringDisjunctionContents(i);if(i.eat(125))return x}else i.raise("Invalid escape");i.pos=a}return null},re.regexp_classStringDisjunctionContents=function(i){for(var a=this.regexp_classString(i);i.eat(124);)this.regexp_classString(i)===Ye&&(a=Ye);return a},re.regexp_classString=function(i){for(var a=0;this.regexp_eatClassSetCharacter(i);)a++;return a===1?je:Ye},re.regexp_eatClassSetCharacter=function(i){var a=i.pos;if(i.eat(92))return this.regexp_eatCharacterEscape(i)||this.regexp_eatClassSetReservedPunctuator(i)?!0:i.eat(98)?(i.lastIntValue=8,!0):(i.pos=a,!1);var x=i.current();return x<0||x===i.lookahead()&&ht(x)||wt(x)?!1:(i.advance(),i.lastIntValue=x,!0)};function ht(i){return i===33||i>=35&&i<=38||i>=42&&i<=44||i===46||i>=58&&i<=64||i===94||i===96||i===126}function wt(i){return i===40||i===41||i===45||i===47||i>=91&&i<=93||i>=123&&i<=125}re.regexp_eatClassSetReservedPunctuator=function(i){var a=i.current();return gt(a)?(i.lastIntValue=a,i.advance(),!0):!1};function gt(i){return i===33||i===35||i===37||i===38||i===44||i===45||i>=58&&i<=62||i===64||i===96||i===126}re.regexp_eatClassControlLetter=function(i){var a=i.current();return It(a)||a===95?(i.lastIntValue=a%32,i.advance(),!0):!1},re.regexp_eatHexEscapeSequence=function(i){var a=i.pos;if(i.eat(120)){if(this.regexp_eatFixedHexDigits(i,2))return!0;i.switchU&&i.raise("Invalid escape"),i.pos=a}return!1},re.regexp_eatDecimalDigits=function(i){var a=i.pos,x=0;for(i.lastIntValue=0;It(x=i.current());)i.lastIntValue=10*i.lastIntValue+(x-48),i.advance();return i.pos!==a};function It(i){return i>=48&&i<=57}re.regexp_eatHexDigits=function(i){var a=i.pos,x=0;for(i.lastIntValue=0;xi(x=i.current());)i.lastIntValue=16*i.lastIntValue+bi(x),i.advance();return i.pos!==a};function xi(i){return i>=48&&i<=57||i>=65&&i<=70||i>=97&&i<=102}function bi(i){return i>=65&&i<=70?10+(i-65):i>=97&&i<=102?10+(i-97):i-48}re.regexp_eatLegacyOctalEscapeSequence=function(i){if(this.regexp_eatOctalDigit(i)){var a=i.lastIntValue;if(this.regexp_eatOctalDigit(i)){var x=i.lastIntValue;a<=3&&this.regexp_eatOctalDigit(i)?i.lastIntValue=a*64+x*8+i.lastIntValue:i.lastIntValue=a*8+x}else i.lastIntValue=a;return!0}return!1},re.regexp_eatOctalDigit=function(i){var a=i.current();return yi(a)?(i.lastIntValue=a-48,i.advance(),!0):(i.lastIntValue=0,!1)};function yi(i){return i>=48&&i<=55}re.regexp_eatFixedHexDigits=function(i,a){var x=i.pos;i.lastIntValue=0;for(var I=0;I<a;++I){var N=i.current();if(!xi(N))return i.pos=x,!1;i.lastIntValue=16*i.lastIntValue+bi(N),i.advance()}return!0};var Gt=function(a){this.type=a.type,this.value=a.value,this.start=a.start,this.end=a.end,a.options.locations&&(this.loc=new qt(a,a.startLoc,a.endLoc)),a.options.ranges&&(this.range=[a.start,a.end])},Pe=he.prototype;Pe.next=function(i){!i&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new Gt(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},Pe.getToken=function(){return this.next(),new Gt(this)},typeof Symbol<"u"&&(Pe[Symbol.iterator]=function(){var i=this;return{next:function(){var a=i.getToken();return{done:a.type===A.eof,value:a}}}}),Pe.nextToken=function(){var i=this.curContext();if((!i||!i.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(A.eof);if(i.override)return i.override(this);this.readToken(this.fullCharCodeAtPos())},Pe.readToken=function(i){return et(i,this.options.ecmaVersion>=6)||i===92?this.readWord():this.getTokenFromCode(i)},Pe.fullCharCodeAtPos=function(){var i=this.input.charCodeAt(this.pos);if(i<=55295||i>=56320)return i;var a=this.input.charCodeAt(this.pos+1);return a<=56319||a>=57344?i:(i<<10)+a-56613888},Pe.skipBlockComment=function(){var i=this.options.onComment&&this.curPosition(),a=this.pos,x=this.input.indexOf("*/",this.pos+=2);if(x===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=x+2,this.options.locations)for(var I=void 0,N=a;(I=Lt(this.input,N,this.pos))>-1;)++this.curLine,N=this.lineStart=I;this.options.onComment&&this.options.onComment(!0,this.input.slice(a+2,x),a,this.pos,i,this.curPosition())},Pe.skipLineComment=function(i){for(var a=this.pos,x=this.options.onComment&&this.curPosition(),I=this.input.charCodeAt(this.pos+=i);this.pos<this.input.length&&!Xe(I);)I=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(a+i,this.pos),a,this.pos,x,this.curPosition())},Pe.skipSpace=function(){e:for(;this.pos<this.input.length;){var i=this.input.charCodeAt(this.pos);switch(i){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(i>8&&i<14||i>=5760&&Dt.test(String.fromCharCode(i)))++this.pos;else break e}}},Pe.finishToken=function(i,a){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var x=this.type;this.type=i,this.value=a,this.updateContext(x)},Pe.readToken_dot=function(){var i=this.input.charCodeAt(this.pos+1);if(i>=48&&i<=57)return this.readNumber(!0);var a=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&i===46&&a===46?(this.pos+=3,this.finishToken(A.ellipsis)):(++this.pos,this.finishToken(A.dot))},Pe.readToken_slash=function(){var i=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):i===61?this.finishOp(A.assign,2):this.finishOp(A.slash,1)},Pe.readToken_mult_modulo_exp=function(i){var a=this.input.charCodeAt(this.pos+1),x=1,I=i===42?A.star:A.modulo;return this.options.ecmaVersion>=7&&i===42&&a===42&&(++x,I=A.starstar,a=this.input.charCodeAt(this.pos+2)),a===61?this.finishOp(A.assign,x+1):this.finishOp(I,x)},Pe.readToken_pipe_amp=function(i){var a=this.input.charCodeAt(this.pos+1);if(a===i){if(this.options.ecmaVersion>=12){var x=this.input.charCodeAt(this.pos+2);if(x===61)return this.finishOp(A.assign,3)}return this.finishOp(i===124?A.logicalOR:A.logicalAND,2)}return a===61?this.finishOp(A.assign,2):this.finishOp(i===124?A.bitwiseOR:A.bitwiseAND,1)},Pe.readToken_caret=function(){var i=this.input.charCodeAt(this.pos+1);return i===61?this.finishOp(A.assign,2):this.finishOp(A.bitwiseXOR,1)},Pe.readToken_plus_min=function(i){var a=this.input.charCodeAt(this.pos+1);return a===i?a===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||De.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(A.incDec,2):a===61?this.finishOp(A.assign,2):this.finishOp(A.plusMin,1)},Pe.readToken_lt_gt=function(i){var a=this.input.charCodeAt(this.pos+1),x=1;return a===i?(x=i===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+x)===61?this.finishOp(A.assign,x+1):this.finishOp(A.bitShift,x)):a===33&&i===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(a===61&&(x=2),this.finishOp(A.relational,x))},Pe.readToken_eq_excl=function(i){var a=this.input.charCodeAt(this.pos+1);return a===61?this.finishOp(A.equality,this.input.charCodeAt(this.pos+2)===61?3:2):i===61&&a===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(A.arrow)):this.finishOp(i===61?A.eq:A.prefix,1)},Pe.readToken_question=function(){var i=this.options.ecmaVersion;if(i>=11){var a=this.input.charCodeAt(this.pos+1);if(a===46){var x=this.input.charCodeAt(this.pos+2);if(x<48||x>57)return this.finishOp(A.questionDot,2)}if(a===63){if(i>=12){var I=this.input.charCodeAt(this.pos+2);if(I===61)return this.finishOp(A.assign,3)}return this.finishOp(A.coalesce,2)}}return this.finishOp(A.question,1)},Pe.readToken_numberSign=function(){var i=this.options.ecmaVersion,a=35;if(i>=13&&(++this.pos,a=this.fullCharCodeAtPos(),et(a,!0)||a===92))return this.finishToken(A.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+we(a)+"'")},Pe.getTokenFromCode=function(i){switch(i){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(A.parenL);case 41:return++this.pos,this.finishToken(A.parenR);case 59:return++this.pos,this.finishToken(A.semi);case 44:return++this.pos,this.finishToken(A.comma);case 91:return++this.pos,this.finishToken(A.bracketL);case 93:return++this.pos,this.finishToken(A.bracketR);case 123:return++this.pos,this.finishToken(A.braceL);case 125:return++this.pos,this.finishToken(A.braceR);case 58:return++this.pos,this.finishToken(A.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(A.backQuote);case 48:var a=this.input.charCodeAt(this.pos+1);if(a===120||a===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(a===111||a===79)return this.readRadixNumber(8);if(a===98||a===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(i);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(i);case 124:case 38:return this.readToken_pipe_amp(i);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(i);case 60:case 62:return this.readToken_lt_gt(i);case 61:case 33:return this.readToken_eq_excl(i);case 63:return this.readToken_question();case 126:return this.finishOp(A.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+we(i)+"'")},Pe.finishOp=function(i,a){var x=this.input.slice(this.pos,this.pos+a);return this.pos+=a,this.finishToken(i,x)},Pe.readRegexp=function(){for(var i,a,x=this.pos;;){this.pos>=this.input.length&&this.raise(x,"Unterminated regular expression");var I=this.input.charAt(this.pos);if(De.test(I)&&this.raise(x,"Unterminated regular expression"),i)i=!1;else{if(I==="[")a=!0;else if(I==="]"&&a)a=!1;else if(I==="/"&&!a)break;i=I==="\\"}++this.pos}var N=this.input.slice(x,this.pos);++this.pos;var H=this.pos,W=this.readWord1();this.containsEsc&&this.unexpected(H);var $=this.regexpState||(this.regexpState=new Oe(this));$.reset(x,N,W),this.validateRegExpFlags($),this.validateRegExpPattern($);var ne=null;try{ne=new RegExp(N,W)}catch{}return this.finishToken(A.regexp,{pattern:N,flags:W,value:ne})},Pe.readInt=function(i,a,x){for(var I=this.options.ecmaVersion>=12&&a===void 0,N=x&&this.input.charCodeAt(this.pos)===48,H=this.pos,W=0,$=0,ne=0,ye=a??1/0;ne<ye;++ne,++this.pos){var ke=this.input.charCodeAt(this.pos),Ze=void 0;if(I&&ke===95){N&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),$===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),ne===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),$=ke;continue}if(ke>=97?Ze=ke-97+10:ke>=65?Ze=ke-65+10:ke>=48&&ke<=57?Ze=ke-48:Ze=1/0,Ze>=i)break;$=ke,W=W*i+Ze}return I&&$===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===H||a!=null&&this.pos-H!==a?null:W};function ai(i,a){return a?parseInt(i,8):parseFloat(i.replace(/_/g,""))}function ui(i){return typeof BigInt!="function"?null:BigInt(i.replace(/_/g,""))}Pe.readRadixNumber=function(i){var a=this.pos;this.pos+=2;var x=this.readInt(i);return x==null&&this.raise(this.start+2,"Expected number in radix "+i),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(x=ui(this.input.slice(a,this.pos)),++this.pos):et(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(A.num,x)},Pe.readNumber=function(i){var a=this.pos;!i&&this.readInt(10,void 0,!0)===null&&this.raise(a,"Invalid number");var x=this.pos-a>=2&&this.input.charCodeAt(a)===48;x&&this.strict&&this.raise(a,"Invalid number");var I=this.input.charCodeAt(this.pos);if(!x&&!i&&this.options.ecmaVersion>=11&&I===110){var N=ui(this.input.slice(a,this.pos));return++this.pos,et(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(A.num,N)}x&&/[89]/.test(this.input.slice(a,this.pos))&&(x=!1),I===46&&!x&&(++this.pos,this.readInt(10),I=this.input.charCodeAt(this.pos)),(I===69||I===101)&&!x&&(I=this.input.charCodeAt(++this.pos),(I===43||I===45)&&++this.pos,this.readInt(10)===null&&this.raise(a,"Invalid number")),et(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var H=ai(this.input.slice(a,this.pos),x);return this.finishToken(A.num,H)},Pe.readCodePoint=function(){var i=this.input.charCodeAt(this.pos),a;if(i===123){this.options.ecmaVersion<6&&this.unexpected();var x=++this.pos;a=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,a>1114111&&this.invalidStringToken(x,"Code point out of bounds")}else a=this.readHexChar(4);return a},Pe.readString=function(i){for(var a="",x=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var I=this.input.charCodeAt(this.pos);if(I===i)break;I===92?(a+=this.input.slice(x,this.pos),a+=this.readEscapedChar(!1),x=this.pos):I===8232||I===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(Xe(I)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return a+=this.input.slice(x,this.pos++),this.finishToken(A.string,a)};var Wt={};Pe.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(i){if(i===Wt)this.readInvalidTemplateToken();else throw i}this.inTemplateElement=!1},Pe.invalidStringToken=function(i,a){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw Wt;this.raise(i,a)},Pe.readTmplToken=function(){for(var i="",a=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var x=this.input.charCodeAt(this.pos);if(x===96||x===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===A.template||this.type===A.invalidTemplate)?x===36?(this.pos+=2,this.finishToken(A.dollarBraceL)):(++this.pos,this.finishToken(A.backQuote)):(i+=this.input.slice(a,this.pos),this.finishToken(A.template,i));if(x===92)i+=this.input.slice(a,this.pos),i+=this.readEscapedChar(!0),a=this.pos;else if(Xe(x)){switch(i+=this.input.slice(a,this.pos),++this.pos,x){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:i+=`
`;break;default:i+=String.fromCharCode(x);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),a=this.pos}else++this.pos}},Pe.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(A.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")},Pe.readEscapedChar=function(i){var a=this.input.charCodeAt(++this.pos);switch(++this.pos,a){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return we(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),i){var x=this.pos-1;this.invalidStringToken(x,"Invalid escape sequence in template string")}default:if(a>=48&&a<=55){var I=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],N=parseInt(I,8);return N>255&&(I=I.slice(0,-1),N=parseInt(I,8)),this.pos+=I.length-1,a=this.input.charCodeAt(this.pos),(I!=="0"||a===56||a===57)&&(this.strict||i)&&this.invalidStringToken(this.pos-1-I.length,i?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(N)}return Xe(a)?"":String.fromCharCode(a)}},Pe.readHexChar=function(i){var a=this.pos,x=this.readInt(16,i);return x===null&&this.invalidStringToken(a,"Bad character escape sequence"),x},Pe.readWord1=function(){this.containsEsc=!1;for(var i="",a=!0,x=this.pos,I=this.options.ecmaVersion>=6;this.pos<this.input.length;){var N=this.fullCharCodeAtPos();if(oe(N,I))this.pos+=N<=65535?1:2;else if(N===92){this.containsEsc=!0,i+=this.input.slice(x,this.pos);var H=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var W=this.readCodePoint();(a?et:oe)(W,I)||this.invalidStringToken(H,"Invalid Unicode escape"),i+=we(W),x=this.pos}else break;a=!1}return i+this.input.slice(x,this.pos)},Pe.readWord=function(){var i=this.readWord1(),a=A.name;return this.keywords.test(i)&&(a=Ke[i]),this.finishToken(a,i)};var jt="8.10.0";he.acorn={Parser:he,version:jt,defaultOptions:ti,Position:St,SourceLocation:qt,getLineInfo:Nt,Node:C,TokenType:Ce,tokTypes:A,keywordTypes:Ke,TokContext:w,tokContexts:m,isIdentifierChar:oe,isIdentifierStart:et,Token:Gt,isNewLine:Xe,lineBreak:De,lineBreakG:Tt,nonASCIIwhitespace:Dt};function Ot(i,a){return he.parse(i,a)}function Pt(i,a,x){return he.parseExpressionAt(i,a,x)}function xt(i,a){return he.tokenizer(i,a)}Y.Node=C,Y.Parser=he,Y.Position=St,Y.SourceLocation=qt,Y.TokContext=w,Y.Token=Gt,Y.TokenType=Ce,Y.defaultOptions=ti,Y.getLineInfo=Nt,Y.isIdentifierChar=oe,Y.isIdentifierStart=et,Y.isNewLine=Xe,Y.keywordTypes=Ke,Y.lineBreak=De,Y.lineBreakG=Tt,Y.nonASCIIwhitespace=Dt,Y.parse=Ot,Y.parseExpressionAt=Pt,Y.tokContexts=m,Y.tokTypes=A,Y.tokenizer=xt,Y.version=jt})}(Ri,Ri.exports)),Ri.exports}/*!
 * Paper.js v0.12.17 - The Swiss Army Knife of Vector Graphics Scripting.
 * http://paperjs.org/
 *
 * Copyright (c) 2011 - 2020, Jürg Lehni & Jonathan Puckey
 * http://juerglehni.com/ & https://puckey.studio/
 *
 * Distributed under the MIT license. See LICENSE file for details.
 *
 * All rights reserved.
 *
 * Date: Thu Nov 3 21:15:36 2022 +0100
 *
 ***
 *
 * Straps.js - Class inheritance library with support for bean-style accessors
 *
 * Copyright (c) 2006 - 2020 Jürg Lehni
 * http://juerglehni.com/
 *
 * Distributed under the MIT license.
 *
 ***
 *
 * Acorn.js
 * https://marijnhaverbeke.nl/acorn/
 *
 * Acorn is a tiny, fast JavaScript parser written in JavaScript,
 * created by Marijn Haverbeke and released under an MIT license.
 *
 */(function(Jt){(function(_t,Y){_t=_t||ln;var Ve=_t.window,Te=_t.document,B=new function(){var e=/^(statics|enumerable|beans|preserve)$/,t=[],n=t.slice,r=Object.create,s=Object.getOwnPropertyDescriptor,u=Object.defineProperty,h=t.forEach||function(g,p){for(var w=0,m=this.length;w<m;w++)g.call(p,this[w],w,this)},o=function(g,p){for(var w in this)this.hasOwnProperty(w)&&g.call(p,this[w],w,this)},l=Object.assign||function(g){for(var p=1,w=arguments.length;p<w;p++){var m=arguments[p];for(var k in m)m.hasOwnProperty(k)&&(g[k]=m[k])}return g},f=function(g,p,w){if(g){var m=s(g,"length");(m&&typeof m.value=="number"?h:o).call(g,p,w=w||g)}return w};function _(g,p,w,m,k){var d={};function y(C,E){E=E||(E=s(p,C))&&(E.get?E:E.value),typeof E=="string"&&E[0]==="#"&&(E=g[E.substring(1)]||E);var L=typeof E=="function",O=E,V=k||L&&!E.base?E&&E.get?C in g:g[C]:null,T;(!k||!V)&&(L&&V&&(E.base=V),L&&m!==!1&&(T=C.match(/^([gs]et|is)(([A-Z])(.*))$/))&&(d[T[3].toLowerCase()+T[4]]=T[2]),(!O||L||!O.get||typeof O.get!="function"||!v.isPlainObject(O))&&(O={value:O,writable:!0}),(s(g,C)||{configurable:!0}).configurable&&(O.configurable=!0,O.enumerable=w??!T),u(g,C,O))}if(p){for(var c in p)p.hasOwnProperty(c)&&!e.test(c)&&y(c);for(var c in d){var b=d[c],S=g["set"+b],P=g["get"+b]||S&&g["is"+b];P&&(m===!0||P.length===0)&&y(c,{get:P,set:S})}}return g}function v(){for(var g=0,p=arguments.length;g<p;g++){var w=arguments[g];w&&l(this,w)}return this}return _(v,{inject:function(g){if(g){var p=g.statics===!0?g:g.statics,w=g.beans,m=g.preserve;p!==g&&_(this.prototype,g,g.enumerable,w,m),_(this,p,null,w,m)}for(var k=1,d=arguments.length;k<d;k++)this.inject(arguments[k]);return this},extend:function(){for(var g=this,p,w,m=0,k,d=arguments.length;m<d&&!(p&&w);m++)k=arguments[m],p=p||k.initialize,w=w||k.prototype;return p=p||function(){g.apply(this,arguments)},w=p.prototype=w||r(this.prototype),u(w,"constructor",{value:p,writable:!0,configurable:!0}),_(p,this),arguments.length&&this.inject.apply(p,arguments),p.base=g,p}}).inject({enumerable:!1,initialize:v,set:v,inject:function(){for(var g=0,p=arguments.length;g<p;g++){var w=arguments[g];w&&_(this,w,w.enumerable,w.beans,w.preserve)}return this},extend:function(){var g=r(this);return g.inject.apply(g,arguments)},each:function(g,p){return f(this,g,p)},clone:function(){return new this.constructor(this)},statics:{set:l,each:f,create:r,define:u,describe:s,clone:function(g){return l(new g.constructor,g)},isPlainObject:function(g){var p=g!=null&&g.constructor;return p&&(p===Object||p===v||p.name==="Object")},pick:function(g,p){return g!==Y?g:p},slice:function(g,p,w){return n.call(g,p,w)}}})};Jt.exports=B,B.inject({enumerable:!1,toString:function(){return this._id!=null?(this._class||"Object")+(this._name?" '"+this._name+"'":" @"+this._id):"{ "+B.each(this,function(e,t){if(!/^_/.test(t)){var n=typeof e;this.push(t+": "+(n==="number"?lt.instance.number(e):n==="string"?"'"+e+"'":e))}},[]).join(", ")+" }"},getClassName:function(){return this._class||""},importJSON:function(e){return B.importJSON(e,this)},exportJSON:function(e){return B.exportJSON(this,e)},toJSON:function(){return B.serialize(this)},set:function(e,t){return e&&B.filter(this,e,t,this._prioritize),this}},{beans:!1,statics:{exports:{},extend:function e(){var t=e.base.apply(this,arguments),n=t.prototype._class;return n&&!B.exports[n]&&(B.exports[n]=t),t},equals:function(e,t){if(e===t)return!0;if(e&&e.equals)return e.equals(t);if(t&&t.equals)return t.equals(e);if(e&&t&&typeof e=="object"&&typeof t=="object"){if(Array.isArray(e)&&Array.isArray(t)){var n=e.length;if(n!==t.length)return!1;for(;n--;)if(!B.equals(e[n],t[n]))return!1}else{var r=Object.keys(e),n=r.length;if(n!==Object.keys(t).length)return!1;for(;n--;){var s=r[n];if(!(t.hasOwnProperty(s)&&B.equals(e[s],t[s])))return!1}}return!0}return!1},read:function(e,t,n,r){if(this===B){var s=this.peek(e,t);return e.__index++,s}var u=this.prototype,h=u._readIndex,o=t||h&&e.__index||0,l=e.length,f=e[o];if(r=r||l-o,f instanceof this||n&&n.readNull&&f==null&&r<=1)return h&&(e.__index=o+1),f&&n&&n.clone?f.clone():f;if(f=B.create(u),h&&(f.__read=!0),f=f.initialize.apply(f,o>0||o+r<l?B.slice(e,o,o+r):e)||f,h){e.__index=o+f.__read;var _=f.__filtered;_&&(e.__filtered=_,f.__filtered=Y),f.__read=Y}return f},peek:function(e,t){return e[e.__index=t||e.__index||0]},remain:function(e){return e.length-(e.__index||0)},readList:function(e,t,n,r){for(var s=[],u,h=t||0,o=r?h+r:e.length,l=h;l<o;l++)s.push(Array.isArray(u=e[l])?this.read(u,0,n):this.read(e,l,n,1));return s},readNamed:function(e,t,n,r,s){var u=this.getNamed(e,t),h=u!==Y;if(h){var o=e.__filtered;if(!o){var l=this.getSource(e);o=e.__filtered=B.create(l),o.__unfiltered=l}o[t]=Y}return this.read(h?[u]:e,n,r,s)},readSupported:function(e,t){var n=this.getSource(e),r=this,s=!1;return n&&Object.keys(n).forEach(function(u){if(u in t){var h=r.readNamed(e,u);h!==Y&&(t[u]=h),s=!0}}),s},getSource:function(e){var t=e.__source;if(t===Y){var n=e.length===1&&e[0];t=e.__source=n&&B.isPlainObject(n)?n:null}return t},getNamed:function(e,t){var n=this.getSource(e);if(n)return t?n[t]:e.__filtered||n},hasNamed:function(e,t){return!!this.getNamed(e,t)},filter:function(e,t,n,r){var s;function u(_){if(!(n&&_ in n)&&!(s&&_ in s)){var v=t[_];v!==Y&&(e[_]=v)}}if(r){for(var h={},o=0,l,f=r.length;o<f;o++)(l=r[o])in t&&(u(l),h[l]=!0);s=h}return Object.keys(t.__unfiltered||t).forEach(u),e},isPlainValue:function(e,t){return B.isPlainObject(e)||Array.isArray(e)||t&&typeof e=="string"},serialize:function(e,t,n,r){t=t||{};var s=!r,u;if(s&&(t.formatter=new lt(t.precision),r={length:0,definitions:{},references:{},add:function(v,g){var p="#"+v._id,w=this.references[p];if(!w){this.length++;var m=g.call(v),k=v._class;k&&m[0]!==k&&m.unshift(k),this.definitions[p]=m,w=this.references[p]=[p]}return w}}),e&&e._serialize){u=e._serialize(t,r);var h=e._class;h&&!e._compactSerialize&&(s||!n)&&u[0]!==h&&u.unshift(h)}else if(Array.isArray(e)){u=[];for(var o=0,l=e.length;o<l;o++)u[o]=B.serialize(e[o],t,n,r)}else if(B.isPlainObject(e)){u={};for(var f=Object.keys(e),o=0,l=f.length;o<l;o++){var _=f[o];u[_]=B.serialize(e[_],t,n,r)}}else typeof e=="number"?u=t.formatter.number(e,t.precision):u=e;return s&&r.length>0?[["dictionary",r.definitions],u]:u},deserialize:function(e,t,n,r,s){var u=e,h=!n,o=h&&e&&e.length&&e[0][0]==="dictionary";if(n=n||{},Array.isArray(e)){var l=e[0],f=l==="dictionary";if(e.length==1&&/^#/.test(l))return n.dictionary[l];l=B.exports[l],u=[];for(var _=l?1:0,v=e.length;_<v;_++)u.push(B.deserialize(e[_],t,n,f,o));if(l){var g=u;t?u=t(l,g,h||s):u=new l(g)}}else if(B.isPlainObject(e)){u={},r&&(n.dictionary=u);for(var p in e)u[p]=B.deserialize(e[p],t,n)}return o?u[1]:u},exportJSON:function(e,t){var n=B.serialize(e,t);return t&&t.asString==!1?n:JSON.stringify(n)},importJSON:function(e,t){return B.deserialize(typeof e=="string"?JSON.parse(e):e,function(n,r,s){var u=s&&t&&t.constructor===n,h=u?t:B.create(n.prototype);if(r.length===1&&h instanceof A&&(u||!(h instanceof Tt))){var o=r[0];B.isPlainObject(o)&&(o.insert=!1,u&&(r=r.concat([A.INSERT])))}return(u?h.set:n).apply(h,r),u&&(t=null),h})},push:function(e,t){var n=t.length;if(n<4096)e.push.apply(e,t);else{var r=e.length;e.length+=n;for(var s=0;s<n;s++)e[r+s]=t[s]}return e},splice:function(e,t,n,r){var s=t&&t.length,u=n===Y;n=u?e.length:n,n>e.length&&(n=e.length);for(var h=0;h<s;h++)t[h]._index=n+h;if(u)return B.push(e,t),[];var o=[n,r];t&&B.push(o,t);for(var l=e.splice.apply(e,o),h=0,f=l.length;h<f;h++)l[h]._index=Y;for(var h=n+s,f=e.length;h<f;h++)e[h]._index=h;return l},capitalize:function(e){return e.replace(/\b[a-z]/g,function(t){return t.toUpperCase()})},camelize:function(e){return e.replace(/-(.)/g,function(t,n){return n.toUpperCase()})},hyphenate:function(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}}});var zt={on:function(e,t){if(typeof e!="string")B.each(e,function(u,h){this.on(h,u)},this);else{var n=this._eventTypes,r=n&&n[e],s=this._callbacks=this._callbacks||{};s=s[e]=s[e]||[],s.indexOf(t)===-1&&(s.push(t),r&&r.install&&s.length===1&&r.install.call(this,e))}return this},off:function(e,t){if(typeof e!="string"){B.each(e,function(h,o){this.off(o,h)},this);return}var n=this._eventTypes,r=n&&n[e],s=this._callbacks&&this._callbacks[e],u;return s&&(!t||(u=s.indexOf(t))!==-1&&s.length===1?(r&&r.uninstall&&r.uninstall.call(this,e),delete this._callbacks[e]):u!==-1&&s.splice(u,1)),this},once:function(e,t){return this.on(e,function n(){t.apply(this,arguments),this.off(e,n)})},emit:function(e,t){var n=this._callbacks&&this._callbacks[e];if(!n)return!1;var r=B.slice(arguments,1),s=t&&t.target&&!t.currentTarget;n=n.slice(),s&&(t.currentTarget=this);for(var u=0,h=n.length;u<h;u++)if(n[u].apply(this,r)==!1){t&&t.stop&&t.stop();break}return s&&delete t.currentTarget,!0},responds:function(e){return!!(this._callbacks&&this._callbacks[e])},attach:"#on",detach:"#off",fire:"#emit",_installEvents:function(e){var t=this._eventTypes,n=this._callbacks,r=e?"install":"uninstall";if(t){for(var s in n)if(n[s].length>0){var u=t[s],h=u&&u[r];h&&h.call(this,s)}}},statics:{inject:function e(t){var n=t._events;if(n){var r={};B.each(n,function(s,u){var h=typeof s=="string",o=h?s:u,l=B.capitalize(o),f=o.substring(2).toLowerCase();r[f]=h?{}:s,o="_"+o,t["get"+l]=function(){return this[o]},t["set"+l]=function(_){var v=this[o];v&&this.off(f,v),_&&this.on(f,_),this[o]=_}}),t._eventTypes=r}return e.base.apply(this,arguments)}}},rt=B.extend({_class:"PaperScope",initialize:function e(){he=this,this.settings=new B({applyMatrix:!0,insertItems:!0,handleSize:4,hitTolerance:0}),this.project=null,this.projects=[],this.tools=[],this._id=e._id++,e._scopes[this._id]=this;var t=e.prototype;if(!this.support){var n=Me.getContext(1,1)||{};t.support={nativeDash:"setLineDash"in n||"mozDash"in n,nativeBlendModes:si.nativeModes},Me.release(n)}if(!this.agent){var r=_t.navigator.userAgent.toLowerCase(),s=(/(darwin|win|mac|linux|freebsd|sunos)/.exec(r)||[])[0],u=s==="darwin"?"mac":s,h=t.agent=t.browser={platform:u};u&&(h[u]=!0),r.replace(/(opera|chrome|safari|webkit|firefox|msie|trident|atom|node|jsdom)\/?\s*([.\d]+)(?:.*version\/([.\d]+))?(?:.*rv\:v?([.\d]+))?/g,function(o,l,f,_,v){if(!h.chrome){var g=l==="opera"?_:/^(node|trident)$/.test(l)?v:f;h.version=g,h.versionNumber=parseFloat(g),l={trident:"msie",jsdom:"node"}[l]||l,h.name=l,h[l]=!0}}),h.chrome&&delete h.webkit,h.atom&&delete h.chrome}},version:"0.12.17",getView:function(){var e=this.project;return e&&e._view},getPaper:function(){return this},execute:function(e,t){var n=he.PaperScript.execute(e,this,t);return Be.updateFocus(),n},install:function(e){var t=this;B.each(["project","view","tool"],function(r){B.define(e,r,{configurable:!0,get:function(){return t[r]}})});for(var n in this)!/^_/.test(n)&&this[n]&&(e[n]=this[n])},setup:function(e){return he=this,this.project=new Se(e),this},createCanvas:function(e,t){return Me.getCanvas(e,t)},activate:function(){he=this},clear:function(){for(var e=this.projects,t=this.tools,n=e.length-1;n>=0;n--)e[n].remove();for(var n=t.length-1;n>=0;n--)t[n].remove()},remove:function(){this.clear(),delete rt._scopes[this._id]},statics:new function(){function e(t){return t+="Attribute",function(n,r){return n[t](r)||n[t]("data-paper-"+r)}}return{_scopes:{},_id:0,get:function(t){return this._scopes[t]||null},getAttribute:e("get"),hasAttribute:e("has")}}}),Et=B.extend(zt,{initialize:function(e){this._scope=he,this._index=this._scope[this._list].push(this)-1,(e||!this._scope[this._reference])&&this.activate()},activate:function(){if(!this._scope)return!1;var e=this._scope[this._reference];return e&&e!==this&&e.emit("deactivate"),this._scope[this._reference]=this,this.emit("activate",e),!0},isActive:function(){return this._scope[this._reference]===this},remove:function(){return this._index==null?!1:(B.splice(this._scope[this._list],null,this._index,1),this._scope[this._reference]==this&&(this._scope[this._reference]=null),this._scope=null,!0)},getView:function(){return this._scope.getView()}}),$t={findItemBoundsCollisions:function(e,t,n){function r(h){for(var o=new Array(h.length),l=0;l<h.length;l++){var f=h[l].getBounds();o[l]=[f.left,f.top,f.right,f.bottom]}return o}var s=r(e),u=!t||t===e?s:r(t);return this.findBoundsCollisions(s,u,n||0)},findCurveBoundsCollisions:function(e,t,n,r){function s(g){for(var p=Math.min,w=Math.max,m=new Array(g.length),k=0;k<g.length;k++){var d=g[k];m[k]=[p(d[0],d[2],d[4],d[6]),p(d[1],d[3],d[5],d[7]),w(d[0],d[2],d[4],d[6]),w(d[1],d[3],d[5],d[7])]}return m}var u=s(e),h=!t||t===e?u:s(t);if(r){for(var o=this.findBoundsCollisions(u,h,n||0,!1,!0),l=this.findBoundsCollisions(u,h,n||0,!0,!0),f=[],_=0,v=o.length;_<v;_++)f[_]={hor:o[_],ver:l[_]};return f}return this.findBoundsCollisions(u,h,n||0)},findBoundsCollisions:function(e,t,n,r,s){var u=!t||e===t,h=u?e:e.concat(t),o=e.length,l=h.length;function f(J,ee,se){for(var Z=0,K=J.length;Z<K;){var ie=K+Z>>>1;h[J[ie]][ee]<se?Z=ie+1:K=ie}return Z-1}for(var _=r?1:0,v=_+2,g=r?0:1,p=g+2,w=new Array(l),m=0;m<l;m++)w[m]=m;w.sort(function(J,ee){return h[J][_]-h[ee][_]});for(var k=[],d=new Array(o),m=0;m<l;m++){var y=w[m],c=h[y],b=u?y:y-o,S=y<o,P=u||!S,C=S?[]:null;if(k.length){var E=f(k,v,c[_]-n)+1;if(k.splice(0,E),u&&s){C=C.concat(k);for(var L=0;L<k.length;L++){var O=k[L];d[O].push(b)}}else for(var V=c[p],T=c[g],L=0;L<k.length;L++){var O=k[L],R=h[O],F=O<o,q=u||O>=o;(s||(S&&q||P&&F)&&V>=R[g]-n&&T<=R[p]+n)&&(S&&q&&C.push(u?O:O-o),P&&F&&d[O].push(b))}}if(S&&(e===t&&C.push(y),d[y]=C),k.length){var U=c[v],G=f(k,v,U);k.splice(G+1,0,y)}else k.push(y)}for(var m=0;m<d.length;m++){var Q=d[m];Q&&Q.sort(function(ee,se){return ee-se})}return d}},lt=B.extend({initialize:function(e){this.precision=B.pick(e,5),this.multiplier=Math.pow(10,this.precision)},number:function(e){return this.precision<16?Math.round(e*this.multiplier)/this.multiplier:e},pair:function(e,t,n){return this.number(e)+(n||",")+this.number(t)},point:function(e,t){return this.number(e.x)+(t||",")+this.number(e.y)},size:function(e,t){return this.number(e.width)+(t||",")+this.number(e.height)},rectangle:function(e,t){return this.point(e,t)+(t||",")+this.size(e,t)}});lt.instance=new lt;var Ae=new function(){var e=[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],t=[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]],n=Math.abs,r=Math.sqrt,s=Math.pow,u=Math.log2||function(v){return Math.log(v)*Math.LOG2E},h=1e-12,o=112e-18;function l(v,g,p){return v<g?g:v>p?p:v}function f(v,g,p){function w(E){var L=E*134217729,O=E-L,V=O+L,T=E-V;return[V,T]}var m=g*g-v*p,k=g*g+v*p;if(n(m)*3<k){var d=w(v),y=w(g),c=w(p),b=g*g,S=y[0]*y[0]-b+2*y[0]*y[1]+y[1]*y[1],P=v*p,C=d[0]*c[0]-P+d[0]*c[1]+d[1]*c[0]+d[1]*c[1];m=b-P+(S-C)}return m}function _(){var v=Math.max.apply(Math,arguments);return v&&(v<1e-8||v>1e8)?s(2,-Math.round(u(v))):0}return{EPSILON:h,MACHINE_EPSILON:o,CURVETIME_EPSILON:1e-8,GEOMETRIC_EPSILON:1e-7,TRIGONOMETRIC_EPSILON:1e-8,ANGULAR_EPSILON:1e-5,KAPPA:4*(r(2)-1)/3,isZero:function(v){return v>=-h&&v<=h},isMachineZero:function(v){return v>=-o&&v<=o},clamp:l,integrate:function(v,g,p,w){for(var m=e[w-2],k=t[w-2],d=(p-g)*.5,y=d+g,c=0,b=w+1>>1,S=w&1?k[c++]*v(y):0;c<b;){var P=d*m[c];S+=k[c++]*(v(y+P)+v(y-P))}return d*S},findRoot:function(v,g,p,w,m,k,d){for(var y=0;y<k;y++){var c=v(p),b=c/g(p),S=p-b;if(n(b)<d){p=S;break}c>0?(m=p,p=S<=w?(w+m)*.5:S):(w=p,p=S>=m?(w+m)*.5:S)}return l(p,w,m)},solveQuadratic:function(v,g,p,w,m,k){var d,y=1/0;if(n(v)<h){if(n(g)<h)return n(p)<h?-1:0;d=-p/g}else{g*=-.5;var c=f(v,g,p);if(c&&n(c)<o){var b=_(n(v),n(g),n(p));b&&(v*=b,g*=b,p*=b,c=f(v,g,p))}if(c>=-o){var S=c<0?0:r(c),P=g+(g<0?-S:S);P===0?(d=p/v,y=-d):(d=P/v,y=p/P)}}var C=0,E=m==null,L=m-h,O=k+h;return isFinite(d)&&(E||d>L&&d<O)&&(w[C++]=E?d:l(d,m,k)),y!==d&&isFinite(y)&&(E||y>L&&y<O)&&(w[C++]=E?y:l(y,m,k)),C},solveCubic:function(v,g,p,w,m,k,d){var y=_(n(v),n(g),n(p),n(w)),c,b,S,P,C;y&&(v*=y,g*=y,p*=y,w*=y);function E(G){c=G;var Q=v*c;b=Q+g,S=b*c+p,P=(Q+b)*c+S,C=S*c+w}if(n(v)<h)v=g,b=p,S=w,c=1/0;else if(n(w)<h)b=g,S=p,c=0;else{E(-(g/v)/3);var L=C/v,O=s(n(L),1/3),V=L<0?-1:1,T=-P/v,R=T>0?1.324717957244746*Math.max(O,r(T)):O,F=c-V*R;if(F!==c){do E(F),F=P===0?c:c-C/P/(1+o);while(V*F>V*c);n(v)*c*c>n(w/c)&&(S=-w/c,b=(S-p)/c)}}var q=Ae.solveQuadratic(v,b,S,m,k,d),U=k==null;return isFinite(c)&&(q===0||q>0&&c!==m[0]&&c!==m[1])&&(U||c>k-h&&c<d+h)&&(m[q++]=U?c:l(c,k,d)),q}}},ei={_id:1,_pools:{},get:function(e){if(e){var t=this._pools[e];return t||(t=this._pools[e]={_id:1}),t._id++}else return this._id++}},D=B.extend({_class:"Point",_readIndex:!0,initialize:function(t,n){var r=typeof t,s=this.__read,u=0;if(r==="number"){var h=typeof n=="number";this._set(t,h?n:t),s&&(u=h?2:1)}else if(r==="undefined"||t===null)this._set(0,0),s&&(u=t===null?1:0);else{var o=r==="string"?t.split(/[\s,]+/)||[]:t;u=1,Array.isArray(o)?this._set(+o[0],+(o.length>1?o[1]:o[0])):"x"in o?this._set(o.x||0,o.y||0):"width"in o?this._set(o.width||0,o.height||0):"angle"in o?(this._set(o.length||0,0),this.setAngle(o.angle||0)):(this._set(0,0),u=0)}return s&&(this.__read=u),this},set:"#initialize",_set:function(e,t){return this.x=e,this.y=t,this},equals:function(e){return this===e||e&&(this.x===e.x&&this.y===e.y||Array.isArray(e)&&this.x===e[0]&&this.y===e[1])||!1},clone:function(){return new D(this.x,this.y)},toString:function(){var e=lt.instance;return"{ x: "+e.number(this.x)+", y: "+e.number(this.y)+" }"},_serialize:function(e){var t=e.formatter;return[t.number(this.x),t.number(this.y)]},getLength:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},setLength:function(e){if(this.isZero()){var t=this._angle||0;this._set(Math.cos(t)*e,Math.sin(t)*e)}else{var n=e/this.getLength();Ae.isZero(n)&&this.getAngle(),this._set(this.x*n,this.y*n)}},getAngle:function(){return this.getAngleInRadians.apply(this,arguments)*180/Math.PI},setAngle:function(e){this.setAngleInRadians.call(this,e*Math.PI/180)},getAngleInDegrees:"#getAngle",setAngleInDegrees:"#setAngle",getAngleInRadians:function(){if(arguments.length){var e=D.read(arguments),t=this.getLength()*e.getLength();if(Ae.isZero(t))return NaN;var n=this.dot(e)/t;return Math.acos(n<-1?-1:n>1?1:n)}else return this.isZero()?this._angle||0:this._angle=Math.atan2(this.y,this.x)},setAngleInRadians:function(e){if(this._angle=e,!this.isZero()){var t=this.getLength();this._set(Math.cos(e)*t,Math.sin(e)*t)}},getQuadrant:function(){return this.x>=0?this.y>=0?1:4:this.y>=0?2:3}},{beans:!1,getDirectedAngle:function(){var e=D.read(arguments);return Math.atan2(this.cross(e),this.dot(e))*180/Math.PI},getDistance:function(){var e=arguments,t=D.read(e),n=t.x-this.x,r=t.y-this.y,s=n*n+r*r,u=B.read(e);return u?s:Math.sqrt(s)},normalize:function(e){e===Y&&(e=1);var t=this.getLength(),n=t!==0?e/t:0,r=new D(this.x*n,this.y*n);return n>=0&&(r._angle=this._angle),r},rotate:function(e,t){if(e===0)return this.clone();e=e*Math.PI/180;var n=t?this.subtract(t):this,r=Math.sin(e),s=Math.cos(e);return n=new D(n.x*s-n.y*r,n.x*r+n.y*s),t?n.add(t):n},transform:function(e){return e?e._transformPoint(this):this},add:function(){var e=D.read(arguments);return new D(this.x+e.x,this.y+e.y)},subtract:function(){var e=D.read(arguments);return new D(this.x-e.x,this.y-e.y)},multiply:function(){var e=D.read(arguments);return new D(this.x*e.x,this.y*e.y)},divide:function(){var e=D.read(arguments);return new D(this.x/e.x,this.y/e.y)},modulo:function(){var e=D.read(arguments);return new D(this.x%e.x,this.y%e.y)},negate:function(){return new D(-this.x,-this.y)},isInside:function(){return le.read(arguments).contains(this)},isClose:function(){var e=arguments,t=D.read(e),n=B.read(e);return this.getDistance(t)<=n},isCollinear:function(){var e=D.read(arguments);return D.isCollinear(this.x,this.y,e.x,e.y)},isColinear:"#isCollinear",isOrthogonal:function(){var e=D.read(arguments);return D.isOrthogonal(this.x,this.y,e.x,e.y)},isZero:function(){var e=Ae.isZero;return e(this.x)&&e(this.y)},isNaN:function(){return isNaN(this.x)||isNaN(this.y)},isInQuadrant:function(e){return this.x*(e>1&&e<4?-1:1)>=0&&this.y*(e>2?-1:1)>=0},dot:function(){var e=D.read(arguments);return this.x*e.x+this.y*e.y},cross:function(){var e=D.read(arguments);return this.x*e.y-this.y*e.x},project:function(){var e=D.read(arguments),t=e.isZero()?0:this.dot(e)/e.dot(e);return new D(e.x*t,e.y*t)},statics:{min:function(){var e=arguments,t=D.read(e),n=D.read(e);return new D(Math.min(t.x,n.x),Math.min(t.y,n.y))},max:function(){var e=arguments,t=D.read(e),n=D.read(e);return new D(Math.max(t.x,n.x),Math.max(t.y,n.y))},random:function(){return new D(Math.random(),Math.random())},isCollinear:function(e,t,n,r){return Math.abs(e*r-t*n)<=Math.sqrt((e*e+t*t)*(n*n+r*r))*1e-8},isOrthogonal:function(e,t,n,r){return Math.abs(e*n+t*r)<=Math.sqrt((e*e+t*t)*(n*n+r*r))*1e-8}}},B.each(["round","ceil","floor","abs"],function(e){var t=Math[e];this[e]=function(){return new D(t(this.x),t(this.y))}},{})),et=D.extend({initialize:function(t,n,r,s){this._x=t,this._y=n,this._owner=r,this._setter=s},_set:function(e,t,n){return this._x=e,this._y=t,n||this._owner[this._setter](this),this},getX:function(){return this._x},setX:function(e){this._x=e,this._owner[this._setter](this)},getY:function(){return this._y},setY:function(e){this._y=e,this._owner[this._setter](this)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(e){this._owner._changeSelection(this._getSelection(),e)},_getSelection:function(){return this._setter==="setPosition"?4:0}}),oe=B.extend({_class:"Size",_readIndex:!0,initialize:function(t,n){var r=typeof t,s=this.__read,u=0;if(r==="number"){var h=typeof n=="number";this._set(t,h?n:t),s&&(u=h?2:1)}else if(r==="undefined"||t===null)this._set(0,0),s&&(u=t===null?1:0);else{var o=r==="string"?t.split(/[\s,]+/)||[]:t;u=1,Array.isArray(o)?this._set(+o[0],+(o.length>1?o[1]:o[0])):"width"in o?this._set(o.width||0,o.height||0):"x"in o?this._set(o.x||0,o.y||0):(this._set(0,0),u=0)}return s&&(this.__read=u),this},set:"#initialize",_set:function(e,t){return this.width=e,this.height=t,this},equals:function(e){return e===this||e&&(this.width===e.width&&this.height===e.height||Array.isArray(e)&&this.width===e[0]&&this.height===e[1])||!1},clone:function(){return new oe(this.width,this.height)},toString:function(){var e=lt.instance;return"{ width: "+e.number(this.width)+", height: "+e.number(this.height)+" }"},_serialize:function(e){var t=e.formatter;return[t.number(this.width),t.number(this.height)]},add:function(){var e=oe.read(arguments);return new oe(this.width+e.width,this.height+e.height)},subtract:function(){var e=oe.read(arguments);return new oe(this.width-e.width,this.height-e.height)},multiply:function(){var e=oe.read(arguments);return new oe(this.width*e.width,this.height*e.height)},divide:function(){var e=oe.read(arguments);return new oe(this.width/e.width,this.height/e.height)},modulo:function(){var e=oe.read(arguments);return new oe(this.width%e.width,this.height%e.height)},negate:function(){return new oe(-this.width,-this.height)},isZero:function(){var e=Ae.isZero;return e(this.width)&&e(this.height)},isNaN:function(){return isNaN(this.width)||isNaN(this.height)},statics:{min:function(e,t){return new oe(Math.min(e.width,t.width),Math.min(e.height,t.height))},max:function(e,t){return new oe(Math.max(e.width,t.width),Math.max(e.height,t.height))},random:function(){return new oe(Math.random(),Math.random())}}},B.each(["round","ceil","floor","abs"],function(e){var t=Math[e];this[e]=function(){return new oe(t(this.width),t(this.height))}},{})),Ce=oe.extend({initialize:function(t,n,r,s){this._width=t,this._height=n,this._owner=r,this._setter=s},_set:function(e,t,n){return this._width=e,this._height=t,n||this._owner[this._setter](this),this},getWidth:function(){return this._width},setWidth:function(e){this._width=e,this._owner[this._setter](this)},getHeight:function(){return this._height},setHeight:function(e){this._height=e,this._owner[this._setter](this)}}),le=B.extend({_class:"Rectangle",_readIndex:!0,beans:!0,initialize:function(t,n,r,s){var u=arguments,h=typeof t,o;if(h==="number"?(this._set(t,n,r,s),o=4):h==="undefined"||t===null?(this._set(0,0,0,0),o=t===null?1:0):u.length===1&&(Array.isArray(t)?(this._set.apply(this,t),o=1):t.x!==Y||t.width!==Y?(this._set(t.x||0,t.y||0,t.width||0,t.height||0),o=1):t.from===Y&&t.to===Y&&(this._set(0,0,0,0),B.readSupported(u,this)&&(o=1))),o===Y){var l=D.readNamed(u,"from"),f=B.peek(u),_=l.x,v=l.y,g,p;if(f&&f.x!==Y||B.hasNamed(u,"to")){var w=D.readNamed(u,"to");g=w.x-_,p=w.y-v,g<0&&(_=w.x,g=-g),p<0&&(v=w.y,p=-p)}else{var m=oe.read(u);g=m.width,p=m.height}this._set(_,v,g,p),o=u.__index}var k=u.__filtered;return k&&(this.__filtered=k),this.__read&&(this.__read=o),this},set:"#initialize",_set:function(e,t,n,r){return this.x=e,this.y=t,this.width=n,this.height=r,this},clone:function(){return new le(this.x,this.y,this.width,this.height)},equals:function(e){var t=B.isPlainValue(e)?le.read(arguments):e;return t===this||t&&this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height||!1},toString:function(){var e=lt.instance;return"{ x: "+e.number(this.x)+", y: "+e.number(this.y)+", width: "+e.number(this.width)+", height: "+e.number(this.height)+" }"},_serialize:function(e){var t=e.formatter;return[t.number(this.x),t.number(this.y),t.number(this.width),t.number(this.height)]},getPoint:function(e){var t=e?D:et;return new t(this.x,this.y,this,"setPoint")},setPoint:function(){var e=D.read(arguments);this.x=e.x,this.y=e.y},getSize:function(e){var t=e?oe:Ce;return new t(this.width,this.height,this,"setSize")},_fw:1,_fh:1,setSize:function(){var e=oe.read(arguments),t=this._sx,n=this._sy,r=e.width,s=e.height;t&&(this.x+=(this.width-r)*t),n&&(this.y+=(this.height-s)*n),this.width=r,this.height=s,this._fw=this._fh=1},getLeft:function(){return this.x},setLeft:function(e){if(!this._fw){var t=e-this.x;this.width-=this._sx===.5?t*2:t}this.x=e,this._sx=this._fw=0},getTop:function(){return this.y},setTop:function(e){if(!this._fh){var t=e-this.y;this.height-=this._sy===.5?t*2:t}this.y=e,this._sy=this._fh=0},getRight:function(){return this.x+this.width},setRight:function(e){if(!this._fw){var t=e-this.x;this.width=this._sx===.5?t*2:t}this.x=e-this.width,this._sx=1,this._fw=0},getBottom:function(){return this.y+this.height},setBottom:function(e){if(!this._fh){var t=e-this.y;this.height=this._sy===.5?t*2:t}this.y=e-this.height,this._sy=1,this._fh=0},getCenterX:function(){return this.x+this.width/2},setCenterX:function(e){this._fw||this._sx===.5?this.x=e-this.width/2:(this._sx&&(this.x+=(e-this.x)*2*this._sx),this.width=(e-this.x)*2),this._sx=.5,this._fw=0},getCenterY:function(){return this.y+this.height/2},setCenterY:function(e){this._fh||this._sy===.5?this.y=e-this.height/2:(this._sy&&(this.y+=(e-this.y)*2*this._sy),this.height=(e-this.y)*2),this._sy=.5,this._fh=0},getCenter:function(e){var t=e?D:et;return new t(this.getCenterX(),this.getCenterY(),this,"setCenter")},setCenter:function(){var e=D.read(arguments);return this.setCenterX(e.x),this.setCenterY(e.y),this},getArea:function(){return this.width*this.height},isEmpty:function(){return this.width===0||this.height===0},contains:function(e){return e&&e.width!==Y||(Array.isArray(e)?e:arguments).length===4?this._containsRectangle(le.read(arguments)):this._containsPoint(D.read(arguments))},_containsPoint:function(e){var t=e.x,n=e.y;return t>=this.x&&n>=this.y&&t<=this.x+this.width&&n<=this.y+this.height},_containsRectangle:function(e){var t=e.x,n=e.y;return t>=this.x&&n>=this.y&&t+e.width<=this.x+this.width&&n+e.height<=this.y+this.height},intersects:function(){var e=le.read(arguments),t=B.read(arguments)||0;return e.x+e.width>this.x-t&&e.y+e.height>this.y-t&&e.x<this.x+this.width+t&&e.y<this.y+this.height+t},intersect:function(){var e=le.read(arguments),t=Math.max(this.x,e.x),n=Math.max(this.y,e.y),r=Math.min(this.x+this.width,e.x+e.width),s=Math.min(this.y+this.height,e.y+e.height);return new le(t,n,r-t,s-n)},unite:function(){var e=le.read(arguments),t=Math.min(this.x,e.x),n=Math.min(this.y,e.y),r=Math.max(this.x+this.width,e.x+e.width),s=Math.max(this.y+this.height,e.y+e.height);return new le(t,n,r-t,s-n)},include:function(){var e=D.read(arguments),t=Math.min(this.x,e.x),n=Math.min(this.y,e.y),r=Math.max(this.x+this.width,e.x),s=Math.max(this.y+this.height,e.y);return new le(t,n,r-t,s-n)},expand:function(){var e=oe.read(arguments),t=e.width,n=e.height;return new le(this.x-t/2,this.y-n/2,this.width+t,this.height+n)},scale:function(e,t){return this.expand(this.width*e-this.width,this.height*(t===Y?e:t)-this.height)}},B.each([["Top","Left"],["Top","Right"],["Bottom","Left"],["Bottom","Right"],["Left","Center"],["Top","Center"],["Right","Center"],["Bottom","Center"]],function(e,t){var n=e.join(""),r=/^[RL]/.test(n);t>=4&&(e[1]+=r?"Y":"X");var s=e[r?0:1],u=e[r?1:0],h="get"+s,o="get"+u,l="set"+s,f="set"+u,_="get"+n,v="set"+n;this[_]=function(g){var p=g?D:et;return new p(this[h](),this[o](),this,v)},this[v]=function(){var g=D.read(arguments);this[l](g.x),this[f](g.y)}},{beans:!0})),ft=le.extend({initialize:function(t,n,r,s,u,h){this._set(t,n,r,s,!0),this._owner=u,this._setter=h},_set:function(e,t,n,r,s){return this._x=e,this._y=t,this._width=n,this._height=r,s||this._owner[this._setter](this),this}},new function(){var e=le.prototype;return B.each(["x","y","width","height"],function(t){var n=B.capitalize(t),r="_"+t;this["get"+n]=function(){return this[r]},this["set"+n]=function(s){this[r]=s,this._dontNotify||this._owner[this._setter](this)}},B.each(["Point","Size","Center","Left","Top","Right","Bottom","CenterX","CenterY","TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],function(t){var n="set"+t;this[n]=function(){this._dontNotify=!0,e[n].apply(this,arguments),this._dontNotify=!1,this._owner[this._setter](this)}},{isSelected:function(){return!!(this._owner._selection&2)},setSelected:function(t){var n=this._owner;n._changeSelection&&n._changeSelection(2,t)}}))}),be=B.extend({_class:"Matrix",initialize:function e(t,n){var r=arguments,s=r.length,u=!0;if(s>=6?this._set.apply(this,r):s===1||s===2?t instanceof e?this._set(t._a,t._b,t._c,t._d,t._tx,t._ty,n):Array.isArray(t)?this._set.apply(this,n?t.concat([n]):t):u=!1:s?u=!1:this.reset(),!u)throw new Error("Unsupported matrix parameters");return this},set:"#initialize",_set:function(e,t,n,r,s,u,h){return this._a=e,this._b=t,this._c=n,this._d=r,this._tx=s,this._ty=u,h||this._changed(),this},_serialize:function(e,t){return B.serialize(this.getValues(),e,!0,t)},_changed:function(){var e=this._owner;e&&(e._applyMatrix?e.transform(null,!0):e._changed(25))},clone:function(){return new be(this._a,this._b,this._c,this._d,this._tx,this._ty)},equals:function(e){return e===this||e&&this._a===e._a&&this._b===e._b&&this._c===e._c&&this._d===e._d&&this._tx===e._tx&&this._ty===e._ty},toString:function(){var e=lt.instance;return"[["+[e.number(this._a),e.number(this._c),e.number(this._tx)].join(", ")+"], ["+[e.number(this._b),e.number(this._d),e.number(this._ty)].join(", ")+"]]"},reset:function(e){return this._a=this._d=1,this._b=this._c=this._tx=this._ty=0,e||this._changed(),this},apply:function(e,t){var n=this._owner;return n?(n.transform(null,B.pick(e,!0),t),this.isIdentity()):!1},translate:function(){var e=D.read(arguments),t=e.x,n=e.y;return this._tx+=t*this._a+n*this._c,this._ty+=t*this._b+n*this._d,this._changed(),this},scale:function(){var e=arguments,t=D.read(e),n=D.read(e,0,{readNull:!0});return n&&this.translate(n),this._a*=t.x,this._b*=t.x,this._c*=t.y,this._d*=t.y,n&&this.translate(n.negate()),this._changed(),this},rotate:function(e){e*=Math.PI/180;var t=D.read(arguments,1),n=t.x,r=t.y,s=Math.cos(e),u=Math.sin(e),h=n-n*s+r*u,o=r-n*u-r*s,l=this._a,f=this._b,_=this._c,v=this._d;return this._a=s*l+u*_,this._b=s*f+u*v,this._c=-u*l+s*_,this._d=-u*f+s*v,this._tx+=h*l+o*_,this._ty+=h*f+o*v,this._changed(),this},shear:function(){var e=arguments,t=D.read(e),n=D.read(e,0,{readNull:!0});n&&this.translate(n);var r=this._a,s=this._b;return this._a+=t.y*this._c,this._b+=t.y*this._d,this._c+=t.x*r,this._d+=t.x*s,n&&this.translate(n.negate()),this._changed(),this},skew:function(){var e=arguments,t=D.read(e),n=D.read(e,0,{readNull:!0}),r=Math.PI/180,s=new D(Math.tan(t.x*r),Math.tan(t.y*r));return this.shear(s,n)},append:function(e,t){if(e){var n=this._a,r=this._b,s=this._c,u=this._d,h=e._a,o=e._c,l=e._b,f=e._d,_=e._tx,v=e._ty;this._a=h*n+l*s,this._c=o*n+f*s,this._b=h*r+l*u,this._d=o*r+f*u,this._tx+=_*n+v*s,this._ty+=_*r+v*u,t||this._changed()}return this},prepend:function(e,t){if(e){var n=this._a,r=this._b,s=this._c,u=this._d,h=this._tx,o=this._ty,l=e._a,f=e._c,_=e._b,v=e._d,g=e._tx,p=e._ty;this._a=l*n+f*r,this._c=l*s+f*u,this._b=_*n+v*r,this._d=_*s+v*u,this._tx=l*h+f*o+g,this._ty=_*h+v*o+p,t||this._changed()}return this},appended:function(e){return this.clone().append(e)},prepended:function(e){return this.clone().prepend(e)},invert:function(){var e=this._a,t=this._b,n=this._c,r=this._d,s=this._tx,u=this._ty,h=e*r-t*n,o=null;return h&&!isNaN(h)&&isFinite(s)&&isFinite(u)&&(this._a=r/h,this._b=-t/h,this._c=-n/h,this._d=e/h,this._tx=(n*u-r*s)/h,this._ty=(t*s-e*u)/h,o=this),o},inverted:function(){return this.clone().invert()},concatenate:"#append",preConcatenate:"#prepend",chain:"#appended",_shiftless:function(){return new be(this._a,this._b,this._c,this._d,0,0)},_orNullIfIdentity:function(){return this.isIdentity()?null:this},isIdentity:function(){return this._a===1&&this._b===0&&this._c===0&&this._d===1&&this._tx===0&&this._ty===0},isInvertible:function(){var e=this._a*this._d-this._c*this._b;return e&&!isNaN(e)&&isFinite(this._tx)&&isFinite(this._ty)},isSingular:function(){return!this.isInvertible()},transform:function(e,t,n){return arguments.length<3?this._transformPoint(D.read(arguments)):this._transformCoordinates(e,t,n)},_transformPoint:function(e,t,n){var r=e.x,s=e.y;return t||(t=new D),t._set(r*this._a+s*this._c+this._tx,r*this._b+s*this._d+this._ty,n)},_transformCoordinates:function(e,t,n){for(var r=0,s=2*n;r<s;r+=2){var u=e[r],h=e[r+1];t[r]=u*this._a+h*this._c+this._tx,t[r+1]=u*this._b+h*this._d+this._ty}return t},_transformCorners:function(e){var t=e.x,n=e.y,r=t+e.width,s=n+e.height,u=[t,n,r,n,r,s,t,s];return this._transformCoordinates(u,u,4)},_transformBounds:function(e,t,n){for(var r=this._transformCorners(e),s=r.slice(0,2),u=s.slice(),h=2;h<8;h++){var o=r[h],l=h&1;o<s[l]?s[l]=o:o>u[l]&&(u[l]=o)}return t||(t=new le),t._set(s[0],s[1],u[0]-s[0],u[1]-s[1],n)},inverseTransform:function(){return this._inverseTransform(D.read(arguments))},_inverseTransform:function(e,t,n){var r=this._a,s=this._b,u=this._c,h=this._d,o=this._tx,l=this._ty,f=r*h-s*u,_=null;if(f&&!isNaN(f)&&isFinite(o)&&isFinite(l)){var v=e.x-this._tx,g=e.y-this._ty;t||(t=new D),_=t._set((v*h-g*u)/f,(g*r-v*s)/f,n)}return _},decompose:function(){var e=this._a,t=this._b,n=this._c,r=this._d,s=e*r-t*n,u=Math.sqrt,h=Math.atan2,o=180/Math.PI,l,f,_;if(e!==0||t!==0){var v=u(e*e+t*t);l=Math.acos(e/v)*(t>0?1:-1),f=[v,s/v],_=[h(e*n+t*r,v*v),0]}else if(n!==0||r!==0){var g=u(n*n+r*r);l=Math.asin(n/g)*(r>0?1:-1),f=[s/g,g],_=[0,h(e*n+t*r,g*g)]}else l=0,_=f=[0,0];return{translation:this.getTranslation(),rotation:l*o,scaling:new D(f),skewing:new D(_[0]*o,_[1]*o)}},getValues:function(){return[this._a,this._b,this._c,this._d,this._tx,this._ty]},getTranslation:function(){return new D(this._tx,this._ty)},getScaling:function(){return this.decompose().scaling},getRotation:function(){return this.decompose().rotation},applyToContext:function(e){this.isIdentity()||e.transform(this._a,this._b,this._c,this._d,this._tx,this._ty)}},B.each(["a","b","c","d","tx","ty"],function(e){var t=B.capitalize(e),n="_"+e;this["get"+t]=function(){return this[n]},this["set"+t]=function(r){this[n]=r,this._changed()}},{})),Ke=B.extend({_class:"Line",initialize:function(t,n,r,s,u){var h=!1;arguments.length>=4?(this._px=t,this._py=n,this._vx=r,this._vy=s,h=u):(this._px=t.x,this._py=t.y,this._vx=n.x,this._vy=n.y,h=r),h||(this._vx-=this._px,this._vy-=this._py)},getPoint:function(){return new D(this._px,this._py)},getVector:function(){return new D(this._vx,this._vy)},getLength:function(){return this.getVector().getLength()},intersect:function(e,t){return Ke.intersect(this._px,this._py,this._vx,this._vy,e._px,e._py,e._vx,e._vy,!0,t)},getSide:function(e,t){return Ke.getSide(this._px,this._py,this._vx,this._vy,e.x,e.y,!0,t)},getDistance:function(e){return Math.abs(this.getSignedDistance(e))},getSignedDistance:function(e){return Ke.getSignedDistance(this._px,this._py,this._vx,this._vy,e.x,e.y,!0)},isCollinear:function(e){return D.isCollinear(this._vx,this._vy,e._vx,e._vy)},isOrthogonal:function(e){return D.isOrthogonal(this._vx,this._vy,e._vx,e._vy)},statics:{intersect:function(e,t,n,r,s,u,h,o,l,f){l||(n-=e,r-=t,h-=s,o-=u);var _=n*o-r*h;if(!Ae.isMachineZero(_)){var v=e-s,g=t-u,p=(h*g-o*v)/_,w=(n*g-r*v)/_,m=1e-12,k=-m,d=1+m;if(f||k<p&&p<d&&k<w&&w<d)return f||(p=p<=0?0:p>=1?1:p),new D(e+p*n,t+p*r)}},getSide:function(e,t,n,r,s,u,h,o){h||(n-=e,r-=t);var l=s-e,f=u-t,_=l*r-f*n;return!o&&Ae.isMachineZero(_)&&(_=(l*n+l*n)/(n*n+r*r),_>=0&&_<=1&&(_=0)),_<0?-1:_>0?1:0},getSignedDistance:function(e,t,n,r,s,u,h){return h||(n-=e,r-=t),n===0?r>0?s-e:e-s:r===0?n<0?u-t:t-u:((s-e)*r-(u-t)*n)/(r>n?r*Math.sqrt(1+n*n/(r*r)):n*Math.sqrt(1+r*r/(n*n)))},getDistance:function(e,t,n,r,s,u,h){return Math.abs(Ke.getSignedDistance(e,t,n,r,s,u,h))}}}),Se=Et.extend({_class:"Project",_list:"projects",_reference:"project",_compactSerialize:!0,initialize:function(t){Et.call(this,!0),this._children=[],this._namedChildren={},this._activeLayer=null,this._currentStyle=new kt(null,null,this),this._view=Be.create(this,t||Me.getCanvas(1,1)),this._selectionItems={},this._selectionCount=0,this._updateVersion=0},_serialize:function(e,t){return B.serialize(this._children,e,!0,t)},_changed:function(e,t){if(e&1){var n=this._view;n&&(n._needsUpdate=!0,!n._requested&&n._autoUpdate&&n.requestUpdate())}var r=this._changes;if(r&&t){var s=this._changesById,u=t._id,h=s[u];h?h.flags|=e:r.push(s[u]={item:t,flags:e})}},clear:function(){for(var e=this._children,t=e.length-1;t>=0;t--)e[t].remove()},isEmpty:function(){return!this._children.length},remove:function e(){return e.base.call(this)?(this._view&&this._view.remove(),!0):!1},getView:function(){return this._view},getCurrentStyle:function(){return this._currentStyle},setCurrentStyle:function(e){this._currentStyle.set(e)},getIndex:function(){return this._index},getOptions:function(){return this._scope.settings},getLayers:function(){return this._children},getActiveLayer:function(){return this._activeLayer||new Tt({project:this,insert:!0})},getSymbolDefinitions:function(){var e=[],t={};return this.getItems({class:Dt,match:function(n){var r=n._definition,s=r._id;return t[s]||(t[s]=!0,e.push(r)),!1}}),e},getSymbols:"getSymbolDefinitions",getSelectedItems:function(){var e=this._selectionItems,t=[];for(var n in e){var r=e[n],s=r._selection;s&1&&r.isInserted()?t.push(r):s||this._updateSelection(r)}return t},_updateSelection:function(e){var t=e._id,n=this._selectionItems;e._selection?n[t]!==e&&(this._selectionCount++,n[t]=e):n[t]===e&&(this._selectionCount--,delete n[t])},selectAll:function(){for(var e=this._children,t=0,n=e.length;t<n;t++)e[t].setFullySelected(!0)},deselectAll:function(){var e=this._selectionItems;for(var t in e)e[t].setFullySelected(!1)},addLayer:function(e){return this.insertLayer(Y,e)},insertLayer:function(e,t){if(t instanceof Tt){t._remove(!1,!0),B.splice(this._children,[t],e,0),t._setProject(this,!0);var n=t._name;n&&t.setName(n),this._changes&&t._changed(5),this._activeLayer||(this._activeLayer=t)}else t=null;return t},_insertItem:function(e,t,n){return t=this.insertLayer(e,t)||(this._activeLayer||this._insertItem(Y,new Tt(A.NO_INSERT),!0)).insertChild(e,t),n&&t.activate&&t.activate(),t},getItems:function(e){return A._getItems(this,e)},getItem:function(e){return A._getItems(this,e,null,null,!0)[0]||null},importJSON:function(e){this.activate();var t=this._activeLayer;return B.importJSON(e,t&&t.isEmpty()&&t)},removeOn:function(e){var t=this._removeSets;if(t){e==="mouseup"&&(t.mousedrag=null);var n=t[e];if(n){for(var r in n){var s=n[r];for(var u in t){var h=t[u];h&&h!=n&&delete h[s._id]}s.remove()}t[e]=null}}},draw:function(e,t,n){this._updateVersion++,e.save(),t.applyToContext(e);for(var r=this._children,s=new B({offset:new D(0,0),pixelRatio:n,viewMatrix:t.isIdentity()?null:t,matrices:[new be],updateMatrix:!0}),u=0,h=r.length;u<h;u++)r[u].draw(e,s);if(e.restore(),this._selectionCount>0){e.save(),e.strokeWidth=1;var o=this._selectionItems,l=this._scope.settings.handleSize,f=this._updateVersion;for(var _ in o)o[_]._drawSelection(e,t,l,o,f);e.restore()}}}),A=B.extend(zt,{statics:{extend:function e(t){return t._serializeFields&&(t._serializeFields=B.set({},this.prototype._serializeFields,t._serializeFields)),e.base.apply(this,arguments)},INSERT:{insert:!0},NO_INSERT:{insert:!1}},_class:"Item",_name:null,_applyMatrix:!0,_canApplyMatrix:!0,_canScaleStroke:!1,_pivot:null,_visible:!0,_blendMode:"normal",_opacity:1,_locked:!1,_guide:!1,_clipMask:!1,_selection:0,_selectBounds:!0,_selectChildren:!1,_serializeFields:{name:null,applyMatrix:null,matrix:new be,pivot:null,visible:!0,blendMode:"normal",opacity:1,locked:!1,guide:!1,clipMask:!1,selected:!1,data:{}},_prioritize:["applyMatrix"]},new function(){var e=["onMouseDown","onMouseUp","onMouseDrag","onClick","onDoubleClick","onMouseMove","onMouseEnter","onMouseLeave"];return B.each(e,function(t){this._events[t]={install:function(n){this.getView()._countItemEvent(n,1)},uninstall:function(n){this.getView()._countItemEvent(n,-1)}}},{_events:{onFrame:{install:function(){this.getView()._animateItem(this,!0)},uninstall:function(){this.getView()._animateItem(this,!1)}},onLoad:{},onError:{}},statics:{_itemHandlers:e}})},{initialize:function(){},_initialize:function(e,t){var n=e&&B.isPlainObject(e),r=n&&e.internal===!0,s=this._matrix=new be,u=n&&e.project||he.project,h=he.settings;return this._id=r?null:ei.get(),this._parent=this._index=null,this._applyMatrix=this._canApplyMatrix&&h.applyMatrix,t&&s.translate(t),s._owner=this,this._style=new kt(u._currentStyle,this,u),r||n&&e.insert==!1||!h.insertItems&&!(n&&e.insert==!0)?this._setProject(u):(n&&e.parent||u)._insertItem(Y,this,!0),n&&e!==A.NO_INSERT&&e!==A.INSERT&&this.set(e,{internal:!0,insert:!0,project:!0,parent:!0}),n},_serialize:function(e,t){var n={},r=this;function s(u){for(var h in u){var o=r[h];B.equals(o,h==="leading"?u.fontSize*1.2:u[h])||(n[h]=B.serialize(o,e,h!=="data",t))}}return s(this._serializeFields),this instanceof De||s(this._style._defaults),[this._class,n]},_changed:function(e){var t=this._symbol,n=this._parent||t,r=this._project;e&8&&(this._bounds=this._position=this._decomposed=Y),e&16&&(this._globalMatrix=Y),n&&e&72&&A._clearBoundsCache(n),e&2&&A._clearBoundsCache(this),r&&r._changed(e,this),t&&t._changed(e)},getId:function(){return this._id},getName:function(){return this._name},setName:function(e){if(this._name&&this._removeNamed(),e===+e+"")throw new Error("Names consisting only of numbers are not supported.");var t=this._getOwner();if(e&&t){var n=t._children,r=t._namedChildren;(r[e]=r[e]||[]).push(this),e in n||(n[e]=this)}this._name=e||Y,this._changed(256)},getStyle:function(){return this._style},setStyle:function(e){this.getStyle().set(e)}},B.each(["locked","visible","blendMode","opacity","guide"],function(e){var t=B.capitalize(e),n="_"+e,r={locked:256,visible:265};this["get"+t]=function(){return this[n]},this["set"+t]=function(s){s!=this[n]&&(this[n]=s,this._changed(r[e]||257))}},{}),{beans:!0,getSelection:function(){return this._selection},setSelection:function(e){if(e!==this._selection){this._selection=e;var t=this._project;t&&(t._updateSelection(this),this._changed(257))}},_changeSelection:function(e,t){var n=this._selection;this.setSelection(t?n|e:n&~e)},isSelected:function(){if(this._selectChildren){for(var e=this._children,t=0,n=e.length;t<n;t++)if(e[t].isSelected())return!0}return!!(this._selection&1)},setSelected:function(e){if(this._selectChildren)for(var t=this._children,n=0,r=t.length;n<r;n++)t[n].setSelected(e);this._changeSelection(1,e)},isFullySelected:function(){var e=this._children,t=!!(this._selection&1);if(e&&t){for(var n=0,r=e.length;n<r;n++)if(!e[n].isFullySelected())return!1;return!0}return t},setFullySelected:function(e){var t=this._children;if(t)for(var n=0,r=t.length;n<r;n++)t[n].setFullySelected(e);this._changeSelection(1,e)},isClipMask:function(){return this._clipMask},setClipMask:function(e){this._clipMask!=(e=!!e)&&(this._clipMask=e,e&&(this.setFillColor(null),this.setStrokeColor(null)),this._changed(257),this._parent&&this._parent._changed(2048))},getData:function(){return this._data||(this._data={}),this._data},setData:function(e){this._data=e},getPosition:function(e){var t=e?D:et,n=this._position||(this._position=this._getPositionFromBounds());return new t(n.x,n.y,this,"setPosition")},setPosition:function(){this.translate(D.read(arguments).subtract(this.getPosition(!0)))},_getPositionFromBounds:function(e){return this._pivot?this._matrix._transformPoint(this._pivot):(e||this.getBounds()).getCenter(!0)},getPivot:function(){var e=this._pivot;return e?new et(e.x,e.y,this,"setPivot"):null},setPivot:function(){this._pivot=D.read(arguments,0,{clone:!0,readNull:!0}),this._position=Y}},B.each({getStrokeBounds:{stroke:!0},getHandleBounds:{handle:!0},getInternalBounds:{internal:!0}},function(e,t){this[t]=function(n){return this.getBounds(n,e)}},{beans:!0,getBounds:function(e,t){var n=t||e instanceof be,r=B.set({},n?t:e,this._boundsOptions);(!r.stroke||this.getStrokeScaling())&&(r.cacheItem=this);var s=this._getCachedBounds(n&&e,r).rect;return arguments.length?s:new ft(s.x,s.y,s.width,s.height,this,"setBounds")},setBounds:function(){var e=le.read(arguments),t=this.getBounds(),n=this._matrix,r=new be,s=e.getCenter();r.translate(s),(e.width!=t.width||e.height!=t.height)&&(n.isInvertible()||(n.set(n._backup||new be().translate(n.getTranslation())),t=this.getBounds()),r.scale(t.width!==0?e.width/t.width:0,t.height!==0?e.height/t.height:0)),s=t.getCenter(),r.translate(-s.x,-s.y),this.transform(r)},_getBounds:function(e,t){var n=this._children;return!n||!n.length?new le:(A._updateBoundsCache(this,t.cacheItem),A._getBounds(n,e,t))},_getBoundsCacheKey:function(e,t){return[e.stroke?1:0,e.handle?1:0,t?1:0].join("")},_getCachedBounds:function(e,t,n){e=e&&e._orNullIfIdentity();var r=t.internal&&!n,s=t.cacheItem,u=r?null:this._matrix._orNullIfIdentity(),h=s&&(!e||e.equals(u))&&this._getBoundsCacheKey(t,r),o=this._bounds;if(A._updateBoundsCache(this._parent||this._symbol,s),h&&o&&h in o){var l=o[h];return{rect:l.rect.clone(),nonscaling:l.nonscaling}}var f=this._getBounds(e||u,t),_=f.rect||f,v=this._style,g=f.nonscaling||v.hasStroke()&&!v.getStrokeScaling();if(h){o||(this._bounds=o={});var l=o[h]={rect:_.clone(),nonscaling:g,internal:r}}return{rect:_,nonscaling:g}},_getStrokeMatrix:function(e,t){var n=this.getStrokeScaling()?null:t&&t.internal?this:this._parent||this._symbol&&this._symbol._item,r=n?n.getViewMatrix().invert():e;return r&&r._shiftless()},statics:{_updateBoundsCache:function(e,t){if(e&&t){var n=t._id,r=e._boundsCache=e._boundsCache||{ids:{},list:[]};r.ids[n]||(r.list.push(t),r.ids[n]=t)}},_clearBoundsCache:function(e){var t=e._boundsCache;if(t){e._bounds=e._position=e._boundsCache=Y;for(var n=0,r=t.list,s=r.length;n<s;n++){var u=r[n];u!==e&&(u._bounds=u._position=Y,u._boundsCache&&A._clearBoundsCache(u))}}},_getBounds:function(e,t,n){var r=1/0,s=-r,u=r,h=s,o=!1;n=n||{};for(var l=0,f=e.length;l<f;l++){var _=e[l];if(_._visible&&!_.isEmpty(!0)){var v=_._getCachedBounds(t&&t.appended(_._matrix),n,!0),g=v.rect;r=Math.min(g.x,r),u=Math.min(g.y,u),s=Math.max(g.x+g.width,s),h=Math.max(g.y+g.height,h),v.nonscaling&&(o=!0)}}return{rect:isFinite(r)?new le(r,u,s-r,h-u):new le,nonscaling:o}}}}),{beans:!0,_decompose:function(){return this._applyMatrix?null:this._decomposed||(this._decomposed=this._matrix.decompose())},getRotation:function(){var e=this._decompose();return e?e.rotation:0},setRotation:function(e){var t=this.getRotation();if(t!=null&&e!=null){var n=this._decomposed;this.rotate(e-t),n&&(n.rotation=e,this._decomposed=n)}},getScaling:function(){var e=this._decompose(),t=e&&e.scaling;return new et(t?t.x:1,t?t.y:1,this,"setScaling")},setScaling:function(){var e=this.getScaling(),t=D.read(arguments,0,{clone:!0,readNull:!0});if(e&&t&&!e.equals(t)){var n=this.getRotation(),r=this._decomposed,s=new be,u=Ae.isZero;if(u(e.x)||u(e.y))s.translate(r.translation),n&&s.rotate(n),s.scale(t.x,t.y),this._matrix.set(s);else{var h=this.getPosition(!0);s.translate(h),n&&s.rotate(n),s.scale(t.x/e.x,t.y/e.y),n&&s.rotate(-n),s.translate(h.negate()),this.transform(s)}r&&(r.scaling=t,this._decomposed=r)}},getMatrix:function(){return this._matrix},setMatrix:function(){var e=this._matrix;e.set.apply(e,arguments)},getGlobalMatrix:function(e){var t=this._globalMatrix;if(t)for(var n=this._parent,r=[];n;){if(!n._globalMatrix){t=null;for(var s=0,u=r.length;s<u;s++)r[s]._globalMatrix=null;break}r.push(n),n=n._parent}if(!t){t=this._globalMatrix=this._matrix.clone();var n=this._parent;n&&t.prepend(n.getGlobalMatrix(!0))}return e?t:t.clone()},getViewMatrix:function(){return this.getGlobalMatrix().prepend(this.getView()._matrix)},getApplyMatrix:function(){return this._applyMatrix},setApplyMatrix:function(e){(this._applyMatrix=this._canApplyMatrix&&!!e)&&this.transform(null,!0)},getTransformContent:"#getApplyMatrix",setTransformContent:"#setApplyMatrix"},{getProject:function(){return this._project},_setProject:function(e,t){if(this._project!==e){this._project&&this._installEvents(!1),this._project=e;for(var n=this._children,r=0,s=n&&n.length;r<s;r++)n[r]._setProject(e);t=!0}t&&this._installEvents(!0)},getView:function(){return this._project._view},_installEvents:function e(t){e.base.call(this,t);for(var n=this._children,r=0,s=n&&n.length;r<s;r++)n[r]._installEvents(t)},getLayer:function(){for(var e=this;e=e._parent;)if(e instanceof Tt)return e;return null},getParent:function(){return this._parent},setParent:function(e){return e.addChild(this)},_getOwner:"#getParent",getChildren:function(){return this._children},setChildren:function(e){this.removeChildren(),this.addChildren(e)},getFirstChild:function(){return this._children&&this._children[0]||null},getLastChild:function(){return this._children&&this._children[this._children.length-1]||null},getNextSibling:function(){var e=this._getOwner();return e&&e._children[this._index+1]||null},getPreviousSibling:function(){var e=this._getOwner();return e&&e._children[this._index-1]||null},getIndex:function(){return this._index},equals:function(e){return e===this||e&&this._class===e._class&&this._style.equals(e._style)&&this._matrix.equals(e._matrix)&&this._locked===e._locked&&this._visible===e._visible&&this._blendMode===e._blendMode&&this._opacity===e._opacity&&this._clipMask===e._clipMask&&this._guide===e._guide&&this._equals(e)||!1},_equals:function(e){return B.equals(this._children,e._children)},clone:function(e){var t=new this.constructor(A.NO_INSERT),n=this._children,r=B.pick(e?e.insert:Y,e===Y||e===!0),s=B.pick(e?e.deep:Y,!0);n&&t.copyAttributes(this),(!n||s)&&t.copyContent(this),n||t.copyAttributes(this),r&&t.insertAbove(this);var u=this._name,h=this._parent;if(u&&h){for(var n=h._children,o=u,l=1;n[u];)u=o+" "+l++;u!==o&&t.setName(u)}return t},copyContent:function(e){for(var t=e._children,n=0,r=t&&t.length;n<r;n++)this.addChild(t[n].clone(!1),!0)},copyAttributes:function(e,t){this.setStyle(e._style);for(var n=["_locked","_visible","_blendMode","_opacity","_clipMask","_guide"],r=0,s=n.length;r<s;r++){var u=n[r];e.hasOwnProperty(u)&&(this[u]=e[u])}t||this._matrix.set(e._matrix,!0),this.setApplyMatrix(e._applyMatrix),this.setPivot(e._pivot),this.setSelection(e._selection);var h=e._data,o=e._name;this._data=h?B.clone(h):null,o&&this.setName(o)},rasterize:function(e,t){var n,r,s;B.isPlainObject(e)?(n=e.resolution,r=e.insert,s=e.raster):(n=e,r=t),s||(s=new Lt(A.NO_INSERT));var u=this.getStrokeBounds(),h=(n||this.getView().getResolution())/72,o=u.getTopLeft().floor(),l=u.getBottomRight().ceil(),f=new oe(l.subtract(o)),_=f.multiply(h);if(s.setSize(_,!0),!_.isZero()){var v=s.getContext(!0),g=new be().scale(h).translate(o.negate());v.save(),g.applyToContext(v),this.draw(v,new B({matrices:[g]})),v.restore()}return s._matrix.set(new be().translate(o.add(f.divide(2))).scale(1/h)),(r===Y||r)&&s.insertAbove(this),s},contains:function(){var e=this._matrix;return e.isInvertible()&&!!this._contains(e._inverseTransform(D.read(arguments)))},_contains:function(e){var t=this._children;if(t){for(var n=t.length-1;n>=0;n--)if(t[n].contains(e))return!0;return!1}return e.isInside(this.getInternalBounds())},isInside:function(){return le.read(arguments).contains(this.getBounds())},_asPathItem:function(){return new we.Rectangle({rectangle:this.getInternalBounds(),matrix:this._matrix,insert:!1})},intersects:function(e,t){return e instanceof A?this._asPathItem().getIntersections(e._asPathItem(),null,t,!0).length>0:!1}},new function(){function e(){var r=arguments;return this._hitTest(D.read(r),vt.getOptions(r))}function t(){var r=arguments,s=D.read(r),u=vt.getOptions(r),h=[];return this._hitTest(s,new B({all:h},u)),h}function n(r,s,u,h){var o=this._children;if(o)for(var l=o.length-1;l>=0;l--){var f=o[l],_=f!==h&&f._hitTest(r,s,u);if(_&&!s.all)return _}return null}return Se.inject({hitTest:e,hitTestAll:t,_hitTest:n}),{hitTest:e,hitTestAll:t,_hitTestChildren:n}},{_hitTest:function(e,t,n){if(this._locked||!this._visible||this._guide&&!t.guides||this.isEmpty())return null;var r=this._matrix,s=n?n.appended(r):this.getGlobalMatrix().prepend(this.getView()._matrix),u=Math.max(t.tolerance,1e-12),h=t._tolerancePadding=new oe(we._getStrokePadding(u,r._shiftless().invert()));if(e=r._inverseTransform(e),!e||!this._children&&!this.getBounds({internal:!0,stroke:!0,handle:!0}).expand(h.multiply(2))._containsPoint(e))return null;var o=!(t.guides&&!this._guide||t.selected&&!this.isSelected()||t.type&&t.type!==B.hyphenate(this._class)||t.class&&!(this instanceof t.class)),l=t.match,f=this,_,v;function g(c){return c&&l&&!l(c)&&(c=null),c&&t.all&&t.all.push(c),c}function p(c,b){var S=b?_["get"+b]():f.getPosition();if(e.subtract(S).divide(h).length<=1)return new vt(c,f,{name:b?B.hyphenate(b):c,point:S})}var w=t.position,m=t.center,k=t.bounds;if(o&&this._parent&&(w||m||k)){if((m||k)&&(_=this.getInternalBounds()),v=w&&p("position")||m&&p("center","Center"),!v&&k)for(var d=["TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],y=0;y<8&&!v;y++)v=p("bounds",d[y]);v=g(v)}return v||(v=this._hitTestChildren(e,t,s)||o&&g(this._hitTestSelf(e,t,s,this.getStrokeScaling()?null:s._shiftless().invert()))||null),v&&v.point&&(v.point=r.transform(v.point)),v},_hitTestSelf:function(e,t){if(t.fill&&this.hasFill()&&this._contains(e))return new vt("fill",this)},matches:function(e,t){function n(h,o){for(var l in h)if(h.hasOwnProperty(l)){var f=h[l],_=o[l];if(B.isPlainObject(f)&&B.isPlainObject(_)){if(!n(f,_))return!1}else if(!B.equals(f,_))return!1}return!0}var r=typeof e;if(r==="object"){for(var s in e)if(e.hasOwnProperty(s)&&!this.matches(s,e[s]))return!1;return!0}else{if(r==="function")return e(this);if(e==="match")return t(this);var u=/^(empty|editable)$/.test(e)?this["is"+B.capitalize(e)]():e==="type"?B.hyphenate(this._class):this[e];if(e==="class"){if(typeof t=="function")return this instanceof t;u=this._class}if(typeof t=="function")return!!t(u);if(t){if(t.test)return t.test(u);if(B.isPlainObject(t))return n(t,u)}return B.equals(u,t)}},getItems:function(e){return A._getItems(this,e,this._matrix)},getItem:function(e){return A._getItems(this,e,this._matrix,null,!0)[0]||null},statics:{_getItems:function e(t,n,r,s,u){if(!s){var h=typeof n=="object"&&n,o=h&&h.overlapping,l=h&&h.inside,f=o||l,g=f&&le.read([f]);s={items:[],recursive:h&&h.recursive!==!1,inside:!!l,overlapping:!!o,rect:g,path:o&&new we.Rectangle({rectangle:g,insert:!1})},h&&(n=B.filter({},n,{recursive:!0,inside:!0,overlapping:!0}))}var _=t._children,v=s.items,g=s.rect;r=g&&(r||new be);for(var p=0,w=_&&_.length;p<w;p++){var m=_[p],k=r&&r.appended(m._matrix),d=!0;if(g){var f=m.getBounds(k);if(!g.intersects(f))continue;g.contains(f)||s.overlapping&&(f.contains(g)||s.path.intersects(m,k))||(d=!1)}if(d&&m.matches(n)&&(v.push(m),u)||(s.recursive!==!1&&e(m,n,k,s,u),u&&v.length>0))break}return v}}},{importJSON:function(e){var t=B.importJSON(e,this);return t!==this?this.addChild(t):t},addChild:function(e){return this.insertChild(Y,e)},insertChild:function(e,t){var n=t?this.insertChildren(e,[t]):null;return n&&n[0]},addChildren:function(e){return this.insertChildren(this._children.length,e)},insertChildren:function(e,t){var n=this._children;if(n&&t&&t.length>0){t=B.slice(t);for(var r={},s=t.length-1;s>=0;s--){var u=t[s],h=u&&u._id;!u||r[h]?t.splice(s,1):(u._remove(!1,!0),r[h]=!0)}B.splice(n,t,e,0);for(var o=this._project,l=o._changes,s=0,f=t.length;s<f;s++){var u=t[s],_=u._name;u._parent=this,u._setProject(o,!0),_&&u.setName(_),l&&u._changed(5)}this._changed(11)}else t=null;return t},_insertItem:"#insertChild",_insertAt:function(e,t){var n=e&&e._getOwner(),r=e!==this&&n?this:null;return r&&(r._remove(!1,!0),n._insertItem(e._index+t,r)),r},insertAbove:function(e){return this._insertAt(e,1)},insertBelow:function(e){return this._insertAt(e,0)},sendToBack:function(){var e=this._getOwner();return e?e._insertItem(0,this):null},bringToFront:function(){var e=this._getOwner();return e?e._insertItem(Y,this):null},appendTop:"#addChild",appendBottom:function(e){return this.insertChild(0,e)},moveAbove:"#insertAbove",moveBelow:"#insertBelow",addTo:function(e){return e._insertItem(Y,this)},copyTo:function(e){return this.clone(!1).addTo(e)},reduce:function(e){var t=this._children;if(t&&t.length===1){var n=t[0].reduce(e);return this._parent?(n.insertAbove(this),this.remove()):n.remove(),n}return this},_removeNamed:function(){var e=this._getOwner();if(e){var t=e._children,n=e._namedChildren,r=this._name,s=n[r],u=s?s.indexOf(this):-1;u!==-1&&(t[r]==this&&delete t[r],s.splice(u,1),s.length?t[r]=s[0]:delete n[r])}},_remove:function(e,t){var n=this._getOwner(),r=this._project,s=this._index;return this._style&&this._style._dispose(),n?(this._name&&this._removeNamed(),s!=null&&(r._activeLayer===this&&(r._activeLayer=this.getNextSibling()||this.getPreviousSibling()),B.splice(n._children,null,s,1)),this._installEvents(!1),e&&r._changes&&this._changed(5),t&&n._changed(11,this),this._parent=null,!0):!1},remove:function(){return this._remove(!0,!0)},replaceWith:function(e){var t=e&&e.insertBelow(this);return t&&this.remove(),t},removeChildren:function(e,t){if(!this._children)return null;e=e||0,t=B.pick(t,this._children.length);for(var n=B.splice(this._children,null,e,t-e),r=n.length-1;r>=0;r--)n[r]._remove(!0,!1);return n.length>0&&this._changed(11),n},clear:"#removeChildren",reverseChildren:function(){if(this._children){this._children.reverse();for(var e=0,t=this._children.length;e<t;e++)this._children[e]._index=e;this._changed(11)}},isEmpty:function(e){var t=this._children,n=t?t.length:0;if(e){for(var r=0;r<n;r++)if(!t[r].isEmpty(e))return!1;return!0}return!n},isEditable:function(){for(var e=this;e;){if(!e._visible||e._locked)return!1;e=e._parent}return!0},hasFill:function(){return this.getStyle().hasFill()},hasStroke:function(){return this.getStyle().hasStroke()},hasShadow:function(){return this.getStyle().hasShadow()},_getOrder:function(e){function t(h){var o=[];do o.unshift(h);while(h=h._parent);return o}for(var n=t(this),r=t(e),s=0,u=Math.min(n.length,r.length);s<u;s++)if(n[s]!=r[s])return n[s]._index<r[s]._index?1:-1;return 0},hasChildren:function(){return this._children&&this._children.length>0},isInserted:function(){return this._parent?this._parent.isInserted():!1},isAbove:function(e){return this._getOrder(e)===-1},isBelow:function(e){return this._getOrder(e)===1},isParent:function(e){return this._parent===e},isChild:function(e){return e&&e._parent===this},isDescendant:function(e){for(var t=this;t=t._parent;)if(t===e)return!0;return!1},isAncestor:function(e){return e?e.isDescendant(this):!1},isSibling:function(e){return this._parent===e._parent},isGroupedWith:function(e){for(var t=this._parent;t;){if(t._parent&&/^(Group|Layer|CompoundPath)$/.test(t._class)&&e.isDescendant(t))return!0;t=t._parent}return!1}},B.each(["rotate","scale","shear","skew"],function(e){var t=e==="rotate";this[e]=function(){var n=arguments,r=(t?B:D).read(n),s=D.read(n,0,{readNull:!0});return this.transform(new be()[e](r,s||this.getPosition(!0)))}},{translate:function(){var e=new be;return this.transform(e.translate.apply(e,arguments))},transform:function(e,t,n){var r=this._matrix,s=e&&!e.isIdentity(),u=n&&this._canApplyMatrix||this._applyMatrix&&(s||!r.isIdentity()||t&&this._children);if(!s&&!u)return this;if(s){!e.isInvertible()&&r.isInvertible()&&(r._backup=r.getValues()),r.prepend(e,!0);var h=this._style,o=h.getFillColor(!0),l=h.getStrokeColor(!0);o&&o.transform(e),l&&l.transform(e)}if(u&&(u=this._transformContent(r,t,n))){var f=this._pivot;f&&r._transformPoint(f,f,!0),r.reset(!0),n&&this._canApplyMatrix&&(this._applyMatrix=!0)}var _=this._bounds,v=this._position;(s||u)&&this._changed(25);var g=s&&_&&e.decompose();if(g&&g.skewing.isZero()&&g.rotation%90===0){for(var p in _){var w=_[p];if(w.nonscaling)delete _[p];else if(u||!w.internal){var m=w.rect;e._transformBounds(m,m)}}this._bounds=_;var k=_[this._getBoundsCacheKey(this._boundsOptions||{})];k&&(this._position=this._getPositionFromBounds(k.rect))}else s&&v&&this._pivot&&(this._position=e._transformPoint(v,v));return this},_transformContent:function(e,t,n){var r=this._children;if(r){for(var s=0,u=r.length;s<u;s++)r[s].transform(e,t,n);return!0}},globalToLocal:function(){return this.getGlobalMatrix(!0)._inverseTransform(D.read(arguments))},localToGlobal:function(){return this.getGlobalMatrix(!0)._transformPoint(D.read(arguments))},parentToLocal:function(){return this._matrix._inverseTransform(D.read(arguments))},localToParent:function(){return this._matrix._transformPoint(D.read(arguments))},fitBounds:function(e,t){e=le.read(arguments);var n=this.getBounds(),r=n.height/n.width,s=e.height/e.width,u=(t?r>s:r<s)?e.width/n.width:e.height/n.height,h=new le(new D,new oe(n.width*u,n.height*u));h.setCenter(e.getCenter()),this.setBounds(h)}}),{_setStyles:function(e,t,n){var r=this._style,s=this._matrix;if(r.hasFill()&&(e.fillStyle=r.getFillColor().toCanvasStyle(e,s)),r.hasStroke()){e.strokeStyle=r.getStrokeColor().toCanvasStyle(e,s),e.lineWidth=r.getStrokeWidth();var u=r.getStrokeJoin(),h=r.getStrokeCap(),o=r.getMiterLimit();if(u&&(e.lineJoin=u),h&&(e.lineCap=h),o&&(e.miterLimit=o),he.support.nativeDash){var l=r.getDashArray(),f=r.getDashOffset();l&&l.length&&("setLineDash"in e?(e.setLineDash(l),e.lineDashOffset=f):(e.mozDash=l,e.mozDashOffset=f))}}if(r.hasShadow()){var _=t.pixelRatio||1,v=n._shiftless().prepend(new be().scale(_,_)),g=v.transform(new D(r.getShadowBlur(),0)),p=v.transform(this.getShadowOffset());e.shadowColor=r.getShadowColor().toCanvasStyle(e),e.shadowBlur=g.getLength(),e.shadowOffsetX=p.x,e.shadowOffsetY=p.y}},draw:function(e,t,n){if(this._updateVersion=this._project._updateVersion,!(!this._visible||this._opacity===0)){var r=t.matrices,s=t.viewMatrix,u=this._matrix,h=r[r.length-1].appended(u);if(h.isInvertible()){s=s?s.appended(h):h,r.push(h),t.updateMatrix&&(this._globalMatrix=h);var o=this._blendMode,l=Ae.clamp(this._opacity,0,1),f=o==="normal",_=si.nativeModes[o],v=f&&l===1||t.dontStart||t.clip||(_||f&&l<1)&&this._canComposite(),g=t.pixelRatio||1,p,w,m;if(!v){var k=this.getStrokeBounds(s);if(!k.width||!k.height){r.pop();return}m=t.offset,w=t.offset=k.getTopLeft().floor(),p=e,e=Me.getContext(k.getSize().ceil().add(1).multiply(g)),g!==1&&e.scale(g,g)}e.save();var d=n?n.appended(u):this._canScaleStroke&&!this.getStrokeScaling(!0)&&s,y=!v&&t.clipItem,c=!d||y;if(v?(e.globalAlpha=l,_&&(e.globalCompositeOperation=o)):c&&e.translate(-w.x,-w.y),c&&(v?u:s).applyToContext(e),y&&t.clipItem.draw(e,t.extend({clip:!0})),d){e.setTransform(g,0,0,g,0,0);var b=t.offset;b&&e.translate(-b.x,-b.y)}this._draw(e,t,s,d),e.restore(),r.pop(),t.clip&&!t.dontFinish&&e.clip(this.getFillRule()),v||(si.process(o,e,p,l,w.subtract(m).multiply(g)),Me.release(e),t.offset=m)}}},_isUpdated:function(e){var t=this._parent;if(t instanceof mt)return t._isUpdated(e);var n=this._updateVersion===e;return!n&&t&&t._visible&&t._isUpdated(e)&&(this._updateVersion=e,n=!0),n},_drawSelection:function(e,t,n,r,s){var u=this._selection,h=u&1,o=u&2||h&&this._selectBounds,l=u&4;if(this._drawSelected||(h=!1),(h||o||l)&&this._isUpdated(s)){var f,_=this.getSelectedColor(!0)||(f=this.getLayer())&&f.getSelectedColor(!0),v=t.appended(this.getGlobalMatrix(!0)),g=n/2;if(e.strokeStyle=e.fillStyle=_?_.toCanvasStyle(e):"#009dec",h&&this._drawSelected(e,v,r),l){var p=this.getPosition(!0),w=this._parent,m=w?w.localToGlobal(p):p,k=m.x,d=m.y;e.beginPath(),e.arc(k,d,g,0,Math.PI*2,!0),e.stroke();for(var y=[[0,-1],[1,0],[0,1],[-1,0]],c=g,b=n+1,S=0;S<4;S++){var P=y[S],C=P[0],E=P[1];e.moveTo(k+C*c,d+E*c),e.lineTo(k+C*b,d+E*b),e.stroke()}}if(o){var L=v._transformCorners(this.getInternalBounds());e.beginPath();for(var S=0;S<8;S++)e[S?"lineTo":"moveTo"](L[S],L[++S]);e.closePath(),e.stroke();for(var S=0;S<8;S++)e.fillRect(L[S]-g,L[++S]-g,n,n)}}},_canComposite:function(){return!1}},B.each(["down","drag","up","move"],function(e){this["removeOn"+B.capitalize(e)]=function(){var t={};return t[e]=!0,this.removeOn(t)}},{removeOn:function(e){for(var t in e)if(e[t]){var n="mouse"+t,r=this._project,s=r._removeSets=r._removeSets||{};s[n]=s[n]||{},s[n][this._id]=this}return this}}),{tween:function(e,t,n){n||(n=t,t=e,e=null,n||(n=t,t=null));var r=n&&n.easing,s=n&&n.start,u=n!=null&&(typeof n=="number"?n:n.duration),h=new ni(this,e,t,u,r,s);function o(l){h._handleFrame(l.time*1e3),h.running||this.off("frame",o)}return u&&this.on("frame",o),h},tweenTo:function(e,t){return this.tween(null,e,t)},tweenFrom:function(e,t){return this.tween(e,null,t)}}),De=A.extend({_class:"Group",_selectBounds:!1,_selectChildren:!0,_serializeFields:{children:[]},initialize:function(t){this._children=[],this._namedChildren={},this._initialize(t)||this.addChildren(Array.isArray(t)?t:arguments)},_changed:function e(t){e.base.call(this,t),t&2050&&(this._clipItem=Y)},_getClipItem:function(){var e=this._clipItem;if(e===Y){e=null;for(var t=this._children,n=0,r=t.length;n<r;n++)if(t[n]._clipMask){e=t[n];break}this._clipItem=e}return e},isClipped:function(){return!!this._getClipItem()},setClipped:function(e){var t=this.getFirstChild();t&&t.setClipMask(e)},_getBounds:function e(t,n){var r=this._getClipItem();return r?r._getCachedBounds(r._matrix.prepended(t),B.set({},n,{stroke:!1})):e.base.call(this,t,n)},_hitTestChildren:function e(t,n,r){var s=this._getClipItem();return(!s||s.contains(t))&&e.base.call(this,t,n,r,s)},_draw:function(e,t){var n=t.clip,r=!n&&this._getClipItem();t=t.extend({clipItem:r,clip:!1}),n?(e.beginPath(),t.dontStart=t.dontFinish=!0):r&&r.draw(e,t.extend({clip:!0}));for(var s=this._children,u=0,h=s.length;u<h;u++){var o=s[u];o!==r&&o.draw(e,t)}}}),Tt=De.extend({_class:"Layer",initialize:function(){De.apply(this,arguments)},_getOwner:function(){return this._parent||this._index!=null&&this._project},isInserted:function e(){return this._parent?e.base.call(this):this._index!=null},activate:function(){this._project._activeLayer=this},_hitTestSelf:function(){}}),Xe=A.extend({_class:"Shape",_applyMatrix:!1,_canApplyMatrix:!1,_canScaleStroke:!0,_serializeFields:{type:null,size:null,radius:null},initialize:function(t,n){this._initialize(t,n)},_equals:function(e){return this._type===e._type&&this._size.equals(e._size)&&B.equals(this._radius,e._radius)},copyContent:function(e){this.setType(e._type),this.setSize(e._size),this.setRadius(e._radius)},getType:function(){return this._type},setType:function(e){this._type=e},getShape:"#getType",setShape:"#setType",getSize:function(){var e=this._size;return new Ce(e.width,e.height,this,"setSize")},setSize:function(){var e=oe.read(arguments);if(!this._size)this._size=e.clone();else if(!this._size.equals(e)){var t=this._type,n=e.width,r=e.height;t==="rectangle"?this._radius.set(oe.min(this._radius,e.divide(2).abs())):t==="circle"?(n=r=(n+r)/2,this._radius=n/2):t==="ellipse"&&this._radius._set(n/2,r/2),this._size._set(n,r),this._changed(9)}},getRadius:function(){var e=this._radius;return this._type==="circle"?e:new Ce(e.width,e.height,this,"setRadius")},setRadius:function(e){var t=this._type;if(t==="circle"){if(e===this._radius)return;var n=e*2;this._radius=e,this._size._set(n,n)}else if(e=oe.read(arguments),!this._radius)this._radius=e.clone();else{if(this._radius.equals(e))return;if(this._radius.set(e),t==="rectangle"){var n=oe.max(this._size,e.multiply(2));this._size.set(n)}else t==="ellipse"&&this._size._set(e.width*2,e.height*2)}this._changed(9)},isEmpty:function(){return!1},toPath:function(e){var t=new we[B.capitalize(this._type)]({center:new D,size:this._size,radius:this._radius,insert:!1});return t.copyAttributes(this),he.settings.applyMatrix&&t.setApplyMatrix(!0),(e===Y||e)&&t.insertAbove(this),t},toShape:"#clone",_asPathItem:function(){return this.toPath(!1)},_draw:function(e,t,n,r){var s=this._style,u=s.hasFill(),h=s.hasStroke(),o=t.dontFinish||t.clip,l=!r;if(u||h||o){var f=this._type,_=this._radius,v=f==="circle";if(t.dontStart||e.beginPath(),l&&v)e.arc(0,0,_,0,Math.PI*2,!0);else{var g=v?_:_.width,p=v?_:_.height,w=this._size,m=w.width,k=w.height;if(l&&f==="rectangle"&&g===0&&p===0)e.rect(-m/2,-k/2,m,k);else{var d=m/2,y=k/2,c=1-.5522847498307936,b=g*c,S=p*c,P=[-d,-y+p,-d,-y+S,-d+b,-y,-d+g,-y,d-g,-y,d-b,-y,d,-y+S,d,-y+p,d,y-p,d,y-S,d-b,y,d-g,y,-d+g,y,-d+b,y,-d,y-S,-d,y-p];r&&r.transform(P,P,32),e.moveTo(P[0],P[1]),e.bezierCurveTo(P[2],P[3],P[4],P[5],P[6],P[7]),d!==g&&e.lineTo(P[8],P[9]),e.bezierCurveTo(P[10],P[11],P[12],P[13],P[14],P[15]),y!==p&&e.lineTo(P[16],P[17]),e.bezierCurveTo(P[18],P[19],P[20],P[21],P[22],P[23]),d!==g&&e.lineTo(P[24],P[25]),e.bezierCurveTo(P[26],P[27],P[28],P[29],P[30],P[31])}}e.closePath()}!o&&(u||h)&&(this._setStyles(e,t,n),u&&(e.fill(s.getFillRule()),e.shadowColor="rgba(0,0,0,0)"),h&&e.stroke())},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_getBounds:function(e,t){var n=new le(this._size).setCenter(0,0),r=this._style,s=t.stroke&&r.hasStroke()&&r.getStrokeWidth();return e&&(n=e._transformBounds(n)),s?n.expand(we._getStrokePadding(s,this._getStrokeMatrix(e,t))):n}},new function(){function e(n,r,s){var u=n._radius;if(!u.isZero())for(var h=n._size.divide(2),o=1;o<=4;o++){var l=new D(o>1&&o<4?-1:1,o>2?-1:1),f=l.multiply(h),_=f.subtract(l.multiply(u)),v=new le(s?f.add(l.multiply(s)):f,_);if(v.contains(r))return{point:_,quadrant:o}}}function t(n,r,s,u){var h=n.divide(r);return(!u||h.isInQuadrant(u))&&h.subtract(h.normalize()).multiply(r).divide(s).length<=1}return{_contains:function n(r){if(this._type==="rectangle"){var s=e(this,r);return s?r.subtract(s.point).divide(this._radius).getLength()<=1:n.base.call(this,r)}else return r.divide(this.size).getLength()<=.5},_hitTestSelf:function n(r,s,u,h){var o=!1,l=this._style,f=s.stroke&&l.hasStroke(),_=s.fill&&l.hasFill();if(f||_){var v=this._type,g=this._radius,p=f?l.getStrokeWidth()/2:0,w=s._tolerancePadding.add(we._getStrokePadding(p,!l.getStrokeScaling()&&h));if(v==="rectangle"){var m=w.multiply(2),k=e(this,r,m);if(k)o=t(r.subtract(k.point),g,w,k.quadrant);else{var d=new le(this._size).setCenter(0,0),y=d.expand(m),c=d.expand(m.negate());o=y._containsPoint(r)&&!c._containsPoint(r)}}else o=t(r,g,w)}return o?new vt(f?"stroke":"fill",this):n.base.apply(this,arguments)}}},{statics:new function(){function e(t,n,r,s,u){var h=B.create(Xe.prototype);return h._type=t,h._size=r,h._radius=s,h._initialize(B.getNamed(u),n),h}return{Circle:function(){var t=arguments,n=D.readNamed(t,"center"),r=B.readNamed(t,"radius");return e("circle",n,new oe(r*2),r,t)},Rectangle:function(){var t=arguments,n=le.readNamed(t,"rectangle"),r=oe.min(oe.readNamed(t,"radius"),n.getSize(!0).divide(2));return e("rectangle",n.getCenter(!0),n.getSize(!0),r,t)},Ellipse:function(){var t=arguments,n=Xe._readEllipse(t),r=n.radius;return e("ellipse",n.center,r.multiply(2),r,t)},_readEllipse:function(t){var n,r;if(B.hasNamed(t,"radius"))n=D.readNamed(t,"center"),r=oe.readNamed(t,"radius");else{var s=le.readNamed(t,"rectangle");n=s.getCenter(!0),r=s.getSize(!0).divide(2)}return{center:n,radius:r}}}}}),Lt=A.extend({_class:"Raster",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!1,handle:!1},_serializeFields:{crossOrigin:null,source:null},_prioritize:["crossOrigin"],_smoothing:"low",beans:!0,initialize:function(t,n){if(!this._initialize(t,n!==Y&&D.read(arguments))){var r,s=typeof t,u=s==="string"?Te.getElementById(t):s==="object"?t:null;if(u&&u!==A.NO_INSERT){if(u.getContext||u.naturalHeight!=null)r=u;else if(u){var h=oe.read(arguments);h.isZero()||(r=Me.getCanvas(h))}}r?this.setImage(r):this.setSource(t)}this._size||(this._size=new oe,this._loaded=!1)},_equals:function(e){return this.getSource()===e.getSource()},copyContent:function(e){var t=e._image,n=e._canvas;if(t)this._setImage(t);else if(n){var r=Me.getCanvas(e._size);r.getContext("2d").drawImage(n,0,0),this._setImage(r)}this._crossOrigin=e._crossOrigin},getSize:function(){var e=this._size;return new Ce(e?e.width:0,e?e.height:0,this,"setSize")},setSize:function(e,t){var n=oe.read(arguments);if(n.equals(this._size))t&&this.clear();else if(n.width>0&&n.height>0){var r=!t&&this.getElement();this._setImage(Me.getCanvas(n)),r&&this.getContext(!0).drawImage(r,0,0,n.width,n.height)}else this._canvas&&Me.release(this._canvas),this._size=n.clone()},getWidth:function(){return this._size?this._size.width:0},setWidth:function(e){this.setSize(e,this.getHeight())},getHeight:function(){return this._size?this._size.height:0},setHeight:function(e){this.setSize(this.getWidth(),e)},getLoaded:function(){return this._loaded},isEmpty:function(){var e=this._size;return!e||e.width===0&&e.height===0},getResolution:function(){var e=this._matrix,t=new D(0,0).transform(e),n=new D(1,0).transform(e).subtract(t),r=new D(0,1).transform(e).subtract(t);return new oe(72/n.getLength(),72/r.getLength())},getPpi:"#getResolution",getImage:function(){return this._image},setImage:function(e){var t=this;function n(r){var s=t.getView(),u=r&&r.type||"load";s&&t.responds(u)&&(he=s._scope,t.emit(u,new Ut(r)))}this._setImage(e),this._loaded?setTimeout(n,0):e&&qe.add(e,{load:function(r){t._setImage(e),n(r)},error:n})},_setImage:function(e){this._canvas&&Me.release(this._canvas),e&&e.getContext?(this._image=null,this._canvas=e,this._loaded=!0):(this._image=e,this._canvas=null,this._loaded=!!(e&&e.src&&e.complete)),this._size=new oe(e?e.naturalWidth||e.width:0,e?e.naturalHeight||e.height:0),this._context=null,this._changed(1033)},getCanvas:function(){if(!this._canvas){var e=Me.getContext(this._size);try{this._image&&e.drawImage(this._image,0,0),this._canvas=e.canvas}catch{Me.release(e)}}return this._canvas},setCanvas:"#setImage",getContext:function(e){return this._context||(this._context=this.getCanvas().getContext("2d")),e&&(this._image=null,this._changed(1025)),this._context},setContext:function(e){this._context=e},getSource:function(){var e=this._image;return e&&e.src||this.toDataURL()},setSource:function(e){var t=new _t.Image,n=this._crossOrigin;n&&(t.crossOrigin=n),e&&(t.src=e),this.setImage(t)},getCrossOrigin:function(){var e=this._image;return e&&e.crossOrigin||this._crossOrigin||""},setCrossOrigin:function(e){this._crossOrigin=e;var t=this._image;t&&(t.crossOrigin=e)},getSmoothing:function(){return this._smoothing},setSmoothing:function(e){this._smoothing=typeof e=="string"?e:e?"low":"off",this._changed(257)},getElement:function(){return this._canvas||this._loaded&&this._image}},{beans:!1,getSubCanvas:function(){var e=le.read(arguments),t=Me.getContext(e.getSize());return t.drawImage(this.getCanvas(),e.x,e.y,e.width,e.height,0,0,e.width,e.height),t.canvas},getSubRaster:function(){var e=le.read(arguments),t=new Lt(A.NO_INSERT);return t._setImage(this.getSubCanvas(e)),t.translate(e.getCenter().subtract(this.getSize().divide(2))),t._matrix.prepend(this._matrix),t.insertAbove(this),t},toDataURL:function(){var e=this._image,t=e&&e.src;if(/^data:/.test(t))return t;var n=this.getCanvas();return n?n.toDataURL.apply(n,arguments):null},drawImage:function(e){var t=D.read(arguments,1);this.getContext(!0).drawImage(e,t.x,t.y)},getAverageColor:function(e){var t,n;if(e?e instanceof ot?(n=e,t=e.getBounds()):typeof e=="object"&&("width"in e?t=new le(e):"x"in e&&(t=new le(e.x-.5,e.y-.5,1,1))):t=this.getBounds(),!t)return null;var r=32,s=Math.min(t.width,r),u=Math.min(t.height,r),h=Lt._sampleContext;h?h.clearRect(0,0,r+1,r+1):h=Lt._sampleContext=Me.getContext(new oe(r)),h.save();var o=new be().scale(s/t.width,u/t.height).translate(-t.x,-t.y);o.applyToContext(h),n&&n.draw(h,new B({clip:!0,matrices:[o]})),this._matrix.applyToContext(h);var l=this.getElement(),f=this._size;l&&h.drawImage(l,-f.width/2,-f.height/2),h.restore();for(var _=h.getImageData(.5,.5,Math.ceil(s),Math.ceil(u)).data,v=[0,0,0],g=0,p=0,w=_.length;p<w;p+=4){var m=_[p+3];g+=m,m/=255,v[0]+=_[p]*m,v[1]+=_[p+1]*m,v[2]+=_[p+2]*m}for(var p=0;p<3;p++)v[p]/=g;return g?Ge.read(v):null},getPixel:function(){var e=D.read(arguments),t=this.getContext().getImageData(e.x,e.y,1,1).data;return new Ge("rgb",[t[0]/255,t[1]/255,t[2]/255],t[3]/255)},setPixel:function(){var e=arguments,t=D.read(e),n=Ge.read(e),r=n._convert("rgb"),s=n._alpha,u=this.getContext(!0),h=u.createImageData(1,1),o=h.data;o[0]=r[0]*255,o[1]=r[1]*255,o[2]=r[2]*255,o[3]=s!=null?s*255:255,u.putImageData(h,t.x,t.y)},clear:function(){var e=this._size;this.getContext(!0).clearRect(0,0,e.width+1,e.height+1)},createImageData:function(){var e=oe.read(arguments);return this.getContext().createImageData(e.width,e.height)},getImageData:function(){var e=le.read(arguments);return e.isEmpty()&&(e=new le(this._size)),this.getContext().getImageData(e.x,e.y,e.width,e.height)},putImageData:function(e){var t=D.read(arguments,1);this.getContext(!0).putImageData(e,t.x,t.y)},setImageData:function(e){this.setSize(e),this.getContext(!0).putImageData(e,0,0)},_getBounds:function(e,t){var n=new le(this._size).setCenter(0,0);return e?e._transformBounds(n):n},_hitTestSelf:function(e){if(this._contains(e)){var t=this;return new vt("pixel",t,{offset:e.add(t._size.divide(2)).round(),color:{get:function(){return t.getPixel(this.offset)}}})}},_draw:function(e,t,n){var r=this.getElement();if(r&&r.width>0&&r.height>0){e.globalAlpha=Ae.clamp(this._opacity,0,1),this._setStyles(e,t,n);var s=this._smoothing,u=s==="off";Re.setPrefixed(e,u?"imageSmoothingEnabled":"imageSmoothingQuality",u?!1:s),e.drawImage(r,-this._size.width/2,-this._size.height/2)}},_canComposite:function(){return!0}}),Dt=A.extend({_class:"SymbolItem",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!0},_serializeFields:{symbol:null},initialize:function(t,n){this._initialize(t,n!==Y&&D.read(arguments,1))||this.setDefinition(t instanceof Qe?t:new Qe(t))},_equals:function(e){return this._definition===e._definition},copyContent:function(e){this.setDefinition(e._definition)},getDefinition:function(){return this._definition},setDefinition:function(e){this._definition=e,this._changed(9)},getSymbol:"#getDefinition",setSymbol:"#setDefinition",isEmpty:function(){return this._definition._item.isEmpty()},_getBounds:function(e,t){var n=this._definition._item;return n._getCachedBounds(n._matrix.prepended(e),t)},_hitTestSelf:function(e,t,n){var r=t.extend({all:!1}),s=this._definition._item._hitTest(e,r,n);return s&&(s.item=this),s},_draw:function(e,t){this._definition._item.draw(e,t)}}),Qe=B.extend({_class:"SymbolDefinition",initialize:function(t,n){this._id=ei.get(),this.project=he.project,t&&this.setItem(t,n)},_serialize:function(e,t){return t.add(this,function(){return B.serialize([this._class,this._item],e,!1,t)})},_changed:function(e){e&8&&A._clearBoundsCache(this),e&1&&this.project._changed(e)},getItem:function(){return this._item},setItem:function(e,t){e._symbol&&(e=e.clone()),this._item&&(this._item._symbol=null),this._item=e,e.remove(),e.setSelected(!1),t||e.setPosition(new D),e._symbol=this,this._changed(9)},getDefinition:"#getItem",setDefinition:"#setItem",place:function(e){return new Dt(this,e)},clone:function(){return new Qe(this._item.clone(!1))},equals:function(e){return e===this||e&&this._item.equals(e._item)||!1}}),vt=B.extend({_class:"HitResult",initialize:function(t,n,r){this.type=t,this.item=n,r&&this.inject(r)},statics:{getOptions:function(e){var t=e&&B.read(e);return new B({type:null,tolerance:he.settings.hitTolerance,fill:!t,stroke:!t,segments:!t,handles:!1,ends:!1,position:!1,center:!1,bounds:!1,guides:!1,selected:!1},t)}}}),de=B.extend({_class:"Segment",beans:!0,_selection:0,initialize:function(t,n,r,s,u,h){var o=arguments.length,l,f,_,v;o>0&&(t==null||typeof t=="object"?o===1&&t&&"point"in t?(l=t.point,f=t.handleIn,_=t.handleOut,v=t.selection):(l=t,f=n,_=r,v=s):(l=[t,n],f=r!==Y?[r,s]:null,_=u!==Y?[u,h]:null)),new ci(l,this,"_point"),new ci(f,this,"_handleIn"),new ci(_,this,"_handleOut"),v&&this.setSelection(v)},_serialize:function(e,t){var n=this._point,r=this._selection,s=r||this.hasHandles()?[n,this._handleIn,this._handleOut]:n;return r&&s.push(r),B.serialize(s,e,!0,t)},_changed:function(e){var t=this._path;if(t){var n=t._curves,r=this._index,s;n&&((!e||e===this._point||e===this._handleIn)&&(s=r>0?n[r-1]:t._closed?n[n.length-1]:null)&&s._changed(),(!e||e===this._point||e===this._handleOut)&&(s=n[r])&&s._changed()),t._changed(41)}},getPoint:function(){return this._point},setPoint:function(){this._point.set(D.read(arguments))},getHandleIn:function(){return this._handleIn},setHandleIn:function(){this._handleIn.set(D.read(arguments))},getHandleOut:function(){return this._handleOut},setHandleOut:function(){this._handleOut.set(D.read(arguments))},hasHandles:function(){return!this._handleIn.isZero()||!this._handleOut.isZero()},isSmooth:function(){var e=this._handleIn,t=this._handleOut;return!e.isZero()&&!t.isZero()&&e.isCollinear(t)},clearHandles:function(){this._handleIn._set(0,0),this._handleOut._set(0,0)},getSelection:function(){return this._selection},setSelection:function(e){var t=this._selection,n=this._path;this._selection=e=e||0,n&&e!==t&&(n._updateSelection(this,t,e),n._changed(257))},_changeSelection:function(e,t){var n=this._selection;this.setSelection(t?n|e:n&~e)},isSelected:function(){return!!(this._selection&7)},setSelected:function(e){this._changeSelection(7,e)},getIndex:function(){return this._index!==Y?this._index:null},getPath:function(){return this._path||null},getCurve:function(){var e=this._path,t=this._index;return e?(t>0&&!e._closed&&t===e._segments.length-1&&t--,e.getCurves()[t]||null):null},getLocation:function(){var e=this.getCurve();return e?new dt(e,this===e._segment1?0:1):null},getNext:function(){var e=this._path&&this._path._segments;return e&&(e[this._index+1]||this._path._closed&&e[0])||null},smooth:function(e,t,n){var r=e||{},s=r.type,u=r.factor,h=this.getPrevious(),o=this.getNext(),l=(h||this)._point,f=this._point,_=(o||this)._point,v=l.getDistance(f),g=f.getDistance(_);if(!s||s==="catmull-rom"){var p=u===Y?.5:u,w=Math.pow(v,p),m=w*w,k=Math.pow(g,p),d=k*k;if(!t&&h){var y=2*d+3*k*w+m,c=3*k*(k+w);this.setHandleIn(c!==0?new D((d*l._x+y*f._x-m*_._x)/c-f._x,(d*l._y+y*f._y-m*_._y)/c-f._y):new D)}if(!n&&o){var y=2*m+3*w*k+d,c=3*w*(w+k);this.setHandleOut(c!==0?new D((m*_._x+y*f._x-d*l._x)/c-f._x,(m*_._y+y*f._y-d*l._y)/c-f._y):new D)}}else if(s==="geometric"){if(h&&o){var b=l.subtract(_),S=u===Y?.4:u,P=S*v/(v+g);t||this.setHandleIn(b.multiply(P)),n||this.setHandleOut(b.multiply(P-S))}}else throw new Error("Smoothing method '"+s+"' not supported.")},getPrevious:function(){var e=this._path&&this._path._segments;return e&&(e[this._index-1]||this._path._closed&&e[e.length-1])||null},isFirst:function(){return!this._index},isLast:function(){var e=this._path;return e&&this._index===e._segments.length-1||!1},reverse:function(){var e=this._handleIn,t=this._handleOut,n=e.clone();e.set(t),t.set(n)},reversed:function(){return new de(this._point,this._handleOut,this._handleIn)},remove:function(){return this._path?!!this._path.removeSegment(this._index):!1},clone:function(){return new de(this._point,this._handleIn,this._handleOut)},equals:function(e){return e===this||e&&this._class===e._class&&this._point.equals(e._point)&&this._handleIn.equals(e._handleIn)&&this._handleOut.equals(e._handleOut)||!1},toString:function(){var e=["point: "+this._point];return this._handleIn.isZero()||e.push("handleIn: "+this._handleIn),this._handleOut.isZero()||e.push("handleOut: "+this._handleOut),"{ "+e.join(", ")+" }"},transform:function(e){this._transformCoordinates(e,new Array(6),!0),this._changed()},interpolate:function(e,t,n){var r=1-n,s=n,u=e._point,h=t._point,o=e._handleIn,l=t._handleIn,f=t._handleOut,_=e._handleOut;this._point._set(r*u._x+s*h._x,r*u._y+s*h._y,!0),this._handleIn._set(r*o._x+s*l._x,r*o._y+s*l._y,!0),this._handleOut._set(r*_._x+s*f._x,r*_._y+s*f._y,!0),this._changed()},_transformCoordinates:function(e,t,n){var r=this._point,s=!n||!this._handleIn.isZero()?this._handleIn:null,u=!n||!this._handleOut.isZero()?this._handleOut:null,h=r._x,o=r._y,l=2;return t[0]=h,t[1]=o,s&&(t[l++]=s._x+h,t[l++]=s._y+o),u&&(t[l++]=u._x+h,t[l++]=u._y+o),e&&(e._transformCoordinates(t,t,l/2),h=t[0],o=t[1],n?(r._x=h,r._y=o,l=2,s&&(s._x=t[l++]-h,s._y=t[l++]-o),u&&(u._x=t[l++]-h,u._y=t[l++]-o)):(s||(t[l++]=h,t[l++]=o),u||(t[l++]=h,t[l++]=o))),t}}),ci=D.extend({initialize:function(t,n,r){var s,u,h;if(!t)s=u=0;else if((s=t[0])!==Y)u=t[1];else{var o=t;(s=o.x)===Y&&(o=D.read(arguments),s=o.x),u=o.y,h=o.selected}this._x=s,this._y=u,this._owner=n,n[r]=this,h&&this.setSelected(!0)},_set:function(e,t){return this._x=e,this._y=t,this._owner._changed(this),this},getX:function(){return this._x},setX:function(e){this._x=e,this._owner._changed(this)},getY:function(){return this._y},setY:function(e){this._y=e,this._owner._changed(this)},isZero:function(){var e=Ae.isZero;return e(this._x)&&e(this._y)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(e){this._owner._changeSelection(this._getSelection(),e)},_getSelection:function(){var e=this._owner;return this===e._point?1:this===e._handleIn?2:this===e._handleOut?4:0}}),te=B.extend({_class:"Curve",beans:!0,initialize:function(t,n,r,s,u,h,o,l){var f=arguments.length,_,v,g,p,w,m;f===3?(this._path=t,_=n,v=r):f?f===1?"segment1"in t?(_=new de(t.segment1),v=new de(t.segment2)):"point1"in t?(g=t.point1,w=t.handle1,m=t.handle2,p=t.point2):Array.isArray(t)&&(g=[t[0],t[1]],p=[t[6],t[7]],w=[t[2]-t[0],t[3]-t[1]],m=[t[4]-t[6],t[5]-t[7]]):f===2?(_=new de(t),v=new de(n)):f===4?(g=t,w=n,m=r,p=s):f===8&&(g=[t,n],p=[o,l],w=[r-t,s-n],m=[u-o,h-l]):(_=new de,v=new de),this._segment1=_||new de(g,null,w),this._segment2=v||new de(p,m,null)},_serialize:function(e,t){return B.serialize(this.hasHandles()?[this.getPoint1(),this.getHandle1(),this.getHandle2(),this.getPoint2()]:[this.getPoint1(),this.getPoint2()],e,!0,t)},_changed:function(){this._length=this._bounds=Y},clone:function(){return new te(this._segment1,this._segment2)},toString:function(){var e=["point1: "+this._segment1._point];return this._segment1._handleOut.isZero()||e.push("handle1: "+this._segment1._handleOut),this._segment2._handleIn.isZero()||e.push("handle2: "+this._segment2._handleIn),e.push("point2: "+this._segment2._point),"{ "+e.join(", ")+" }"},classify:function(){return te.classify(this.getValues())},remove:function(){var e=!1;if(this._path){var t=this._segment2,n=t._handleOut;e=t.remove(),e&&this._segment1._handleOut.set(n)}return e},getPoint1:function(){return this._segment1._point},setPoint1:function(){this._segment1._point.set(D.read(arguments))},getPoint2:function(){return this._segment2._point},setPoint2:function(){this._segment2._point.set(D.read(arguments))},getHandle1:function(){return this._segment1._handleOut},setHandle1:function(){this._segment1._handleOut.set(D.read(arguments))},getHandle2:function(){return this._segment2._handleIn},setHandle2:function(){this._segment2._handleIn.set(D.read(arguments))},getSegment1:function(){return this._segment1},getSegment2:function(){return this._segment2},getPath:function(){return this._path},getIndex:function(){return this._segment1._index},getNext:function(){var e=this._path&&this._path._curves;return e&&(e[this._segment1._index+1]||this._path._closed&&e[0])||null},getPrevious:function(){var e=this._path&&this._path._curves;return e&&(e[this._segment1._index-1]||this._path._closed&&e[e.length-1])||null},isFirst:function(){return!this._segment1._index},isLast:function(){var e=this._path;return e&&this._segment1._index===e._curves.length-1||!1},isSelected:function(){return this.getPoint1().isSelected()&&this.getHandle1().isSelected()&&this.getHandle2().isSelected()&&this.getPoint2().isSelected()},setSelected:function(e){this.getPoint1().setSelected(e),this.getHandle1().setSelected(e),this.getHandle2().setSelected(e),this.getPoint2().setSelected(e)},getValues:function(e){return te.getValues(this._segment1,this._segment2,e)},getPoints:function(){for(var e=this.getValues(),t=[],n=0;n<8;n+=2)t.push(new D(e[n],e[n+1]));return t}},{getLength:function(){return this._length==null&&(this._length=te.getLength(this.getValues(),0,1)),this._length},getArea:function(){return te.getArea(this.getValues())},getLine:function(){return new Ke(this._segment1._point,this._segment2._point)},getPart:function(e,t){return new te(te.getPart(this.getValues(),e,t))},getPartLength:function(e,t){return te.getLength(this.getValues(),e,t)},divideAt:function(e){return this.divideAtTime(e&&e.curve===this?e.time:this.getTimeAt(e))},divideAtTime:function(e,t){var n=1e-8,r=1-n,s=null;if(e>=n&&e<=r){var u=te.subdivide(this.getValues(),e),h=u[0],o=u[1],l=t||this.hasHandles(),f=this._segment1,_=this._segment2,v=this._path;l&&(f._handleOut._set(h[2]-h[0],h[3]-h[1]),_._handleIn._set(o[4]-o[6],o[5]-o[7]));var g=h[6],p=h[7],w=new de(new D(g,p),l&&new D(h[4]-g,h[5]-p),l&&new D(o[2]-g,o[3]-p));v?(v.insert(f._index+1,w),s=this.getNext()):(this._segment2=w,this._changed(),s=new te(w,_))}return s},splitAt:function(e){var t=this._path;return t?t.splitAt(e):null},splitAtTime:function(e){return this.splitAt(this.getLocationAtTime(e))},divide:function(e,t){return this.divideAtTime(e===Y?.5:t?e:this.getTimeAt(e))},split:function(e,t){return this.splitAtTime(e===Y?.5:t?e:this.getTimeAt(e))},reversed:function(){return new te(this._segment2.reversed(),this._segment1.reversed())},clearHandles:function(){this._segment1._handleOut._set(0,0),this._segment2._handleIn._set(0,0)},statics:{getValues:function(e,t,n,r){var s=e._point,u=e._handleOut,h=t._handleIn,o=t._point,l=s.x,f=s.y,_=o.x,v=o.y,g=r?[l,f,l,f,_,v,_,v]:[l,f,l+u._x,f+u._y,_+h._x,v+h._y,_,v];return n&&n._transformCoordinates(g,g,4),g},subdivide:function(e,t){var n=e[0],r=e[1],s=e[2],u=e[3],h=e[4],o=e[5],l=e[6],f=e[7];t===Y&&(t=.5);var _=1-t,v=_*n+t*s,g=_*r+t*u,p=_*s+t*h,w=_*u+t*o,m=_*h+t*l,k=_*o+t*f,d=_*v+t*p,y=_*g+t*w,c=_*p+t*m,b=_*w+t*k,S=_*d+t*c,P=_*y+t*b;return[[n,r,v,g,d,y,S,P],[S,P,c,b,m,k,l,f]]},getMonoCurves:function(e,t){var n=[],r=t?0:1,s=e[r+0],u=e[r+2],h=e[r+4],o=e[r+6];if(s>=u==u>=h&&u>=h==h>=o||te.isStraight(e))n.push(e);else{var l=3*(u-h)-s+o,f=2*(s+h)-4*u,_=u-s,v=1e-8,g=1-v,p=[],w=Ae.solveQuadratic(l,f,_,p,v,g);if(!w)n.push(e);else{p.sort();var m=p[0],k=te.subdivide(e,m);n.push(k[0]),w>1&&(m=(p[1]-m)/(1-m),k=te.subdivide(k[1],m),n.push(k[0])),n.push(k[1])}}return n},solveCubic:function(e,t,n,r,s,u){var h=e[t],o=e[t+2],l=e[t+4],f=e[t+6],_=0;if(!(h<n&&f<n&&o<n&&l<n||h>n&&f>n&&o>n&&l>n)){var v=3*(o-h),g=3*(l-o)-v,p=f-h-v-g;_=Ae.solveCubic(p,g,v,h-n,r,s,u)}return _},getTimeOf:function(e,t){var n=new D(e[0],e[1]),r=new D(e[6],e[7]),s=1e-12,u=1e-7,h=t.isClose(n,s)?0:t.isClose(r,s)?1:null;if(h===null)for(var o=[t.x,t.y],l=[],f=0;f<2;f++)for(var _=te.solveCubic(e,f,o[f],l,0,1),v=0;v<_;v++){var g=l[v];if(t.isClose(te.getPoint(e,g),u))return g}return t.isClose(n,u)?0:t.isClose(r,u)?1:null},getNearestTime:function(e,t){if(te.isStraight(e)){var n=e[0],r=e[1],s=e[6],u=e[7],h=s-n,o=u-r,l=h*h+o*o;if(l===0)return 0;var f=((t.x-n)*h+(t.y-r)*o)/l;return f<1e-12?0:f>.999999999999?1:te.getTimeOf(e,new D(n+f*h,r+f*o))}var _=100,v=1/0,g=0;function p(k){if(k>=0&&k<=1){var d=t.getDistance(te.getPoint(e,k),!0);if(d<v)return v=d,g=k,!0}}for(var w=0;w<=_;w++)p(w/_);for(var m=1/(_*2);m>1e-8;)!p(g-m)&&!p(g+m)&&(m/=2);return g},getPart:function(e,t,n){var r=t>n;if(r){var s=t;t=n,n=s}return t>0&&(e=te.subdivide(e,t)[1]),n<1&&(e=te.subdivide(e,(n-t)/(1-t))[0]),r?[e[6],e[7],e[4],e[5],e[2],e[3],e[0],e[1]]:e},isFlatEnough:function(e,t){var n=e[0],r=e[1],s=e[2],u=e[3],h=e[4],o=e[5],l=e[6],f=e[7],_=3*s-2*n-l,v=3*u-2*r-f,g=3*h-2*l-n,p=3*o-2*f-r;return Math.max(_*_,g*g)+Math.max(v*v,p*p)<=16*t*t},getArea:function(e){var t=e[0],n=e[1],r=e[2],s=e[3],u=e[4],h=e[5],o=e[6],l=e[7];return 3*((l-n)*(r+u)-(o-t)*(s+h)+s*(t-u)-r*(n-h)+l*(u+t/3)-o*(h+n/3))/20},getBounds:function(e){for(var t=e.slice(0,2),n=t.slice(),r=[0,0],s=0;s<2;s++)te._addBounds(e[s],e[s+2],e[s+4],e[s+6],s,0,t,n,r);return new le(t[0],t[1],n[0]-t[0],n[1]-t[1])},_addBounds:function(e,t,n,r,s,u,h,o,l){function f(S,P){var C=S-P,E=S+P;C<h[s]&&(h[s]=C),E>o[s]&&(o[s]=E)}u/=2;var _=h[s]+u,v=o[s]-u;if(e<_||t<_||n<_||r<_||e>v||t>v||n>v||r>v)if(t<e!=t<r&&n<e!=n<r)f(e,0),f(r,0);else{var g=3*(t-n)-e+r,p=2*(e+n)-4*t,w=t-e,m=Ae.solveQuadratic(g,p,w,l),k=1e-8,d=1-k;f(r,0);for(var y=0;y<m;y++){var c=l[y],b=1-c;k<=c&&c<=d&&f(b*b*b*e+3*b*b*c*t+3*b*c*c*n+c*c*c*r,u)}}}}},B.each(["getBounds","getStrokeBounds","getHandleBounds"],function(e){this[e]=function(){this._bounds||(this._bounds={});var t=this._bounds[e];return t||(t=this._bounds[e]=we[e]([this._segment1,this._segment2],!1,this._path)),t.clone()}},{}),B.each({isStraight:function(e,t,n,r){if(t.isZero()&&n.isZero())return!0;var s=r.subtract(e);if(s.isZero())return!1;if(s.isCollinear(t)&&s.isCollinear(n)){var u=new Ke(e,r),h=1e-7;if(u.getDistance(e.add(t))<h&&u.getDistance(r.add(n))<h){var o=s.dot(s),l=s.dot(t)/o,f=s.dot(n)/o;return l>=0&&l<=1&&f<=0&&f>=-1}}return!1},isLinear:function(e,t,n,r){var s=r.subtract(e).divide(3);return t.equals(s)&&n.negate().equals(s)}},function(e,t){this[t]=function(n){var r=this._segment1,s=this._segment2;return e(r._point,r._handleOut,s._handleIn,s._point,n)},this.statics[t]=function(n,r){var s=n[0],u=n[1],h=n[6],o=n[7];return e(new D(s,u),new D(n[2]-s,n[3]-u),new D(n[4]-h,n[5]-o),new D(h,o),r)}},{statics:{},hasHandles:function(){return!this._segment1._handleOut.isZero()||!this._segment2._handleIn.isZero()},hasLength:function(e){return(!this.getPoint1().equals(this.getPoint2())||this.hasHandles())&&this.getLength()>(e||0)},isCollinear:function(e){return e&&this.isStraight()&&e.isStraight()&&this.getLine().isCollinear(e.getLine())},isHorizontal:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).y)<1e-8},isVertical:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).x)<1e-8}}),{beans:!1,getLocationAt:function(e,t){return this.getLocationAtTime(t?e:this.getTimeAt(e))},getLocationAtTime:function(e){return e!=null&&e>=0&&e<=1?new dt(this,e):null},getTimeAt:function(e,t){return te.getTimeAt(this.getValues(),e,t)},getParameterAt:"#getTimeAt",getTimesWithTangent:function(){var e=D.read(arguments);return e.isZero()?[]:te.getTimesWithTangent(this.getValues(),e)},getOffsetAtTime:function(e){return this.getPartLength(0,e)},getLocationOf:function(){return this.getLocationAtTime(this.getTimeOf(D.read(arguments)))},getOffsetOf:function(){var e=this.getLocationOf.apply(this,arguments);return e?e.getOffset():null},getTimeOf:function(){return te.getTimeOf(this.getValues(),D.read(arguments))},getParameterOf:"#getTimeOf",getNearestLocation:function(){var e=D.read(arguments),t=this.getValues(),n=te.getNearestTime(t,e),r=te.getPoint(t,n);return new dt(this,n,r,null,e.getDistance(r))},getNearestPoint:function(){var e=this.getNearestLocation.apply(this,arguments);return e&&e.getPoint()}},new function(){var e=["getPoint","getTangent","getNormal","getWeightedTangent","getWeightedNormal","getCurvature"];return B.each(e,function(t){this[t+"At"]=function(n,r){var s=this.getValues();return te[t](s,r?n:te.getTimeAt(s,n))},this[t+"AtTime"]=function(n){return te[t](this.getValues(),n)}},{statics:{_evaluateMethods:e}})},new function(){function e(r){var s=r[0],u=r[1],h=r[2],o=r[3],l=r[4],f=r[5],_=r[6],v=r[7],g=9*(h-l)+3*(_-s),p=6*(s+l)-12*h,w=3*(h-s),m=9*(o-f)+3*(v-u),k=6*(u+f)-12*o,d=3*(o-u);return function(y){var c=(g*y+p)*y+w,b=(m*y+k)*y+d;return Math.sqrt(c*c+b*b)}}function t(r,s){return Math.max(2,Math.min(16,Math.ceil(Math.abs(s-r)*32)))}function n(r,s,u,h){if(s==null||s<0||s>1)return null;var o=r[0],l=r[1],f=r[2],_=r[3],v=r[4],g=r[5],p=r[6],w=r[7],m=Ae.isZero;m(f-o)&&m(_-l)&&(f=o,_=l),m(v-p)&&m(g-w)&&(v=p,g=w);var k=3*(f-o),d=3*(v-f)-k,y=p-o-k-d,c=3*(_-l),b=3*(g-_)-c,S=w-l-c-b,P,C;if(u===0)P=s===0?o:s===1?p:((y*s+d)*s+k)*s+o,C=s===0?l:s===1?w:((S*s+b)*s+c)*s+l;else{var E=1e-8,L=1-E;if(s<E?(P=k,C=c):s>L?(P=3*(p-v),C=3*(w-g)):(P=(3*y*s+2*d)*s+k,C=(3*S*s+2*b)*s+c),h){P===0&&C===0&&(s<E||s>L)&&(P=v-f,C=g-_);var O=Math.sqrt(P*P+C*C);O&&(P/=O,C/=O)}if(u===3){var v=6*y*s+2*d,g=6*S*s+2*b,V=Math.pow(P*P+C*C,3/2);P=V!==0?(P*g-C*v)/V:0,C=0}}return u===2?new D(C,-P):new D(P,C)}return{statics:{classify:function(r){var s=r[0],u=r[1],h=r[2],o=r[3],l=r[4],f=r[5],_=r[6],v=r[7],g=s*(v-f)+u*(l-_)+_*f-v*l,p=h*(u-v)+o*(_-s)+s*v-u*_,w=l*(o-u)+f*(s-h)+h*u-o*s,m=3*w,k=m-p,d=k-p+g,y=Math.sqrt(d*d+k*k+m*m),c=y!==0?1/y:0,b=Ae.isZero,S="serpentine";d*=c,k*=c,m*=c;function P(O,V,T){var R=V!==Y,F=R&&V>0&&V<1,q=R&&T>0&&T<1;return R&&(!(F||q)||O==="loop"&&!(F&&q))&&(O="arch",F=q=!1),{type:O,roots:F||q?F&&q?V<T?[V,T]:[T,V]:[F?V:T]:null}}if(b(d))return b(k)?P(b(m)?"line":"quadratic"):P(S,m/(3*k));var C=3*k*k-4*d*m;if(b(C))return P("cusp",k/(2*d));var E=C>0?Math.sqrt(C/3):Math.sqrt(-C),L=2*d;return P(C>0?S:"loop",(k+E)/L,(k-E)/L)},getLength:function(r,s,u,h){if(s===Y&&(s=0),u===Y&&(u=1),te.isStraight(r)){var o=r;u<1&&(o=te.subdivide(o,u)[0],s/=u),s>0&&(o=te.subdivide(o,s)[1]);var l=o[6]-o[0],f=o[7]-o[1];return Math.sqrt(l*l+f*f)}return Ae.integrate(h||e(r),s,u,t(s,u))},getTimeAt:function(r,s,u){if(u===Y&&(u=s<0?1:0),s===0)return u;var h=Math.abs,o=1e-12,l=s>0,f=l?u:0,_=l?1:u,v=e(r),g=te.getLength(r,f,_,v),p=h(s)-g;if(h(p)<o)return l?_:f;if(p>o)return null;var w=s/g,m=0;function k(d){return m+=Ae.integrate(v,u,d,t(u,d)),u=d,m-s}return Ae.findRoot(k,v,u+w,f,_,32,1e-12)},getPoint:function(r,s){return n(r,s,0,!1)},getTangent:function(r,s){return n(r,s,1,!0)},getWeightedTangent:function(r,s){return n(r,s,1,!1)},getNormal:function(r,s){return n(r,s,2,!0)},getWeightedNormal:function(r,s){return n(r,s,2,!1)},getCurvature:function(r,s){return n(r,s,3,!1).x},getPeaks:function(r){var s=r[0],u=r[1],h=r[2],o=r[3],l=r[4],f=r[5],_=r[6],v=r[7],g=-s+3*h-3*l+_,p=3*s-6*h+3*l,w=-3*s+3*h,m=-u+3*o-3*f+v,k=3*u-6*o+3*f,d=-3*u+3*o,y=1e-8,c=1-y,b=[];return Ae.solveCubic(9*(g*g+m*m),9*(g*p+k*m),2*(p*p+k*k)+3*(w*g+d*m),w*p+k*d,b,y,c),b.sort()}}}},new function(){function e(p,w,m,k,d,y,c){var b=!c&&m.getPrevious()===d,S=!c&&m!==d&&m.getNext()===d,P=1e-8,C=1-P;if(k!==null&&k>=(b?P:0)&&k<=(S?C:1)&&y!==null&&y>=(S?P:0)&&y<=(b?C:1)){var E=new dt(m,k,null,c),L=new dt(d,y,null,c);E._intersection=L,L._intersection=E,(!w||w(E))&&dt.insert(p,E,!0)}}function t(p,w,m,k,d,y,c,b,S,P,C,E,L){if(++S>=4096||++b>=40)return S;var O=1e-9,V=w[0],T=w[1],R=w[6],F=w[7],q=Ke.getSignedDistance,U=q(V,T,R,F,w[2],w[3]),G=q(V,T,R,F,w[4],w[5]),Q=U*G>0?3/4:4/9,J=Q*Math.min(0,U,G),ee=Q*Math.max(0,U,G),se=q(V,T,R,F,p[0],p[1]),Z=q(V,T,R,F,p[2],p[3]),K=q(V,T,R,F,p[4],p[5]),ie=q(V,T,R,F,p[6],p[7]),ue=n(se,Z,K,ie),ae=ue[0],ce=ue[1],fe,pe;if(U===0&&G===0&&se===0&&Z===0&&K===0&&ie===0||(fe=r(ae,ce,J,ee))==null||(pe=r(ae.reverse(),ce.reverse(),J,ee))==null)return S;var me=P+(C-P)*fe,_e=P+(C-P)*pe;if(Math.max(L-E,_e-me)<O){var re=(me+_e)/2,Oe=(E+L)/2;e(d,y,c?k:m,c?Oe:re,c?m:k,c?re:Oe)}else{p=te.getPart(p,fe,pe);var Je=L-E;if(pe-fe>.8)if(_e-me>Je){var Ue=te.subdivide(p,.5),re=(me+_e)/2;S=t(w,Ue[0],k,m,d,y,!c,b,S,E,L,me,re),S=t(w,Ue[1],k,m,d,y,!c,b,S,E,L,re,_e)}else{var Ue=te.subdivide(w,.5),Oe=(E+L)/2;S=t(Ue[0],p,k,m,d,y,!c,b,S,E,Oe,me,_e),S=t(Ue[1],p,k,m,d,y,!c,b,S,Oe,L,me,_e)}else Je===0||Je>=O?S=t(w,p,k,m,d,y,!c,b,S,E,L,me,_e):S=t(p,w,m,k,d,y,c,b,S,me,_e,E,L)}return S}function n(p,w,m,k){var d=[0,p],y=[1/3,w],c=[2/3,m],b=[1,k],S=w-(2*p+k)/3,P=m-(p+2*k)/3,C;if(S*P<0)C=[[d,y,b],[d,c,b]];else{var E=S/P;C=[E>=2?[d,y,b]:E<=.5?[d,c,b]:[d,y,c,b],[d,b]]}return(S||P)<0?C.reverse():C}function r(p,w,m,k){return p[0][1]<m?s(p,!0,m):w[0][1]>k?s(w,!1,k):p[0][0]}function s(p,w,m){for(var k=p[0][0],d=p[0][1],y=1,c=p.length;y<c;y++){var b=p[y][0],S=p[y][1];if(w?S>=m:S<=m)return S===m?b:k+(m-d)*(b-k)/(S-d);k=b,d=S}return null}function u(p,w,m,k,d){var y=Ae.isZero;if(y(k)&&y(d)){var c=te.getTimeOf(p,new D(w,m));return c===null?[]:[c]}for(var b=Math.atan2(-d,k),S=Math.sin(b),P=Math.cos(b),C=[],E=[],L=0;L<8;L+=2){var O=p[L]-w,V=p[L+1]-m;C.push(O*P-V*S,O*S+V*P)}return te.solveCubic(C,1,0,E,0,1),E}function h(p,w,m,k,d,y,c){for(var b=w[0],S=w[1],P=w[6],C=w[7],E=u(p,b,S,P-b,C-S),L=0,O=E.length;L<O;L++){var V=E[L],T=te.getPoint(p,V),R=te.getTimeOf(w,T);R!==null&&e(d,y,c?k:m,c?R:V,c?m:k,c?V:R)}}function o(p,w,m,k,d,y){var c=Ke.intersect(p[0],p[1],p[6],p[7],w[0],w[1],w[6],w[7]);c&&e(d,y,m,te.getTimeOf(p,c),k,te.getTimeOf(w,c))}function l(p,w,m,k,d,y){var c=1e-12,b=Math.min,S=Math.max;if(S(p[0],p[2],p[4],p[6])+c>b(w[0],w[2],w[4],w[6])&&b(p[0],p[2],p[4],p[6])-c<S(w[0],w[2],w[4],w[6])&&S(p[1],p[3],p[5],p[7])+c>b(w[1],w[3],w[5],w[7])&&b(p[1],p[3],p[5],p[7])-c<S(w[1],w[3],w[5],w[7])){var P=v(p,w);if(P)for(var C=0;C<2;C++){var E=P[C];e(d,y,m,E[0],k,E[1],!0)}else{var L=te.isStraight(p),O=te.isStraight(w),V=L&&O,T=L&&!O,R=d.length;if((V?o:L||O?h:t)(T?w:p,T?p:w,T?k:m,T?m:k,d,y,T,0,0,0,1,0,1),!V||d.length===R)for(var C=0;C<4;C++){var F=C>>1,q=C&1,U=F*6,G=q*6,Q=new D(p[U],p[U+1]),J=new D(w[G],w[G+1]);Q.isClose(J,c)&&e(d,y,m,F,k,q)}}}return d}function f(p,w,m,k){var d=te.classify(p);if(d.type==="loop"){var y=d.roots;e(m,k,w,y[0],w,y[1])}return m}function _(p,w,m,k,d,y){var c=1e-7,b=!w;b&&(w=p);for(var S=p.length,P=w.length,C=new Array(S),E=b?C:new Array(P),L=[],O=0;O<S;O++)C[O]=p[O].getValues(k);if(!b)for(var O=0;O<P;O++)E[O]=w[O].getValues(d);for(var V=$t.findCurveBoundsCollisions(C,E,c),T=0;T<S;T++){var R=p[T],F=C[T];b&&f(F,R,L,m);var q=V[T];if(q)for(var U=0;U<q.length;U++){if(y&&L.length)return L;var G=q[U];if(!b||G>T){var Q=w[G],J=E[G];l(F,J,R,Q,L,m)}}}return L}function v(p,w){function m(ie){var ue=ie[6]-ie[0],ae=ie[7]-ie[1];return ue*ue+ae*ae}var k=Math.abs,d=Ke.getDistance,y=1e-8,c=1e-7,b=te.isStraight(p),S=te.isStraight(w),P=b&&S,C=m(p)<m(w),E=C?w:p,L=C?p:w,O=E[0],V=E[1],T=E[6]-O,R=E[7]-V;if(d(O,V,T,R,L[0],L[1],!0)<c&&d(O,V,T,R,L[6],L[7],!0)<c)!P&&d(O,V,T,R,E[2],E[3],!0)<c&&d(O,V,T,R,E[4],E[5],!0)<c&&d(O,V,T,R,L[2],L[3],!0)<c&&d(O,V,T,R,L[4],L[5],!0)<c&&(b=S=P=!0);else if(P)return null;if(b^S)return null;for(var F=[p,w],q=[],U=0;U<4&&q.length<2;U++){var G=U&1,Q=G^1,J=U>>1,ee=te.getTimeOf(F[G],new D(F[Q][J?6:0],F[Q][J?7:1]));if(ee!=null){var se=G?[J,ee]:[ee,J];(!q.length||k(se[0]-q[0][0])>y&&k(se[1]-q[0][1])>y)&&q.push(se)}if(U>2&&!q.length)break}if(q.length!==2)q=null;else if(!P){var Z=te.getPart(p,q[0][0],q[1][0]),K=te.getPart(w,q[0][1],q[1][1]);(k(K[2]-Z[2])>c||k(K[3]-Z[3])>c||k(K[4]-Z[4])>c||k(K[5]-Z[5])>c)&&(q=null)}return q}function g(p,w){var m=p[0],k=p[1],d=p[2],y=p[3],c=p[4],b=p[5],S=p[6],P=p[7],C=w.normalize(),E=C.x,L=C.y,O=3*S-9*c+9*d-3*m,V=3*P-9*b+9*y-3*k,T=6*c-12*d+6*m,R=6*b-12*y+6*k,F=3*d-3*m,q=3*y-3*k,U=2*O*L-2*V*E,G=[];if(Math.abs(U)<Ae.CURVETIME_EPSILON){var Q=O*q-V*F,U=O*R-V*T;if(U!=0){var J=-Q/U;J>=0&&J<=1&&G.push(J)}}else{var ee=(T*T-4*O*F)*L*L+(-2*T*R+4*V*F+4*O*q)*E*L+(R*R-4*V*q)*E*E,se=T*L-R*E;if(ee>=0&&U!=0){var Z=Math.sqrt(ee),K=-(se+Z)/U,ie=(-se+Z)/U;K>=0&&K<=1&&G.push(K),ie>=0&&ie<=1&&G.push(ie)}}return G}return{getIntersections:function(p){var w=this.getValues(),m=p&&p!==this&&p.getValues();return m?l(w,m,this,p,[]):f(w,this,[])},statics:{getOverlaps:v,getIntersections:_,getCurveLineIntersections:u,getTimesWithTangent:g}}}),dt=B.extend({_class:"CurveLocation",initialize:function(t,n,r,s,u){if(n>=.99999999){var h=t.getNext();h&&(n=0,t=h)}this._setCurve(t),this._time=n,this._point=r||t.getPointAtTime(n),this._overlap=s,this._distance=u,this._intersection=this._next=this._previous=null},_setPath:function(e){this._path=e,this._version=e?e._version:0},_setCurve:function(e){this._setPath(e._path),this._curve=e,this._segment=null,this._segment1=e._segment1,this._segment2=e._segment2},_setSegment:function(e){var t=e.getCurve();t?this._setCurve(t):(this._setPath(e._path),this._segment1=e,this._segment2=null),this._segment=e,this._time=e===this._segment1?0:1,this._point=e._point.clone()},getSegment:function(){var e=this._segment;if(!e){var t=this.getCurve(),n=this.getTime();n===0?e=t._segment1:n===1?e=t._segment2:n!=null&&(e=t.getPartLength(0,n)<t.getPartLength(n,1)?t._segment1:t._segment2),this._segment=e}return e},getCurve:function(){var e=this._path,t=this;e&&e._version!==this._version&&(this._time=this._offset=this._curveOffset=this._curve=null);function n(r){var s=r&&r.getCurve();if(s&&(t._time=s.getTimeOf(t._point))!=null)return t._setCurve(s),s}return this._curve||n(this._segment)||n(this._segment1)||n(this._segment2.getPrevious())},getPath:function(){var e=this.getCurve();return e&&e._path},getIndex:function(){var e=this.getCurve();return e&&e.getIndex()},getTime:function(){var e=this.getCurve(),t=this._time;return e&&t==null?this._time=e.getTimeOf(this._point):t},getParameter:"#getTime",getPoint:function(){return this._point},getOffset:function(){var e=this._offset;if(e==null){e=0;var t=this.getPath(),n=this.getIndex();if(t&&n!=null)for(var r=t.getCurves(),s=0;s<n;s++)e+=r[s].getLength();this._offset=e+=this.getCurveOffset()}return e},getCurveOffset:function(){var e=this._curveOffset;if(e==null){var t=this.getCurve(),n=this.getTime();this._curveOffset=e=n!=null&&t&&t.getPartLength(0,n)}return e},getIntersection:function(){return this._intersection},getDistance:function(){return this._distance},divide:function(){var e=this.getCurve(),t=e&&e.divideAtTime(this.getTime());return t&&this._setSegment(t._segment1),t},split:function(){var e=this.getCurve(),t=e._path,n=e&&e.splitAtTime(this.getTime());return n&&this._setSegment(t.getLastSegment()),n},equals:function(e,t){var n=this===e;if(!n&&e instanceof dt){var r=this.getCurve(),s=e.getCurve(),u=r._path,h=s._path;if(u===h){var o=Math.abs,l=1e-7,f=o(this.getOffset()-e.getOffset()),_=!t&&this._intersection,v=!t&&e._intersection;n=(f<l||u&&o(u.getLength()-f)<l)&&(!_&&!v||_&&v&&_.equals(v,!0))}}return n},toString:function(){var e=[],t=this.getPoint(),n=lt.instance;t&&e.push("point: "+t);var r=this.getIndex();r!=null&&e.push("index: "+r);var s=this.getTime();return s!=null&&e.push("time: "+n.number(s)),this._distance!=null&&e.push("distance: "+n.number(this._distance)),"{ "+e.join(", ")+" }"},isTouching:function(){var e=this._intersection;if(e&&this.getTangent().isCollinear(e.getTangent())){var t=this.getCurve(),n=e.getCurve();return!(t.isStraight()&&n.isStraight()&&t.getLine().intersect(n.getLine()))}return!1},isCrossing:function(){var e=this._intersection;if(!e)return!1;var t=this.getTime(),n=e.getTime(),r=1e-8,s=1-r,u=t>=r&&t<=s,h=n>=r&&n<=s;if(u&&h)return!this.isTouching();var o=this.getCurve(),l=o&&t<r?o.getPrevious():o,f=e.getCurve(),_=f&&n<r?f.getPrevious():f;if(t>s&&(o=o.getNext()),n>s&&(f=f.getNext()),!l||!o||!_||!f)return!1;var v=[];function g(E,L){var O=E.getValues(),V=te.classify(O).roots||te.getPeaks(O),T=V.length,R=te.getLength(O,L&&T?V[T-1]:0,!L&&T?V[0]:1);v.push(T?R:R/32)}function p(E,L,O){return L<O?E>L&&E<O:E>L||E<O}u||(g(l,!0),g(o,!1)),h||(g(_,!0),g(f,!1));var w=this.getPoint(),m=Math.min.apply(Math,v),k=u?o.getTangentAtTime(t):o.getPointAt(m).subtract(w),d=u?k.negate():l.getPointAt(-m).subtract(w),y=h?f.getTangentAtTime(n):f.getPointAt(m).subtract(w),c=h?y.negate():_.getPointAt(-m).subtract(w),b=d.getAngle(),S=k.getAngle(),P=c.getAngle(),C=y.getAngle();return!!(u?p(b,P,C)^p(S,P,C)&&p(b,C,P)^p(S,C,P):p(P,b,S)^p(C,b,S)&&p(P,S,b)^p(C,S,b))},hasOverlap:function(){return!!this._overlap}},B.each(te._evaluateMethods,function(e){var t=e+"At";this[e]=function(){var n=this.getCurve(),r=this.getTime();return r!=null&&n&&n[t](r,!0)}},{preserve:!0}),new function(){function e(t,n,r){var s=t.length,u=0,h=s-1;function o(w,m){for(var k=w+m;k>=-1&&k<=s;k+=m){var d=t[(k%s+s)%s];if(!n.getPoint().isClose(d.getPoint(),1e-7))break;if(n.equals(d))return d}return null}for(;u<=h;){var l=u+h>>>1,f=t[l],_;if(r&&(_=n.equals(f)?f:o(l,-1)||o(l,1)))return n._overlap&&(_._overlap=_._intersection._overlap=!0),_;var v=n.getPath(),g=f.getPath(),p=v!==g?v._id-g._id:n.getIndex()+n.getTime()-(f.getIndex()+f.getTime());p<0?h=l-1:u=l+1}return t.splice(u,0,n),n}return{statics:{insert:e,expand:function(t){for(var n=t.slice(),r=t.length-1;r>=0;r--)e(n,t[r]._intersection,!1);return n}}}}),ot=A.extend({_class:"PathItem",_selectBounds:!1,_canScaleStroke:!0,beans:!0,initialize:function(){},statics:{create:function(e){var t,n,r;if(B.isPlainObject(e)?(n=e.segments,t=e.pathData):Array.isArray(e)?n=e:typeof e=="string"&&(t=e),n){var s=n[0];r=s&&Array.isArray(s[0])}else t&&(r=(t.match(/m/gi)||[]).length>1||/z\s*\S+/i.test(t));var u=r?mt:we;return new u(e)}},_asPathItem:function(){return this},isClockwise:function(){return this.getArea()>=0},setClockwise:function(e){this.isClockwise()!=(e=!!e)&&this.reverse()},setPathData:function(e){var t=e&&e.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/ig),n,r=!1,s,u,h=new D,o=new D;function l(c,b){var S=+n[c];return r&&(S+=h[b]),S}function f(c){return new D(l(c,"x"),l(c+1,"y"))}this.clear();for(var _=0,v=t&&t.length;_<v;_++){var g=t[_],p=g[0],w=p.toLowerCase();n=g.match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g);var m=n&&n.length;switch(r=p===w,s==="z"&&!/[mz]/.test(w)&&this.moveTo(h),w){case"m":case"l":for(var k=w==="m",d=0;d<m;d+=2)this[k?"moveTo":"lineTo"](h=f(d)),k&&(o=h,k=!1);u=h;break;case"h":case"v":var y=w==="h"?"x":"y";h=h.clone();for(var d=0;d<m;d++)h[y]=l(d,y),this.lineTo(h);u=h;break;case"c":for(var d=0;d<m;d+=6)this.cubicCurveTo(f(d),u=f(d+2),h=f(d+4));break;case"s":for(var d=0;d<m;d+=4)this.cubicCurveTo(/[cs]/.test(s)?h.multiply(2).subtract(u):h,u=f(d),h=f(d+2)),s=w;break;case"q":for(var d=0;d<m;d+=4)this.quadraticCurveTo(u=f(d),h=f(d+2));break;case"t":for(var d=0;d<m;d+=2)this.quadraticCurveTo(u=/[qt]/.test(s)?h.multiply(2).subtract(u):h,h=f(d)),s=w;break;case"a":for(var d=0;d<m;d+=7)this.arcTo(h=f(d+5),new oe(+n[d],+n[d+1]),+n[d+2],+n[d+4],+n[d+3]);break;case"z":this.closePath(1e-12),h=o;break}s=w}},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_contains:function(e){var t=e.isInside(this.getBounds({internal:!0,handle:!0}))?this._getWinding(e):{};return t.onPath||!!(this.getFillRule()==="evenodd"?t.windingL&1||t.windingR&1:t.winding)},getIntersections:function(e,t,n,r){var s=this===e||!e,u=this._matrix._orNullIfIdentity(),h=s?u:(n||e._matrix)._orNullIfIdentity();return s||this.getBounds(u).intersects(e.getBounds(h),1e-12)?te.getIntersections(this.getCurves(),!s&&e.getCurves(),t,u,h,r):[]},getCrossings:function(e){return this.getIntersections(e,function(t){return t.isCrossing()})},getNearestLocation:function(){for(var e=D.read(arguments),t=this.getCurves(),n=1/0,r=null,s=0,u=t.length;s<u;s++){var h=t[s].getNearestLocation(e);h._distance<n&&(n=h._distance,r=h)}return r},getNearestPoint:function(){var e=this.getNearestLocation.apply(this,arguments);return e&&e.getPoint()},interpolate:function(e,t,n){var r=!this._children,s=r?"_segments":"_children",u=e[s],h=t[s],o=this[s];if(!u||!h||u.length!==h.length)throw new Error("Invalid operands in interpolate() call: "+e+", "+t);var l=o.length,f=h.length;if(l<f)for(var _=r?de:we,v=l;v<f;v++)this.add(new _);else l>f&&this[r?"removeSegments":"removeChildren"](f,l);for(var v=0;v<f;v++)o[v].interpolate(u[v],h[v],n);r&&(this.setClosed(e._closed),this._changed(9))},compare:function(e){var t=!1;if(e){var n=this._children||[this],r=e._children?e._children.slice():[e],s=n.length,u=r.length,h=[],o=0;t=!0;for(var l=$t.findItemBoundsCollisions(n,r,Ae.GEOMETRIC_EPSILON),f=s-1;f>=0&&t;f--){var _=n[f];t=!1;var v=l[f];if(v)for(var g=v.length-1;g>=0&&!t;g--)_.compare(r[v[g]])&&(h[v[g]]||(h[v[g]]=!0,o++),t=!0)}t=t&&o===u}return t}}),we=ot.extend({_class:"Path",_serializeFields:{segments:[],closed:!1},initialize:function(t){this._closed=!1,this._segments=[],this._version=0;var n=arguments,r=Array.isArray(t)?typeof t[0]=="object"?t:n:t&&t.size===Y&&(t.x!==Y||t.point!==Y)?n:null;r&&r.length>0?this.setSegments(r):(this._curves=Y,this._segmentSelection=0,!r&&typeof t=="string"&&(this.setPathData(t),t=null)),this._initialize(!r&&t)},_equals:function(e){return this._closed===e._closed&&B.equals(this._segments,e._segments)},copyContent:function(e){this.setSegments(e._segments),this._closed=e._closed},_changed:function e(t){if(e.base.call(this,t),t&8){if(this._length=this._area=Y,t&32)this._version++;else if(this._curves)for(var n=0,r=this._curves.length;n<r;n++)this._curves[n]._changed()}else t&64&&(this._bounds=Y)},getStyle:function(){var e=this._parent;return(e instanceof mt?e:this)._style},getSegments:function(){return this._segments},setSegments:function(e){var t=this.isFullySelected(),n=e&&e.length;if(this._segments.length=0,this._segmentSelection=0,this._curves=Y,n){var r=e[n-1];typeof r=="boolean"&&(this.setClosed(r),n--),this._add(de.readList(e,0,{},n))}t&&this.setFullySelected(!0)},getFirstSegment:function(){return this._segments[0]},getLastSegment:function(){return this._segments[this._segments.length-1]},getCurves:function(){var e=this._curves,t=this._segments;if(!e){var n=this._countCurves();e=this._curves=new Array(n);for(var r=0;r<n;r++)e[r]=new te(this,t[r],t[r+1]||t[0])}return e},getFirstCurve:function(){return this.getCurves()[0]},getLastCurve:function(){var e=this.getCurves();return e[e.length-1]},isClosed:function(){return this._closed},setClosed:function(e){if(this._closed!=(e=!!e)){if(this._closed=e,this._curves){var t=this._curves.length=this._countCurves();e&&(this._curves[t-1]=new te(this,this._segments[t-1],this._segments[0]))}this._changed(41)}}},{beans:!0,getPathData:function(e,t){var n=this._segments,r=n.length,s=new lt(t),u=new Array(6),h=!0,o,l,f,_,v,g,p,w,m=[];function k(y,c){if(y._transformCoordinates(e,u),o=u[0],l=u[1],h)m.push("M"+s.pair(o,l)),h=!1;else if(v=u[2],g=u[3],v===o&&g===l&&p===f&&w===_){if(!c){var b=o-f,S=l-_;m.push(b===0?"v"+s.number(S):S===0?"h"+s.number(b):"l"+s.pair(b,S))}}else m.push("c"+s.pair(p-f,w-_)+" "+s.pair(v-f,g-_)+" "+s.pair(o-f,l-_));f=o,_=l,p=u[4],w=u[5]}if(!r)return"";for(var d=0;d<r;d++)k(n[d]);return this._closed&&r>0&&(k(n[0],!0),m.push("z")),m.join("")},isEmpty:function(){return!this._segments.length},_transformContent:function(e){for(var t=this._segments,n=new Array(6),r=0,s=t.length;r<s;r++)t[r]._transformCoordinates(e,n,!0);return!0},_add:function(e,h){for(var n=this._segments,r=this._curves,s=e.length,u=h==null,h=u?n.length:h,o=0;o<s;o++){var l=e[o];l._path&&(l=e[o]=l.clone()),l._path=this,l._index=h+o,l._selection&&this._updateSelection(l,0,l._selection)}if(u)B.push(n,e);else{n.splice.apply(n,[h,0].concat(e));for(var o=h+s,f=n.length;o<f;o++)n[o]._index=o}if(r){var _=this._countCurves(),v=h>0&&h+s-1===_?h-1:h,g=v,p=Math.min(v+s,_);e._curves&&(r.splice.apply(r,[v,0].concat(e._curves)),g+=e._curves.length);for(var o=g;o<p;o++)r.splice(o,0,new te(this,null,null));this._adjustCurves(v,p)}return this._changed(41),e},_adjustCurves:function(e,t){for(var n=this._segments,r=this._curves,s,u=e;u<t;u++)s=r[u],s._path=this,s._segment1=n[u],s._segment2=n[u+1]||n[0],s._changed();(s=r[this._closed&&!e?n.length-1:e-1])&&(s._segment2=n[e]||n[0],s._changed()),(s=r[t])&&(s._segment1=n[t],s._changed())},_countCurves:function(){var e=this._segments.length;return!this._closed&&e>0?e-1:e},add:function(e){var t=arguments;return t.length>1&&typeof e!="number"?this._add(de.readList(t)):this._add([de.read(t)])[0]},insert:function(e,t){var n=arguments;return n.length>2&&typeof t!="number"?this._add(de.readList(n,1),e):this._add([de.read(n,1)],e)[0]},addSegment:function(){return this._add([de.read(arguments)])[0]},insertSegment:function(e){return this._add([de.read(arguments,1)],e)[0]},addSegments:function(e){return this._add(de.readList(e))},insertSegments:function(e,t){return this._add(de.readList(t),e)},removeSegment:function(e){return this.removeSegments(e,e+1)[0]||null},removeSegments:function(e,t,n){e=e||0,t=B.pick(t,this._segments.length);var r=this._segments,s=this._curves,u=r.length,h=r.splice(e,t-e),o=h.length;if(!o)return h;for(var l=0;l<o;l++){var f=h[l];f._selection&&this._updateSelection(f,f._selection,0),f._index=f._path=null}for(var l=e,_=r.length;l<_;l++)r[l]._index=l;if(s){for(var v=e>0&&t===u+(this._closed?1:0)?e-1:e,s=s.splice(v,o),l=s.length-1;l>=0;l--)s[l]._path=null;n&&(h._curves=s.slice(1)),this._adjustCurves(v,v)}return this._changed(41),h},clear:"#removeSegments",hasHandles:function(){for(var e=this._segments,t=0,n=e.length;t<n;t++)if(e[t].hasHandles())return!0;return!1},clearHandles:function(){for(var e=this._segments,t=0,n=e.length;t<n;t++)e[t].clearHandles()},getLength:function(){if(this._length==null){for(var e=this.getCurves(),t=0,n=0,r=e.length;n<r;n++)t+=e[n].getLength();this._length=t}return this._length},getArea:function(){var e=this._area;if(e==null){var t=this._segments,n=this._closed;e=0;for(var r=0,s=t.length;r<s;r++){var u=r+1===s;e+=te.getArea(te.getValues(t[r],t[u?0:r+1],null,u&&!n))}this._area=e}return e},isFullySelected:function(){var e=this._segments.length;return this.isSelected()&&e>0&&this._segmentSelection===e*7},setFullySelected:function(e){e&&this._selectSegments(!0),this.setSelected(e)},setSelection:function e(t){t&1||this._selectSegments(!1),e.base.call(this,t)},_selectSegments:function(e){var t=this._segments,n=t.length,r=e?7:0;this._segmentSelection=r*n;for(var s=0;s<n;s++)t[s]._selection=r},_updateSelection:function(e,t,n){e._selection=n;var r=this._segmentSelection+=n-t;r>0&&this.setSelected(!0)},divideAt:function(e){var t=this.getLocationAt(e),n;return t&&(n=t.getCurve().divideAt(t.getCurveOffset()))?n._segment1:null},splitAt:function(e){var t=this.getLocationAt(e),n=t&&t.index,r=t&&t.time,s=1e-8,u=1-s;r>u&&(n++,r=0);var h=this.getCurves();if(n>=0&&n<h.length){r>=s&&h[n++].divideAtTime(r);var o=this.removeSegments(n,this._segments.length,!0),l;return this._closed?(this.setClosed(!1),l=this):(l=new we(A.NO_INSERT),l.insertAbove(this),l.copyAttributes(this)),l._add(o,0),this.addSegment(o[0]),l}return null},split:function(e,t){var n,r=t===Y?e:(n=this.getCurves()[e])&&n.getLocationAtTime(t);return r!=null?this.splitAt(r):null},join:function(e,t){var n=t||0;if(e&&e!==this){var r=e._segments,s=this.getLastSegment(),u=e.getLastSegment();if(!u)return this;s&&s._point.isClose(u._point,n)&&e.reverse();var h=e.getFirstSegment();if(s&&s._point.isClose(h._point,n))s.setHandleOut(h._handleOut),this._add(r.slice(1));else{var o=this.getFirstSegment();o&&o._point.isClose(h._point,n)&&e.reverse(),u=e.getLastSegment(),o&&o._point.isClose(u._point,n)?(o.setHandleIn(u._handleIn),this._add(r.slice(0,r.length-1),0)):this._add(r.slice())}e._closed&&this._add([r[0]]),e.remove()}var l=this.getFirstSegment(),f=this.getLastSegment();return l!==f&&l._point.isClose(f._point,n)&&(l.setHandleIn(f._handleIn),f.remove(),this.setClosed(!0)),this},reduce:function(e){for(var t=this.getCurves(),n=e&&e.simplify,r=n?1e-7:0,s=t.length-1;s>=0;s--){var u=t[s];!u.hasHandles()&&(!u.hasLength(r)||n&&u.isCollinear(u.getNext()))&&u.remove()}return this},reverse:function(){this._segments.reverse();for(var e=0,t=this._segments.length;e<t;e++){var n=this._segments[e],r=n._handleIn;n._handleIn=n._handleOut,n._handleOut=r,n._index=e}this._curves=null,this._changed(9)},flatten:function(e){for(var t=new St(this,e||.25,256,!0),n=t.parts,r=n.length,s=[],u=0;u<r;u++)s.push(new de(n[u].curve.slice(0,2)));!this._closed&&r>0&&s.push(new de(n[r-1].curve.slice(6))),this.setSegments(s)},simplify:function(e){var t=new qt(this).fit(e||2.5);return t&&this.setSegments(t),!!t},smooth:function(e){var t=this,n=e||{},r=n.type||"asymmetric",s=this._segments,u=s.length,h=this._closed;function o(ae,ce){var fe=ae&&ae.index;if(fe!=null){var pe=ae.path;if(pe&&pe!==t)throw new Error(ae._class+" "+fe+" of "+pe+" is not part of "+t);ce&&ae instanceof te&&fe++}else fe=typeof ae=="number"?ae:ce;return Math.min(fe<0&&h?fe%u:fe<0?fe+u:fe,u-1)}var l=h&&n.from===Y&&n.to===Y,f=o(n.from,0),_=o(n.to,u-1);if(f>_)if(h)f-=u;else{var v=f;f=_,_=v}if(/^(?:asymmetric|continuous)$/.test(r)){var g=r==="asymmetric",p=Math.min,w=_-f+1,m=w-1,k=l?p(w,4):1,d=k,y=k,c=[];if(h||(d=p(1,f),y=p(1,u-_-1)),m+=d+y,m<=1)return;for(var b=0,S=f-d;b<=m;b++,S++)c[b]=s[(S<0?S+u:S)%u]._point;for(var P=c[0]._x+2*c[1]._x,C=c[0]._y+2*c[1]._y,E=2,L=m-1,O=[P],V=[C],T=[E],R=[],F=[],b=1;b<m;b++){var q=b<L,U=q||g?1:2,G=q?4:g?2:7,Q=q?4:g?3:8,J=q?2:g?0:1,ee=U/E;E=T[b]=G-ee,P=O[b]=Q*c[b]._x+J*c[b+1]._x-ee*P,C=V[b]=Q*c[b]._y+J*c[b+1]._y-ee*C}R[L]=O[L]/T[L],F[L]=V[L]/T[L];for(var b=m-2;b>=0;b--)R[b]=(O[b]-R[b+1])/T[b],F[b]=(V[b]-F[b+1])/T[b];R[m]=(3*c[m]._x-R[L])/2,F[m]=(3*c[m]._y-F[L])/2;for(var b=d,se=m-y,S=f;b<=se;b++,S++){var Z=s[S<0?S+u:S],K=Z._point,ie=R[b]-K._x,ue=F[b]-K._y;(l||b<se)&&Z.setHandleOut(ie,ue),(l||b>d)&&Z.setHandleIn(-ie,-ue)}}else for(var b=f;b<=_;b++)s[b<0?b+u:b].smooth(n,!l&&b===f,!l&&b===_)},toShape:function(e){if(!this._closed)return null;var t=this._segments,n,r,s,u;function h(g,p){var w=t[g],m=w.getNext(),k=t[p],d=k.getNext();return w._handleOut.isZero()&&m._handleIn.isZero()&&k._handleOut.isZero()&&d._handleIn.isZero()&&m._point.subtract(w._point).isCollinear(d._point.subtract(k._point))}function o(g){var p=t[g],w=p.getPrevious(),m=p.getNext();return w._handleOut.isZero()&&p._handleIn.isZero()&&p._handleOut.isZero()&&m._handleIn.isZero()&&p._point.subtract(w._point).isOrthogonal(m._point.subtract(p._point))}function l(g){var p=t[g],w=p.getNext(),m=p._handleOut,k=w._handleIn,d=.5522847498307936;if(m.isOrthogonal(k)){var y=p._point,c=w._point,b=new Ke(y,m,!0).intersect(new Ke(c,k,!0),!0);return b&&Ae.isZero(m.getLength()/b.subtract(y).getLength()-d)&&Ae.isZero(k.getLength()/b.subtract(c).getLength()-d)}return!1}function f(g,p){return t[g]._point.getDistance(t[p]._point)}if(!this.hasHandles()&&t.length===4&&h(0,2)&&h(1,3)&&o(1)?(n=Xe.Rectangle,r=new oe(f(0,3),f(0,1)),u=t[1]._point.add(t[2]._point).divide(2)):t.length===8&&l(0)&&l(2)&&l(4)&&l(6)&&h(1,5)&&h(3,7)?(n=Xe.Rectangle,r=new oe(f(1,6),f(0,3)),s=r.subtract(new oe(f(0,7),f(1,2))).divide(2),u=t[3]._point.add(t[4]._point).divide(2)):t.length===4&&l(0)&&l(1)&&l(2)&&l(3)&&(Ae.isZero(f(0,2)-f(1,3))?(n=Xe.Circle,s=f(0,2)/2):(n=Xe.Ellipse,s=new oe(f(2,0)/2,f(3,1)/2)),u=t[1]._point),n){var _=this.getPosition(!0),v=new n({center:_,size:r,radius:s,insert:!1});return v.copyAttributes(this,!0),v._matrix.prepend(this._matrix),v.rotate(u.subtract(_).getAngle()+90),(e===Y||e)&&v.insertAbove(this),v}return null},toPath:"#clone",compare:function e(t){if(!t||t instanceof mt)return e.base.call(this,t);var n=this.getCurves(),r=t.getCurves(),s=n.length,u=r.length;if(!s||!u)return s==u;for(var h=n[0].getValues(),o=[],l=0,f,_=0,v,g=0;g<u;g++){var k=r[g].getValues();o.push(k);var p=te.getOverlaps(h,k);if(p){f=!g&&p[0][0]>0?u-1:g,v=p[0][1];break}}for(var w=Math.abs,m=1e-8,k=o[f],d;h&&k;){var p=te.getOverlaps(h,k);if(p){var y=p[0][0];if(w(y-_)<m){_=p[1][0],_===1&&(h=++l<s?n[l].getValues():null,_=0);var c=p[0][1];if(w(c-v)<m){if(d||(d=[f,c]),v=p[1][1],v===1&&(++f>=u&&(f=0),k=o[f]||r[f].getValues(),v=0),!h)return d[0]===f&&d[1]===v;continue}}}break}return!1},_hitTestSelf:function(e,t,n,r){var s=this,u=this.getStyle(),h=this._segments,o=h.length,l=this._closed,f=t._tolerancePadding,_=f,v,g,p,w,m,k,d=t.stroke&&u.hasStroke(),y=t.fill&&u.hasFill(),c=t.curves,b=d?u.getStrokeWidth()/2:y&&t.tolerance>0||c?0:null;b!==null&&(b>0?(v=u.getStrokeJoin(),g=u.getStrokeCap(),p=u.getMiterLimit(),_=_.add(we._getStrokePadding(b,r))):v=g="round");function S(R,F){return e.subtract(R).divide(F).length<=1}function P(R,F,q){if(!t.selected||F.isSelected()){var U=R._point;if(F!==U&&(F=F.add(U)),S(F,_))return new vt(q,s,{segment:R,point:F})}}function C(R,F){return(F||t.segments)&&P(R,R._point,"segment")||!F&&t.handles&&(P(R,R._handleIn,"handle-in")||P(R,R._handleOut,"handle-out"))}function E(R){w.add(R)}function L(R){var F=l||R._index>0&&R._index<o-1;if((F?v:g)==="round")return S(R._point,_);if(w=new we({internal:!0,closed:!0}),F?R.isSmooth()||we._addBevelJoin(R,v,b,p,null,r,E,!0):g==="square"&&we._addSquareCap(R,g,b,null,r,E,!0),!w.isEmpty()){var q;return w.contains(e)||(q=w.getNearestLocation(e))&&S(q.getPoint(),f)}}if(t.ends&&!t.segments&&!l){if(k=C(h[0],!0)||C(h[o-1],!0))return k}else if(t.segments||t.handles){for(var O=0;O<o;O++)if(k=C(h[O]))return k}if(b!==null){if(m=this.getNearestLocation(e),m){var V=m.getTime();V===0||V===1&&o>1?L(m.getSegment())||(m=null):S(m.getPoint(),_)||(m=null)}if(!m&&v==="miter"&&o>1)for(var O=0;O<o;O++){var T=h[O];if(e.getDistance(T._point)<=p*b&&L(T)){m=T.getLocation();break}}}return!m&&y&&this._contains(e)||m&&!d&&!c?new vt("fill",this):m?new vt(d?"stroke":"curve",this,{location:m,point:m.getPoint()}):null}},B.each(te._evaluateMethods,function(e){this[e+"At"]=function(t){var n=this.getLocationAt(t);return n&&n[e]()}},{beans:!1,getLocationOf:function(){for(var e=D.read(arguments),t=this.getCurves(),n=0,r=t.length;n<r;n++){var s=t[n].getLocationOf(e);if(s)return s}return null},getOffsetOf:function(){var e=this.getLocationOf.apply(this,arguments);return e?e.getOffset():null},getLocationAt:function(e){if(typeof e=="number"){for(var t=this.getCurves(),n=0,r=0,s=t.length;r<s;r++){var u=n,h=t[r];if(n+=h.getLength(),n>e)return h.getLocationAt(e-u)}if(t.length>0&&e<=this.getLength())return new dt(t[t.length-1],1)}else if(e&&e.getPath&&e.getPath()===this)return e;return null},getOffsetsWithTangent:function(){var e=D.read(arguments);if(e.isZero())return[];for(var t=[],n=0,r=this.getCurves(),s=0,u=r.length;s<u;s++){for(var h=r[s],o=h.getTimesWithTangent(e),l=0,f=o.length;l<f;l++){var _=n+h.getOffsetAtTime(o[l]);t.indexOf(_)<0&&t.push(_)}n+=h.length}return t}}),new function(){function e(n,r,s,u){if(u<=0)return;var h=u/2,o=u-2,l=h-1,f=new Array(6),_,v;function g(y){var c=f[y],b=f[y+1];(_!=c||v!=b)&&(n.beginPath(),n.moveTo(_,v),n.lineTo(c,b),n.stroke(),n.beginPath(),n.arc(c,b,h,0,Math.PI*2,!0),n.fill())}for(var p=0,w=r.length;p<w;p++){var m=r[p],k=m._selection;if(m._transformCoordinates(s,f),_=f[0],v=f[1],k&2&&g(2),k&4&&g(4),n.fillRect(_-h,v-h,u,u),o>0&&!(k&1)){var d=n.fillStyle;n.fillStyle="#ffffff",n.fillRect(_-l,v-l,o,o),n.fillStyle=d}}}function t(n,r,s){var u=r._segments,h=u.length,o=new Array(6),l=!0,f,_,v,g,p,w,m,k;function d(c){if(s)c._transformCoordinates(s,o),f=o[0],_=o[1];else{var b=c._point;f=b._x,_=b._y}if(l)n.moveTo(f,_),l=!1;else{if(s)p=o[2],w=o[3];else{var S=c._handleIn;p=f+S._x,w=_+S._y}p===f&&w===_&&m===v&&k===g?n.lineTo(f,_):n.bezierCurveTo(m,k,p,w,f,_)}if(v=f,g=_,s)m=o[4],k=o[5];else{var S=c._handleOut;m=v+S._x,k=g+S._y}}for(var y=0;y<h;y++)d(u[y]);r._closed&&h>0&&d(u[0])}return{_draw:function(n,r,s,u){var h=r.dontStart,o=r.dontFinish||r.clip,l=this.getStyle(),f=l.hasFill(),_=l.hasStroke(),v=l.getDashArray(),g=!he.support.nativeDash&&_&&v&&v.length;h||n.beginPath(),(f||_&&!g||o)&&(t(n,this,u),this._closed&&n.closePath());function p(c){return v[(c%g+g)%g]}if(!o&&(f||_)&&(this._setStyles(n,r,s),f&&(n.fill(l.getFillRule()),n.shadowColor="rgba(0,0,0,0)"),_)){if(g){h||n.beginPath();for(var w=new St(this,.25,32,!1,u),m=w.length,k=-l.getDashOffset(),d,y=0;k>0;)k-=p(y--)+p(y--);for(;k<m;)d=k+p(y++),(k>0||d>0)&&w.drawPart(n,Math.max(k,0),Math.max(d,0)),k=d+p(y++)}n.stroke()}},_drawSelected:function(n,r){n.beginPath(),t(n,this,r),n.stroke(),e(n,this._segments,r,he.settings.handleSize)}}},new function(){function e(t){var n=t._segments;if(!n.length)throw new Error("Use a moveTo() command first");return n[n.length-1]}return{moveTo:function(){var t=this._segments;t.length===1&&this.removeSegment(0),t.length||this._add([new de(D.read(arguments))])},moveBy:function(){throw new Error("moveBy() is unsupported on Path items.")},lineTo:function(){this._add([new de(D.read(arguments))])},cubicCurveTo:function(){var t=arguments,n=D.read(t),r=D.read(t),s=D.read(t),u=e(this);u.setHandleOut(n.subtract(u._point)),this._add([new de(s,r.subtract(s))])},quadraticCurveTo:function(){var t=arguments,n=D.read(t),r=D.read(t),s=e(this)._point;this.cubicCurveTo(n.add(s.subtract(n).multiply(1/3)),n.add(r.subtract(n).multiply(1/3)),r)},curveTo:function(){var t=arguments,n=D.read(t),r=D.read(t),s=B.pick(B.read(t),.5),u=1-s,h=e(this)._point,o=n.subtract(h.multiply(u*u)).subtract(r.multiply(s*s)).divide(2*s*u);if(o.isNaN())throw new Error("Cannot put a curve through points with parameter = "+s);this.quadraticCurveTo(o,r)},arcTo:function(){var t=arguments,n=Math.abs,r=Math.sqrt,s=e(this),u=s._point,h=D.read(t),o,l=B.peek(t),f=B.pick(l,!0),_,v,g,p;if(typeof f=="boolean")var w=u.add(h).divide(2),o=w.add(w.subtract(u).rotate(f?-90:90));else if(B.remain(t)<=2)o=h,h=D.read(t);else if(!u.equals(h)){var m=oe.read(t),k=Ae.isZero;if(k(m.width)||k(m.height))return this.lineTo(h);var d=B.read(t),f=!!B.read(t),y=!!B.read(t),w=u.add(h).divide(2),c=u.subtract(w).rotate(-d),b=c.x,S=c.y,P=n(m.width),C=n(m.height),E=P*P,L=C*C,O=b*b,V=S*S,T=r(O/E+V/L);if(T>1&&(P*=T,C*=T,E=P*P,L=C*C),T=(E*L-E*V-L*O)/(E*V+L*O),n(T)<1e-12&&(T=0),T<0)throw new Error("Cannot create an arc with the given arguments");_=new D(P*S/C,-C*b/P).multiply((y===f?-1:1)*r(T)).rotate(d).add(w),p=new be().translate(_).rotate(d).scale(P,C),g=p._inverseTransform(u),v=g.getDirectedAngle(p._inverseTransform(h)),!f&&v>0?v-=360:f&&v<0&&(v+=360)}if(o){var R=new Ke(u.add(o).divide(2),o.subtract(u).rotate(90),!0),F=new Ke(o.add(h).divide(2),h.subtract(o).rotate(90),!0),q=new Ke(u,h),U=q.getSide(o);if(_=R.intersect(F,!0),!_){if(!U)return this.lineTo(h);throw new Error("Cannot create an arc with the given arguments")}g=u.subtract(_),v=g.getDirectedAngle(h.subtract(_));var G=q.getSide(_,!0);G===0?v=U*n(v):U===G&&(v+=v<0?360:-360)}if(v){for(var Q=1e-5,J=n(v),ee=J>=360?4:Math.ceil((J-Q)/90),se=v/ee,Z=se*Math.PI/360,K=4/3*Math.sin(Z)/(1+Math.cos(Z)),ie=[],ue=0;ue<=ee;ue++){var c=h,ae=null;if(ue<ee&&(ae=g.rotate(90).multiply(K),p?(c=p._transformPoint(g),ae=p._transformPoint(g.add(ae)).subtract(c)):c=_.add(g)),!ue)s.setHandleOut(ae);else{var ce=g.rotate(-90).multiply(K);p&&(ce=p._transformPoint(g.add(ce)).subtract(c)),ie.push(new de(c,ce,ae))}g=g.rotate(se)}this._add(ie)}},lineBy:function(){var t=D.read(arguments),n=e(this)._point;this.lineTo(n.add(t))},curveBy:function(){var t=arguments,n=D.read(t),r=D.read(t),s=B.read(t),u=e(this)._point;this.curveTo(u.add(n),u.add(r),s)},cubicCurveBy:function(){var t=arguments,n=D.read(t),r=D.read(t),s=D.read(t),u=e(this)._point;this.cubicCurveTo(u.add(n),u.add(r),u.add(s))},quadraticCurveBy:function(){var t=arguments,n=D.read(t),r=D.read(t),s=e(this)._point;this.quadraticCurveTo(s.add(n),s.add(r))},arcBy:function(){var t=arguments,n=e(this)._point,r=n.add(D.read(t)),s=B.pick(B.peek(t),!0);typeof s=="boolean"?this.arcTo(r,s):this.arcTo(r,n.add(D.read(t)))},closePath:function(t){this.setClosed(!0),this.join(this,t)}}},{_getBounds:function(e,t){var n=t.handle?"getHandleBounds":t.stroke?"getStrokeBounds":"getBounds";return we[n](this._segments,this._closed,this,e,t)},statics:{getBounds:function(e,t,n,r,s,u){var h=e[0];if(!h)return new le;var o=new Array(6),l=h._transformCoordinates(r,new Array(6)),f=l.slice(0,2),_=f.slice(),v=new Array(2);function g(m){m._transformCoordinates(r,o);for(var k=0;k<2;k++)te._addBounds(l[k],l[k+4],o[k+2],o[k],k,u?u[k]:0,f,_,v);var d=l;l=o,o=d}for(var p=1,w=e.length;p<w;p++)g(e[p]);return t&&g(h),new le(f[0],f[1],_[0]-f[0],_[1]-f[1])},getStrokeBounds:function(e,t,n,r,s){var u=n.getStyle(),h=u.hasStroke(),o=u.getStrokeWidth(),l=h&&n._getStrokeMatrix(r,s),f=h&&we._getStrokePadding(o,l),_=we.getBounds(e,t,n,r,s,f);if(!h)return _;var v=o/2,g=u.getStrokeJoin(),p=u.getStrokeCap(),w=u.getMiterLimit(),m=new le(new oe(f));function k(P){_=_.include(P)}function d(P){_=_.unite(m.setCenter(P._point.transform(r)))}function y(P,C){C==="round"||P.isSmooth()?d(P):we._addBevelJoin(P,C,v,w,r,l,k)}function c(P,C){C==="round"?d(P):we._addSquareCap(P,C,v,r,l,k)}var b=e.length-(t?0:1);if(b>0){for(var S=1;S<b;S++)y(e[S],g);t?y(e[0],g):(c(e[0],p),c(e[e.length-1],p))}return _},_getStrokePadding:function(e,t){if(!t)return[e,e];var n=new D(e,0).transform(t),r=new D(0,e).transform(t),s=n.getAngleInRadians(),u=n.getLength(),h=r.getLength(),o=Math.sin(s),l=Math.cos(s),f=Math.tan(s),_=Math.atan2(h*f,u),v=Math.atan2(h,f*u);return[Math.abs(u*Math.cos(_)*l+h*Math.sin(_)*o),Math.abs(h*Math.sin(v)*l+u*Math.cos(v)*o)]},_addBevelJoin:function(e,t,n,r,s,u,h,o){var l=e.getCurve(),f=l.getPrevious(),_=l.getPoint1().transform(s),v=f.getNormalAtTime(1).multiply(n).transform(u),g=l.getNormalAtTime(0).multiply(n).transform(u),p=v.getDirectedAngle(g);if((p<0||p>=180)&&(v=v.negate(),g=g.negate()),o&&h(_),h(_.add(v)),t==="miter"){var w=new Ke(_.add(v),new D(-v.y,v.x),!0).intersect(new Ke(_.add(g),new D(-g.y,g.x),!0),!0);w&&_.getDistance(w)<=r*n&&h(w)}h(_.add(g))},_addSquareCap:function(e,t,n,r,s,u,h){var o=e._point.transform(r),l=e.getLocation(),f=l.getNormal().multiply(l.getTime()===0?n:-n).transform(s);t==="square"&&(h&&(u(o.subtract(f)),u(o.add(f))),o=o.add(f.rotate(-90))),u(o.add(f)),u(o.subtract(f))},getHandleBounds:function(e,t,n,r,s){var u=n.getStyle(),h=s.stroke&&u.hasStroke(),o,l;if(h){var f=n._getStrokeMatrix(r,s),_=u.getStrokeWidth()/2,v=_;u.getStrokeJoin()==="miter"&&(v=_*u.getMiterLimit()),u.getStrokeCap()==="square"&&(v=Math.max(v,_*Math.SQRT2)),o=we._getStrokePadding(_,f),l=we._getStrokePadding(v,f)}for(var g=new Array(6),p=1/0,w=-p,m=p,k=w,d=0,y=e.length;d<y;d++){var c=e[d];c._transformCoordinates(r,g);for(var b=0;b<6;b+=2){var S=b?o:l,P=S?S[0]:0,C=S?S[1]:0,E=g[b],L=g[b+1],O=E-P,V=E+P,T=L-C,R=L+C;O<p&&(p=O),V>w&&(w=V),T<m&&(m=T),R>k&&(k=R)}}return new le(p,m,w-p,k-m)}}});we.inject({statics:new function(){var e=.5522847498307936,t=[new de([-1,0],[0,e],[0,-e]),new de([0,-1],[-e,0],[e,0]),new de([1,0],[0,-e],[0,e]),new de([0,1],[e,0],[-e,0])];function n(s,u,h){var o=B.getNamed(h),l=new we(o&&(o.insert==!0?A.INSERT:o.insert==!1?A.NO_INSERT:null));return l._add(s),l._closed=u,l.set(o,A.INSERT)}function r(s,u,h){for(var o=new Array(4),l=0;l<4;l++){var f=t[l];o[l]=new de(f._point.multiply(u).add(s),f._handleIn.multiply(u),f._handleOut.multiply(u))}return n(o,!0,h)}return{Line:function(){var s=arguments;return n([new de(D.readNamed(s,"from")),new de(D.readNamed(s,"to"))],!1,s)},Circle:function(){var s=arguments,u=D.readNamed(s,"center"),h=B.readNamed(s,"radius");return r(u,new oe(h),s)},Rectangle:function(){var s=arguments,u=le.readNamed(s,"rectangle"),h=oe.readNamed(s,"radius",0,{readNull:!0}),o=u.getBottomLeft(!0),l=u.getTopLeft(!0),f=u.getTopRight(!0),_=u.getBottomRight(!0),v;if(!h||h.isZero())v=[new de(o),new de(l),new de(f),new de(_)];else{h=oe.min(h,u.getSize(!0).divide(2));var g=h.width,p=h.height,w=g*e,m=p*e;v=[new de(o.add(g,0),null,[-w,0]),new de(o.subtract(0,p),[0,m]),new de(l.add(0,p),null,[0,-m]),new de(l.add(g,0),[-w,0],null),new de(f.subtract(g,0),null,[w,0]),new de(f.add(0,p),[0,-m],null),new de(_.subtract(0,p),null,[0,m]),new de(_.subtract(g,0),[w,0])]}return n(v,!0,s)},RoundRectangle:"#Rectangle",Ellipse:function(){var s=arguments,u=Xe._readEllipse(s);return r(u.center,u.radius,s)},Oval:"#Ellipse",Arc:function(){var s=arguments,u=D.readNamed(s,"from"),h=D.readNamed(s,"through"),o=D.readNamed(s,"to"),l=B.getNamed(s),f=new we(l&&l.insert==!1&&A.NO_INSERT);return f.moveTo(u),f.arcTo(h,o),f.set(l)},RegularPolygon:function(){for(var s=arguments,u=D.readNamed(s,"center"),h=B.readNamed(s,"sides"),o=B.readNamed(s,"radius"),l=360/h,f=h%3===0,_=new D(0,f?-o:o),v=f?-1:.5,g=new Array(h),p=0;p<h;p++)g[p]=new de(u.add(_.rotate((p+v)*l)));return n(g,!0,s)},Star:function(){for(var s=arguments,u=D.readNamed(s,"center"),h=B.readNamed(s,"points")*2,o=B.readNamed(s,"radius1"),l=B.readNamed(s,"radius2"),f=360/h,_=new D(0,-1),v=new Array(h),g=0;g<h;g++)v[g]=new de(u.add(_.rotate(f*g).multiply(g%2?l:o)));return n(v,!0,s)}}}});var mt=ot.extend({_class:"CompoundPath",_serializeFields:{children:[]},beans:!0,initialize:function(t){this._children=[],this._namedChildren={},this._initialize(t)||(typeof t=="string"?this.setPathData(t):this.addChildren(Array.isArray(t)?t:arguments))},insertChildren:function e(t,n){var r=n,s=r[0];s&&typeof s[0]=="number"&&(r=[r]);for(var u=n.length-1;u>=0;u--){var h=r[u];r===n&&!(h instanceof we)&&(r=B.slice(r)),Array.isArray(h)?r[u]=new we({segments:h,insert:!1}):h instanceof mt&&(r.splice.apply(r,[u,1].concat(h.removeChildren())),h.remove())}return e.base.call(this,t,r)},reduce:function e(t){for(var n=this._children,r=n.length-1;r>=0;r--){var s=n[r].reduce(t);s.isEmpty()&&s.remove()}if(!n.length){var s=new we(A.NO_INSERT);return s.copyAttributes(this),s.insertAbove(this),this.remove(),s}return e.base.call(this)},isClosed:function(){for(var e=this._children,t=0,n=e.length;t<n;t++)if(!e[t]._closed)return!1;return!0},setClosed:function(e){for(var t=this._children,n=0,r=t.length;n<r;n++)t[n].setClosed(e)},getFirstSegment:function(){var e=this.getFirstChild();return e&&e.getFirstSegment()},getLastSegment:function(){var e=this.getLastChild();return e&&e.getLastSegment()},getCurves:function(){for(var e=this._children,t=[],n=0,r=e.length;n<r;n++)B.push(t,e[n].getCurves());return t},getFirstCurve:function(){var e=this.getFirstChild();return e&&e.getFirstCurve()},getLastCurve:function(){var e=this.getLastChild();return e&&e.getLastCurve()},getArea:function(){for(var e=this._children,t=0,n=0,r=e.length;n<r;n++)t+=e[n].getArea();return t},getLength:function(){for(var e=this._children,t=0,n=0,r=e.length;n<r;n++)t+=e[n].getLength();return t},getPathData:function(e,t){for(var n=this._children,r=[],s=0,u=n.length;s<u;s++){var h=n[s],o=h._matrix;r.push(h.getPathData(e&&!o.isIdentity()?e.appended(o):e,t))}return r.join("")},_hitTestChildren:function e(t,n,r){return e.base.call(this,t,n.class===we||n.type==="path"?n:B.set({},n,{fill:!1}),r)},_draw:function(e,t,n,r){var s=this._children;if(s.length){t=t.extend({dontStart:!0,dontFinish:!0}),e.beginPath();for(var u=0,h=s.length;u<h;u++)s[u].draw(e,t,r);if(!t.clip){this._setStyles(e,t,n);var o=this._style;o.hasFill()&&(e.fill(o.getFillRule()),e.shadowColor="rgba(0,0,0,0)"),o.hasStroke()&&e.stroke()}}},_drawSelected:function(e,t,n){for(var r=this._children,s=0,u=r.length;s<u;s++){var h=r[s],o=h._matrix;n[h._id]||h._drawSelected(e,o.isIdentity()?t:t.appended(o))}}},new function(){function e(t,n){var r=t._children;if(n&&!r.length)throw new Error("Use a moveTo() command first");return r[r.length-1]}return B.each(["lineTo","cubicCurveTo","quadraticCurveTo","curveTo","arcTo","lineBy","cubicCurveBy","quadraticCurveBy","curveBy","arcBy"],function(t){this[t]=function(){var n=e(this,!0);n[t].apply(n,arguments)}},{moveTo:function(){var t=e(this),n=t&&t.isEmpty()?t:new we(A.NO_INSERT);n!==t&&this.addChild(n),n.moveTo.apply(n,arguments)},moveBy:function(){var t=e(this,!0),n=t&&t.getLastSegment(),r=D.read(arguments);this.moveTo(n?r.add(n._point):r)},closePath:function(t){e(this,!0).closePath(t)}})},B.each(["reverse","flatten","simplify","smooth"],function(e){this[e]=function(t){for(var n=this._children,r,s=0,u=n.length;s<u;s++)r=n[s][e](t)||r;return r}},{}));ot.inject(new function(){var e=Math.min,t=Math.max,n=Math.abs,r={unite:{1:!0,2:!0},intersect:{2:!0},subtract:{1:!0},exclude:{1:!0,"-1":!0}};function s(d){return d._children||[d]}function u(d,y){var c=d.clone(!1).reduce({simplify:!0}).transform(null,!0,!0);if(y){for(var b=s(c),S=0,P=b.length;S<P;S++){var d=b[S];!d._closed&&!d.isEmpty()&&(d.closePath(1e-12),d.getFirstSegment().setHandleIn(0,0),d.getLastSegment().setHandleOut(0,0))}c=c.resolveCrossings().reorient(c.getFillRule()==="nonzero",!0)}return c}function h(d,y,c,b,S){var P=new mt(A.NO_INSERT);return P.addChildren(d,!0),P=P.reduce({simplify:y}),S&&S.insert==!1||P.insertAbove(b&&c.isSibling(b)&&c.getIndex()<b.getIndex()?b:c),P.copyAttributes(c,!0),P}function o(d){return d.hasOverlap()||d.isCrossing()}function l(d,y,c,b){if(b&&(b.trace==!1||b.stroke)&&/^(subtract|intersect)$/.test(c))return f(d,y,c);var S=u(d,!0),P=y&&d!==y&&u(y,!0),C=r[c];C[c]=!0,P&&(C.subtract||C.exclude)^(P.isClockwise()^S.isClockwise())&&P.reverse();var E=p(dt.expand(S.getIntersections(P,o))),L=s(S),O=P&&s(P),V=[],T=[],R;function F(ae){for(var ce=0,fe=ae.length;ce<fe;ce++){var pe=ae[ce];B.push(V,pe._segments),B.push(T,pe.getCurves()),pe._overlapsOnly=!0}}function q(ae){for(var ce=[],fe=0,pe=ae&&ae.length;fe<pe;fe++)ce.push(T[ae[fe]]);return ce}if(E.length){F(L),O&&F(O);for(var U=new Array(T.length),G=0,Q=T.length;G<Q;G++)U[G]=T[G].getValues();for(var J=$t.findCurveBoundsCollisions(U,U,0,!0),ee={},G=0;G<T.length;G++){var se=T[G],Z=se._path._id,K=ee[Z]=ee[Z]||{};K[se.getIndex()]={hor:q(J[G].hor),ver:q(J[G].ver)}}for(var G=0,Q=E.length;G<Q;G++)m(E[G]._segment,S,P,ee,C);for(var G=0,Q=V.length;G<Q;G++){var ie=V[G],ue=ie._intersection;ie._winding||m(ie,S,P,ee,C),ue&&ue._overlap||(ie._path._overlapsOnly=!1)}R=k(V,C)}else R=g(O?L.concat(O):L.slice(),function(ae){return!!C[ae]});return h(R,!0,d,y,b)}function f(d,y,c){var b=u(d),S=u(y),P=b.getIntersections(S,o),C=c==="subtract",E=c==="divide",L={},O=[];function V(F){if(!L[F._id]&&(E||S.contains(F.getPointAt(F.getLength()/2))^C))return O.unshift(F),L[F._id]=!0}for(var T=P.length-1;T>=0;T--){var R=P[T].split();R&&(V(R)&&R.getFirstSegment().setHandleIn(0,0),b.getLastSegment().setHandleOut(0,0))}return V(b),h(O,!1,d,y)}function _(d,y){for(var c=d;c;){if(c===y)return;c=c._previous}for(;d._next&&d._next!==y;)d=d._next;if(!d._next){for(;y._previous;)y=y._previous;d._next=y,y._previous=d}}function v(d){for(var y=d.length-1;y>=0;y--)d[y].clearHandles()}function g(d,y,c){var b=d&&d.length;if(b){var S=B.each(d,function(J,ee){this[J._id]={container:null,winding:J.isClockwise()?1:-1,index:ee}},{}),P=d.slice().sort(function(J,ee){return n(ee.getArea())-n(J.getArea())}),C=P[0],E=$t.findItemBoundsCollisions(P,null,Ae.GEOMETRIC_EPSILON);c==null&&(c=C.isClockwise());for(var L=0;L<b;L++){var O=P[L],V=S[O._id],T=0,R=E[L];if(R){for(var F=null,q=R.length-1;q>=0;q--)if(R[q]<L){F=F||O.getInteriorPoint();var U=P[R[q]];if(U.contains(F)){var G=S[U._id];T=G.winding,V.winding+=T,V.container=G.exclude?G.container:U;break}}}if(y(V.winding)===y(T))V.exclude=!0,d[V.index]=null;else{var Q=V.container;O.setClockwise(Q?!Q.isClockwise():c)}}}return d}function p(d,y,c){var b=y&&[],S=1e-8,P=1-S,C=!1,E=c||[],L=c&&{},O,V,T;function R(ce){return ce._path._id+"."+ce._segment1._index}for(var F=(c&&c.length)-1;F>=0;F--){var q=c[F];q._path&&(L[R(q)]=!0)}for(var F=d.length-1;F>=0;F--){var U=d[F],G=U._time,Q=G,J=y&&!y(U),q=U._curve,ee;if(q&&(q!==V?(C=!q.hasHandles()||L&&L[R(q)],O=[],T=null,V=q):T>=S&&(G/=T)),J){O&&O.push(U);continue}else y&&b.unshift(U);if(T=Q,G<S)ee=q._segment1;else if(G>P)ee=q._segment2;else{var se=q.divideAtTime(G,!0);C&&E.push(q,se),ee=se._segment1;for(var Z=O.length-1;Z>=0;Z--){var K=O[Z];K._time=(K._time-G)/(1-G)}}U._setSegment(ee);var ie=ee._intersection,ue=U._intersection;if(ie){_(ie,ue);for(var ae=ie;ae;)_(ae._intersection,ie),ae=ae._next}else ee._intersection=ue}return c||v(E),b||d}function w(d,y,c,b,S){var P=Array.isArray(y)?y:y[c?"hor":"ver"],C=c?1:0,E=C^1,L=[d.x,d.y],O=L[C],V=L[E],T=1e-9,R=1e-6,F=O-T,q=O+T,U=0,G=0,Q=0,J=0,ee=!1,se=!1,Z=1,K=[],ie,ue;function ae(Le){var ze=Le[E+0],st=Le[E+6];if(!(V<e(ze,st)||V>t(ze,st))){var We=Le[C+0],je=Le[C+2],Ye=Le[C+4],pt=Le[C+6];if(ze===st){(We<q&&pt>F||pt<q&&We>F)&&(ee=!0);return}var ct=V===ze?0:V===st||F>t(We,je,Ye,pt)||q<e(We,je,Ye,pt)?1:te.solveCubic(Le,E,V,K,0,1)>0?K[0]:1,at=ct===0?We:ct===1?pt:te.getPoint(Le,ct)[c?"y":"x"],ht=ze>st?1:-1,wt=ie[E]>ie[E+6]?1:-1,gt=ie[C+6];return V!==ze?(at<F?Q+=ht:at>q?J+=ht:ee=!0,at>O-R&&at<O+R&&(Z/=2)):(ht!==wt?We<F?Q+=ht:We>q&&(J+=ht):We!=gt&&(gt<q&&at>q?(J+=ht,ee=!0):gt>F&&at<F&&(Q+=ht,ee=!0)),Z/=4),ie=Le,!S&&at>F&&at<q&&te.getTangent(Le,ct)[c?"x":"y"]===0&&w(d,y,!c,b,!0)}}function ce(Le){var ze=Le[E+0],st=Le[E+2],We=Le[E+4],je=Le[E+6];if(V<=t(ze,st,We,je)&&V>=e(ze,st,We,je)){for(var Ye=Le[C+0],pt=Le[C+2],ct=Le[C+4],at=Le[C+6],ht=F>t(Ye,pt,ct,at)||q<e(Ye,pt,ct,at)?[Le]:te.getMonoCurves(Le,c),wt,gt=0,It=ht.length;gt<It;gt++)if(wt=ae(ht[gt]))return wt}}for(var fe=0,pe=P.length;fe<pe;fe++){var me=P[fe],_e=me._path,re=me.getValues(),Oe;if((!fe||P[fe-1]._path!==_e)&&(ie=null,_e._closed||(ue=te.getValues(_e.getLastCurve().getSegment2(),me.getSegment1(),null,!b),ue[E]!==ue[E+6]&&(ie=ue)),!ie)){ie=re;for(var Je=_e.getLastCurve();Je&&Je!==me;){var Ue=Je.getValues();if(Ue[E]!==Ue[E+6]){ie=Ue;break}Je=Je.getPrevious()}}if(Oe=ce(re))return Oe;if(fe+1===pe||P[fe+1]._path!==_e){if(ue&&(Oe=ce(ue)))return Oe;ee&&!Q&&!J&&(Q=J=_e.isClockwise(b)^c?1:-1),U+=Q,G+=J,Q=J=0,ee&&(se=!0,ee=!1),ue=null}}return U=n(U),G=n(G),{winding:t(U,G),windingL:U,windingR:G,quality:Z,onPath:se}}function m(d,y,c,b,S){var P=[],C=d,E=0,T;do{var L=d.getCurve();if(L){var O=L.getLength();P.push({segment:d,curve:L,length:O}),E+=O}d=d.getNext()}while(d&&!d._intersection&&d!==C);for(var V=[.5,.25,.75],T={winding:0,quality:-1},R=.001,F=1-R,q=0;q<V.length&&T.quality<.5;q++)for(var O=E*V[q],U=0,G=P.length;U<G;U++){var Q=P[U],J=Q.length;if(O<=J){var L=Q.curve,ee=L._path,se=ee._parent,Z=se instanceof mt?se:ee,K=Ae.clamp(L.getTimeAt(O),R,F),ie=L.getPointAtTime(K),ue=n(L.getTangentAtTime(K).y)<Math.SQRT1_2,ae=null;if(S.subtract&&c){var ce=Z===y?c:y,fe=ce._getWinding(ie,ue,!0);if(Z===y&&fe.winding||Z===c&&!fe.winding){if(fe.quality<1)continue;ae={winding:0,quality:1}}}ae=ae||w(ie,b[ee._id][L.getIndex()],ue,!0),ae.quality>T.quality&&(T=ae);break}O-=J}for(var U=P.length-1;U>=0;U--)P[U].segment._winding=T}function k(d,y){var c=[],b;function S(pe){var me;return!!(pe&&!pe._visited&&(!y||y[(me=pe._winding||{}).winding]&&!(y.unite&&me.winding===2&&me.windingL&&me.windingR)))}function P(pe){if(pe){for(var me=0,_e=b.length;me<_e;me++)if(pe===b[me])return!0}return!1}function C(pe){for(var me=pe._segments,_e=0,re=me.length;_e<re;_e++)me[_e]._visited=!0}function E(pe,me){var _e=pe._intersection,re=_e,Oe=[];me&&(b=[pe]);function Je(Ue,Le){for(;Ue&&Ue!==Le;){var ze=Ue._segment,st=ze&&ze._path;if(st){var We=ze.getNext()||st.getFirstSegment(),je=We._intersection;ze!==pe&&(P(ze)||P(We)||We&&S(ze)&&(S(We)||je&&S(je._segment)))&&Oe.push(ze),me&&b.push(ze)}Ue=Ue._next}}if(_e){for(Je(_e);_e&&_e._previous;)_e=_e._previous;Je(_e,re)}return Oe}d.sort(function(pe,me){var _e=pe._intersection,re=me._intersection,Oe=!!(_e&&_e._overlap),Je=!!(re&&re._overlap),Ue=pe._path,Le=me._path;return Oe^Je?Oe?1:-1:!_e^!re?_e?1:-1:Ue!==Le?Ue._id-Le._id:pe._index-me._index});for(var L=0,O=d.length;L<O;L++){var V=d[L],T=S(V),R=null,F=!1,q=!0,U=[],G,Q,J;if(T&&V._path._overlapsOnly){var ee=V._path,se=V._intersection._segment._path;ee.compare(se)&&(ee.getArea()&&c.push(ee.clone(!1)),C(ee),C(se),T=!1)}for(;T;){var Z=!R,K=E(V,Z),ie=K.shift(),F=!Z&&(P(V)||P(ie)),ue=!F&&ie;if(Z&&(R=new we(A.NO_INSERT),G=null),F){(V.isFirst()||V.isLast())&&(q=V._path._closed),V._visited=!0;break}if(ue&&G&&(U.push(G),G=null),G||(ue&&K.push(V),G={start:R._segments.length,crossings:K,visited:Q=[],handleIn:J}),ue&&(V=ie),!S(V)){R.removeSegments(G.start);for(var ae=0,ce=Q.length;ae<ce;ae++)Q[ae]._visited=!1;Q.length=0;do V=G&&G.crossings.shift(),(!V||!V._path)&&(V=null,G=U.pop(),G&&(Q=G.visited,J=G.handleIn));while(G&&!S(V));if(!V)break}var fe=V.getNext();R.add(new de(V._point,J,fe&&V._handleOut)),V._visited=!0,Q.push(V),V=fe||V._path.getFirstSegment(),J=fe&&fe._handleIn}F&&(q&&(R.getFirstSegment().setHandleIn(J),R.setClosed(q)),R.getArea()!==0&&c.push(R))}return c}return{_getWinding:function(d,y,c){return w(d,this.getCurves(),y,c)},unite:function(d,y){return l(this,d,"unite",y)},intersect:function(d,y){return l(this,d,"intersect",y)},subtract:function(d,y){return l(this,d,"subtract",y)},exclude:function(d,y){return l(this,d,"exclude",y)},divide:function(d,y){return y&&(y.trace==!1||y.stroke)?f(this,d,"divide"):h([this.subtract(d,y),this.intersect(d,y)],!0,this,d,y)},resolveCrossings:function(){var d=this._children,y=d||[this];function c(G,Q){var J=G&&G._intersection;return J&&J._overlap&&J._path===Q}var b=!1,S=!1,P=this.getIntersections(null,function(G){return G.hasOverlap()&&(b=!0)||G.isCrossing()&&(S=!0)}),C=b&&S&&[];if(P=dt.expand(P),b)for(var E=p(P,function(G){return G.hasOverlap()},C),L=E.length-1;L>=0;L--){var O=E[L],V=O._path,T=O._segment,R=T.getPrevious(),F=T.getNext();c(R,V)&&c(F,V)&&(T.remove(),R._handleOut._set(0,0),F._handleIn._set(0,0),R!==T&&!R.getCurve().hasLength()&&(F._handleIn.set(R._handleIn),R.remove()))}S&&(p(P,b&&function(G){var Q=G.getCurve(),J=G.getSegment(),ee=G._intersection,se=ee._curve,Z=ee._segment;if(Q&&se&&Q._path&&se._path)return!0;J&&(J._intersection=null),Z&&(Z._intersection=null)},C),C&&v(C),y=k(B.each(y,function(G){B.push(this,G._segments)},[])));var q=y.length,U;return q>1&&d?(y!==d&&this.setChildren(y),U=this):q===1&&!d&&(y[0]!==this&&this.setSegments(y[0].removeSegments()),U=this),U||(U=new mt(A.NO_INSERT),U.addChildren(y),U=U.reduce(),U.copyAttributes(this),this.replaceWith(U)),U},reorient:function(d,y){var c=this._children;return c&&c.length?this.setChildren(g(this.removeChildren(),function(b){return!!(d?b:b&1)},y)):y!==Y&&this.setClockwise(y),this},getInteriorPoint:function(){var d=this.getBounds(),y=d.getCenter(!0);if(!this.contains(y)){for(var c=this.getCurves(),b=y.y,S=[],P=[],C=0,E=c.length;C<E;C++){var L=c[C].getValues(),O=L[1],V=L[3],T=L[5],R=L[7];if(b>=e(O,V,T,R)&&b<=t(O,V,T,R))for(var F=te.getMonoCurves(L),q=0,U=F.length;q<U;q++){var G=F[q],Q=G[1],J=G[7];if(Q!==J&&(b>=Q&&b<=J||b>=J&&b<=Q)){var ee=b===Q?G[0]:b===J?G[6]:te.solveCubic(G,1,b,P,0,1)===1?te.getPoint(G,P[0]).x:(G[0]+G[6])/2;S.push(ee)}}}S.length>1&&(S.sort(function(se,Z){return se-Z}),y.x=(S[0]+S[1])/2)}return y}}});var St=B.extend({_class:"PathFlattener",initialize:function(e,t,n,r,s){var u=[],h=[],o=0,l=1/(n||32),f=e._segments,_=f[0],v;function g(k,d){var y=te.getValues(k,d,s);u.push(y),p(y,k._index,0,1)}function p(k,d,y,c){if(c-y>l&&!(r&&te.isStraight(k))&&!te.isFlatEnough(k,t||.25)){var b=te.subdivide(k,.5),S=(y+c)/2;p(b[0],d,y,S),p(b[1],d,S,c)}else{var P=k[6]-k[0],C=k[7]-k[1],E=Math.sqrt(P*P+C*C);E>0&&(o+=E,h.push({offset:o,curve:k,index:d,time:c}))}}for(var w=1,m=f.length;w<m;w++)v=f[w],g(_,v),_=v;e._closed&&g(v||_,f[0]),this.curves=u,this.parts=h,this.length=o,this.index=0},_get:function(e){for(var t=this.parts,n=t.length,r,s=this.index;r=s,!(!s||t[--s].offset<e););for(;r<n;r++){var u=t[r];if(u.offset>=e){this.index=r;var h=t[r-1],o=h&&h.index===u.index?h.time:0,l=h?h.offset:0;return{index:u.index,time:o+(u.time-o)*(e-l)/(u.offset-l)}}}return{index:t[n-1].index,time:1}},drawPart:function(e,t,n){for(var r=this._get(t),s=this._get(n),u=r.index,h=s.index;u<=h;u++){var o=te.getPart(this.curves[u],u===r.index?r.time:0,u===s.index?s.time:1);u===r.index&&e.moveTo(o[0],o[1]),e.bezierCurveTo.apply(e,o.slice(2))}}},B.each(te._evaluateMethods,function(e){this[e+"At"]=function(t){var n=this._get(t);return te[e](this.curves[n.index],n.time)}},{})),qt=B.extend({initialize:function(e){for(var t=this.points=[],n=e._segments,r=e._closed,s=0,u,h=n.length;s<h;s++){var o=n[s].point;(!u||!u.equals(o))&&t.push(u=o.clone())}r&&(t.unshift(t[t.length-1]),t.push(t[1])),this.closed=r},fit:function(e){var t=this.points,n=t.length,r=null;return n>0&&(r=[new de(t[0])],n>1&&(this.fitCubic(r,e,0,n-1,t[1].subtract(t[0]),t[n-2].subtract(t[n-1])),this.closed&&(r.shift(),r.pop()))),r},fitCubic:function(e,t,n,r,s,u){var h=this.points;if(r-n===1){var o=h[n],l=h[r],f=o.getDistance(l)/3;this.addCurve(e,[o,o.add(s.normalize(f)),l.add(u.normalize(f)),l]);return}for(var _=this.chordLengthParameterize(n,r),v=Math.max(t,t*t),g,p=!0,w=0;w<=4;w++){var m=this.generateBezier(n,r,_,s,u),k=this.findMaxError(n,r,m,_);if(k.error<t&&p){this.addCurve(e,m);return}if(g=k.index,k.error>=v)break;p=this.reparameterize(n,r,_,m),v=k.error}var d=h[g-1].subtract(h[g+1]);this.fitCubic(e,t,n,g,s,d),this.fitCubic(e,t,g,r,d.negate(),u)},addCurve:function(e,t){var n=e[e.length-1];n.setHandleOut(t[1].subtract(t[0])),e.push(new de(t[3],t[2].subtract(t[3])))},generateBezier:function(e,t,n,r,s){for(var u=1e-12,h=Math.abs,o=this.points,l=o[e],f=o[t],_=[[0,0],[0,0]],v=[0,0],g=0,p=t-e+1;g<p;g++){var w=n[g],m=1-w,k=3*w*m,d=m*m*m,y=k*m,c=k*w,b=w*w*w,S=r.normalize(y),P=s.normalize(c),C=o[e+g].subtract(l.multiply(d+y)).subtract(f.multiply(c+b));_[0][0]+=S.dot(S),_[0][1]+=S.dot(P),_[1][0]=_[0][1],_[1][1]+=P.dot(P),v[0]+=S.dot(C),v[1]+=P.dot(C)}var E=_[0][0]*_[1][1]-_[1][0]*_[0][1],L,O;if(h(E)>u){var V=_[0][0]*v[1]-_[1][0]*v[0],T=v[0]*_[1][1]-v[1]*_[0][1];L=T/E,O=V/E}else{var R=_[0][0]+_[0][1],F=_[1][0]+_[1][1];L=O=h(R)>u?v[0]/R:h(F)>u?v[1]/F:0}var q=f.getDistance(l),U=u*q,G,Q;if(L<U||O<U)L=O=q/3;else{var J=f.subtract(l);G=r.normalize(L),Q=s.normalize(O),G.dot(J)-Q.dot(J)>q*q&&(L=O=q/3,G=Q=null)}return[l,l.add(G||r.normalize(L)),f.add(Q||s.normalize(O)),f]},reparameterize:function(e,t,n,r){for(var s=e;s<=t;s++)n[s-e]=this.findRoot(r,this.points[s],n[s-e]);for(var s=1,u=n.length;s<u;s++)if(n[s]<=n[s-1])return!1;return!0},findRoot:function(e,t,n){for(var r=[],s=[],u=0;u<=2;u++)r[u]=e[u+1].subtract(e[u]).multiply(3);for(var u=0;u<=1;u++)s[u]=r[u+1].subtract(r[u]).multiply(2);var h=this.evaluate(3,e,n),o=this.evaluate(2,r,n),l=this.evaluate(1,s,n),f=h.subtract(t),_=o.dot(o)+f.dot(l);return Ae.isMachineZero(_)?n:n-f.dot(o)/_},evaluate:function(e,t,n){for(var r=t.slice(),s=1;s<=e;s++)for(var u=0;u<=e-s;u++)r[u]=r[u].multiply(1-n).add(r[u+1].multiply(n));return r[0]},chordLengthParameterize:function(e,t){for(var n=[0],r=e+1;r<=t;r++)n[r-e]=n[r-e-1]+this.points[r].getDistance(this.points[r-1]);for(var r=1,s=t-e;r<=s;r++)n[r]/=n[s];return n},findMaxError:function(e,t,n,r){for(var s=Math.floor((t-e+1)/2),u=0,h=e+1;h<t;h++){var o=this.evaluate(3,n,r[h-e]),l=o.subtract(this.points[h]),f=l.x*l.x+l.y*l.y;f>=u&&(u=f,s=h)}return{error:u,index:s}}}),Nt=A.extend({_class:"TextItem",_applyMatrix:!1,_canApplyMatrix:!1,_serializeFields:{content:null},_boundsOptions:{stroke:!1,handle:!1},initialize:function(t){this._content="",this._lines=[];var n=t&&B.isPlainObject(t)&&t.x===Y&&t.y===Y;this._initialize(n&&t,!n&&D.read(arguments))},_equals:function(e){return this._content===e._content},copyContent:function(e){this.setContent(e._content)},getContent:function(){return this._content},setContent:function(e){this._content=""+e,this._lines=this._content.split(/\r\n|\n|\r/mg),this._changed(521)},isEmpty:function(){return!this._content},getCharacterStyle:"#getStyle",setCharacterStyle:"#setStyle",getParagraphStyle:"#getStyle",setParagraphStyle:"#setStyle"}),ti=Nt.extend({_class:"PointText",initialize:function(){Nt.apply(this,arguments)},getPoint:function(){var e=this._matrix.getTranslation();return new et(e.x,e.y,this,"setPoint")},setPoint:function(){var e=D.read(arguments);this.translate(e.subtract(this._matrix.getTranslation()))},_draw:function(e,t,n){if(this._content){this._setStyles(e,t,n);var r=this._lines,s=this._style,u=s.hasFill(),h=s.hasStroke(),o=s.getLeading(),l=e.shadowColor;e.font=s.getFontStyle(),e.textAlign=s.getJustification();for(var f=0,_=r.length;f<_;f++){e.shadowColor=l;var v=r[f];u&&(e.fillText(v,0,0),e.shadowColor="rgba(0,0,0,0)"),h&&e.strokeText(v,0,0),e.translate(0,o)}}},_getBounds:function(e,t){var n=this._style,r=this._lines,s=r.length,u=n.getJustification(),h=n.getLeading(),o=this.getView().getTextWidth(n.getFontStyle(),r),l=0;u!=="left"&&(l-=o/(u==="center"?2:1));var f=new le(l,s?-.75*h:0,o,s*h);return e?e._transformBounds(f,f):f}}),Ge=B.extend(new function(){var e={gray:["gray"],rgb:["red","green","blue"],hsb:["hue","saturation","brightness"],hsl:["hue","saturation","lightness"],gradient:["gradient","origin","destination","highlight"]},t={},n={transparent:[0,0,0,0]},r;function s(o){var l=o.match(/^#([\da-f]{2})([\da-f]{2})([\da-f]{2})([\da-f]{2})?$/i)||o.match(/^#([\da-f])([\da-f])([\da-f])([\da-f])?$/i),f="rgb",_;if(l){var v=l[4]?4:3;_=new Array(v);for(var g=0;g<v;g++){var p=l[g+1];_[g]=parseInt(p.length==1?p+p:p,16)/255}}else if(l=o.match(/^(rgb|hsl)a?\((.*)\)$/)){f=l[1],_=l[2].trim().split(/[,\s]+/g);for(var w=f==="hsl",g=0,m=Math.min(_.length,4);g<m;g++){var k=_[g],p=parseFloat(k);if(w)if(g===0){var d=k.match(/([a-z]*)$/)[1];p*={turn:360,rad:180/Math.PI,grad:.9}[d]||1}else g<3&&(p/=100);else g<3&&(p/=/%$/.test(k)?100:255);_[g]=p}}else{var y=n[o];if(!y)if(Ve){r||(r=Me.getContext(1,1,{willReadFrequently:!0}),r.globalCompositeOperation="copy"),r.fillStyle="rgba(0,0,0,0)",r.fillStyle=o,r.fillRect(0,0,1,1);var c=r.getImageData(0,0,1,1).data;y=n[o]=[c[0]/255,c[1]/255,c[2]/255]}else y=[0,0,0];_=y.slice()}return[f,_]}var u=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]],h={"rgb-hsb":function(o,l,f){var _=Math.max(o,l,f),v=Math.min(o,l,f),g=_-v,p=g===0?0:(_==o?(l-f)/g+(l<f?6:0):_==l?(f-o)/g+2:(o-l)/g+4)*60;return[p,_===0?0:g/_,_]},"hsb-rgb":function(o,l,f){o=(o/60%6+6)%6;var v=Math.floor(o),_=o-v,v=u[v],g=[f,f*(1-l),f*(1-l*_),f*(1-l*(1-_))];return[g[v[0]],g[v[1]],g[v[2]]]},"rgb-hsl":function(o,l,f){var _=Math.max(o,l,f),v=Math.min(o,l,f),g=_-v,p=g===0,w=p?0:(_==o?(l-f)/g+(l<f?6:0):_==l?(f-o)/g+2:(o-l)/g+4)*60,m=(_+v)/2,k=p?0:m<.5?g/(_+v):g/(2-_-v);return[w,k,m]},"hsl-rgb":function(o,l,f){if(o=(o/360%1+1)%1,l===0)return[f,f,f];for(var _=[o+1/3,o,o-1/3],v=f<.5?f*(1+l):f+l-f*l,g=2*f-v,p=[],w=0;w<3;w++){var m=_[w];m<0&&(m+=1),m>1&&(m-=1),p[w]=6*m<1?g+(v-g)*6*m:2*m<1?v:3*m<2?g+(v-g)*(2/3-m)*6:g}return p},"rgb-gray":function(o,l,f){return[o*.2989+l*.587+f*.114]},"gray-rgb":function(o){return[o,o,o]},"gray-hsb":function(o){return[0,0,o]},"gray-hsl":function(o){return[0,0,o]},"gradient-rgb":function(){return[]},"rgb-gradient":function(){return[]}};return B.each(e,function(o,l){t[l]=[],B.each(o,function(f,_){var v=B.capitalize(f),g=/^(hue|saturation)$/.test(f),p=t[l][_]=l==="gradient"?f==="gradient"?function(w){var m=this._components[0];return w=ii.read(Array.isArray(w)?w:arguments,0,{readNull:!0}),m!==w&&(m&&m._removeOwner(this),w&&w._addOwner(this)),w}:function(){return D.read(arguments,0,{readNull:f==="highlight",clone:!0})}:function(w){return w==null||isNaN(w)?0:+w};this["get"+v]=function(){return this._type===l||g&&/^hs[bl]$/.test(this._type)?this._components[_]:this._convert(l)[_]},this["set"+v]=function(w){this._type!==l&&!(g&&/^hs[bl]$/.test(this._type))&&(this._components=this._convert(l),this._properties=e[l],this._type=l),this._components[_]=p.call(this,w),this._changed()}},this)},{_class:"Color",_readIndex:!0,initialize:function o(l){var f=arguments,_=this.__read,v=0,g,p,w,m;Array.isArray(l)&&(f=l,l=f[0]);var k=l!=null&&typeof l;if(k==="string"&&l in e&&(g=l,l=f[1],Array.isArray(l)?(p=l,w=f[2]):(_&&(v=1),f=B.slice(f,1),k=typeof l)),!p){if(m=k==="number"?f:k==="object"&&l.length!=null?l:null,m){g||(g=m.length>=3?"rgb":"gray");var d=e[g].length;w=m[d],_&&(v+=m===arguments?d+(w!=null?1:0):1),m.length>d&&(m=B.slice(m,0,d))}else if(k==="string"){var y=s(l);g=y[0],p=y[1],p.length===4&&(w=p[3],p.length--)}else if(k==="object")if(l.constructor===o){if(g=l._type,p=l._components.slice(),w=l._alpha,g==="gradient")for(var c=1,b=p.length;c<b;c++){var S=p[c];S&&(p[c]=S.clone())}}else if(l.constructor===ii)g="gradient",m=f;else{g="hue"in l?"lightness"in l?"hsl":"hsb":"gradient"in l||"stops"in l||"radial"in l?"gradient":"gray"in l?"gray":"rgb";var P=e[g],C=t[g];this._components=p=[];for(var c=0,b=P.length;c<b;c++){var E=l[P[c]];E==null&&!c&&g==="gradient"&&"stops"in l&&(E={stops:l.stops,radial:l.radial}),E=C[c].call(this,E),E!=null&&(p[c]=E)}w=l.alpha}_&&g&&(v=1)}if(this._type=g||"rgb",!p){this._components=p=[];for(var C=t[this._type],c=0,b=C.length;c<b;c++){var E=C[c].call(this,m&&m[c]);E!=null&&(p[c]=E)}}return this._components=p,this._properties=e[this._type],this._alpha=w,_&&(this.__read=v),this},set:"#initialize",_serialize:function(o,l){var f=this.getComponents();return B.serialize(/^(gray|rgb)$/.test(this._type)?f:[this._type].concat(f),o,!0,l)},_changed:function(){this._canvasStyle=null,this._owner&&(this._setter?this._owner[this._setter](this):this._owner._changed(129))},_convert:function(o){var l;return this._type===o?this._components.slice():(l=h[this._type+"-"+o])?l.apply(this,this._components):h["rgb-"+o].apply(this,h[this._type+"-rgb"].apply(this,this._components))},convert:function(o){return new Ge(o,this._convert(o),this._alpha)},getType:function(){return this._type},setType:function(o){this._components=this._convert(o),this._properties=e[o],this._type=o},getComponents:function(){var o=this._components.slice();return this._alpha!=null&&o.push(this._alpha),o},getAlpha:function(){return this._alpha!=null?this._alpha:1},setAlpha:function(o){this._alpha=o==null?null:Math.min(Math.max(o,0),1),this._changed()},hasAlpha:function(){return this._alpha!=null},equals:function(o){var l=B.isPlainValue(o,!0)?Ge.read(arguments):o;return l===this||l&&this._class===l._class&&this._type===l._type&&this.getAlpha()===l.getAlpha()&&B.equals(this._components,l._components)||!1},toString:function(){for(var o=this._properties,l=[],f=this._type==="gradient",_=lt.instance,v=0,g=o.length;v<g;v++){var p=this._components[v];p!=null&&l.push(o[v]+": "+(f?p:_.number(p)))}return this._alpha!=null&&l.push("alpha: "+_.number(this._alpha)),"{ "+l.join(", ")+" }"},toCSS:function(o){var l=this._convert("rgb"),f=o||this._alpha==null?1:this._alpha;function _(v){return Math.round((v<0?0:v>1?1:v)*255)}return l=[_(l[0]),_(l[1]),_(l[2])],f<1&&l.push(f<0?0:f),o?"#"+((1<<24)+(l[0]<<16)+(l[1]<<8)+l[2]).toString(16).slice(1):(l.length==4?"rgba(":"rgb(")+l.join(",")+")"},toCanvasStyle:function(o,l){if(this._canvasStyle)return this._canvasStyle;if(this._type!=="gradient")return this._canvasStyle=this.toCSS();var f=this._components,_=f[0],v=_._stops,g=f[1],p=f[2],w=f[3],m=l&&l.inverted(),k;if(m&&(g=m._transformPoint(g),p=m._transformPoint(p),w&&(w=m._transformPoint(w))),_._radial){var d=p.getDistance(g);if(w){var y=w.subtract(g);y.getLength()>d&&(w=g.add(y.normalize(d-.1)))}var c=w||g;k=o.createRadialGradient(c.x,c.y,0,g.x,g.y,d)}else k=o.createLinearGradient(g.x,g.y,p.x,p.y);for(var b=0,S=v.length;b<S;b++){var P=v[b],C=P._offset;k.addColorStop(C??b/(S-1),P._color.toCanvasStyle())}return this._canvasStyle=k},transform:function(o){if(this._type==="gradient"){for(var l=this._components,f=1,_=l.length;f<_;f++){var v=l[f];o._transformPoint(v,v,!0)}this._changed()}},statics:{_types:e,random:function(){var o=Math.random;return new Ge(o(),o(),o())},_setOwner:function(o,l,f){return o&&(o._owner&&l&&o._owner!==l&&(o=o.clone()),!o._owner^!l&&(o._owner=l||null,o._setter=f||null)),o}}})},new function(){var e={add:function(t,n){return t+n},subtract:function(t,n){return t-n},multiply:function(t,n){return t*n},divide:function(t,n){return t/n}};return B.each(e,function(t,n){this[n]=function(r){r=Ge.read(arguments);for(var s=this._type,u=this._components,h=r._convert(s),o=0,l=u.length;o<l;o++)h[o]=t(u[o],h[o]);return new Ge(s,h,this._alpha!=null?t(this._alpha,r.getAlpha()):null)}},{})}),ii=B.extend({_class:"Gradient",initialize:function(t,n){this._id=ei.get(),t&&B.isPlainObject(t)&&(this.set(t),t=n=null),this._stops==null&&this.setStops(t||["white","black"]),this._radial==null&&this.setRadial(typeof n=="string"&&n==="radial"||n||!1)},_serialize:function(e,t){return t.add(this,function(){return B.serialize([this._stops,this._radial],e,!0,t)})},_changed:function(){for(var e=0,t=this._owners&&this._owners.length;e<t;e++)this._owners[e]._changed()},_addOwner:function(e){this._owners||(this._owners=[]),this._owners.push(e)},_removeOwner:function(e){var t=this._owners?this._owners.indexOf(e):-1;t!=-1&&(this._owners.splice(t,1),this._owners.length||(this._owners=Y))},clone:function(){for(var e=[],t=0,n=this._stops.length;t<n;t++)e[t]=this._stops[t].clone();return new ii(e,this._radial)},getStops:function(){return this._stops},setStops:function(e){if(e.length<2)throw new Error("Gradient stop list needs to contain at least two stops.");var t=this._stops;if(t)for(var n=0,r=t.length;n<r;n++)t[n]._owner=Y;t=this._stops=di.readList(e,0,{clone:!0});for(var n=0,r=t.length;n<r;n++)t[n]._owner=this;this._changed()},getRadial:function(){return this._radial},setRadial:function(e){this._radial=e,this._changed()},equals:function(e){if(e===this)return!0;if(e&&this._class===e._class){var t=this._stops,n=e._stops,r=t.length;if(r===n.length){for(var s=0;s<r;s++)if(!t[s].equals(n[s]))return!1;return!0}}return!1}}),di=B.extend({_class:"GradientStop",initialize:function(t,n){var r=t,s=n;typeof t=="object"&&n===Y&&(Array.isArray(t)&&typeof t[0]!="number"?(r=t[0],s=t[1]):("color"in t||"offset"in t||"rampPoint"in t)&&(r=t.color,s=t.offset||t.rampPoint||0)),this.setColor(r),this.setOffset(s)},clone:function(){return new di(this._color.clone(),this._offset)},_serialize:function(e,t){var n=this._color,r=this._offset;return B.serialize(r==null?[n]:[n,r],e,!0,t)},_changed:function(){this._owner&&this._owner._changed(129)},getOffset:function(){return this._offset},setOffset:function(e){this._offset=e,this._changed()},getRampPoint:"#getOffset",setRampPoint:"#setOffset",getColor:function(){return this._color},setColor:function(){Ge._setOwner(this._color,null),this._color=Ge._setOwner(Ge.read(arguments,0),this,"setColor"),this._changed()},equals:function(e){return e===this||e&&this._class===e._class&&this._color.equals(e._color)&&this._offset==e._offset||!1}}),kt=B.extend(new function(){var e={fillColor:null,fillRule:"nonzero",strokeColor:null,strokeWidth:1,strokeCap:"butt",strokeJoin:"miter",strokeScaling:!0,miterLimit:10,dashOffset:0,dashArray:[],shadowColor:null,shadowBlur:0,shadowOffset:new D,selectedColor:null},t=B.set({},e,{fontFamily:"sans-serif",fontWeight:"normal",fontSize:12,leading:null,justification:"left"}),n=B.set({},t,{fillColor:new Ge}),r={strokeWidth:193,strokeCap:193,strokeJoin:193,strokeScaling:201,miterLimit:193,fontFamily:9,fontWeight:9,fontSize:9,font:9,leading:9,justification:9},s={beans:!0},u={_class:"Style",beans:!0,initialize:function(o,l,f){this._values={},this._owner=l,this._project=l&&l._project||f||he.project,this._defaults=!l||l instanceof De?t:l instanceof Nt?n:e,o&&this.set(o)}};return B.each(t,function(h,o){var l=/Color$/.test(o),f=o==="shadowOffset",_=B.capitalize(o),v=r[o],g="set"+_,p="get"+_;u[g]=function(w){var m=this._owner,k=m&&m._children,d=k&&k.length>0&&!(m instanceof mt);if(d)for(var y=0,c=k.length;y<c;y++)k[y]._style[g](w);if((o==="selectedColor"||!d)&&o in this._defaults){var b=this._values[o];b!==w&&(l&&(b&&(Ge._setOwner(b,null),b._canvasStyle=null),w&&w.constructor===Ge&&(w=Ge._setOwner(w,m,d&&g))),this._values[o]=w,m&&m._changed(v||129))}},u[p]=function(w){var m=this._owner,k=m&&m._children,d=k&&k.length>0&&!(m instanceof mt),y;if(d&&!w)for(var c=0,b=k.length;c<b;c++){var S=k[c]._style[p]();if(!c)y=S;else if(!B.equals(y,S))return Y}else if(o in this._defaults){var y=this._values[o];if(y===Y)y=this._defaults[o],y&&y.clone&&(y=y.clone());else{var P=l?Ge:f?D:null;P&&!(y&&y.constructor===P)&&(this._values[o]=y=P.read([y],0,{readNull:!0,clone:!0}))}}return y&&l&&(y=Ge._setOwner(y,m,d&&g)),y},s[p]=function(w){return this._style[p](w)},s[g]=function(w){this._style[g](w)}}),B.each({Font:"FontFamily",WindingRule:"FillRule"},function(h,o){var l="get"+o,f="set"+o;u[l]=s[l]="#get"+h,u[f]=s[f]="#set"+h}),A.inject(s),u},{set:function(e){var t=e instanceof kt,n=t?e._values:e;if(n){for(var r in n)if(r in this._defaults){var s=n[r];this[r]=s&&t&&s.clone?s.clone():s}}},equals:function(e){function t(n,r,s){var u=n._values,h=r._values,o=r._defaults;for(var l in u){var f=u[l],_=h[l];if(!(s&&l in h)&&!B.equals(f,_===Y?o[l]:_))return!1}return!0}return e===this||e&&this._class===e._class&&t(this,e)&&t(e,this,!0)||!1},_dispose:function(){var e;e=this.getFillColor(),e&&(e._canvasStyle=null),e=this.getStrokeColor(),e&&(e._canvasStyle=null),e=this.getShadowColor(),e&&(e._canvasStyle=null)},hasFill:function(){var e=this.getFillColor();return!!e&&e.alpha>0},hasStroke:function(){var e=this.getStrokeColor();return!!e&&e.alpha>0&&this.getStrokeWidth()>0},hasShadow:function(){var e=this.getShadowColor();return!!e&&e.alpha>0&&(this.getShadowBlur()>0||!this.getShadowOffset().isZero())},getView:function(){return this._project._view},getFontStyle:function(){var e=this.getFontSize();return this.getFontWeight()+" "+e+(/[a-z]/i.test(e+"")?" ":"px ")+this.getFontFamily()},getFont:"#getFontFamily",setFont:"#setFontFamily",getLeading:function e(){var t=e.base.call(this),n=this.getFontSize();return/pt|em|%|px/.test(n)&&(n=this.getView().getPixelSize(n)),t??n*1.2}}),Re=new function(){function e(t,n,r,s){for(var u=["","webkit","moz","Moz","ms","o"],h=n[0].toUpperCase()+n.substring(1),o=0;o<6;o++){var l=u[o],f=l?l+h:n;if(f in t){if(r)t[f]=s;else return t[f];break}}}return{getStyles:function(t){var n=t&&t.nodeType!==9?t.ownerDocument:t,r=n&&n.defaultView;return r&&r.getComputedStyle(t,"")},getBounds:function(t,n){var r=t.ownerDocument,s=r.body,u=r.documentElement,h;try{h=t.getBoundingClientRect()}catch{h={left:0,top:0,width:0,height:0}}var o=h.left-(u.clientLeft||s.clientLeft||0),l=h.top-(u.clientTop||s.clientTop||0);if(!n){var f=r.defaultView;o+=f.pageXOffset||u.scrollLeft||s.scrollLeft,l+=f.pageYOffset||u.scrollTop||s.scrollTop}return new le(o,l,h.width,h.height)},getViewportBounds:function(t){var n=t.ownerDocument,r=n.defaultView,s=n.documentElement;return new le(0,0,r.innerWidth||s.clientWidth,r.innerHeight||s.clientHeight)},getOffset:function(t,n){return Re.getBounds(t,n).getPoint()},getSize:function(t){return Re.getBounds(t,!0).getSize()},isInvisible:function(t){return Re.getSize(t).equals(new oe(0,0))},isInView:function(t){return!Re.isInvisible(t)&&Re.getViewportBounds(t).intersects(Re.getBounds(t,!0))},isInserted:function(t){return Te.body.contains(t)},getPrefixed:function(t,n){return t&&e(t,n)},setPrefixed:function(t,n,r){if(typeof n=="object")for(var s in n)e(t,s,!0,n[s]);else e(t,n,!0,r)}}},qe={add:function(e,t){if(e)for(var n in t)for(var r=t[n],s=n.split(/[\s,]+/g),u=0,h=s.length;u<h;u++){var o=s[u],l=e===Te&&(o==="touchstart"||o==="touchmove")?{passive:!1}:!1;e.addEventListener(o,r,l)}},remove:function(e,t){if(e)for(var n in t)for(var r=t[n],s=n.split(/[\s,]+/g),u=0,h=s.length;u<h;u++)e.removeEventListener(s[u],r,!1)},getPoint:function(e){var t=e.targetTouches?e.targetTouches.length?e.targetTouches[0]:e.changedTouches[0]:e;return new D(t.pageX||t.clientX+Te.documentElement.scrollLeft,t.pageY||t.clientY+Te.documentElement.scrollTop)},getTarget:function(e){return e.target||e.srcElement},getRelatedTarget:function(e){return e.relatedTarget||e.toElement},getOffset:function(e,t){return qe.getPoint(e).subtract(Re.getOffset(t||qe.getTarget(e)))}};qe.requestAnimationFrame=new function(){var e=Re.getPrefixed(Ve,"requestAnimationFrame"),t=!1,n=[],r;function s(){var u=n;n=[];for(var h=0,o=u.length;h<o;h++)u[h]();t=e&&n.length,t&&e(s)}return function(u){n.push(u),e?t||(e(s),t=!0):r||(r=setInterval(s,1e3/60))}};var Be=B.extend(zt,{_class:"View",initialize:function e(t,n){function r(v){return n[v]||parseInt(n.getAttribute(v),10)}function s(){var v=Re.getSize(n);return v.isNaN()||v.isZero()?new oe(r("width"),r("height")):v}var u;if(Ve&&n){this._id=n.getAttribute("id"),this._id==null&&n.setAttribute("id",this._id="paper-view-"+e._id++),qe.add(n,this._viewEvents);var h="none";if(Re.setPrefixed(n.style,{userDrag:h,userSelect:h,touchCallout:h,contentZooming:h,tapHighlightColor:"rgba(0,0,0,0)"}),rt.hasAttribute(n,"resize")){var o=this;qe.add(Ve,this._windowEvents={resize:function(){o.setViewSize(s())}})}if(u=s(),rt.hasAttribute(n,"stats")&&typeof Stats<"u"){this._stats=new Stats;var l=this._stats.domElement,f=l.style,_=Re.getOffset(n);f.position="absolute",f.left=_.x+"px",f.top=_.y+"px",Te.body.appendChild(l)}}else u=new oe(n),n=null;this._project=t,this._scope=t._scope,this._element=n,this._pixelRatio||(this._pixelRatio=Ve&&Ve.devicePixelRatio||1),this._setElementSize(u.width,u.height),this._viewSize=u,e._views.push(this),e._viewsById[this._id]=this,(this._matrix=new be)._owner=this,e._focused||(e._focused=this),this._frameItems={},this._frameItemCount=0,this._itemEvents={native:{},virtual:{}},this._autoUpdate=!he.agent.node,this._needsUpdate=!1},remove:function(){if(!this._project)return!1;Be._focused===this&&(Be._focused=null),Be._views.splice(Be._views.indexOf(this),1),delete Be._viewsById[this._id];var e=this._project;return e._view===this&&(e._view=null),qe.remove(this._element,this._viewEvents),qe.remove(Ve,this._windowEvents),this._element=this._project=null,this.off("frame"),this._animate=!1,this._frameItems={},!0},_events:B.each(A._itemHandlers.concat(["onResize","onKeyDown","onKeyUp"]),function(e){this[e]={}},{onFrame:{install:function(){this.play()},uninstall:function(){this.pause()}}}),_animate:!1,_time:0,_count:0,getAutoUpdate:function(){return this._autoUpdate},setAutoUpdate:function(e){this._autoUpdate=e,e&&this.requestUpdate()},update:function(){},draw:function(){this.update()},requestUpdate:function(){if(!this._requested){var e=this;qe.requestAnimationFrame(function(){if(e._requested=!1,e._animate){e.requestUpdate();var t=e._element;(!Re.getPrefixed(Te,"hidden")||rt.getAttribute(t,"keepalive")==="true")&&Re.isInView(t)&&e._handleFrame()}e._autoUpdate&&e.update()}),this._requested=!0}},play:function(){this._animate=!0,this.requestUpdate()},pause:function(){this._animate=!1},_handleFrame:function(){he=this._scope;var e=Date.now()/1e3,t=this._last?e-this._last:0;this._last=e,this.emit("frame",new B({delta:t,time:this._time+=t,count:this._count++})),this._stats&&this._stats.update()},_animateItem:function(e,t){var n=this._frameItems;t?(n[e._id]={item:e,time:0,count:0},++this._frameItemCount===1&&this.on("frame",this._handleFrameItems)):(delete n[e._id],--this._frameItemCount===0&&this.off("frame",this._handleFrameItems))},_handleFrameItems:function(e){for(var t in this._frameItems){var n=this._frameItems[t];n.item.emit("frame",new B(e,{time:n.time+=e.delta,count:n.count++}))}},_changed:function(){this._project._changed(4097),this._bounds=this._decomposed=Y},getElement:function(){return this._element},getPixelRatio:function(){return this._pixelRatio},getResolution:function(){return this._pixelRatio*72},getViewSize:function(){var e=this._viewSize;return new Ce(e.width,e.height,this,"setViewSize")},setViewSize:function(){var e=oe.read(arguments),t=e.subtract(this._viewSize);t.isZero()||(this._setElementSize(e.width,e.height),this._viewSize.set(e),this._changed(),this.emit("resize",{size:e,delta:t}),this._autoUpdate&&this.update())},_setElementSize:function(e,t){var n=this._element;n&&(n.width!==e&&(n.width=e),n.height!==t&&(n.height=t))},getBounds:function(){return this._bounds||(this._bounds=this._matrix.inverted()._transformBounds(new le(new D,this._viewSize))),this._bounds},getSize:function(){return this.getBounds().getSize()},isVisible:function(){return Re.isInView(this._element)},isInserted:function(){return Re.isInserted(this._element)},getPixelSize:function(e){var t=this._element,n;if(t){var r=t.parentNode,s=Te.createElement("div");s.style.fontSize=e,r.appendChild(s),n=parseFloat(Re.getStyles(s).fontSize),r.removeChild(s)}else n=parseFloat(n);return n},getTextWidth:function(e,t){return 0}},B.each(["rotate","scale","shear","skew"],function(e){var t=e==="rotate";this[e]=function(){var n=arguments,r=(t?B:D).read(n),s=D.read(n,0,{readNull:!0});return this.transform(new be()[e](r,s||this.getCenter(!0)))}},{_decompose:function(){return this._decomposed||(this._decomposed=this._matrix.decompose())},translate:function(){var e=new be;return this.transform(e.translate.apply(e,arguments))},getCenter:function(){return this.getBounds().getCenter()},setCenter:function(){var e=D.read(arguments);this.translate(this.getCenter().subtract(e))},getZoom:function(){var e=this._decompose().scaling;return(e.x+e.y)/2},setZoom:function(e){this.transform(new be().scale(e/this.getZoom(),this.getCenter()))},getRotation:function(){return this._decompose().rotation},setRotation:function(e){var t=this.getRotation();t!=null&&e!=null&&this.rotate(e-t)},getScaling:function(){var e=this._decompose().scaling;return new et(e.x,e.y,this,"setScaling")},setScaling:function(){var e=this.getScaling(),t=D.read(arguments,0,{clone:!0,readNull:!0});e&&t&&this.scale(t.x/e.x,t.y/e.y)},getMatrix:function(){return this._matrix},setMatrix:function(){var e=this._matrix;e.set.apply(e,arguments)},transform:function(e){this._matrix.append(e)},scrollBy:function(){this.translate(D.read(arguments).negate())}}),{projectToView:function(){return this._matrix._transformPoint(D.read(arguments))},viewToProject:function(){return this._matrix._inverseTransform(D.read(arguments))},getEventPoint:function(e){return this.viewToProject(qe.getOffset(e,this._element))}},{statics:{_views:[],_viewsById:{},_id:0,create:function(e,t){Te&&typeof t=="string"&&(t=Te.getElementById(t));var n=Ve?Pi:Be;return new n(e,t)}}},new function(){if(!Ve)return;var e,t,n=!1,r=!1;function s(T){var R=qe.getTarget(T);return R.getAttribute&&Be._viewsById[R.getAttribute("id")]}function u(){var T=Be._focused;if(!T||!T.isVisible()){for(var R=0,F=Be._views.length;R<F;R++)if((T=Be._views[R]).isVisible()){Be._focused=t=T;break}}}function h(T,R,F){T._handleMouseEvent("mousemove",R,F)}var o=Ve.navigator,l,f,_;o.pointerEnabled||o.msPointerEnabled?(l="pointerdown MSPointerDown",f="pointermove MSPointerMove",_="pointerup pointercancel MSPointerUp MSPointerCancel"):(l="touchstart",f="touchmove",_="touchend touchcancel","ontouchstart"in Ve&&o.userAgent.match(/mobile|tablet|ip(ad|hone|od)|android|silk/i)||(l+=" mousedown",f+=" mousemove",_+=" mouseup"));var v={},g={mouseout:function(T){var R=Be._focused,F=qe.getRelatedTarget(T);if(R&&(!F||F.nodeName==="HTML")){var q=qe.getOffset(T,R._element),U=q.x,G=Math.abs,Q=G(U),J=1<<25,ee=Q-J;q.x=G(ee)<Q?ee*(U<0?-1:1):U,h(R,T,R.viewToProject(q))}},scroll:u};v[l]=function(T){var R=Be._focused=s(T);n||(n=!0,R._handleMouseEvent("mousedown",T))},g[f]=function(T){var R=Be._focused;if(!r){var F=s(T);F?R!==F&&(R&&h(R,T),e||(e=R),R=Be._focused=t=F):t&&t===R&&(e&&!e.isInserted()&&(e=null),R=Be._focused=e,e=null,u())}R&&h(R,T)},g[l]=function(){r=!0},g[_]=function(T){var R=Be._focused;R&&n&&R._handleMouseEvent("mouseup",T),r=n=!1},qe.add(Te,g),qe.add(Ve,{load:u});var p=!1,w=!1,m={doubleclick:"click",mousedrag:"mousemove"},k=!1,d,y,c,b,S,P,C,E;function L(T,R,F,q,U,G,Q){var J=!1,ee;function se(Z,K){if(Z.responds(K)){if(ee||(ee=new Ht(K,q,U,R||Z,G?U.subtract(G):null)),Z.emit(K,ee)&&(p=!0,ee.prevented&&(w=!0),ee.stopped))return J=!0}else{var ie=m[K];if(ie)return se(Z,ie)}}for(;T&&T!==Q&&!se(T,F);)T=T._parent;return J}function O(T,R,F,q,U,G){return T._project.removeOn(F),w=p=!1,S&&L(S,null,F,q,U,G)||R&&R!==S&&!R.isDescendant(S)&&L(R,null,F==="mousedrag"?"mousemove":F,q,U,G,S)||L(T,S||R||T,F,q,U,G)}var V={mousedown:{mousedown:1,mousedrag:1,click:1,doubleclick:1},mouseup:{mouseup:1,mousedrag:1,click:1,doubleclick:1},mousemove:{mousedrag:1,mousemove:1,mouseenter:1,mouseleave:1}};return{_viewEvents:v,_handleMouseEvent:function(T,R,F){var q=this._itemEvents,U=q.native[T],G=T==="mousemove",Q=this._scope.tool,J=this;function ee(ce){return q.virtual[ce]||J.responds(ce)||Q&&Q.responds(ce)}G&&n&&ee("mousedrag")&&(T="mousedrag"),F||(F=this.getEventPoint(R));var se=this.getBounds().contains(F),Z=U&&se&&J._project.hitTest(F,{tolerance:0,fill:!0,stroke:!0}),K=Z&&Z.item||null,ie=!1,ue={};if(ue[T.substr(5)]=!0,U&&K!==b&&(b&&L(b,null,"mouseleave",R,F),K&&L(K,null,"mouseenter",R,F),b=K),k^se&&(L(this,null,se?"mouseenter":"mouseleave",R,F),ie=!0),(se||ue.drag)&&!F.equals(y)&&(O(this,K,G?T:"mousemove",R,F,y),ie=!0),k=se,ue.down&&se||ue.up&&d){if(O(this,K,T,R,F,d),ue.down){if(E=K===P&&Date.now()-C<300,c=P=K,!w&&K){for(var ae=K;ae&&!ae.responds("mousedrag");)ae=ae._parent;ae&&(S=K)}d=F}else ue.up&&(!w&&K===c&&(C=Date.now(),O(this,K,E?"doubleclick":"click",R,F,d),E=!1),c=S=null);k=!1,ie=!0}y=F,ie&&Q&&(p=Q._handleMouseEvent(T,R,F,ue)||p),R.cancelable!==!1&&(p&&!ue.move||ue.down&&ee("mouseup"))&&R.preventDefault()},_handleKeyEvent:function(T,R,F,q){var U=this._scope,G=U.tool,Q;function J(ee){ee.responds(T)&&(he=U,ee.emit(T,Q=Q||new pi(T,R,F,q)))}this.isVisible()&&(J(this),G&&G.responds(T)&&J(G))},_countItemEvent:function(T,R){var F=this._itemEvents,q=F.native,U=F.virtual;for(var G in V)q[G]=(q[G]||0)+(V[G][T]||0)*R;U[T]=(U[T]||0)+R},statics:{updateFocus:u,_resetState:function(){n=r=p=k=!1,e=t=d=y=c=b=S=P=C=E=null}}}}),Pi=Be.extend({_class:"CanvasView",initialize:function(t,n){if(!(n instanceof Ve.HTMLCanvasElement)){var r=oe.read(arguments,1);if(r.isZero())throw new Error("Cannot create CanvasView with the provided argument: "+B.slice(arguments,1));n=Me.getCanvas(r)}var s=this._context=n.getContext("2d");if(s.save(),this._pixelRatio=1,!/^off|false$/.test(rt.getAttribute(n,"hidpi"))){var u=Ve.devicePixelRatio||1,h=Re.getPrefixed(s,"backingStorePixelRatio")||1;this._pixelRatio=u/h}Be.call(this,t,n),this._needsUpdate=!0},remove:function e(){return this._context.restore(),e.base.call(this)},_setElementSize:function e(t,n){var r=this._pixelRatio;if(e.base.call(this,t*r,n*r),r!==1){var s=this._element,u=this._context;if(!rt.hasAttribute(s,"resize")){var h=s.style;h.width=t+"px",h.height=n+"px"}u.restore(),u.save(),u.scale(r,r)}},getContext:function(){return this._context},getPixelSize:function e(t){var n=he.agent,r;if(n&&n.firefox)r=e.base.call(this,t);else{var s=this._context,u=s.font;s.font=t+" serif",r=parseFloat(s.font),s.font=u}return r},getTextWidth:function(e,t){var n=this._context,r=n.font,s=0;n.font=e;for(var u=0,h=t.length;u<h;u++)s=Math.max(s,n.measureText(t[u]).width);return n.font=r,s},update:function(){if(!this._needsUpdate)return!1;var e=this._project,t=this._context,n=this._viewSize;return t.clearRect(0,0,n.width+1,n.height+1),e&&e.draw(t,this._matrix,this._pixelRatio),this._needsUpdate=!1,!0}}),Ut=B.extend({_class:"Event",initialize:function(t){this.event=t,this.type=t&&t.type},prevented:!1,stopped:!1,preventDefault:function(){this.prevented=!0,this.event.preventDefault()},stopPropagation:function(){this.stopped=!0,this.event.stopPropagation()},stop:function(){this.stopPropagation(),this.preventDefault()},getTimeStamp:function(){return this.event.timeStamp},getModifiers:function(){return gi.modifiers}}),pi=Ut.extend({_class:"KeyEvent",initialize:function(t,n,r,s){this.type=t,this.event=n,this.key=r,this.character=s},toString:function(){return"{ type: '"+this.type+"', key: '"+this.key+"', character: '"+this.character+"', modifiers: "+this.getModifiers()+" }"}}),gi=new function(){var e={"	":"tab"," ":"space","\b":"backspace","":"delete",Spacebar:"space",Del:"delete",Win:"meta",Esc:"escape"},t={tab:"	",space:" ",enter:"\r"},n={},r={},s,u,h=new B({shift:!1,control:!1,alt:!1,meta:!1,capsLock:!1,space:!1}).inject({option:{get:function(){return this.alt}},command:{get:function(){var f=he&&he.agent;return f&&f.mac?this.meta:this.control}}});function o(f){var _=f.key||f.keyIdentifier;return _=/^U\+/.test(_)?String.fromCharCode(parseInt(_.substr(2),16)):/^Arrow[A-Z]/.test(_)?_.substr(5):_==="Unidentified"||_===Y?String.fromCharCode(f.keyCode):_,e[_]||(_.length>1?B.hyphenate(_):_.toLowerCase())}function l(f,_,v,g){var p=Be._focused,w;if(n[_]=f,f?r[_]=v:delete r[_],_.length>1&&(w=B.camelize(_))in h){h[w]=f;var m=he&&he.agent;if(w==="meta"&&m&&m.mac)if(f)s={};else{for(var k in s)k in r&&l(!1,k,s[k],g);s=null}}else f&&s&&(s[_]=v);p&&p._handleKeyEvent(f?"keydown":"keyup",g,_,v)}return qe.add(Te,{keydown:function(f){var _=o(f),v=he&&he.agent;_.length>1||v&&v.chrome&&(f.altKey||v.mac&&f.metaKey||!v.mac&&f.ctrlKey)?l(!0,_,t[_]||(_.length>1?"":_),f):u=_},keypress:function(f){if(u){var _=o(f),v=f.charCode,g=v>=32?String.fromCharCode(v):_.length>1?"":_;_!==u&&(_=g.toLowerCase()),l(!0,_,g,f),u=null}},keyup:function(f){var _=o(f);_ in r&&l(!1,_,r[_],f)}}),qe.add(Ve,{blur:function(f){for(var _ in r)l(!1,_,r[_],f)}}),{modifiers:h,isDown:function(f){return!!n[f]}}},Ht=Ut.extend({_class:"MouseEvent",initialize:function(t,n,r,s,u){this.type=t,this.event=n,this.point=r,this.target=s,this.delta=u},toString:function(){return"{ type: '"+this.type+"', point: "+this.point+", target: "+this.target+(this.delta?", delta: "+this.delta:"")+", modifiers: "+this.getModifiers()+" }"}}),_i=Ut.extend({_class:"ToolEvent",_item:null,initialize:function(t,n,r){this.tool=t,this.type=n,this.event=r},_choosePoint:function(e,t){return e||(t?t.clone():null)},getPoint:function(){return this._choosePoint(this._point,this.tool._point)},setPoint:function(e){this._point=e},getLastPoint:function(){return this._choosePoint(this._lastPoint,this.tool._lastPoint)},setLastPoint:function(e){this._lastPoint=e},getDownPoint:function(){return this._choosePoint(this._downPoint,this.tool._downPoint)},setDownPoint:function(e){this._downPoint=e},getMiddlePoint:function(){return!this._middlePoint&&this.tool._lastPoint?this.tool._point.add(this.tool._lastPoint).divide(2):this._middlePoint},setMiddlePoint:function(e){this._middlePoint=e},getDelta:function(){return!this._delta&&this.tool._lastPoint?this.tool._point.subtract(this.tool._lastPoint):this._delta},setDelta:function(e){this._delta=e},getCount:function(){return this.tool[/^mouse(down|up)$/.test(this.type)?"_downCount":"_moveCount"]},setCount:function(e){this.tool[/^mouse(down|up)$/.test(this.type)?"downCount":"count"]=e},getItem:function(){if(!this._item){var e=this.tool._scope.project.hitTest(this.getPoint());if(e){for(var t=e.item,n=t._parent;/^(Group|CompoundPath)$/.test(n._class);)t=n,n=n._parent;this._item=t}}return this._item},setItem:function(e){this._item=e},toString:function(){return"{ type: "+this.type+", point: "+this.getPoint()+", count: "+this.getCount()+", modifiers: "+this.getModifiers()+" }"}}),vi=Et.extend({_class:"Tool",_list:"tools",_reference:"tool",_events:["onMouseDown","onMouseUp","onMouseDrag","onMouseMove","onActivate","onDeactivate","onEditOptions","onKeyDown","onKeyUp"],initialize:function(t){Et.call(this),this._moveCount=-1,this._downCount=-1,this.set(t)},getMinDistance:function(){return this._minDistance},setMinDistance:function(e){this._minDistance=e,e!=null&&this._maxDistance!=null&&e>this._maxDistance&&(this._maxDistance=e)},getMaxDistance:function(){return this._maxDistance},setMaxDistance:function(e){this._maxDistance=e,this._minDistance!=null&&e!=null&&e<this._minDistance&&(this._minDistance=e)},getFixedDistance:function(){return this._minDistance==this._maxDistance?this._minDistance:null},setFixedDistance:function(e){this._minDistance=this._maxDistance=e},_handleMouseEvent:function(e,t,n,r){he=this._scope,r.drag&&!this.responds(e)&&(e="mousemove");var s=r.move||r.drag,u=this.responds(e),h=this.minDistance,o=this.maxDistance,l=!1,f=this;function _(g,p){var w=n,m=s?f._point:f._downPoint||w;if(s){if(f._moveCount>=0&&w.equals(m))return!1;if(m&&(g!=null||p!=null)){var k=w.subtract(m),d=k.getLength();if(d<(g||0))return!1;p&&(w=m.add(k.normalize(Math.min(d,p))))}f._moveCount++}return f._point=w,f._lastPoint=m||w,r.down&&(f._moveCount=-1,f._downPoint=w,f._downCount++),!0}function v(){u&&(l=f.emit(e,new _i(f,e,t))||l)}if(r.down)_(),v();else if(r.up)_(null,o),v();else if(u)for(;_(h,o);)v();return l}}),ni=B.extend(zt,{_class:"Tween",statics:{easings:new B({linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return e*(2-e)},easeInOutQuad:function(e){return e<.5?2*e*e:-1+2*(2-e)*e},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return--e*e*e+1},easeInOutCubic:function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return 1- --e*e*e*e},easeInOutQuart:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return 1+--e*e*e*e*e},easeInOutQuint:function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e}})},initialize:function e(t,n,r,s,u,h){this.object=t;var o=typeof u,l=o==="function";this.type=l?o:o==="string"?u:"linear",this.easing=l?u:e.easings[this.type],this.duration=s,this.running=!1,this._then=null,this._startTime=null;var f=n||r;this._keys=f?Object.keys(f):[],this._parsedKeys=this._parseKeys(this._keys),this._from=f&&this._getState(n),this._to=f&&this._getState(r),h!==!1&&this.start()},then:function(e){return this._then=e,this},start:function(){return this._startTime=null,this.running=!0,this},stop:function(){return this.running=!1,this},update:function(e){if(this.running){e>=1&&(e=1,this.running=!1);for(var t=this.easing(e),n=this._keys,r=function(_){return typeof _=="function"?_(t,e):_},s=0,u=n&&n.length;s<u;s++){var h=n[s],o=r(this._from[h]),l=r(this._to[h]),f=o&&l&&o.__add&&l.__add?l.__subtract(o).__multiply(t).__add(o):(l-o)*t+o;this._setProperty(this._parsedKeys[h],f)}this.responds("update")&&this.emit("update",new B({progress:e,factor:t})),!this.running&&this._then&&this._then(this.object)}return this},_events:{onUpdate:{}},_handleFrame:function(e){var t=this._startTime,n=t?(e-t)/this.duration:0;t||(this._startTime=e),this.update(n)},_getState:function(e){for(var t=this._keys,n={},r=0,s=t.length;r<s;r++){var u=t[r],h=this._parsedKeys[u],o=this._getProperty(h),l;if(e){var f=this._resolveValue(o,e[u]);this._setProperty(h,f),l=this._getProperty(h),l=l&&l.clone?l.clone():l,this._setProperty(h,o)}else l=o&&o.clone?o.clone():o;n[u]=l}return n},_resolveValue:function(e,t){if(t){if(Array.isArray(t)&&t.length===2){var n=t[0];return n&&n.match&&n.match(/^[+\-\*\/]=/)?this._calculate(e,n[0],t[1]):t}else if(typeof t=="string"){var r=t.match(/^[+\-*/]=(.*)/);if(r){var s=JSON.parse(r[1].replace(/(['"])?([a-zA-Z0-9_]+)(['"])?:/g,'"$2": '));return this._calculate(e,t[0],s)}}}return t},_calculate:function(e,t,n){return he.PaperScript.calculateBinary(e,t,n)},_parseKeys:function(e){for(var t={},n=0,r=e.length;n<r;n++){var s=e[n],u=s.replace(/\.([^.]*)/g,"/$1").replace(/\[['"]?([^'"\]]*)['"]?\]/g,"/$1");t[s]=u.split("/")}return t},_getProperty:function(e,t){for(var n=this.object,r=0,s=e.length-(t||0);r<s&&n;r++)n=n[e[r]];return n},_setProperty:function(e,t){var n=this._getProperty(e,1);n&&(n[e[e.length-1]]=t)}}),ri={request:function(e){var t=new _t.XMLHttpRequest;return t.open((e.method||"get").toUpperCase(),e.url,B.pick(e.async,!0)),e.mimeType&&t.overrideMimeType(e.mimeType),t.onload=function(){var n=t.status;n===0||n===200?e.onLoad&&e.onLoad.call(t,t.responseText):t.onerror()},t.onerror=function(){var n=t.status,r='Could not load "'+e.url+'" (Status: '+n+")";if(e.onError)e.onError(r,n);else throw new Error(r)},t.send(null)}},Me=B.exports.CanvasProvider={canvases:[],getCanvas:function(e,t,n){if(!Ve)return null;var r,s=!0;typeof e=="object"&&(t=e.height,e=e.width),this.canvases.length?r=this.canvases.pop():(r=Te.createElement("canvas"),s=!1);var u=r.getContext("2d",n||{});if(!u)throw new Error("Canvas "+r+" is unable to provide a 2D context.");return r.width===e&&r.height===t?s&&u.clearRect(0,0,e+1,t+1):(r.width=e,r.height=t),u.save(),r},getContext:function(e,t,n){var r=this.getCanvas(e,t,n);return r?r.getContext("2d",n||{}):null},release:function(e){var t=e&&e.canvas?e.canvas:e;t&&t.getContext&&(t.getContext("2d").restore(),this.canvases.push(t))}},si=new function(){var e=Math.min,t=Math.max,n=Math.abs,r,s,u,h,o,l,f,_,v,g,p;function w(S,P,C){return .2989*S+.587*P+.114*C}function m(S,P,C,O){var L=O-w(S,P,C);v=S+L,g=P+L,p=C+L;var O=w(v,g,p),V=e(v,g,p),T=t(v,g,p);if(V<0){var R=O-V;v=O+(v-O)*O/R,g=O+(g-O)*O/R,p=O+(p-O)*O/R}if(T>255){var F=255-O,q=T-O;v=O+(v-O)*F/q,g=O+(g-O)*F/q,p=O+(p-O)*F/q}}function k(S,P,C){return t(S,P,C)-e(S,P,C)}function d(S,P,C,E){var L=[S,P,C],O=t(S,P,C),V=e(S,P,C),T;V=V===S?0:V===P?1:2,O=O===S?0:O===P?1:2,T=e(V,O)===0?t(V,O)===1?2:1:0,L[O]>L[V]?(L[T]=(L[T]-L[V])*E/(L[O]-L[V]),L[O]=E):L[T]=L[O]=0,L[V]=0,v=L[0],g=L[1],p=L[2]}var y={multiply:function(){v=o*r/255,g=l*s/255,p=f*u/255},screen:function(){v=o+r-o*r/255,g=l+s-l*s/255,p=f+u-f*u/255},overlay:function(){v=o<128?2*o*r/255:255-2*(255-o)*(255-r)/255,g=l<128?2*l*s/255:255-2*(255-l)*(255-s)/255,p=f<128?2*f*u/255:255-2*(255-f)*(255-u)/255},"soft-light":function(){var S=r*o/255;v=S+o*(255-(255-o)*(255-r)/255-S)/255,S=s*l/255,g=S+l*(255-(255-l)*(255-s)/255-S)/255,S=u*f/255,p=S+f*(255-(255-f)*(255-u)/255-S)/255},"hard-light":function(){v=r<128?2*r*o/255:255-2*(255-r)*(255-o)/255,g=s<128?2*s*l/255:255-2*(255-s)*(255-l)/255,p=u<128?2*u*f/255:255-2*(255-u)*(255-f)/255},"color-dodge":function(){v=o===0?0:r===255?255:e(255,255*o/(255-r)),g=l===0?0:s===255?255:e(255,255*l/(255-s)),p=f===0?0:u===255?255:e(255,255*f/(255-u))},"color-burn":function(){v=o===255?255:r===0?0:t(0,255-(255-o)*255/r),g=l===255?255:s===0?0:t(0,255-(255-l)*255/s),p=f===255?255:u===0?0:t(0,255-(255-f)*255/u)},darken:function(){v=o<r?o:r,g=l<s?l:s,p=f<u?f:u},lighten:function(){v=o>r?o:r,g=l>s?l:s,p=f>u?f:u},difference:function(){v=o-r,v<0&&(v=-v),g=l-s,g<0&&(g=-g),p=f-u,p<0&&(p=-p)},exclusion:function(){v=o+r*(255-o-o)/255,g=l+s*(255-l-l)/255,p=f+u*(255-f-f)/255},hue:function(){d(r,s,u,k(o,l,f)),m(v,g,p,w(o,l,f))},saturation:function(){d(o,l,f,k(r,s,u)),m(v,g,p,w(o,l,f))},luminosity:function(){m(o,l,f,w(r,s,u))},color:function(){m(r,s,u,w(o,l,f))},add:function(){v=e(o+r,255),g=e(l+s,255),p=e(f+u,255)},subtract:function(){v=t(o-r,0),g=t(l-s,0),p=t(f-u,0)},average:function(){v=(o+r)/2,g=(l+s)/2,p=(f+u)/2},negation:function(){v=255-n(255-r-o),g=255-n(255-s-l),p=255-n(255-u-f)}},c=this.nativeModes=B.each(["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","darker","copy","xor"],function(S){this[S]=!0},{}),b=Me.getContext(1,1,{willReadFrequently:!0});b&&(B.each(y,function(S,P){var C=P==="darken",E=!1;b.save();try{b.fillStyle=C?"#300":"#a00",b.fillRect(0,0,1,1),b.globalCompositeOperation=P,b.globalCompositeOperation===P&&(b.fillStyle=C?"#a00":"#300",b.fillRect(0,0,1,1),E=b.getImageData(0,0,1,1).data[0]!==C?170:51)}catch{}b.restore(),c[P]=E}),Me.release(b)),this.process=function(S,P,C,E,L){var O=P.canvas,V=S==="normal";if(V||c[S])C.save(),C.setTransform(1,0,0,1,0,0),C.globalAlpha=E,V||(C.globalCompositeOperation=S),C.drawImage(O,L.x,L.y),C.restore();else{var T=y[S];if(!T)return;for(var R=C.getImageData(L.x,L.y,O.width,O.height),F=R.data,q=P.getImageData(0,0,O.width,O.height).data,U=0,G=F.length;U<G;U+=4){r=q[U],o=F[U],s=q[U+1],l=F[U+1],u=q[U+2],f=F[U+2],h=q[U+3],_=F[U+3],T();var Q=h*E/255,J=1-Q;F[U]=Q*v+J*o,F[U+1]=Q*g+J*l,F[U+2]=Q*p+J*f,F[U+3]=h*E+J*_}C.putImageData(R,L.x,L.y)}}},Fe=new function(){var e="http://www.w3.org/2000/svg",t="http://www.w3.org/2000/xmlns",n="http://www.w3.org/1999/xlink",r={href:n,xlink:t,xmlns:t+"/","xmlns:xlink":t+"/"};function s(o,l,f){return h(Te.createElementNS(e,o),l,f)}function u(o,l){var f=r[l],_=f?o.getAttributeNS(f,l):o.getAttribute(l);return _==="null"?null:_}function h(o,l,f){for(var _ in l){var v=l[_],g=r[_];typeof v=="number"&&f&&(v=f.number(v)),g?o.setAttributeNS(g,_,v):o.setAttribute(_,v)}return o}return{svg:e,xmlns:t,xlink:n,create:s,get:u,set:h}},mi=B.each({fillColor:["fill","color"],fillRule:["fill-rule","string"],strokeColor:["stroke","color"],strokeWidth:["stroke-width","number"],strokeCap:["stroke-linecap","string"],strokeJoin:["stroke-linejoin","string"],strokeScaling:["vector-effect","lookup",{true:"none",false:"non-scaling-stroke"},function(e,t){return!t&&(e instanceof ot||e instanceof Xe||e instanceof Nt)}],miterLimit:["stroke-miterlimit","number"],dashArray:["stroke-dasharray","array"],dashOffset:["stroke-dashoffset","number"],fontFamily:["font-family","string"],fontWeight:["font-weight","string"],fontSize:["font-size","number"],justification:["text-anchor","lookup",{left:"start",center:"middle",right:"end"}],opacity:["opacity","number"],blendMode:["mix-blend-mode","style"]},function(e,t){var n=B.capitalize(t),r=e[2];this[t]={type:e[1],property:t,attribute:e[0],toSVG:r,fromSVG:r&&B.each(r,function(s,u){this[s]=u},{}),exportFilter:e[3],get:"get"+n,set:"set"+n}},{});new function(){var e;function t(y,c,b){var S=new B,P=y.getTranslation();if(c){var C;y.isInvertible()?(y=y._shiftless(),C=y._inverseTransform(P),P=null):C=new D,S[b?"cx":"x"]=C.x,S[b?"cy":"y"]=C.y}if(!y.isIdentity()){var E=y.decompose();if(E){var L=[],O=E.rotation,V=E.scaling,T=E.skewing;P&&!P.isZero()&&L.push("translate("+e.point(P)+")"),O&&L.push("rotate("+e.number(O)+")"),(!Ae.isZero(V.x-1)||!Ae.isZero(V.y-1))&&L.push("scale("+e.point(V)+")"),T.x&&L.push("skewX("+e.number(T.x)+")"),T.y&&L.push("skewY("+e.number(T.y)+")"),S.transform=L.join(" ")}else S.transform="matrix("+y.getValues().join(",")+")"}return S}function n(y,c){for(var b=t(y._matrix),S=y._children,P=Fe.create("g",b,e),C=0,E=S.length;C<E;C++){var L=S[C],O=k(L,c);if(O)if(L.isClipMask()){var V=Fe.create("clipPath");V.appendChild(O),w(L,V,"clip"),Fe.set(P,{"clip-path":"url(#"+V.id+")"})}else P.appendChild(O)}return P}function r(y,c){var b=t(y._matrix,!0),S=y.getSize(),P=y.getImage();return b.x-=S.width/2,b.y-=S.height/2,b.width=S.width,b.height=S.height,b.href=c.embedImages==!1&&P&&P.src||y.toDataURL(),Fe.create("image",b,e)}function s(y,c){var b=c.matchShapes;if(b){var S=y.toShape(!1);if(S)return u(S)}var P=y._segments,C=P.length,E,L=t(y._matrix);if(b&&C>=2&&!y.hasHandles())if(C>2){E=y._closed?"polygon":"polyline";for(var O=[],V=0;V<C;V++)O.push(e.point(P[V]._point));L.points=O.join(" ")}else{E="line";var T=P[0]._point,R=P[1]._point;L.set({x1:T.x,y1:T.y,x2:R.x,y2:R.y})}else E="path",L.d=y.getPathData(null,c.precision);return Fe.create(E,L,e)}function u(y){var c=y._type,b=y._radius,S=t(y._matrix,!0,c!=="rectangle");if(c==="rectangle"){c="rect";var P=y._size,C=P.width,E=P.height;S.x-=C/2,S.y-=E/2,S.width=C,S.height=E,b.isZero()&&(b=null)}return b&&(c==="circle"?S.r=b:(S.rx=b.width,S.ry=b.height)),Fe.create(c,S,e)}function h(y,c){var b=t(y._matrix),S=y.getPathData(null,c.precision);return S&&(b.d=S),Fe.create("path",b,e)}function o(y,c){var b=t(y._matrix,!0),S=y._definition,P=p(S,"symbol"),C=S._item,E=C.getStrokeBounds();return P||(P=Fe.create("symbol",{viewBox:e.rectangle(E)}),P.appendChild(k(C,c)),w(S,P,"symbol")),b.href="#"+P.id,b.x+=E.x,b.y+=E.y,b.width=E.width,b.height=E.height,b.overflow="visible",Fe.create("use",b,e)}function l(y){var c=p(y,"color");if(!c){var b=y.getGradient(),S=b._radial,P=y.getOrigin(),C=y.getDestination(),E;if(S){E={cx:P.x,cy:P.y,r:P.getDistance(C)};var L=y.getHighlight();L&&(E.fx=L.x,E.fy=L.y)}else E={x1:P.x,y1:P.y,x2:C.x,y2:C.y};E.gradientUnits="userSpaceOnUse",c=Fe.create((S?"radial":"linear")+"Gradient",E,e);for(var O=b._stops,V=0,T=O.length;V<T;V++){var R=O[V],F=R._color,q=F.getAlpha(),U=R._offset;E={offset:U??V/(T-1)},F&&(E["stop-color"]=F.toCSS(!0)),q<1&&(E["stop-opacity"]=q),c.appendChild(Fe.create("stop",E,e))}w(y,c,"color")}return"url(#"+c.id+")"}function f(y){var c=Fe.create("text",t(y._matrix,!0),e);return c.textContent=y._content,c}var _={Group:n,Layer:n,Raster:r,Path:s,Shape:u,CompoundPath:h,SymbolItem:o,PointText:f};function v(y,c,b){var S={},P=!b&&y.getParent(),C=[];return y._name!=null&&(S.id=y._name),B.each(mi,function(E){var L=E.get,O=E.type,V=y[L]();if(E.exportFilter?E.exportFilter(y,V):!P||!B.equals(P[L](),V)){if(O==="color"&&V!=null){var T=V.getAlpha();T<1&&(S[E.attribute+"-opacity"]=T)}O==="style"?C.push(E.attribute+": "+V):S[E.attribute]=V==null?"none":O==="color"?V.gradient?l(V):V.toCSS(!0):O==="array"?V.join(","):O==="lookup"?E.toSVG[V]:V}}),C.length&&(S.style=C.join(";")),S.opacity===1&&delete S.opacity,y._visible||(S.visibility="hidden"),Fe.set(c,S,e)}var g;function p(y,c){return g||(g={ids:{},svgs:{}}),y&&g.svgs[c+"-"+(y._id||y.__id||(y.__id=ei.get("svg")))]}function w(y,c,b){g||p();var S=g.ids[b]=(g.ids[b]||0)+1;c.id=b+"-"+S,g.svgs[b+"-"+(y._id||y.__id)]=c}function m(y,c){var b=y,S=null;if(g){b=y.nodeName.toLowerCase()==="svg"&&y;for(var P in g.svgs)S||(b||(b=Fe.create("svg"),b.appendChild(y)),S=b.insertBefore(Fe.create("defs"),b.firstChild)),S.appendChild(g.svgs[P]);g=null}return c.asString?new _t.XMLSerializer().serializeToString(b):b}function k(y,c,b){var S=_[y._class],P=S&&S(y,c);if(P){var C=c.onExport;C&&(P=C(y,P,c)||P);var E=JSON.stringify(y._data);E&&E!=="{}"&&E!=="null"&&P.setAttribute("data-paper-data",E)}return P&&v(y,P,b)}function d(y){return y||(y={}),e=new lt(y.precision),y}A.inject({exportSVG:function(y){return y=d(y),m(k(this,y,!0),y)}}),Se.inject({exportSVG:function(y){y=d(y);var c=this._children,b=this.getView(),S=B.pick(y.bounds,"view"),P=y.matrix||S==="view"&&b._matrix,C=P&&be.read([P]),E=S==="view"?new le([0,0],b.getViewSize()):S==="content"?A._getBounds(c,C,{stroke:!0}).rect:le.read([S],0,{readNull:!0}),L={version:"1.1",xmlns:Fe.svg,"xmlns:xlink":Fe.xlink};E&&(L.width=E.width,L.height=E.height,(E.x||E.x===0||E.y||E.y===0)&&(L.viewBox=e.rectangle(E)));var O=Fe.create("svg",L,e),V=O;C&&!C.isIdentity()&&(V=O.appendChild(Fe.create("g",t(C),e)));for(var T=0,R=c.length;T<R;T++)V.appendChild(k(c[T],y,!0));return m(O,y)}})},new function(){var e={},t;function n(c,b,S,P,C,E){var L=Fe.get(c,b)||E,O=L==null?P?null:S?"":0:S?L:parseFloat(L);return/%\s*$/.test(L)?O/100*(C?1:t[/x|^width/.test(b)?"width":"height"]):O}function r(c,b,S,P,C,E,L){return b=n(c,b||"x",!1,P,C,E),S=n(c,S||"y",!1,P,C,L),P&&(b==null||S==null)?null:new D(b,S)}function s(c,b,S,P,C){return b=n(c,b||"width",!1,P,C),S=n(c,S||"height",!1,P,C),P&&(b==null||S==null)?null:new oe(b,S)}function u(c,b,S){return c==="none"?null:b==="number"?parseFloat(c):b==="array"?c?c.split(/[\s,]+/g).map(parseFloat):[]:b==="color"?k(c)||c:b==="lookup"?S[c]:c}function h(c,b,S,P){var C=c.childNodes,E=b==="clippath",L=b==="defs",O=new De,V=O._project,T=V._currentStyle,R=[];if(!E&&!L&&(O=m(O,c,P),V._currentStyle=O._style.clone()),P)for(var F=c.querySelectorAll("defs"),q=0,U=F.length;q<U;q++)d(F[q],S,!1);for(var q=0,U=C.length;q<U;q++){var G=C[q],Q;G.nodeType===1&&!/^defs$/i.test(G.nodeName)&&(Q=d(G,S,!1))&&!(Q instanceof Qe)&&R.push(Q)}return O.addChildren(R),E&&(O=m(O.reduce(),c,P)),V._currentStyle=T,(E||L)&&(O.remove(),O=null),O}function o(c,b){for(var S=c.getAttribute("points").match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g),P=[],C=0,E=S.length;C<E;C+=2)P.push(new D(parseFloat(S[C]),parseFloat(S[C+1])));var L=new we(P);return b==="polygon"&&L.closePath(),L}function l(c){return ot.create(c.getAttribute("d"))}function f(c,b){var S=(n(c,"href",!0)||"").substring(1),P=b==="radialgradient",C;if(S)C=e[S].getGradient(),C._radial^P&&(C=C.clone(),C._radial=P);else{for(var E=c.childNodes,L=[],O=0,V=E.length;O<V;O++){var T=E[O];T.nodeType===1&&L.push(m(new di,T))}C=new ii(L,P)}var R,F,q,U=n(c,"gradientUnits",!0)!=="userSpaceOnUse";P?(R=r(c,"cx","cy",!1,U,"50%","50%"),F=R.add(n(c,"r",!1,!1,U,"50%"),0),q=r(c,"fx","fy",!0,U)):(R=r(c,"x1","y1",!1,U,"0%","0%"),F=r(c,"x2","y2",!1,U,"100%","0%"));var G=m(new Ge(C,R,F,q),c);return G._scaleToBounds=U,null}var _={"#document":function(c,b,S,P){for(var C=c.childNodes,E=0,L=C.length;E<L;E++){var O=C[E];if(O.nodeType===1)return d(O,S,P)}},g:h,svg:h,clippath:h,polygon:o,polyline:o,path:l,lineargradient:f,radialgradient:f,image:function(c){var b=new Lt(n(c,"href",!0));return b.on("load",function(){var S=s(c);this.setSize(S);var P=r(c).add(S.divide(2));this._matrix.append(new be().translate(P))}),b},symbol:function(c,b,S,P){return new Qe(h(c,b,S,P),!0)},defs:h,use:function(c){var b=(n(c,"href",!0)||"").substring(1),S=e[b],P=r(c);return S?S instanceof Qe?S.place(P):S.clone().translate(P):null},circle:function(c){return new Xe.Circle(r(c,"cx","cy"),n(c,"r"))},ellipse:function(c){return new Xe.Ellipse({center:r(c,"cx","cy"),radius:s(c,"rx","ry")})},rect:function(c){return new Xe.Rectangle(new le(r(c),s(c)),s(c,"rx","ry"))},line:function(c){return new we.Line(r(c,"x1","y1"),r(c,"x2","y2"))},text:function(c){var b=new ti(r(c).add(r(c,"dx","dy")));return b.setContent(c.textContent.trim()||""),b},switch:h};function v(c,b,S,P){if(c.transform){for(var C=(P.getAttribute(S)||"").split(/\)\s*/g),E=new be,L=0,O=C.length;L<O;L++){var V=C[L];if(!V)break;for(var T=V.split(/\(\s*/),R=T[0],F=T[1].split(/[\s,]+/g),q=0,U=F.length;q<U;q++)F[q]=parseFloat(F[q]);switch(R){case"matrix":E.append(new be(F[0],F[1],F[2],F[3],F[4],F[5]));break;case"rotate":E.rotate(F[0],F[1]||0,F[2]||0);break;case"translate":E.translate(F[0],F[1]||0);break;case"scale":E.scale(F);break;case"skewX":E.skew(F[0],0);break;case"skewY":E.skew(0,F[0]);break}}c.transform(E)}}function g(c,b,S){var P=S==="fill-opacity"?"getFillColor":"getStrokeColor",C=c[P]&&c[P]();C&&C.setAlpha(parseFloat(b))}var p=B.set(B.each(mi,function(c){this[c.attribute]=function(b,S){if(b[c.set]&&(b[c.set](u(S,c.type,c.fromSVG)),c.type==="color")){var P=b[c.get]();if(P&&P._scaleToBounds){var C=b.getBounds();P.transform(new be().translate(C.getPoint()).scale(C.getSize()))}}}},{}),{id:function(c,b){e[b]=c,c.setName&&c.setName(b)},"clip-path":function(c,b){var S=k(b);if(S)if(S=S.clone(),S.setClipMask(!0),c instanceof De)c.insertChild(0,S);else return new De(S,c)},gradientTransform:v,transform:v,"fill-opacity":g,"stroke-opacity":g,visibility:function(c,b){c.setVisible&&c.setVisible(b==="visible")},display:function(c,b){c.setVisible&&c.setVisible(b!==null)},"stop-color":function(c,b){c.setColor&&c.setColor(b)},"stop-opacity":function(c,b){c._color&&c._color.setAlpha(parseFloat(b))},offset:function(c,b){if(c.setOffset){var S=b.match(/(.*)%$/);c.setOffset(S?S[1]/100:parseFloat(b))}},viewBox:function(c,b,S,P,C){var E=new le(u(b,"array")),L=s(P,null,null,!0),O,V;if(c instanceof De){var T=L?L.divide(E.getSize()):1,V=new be().scale(T).translate(E.getPoint().negate());O=c}else c instanceof Qe&&(L&&E.setSize(L),O=c._item);if(O){if(w(P,"overflow",C)!=="visible"){var R=new Xe.Rectangle(E);R.setClipMask(!0),O.addChild(R)}V&&O.transform(V)}}});function w(c,b,S){var P=c.attributes[b],C=P&&P.value;if(!C&&c.style){var E=B.camelize(b);C=c.style[E],!C&&S.node[E]!==S.parent[E]&&(C=S.node[E])}return C?C==="none"?null:C:Y}function m(c,b,S){var P=b.parentNode,C={node:Re.getStyles(b)||{},parent:!S&&!/^defs$/i.test(P.tagName)&&Re.getStyles(P)||{}};return B.each(p,function(E,L){var O=w(b,L,C);c=O!==Y&&E(c,O,L,b,C)||c}),c}function k(c){var b=c&&c.match(/\((?:["'#]*)([^"')]+)/),S=b&&b[1],P=S&&e[Ve?S.replace(Ve.location.href.split("#")[0]+"#",""):S];return P&&P._scaleToBounds&&(P=P.clone(),P._scaleToBounds=!0),P}function d(c,b,S){var P=c.nodeName.toLowerCase(),C=P!=="#document",E=Te.body,L,O,V;S&&C&&(t=he.getView().getSize(),t=s(c,null,null,!0)||t,L=Fe.create("svg",{style:"stroke-width: 1px; stroke-miterlimit: 10"}),O=c.parentNode,V=c.nextSibling,L.appendChild(c),E.appendChild(L));var T=he.settings,R=T.applyMatrix,F=T.insertItems;T.applyMatrix=!1,T.insertItems=!1;var q=_[P],U=q&&q(c,P,b,S)||null;if(T.insertItems=F,T.applyMatrix=R,U){C&&!(U instanceof De)&&(U=m(U,c,S));var G=b.onImport,Q=C&&c.getAttribute("data-paper-data");G&&(U=G(c,U,b)||U),b.expandShapes&&U instanceof Xe&&(U.remove(),U=U.toPath()),Q&&(U._data=JSON.parse(Q))}return L&&(E.removeChild(L),O&&(V?O.insertBefore(c,V):O.appendChild(c))),S&&(e={},U&&B.pick(b.applyMatrix,R)&&U.matrix.apply(!0,!0)),U}function y(c,b,S){if(!c)return null;b=typeof b=="function"?{onLoad:b}:b||{};var P=he,C=null;function E(T){try{var R=typeof T=="object"?T:new _t.DOMParser().parseFromString(T.trim(),"image/svg+xml");if(!R.nodeName)throw R=null,new Error("Unsupported SVG source: "+c);he=P,C=d(R,b,!0),(!b||b.insert!==!1)&&S._insertItem(Y,C);var F=b.onLoad;F&&F(C,T)}catch(q){L(q)}}function L(T,R){var F=b.onError;if(F)F(T,R);else throw new Error(T)}if(typeof c=="string"&&!/^[\s\S]*</.test(c)){var O=Te.getElementById(c);O?E(O):ri.request({url:c,async:!0,onLoad:E,onError:L})}else if(typeof File<"u"&&c instanceof File){var V=new FileReader;return V.onload=function(){E(V.result)},V.onerror=function(){L(V.error)},V.readAsText(c)}else E(c);return C}A.inject({importSVG:function(c,b){return y(c,b,this)}}),Se.inject({importSVG:function(c,b){return this.activate(),y(c,b,this)}})},B.exports.PaperScript=(function(){var e=this,t=e.acorn;if(!t&&typeof Wn<"u")try{t=Kn()}catch{}if(!t){var n,r;t=n=r={},function(m,k){if(typeof n=="object"&&typeof r=="object")return k(n);if(typeof Y=="function"&&Y.amd)return Y(["exports"],k);k(m.acorn||(m.acorn={}))}(this,function(m){m.version="0.5.0";var k,d,y,c;m.parse=function(M,z){return d=String(M),y=d.length,S(z),$i(),Rn(k.program)};var b=m.defaultOptions={ecmaVersion:5,strictSemicolons:!1,allowTrailingCommas:!0,forbidReserved:!1,allowReturnOutsideFunction:!1,locations:!1,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null};function S(M){k=M||{};for(var z in b)Object.prototype.hasOwnProperty.call(k,z)||(k[z]=b[z]);c=k.sourceFile||null}var P=m.getLineInfo=function(M,z){for(var j=1,X=0;;){hi.lastIndex=X;var ge=hi.exec(M);if(ge&&ge.index<z)++j,X=ge.index+ge[0].length;else break}return{line:j,column:z-X}};m.tokenize=function(M,z){d=String(M),y=d.length,S(z),$i();var j={};function X(ge){return Q=L,Xt(ge),j.start=E,j.end=L,j.startLoc=O,j.endLoc=V,j.type=T,j.value=R,j}return X.jumpTo=function(ge,ve){if(C=ge,k.locations){q=1,U=hi.lastIndex=0;for(var xe;(xe=hi.exec(d))&&xe.index<ge;)++q,U=xe.index+xe[0].length}F=ve,li()},X};var C,E,L,O,V,T,R,F,q,U,G,Q,J,ee,se,Z;function K(M,z){var j=P(d,M);z+=" ("+j.line+":"+j.column+")";var X=new SyntaxError(z);throw X.pos=M,X.loc=j,X.raisedAt=C,X}var ie=[],ue={type:"num"},ae={type:"regexp"},ce={type:"string"},fe={type:"name"},pe={type:"eof"},me={keyword:"break"},_e={keyword:"case",beforeExpr:!0},re={keyword:"catch"},Oe={keyword:"continue"},Je={keyword:"debugger"},Ue={keyword:"default"},Le={keyword:"do",isLoop:!0},ze={keyword:"else",beforeExpr:!0},st={keyword:"finally"},We={keyword:"for",isLoop:!0},je={keyword:"function"},Ye={keyword:"if"},pt={keyword:"return",beforeExpr:!0},ct={keyword:"switch"},at={keyword:"throw",beforeExpr:!0},ht={keyword:"try"},wt={keyword:"var"},gt={keyword:"while",isLoop:!0},It={keyword:"with"},xi={keyword:"new",beforeExpr:!0},bi={keyword:"this"},yi={keyword:"null",atomValue:null},Gt={keyword:"true",atomValue:!0},Pe={keyword:"false",atomValue:!1},ai={keyword:"in",binop:7,beforeExpr:!0},ui={break:me,case:_e,catch:re,continue:Oe,debugger:Je,default:Ue,do:Le,else:ze,finally:st,for:We,function:je,if:Ye,return:pt,switch:ct,throw:at,try:ht,var:wt,while:gt,with:It,null:yi,true:Gt,false:Pe,new:xi,in:ai,instanceof:{keyword:"instanceof",binop:7,beforeExpr:!0},this:bi,typeof:{keyword:"typeof",prefix:!0,beforeExpr:!0},void:{keyword:"void",prefix:!0,beforeExpr:!0},delete:{keyword:"delete",prefix:!0,beforeExpr:!0}},Wt={type:"[",beforeExpr:!0},jt={type:"]"},Ot={type:"{",beforeExpr:!0},Pt={type:"}"},xt={type:"(",beforeExpr:!0},i={type:")"},a={type:",",beforeExpr:!0},x={type:";",beforeExpr:!0},I={type:":",beforeExpr:!0},N={type:"."},H={type:"?",beforeExpr:!0},W={binop:10,beforeExpr:!0},$={isAssign:!0,beforeExpr:!0},ne={isAssign:!0,beforeExpr:!0},ye={postfix:!0,prefix:!0,isUpdate:!0},ke={prefix:!0,beforeExpr:!0},Ze={binop:1,beforeExpr:!0},Ct={binop:2,beforeExpr:!0},Zt={binop:3,beforeExpr:!0},Mt={binop:4,beforeExpr:!0},oi={binop:5,beforeExpr:!0},Rt={binop:6,beforeExpr:!0},Vt={binop:7,beforeExpr:!0},pn={binop:8,beforeExpr:!0},gn={binop:9,prefix:!0,beforeExpr:!0},_n={binop:10,beforeExpr:!0};m.tokTypes={bracketL:Wt,bracketR:jt,braceL:Ot,braceR:Pt,parenL:xt,parenR:i,comma:a,semi:x,colon:I,dot:N,question:H,slash:W,eq:$,name:fe,eof:pe,num:ue,regexp:ae,string:ce};for(var Ki in ui)m.tokTypes["_"+Ki]=ui[Ki];function wi(M){M=M.split(" ");var z="",j=[];e:for(var X=0;X<M.length;++X){for(var ge=0;ge<j.length;++ge)if(j[ge][0].length==M[X].length){j[ge].push(M[X]);continue e}j.push([M[X]])}function ve(Ne){if(Ne.length==1)return z+="return str === "+JSON.stringify(Ne[0])+";";z+="switch(str){";for(var yt=0;yt<Ne.length;++yt)z+="case "+JSON.stringify(Ne[yt])+":";z+="return true}return false;"}if(j.length>3){j.sort(function(Ne,yt){return yt.length-Ne.length}),z+="switch(str.length){";for(var X=0;X<j.length;++X){var xe=j[X];z+="case "+xe[0].length+":",ve(xe)}z+="}"}else ve(M);return new Function("str",z)}var vn=wi("abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile"),mn=wi("class enum extends super const export import"),Xi=wi("implements interface let package private protected public static yield"),Ai=wi("eval arguments"),xn=wi("break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this"),bn=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,Qi="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",yn="̀-ͯ҃-֑҇-ׇֽֿׁׂׅׄؐ-ؚؠ-ىٲ-ۓۧ-ۨۻ-ۼܰ-݊ࠀ-ࠔࠛ-ࠣࠥ-ࠧࠩ-࠭ࡀ-ࡗࣤ-ࣾऀ-ःऺ-़ा-ॏ॑-ॗॢ-ॣ०-९ঁ-ঃ়া-ৄেৈৗয়-ৠਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢ-ૣ૦-૯ଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୟ-ୠ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఁ-ఃె-ైొ-్ౕౖౢ-ౣ౦-౯ಂಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢ-ೣ೦-೯ംഃെ-ൈൗൢ-ൣ൦-൯ංඃ්ා-ුූෘ-ෟෲෳิ-ฺเ-ๅ๐-๙ິ-ູ່-ໍ໐-໙༘༙༠-༩༹༵༷ཁ-ཇཱ-྄྆-྇ྍ-ྗྙ-ྼ࿆က-ဩ၀-၉ၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟ᜎ-ᜐᜠ-ᜰᝀ-ᝐᝲᝳក-ឲ៝០-៩᠋-᠍᠐-᠙ᤠ-ᤫᤰ-᤻ᥑ-ᥭᦰ-ᧀᧈ-ᧉ᧐-᧙ᨀ-ᨕᨠ-ᩓ᩠-᩿᩼-᪉᪐-᪙ᭆ-ᭋ᭐-᭙᭫-᭳᮰-᮹᯦-᯳ᰀ-ᰢ᱀-᱉ᱛ-ᱽ᳐-᳒ᴀ-ᶾḁ-ἕ‌‍‿⁀⁔⃐-⃥⃜⃡-⃰ⶁ-ⶖⷠ-ⷿ〡-〨゙゚Ꙁ-ꙭꙴ-꙽ꚟ꛰-꛱ꟸ-ꠀ꠆ꠋꠣ-ꠧꢀ-ꢁꢴ-꣄꣐-꣙ꣳ-ꣷ꤀-꤉ꤦ-꤭ꤰ-ꥅꦀ-ꦃ꦳-꧀ꨀ-ꨧꩀ-ꩁꩌ-ꩍ꩐-꩙ꩻꫠ-ꫩꫲ-ꫳꯀ-ꯡ꯬꯭꯰-꯹ﬠ-ﬨ︀-️︠-︦︳︴﹍-﹏０-９＿",Yi=new RegExp("["+Qi+"]"),wn=new RegExp("["+Qi+yn+"]"),Ei=/[\n\r\u2028\u2029]/,hi=/\r\n|[\n\r\u2028\u2029]/g,Ti=m.isIdentifierStart=function(M){return M<65?M===36:M<91?!0:M<97?M===95:M<123?!0:M>=170&&Yi.test(String.fromCharCode(M))},Ji=m.isIdentifierChar=function(M){return M<48?M===36:M<58?!0:M<65?!1:M<91?!0:M<97?M===95:M<123?!0:M>=170&&wn.test(String.fromCharCode(M))};function Kt(){this.line=q,this.column=C-U}function $i(){q=1,C=U=0,F=!0,li()}function tt(M,z){L=C,k.locations&&(V=new Kt),T=M,li(),R=z,F=M.beforeExpr}function Cn(){var M=k.onComment&&k.locations&&new Kt,z=C,j=d.indexOf("*/",C+=2);if(j===-1&&K(C-2,"Unterminated comment"),C=j+2,k.locations){hi.lastIndex=z;for(var X;(X=hi.exec(d))&&X.index<C;)++q,U=X.index+X[0].length}k.onComment&&k.onComment(!0,d.slice(z+2,j),z,C,M,k.locations&&new Kt)}function Vi(){for(var M=C,z=k.onComment&&k.locations&&new Kt,j=d.charCodeAt(C+=2);C<y&&j!==10&&j!==13&&j!==8232&&j!==8233;)++C,j=d.charCodeAt(C);k.onComment&&k.onComment(!1,d.slice(M+2,C),M,C,z,k.locations&&new Kt)}function li(){for(;C<y;){var M=d.charCodeAt(C);if(M===32)++C;else if(M===13){++C;var z=d.charCodeAt(C);z===10&&++C,k.locations&&(++q,U=C)}else if(M===10||M===8232||M===8233)++C,k.locations&&(++q,U=C);else if(M>8&&M<14)++C;else if(M===47){var z=d.charCodeAt(C+1);if(z===42)Cn();else if(z===47)Vi();else break}else if(M===160)++C;else if(M>=5760&&bn.test(String.fromCharCode(M)))++C;else break}}function Sn(){var M=d.charCodeAt(C+1);return M>=48&&M<=57?tn(!0):(++C,tt(N))}function kn(){var M=d.charCodeAt(C+1);return F?(++C,en()):M===61?it(ne,2):it(W,1)}function In(){var M=d.charCodeAt(C+1);return M===61?it(ne,2):it(_n,1)}function Pn(M){var z=d.charCodeAt(C+1);return z===M?it(M===124?Ze:Ct,2):z===61?it(ne,2):it(M===124?Zt:oi,1)}function An(){var M=d.charCodeAt(C+1);return M===61?it(ne,2):it(Mt,1)}function En(M){var z=d.charCodeAt(C+1);return z===M?z==45&&d.charCodeAt(C+2)==62&&Ei.test(d.slice(Q,C))?(C+=3,Vi(),li(),Xt()):it(ye,2):z===61?it(ne,2):it(gn,1)}function Tn(M){var z=d.charCodeAt(C+1),j=1;return z===M?(j=M===62&&d.charCodeAt(C+2)===62?3:2,d.charCodeAt(C+j)===61?it(ne,j+1):it(pn,j)):z==33&&M==60&&d.charCodeAt(C+2)==45&&d.charCodeAt(C+3)==45?(C+=4,Vi(),li(),Xt()):(z===61&&(j=d.charCodeAt(C+2)===61?3:2),it(Vt,j))}function Ln(M){var z=d.charCodeAt(C+1);return z===61?it(Rt,d.charCodeAt(C+2)===61?3:2):it(M===61?$:ke,1)}function Nn(M){switch(M){case 46:return Sn();case 40:return++C,tt(xt);case 41:return++C,tt(i);case 59:return++C,tt(x);case 44:return++C,tt(a);case 91:return++C,tt(Wt);case 93:return++C,tt(jt);case 123:return++C,tt(Ot);case 125:return++C,tt(Pt);case 58:return++C,tt(I);case 63:return++C,tt(H);case 48:var z=d.charCodeAt(C+1);if(z===120||z===88)return On();case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return tn(!1);case 34:case 39:return Mn(M);case 47:return kn();case 37:case 42:return In();case 124:case 38:return Pn(M);case 94:return An();case 43:case 45:return En(M);case 60:case 62:return Tn(M);case 61:case 33:return Ln(M);case 126:return it(ke,1)}return!1}function Xt(M){if(M?C=E+1:E=C,k.locations&&(O=new Kt),M)return en();if(C>=y)return tt(pe);var z=d.charCodeAt(C);if(Ti(z)||z===92)return rn();var j=Nn(z);if(j===!1){var X=String.fromCharCode(z);if(X==="\\"||Yi.test(X))return rn();K(C,"Unexpected character '"+X+"'")}return j}function it(M,z){var j=d.slice(C,C+z);C+=z,tt(M,j)}function en(){for(var ge="",M,z,j=C;;){C>=y&&K(j,"Unterminated regular expression");var X=d.charAt(C);if(Ei.test(X)&&K(j,"Unterminated regular expression"),M)M=!1;else{if(X==="[")z=!0;else if(X==="]"&&z)z=!1;else if(X==="/"&&!z)break;M=X==="\\"}++C}var ge=d.slice(j,C);++C;var ve=nn();ve&&!/^[gmsiy]*$/.test(ve)&&K(j,"Invalid regexp flag");try{var xe=new RegExp(ge,ve)}catch(Ne){Ne instanceof SyntaxError&&K(j,Ne.message),K(Ne)}return tt(ae,xe)}function Ci(M,z){for(var j=C,X=0,ge=0,ve=z??1/0;ge<ve;++ge){var xe=d.charCodeAt(C),Ne;if(xe>=97?Ne=xe-97+10:xe>=65?Ne=xe-65+10:xe>=48&&xe<=57?Ne=xe-48:Ne=1/0,Ne>=M)break;++C,X=X*M+Ne}return C===j||z!=null&&C-j!==z?null:X}function On(){C+=2;var M=Ci(16);return M==null&&K(E+2,"Expected hexadecimal number"),Ti(d.charCodeAt(C))&&K(C,"Identifier directly after number"),tt(ue,M)}function tn(M){var z=C,j=!1,X=d.charCodeAt(C)===48;!M&&Ci(10)===null&&K(z,"Invalid number"),d.charCodeAt(C)===46&&(++C,Ci(10),j=!0);var ge=d.charCodeAt(C);(ge===69||ge===101)&&(ge=d.charCodeAt(++C),(ge===43||ge===45)&&++C,Ci(10)===null&&K(z,"Invalid number"),j=!0),Ti(d.charCodeAt(C))&&K(C,"Identifier directly after number");var ve=d.slice(z,C),xe;return j?xe=parseFloat(ve):!X||ve.length===1?xe=parseInt(ve,10):/[89]/.test(ve)||Z?K(z,"Invalid number"):xe=parseInt(ve,8),tt(ue,xe)}function Mn(M){C++;for(var z="";;){C>=y&&K(E,"Unterminated string constant");var j=d.charCodeAt(C);if(j===M)return++C,tt(ce,z);if(j===92){j=d.charCodeAt(++C);var X=/^[0-7]+/.exec(d.slice(C,C+3));for(X&&(X=X[0]);X&&parseInt(X,8)>255;)X=X.slice(0,-1);if(X==="0"&&(X=null),++C,X)Z&&K(C-2,"Octal literal in strict mode"),z+=String.fromCharCode(parseInt(X,8)),C+=X.length-1;else switch(j){case 110:z+=`
`;break;case 114:z+="\r";break;case 120:z+=String.fromCharCode(Li(2));break;case 117:z+=String.fromCharCode(Li(4));break;case 85:z+=String.fromCharCode(Li(8));break;case 116:z+="	";break;case 98:z+="\b";break;case 118:z+="\v";break;case 102:z+="\f";break;case 48:z+="\0";break;case 13:d.charCodeAt(C)===10&&++C;case 10:k.locations&&(U=C,++q);break;default:z+=String.fromCharCode(j);break}}else(j===13||j===10||j===8232||j===8233)&&K(E,"Unterminated string constant"),z+=String.fromCharCode(j),++C}}function Li(M){var z=Ci(16,M);return z===null&&K(E,"Bad character escape sequence"),z}var fi;function nn(){fi=!1;for(var M,z=!0,j=C;;){var X=d.charCodeAt(C);if(Ji(X))fi&&(M+=d.charAt(C)),++C;else if(X===92){fi||(M=d.slice(j,C)),fi=!0,d.charCodeAt(++C)!=117&&K(C,"Expecting Unicode escape sequence \\uXXXX"),++C;var ge=Li(4),ve=String.fromCharCode(ge);ve||K(C-1,"Invalid Unicode escape"),(z?Ti(ge):Ji(ge))||K(C-4,"Invalid Unicode escape"),M+=ve}else break;z=!1}return fi?M:d.slice(j,C)}function rn(){var M=nn(),z=fe;return!fi&&xn(M)&&(z=ui[M]),tt(z,M)}function Ee(){G=E,Q=L,J=V,Xt()}function Bi(M){if(Z=M,C=E,k.locations)for(;C<U;)U=d.lastIndexOf(`
`,U-2)+1,--q;li(),Xt()}function sn(){this.type=null,this.start=E,this.end=null}function an(){this.start=O,this.end=null,c!==null&&(this.source=c)}function nt(){var M=new sn;return k.locations&&(M.loc=new an),k.directSourceFile&&(M.sourceFile=k.directSourceFile),k.ranges&&(M.range=[E,0]),M}function Bt(M){var z=new sn;return z.start=M.start,k.locations&&(z.loc=new an,z.loc.start=M.loc.start),k.ranges&&(z.range=[M.range[0],0]),z}function Ie(M,z){return M.type=z,M.end=Q,k.locations&&(M.loc.end=J),k.ranges&&(M.range[1]=Q),M}function Fi(M){return k.ecmaVersion>=5&&M.type==="ExpressionStatement"&&M.expression.type==="Literal"&&M.expression.value==="use strict"}function He(M){if(T===M)return Ee(),!0}function Ni(){return!k.strictSemicolons&&(T===pe||T===Pt||Ei.test(d.slice(Q,E)))}function Qt(){!He(x)&&!Ni()&&At()}function $e(M){T===M?Ee():At()}function At(){K(E,"Unexpected token")}function Oi(M){M.type!=="Identifier"&&M.type!=="MemberExpression"&&K(M.start,"Assigning to rvalue"),Z&&M.type==="Identifier"&&Ai(M.name)&&K(M.start,"Assigning to "+M.name+" in strict mode")}function Rn(M){G=Q=C,k.locations&&(J=new Kt),ee=Z=null,se=[],Xt();var z=M||nt(),j=!0;for(M||(z.body=[]);T!==pe;){var X=bt();z.body.push(X),j&&Fi(X)&&Bi(!0),j=!1}return Ie(z,"Program")}var zi={kind:"loop"},Vn={kind:"switch"};function bt(){(T===W||T===ne&&R=="/=")&&Xt(!0);var M=T,z=nt();switch(M){case me:case Oe:Ee();var j=M===me;He(x)||Ni()?z.label=null:T!==fe?At():(z.label=Ft(),Qt());for(var X=0;X<se.length;++X){var ge=se[X];if((z.label==null||ge.name===z.label.name)&&(ge.kind!=null&&(j||ge.kind==="loop")||z.label&&j))break}return X===se.length&&K(z.start,"Unsyntactic "+M.keyword),Ie(z,j?"BreakStatement":"ContinueStatement");case Je:return Ee(),Qt(),Ie(z,"DebuggerStatement");case Le:return Ee(),se.push(zi),z.body=bt(),se.pop(),$e(gt),z.test=Si(),Qt(),Ie(z,"DoWhileStatement");case We:if(Ee(),se.push(zi),$e(xt),T===x)return Di(z,null);if(T===wt){var ve=nt();return Ee(),on(ve,!0),Ie(ve,"VariableDeclaration"),ve.declarations.length===1&&He(ai)?un(z,ve):Di(z,ve)}var ve=ut(!1,!0);return He(ai)?(Oi(ve),un(z,ve)):Di(z,ve);case je:return Ee(),Wi(z,!0);case Ye:return Ee(),z.test=Si(),z.consequent=bt(),z.alternate=He(ze)?bt():null,Ie(z,"IfStatement");case pt:return!ee&&!k.allowReturnOutsideFunction&&K(E,"'return' outside of function"),Ee(),He(x)||Ni()?z.argument=null:(z.argument=ut(),Qt()),Ie(z,"ReturnStatement");case ct:Ee(),z.discriminant=Si(),z.cases=[],$e(Ot),se.push(Vn);for(var xe,Ne;T!=Pt;)if(T===_e||T===Ue){var yt=T===_e;xe&&Ie(xe,"SwitchCase"),z.cases.push(xe=nt()),xe.consequent=[],Ee(),yt?xe.test=ut():(Ne&&K(G,"Multiple default clauses"),Ne=!0,xe.test=null),$e(I)}else xe||At(),xe.consequent.push(bt());return xe&&Ie(xe,"SwitchCase"),Ee(),se.pop(),Ie(z,"SwitchStatement");case at:return Ee(),Ei.test(d.slice(Q,E))&&K(Q,"Illegal newline after throw"),z.argument=ut(),Qt(),Ie(z,"ThrowStatement");case ht:if(Ee(),z.block=ki(),z.handler=null,T===re){var Yt=nt();Ee(),$e(xt),Yt.param=Ft(),Z&&Ai(Yt.param.name)&&K(Yt.param.start,"Binding "+Yt.param.name+" in strict mode"),$e(i),Yt.guard=null,Yt.body=ki(),z.handler=Ie(Yt,"CatchClause")}return z.guardedHandlers=ie,z.finalizer=He(st)?ki():null,!z.handler&&!z.finalizer&&K(z.start,"Missing catch or finally clause"),Ie(z,"TryStatement");case wt:return Ee(),on(z),Qt(),Ie(z,"VariableDeclaration");case gt:return Ee(),z.test=Si(),se.push(zi),z.body=bt(),se.pop(),Ie(z,"WhileStatement");case It:return Z&&K(E,"'with' in strict mode"),Ee(),z.object=Si(),z.body=bt(),Ie(z,"WithStatement");case Ot:return ki();case x:return Ee(),Ie(z,"EmptyStatement");default:var Zi=R,Mi=ut();if(M===fe&&Mi.type==="Identifier"&&He(I)){for(var X=0;X<se.length;++X)se[X].name===Zi&&K(Mi.start,"Label '"+Zi+"' is already declared");var Un=T.isLoop?"loop":T===ct?"switch":null;return se.push({name:Zi,kind:Un}),z.body=bt(),se.pop(),z.label=Mi,Ie(z,"LabeledStatement")}else return z.expression=Mi,Qt(),Ie(z,"ExpressionStatement")}}function Si(){$e(xt);var M=ut();return $e(i),M}function ki(M){var z=nt(),j=!0,X=!1,ge;for(z.body=[],$e(Ot);!He(Pt);){var ve=bt();z.body.push(ve),j&&M&&Fi(ve)&&(ge=X,Bi(X=!0)),j=!1}return X&&!ge&&Bi(!1),Ie(z,"BlockStatement")}function Di(M,z){return M.init=z,$e(x),M.test=T===x?null:ut(),$e(x),M.update=T===i?null:ut(),$e(i),M.body=bt(),se.pop(),Ie(M,"ForStatement")}function un(M,z){return M.left=z,M.right=ut(),$e(i),M.body=bt(),se.pop(),Ie(M,"ForInStatement")}function on(M,z){for(M.declarations=[],M.kind="var";;){var j=nt();if(j.id=Ft(),Z&&Ai(j.id.name)&&K(j.id.start,"Binding "+j.id.name+" in strict mode"),j.init=He($)?ut(!0,z):null,M.declarations.push(Ie(j,"VariableDeclarator")),!He(a))break}return M}function ut(M,z){var j=qi(z);if(!M&&T===a){var X=Bt(j);for(X.expressions=[j];He(a);)X.expressions.push(qi(z));return Ie(X,"SequenceExpression")}return j}function qi(M){var z=Bn(M);if(T.isAssign){var j=Bt(z);return j.operator=R,j.left=z,Ee(),j.right=qi(M),Oi(z),Ie(j,"AssignmentExpression")}return z}function Bn(M){var z=Fn(M);if(He(H)){var j=Bt(z);return j.test=z,j.consequent=ut(!0),$e(I),j.alternate=ut(!0,M),Ie(j,"ConditionalExpression")}return z}function Fn(M){return Ui(Hi(),-1,M)}function Ui(M,z,j){var X=T.binop;if(X!=null&&(!j||T!==ai)&&X>z){var ge=Bt(M);ge.left=M,ge.operator=R;var ve=T;Ee(),ge.right=Ui(Hi(),X,j);var xe=Ie(ge,ve===Ze||ve===Ct?"LogicalExpression":"BinaryExpression");return Ui(xe,z,j)}return M}function Hi(){if(T.prefix){var M=nt(),z=T.isUpdate;return M.operator=R,M.prefix=!0,F=!0,Ee(),M.argument=Hi(),z?Oi(M.argument):Z&&M.operator==="delete"&&M.argument.type==="Identifier"&&K(M.start,"Deleting local variable in strict mode"),Ie(M,z?"UpdateExpression":"UnaryExpression")}for(var j=zn();T.postfix&&!Ni();){var M=Bt(j);M.operator=R,M.prefix=!1,M.argument=j,Oi(j),Ee(),j=Ie(M,"UpdateExpression")}return j}function zn(){return Ii(Gi())}function Ii(M,z){if(He(N)){var j=Bt(M);return j.object=M,j.property=Ft(!0),j.computed=!1,Ii(Ie(j,"MemberExpression"),z)}else if(He(Wt)){var j=Bt(M);return j.object=M,j.property=ut(),j.computed=!0,$e(jt),Ii(Ie(j,"MemberExpression"),z)}else if(!z&&He(xt)){var j=Bt(M);return j.callee=M,j.arguments=ji(i,!1),Ii(Ie(j,"CallExpression"),z)}else return M}function Gi(){switch(T){case bi:var X=nt();return Ee(),Ie(X,"ThisExpression");case fe:return Ft();case ue:case ce:case ae:var X=nt();return X.value=R,X.raw=d.slice(E,L),Ee(),Ie(X,"Literal");case yi:case Gt:case Pe:var X=nt();return X.value=T.atomValue,X.raw=T.keyword,Ee(),Ie(X,"Literal");case xt:var M=O,z=E;Ee();var j=ut();return j.start=z,j.end=L,k.locations&&(j.loc.start=M,j.loc.end=V),k.ranges&&(j.range=[z,L]),$e(i),j;case Wt:var X=nt();return Ee(),X.elements=ji(jt,!0,!0),Ie(X,"ArrayExpression");case Ot:return qn();case je:var X=nt();return Ee(),Wi(X,!1);case xi:return Dn();default:At()}}function Dn(){var M=nt();return Ee(),M.callee=Ii(Gi(),!0),He(xt)?M.arguments=ji(i,!1):M.arguments=ie,Ie(M,"NewExpression")}function qn(){var M=nt(),z=!0,j=!1;for(M.properties=[],Ee();!He(Pt);){if(z)z=!1;else if($e(a),k.allowTrailingCommas&&He(Pt))break;var X={key:hn()},ge=!1,ve;if(He(I)?(X.value=ut(!0),ve=X.kind="init"):k.ecmaVersion>=5&&X.key.type==="Identifier"&&(X.key.name==="get"||X.key.name==="set")?(ge=j=!0,ve=X.kind=X.key.name,X.key=hn(),T!==xt&&At(),X.value=Wi(nt(),!1)):At(),X.key.type==="Identifier"&&(Z||j))for(var xe=0;xe<M.properties.length;++xe){var Ne=M.properties[xe];if(Ne.key.name===X.key.name){var yt=ve==Ne.kind||ge&&Ne.kind==="init"||ve==="init"&&(Ne.kind==="get"||Ne.kind==="set");yt&&!Z&&ve==="init"&&Ne.kind==="init"&&(yt=!1),yt&&K(X.key.start,"Redefinition of property")}}M.properties.push(X)}return Ie(M,"ObjectExpression")}function hn(){return T===ue||T===ce?Gi():Ft(!0)}function Wi(M,z){T===fe?M.id=Ft():z?At():M.id=null,M.params=[];var j=!0;for($e(xt);!He(i);)j?j=!1:$e(a),M.params.push(Ft());var X=ee,ge=se;if(ee=!0,se=[],M.body=ki(!0),ee=X,se=ge,Z||M.body.body.length&&Fi(M.body.body[0]))for(var ve=M.id?-1:0;ve<M.params.length;++ve){var xe=ve<0?M.id:M.params[ve];if((Xi(xe.name)||Ai(xe.name))&&K(xe.start,"Defining '"+xe.name+"' in strict mode"),ve>=0)for(var Ne=0;Ne<ve;++Ne)xe.name===M.params[Ne].name&&K(xe.start,"Argument name clash in strict mode")}return Ie(M,z?"FunctionDeclaration":"FunctionExpression")}function ji(M,z,j){for(var X=[],ge=!0;!He(M);){if(ge)ge=!1;else if($e(a),z&&k.allowTrailingCommas&&He(M))break;j&&T===a?X.push(null):X.push(ut(!0))}return X}function Ft(M){var z=nt();return M&&k.forbidReserved=="everywhere"&&(M=!1),T===fe?(!M&&(k.forbidReserved&&(k.ecmaVersion===3?vn:mn)(R)||Z&&Xi(R))&&d.slice(E,L).indexOf("\\")==-1&&K(E,"The keyword '"+R+"' is reserved"),z.name=R):M&&T.keyword?z.name=T.keyword:At(),F=!1,Ee(),Ie(z,"Identifier")}}),t.version||(t=null)}function s(m,k){return(e.acorn||t).parse(m,k)}var u={"+":"__add","-":"__subtract","*":"__multiply","/":"__divide","%":"__modulo","==":"__equals","!=":"__equals"},h={"-":"__negate","+":"__self"},o=B.each(["add","subtract","multiply","divide","modulo","equals","negate"],function(m){this["__"+m]="#"+m},{__self:function(){return this}});D.inject(o),oe.inject(o),Ge.inject(o);function l(m,k,d){var y=u[k];if(m&&m[y]){var c=m[y](d);return k==="!="?!c:c}switch(k){case"+":return m+d;case"-":return m-d;case"*":return m*d;case"/":return m/d;case"%":return m%d;case"==":return m==d;case"!=":return m!=d}}function f(m,k){var d=h[m];if(k&&k[d])return k[d]();switch(m){case"+":return+k;case"-":return-k}}function _(m,k){if(!m)return"";k=k||{};var d=[];function y(Z){for(var K=0,ie=d.length;K<ie;K++){var ue=d[K];if(ue[0]>=Z)break;Z+=ue[1]}return Z}function c(Z){return m.substring(y(Z.range[0]),y(Z.range[1]))}function b(Z,K){return m.substring(y(Z.range[1]),y(K.range[0]))}function S(Z,K){for(var ie=y(Z.range[0]),ue=y(Z.range[1]),ae=0,ce=d.length-1;ce>=0;ce--)if(ie>d[ce][0]){ae=ce+1;break}d.splice(ae,0,[ie,K.length-ue+ie]),m=m.substring(0,ie)+K+m.substring(ue)}function P(Z,K){switch(Z.type){case"UnaryExpression":if(Z.operator in h&&Z.argument.type!=="Literal"){var ie=c(Z.argument);S(Z,'$__("'+Z.operator+'", '+ie+")")}break;case"BinaryExpression":if(Z.operator in u&&Z.left.type!=="Literal"){var ue=c(Z.left),ae=c(Z.right),ce=b(Z.left,Z.right),fe=Z.operator;S(Z,"__$__("+ue+","+ce.replace(new RegExp("\\"+fe),'"'+fe+'"')+", "+ae+")")}break;case"UpdateExpression":case"AssignmentExpression":var pe=K&&K.type;if(!(pe==="ForStatement"||pe==="BinaryExpression"&&/^[=!<>]/.test(K.operator)||pe==="MemberExpression"&&K.computed)){if(Z.type==="UpdateExpression"){var ie=c(Z.argument),me="__$__("+ie+', "'+Z.operator[0]+'", 1)',_e=ie+" = "+me;Z.prefix?_e="("+_e+")":(pe==="AssignmentExpression"||pe==="VariableDeclarator"||pe==="BinaryExpression")&&(c(K.left||K.id)===ie&&(_e=me),_e=ie+"; "+_e),S(Z,_e)}else if(/^.=$/.test(Z.operator)&&Z.left.type!=="Literal"){var ue=c(Z.left),ae=c(Z.right),me=ue+" = __$__("+ue+', "'+Z.operator[0]+'", '+ae+")";S(Z,/^\(.*\)$/.test(c(Z))?"("+me+")":me)}}break}}function C(Z){switch(Z.type){case"ExportDefaultDeclaration":S({range:[Z.start,Z.declaration.start]},"module.exports = ");break;case"ExportNamedDeclaration":var K=Z.declaration,ie=Z.specifiers;if(K){var ue=K.declarations;ue&&(ue.forEach(function(ce){S(ce,"module.exports."+c(ce))}),S({range:[Z.start,K.start+K.kind.length]},""))}else if(ie){var ae=ie.map(function(ce){var fe=c(ce);return"module.exports."+fe+" = "+fe+"; "}).join("");ae&&S(Z,ae)}break}}function E(Z,K,ie){if(Z){for(var ue in Z)if(ue!=="range"&&ue!=="loc"){var ae=Z[ue];if(Array.isArray(ae))for(var ce=0,fe=ae.length;ce<fe;ce++)E(ae[ce],Z,ie);else ae&&typeof ae=="object"&&E(ae,Z,ie)}ie.operatorOverloading!==!1&&P(Z,K),ie.moduleExports!==!1&&C(Z)}}function L(Z){var K="",ie="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(Z=(Math.abs(Z)<<1)+(Z<0?1:0);Z||!K;){var ue=Z&31;Z>>=5,Z&&(ue|=32),K+=ie[ue]}return K}var O=k.url||"",V=k.sourceMaps,T=k.paperFeatures||{},R=k.source||m,F=k.offset||0,q=he.agent,U=q.versionNumber,G=!1,Q=/\r\n|\n|\r/mg,J;if(V&&(q.chrome&&U>=30||q.webkit&&U>=537.76||q.firefox&&U>=23||q.node)){if(q.node)F-=2;else if(Ve&&O&&!Ve.location.href.indexOf(O)){var ee=Te.getElementsByTagName("html")[0].innerHTML;F=ee.substr(0,ee.indexOf(m)+1).match(Q).length+1}G=F>0&&!(q.chrome&&U>=36||q.safari&&U>=600||q.firefox&&U>=40||q.node);var se=["AA"+L(G?0:F)+"A"];se.length=(m.match(Q)||[]).length+1+(G?F:0),J={version:3,file:O,names:[],mappings:se.join(";AACA"),sourceRoot:"",sources:[O],sourcesContent:[R]}}return(T.operatorOverloading!==!1||T.moduleExports!==!1)&&E(s(m,{ranges:!0,preserveParens:!0,sourceType:"module"}),null,T),J&&(G&&(m=new Array(F+1).join(`
`)+m),/^(inline|both)$/.test(V)&&(m+=`
//# sourceMappingURL=data:application/json;base64,`+_t.btoa(unescape(encodeURIComponent(JSON.stringify(J))))),m+=`
//# sourceURL=`+(O||"paperscript")),{url:O,source:R,code:m,map:J}}function v(m,k,d){he=k;var y=k.getView(),c=/\btool\.\w+|\s+on(?:Key|Mouse)(?:Up|Down|Move|Drag)\b/.test(m)&&!/\bnew\s+Tool\b/.test(m)?new vi:null,b=c?c._events:[],S=["onFrame","onResize"].concat(b),P=[],C=[],E,L=typeof m=="object"?m:_(m,d);m=L.code;function O(U,G){for(var Q in U)(G||!/^_/.test(Q))&&new RegExp("([\\b\\s\\W]|^)"+Q.replace(/\$/g,"\\$")+"\\b").test(m)&&(P.push(Q),C.push(U[Q]))}O({__$__:l,$__:f,paper:k,tool:c},!0),O(k),m="var module = { exports: {} }; "+m;var F=B.each(S,function(U){new RegExp("\\s+"+U+"\\b").test(m)&&(P.push(U),this.push("module.exports."+U+" = "+U+";"))},[]).join(`
`);F&&(m+=`
`+F),m+=`
return module.exports;`;var V=he.agent;if(Te&&(V.chrome||V.firefox&&V.versionNumber<40)){var T=Te.createElement("script"),R=Te.head||Te.getElementsByTagName("head")[0];V.firefox&&(m=`
`+m),T.appendChild(Te.createTextNode("document.__paperscript__ = function("+P+") {"+m+`
}`)),R.appendChild(T),E=Te.__paperscript__,delete Te.__paperscript__,R.removeChild(T)}else E=Function(P,m);var F=E&&E.apply(k,C),q=F||{};return B.each(b,function(U){var G=q[U];G&&(c[U]=G)}),y&&(q.onResize&&y.setOnResize(q.onResize),y.emit("resize",{size:y.size,delta:new D}),q.onFrame&&y.setOnFrame(q.onFrame),y.requestUpdate()),F}function g(m){if(/^text\/(?:x-|)paperscript$/.test(m.type)&&rt.getAttribute(m,"ignore")!=="true"){var k=rt.getAttribute(m,"canvas"),d=Te.getElementById(k),y=m.src||m.getAttribute("data-src"),c=rt.hasAttribute(m,"async"),b="data-paper-scope";if(!d)throw new Error('Unable to find canvas with id "'+k+'"');var S=rt.get(d.getAttribute(b))||new rt().setup(d);return d.setAttribute(b,S._id),y?ri.request({url:y,async:c,mimeType:"text/plain",onLoad:function(P){v(P,S,y)}}):v(m.innerHTML,S,m.baseURI),m.setAttribute("data-paper-ignore","true"),S}}function p(){B.each(Te&&Te.getElementsByTagName("script"),g)}function w(m){return m?g(m):p()}return Ve&&(Te.readyState==="complete"?setTimeout(p):qe.add(Ve,{load:p})),{compile:_,execute:v,load:w,parse:s,calculateBinary:l,calculateUnary:f}}).call(this);var he=new(rt.inject(B.exports,{Base:B,Numerical:Ae,Key:gi,DomEvent:qe,DomElement:Re,document:Te,window:Ve,Symbol:Qe,PlacedSymbol:Dt}));return he.agent.node&&ln(he),typeof Y=="function"&&Y.amd?Y("paper",he):Jt&&(Jt.exports=he),he}).call(cn,typeof self=="object"?self:null)})(dn);var Xn=dn.exports;const Yn=Gn(Xn);export{Yn as p};
