import{b as y,o as i,c as u,a as d,t as _,u as n,l as k,C as T,F as N,d as C,E as B,_ as L,x as Y,r as R,n as G,L as Z,f as q,w as E,g as I,a8 as J}from"./framework.18a7d3ba.js";import{r as A,a as F}from"./calculations.65ee336d.js";import{a as M,b as P,n as S,i as K,d as U}from"./theory.61e5aadb.js";import{g as x,n as b,c as X,b as V,e as $,f as Q}from"./colors.b83dc710.js";import{w as ee,x as te,y as oe,z as ne,A as j,t as se,u as re,p as ae}from"./index.b30cd6d2.js";import{F as ie}from"./index.139b2562.js";import{b as le}from"./synth.f8bdd3f9.js";import{g as ce,e as ue,d as me}from"./midi.d68b2a41.js";import{w as O}from"./index.654bd828.js";import{_ as he}from"./circle.62516574.js";import"./index.86652af6.js";import{_ as de}from"./keys.e0c91b6e.js";import{_ as fe}from"./choose.db67800f.js";var H={empty:!0,name:"",chordType:""},D={};function z(e){return typeof e=="string"?D[e]||(D[e]=xe(e)):typeof e=="number"?z(W[e]||""):ee(e)?pe(e):te(e)?z(e.name):H}function pe(e){return z(oe(e.alt)+W[e.step])}var ye=/^(#{1,}|b{1,}|x{1,}|)(IV|I{1,3}|VI{0,2}|iv|i{1,3}|vi{0,2})([^IViv]*)$/;function ve(e){return ye.exec(e)||["","","",""]}var ge="I II III IV V VI VII",W=ge.split(" ");function xe(e){const[l,t,r,o]=ve(e);if(!r)return H;const g=r.toUpperCase(),c=W.indexOf(g),p=ne(t),m=1;return{empty:!1,name:l,roman:r,interval:j({step:c,alt:p,dir:m}).name,acc:t,chordType:o,alt:p,step:c,major:r===g,oct:0,dir:m}}function _e(e,l){return l.map(z).map(r=>se(e,j(r))+r.chordType)}function we(e,l){return l.map(t=>{const[r,o]=ce(t),g=re(e,r);return z(j(g)).name+o})}var ke={fromRomanNumerals:_e,toRomanNumerals:we};const be={class:"font-bold"},$e={key:0,class:"text-sm"},Ne=["onMouseenter","onTouchstart"],Ce={__name:"stack",props:{pitch:{type:Number,default:null},chroma:{type:String,default:"1001000100101"},mode:{type:String,default:"O"},tonic:{type:Number,default:0},roman:{type:String,default:""}},setup(e){const l=e,t="101101011010".split(""),r=y(()=>l.pitch===0||l.pitch?l.pitch:x.tonic),o=y(()=>M.get(l.chroma));y(()=>P.get(l.chroma));const g=y(()=>A(l.chroma.split(""),-r.value).map((f,s)=>({active:f=="1",pitch:s})).reverse());function c(m){m.active&&p(m.pitch)}function p(m=0,f=0){let s=ie(m+57,"midi");ue(s.toNote()),le(s.toNote())}return(m,f)=>(i(),u("div",{class:"flex flex-col cursor-pointer select-none p-4 m-2 rounded-xl transition-all duration-300 ease w-full",style:T({backgroundColor:n(X)(e.chroma,r.value).hsl}),onMousedown:f[0]||(f[0]=s=>{n(V)(e.chroma,r.value),m.pressed=!0}),onTouchstart:f[1]||(f[1]=B(s=>{n(V)(e.chroma,r.value),m.pressed=!0},["prevent","stop"])),onTouchend:f[2]||(f[2]=s=>{n($)(e.chroma,r.value),m.pressed=!1}),onTouchcancel:f[3]||(f[3]=s=>{n($)(e.chroma,r.value),m.pressed=!1}),onMouseup:f[4]||(f[4]=s=>{n($)(e.chroma,r.value),m.pressed=!1}),onMouseleave:f[5]||(f[5]=s=>{n($)(e.chroma,r.value),m.pressed=!1})},[d("div",{class:"p-2 text-center mb-2 rounded-lg text-white",style:T({backgroundColor:n(b)(r.value,3),color:n(O)(n(b)(r.value),3).isDark()?"white":"black"})},[d("div",be,_(e.pitch===!1?"":typeof e.pitch=="string"?e.pitch:n(S)[r.value])+_(o.value.aliases[0]),1),l.roman?(i(),u("div",$e,_(l.roman),1)):k("",!0)],4),(i(!0),u(N,null,C(g.value,(s,h)=>(i(),u("div",{class:"py-6px px-8 my-2px w-full text-sm text-center font-bold rounded transition-all duration-300 ease touch-none",onMouseenter:v=>c(s),onTouchstart:v=>c(s),key:h,style:T({backgroundColor:s.active?n(b)(s.pitch):n(t)[s.pitch]==1?"hsla(0,0%,90%,0.8)":"hsla(0,0%,20%,0.6)"})},null,44,Ne))),128))],36))}};const Se={class:"select-none min-w-8em m-2",version:"1.1",baseProfile:"full",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",style:{"touch-action":"none"},"font-family":"Commissioner, sans-serif","text-anchor":"middle","dominant-baseline":"middle"},Ie=["fill"],Te=["transform","onMousedown","opacity"],ze=["width","height","fill"],Me=["y","x","fill"],Pe=["y","x"],Ve=["x","y","width","height","fill","stroke"],qe=["x","y"],Be=["x","y"],Ae={__name:"square",props:{pitch:{type:Number,default:null},chroma:{type:String,default:"1001000100101"},mode:{type:String,default:"O"},tonic:{type:Number,default:0},roman:{type:String,default:""},editable:{type:Boolean,default:!1}},emits:["update:chroma"],setup(e,{emit:l}){const t=e,r=Y(!1),o=R({width:100,height:100}),g=[[0,0],[1,0],[2,0],[3,0],[3,1],[3,2],[3,3],[2,3],[1,3],[0,3],[0,2],[0,1]],c=y(()=>t.pitch===0||t.pitch?t.pitch:x.tonic),p=y(()=>M.get(t.chroma));y(()=>P.get(t.chroma).name);function m(s,h=o.width,v=o.height){let a,w;return t.mode=="Z"?(a=s%4,w=Math.floor(s/4)+1,s>3&&s<8&&(a=3-a)):t.mode=="O"&&([a,w]=g[s]),`translate(${a*h/4},${w*v/4})`}function f(s){if(!t.editable)return;let h=[...t.chroma.split("")];h[s]=="1"?h[s]="0":h[s]="1",l("update:chroma",h.join(""))}return(s,h)=>(i(),u("svg",Se,[d("rect",{width:"100",height:"100",rx:"8",opacity:"0.6",fill:n(X)(e.chroma,c.value).hsl},null,8,Ie),(i(!0),u(N,null,C(e.chroma,(v,a)=>(i(),u("g",{class:"transition-all duration-400 ease-in-out cursor-pointer",key:a,transform:m(a),onMousedown:w=>f(a),opacity:v=="1"?1:.62},[d("rect",{class:"transition-all duration-200 ease-in-out",x:2,y:2,rx:"6",width:o.width/4-4,height:o.height/4-4,fill:n(O)(v=="1"?n(b)((a+c.value)%12,3):n(S)[(a+n(x).tonic)%12].length!=2?"hsl(0,0%,85%)":"hsl(0,0%,40%)").toHex()},null,8,ze),v=="1"?(i(),u("text",{key:0,y:o.height/8+1,x:o.width/8,"font-size":8,"font-weight":"bold",fill:n(O)(n(b)(a+n(x).tonic)).isDark()?"white":"black"},_(n(S)[(a+c.value)%12]),9,Me)):k("",!0),v=="0"?(i(),u("text",{key:1,y:o.height/8+1,x:o.width/8,"font-size":"6px","font-weight":"normal",fill:"black",opacity:"0.5"},_(n(K)[a]),9,Pe)):k("",!0)],40,Te))),128)),d("g",{class:G(["center cursor-pointer",{pressed:r.value}]),onMousedown:h[0]||(h[0]=B(v=>{n(V)(e.chroma,c.value),r.value=!0},["prevent","stop"])),onTouchstart:h[1]||(h[1]=B(v=>{n(V)(e.chroma,c.value),r.value=!0},["prevent","stop"])),onTouchend:h[2]||(h[2]=v=>{n($)(e.chroma,c.value),r.value=!1}),onTouchcancel:h[3]||(h[3]=v=>{n($)(e.chroma,c.value),r.value=!1}),onMouseup:h[4]||(h[4]=v=>{n($)(e.chroma,c.value),r.value=!1}),onMouseleave:h[5]||(h[5]=v=>{n($)(e.chroma,c.value),r.value=!1})},[d("rect",{class:"transition-all duration-400 ease-in-out",rx:"4",x:o.width/4+2,y:o.width/4+2,width:o.width/2-4,height:o.height/2-4,fill:e.pitch===!1?"none":n(b)(c.value,3),stroke:n(b)(n(x).tonic,3,1,.5),"stroke-width":"2"},null,8,Ve),d("text",{x:o.width/2,y:o.height/2,"font-size":"10px","font-weight":"bold",fill:"white"},_(e.pitch===!1?"":typeof e.pitch=="string"?e.pitch:n(S)[c.value])+_(p.value.aliases[0]),9,qe),t.roman?(i(),u("text",{key:0,class:"function",x:o.width/2,y:o.height/2+13,"font-size":"8px","font-weight":"normal",fill:"white"},_(t.roman),9,Be)):k("",!0)],34)]))}},Oe=L(Ae,[["__scopeId","data-v-e0b528e1"]]);const Re={class:"flex justify-center"},je={class:"text-2x font-bold"},We=["viewBox"],Ee={id:"fretboard"},Fe=["x2"],Ue=["x1","y1","y2"],De=["cy","cx"],Le={id:"strings"},Ge=["transform"],Xe=["y2"],He=["transform"],Ye=["opacity","r","fill"],Ze=["opacity"],Je={__name:"tab",props:{instrument:{type:String,default:"ukulele"},chroma:{type:String,default:"100000000000"},pitch:{type:Number,default:0},chordNotes:{type:Array,default:[]}},setup(e){const l=e,t={guitar:[7,0,5,10,2,7],ukulele:[10,3,7,0]},r=[3,5,7,10,12,15,17,19,21],o=R({strings:y(()=>t[l.instrument]),height:y(()=>(o.strings.length-1)*o.noteSize),width:y(()=>o.fretNum*o.fretWidth),isInChord:y(()=>ae.isNoteIncludedIn(l.chordNotes)),chroma:y(()=>A(l.chroma.split(""),-l.pitch)),scale:y(()=>A(x.chroma.split(""),-l.pitch)),title:y(()=>{var g,c;return(g=M.get(l.chroma))!=null&&g.empty?(c=P.get(l.chroma))!=null&&c.empty?"":P.get(l.chroma):M.get(l.chroma).aliases[0]}),noteSize:50,fretWidth:50,fretNum:5});return(g,c)=>(i(),u("div",{class:"flex flex-col items-center justify-center rounded-3xl py-2",style:T({backgroundColor:n(F)(e.pitch,3,1,.3)})},[d("div",Re,[d("div",je,_(n(S)[e.pitch])+_(o.title),1)]),(i(),u("svg",{class:"max-h-3xl w-full my-2",id:"fretboard",version:"1.1",baseProfile:"full",viewBox:`-50 -50 ${o.height+100} ${o.width+60}`,xmlns:"http://www.w3.org/2000/svg","font-family":"Commissioner, sans-serif","font-size":"20px","text-anchor":"middle","dominant-baseline":"middle"},[d("g",Ee,[d("line",{stroke:"currentColor","stroke-width":"10",x1:"0",x2:o.height},null,8,Fe),(i(!0),u(N,null,C(o.fretNum,p=>(i(),u("g",{class:"fret",key:p},[d("line",{x1:o.height,y1:p*o.fretWidth,y2:p*o.fretWidth,stroke:"currentColor","stroke-width":"2",opacity:"0.5"},null,8,Ue),r.find(m=>m==p)?(i(),u("circle",{key:0,class:"inlay",cy:(p-.5)*o.fretWidth,cx:o.height/2,r:"5",opacity:"0.8",fill:"currentColor"},null,8,De)):k("",!0)]))),128))]),d("g",Le,[(i(!0),u(N,null,C(o.strings,(p,m)=>(i(),u("g",{class:"string",key:p,transform:`translate(${m*o.noteSize} 0)`},[d("line",{y2:o.width,"stroke-width":"4",stroke:"currentColor",opacity:"0.5"},null,8,Xe),(i(!0),u(N,null,C(o.fretNum+1,(f,s)=>(i(),u("g",{class:"note",key:f,transform:`translate(0 ${(s-.5)*o.fretWidth})`},[d("circle",{opacity:o.chroma[(s+p)%12]==1?1:0,r:o.noteSize/2-8,fill:n(F)(p+s)},null,8,Ye),d("text",{opacity:o.chroma[(s+p)%12]==1?1:0,fill:"white","font-size":"18","font-weight":"bold"},_(n(S)[(s+p)%12]),9,Ze)],8,He))),128))],8,Ge))),128))])],8,We))],4))}},Ke=L(Je,[["__scopeId","data-v-92354fef"]]),Qe={class:"flex flex-col"},et={class:"flex flex-wrap mx-auto my-4"},tt={class:"flex flex-col text-center mb-2 relative p-1"},ot={class:"text-2xl font-bold flex mx-auto items-center"},nt=["href"],st=d("div",{class:"i-la-wikipedia-w"},null,-1),rt=[st],at={class:"text-lg"},it={class:"flex flex-wrap p-4 items-start",style:{flex:"1 1 6rem"}},lt=["onClick"],ct={class:"font-bold px-1 mb-1"},$t={__name:"progressions",props:{list:{type:Object,required:!0},initial:{type:String,default:"major"}},setup(e){const l=e,t=R({mode:Z("progresions-mode","bars"),selected:l.initial,current:y(()=>l.list[t.selected]),scaleString:y(()=>`${x.note.name} ${l.list[t.selected].title}`.toLowerCase()),scale:y(()=>Q.get(t.scaleString))}),r={ukulele:"Ukulele",guitar:"Guitar",piano:"Piano",circles:"Circles",squares:"Squares",bars:"Bars"};function o(g){let c=g.split("-");return ke.fromRomanNumerals(x.note,c).map(f=>{let s=me.get(f);return s.pitches=s.notes.map(h=>U[h]),s.tonicPitch=U[s.tonic],s})}return(g,c)=>{const p=fe,m=de,f=Ke,s=he,h=Oe,v=Ce;return i(),u("div",Qe,[d("div",et,[q(p,{modelValue:t.mode,"onUpdate:modelValue":c[0]||(c[0]=a=>t.mode=a),variants:r},null,8,["modelValue"])]),d("div",{class:"flex flex-wrap items-stretch my-2 p-8 gap-4 border-2 rounded-xl",style:T({borderColor:n(b)(n(x).tonic,2),backgroundColor:n(b)(n(x).tonic,2,1,.05)})},[q(m,{class:"w-20em mx-auto",chroma:n(x).chroma,style:{flex:"1 1 3rem"},pitch:n(x).tonic,"onUpdate:pitch":c[1]||(c[1]=a=>n(x).tonic=a)},{default:E(()=>[d("div",tt,[d("div",ot,_(n(x).note.name)+" "+_(t.current.title),1),t.current.link?(i(),u("a",{key:0,class:"p-1 text-2xl absolute right-2 top-2 rounded-full shadow-xl",href:t.current.link,target:"_blank"},rt,8,nt)):k("",!0),d("div",at,_(t.current.degrees),1)])]),_:1},8,["chroma","pitch"]),d("div",it,[(i(!0),u(N,null,C(e.list,(a,w)=>(i(),u("button",{class:G(["text-button flex flex-col",{active:a==t.current}]),key:a,onClick:ut=>{t.selected=w,n(x).chroma=t.scale.chroma}},[d("div",ct,_(a.title),1)],10,lt))),128))]),q(J,{name:"fade",mode:"out-in"},{default:E(()=>[(i(),u("div",{class:"flex flex-wrap gap-2",key:t.current},[(i(!0),u(N,null,C(o(t.current.degrees),(a,w)=>(i(),u("div",{class:"flex flex-col select-none max-w-16rem",style:{flex:"1 1 10rem"},key:w},[t.mode=="piano"?(i(),I(m,{key:0,class:"flex-1 p-1 min-w-150px",chroma:a.chroma,pitch:a.tonicPitch,roman:t.current.degrees.split("-")[w],playAll:!0},null,8,["chroma","pitch","roman"])):k("",!0),t.mode=="guitar"||t.mode=="ukulele"?(i(),I(f,{key:1,instrument:t.mode,chroma:a.chroma,pitch:a.tonicPitch},null,8,["instrument","chroma","pitch"])):k("",!0),t.mode=="circles"?(i(),I(s,{key:2,class:"min-w-8em",chroma:a.chroma,pitch:a.tonicPitch,type:t.current.degrees.split("-")[w]},null,8,["chroma","pitch","type"])):k("",!0),t.mode=="squares"?(i(),I(h,{key:3,class:"self-center my-4 min-w-8em",chroma:a.chroma,pitch:a.tonicPitch,roman:t.current.degrees.split("-")[w]},null,8,["chroma","pitch","roman"])):k("",!0),t.mode=="bars"?(i(),I(v,{key:4,class:"mx-8",chroma:a.chroma,pitch:a.tonicPitch,roman:t.current.degrees.split("-")[w]},null,8,["chroma","pitch","roman"])):k("",!0)]))),128))]))]),_:1})],4)])}}};export{$t as _};
