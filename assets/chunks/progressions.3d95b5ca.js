import{b as y,o as l,c as u,a as d,t as _,u as n,l as k,C as T,F as N,d as C,E as B,_ as L,x as Y,r as R,n as G,L as Z,f as q,w as E,g as I,a8 as J}from"./framework.18a7d3ba.js";import{r as A,a as F}from"./calculations.65ee336d.js";import{a as M,b as P,n as S,i as K,d as U}from"./theory.dec16ed9.js";import{g as x,n as b,c as X,b as V,e as $,f as Q}from"./colors.2bbde8c3.js";import{v as ee,w as te,x as oe,y as ne,z as j,q as se,t as re,u as ae,p as ie}from"./index.140cffd8.js";import{e as le,d as ce}from"./midi.6b5d8130.js";import{F as ue}from"./index.cccf7ef0.js";import{b as me}from"./synth.2a9e2549.js";import{w as O}from"./index.654bd828.js";import{_ as he}from"./circle.095ef6d9.js";import"./index.be7eb4a8.js";import{_ as de}from"./keys.ec5773a8.js";import{_ as fe}from"./choose.db67800f.js";var H={empty:!0,name:"",chordType:""},D={};function z(e){return typeof e=="string"?D[e]||(D[e]=xe(e)):typeof e=="number"?z(W[e]||""):ee(e)?pe(e):te(e)?z(e.name):H}function pe(e){return z(oe(e.alt)+W[e.step])}var ye=/^(#{1,}|b{1,}|x{1,}|)(IV|I{1,3}|VI{0,2}|iv|i{1,3}|vi{0,2})([^IViv]*)$/;function ve(e){return ye.exec(e)||["","","",""]}var ge="I II III IV V VI VII",W=ge.split(" ");function xe(e){const[a,o,r,t]=ve(e);if(!r)return H;const g=r.toUpperCase(),c=W.indexOf(g),p=ne(o),m=1;return{empty:!1,name:a,roman:r,interval:j({step:c,alt:p,dir:m}).name,acc:o,chordType:t,alt:p,step:c,major:r===g,oct:0,dir:m}}function _e(e){const[a,o,r,t]=se(e);return a===""?["",e]:a==="A"&&t==="ug"?["","aug"]:[a+o,r+t]}function we(e,a){return a.map(z).map(r=>re(e,j(r))+r.chordType)}function ke(e,a){return a.map(o=>{const[r,t]=_e(o),g=ae(e,r);return z(j(g)).name+t})}var be={fromRomanNumerals:we,toRomanNumerals:ke};const $e={class:"font-bold"},Ne={key:0,class:"text-sm"},Ce=["onMouseenter","onTouchstart"],Se={__name:"stack",props:{pitch:{type:Number,default:null},chroma:{type:String,default:"1001000100101"},mode:{type:String,default:"O"},tonic:{type:Number,default:0},roman:{type:String,default:""}},setup(e){const a=e,o="101101011010".split(""),r=y(()=>a.pitch===0||a.pitch?a.pitch:x.tonic),t=y(()=>M.get(a.chroma));y(()=>P.get(a.chroma));const g=y(()=>A(a.chroma.split(""),-r.value).map((f,s)=>({active:f=="1",pitch:s})).reverse());function c(m){m.active&&p(m.pitch)}function p(m=0,f=0){let s=ue(m+57,"midi");le(s.toNote()),me(s.toNote())}return(m,f)=>(l(),u("div",{class:"flex flex-col cursor-pointer select-none p-4 m-2 rounded-xl transition-all duration-300 ease w-full",style:T({backgroundColor:n(X)(e.chroma,r.value).hsl}),onMousedown:f[0]||(f[0]=s=>{n(V)(e.chroma,r.value),m.pressed=!0}),onTouchstart:f[1]||(f[1]=B(s=>{n(V)(e.chroma,r.value),m.pressed=!0},["prevent","stop"])),onTouchend:f[2]||(f[2]=s=>{n($)(e.chroma,r.value),m.pressed=!1}),onTouchcancel:f[3]||(f[3]=s=>{n($)(e.chroma,r.value),m.pressed=!1}),onMouseup:f[4]||(f[4]=s=>{n($)(e.chroma,r.value),m.pressed=!1}),onMouseleave:f[5]||(f[5]=s=>{n($)(e.chroma,r.value),m.pressed=!1})},[d("div",{class:"p-2 text-center mb-2 rounded-lg text-white",style:T({backgroundColor:n(b)(r.value,3),color:n(O)(n(b)(r.value),3).isDark()?"white":"black"})},[d("div",$e,_(e.pitch===!1?"":typeof e.pitch=="string"?e.pitch:n(S)[r.value])+_(t.value.aliases[0]),1),a.roman?(l(),u("div",Ne,_(a.roman),1)):k("",!0)],4),(l(!0),u(N,null,C(g.value,(s,h)=>(l(),u("div",{class:"py-6px px-8 my-2px w-full text-sm text-center font-bold rounded transition-all duration-300 ease touch-none",onMouseenter:v=>c(s),onTouchstart:v=>c(s),key:h,style:T({backgroundColor:s.active?n(b)(s.pitch):n(o)[s.pitch]==1?"hsla(0,0%,90%,0.8)":"hsla(0,0%,20%,0.6)"})},null,44,Ce))),128))],36))}};const Ie={class:"select-none min-w-8em m-2",version:"1.1",baseProfile:"full",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",style:{"touch-action":"none"},"font-family":"Commissioner, sans-serif","text-anchor":"middle","dominant-baseline":"middle"},Te=["fill"],ze=["transform","onMousedown","opacity"],Me=["width","height","fill"],Pe=["y","x","fill"],Ve=["y","x"],qe=["x","y","width","height","fill","stroke"],Be=["x","y"],Ae=["x","y"],Oe={__name:"square",props:{pitch:{type:Number,default:null},chroma:{type:String,default:"1001000100101"},mode:{type:String,default:"O"},tonic:{type:Number,default:0},roman:{type:String,default:""},editable:{type:Boolean,default:!1}},emits:["update:chroma"],setup(e,{emit:a}){const o=e,r=Y(!1),t=R({width:100,height:100}),g=[[0,0],[1,0],[2,0],[3,0],[3,1],[3,2],[3,3],[2,3],[1,3],[0,3],[0,2],[0,1]],c=y(()=>o.pitch===0||o.pitch?o.pitch:x.tonic),p=y(()=>M.get(o.chroma));y(()=>P.get(o.chroma).name);function m(s,h=t.width,v=t.height){let i,w;return o.mode=="Z"?(i=s%4,w=Math.floor(s/4)+1,s>3&&s<8&&(i=3-i)):o.mode=="O"&&([i,w]=g[s]),`translate(${i*h/4},${w*v/4})`}function f(s){if(!o.editable)return;let h=[...o.chroma.split("")];h[s]=="1"?h[s]="0":h[s]="1",a("update:chroma",h.join(""))}return(s,h)=>(l(),u("svg",Ie,[d("rect",{width:"100",height:"100",rx:"8",opacity:"0.6",fill:n(X)(e.chroma,c.value).hsl},null,8,Te),(l(!0),u(N,null,C(e.chroma,(v,i)=>(l(),u("g",{class:"transition-all duration-400 ease-in-out cursor-pointer",key:i,transform:m(i),onMousedown:w=>f(i),opacity:v=="1"?1:.62},[d("rect",{class:"transition-all duration-200 ease-in-out",x:2,y:2,rx:"6",width:t.width/4-4,height:t.height/4-4,fill:n(O)(v=="1"?n(b)((i+c.value)%12,3):n(S)[(i+n(x).tonic)%12].length!=2?"hsl(0,0%,85%)":"hsl(0,0%,40%)").toHex()},null,8,Me),v=="1"?(l(),u("text",{key:0,y:t.height/8+1,x:t.width/8,"font-size":8,"font-weight":"bold",fill:n(O)(n(b)(i+n(x).tonic)).isDark()?"white":"black"},_(n(S)[(i+c.value)%12]),9,Pe)):k("",!0),v=="0"?(l(),u("text",{key:1,y:t.height/8+1,x:t.width/8,"font-size":"6px","font-weight":"normal",fill:"black",opacity:"0.5"},_(n(K)[i]),9,Ve)):k("",!0)],40,ze))),128)),d("g",{class:G(["center cursor-pointer",{pressed:r.value}]),onMousedown:h[0]||(h[0]=B(v=>{n(V)(e.chroma,c.value),r.value=!0},["prevent","stop"])),onTouchstart:h[1]||(h[1]=B(v=>{n(V)(e.chroma,c.value),r.value=!0},["prevent","stop"])),onTouchend:h[2]||(h[2]=v=>{n($)(e.chroma,c.value),r.value=!1}),onTouchcancel:h[3]||(h[3]=v=>{n($)(e.chroma,c.value),r.value=!1}),onMouseup:h[4]||(h[4]=v=>{n($)(e.chroma,c.value),r.value=!1}),onMouseleave:h[5]||(h[5]=v=>{n($)(e.chroma,c.value),r.value=!1})},[d("rect",{class:"transition-all duration-400 ease-in-out",rx:"4",x:t.width/4+2,y:t.width/4+2,width:t.width/2-4,height:t.height/2-4,fill:e.pitch===!1?"none":n(b)(c.value,3),stroke:n(b)(n(x).tonic,3,1,.5),"stroke-width":"2"},null,8,qe),d("text",{x:t.width/2,y:t.height/2,"font-size":"10px","font-weight":"bold",fill:"white"},_(e.pitch===!1?"":typeof e.pitch=="string"?e.pitch:n(S)[c.value])+_(p.value.aliases[0]),9,Be),o.roman?(l(),u("text",{key:0,class:"function",x:t.width/2,y:t.height/2+13,"font-size":"8px","font-weight":"normal",fill:"white"},_(o.roman),9,Ae)):k("",!0)],34)]))}},Re=L(Oe,[["__scopeId","data-v-e0b528e1"]]);const je={class:"flex justify-center"},We={class:"text-2x font-bold"},Ee=["viewBox"],Fe={id:"fretboard"},Ue=["x2"],De=["x1","y1","y2"],Le=["cy","cx"],Ge={id:"strings"},Xe=["transform"],He=["y2"],Ye=["transform"],Ze=["opacity","r","fill"],Je=["opacity"],Ke={__name:"tab",props:{instrument:{type:String,default:"ukulele"},chroma:{type:String,default:"100000000000"},pitch:{type:Number,default:0},chordNotes:{type:Array,default:[]}},setup(e){const a=e,o={guitar:[7,0,5,10,2,7],ukulele:[10,3,7,0]},r=[3,5,7,10,12,15,17,19,21],t=R({strings:y(()=>o[a.instrument]),height:y(()=>(t.strings.length-1)*t.noteSize),width:y(()=>t.fretNum*t.fretWidth),isInChord:y(()=>ie.isNoteIncludedIn(a.chordNotes)),chroma:y(()=>A(a.chroma.split(""),-a.pitch)),scale:y(()=>A(x.chroma.split(""),-a.pitch)),title:y(()=>{var g,c;return(g=M.get(a.chroma))!=null&&g.empty?(c=P.get(a.chroma))!=null&&c.empty?"":P.get(a.chroma):M.get(a.chroma).aliases[0]}),noteSize:50,fretWidth:50,fretNum:5});return(g,c)=>(l(),u("div",{class:"flex flex-col items-center justify-center rounded-3xl py-2",style:T({backgroundColor:n(F)(e.pitch,3,1,.3)})},[d("div",je,[d("div",We,_(n(S)[e.pitch])+_(t.title),1)]),(l(),u("svg",{class:"max-h-3xl w-full my-2",id:"fretboard",version:"1.1",baseProfile:"full",viewBox:`-50 -50 ${t.height+100} ${t.width+60}`,xmlns:"http://www.w3.org/2000/svg","font-family":"Commissioner, sans-serif","font-size":"20px","text-anchor":"middle","dominant-baseline":"middle"},[d("g",Fe,[d("line",{stroke:"currentColor","stroke-width":"10",x1:"0",x2:t.height},null,8,Ue),(l(!0),u(N,null,C(t.fretNum,p=>(l(),u("g",{class:"fret",key:p},[d("line",{x1:t.height,y1:p*t.fretWidth,y2:p*t.fretWidth,stroke:"currentColor","stroke-width":"2",opacity:"0.5"},null,8,De),r.find(m=>m==p)?(l(),u("circle",{key:0,class:"inlay",cy:(p-.5)*t.fretWidth,cx:t.height/2,r:"5",opacity:"0.8",fill:"currentColor"},null,8,Le)):k("",!0)]))),128))]),d("g",Ge,[(l(!0),u(N,null,C(t.strings,(p,m)=>(l(),u("g",{class:"string",key:p,transform:`translate(${m*t.noteSize} 0)`},[d("line",{y2:t.width,"stroke-width":"4",stroke:"currentColor",opacity:"0.5"},null,8,He),(l(!0),u(N,null,C(t.fretNum+1,(f,s)=>(l(),u("g",{class:"note",key:f,transform:`translate(0 ${(s-.5)*t.fretWidth})`},[d("circle",{opacity:t.chroma[(s+p)%12]==1?1:0,r:t.noteSize/2-8,fill:n(F)(p+s)},null,8,Ze),d("text",{opacity:t.chroma[(s+p)%12]==1?1:0,fill:"white","font-size":"18","font-weight":"bold"},_(n(S)[(s+p)%12]),9,Je)],8,Ye))),128))],8,Xe))),128))])],8,Ee))],4))}},Qe=L(Ke,[["__scopeId","data-v-92354fef"]]),et={class:"flex flex-col"},tt={class:"flex flex-wrap mx-auto my-4"},ot={class:"flex flex-col text-center mb-2 relative p-1"},nt={class:"text-2xl font-bold flex mx-auto items-center"},st=["href"],rt=d("div",{class:"i-la-wikipedia-w"},null,-1),at=[rt],it={class:"text-lg"},lt={class:"flex flex-wrap p-4 items-start",style:{flex:"1 1 6rem"}},ct=["onClick"],ut={class:"font-bold px-1 mb-1"},Nt={__name:"progressions",props:{list:{type:Object,required:!0},initial:{type:String,default:"major"}},setup(e){const a=e,o=R({mode:Z("progresions-mode","bars"),selected:a.initial,current:y(()=>a.list[o.selected]),scaleString:y(()=>`${x.note.name} ${a.list[o.selected].title}`.toLowerCase()),scale:y(()=>Q.get(o.scaleString))}),r={ukulele:"Ukulele",guitar:"Guitar",piano:"Piano",circles:"Circles",squares:"Squares",bars:"Bars"};function t(g){let c=g.split("-");return be.fromRomanNumerals(x.note,c).map(f=>{let s=ce.get(f);return s.pitches=s.notes.map(h=>U[h]),s.tonicPitch=U[s.tonic],s})}return(g,c)=>{const p=fe,m=de,f=Qe,s=he,h=Re,v=Se;return l(),u("div",et,[d("div",tt,[q(p,{modelValue:o.mode,"onUpdate:modelValue":c[0]||(c[0]=i=>o.mode=i),variants:r},null,8,["modelValue"])]),d("div",{class:"flex flex-wrap items-stretch my-2 p-8 gap-4 border-2 rounded-xl",style:T({borderColor:n(b)(n(x).tonic,2),backgroundColor:n(b)(n(x).tonic,2,1,.05)})},[q(m,{class:"w-20em mx-auto",chroma:n(x).chroma,style:{flex:"1 1 3rem"},pitch:n(x).tonic,"onUpdate:pitch":c[1]||(c[1]=i=>n(x).tonic=i)},{default:E(()=>[d("div",ot,[d("div",nt,_(n(x).note.name)+" "+_(o.current.title),1),o.current.link?(l(),u("a",{key:0,class:"p-1 text-2xl absolute right-2 top-2 rounded-full shadow-xl",href:o.current.link,target:"_blank"},at,8,st)):k("",!0),d("div",it,_(o.current.degrees),1)])]),_:1},8,["chroma","pitch"]),d("div",lt,[(l(!0),u(N,null,C(e.list,(i,w)=>(l(),u("button",{class:G(["text-button flex flex-col",{active:i==o.current}]),key:i,onClick:mt=>{o.selected=w,n(x).chroma=o.scale.chroma}},[d("div",ut,_(i.title),1)],10,ct))),128))]),q(J,{name:"fade",mode:"out-in"},{default:E(()=>[(l(),u("div",{class:"flex flex-wrap gap-2",key:o.current},[(l(!0),u(N,null,C(t(o.current.degrees),(i,w)=>(l(),u("div",{class:"flex flex-col select-none max-w-16rem",style:{flex:"1 1 10rem"},key:w},[o.mode=="piano"?(l(),I(m,{key:0,class:"flex-1 p-1 min-w-150px",chroma:i.chroma,pitch:i.tonicPitch,roman:o.current.degrees.split("-")[w],playAll:!0},null,8,["chroma","pitch","roman"])):k("",!0),o.mode=="guitar"||o.mode=="ukulele"?(l(),I(f,{key:1,instrument:o.mode,chroma:i.chroma,pitch:i.tonicPitch},null,8,["instrument","chroma","pitch"])):k("",!0),o.mode=="circles"?(l(),I(s,{key:2,class:"min-w-8em",chroma:i.chroma,pitch:i.tonicPitch,type:o.current.degrees.split("-")[w]},null,8,["chroma","pitch","type"])):k("",!0),o.mode=="squares"?(l(),I(h,{key:3,class:"self-center my-4 min-w-8em",chroma:i.chroma,pitch:i.tonicPitch,roman:o.current.degrees.split("-")[w]},null,8,["chroma","pitch","roman"])):k("",!0),o.mode=="bars"?(l(),I(v,{key:4,class:"mx-8",chroma:i.chroma,pitch:i.tonicPitch,roman:o.current.degrees.split("-")[w]},null,8,["chroma","pitch","roman"])):k("",!0)]))),128))]))]),_:1})],4)])}}};export{Nt as _};
