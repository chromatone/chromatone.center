import{_ as K,r as Q,b as v,o as u,c as f,a as o,C as x,u as t,t as m,F as C,d as $,n as O,E as U,l as q,p as W,q as X}from"./framework.5f732f34.js";import{r as E}from"./calculations.65ee336d.js";import{g as c,c as _,b as z,e as k,h as Y}from"./colors.bcf8e035.js";import{p as L}from"./index.140cffd8.js";import"./index.be7eb4a8.js";import{i as V}from"./index.2a263da6.js";import{n as Z}from"./index.ae0c5bda.js";import{F as N}from"./index.cccf7ef0.js";import{b as A}from"./synth.8bbffa8d.js";import{e as D}from"./midi.122ebddd.js";import{a as ee,b as te,n as H}from"./theory.dec16ed9.js";import{w as oe}from"./index.654bd828.js";const y=s=>(W("data-v-6e7fd237"),s=s(),X(),s),se={class:"flex w-full rounded-xl overflow-hidden"},le={class:"flex flex-wrap items-center justify-stretch w-full text-sm px-2 bg-dark-800 bg-opacity-10"},ae={class:"p-2px"},ne=y(()=>o("div",{class:"flex-1"},null,-1)),re={class:"flex font-bold",title:"Intervals"},ce=y(()=>o("div",{class:"flex-1"},null,-1)),ie={class:"flex",title:"Steps"},me=y(()=>o("div",{class:"flex-1"},null,-1)),de={class:"p-1",title:"Pcset number"},ue={class:"mr-1"},fe=y(()=>o("div",{class:"flex-1"},null,-1)),he=y(()=>o("div",{class:"i-la-play"},null,-1)),pe={class:"font-bold -mt-2px"},ve=y(()=>o("div",{class:"i-la-play -mt-1 mr-1"},null,-1)),xe={class:"flex justify-stretch mx-auto w-full p-2"},ye=["onMouseenter","onTouchstart","onClick"],ge={__name:"row",props:{chroma:{type:String},twoRow:{type:Boolean,default:!0},editable:{type:Boolean,default:!1}},emits:["update:chroma"],setup(s,{emit:P}){const p=s,n=Q({minor:"101101011010",chord:v(()=>ee.get(p.chroma)),scale:v(()=>te.get(p.chroma)),num:v(()=>L.num(p.chroma)),intervals:v(()=>L.intervals(p.chroma)),semitones:v(()=>{let a=[];if(!n.intervals)return[];for(let e=1;e<n.intervals.length;e++)a[e-1]=V.semitones(n.intervals[e])-V.semitones(n.intervals[e-1]);return a})});function S(a,e){var i;e==1&&J(a+((i=c)==null?void 0:i.tonic))}function R(a){if(!p.editable)return;let e=[...p.chroma.split("")];e[a]=="1"?e[a]="0":e[a]="1",P("update:chroma",e.join(""))}const G=[...H].map((a,e)=>({name:a,pitch:e})),M=v(()=>{var d,h;let a=E(p.chroma.split(""),-((d=c)==null?void 0:d.tonic)),i=E(G,-((h=c)==null?void 0:h.tonic)).map((g,b)=>{var w;return N(g.pitch+((w=c)==null?void 0:w.tonic)+57,"midi").toNote()}).filter((g,b)=>{if(a[b]=="1")return!0});return Z.sortedNames(i)});function T(a=!1){var i;let e=[...M.value];if(a){e.push(N(((i=c)==null?void 0:i.tonic)+57+12,"midi").toNote());let d=[...M.value].reverse();e=[...e,...d]}e.forEach((d,h)=>{A(d,"8n",`+${h/3}`),D(d,{time:`+${h/3}`})})}function J(a=0,e=0){let i=N(a+57,"midi");D(i.toNote()),A(i.toNote())}return(a,e)=>{var i,d,h,g,b,w,B,I;return u(),f("div",se,[o("div",{class:"w-3 flex flex-col items-center text-white text-opacity-90",style:x({backgroundColor:t(_)(s.chroma,(i=t(c))==null?void 0:i.tonic).hsl})},null,4),o("div",{class:"flex flex-col items-start w-full relative shadow-lg",style:x({backgroundColor:t(oe)(t(_)(s.chroma,(d=t(c))==null?void 0:d.tonic).hsl).alpha(.1).toHex()})},[o("div",le,[o("div",ae,m(s.chroma),1),ne,o("div",re,[(u(!0),f(C,null,$(n.intervals,l=>(u(),f("div",{class:"p-2px",key:l},m(l),1))),128))]),ce,o("div",ie,[(u(!0),f(C,null,$(n.semitones,(l,r)=>(u(),f("span",{key:r},m(r!=0?"-":"")+m(l),1))),128))]),me,o("div",de,"# "+m(n.num),1)]),o("div",{class:O(["flex flex-wrap items-center justify-between p-2 gap-2",{"w-full":!0}])},[o("button",{class:"text-button text-white font-bold text-md flex gap-1",style:x({backgroundColor:t(_)(s.chroma,(h=t(c))==null?void 0:h.tonic).hsl}),onMousedown:e[0]||(e[0]=l=>t(z)(s.chroma)),onTouchstart:e[1]||(e[1]=U(l=>t(z)(s.chroma),["prevent","stop"])),onTouchend:e[2]||(e[2]=l=>t(k)(s.chroma)),onTouchcancel:e[3]||(e[3]=l=>t(k)(s.chroma)),onMouseup:e[4]||(e[4]=l=>t(k)(s.chroma)),onMouseleave:e[5]||(e[5]=l=>t(k)(s.chroma))},[o("span",ue,m((g=t(c))==null?void 0:g.note.name)+m(n.chord.aliases[0]||" "+n.scale.name),1)],36),fe,n.chord.name||n.chord.aliases[0]?(u(),f("button",{key:0,class:"text-sm flex items-center gap-1 border-2 p-2 rounded-xl",style:x({borderColor:t(_)(s.chroma,(b=t(c))==null?void 0:b.tonic).hsl}),onClick:e[6]||(e[6]=l=>T())},[he,o("div",pe,m((w=t(c))==null?void 0:w.note.name)+" "+m(n.chord.name||n.chord.aliases[0]),1)],4)):q("",!0),n.scale.name?(u(),f("button",{key:1,class:"text-button text-sm flex items-center",style:x({borderColor:t(_)(s.chroma,(B=t(c))==null?void 0:B.tonic).hsl}),onClick:e[7]||(e[7]=l=>T(!0))},[ve,o("span",null,m((I=t(c))==null?void 0:I.note.name)+" "+m(n.scale.name)+" scale",1)],4)):q("",!0)]),o("div",xe,[(u(!0),f(C,null,$(s.chroma,(l,r)=>{var j;return u(),f("div",{class:O(["chroma-key text-xs",{active:l==1}]),onMouseenter:F=>S(r,l),onTouchstart:F=>S(r,l),key:r,onClick:F=>R(r),style:x({backgroundColor:t(Y)(r,l),marginLeft:r==1||r==3||r==5||r==7||r==8||r==10?"12px":"2px"})},m(l==1?t(H)[(r+((j=t(c))==null?void 0:j.tonic))%12]:""),47,ye)}),128))])],4)])}}},je=K(ge,[["__scopeId","data-v-6e7fd237"]]);export{je as _};
