import{_ as K,i as Q,r as p,v as u,b as f,F as o,f as x,N as e,X as m,a as C,H as $,z as A,w as U,B as H,A as V,c as W}from"./framework.7e747cd7.js";import{r as I}from"./calculations.3384a913.js";import{g as c,e as _,b as q,c as k,h as Y}from"./colors.abbc28c6.js";import{p as z}from"./index.b30cd6d2.js";import"./index.86652af6.js";import{i as E}from"./index.ab22ef51.js";import{n as Z}from"./index.b77db23e.js";import{F as N}from"./index.83aed4fc.js";import{b as L}from"./synth.220fb0dd.js";import{g as P}from"./midi.290fabf9.js";import{a as tt,b as et,n as R}from"./theory.61e5aadb.js";import{w as ot}from"./index.654bd828.js";const y=s=>(V("data-v-6e7fd237"),s=s(),W(),s),st={class:"flex w-full rounded-xl overflow-hidden"},lt={class:"flex flex-wrap items-center justify-stretch w-full text-sm px-2 bg-dark-800 bg-opacity-10"},at={class:"p-2px"},nt=y(()=>o("div",{class:"flex-1"},null,-1)),rt={class:"flex font-bold",title:"Intervals"},ct=y(()=>o("div",{class:"flex-1"},null,-1)),it={class:"flex",title:"Steps"},mt=y(()=>o("div",{class:"flex-1"},null,-1)),dt={class:"p-1",title:"Pcset number"},ut={class:"mr-1"},ft=y(()=>o("div",{class:"flex-1"},null,-1)),ht=y(()=>o("div",{class:"i-la-play"},null,-1)),vt={class:"font-bold -mt-2px"},pt=y(()=>o("div",{class:"i-la-play -mt-1 mr-1"},null,-1)),xt={class:"flex justify-stretch mx-auto w-full p-2"},yt=["onMouseenter","onTouchstart","onClick"],gt={__name:"row",props:{chroma:{type:String},twoRow:{type:Boolean,default:!0},editable:{type:Boolean,default:!1}},emits:["update:chroma"],setup(s,{emit:X}){const v=s,n=Q({minor:"101101011010",chord:p(()=>tt.get(v.chroma)),scale:p(()=>et.get(v.chroma)),num:p(()=>z.num(v.chroma)),intervals:p(()=>z.intervals(v.chroma)),semitones:p(()=>{let a=[];if(!n.intervals)return[];for(let t=1;t<n.intervals.length;t++)a[t-1]=E.semitones(n.intervals[t])-E.semitones(n.intervals[t-1]);return a})});function T(a,t){var i;t==1&&J(a+((i=c)==null?void 0:i.tonic))}function D(a){if(!v.editable)return;let t=[...v.chroma.split("")];t[a]=="1"?t[a]="0":t[a]="1",X("update:chroma",t.join(""))}const G=[...R].map((a,t)=>({name:a,pitch:t})),M=p(()=>{var d,h;let a=I(v.chroma.split(""),-((d=c)==null?void 0:d.tonic)),i=I(G,-((h=c)==null?void 0:h.tonic)).map((g,b)=>{var w;return N(g.pitch+((w=c)==null?void 0:w.tonic)+57,"midi").toNote()}).filter((g,b)=>{if(a[b]=="1")return!0});return Z.sortedNames(i)});function j(a=!1){var i;let t=[...M.value];if(a){t.push(N(((i=c)==null?void 0:i.tonic)+57+12,"midi").toNote());let d=[...M.value].reverse();t=[...t,...d]}t.forEach((d,h)=>{L(d,"8n",`+${h/3}`),P(d,{time:`+${h/3}`})})}function J(a=0,t=0){let i=N(a+57,"midi");P(i.toNote()),L(i.toNote())}return(a,t)=>{var i,d,h,g,b,w,B,F;return u(),f("div",st,[o("div",{class:"w-3 flex flex-col items-center text-white text-opacity-90",style:x({backgroundColor:e(_)(s.chroma,(i=e(c))==null?void 0:i.tonic).hsl})},null,4),o("div",{class:"flex flex-col items-start w-full relative shadow-lg",style:x({backgroundColor:e(ot)(e(_)(s.chroma,(d=e(c))==null?void 0:d.tonic).hsl).alpha(.1).toHex()})},[o("div",lt,[o("div",at,m(s.chroma),1),nt,o("div",rt,[(u(!0),f(C,null,$(n.intervals,l=>(u(),f("div",{class:"p-2px",key:l},m(l),1))),128))]),ct,o("div",it,[(u(!0),f(C,null,$(n.semitones,(l,r)=>(u(),f("span",{key:r},m(r!=0?"-":"")+m(l),1))),128))]),mt,o("div",dt,"# "+m(n.num),1)]),o("div",{class:A(["flex flex-wrap items-center justify-between p-2 gap-2",{"w-full":!0}])},[o("button",{class:"text-button text-white font-bold text-md flex gap-1",style:x({backgroundColor:e(_)(s.chroma,(h=e(c))==null?void 0:h.tonic).hsl}),onMousedown:t[0]||(t[0]=l=>e(q)(s.chroma)),onTouchstart:t[1]||(t[1]=U(l=>e(q)(s.chroma),["prevent","stop"])),onTouchend:t[2]||(t[2]=l=>e(k)(s.chroma)),onTouchcancel:t[3]||(t[3]=l=>e(k)(s.chroma)),onMouseup:t[4]||(t[4]=l=>e(k)(s.chroma)),onMouseleave:t[5]||(t[5]=l=>e(k)(s.chroma))},[o("span",ut,m((g=e(c))==null?void 0:g.note.name)+m(n.chord.aliases[0]||" "+n.scale.name),1)],36),ft,n.chord.name||n.chord.aliases[0]?(u(),f("button",{key:0,class:"text-sm flex items-center gap-1 border-2 p-2 rounded-xl",style:x({borderColor:e(_)(s.chroma,(b=e(c))==null?void 0:b.tonic).hsl}),onClick:t[6]||(t[6]=l=>j())},[ht,o("div",vt,m((w=e(c))==null?void 0:w.note.name)+" "+m(n.chord.name||n.chord.aliases[0]),1)],4)):H("",!0),n.scale.name?(u(),f("button",{key:1,class:"text-button text-sm flex items-center",style:x({borderColor:e(_)(s.chroma,(B=e(c))==null?void 0:B.tonic).hsl}),onClick:t[7]||(t[7]=l=>j(!0))},[pt,o("span",null,m((F=e(c))==null?void 0:F.note.name)+" "+m(n.scale.name)+" scale",1)],4)):H("",!0)]),o("div",xt,[(u(!0),f(C,null,$(s.chroma,(l,r)=>{var S;return u(),f("div",{class:A(["chroma-key text-xs",{active:l==1}]),onMouseenter:O=>T(r,l),onTouchstart:O=>T(r,l),key:r,onClick:O=>D(r),style:x({backgroundColor:e(Y)(r,l),marginLeft:r==1||r==3||r==5||r==7||r==8||r==10?"12px":"2px"})},m(l==1?e(R)[(r+((S=e(c))==null?void 0:S.tonic))%12]:""),47,yt)}),128))])],4)])}}},St=K(gt,[["__scopeId","data-v-6e7fd237"]]);export{St as _};
