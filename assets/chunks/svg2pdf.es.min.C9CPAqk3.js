import{a0 as Et}from"./theme.CohIkhhm.js";import{E as Zt,j as Nt,B as xe,M as Se}from"./jspdf.es.min.DBqUyYxG.js";import"./framework.C7hFoqOj.js";/*! https://mths.be/cssesc v3.0.0 by @mathias */var we={},ke=we.hasOwnProperty,Me=function(r,t){if(!r)return t;var i={};for(var n in t)i[n]=ke.call(r,n)?r[n]:t[n];return i},Ce=/[ -,\.\/:-@\[-\^`\{-~]/,Ae=/[ -,\.\/:-@\[\]\^`\{-~]/,Fe=/(^|\\+)?(\\[A-F0-9]{1,6})\x20(?![a-fA-F0-9\x20])/g,Bt=function e(r,t){t=Me(t,e.options),t.quotes!="single"&&t.quotes!="double"&&(t.quotes="single");for(var i=t.quotes=="double"?'"':"'",n=t.isIdentifier,s=r.charAt(0),a="",o=0,l=r.length;o<l;){var h=r.charAt(o++),u=h.charCodeAt(),f=void 0;if(u<32||u>126){if(u>=55296&&u<=56319&&o<l){var c=r.charCodeAt(o++);(c&64512)==56320?u=((u&1023)<<10)+(c&1023)+65536:o--}f="\\"+u.toString(16).toUpperCase()+" "}else t.escapeEverything?Ce.test(h)?f="\\"+h:f="\\"+u.toString(16).toUpperCase()+" ":/[\t\n\f\r\x0B]/.test(h)?f="\\"+u.toString(16).toUpperCase()+" ":h=="\\"||!n&&(h=='"'&&i==h||h=="'"&&i==h)||n&&Ae.test(h)?f="\\"+h:f=h;a+=f}return n&&(/^-[-\d]/.test(a)?a="\\-"+a.slice(1):/\d/.test(s)&&(a="\\3"+s+" "+a.slice(1))),a=a.replace(Fe,function(g,m,d){return m&&m.length%2?g:(m||"")+d}),!n&&t.wrap?i+a+i:a};Bt.options={escapeEverything:!1,isIdentifier:!1,quotes:"single",wrap:!1};Bt.version="3.0.0";var Te=Bt;const te=Et(Te);var rt=0,St=1,Ht=2,ft=3,Vt=4,Wt=5,jt=6,wt=/[a-z0-9_-]/i,ct=/[\s\t]/,Pe=function(e){for(var r=!0,t=rt,i="",n=0,s,a,o=[];;){if(a=e[n],t===rt){if(!a&&r)break;if(!a&&!r)throw new Error("Parse error");if(a==='"'||a==="'")s=a,t=St,r=!1;else if(!ct.test(a))if(wt.test(a))t=ft,r=!1,n--;else throw new Error("Parse error")}else if(t===St)if(a)a==="\\"?t=Ht:a===s?(o.push(i),i="",t=Vt):i+=a;else throw new Error("Parse Error");else if(t===Ht)if(a===s||a==="\\")i+=a,t=St;else throw new Error("Parse error");else if(t===ft)if(a)wt.test(a)?i+=a:a===","?(o.push(i),i="",t=rt):ct.test(a)?t=Wt:a==="\\"&&(t=jt);else{o.push(i);break}else if(t===jt){if(/[0-9a-f]/i.test(a))throw new Error("Parse error");i+=a,t=ft}else if(t===Wt)if(a){if(wt.test(a))i+=" "+a,t=ft;else if(a===",")o.push(i),i="",t=rt;else if(!ct.test(a))throw new Error("Parse error")}else{o.push(i);break}else if(t===Vt)if(a){if(a===",")t=rt;else if(!ct.test(a))throw new Error("Parse error")}else break;n++}return o},Ee=/[^a-z0-9_-]/i,Ne=function(e,r){var t=r&&r.quote||'"';if(t!=='"'&&t!=="'")throw new Error("Quote must be `'` or `\"`");for(var i=new RegExp(t,"g"),n=[],s=0;s<e.length;++s){var a=e[s];Ee.test(a)&&(a=a.replace(/\\/g,"\\\\").replace(i,"\\"+t),a=t+a+t),n.push(a)}return n.join(", ")},Be={parse:Pe,stringify:Ne};const Ie=Et(Be);var dt={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},_e=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];function Le(e){return e===10||e===13||e===8232||e===8233||e===32||e===9||e===11||e===12||e===160||e>=5760&&_e.indexOf(e)>=0}function Oe(e){switch(e|32){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:case 114:return!0}return!1}function De(e){return(e|32)===97}function J(e){return e>=48&&e<=57}function Re(e){return e>=48&&e<=57||e===43||e===45||e===46}function qe(e){this.index=0,this.path=e,this.max=e.length,this.result=[],this.param=0,this.err="",this.segmentStart=0,this.data=[]}function gt(e){for(;e.index<e.max&&Le(e.path.charCodeAt(e.index));)e.index++}function He(e){var r=e.path.charCodeAt(e.index);if(r===48){e.param=0,e.index++;return}if(r===49){e.param=1,e.index++;return}e.err="SvgPath: arc flag can be 0 or 1 only (at pos "+e.index+")"}function Ve(e){var r=e.index,t=r,i=e.max,n=!1,s=!1,a=!1,o=!1,l;if(t>=i){e.err="SvgPath: missed param (at pos "+t+")";return}if(l=e.path.charCodeAt(t),(l===43||l===45)&&(t++,l=t<i?e.path.charCodeAt(t):0),!J(l)&&l!==46){e.err="SvgPath: param should start with 0..9 or `.` (at pos "+t+")";return}if(l!==46){if(n=l===48,t++,l=t<i?e.path.charCodeAt(t):0,n&&t<i&&l&&J(l)){e.err="SvgPath: numbers started with `0` such as `09` are illegal (at pos "+r+")";return}for(;t<i&&J(e.path.charCodeAt(t));)t++,s=!0;l=t<i?e.path.charCodeAt(t):0}if(l===46){for(o=!0,t++;J(e.path.charCodeAt(t));)t++,a=!0;l=t<i?e.path.charCodeAt(t):0}if(l===101||l===69){if(o&&!s&&!a){e.err="SvgPath: invalid float exponent (at pos "+t+")";return}if(t++,l=t<i?e.path.charCodeAt(t):0,(l===43||l===45)&&t++,t<i&&J(e.path.charCodeAt(t)))for(;t<i&&J(e.path.charCodeAt(t));)t++;else{e.err="SvgPath: invalid float exponent (at pos "+t+")";return}}e.index=t,e.param=parseFloat(e.path.slice(r,t))+0}function kt(e){var r,t;r=e.path[e.segmentStart],t=r.toLowerCase();var i=e.data;if(t==="m"&&i.length>2&&(e.result.push([r,i[0],i[1]]),i=i.slice(2),t="l",r=r==="m"?"l":"L"),t==="r")e.result.push([r].concat(i));else for(;i.length>=dt[t]&&(e.result.push([r].concat(i.splice(0,dt[t]))),!!dt[t]););}function We(e){var r=e.max,t,i,n,s,a;if(e.segmentStart=e.index,t=e.path.charCodeAt(e.index),i=De(t),!Oe(t)){e.err="SvgPath: bad command "+e.path[e.index]+" (at pos "+e.index+")";return}if(s=dt[e.path[e.index].toLowerCase()],e.index++,gt(e),e.data=[],!s){kt(e);return}for(n=!1;;){for(a=s;a>0;a--){if(i&&(a===3||a===4)?He(e):Ve(e),e.err.length){kt(e);return}e.data.push(e.param),gt(e),n=!1,e.index<r&&e.path.charCodeAt(e.index)===44&&(e.index++,gt(e),n=!0)}if(!n&&(e.index>=e.max||!Re(e.path.charCodeAt(e.index))))break}kt(e)}var je=function(r){var t=new qe(r),i=t.max;for(gt(t);t.index<i&&!t.err.length;)We(t);return t.result.length&&("mM".indexOf(t.result[0][0])<0?(t.err="SvgPath: string should start with `M` or `m`",t.result=[]):t.result[0][0]="M"),{err:t.err,segments:t.result}};function Ge(e,r){return[e[0]*r[0]+e[2]*r[1],e[1]*r[0]+e[3]*r[1],e[0]*r[2]+e[2]*r[3],e[1]*r[2]+e[3]*r[3],e[0]*r[4]+e[2]*r[5]+e[4],e[1]*r[4]+e[3]*r[5]+e[5]]}function O(){if(!(this instanceof O))return new O;this.queue=[],this.cache=null}O.prototype.matrix=function(e){return e[0]===1&&e[1]===0&&e[2]===0&&e[3]===1&&e[4]===0&&e[5]===0?this:(this.cache=null,this.queue.push(e),this)};O.prototype.translate=function(e,r){return(e!==0||r!==0)&&(this.cache=null,this.queue.push([1,0,0,1,e,r])),this};O.prototype.scale=function(e,r){return(e!==1||r!==1)&&(this.cache=null,this.queue.push([e,0,0,r,0,0])),this};O.prototype.rotate=function(e,r,t){var i,n,s;return e!==0&&(this.translate(r,t),i=e*Math.PI/180,n=Math.cos(i),s=Math.sin(i),this.queue.push([n,s,-s,n,0,0]),this.cache=null,this.translate(-r,-t)),this};O.prototype.skewX=function(e){return e!==0&&(this.cache=null,this.queue.push([1,0,Math.tan(e*Math.PI/180),1,0,0])),this};O.prototype.skewY=function(e){return e!==0&&(this.cache=null,this.queue.push([1,Math.tan(e*Math.PI/180),0,1,0,0])),this};O.prototype.toArray=function(){if(this.cache)return this.cache;if(!this.queue.length)return this.cache=[1,0,0,1,0,0],this.cache;if(this.cache=this.queue[0],this.queue.length===1)return this.cache;for(var e=1;e<this.queue.length;e++)this.cache=Ge(this.cache,this.queue[e]);return this.cache};O.prototype.calc=function(e,r,t){var i;return this.queue.length?(this.cache||(this.cache=this.toArray()),i=this.cache,[e*i[0]+r*i[2]+(t?0:i[4]),e*i[1]+r*i[3]+(t?0:i[5])]):[e,r]};var ee=O,Ue=ee,ze={matrix:!0,scale:!0,rotate:!0,translate:!0,skewX:!0,skewY:!0},Ye=/\s*(matrix|translate|scale|rotate|skewX|skewY)\s*\(\s*(.+?)\s*\)[\s,]*/,Xe=/[\s,]+/,$e=function(r){var t=new Ue,i,n;return r.split(Ye).forEach(function(s){if(s.length){if(typeof ze[s]<"u"){i=s;return}switch(n=s.split(Xe).map(function(a){return+a||0}),i){case"matrix":n.length===6&&t.matrix(n);return;case"scale":n.length===1?t.scale(n[0],n[0]):n.length===2&&t.scale(n[0],n[1]);return;case"rotate":n.length===1?t.rotate(n[0],0,0):n.length===3&&t.rotate(n[0],n[1],n[2]);return;case"translate":n.length===1?t.translate(n[0],0):n.length===2&&t.translate(n[0],n[1]);return;case"skewX":n.length===1&&t.skewX(n[0]);return;case"skewY":n.length===1&&t.skewY(n[0]);return}}}),t},nt=Math.PI*2;function Gt(e,r,t,i){var n=e*i-r*t<0?-1:1,s=e*t+r*i;return s>1&&(s=1),s<-1&&(s=-1),n*Math.acos(s)}function Qe(e,r,t,i,n,s,a,o,l,h){var u=h*(e-t)/2+l*(r-i)/2,f=-l*(e-t)/2+h*(r-i)/2,c=a*a,g=o*o,m=u*u,d=f*f,y=c*g-c*d-g*m;y<0&&(y=0),y/=c*d+g*m,y=Math.sqrt(y)*(n===s?-1:1);var v=y*a/o*f,x=y*-o/a*u,S=h*v-l*x+(e+t)/2,k=l*v+h*x+(r+i)/2,b=(u-v)/a,w=(f-x)/o,T=(-u-v)/a,I=(-f-x)/o,_=Gt(1,0,b,w),E=Gt(b,w,T,I);return s===0&&E>0&&(E-=nt),s===1&&E<0&&(E+=nt),[S,k,_,E]}function Ke(e,r){var t=1.3333333333333333*Math.tan(r/4),i=Math.cos(e),n=Math.sin(e),s=Math.cos(e+r),a=Math.sin(e+r);return[i,n,i-n*t,n+i*t,s+a*t,a-s*t,s,a]}var Je=function(r,t,i,n,s,a,o,l,h){var u=Math.sin(h*nt/360),f=Math.cos(h*nt/360),c=f*(r-i)/2+u*(t-n)/2,g=-u*(r-i)/2+f*(t-n)/2;if(c===0&&g===0)return[];if(o===0||l===0)return[];o=Math.abs(o),l=Math.abs(l);var m=c*c/(o*o)+g*g/(l*l);m>1&&(o*=Math.sqrt(m),l*=Math.sqrt(m));var d=Qe(r,t,i,n,s,a,o,l,u,f),y=[],v=d[2],x=d[3],S=Math.max(Math.ceil(Math.abs(x)/(nt/4)),1);x/=S;for(var k=0;k<S;k++)y.push(Ke(v,x)),v+=x;return y.map(function(b){for(var w=0;w<b.length;w+=2){var T=b[w+0],I=b[w+1];T*=o,I*=l;var _=f*T-u*I,E=u*T+f*I;b[w+0]=_+d[0],b[w+1]=E+d[1]}return b})},at=1e-10,Ut=Math.PI/180;function st(e,r,t){if(!(this instanceof st))return new st(e,r,t);this.rx=e,this.ry=r,this.ax=t}st.prototype.transform=function(e){var r=Math.cos(this.ax*Ut),t=Math.sin(this.ax*Ut),i=[this.rx*(e[0]*r+e[2]*t),this.rx*(e[1]*r+e[3]*t),this.ry*(-e[0]*t+e[2]*r),this.ry*(-e[1]*t+e[3]*r)],n=i[0]*i[0]+i[2]*i[2],s=i[1]*i[1]+i[3]*i[3],a=((i[0]-i[3])*(i[0]-i[3])+(i[2]+i[1])*(i[2]+i[1]))*((i[0]+i[3])*(i[0]+i[3])+(i[2]-i[1])*(i[2]-i[1])),o=(n+s)/2;if(a<at*o)return this.rx=this.ry=Math.sqrt(o),this.ax=0,this;var l=i[0]*i[1]+i[2]*i[3];a=Math.sqrt(a);var h=o+a/2,u=o-a/2;return this.ax=Math.abs(l)<at&&Math.abs(h-s)<at?90:Math.atan(Math.abs(l)>Math.abs(h-s)?(h-n)/l:l/(h-s))*180/Math.PI,this.ax>=0?(this.rx=Math.sqrt(h),this.ry=Math.sqrt(u)):(this.ax+=90,this.rx=Math.sqrt(u),this.ry=Math.sqrt(h)),this};st.prototype.isDegenerate=function(){return this.rx<at*this.ry||this.ry<at*this.rx};var Ze=st,tr=je,er=$e,Y=ee,rr=Je,ir=Ze;function F(e){if(!(this instanceof F))return new F(e);var r=tr(e);this.segments=r.segments,this.err=r.err,this.__stack=[]}F.from=function(e){if(typeof e=="string")return new F(e);if(e instanceof F){var r=new F("");return r.err=e.err,r.segments=e.segments.map(function(t){return t.slice()}),r.__stack=e.__stack.map(function(t){return Y().matrix(t.toArray())}),r}throw new Error("SvgPath.from: invalid param type "+e)};F.prototype.__matrix=function(e){var r=this,t;e.queue.length&&this.iterate(function(i,n,s,a){var o,l,h,u;switch(i[0]){case"v":o=e.calc(0,i[1],!0),l=o[0]===0?["v",o[1]]:["l",o[0],o[1]];break;case"V":o=e.calc(s,i[1],!1),l=o[0]===e.calc(s,a,!1)[0]?["V",o[1]]:["L",o[0],o[1]];break;case"h":o=e.calc(i[1],0,!0),l=o[1]===0?["h",o[0]]:["l",o[0],o[1]];break;case"H":o=e.calc(i[1],a,!1),l=o[1]===e.calc(s,a,!1)[1]?["H",o[0]]:["L",o[0],o[1]];break;case"a":case"A":var f=e.toArray(),c=ir(i[1],i[2],i[3]).transform(f);if(f[0]*f[3]-f[1]*f[2]<0&&(i[5]=i[5]?"0":"1"),o=e.calc(i[6],i[7],i[0]==="a"),i[0]==="A"&&i[6]===s&&i[7]===a||i[0]==="a"&&i[6]===0&&i[7]===0){l=[i[0]==="a"?"l":"L",o[0],o[1]];break}c.isDegenerate()?l=[i[0]==="a"?"l":"L",o[0],o[1]]:l=[i[0],c.rx,c.ry,c.ax,i[4],i[5],o[0],o[1]];break;case"m":u=n>0,o=e.calc(i[1],i[2],u),l=["m",o[0],o[1]];break;default:for(h=i[0],l=[h],u=h.toLowerCase()===h,t=1;t<i.length;t+=2)o=e.calc(i[t],i[t+1],u),l.push(o[0],o[1])}r.segments[n]=l},!0)};F.prototype.__evaluateStack=function(){var e,r;if(this.__stack.length){if(this.__stack.length===1){this.__matrix(this.__stack[0]),this.__stack=[];return}for(e=Y(),r=this.__stack.length;--r>=0;)e.matrix(this.__stack[r].toArray());this.__matrix(e),this.__stack=[]}};F.prototype.toString=function(){var e="",r="",t=!1;this.__evaluateStack();for(var i=0,n=this.segments.length;i<n;i++){var s=this.segments[i],a=s[0];a!==r||a==="m"||a==="M"?(a==="m"&&r==="z"&&(e+=" "),e+=a,t=!1):t=!0;for(var o=1;o<s.length;o++){var l=s[o];o===1?t&&l>=0&&(e+=" "):l>=0&&(e+=" "),e+=l}r=a}return e};F.prototype.translate=function(e,r){return this.__stack.push(Y().translate(e,r||0)),this};F.prototype.scale=function(e,r){return this.__stack.push(Y().scale(e,!r&&r!==0?e:r)),this};F.prototype.rotate=function(e,r,t){return this.__stack.push(Y().rotate(e,r||0,t||0)),this};F.prototype.skewX=function(e){return this.__stack.push(Y().skewX(e)),this};F.prototype.skewY=function(e){return this.__stack.push(Y().skewY(e)),this};F.prototype.matrix=function(e){return this.__stack.push(Y().matrix(e)),this};F.prototype.transform=function(e){return e.trim()?(this.__stack.push(er(e)),this):this};F.prototype.round=function(e){var r=0,t=0,i=0,n=0,s;return e=e||0,this.__evaluateStack(),this.segments.forEach(function(a){var o=a[0].toLowerCase()===a[0];switch(a[0]){case"H":case"h":o&&(a[1]+=i),i=a[1]-a[1].toFixed(e),a[1]=+a[1].toFixed(e);return;case"V":case"v":o&&(a[1]+=n),n=a[1]-a[1].toFixed(e),a[1]=+a[1].toFixed(e);return;case"Z":case"z":i=r,n=t;return;case"M":case"m":o&&(a[1]+=i,a[2]+=n),i=a[1]-a[1].toFixed(e),n=a[2]-a[2].toFixed(e),r=i,t=n,a[1]=+a[1].toFixed(e),a[2]=+a[2].toFixed(e);return;case"A":case"a":o&&(a[6]+=i,a[7]+=n),i=a[6]-a[6].toFixed(e),n=a[7]-a[7].toFixed(e),a[1]=+a[1].toFixed(e),a[2]=+a[2].toFixed(e),a[3]=+a[3].toFixed(e+2),a[6]=+a[6].toFixed(e),a[7]=+a[7].toFixed(e);return;default:s=a.length,o&&(a[s-2]+=i,a[s-1]+=n),i=a[s-2]-a[s-2].toFixed(e),n=a[s-1]-a[s-1].toFixed(e),a.forEach(function(l,h){h&&(a[h]=+a[h].toFixed(e))});return}}),this};F.prototype.iterate=function(e,r){var t=this.segments,i={},n=!1,s=0,a=0,o=0,l=0,h,u,f;if(r||this.__evaluateStack(),t.forEach(function(c,g){var m=e(c,g,s,a);Array.isArray(m)&&(i[g]=m,n=!0);var d=c[0]===c[0].toLowerCase();switch(c[0]){case"m":case"M":s=c[1]+(d?s:0),a=c[2]+(d?a:0),o=s,l=a;return;case"h":case"H":s=c[1]+(d?s:0);return;case"v":case"V":a=c[1]+(d?a:0);return;case"z":case"Z":s=o,a=l;return;default:s=c[c.length-2]+(d?s:0),a=c[c.length-1]+(d?a:0)}}),!n)return this;for(f=[],h=0;h<t.length;h++)if(typeof i[h]<"u")for(u=0;u<i[h].length;u++)f.push(i[h][u]);else f.push(t[h]);return this.segments=f,this};F.prototype.abs=function(){return this.iterate(function(e,r,t,i){var n=e[0],s=n.toUpperCase(),a;if(n!==s)switch(e[0]=s,n){case"v":e[1]+=i;return;case"a":e[6]+=t,e[7]+=i;return;default:for(a=1;a<e.length;a++)e[a]+=a%2?t:i}},!0),this};F.prototype.rel=function(){return this.iterate(function(e,r,t,i){var n=e[0],s=n.toLowerCase(),a;if(n!==s&&!(r===0&&n==="M"))switch(e[0]=s,n){case"V":e[1]-=i;return;case"A":e[6]-=t,e[7]-=i;return;default:for(a=1;a<e.length;a++)e[a]-=a%2?t:i}},!0),this};F.prototype.unarc=function(){return this.iterate(function(e,r,t,i){var n,s,a,o=[],l=e[0];return l!=="A"&&l!=="a"?null:(l==="a"?(s=t+e[6],a=i+e[7]):(s=e[6],a=e[7]),n=rr(t,i,s,a,e[4],e[5],e[1],e[2],e[3]),n.length===0?[[e[0]==="a"?"l":"L",e[6],e[7]]]:(n.forEach(function(h){o.push(["C",h[2],h[3],h[4],h[5],h[6],h[7]])}),o))}),this};F.prototype.unshort=function(){var e=this.segments,r,t,i,n,s;return this.iterate(function(a,o,l,h){var u=a[0],f=u.toUpperCase(),c;o&&(f==="T"?(c=u==="t",i=e[o-1],i[0]==="Q"?(r=i[1]-l,t=i[2]-h):i[0]==="q"?(r=i[1]-i[3],t=i[2]-i[4]):(r=0,t=0),n=-r,s=-t,c||(n+=l,s+=h),e[o]=[c?"q":"Q",n,s,a[1],a[2]]):f==="S"&&(c=u==="s",i=e[o-1],i[0]==="C"?(r=i[3]-l,t=i[4]-h):i[0]==="c"?(r=i[3]-i[5],t=i[4]-i[6]):(r=0,t=0),n=-r,s=-t,c||(n+=l,s+=h),e[o]=[c?"c":"C",n,s,a[1],a[2],a[3],a[4]]))}),this};var nr=F,ar=nr;const sr=Et(ar);var zt=function(e){var r=e,t,i={a:0,b:0,c:0},n=[],s=/(\[[^\]]+\])/g,a=/(#[^\#\s\+>~\.\[:\)]+)/g,o=/(\.[^\s\+>~\.\[:\)]+)/g,l=/(::[^\s\+>~\.\[:]+|:first-line|:first-letter|:before|:after)/gi,h=/(:(?!not|global|local)[\w-]+\([^\)]*\))/gi,u=/(:(?!not|global|local)[^\s\+>~\.\[:]+)/g,f=/([^\s\+>~\.\[:]+)/g;return t=function(c,g){var m,d,y,v,x,S;if(c.test(r))for(m=r.match(c),d=0,y=m.length;d<y;d+=1)i[g]+=1,v=m[d],x=r.indexOf(v),S=v.length,n.push({selector:e.substr(x,S),type:g,index:x,length:S}),r=r.replace(v,Array(S+1).join(" "))},function(){var c=function(y){var v,x,S,k;if(y.test(r))for(v=r.match(y),x=0,S=v.length;x<S;x+=1)k=v[x],r=r.replace(k,Array(k.length+1).join("A"))},g=/\\[0-9A-Fa-f]{6}\s?/g,m=/\\[0-9A-Fa-f]{1,5}\s/g,d=/\\./g;c(g),c(m),c(d)}(),function(){var c=/{[^]*/gm,g,m,d,y;if(c.test(r))for(g=r.match(c),m=0,d=g.length;m<d;m+=1)y=g[m],r=r.replace(y,Array(y.length+1).join(" "))}(),t(s,"b"),t(a,"a"),t(o,"b"),t(l,"c"),t(h,"b"),t(u,"b"),r=r.replace(/[\*\s\+>~]/g," "),r=r.replace(/[#\.]/g," "),r=r.replace(/:not/g,"    "),r=r.replace(/:local/g,"      "),r=r.replace(/:global/g,"       "),r=r.replace(/[\(\)]/g," "),t(f,"c"),n.sort(function(c,g){return c.index-g.index}),{selector:e,specificity:"0,"+i.a.toString()+","+i.b.toString()+","+i.c.toString(),specificityArray:[0,i.a,i.b,i.c],parts:n}},or=function(e,r){var t,i,n;if(typeof e=="string"){if(e.indexOf(",")!==-1)throw"Invalid CSS selector";t=zt(e).specificityArray}else if(Array.isArray(e)){if(e.filter(function(s){return typeof s=="number"}).length!==4)throw"Invalid specificity array";t=e}else throw"Invalid CSS selector or specificity array";if(typeof r=="string"){if(r.indexOf(",")!==-1)throw"Invalid CSS selector";i=zt(r).specificityArray}else if(Array.isArray(r)){if(r.filter(function(s){return typeof s=="number"}).length!==4)throw"Invalid specificity array";i=r}else throw"Invalid CSS selector or specificity array";for(n=0;n<4;n+=1){if(t[n]<i[n])return-1;if(t[n]>i[n])return 1}return 0};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var re=function(e,r){return(re=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])})(e,r)};function M(e,r){function t(){this.constructor=e}re(e,r),e.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}var Tt=function(){return(Tt=Object.assign||function(e){for(var r,t=1,i=arguments.length;t<i;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n]);return e}).apply(this,arguments)};function C(e,r,t,i){return new(t||(t=Promise))(function(n,s){function a(h){try{l(i.next(h))}catch(u){s(u)}}function o(h){try{l(i.throw(h))}catch(u){s(u)}}function l(h){var u;h.done?n(h.value):(u=h.value,u instanceof t?u:new t(function(f){f(u)})).then(a,o)}l((i=i.apply(e,r||[])).next())})}function A(e,r){var t,i,n,s,a={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(l){return function(h){return function(u){if(t)throw new TypeError("Generator is already executing.");for(;a;)try{if(t=1,i&&(n=2&u[0]?i.return:u[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,u[1])).done)return n;switch(i=0,n&&(u=[2&u[0],n.value]),u[0]){case 0:case 1:n=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,i=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(n=a.trys,!((n=n.length>0&&n[n.length-1])||u[0]!==6&&u[0]!==2)){a=0;continue}if(u[0]===3&&(!n||u[1]>n[0]&&u[1]<n[3])){a.label=u[1];break}if(u[0]===6&&a.label<n[1]){a.label=n[1],n=u;break}if(n&&a.label<n[2]){a.label=n[2],a.ops.push(u);break}n[2]&&a.ops.pop(),a.trys.pop();continue}u=r.call(e,a)}catch(f){u=[6,f],i=0}finally{t=n=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([l,h])}}}var q=function(){function e(r){if(this.a=void 0,this.r=0,this.g=0,this.b=0,this.simpleColors={},this.colorDefs=[],this.ok=!1,r){for(var t in r.charAt(0)=="#"&&(r=r.substr(1,6)),r=(r=r.replace(/ /g,"")).toLowerCase(),this.simpleColors={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgrey:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",grey:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightslategrey:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"},this.simpleColors)r==t&&(r=this.simpleColors[t]);this.colorDefs=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}];for(var i=0;i<this.colorDefs.length;i++){var n=this.colorDefs[i].re,s=this.colorDefs[i].process,a=n.exec(r);if(a){var o=s(a);this.r=o[0],this.g=o[1],this.b=o[2],this.ok=!0}}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b}}return e.prototype.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},e.prototype.toRGBA=function(){return"rgba("+this.r+", "+this.g+", "+this.b+", "+(this.a||"1")+")"},e.prototype.toHex=function(){var r=this.r.toString(16),t=this.g.toString(16),i=this.b.toString(16);return r.length==1&&(r="0"+r),t.length==1&&(t="0"+t),i.length==1&&(i="0"+i),"#"+r+t+i},e.prototype.getHelpXML=function(){for(var r=[],t=0;t<this.colorDefs.length;t++)for(var i=this.colorDefs[t].example,n=0;n<i.length;n++)r[r.length]=i[n];for(var s in this.simpleColors)r[r.length]=s;var a=document.createElement("ul");for(a.setAttribute("id","rgbcolor-examples"),t=0;t<r.length;t++)try{var o=document.createElement("li"),l=new e(r[t]),h=document.createElement("div");h.style.cssText="margin: 3px; border: 1px solid black; background:"+l.toHex()+"; color:"+l.toHex(),h.appendChild(document.createTextNode("test"));var u=document.createTextNode(" "+r[t]+" -> "+l.toRGB()+" -> "+l.toHex());o.appendChild(h),o.appendChild(u),a.appendChild(o)}catch{}return a},e}(),B=function(){function e(r){this.color=r}return e.prototype.getFillData=function(r,t){return C(this,void 0,void 0,function(){return A(this,function(i){return[2,void 0]})})},e}(),lr=function(){function e(){this.xmlSpace="",this.fill=null,this.fillOpacity=1,this.fontFamily="",this.fontSize=16,this.fontStyle="",this.fontWeight="",this.opacity=1,this.stroke=null,this.strokeDasharray=null,this.strokeDashoffset=0,this.strokeLinecap="",this.strokeLinejoin="",this.strokeMiterlimit=4,this.strokeOpacity=1,this.strokeWidth=1,this.alignmentBaseline="",this.textAnchor="",this.visibility="",this.color=null}return e.prototype.clone=function(){var r=new e;return r.xmlSpace=this.xmlSpace,r.fill=this.fill,r.fillOpacity=this.fillOpacity,r.fontFamily=this.fontFamily,r.fontSize=this.fontSize,r.fontStyle=this.fontStyle,r.fontWeight=this.fontWeight,r.opacity=this.opacity,r.stroke=this.stroke,r.strokeDasharray=this.strokeDasharray,r.strokeDashoffset=this.strokeDashoffset,r.strokeLinecap=this.strokeLinecap,r.strokeLinejoin=this.strokeLinejoin,r.strokeMiterlimit=this.strokeMiterlimit,r.strokeOpacity=this.strokeOpacity,r.strokeWidth=this.strokeWidth,r.textAnchor=this.textAnchor,r.alignmentBaseline=this.alignmentBaseline,r.visibility=this.visibility,r.color=this.color,r},e.default=function(){var r=new e;return r.xmlSpace="default",r.fill=new B(new q("rgb(0, 0, 0)")),r.fillOpacity=1,r.fontFamily="times",r.fontSize=16,r.fontStyle="normal",r.fontWeight="normal",r.opacity=1,r.stroke=null,r.strokeDasharray=null,r.strokeDashoffset=0,r.strokeLinecap="butt",r.strokeLinejoin="miter",r.strokeMiterlimit=4,r.strokeOpacity=1,r.strokeWidth=1,r.alignmentBaseline="baseline",r.textAnchor="start",r.visibility="visible",r.color=new q("rgb(0, 0, 0)"),r},e}(),X=function(){function e(r,t){var i,n,s;this.pdf=r,this.svg2pdfParameters=t.svg2pdfParameters,this.attributeState=t.attributeState?t.attributeState.clone():lr.default(),this.viewport=t.viewport,this.refsHandler=t.refsHandler,this.styleSheets=t.styleSheets,this.textMeasure=t.textMeasure,this.transform=(i=t.transform)!==null&&i!==void 0?i:this.pdf.unitMatrix,this.withinClipPath=(n=t.withinClipPath)!==null&&n!==void 0&&n,this.withinUse=(s=t.withinUse)!==null&&s!==void 0&&s}return e.prototype.clone=function(r){var t,i,n,s;return r===void 0&&(r={}),new e(this.pdf,{svg2pdfParameters:this.svg2pdfParameters,attributeState:r.attributeState?r.attributeState.clone():this.attributeState.clone(),viewport:(t=r.viewport)!==null&&t!==void 0?t:this.viewport,refsHandler:this.refsHandler,styleSheets:this.styleSheets,textMeasure:this.textMeasure,transform:(i=r.transform)!==null&&i!==void 0?i:this.transform,withinClipPath:(n=r.withinClipPath)!==null&&n!==void 0?n:this.withinClipPath,withinUse:(s=r.withinUse)!==null&&s!==void 0?s:this.withinUse})},e}(),ie=function(){function e(r){this.renderedElements={},this.idMap=r,this.idPrefix=String(e.instanceCounter++)}return e.prototype.getRendered=function(r,t,i){return C(this,void 0,void 0,function(){var n,s;return A(this,function(a){switch(a.label){case 0:return n=this.generateKey(r,t),this.renderedElements.hasOwnProperty(n)?[2,this.renderedElements[r]]:(s=this.get(r),this.renderedElements[n]=s,[4,i(s)]);case 1:return a.sent(),[2,s]}})})},e.prototype.get=function(r){return this.idMap[te(r,{isIdentifier:!0})]},e.prototype.generateKey=function(r,t){return this.idPrefix+"|"+r+"|"+(t||new q("rgb(0,0,0)")).toRGBA()},e.instanceCounter=0,e}();function Yt(e,r){return Math.atan2(r[1]-e[1],r[0]-e[0])}function Xt(e,r){return[2/3*(r[0]-e[0])+e[0],2/3*(r[1]-e[1])+e[1]]}function it(e){var r=Math.sqrt(e[0]*e[0]+e[1]*e[1]);return[e[0]/r,e[1]/r]}function Z(e,r){return it([r[0]-e[0],r[1]-e[1]])}function pt(e,r){return[e[0]+r[0],e[1]+r[1]]}function Mt(e,r){var t=e[0],i=e[1];return[r.a*t+r.c*i+r.e,r.b*t+r.d*i+r.f]}var et=function(){function e(){this.segments=[]}return e.prototype.moveTo=function(r,t){return this.segments.push(new P(r,t)),this},e.prototype.lineTo=function(r,t){return this.segments.push(new U(r,t)),this},e.prototype.curveTo=function(r,t,i,n,s,a){return this.segments.push(new R(r,t,i,n,s,a)),this},e.prototype.close=function(){return this.segments.push(new Pt),this},e.prototype.transform=function(r){this.segments.forEach(function(t){if(t instanceof P||t instanceof U||t instanceof R){var i=Mt([t.x,t.y],r);t.x=i[0],t.y=i[1]}if(t instanceof R){var n=Mt([t.x1,t.y1],r),s=Mt([t.x2,t.y2],r);t.x1=n[0],t.y1=n[1],t.x2=s[0],t.y2=s[1]}})},e.prototype.draw=function(r){var t=r.pdf;this.segments.forEach(function(i){i instanceof P?t.moveTo(i.x,i.y):i instanceof U?t.lineTo(i.x,i.y):i instanceof R?t.curveTo(i.x1,i.y1,i.x2,i.y2,i.x,i.y):t.close()})},e}(),P=function(e,r){this.x=e,this.y=r},U=function(e,r){this.x=e,this.y=r},R=function(e,r,t,i,n,s){this.x1=e,this.y1=r,this.x2=t,this.y2=i,this.x=n,this.y=s},Pt=function(){};function z(e,r){return r.split(",").indexOf((e.nodeName||e.tagName).toLowerCase())>=0}function p(e,r,t,i){var n;i===void 0&&(i=t);var s=(n=e.style)===null||n===void 0?void 0:n.getPropertyValue(i);if(s)return s;var a=r.getPropertyValue(e,i);return a||e.hasAttribute(t)&&e.getAttribute(t)||void 0}function W(e,r,t){if(p(e.element,t.styleSheets,"display")==="none")return!1;var i=r,n=p(e.element,t.styleSheets,"visibility");return n&&(i=n!=="hidden"),i}function $(e,r,t){var i=W(e,r,t);return e.element.childNodes.length!==0&&(e.children.forEach(function(n){n.isVisible(i,t)&&(i=!0)}),i)}var ur=function(){function e(){this.markers=[]}return e.prototype.addMarker=function(r){this.markers.push(r)},e.prototype.draw=function(r){return C(this,void 0,void 0,function(){var t,i,n,s,a,o,l;return A(this,function(h){switch(h.label){case 0:t=0,h.label=1;case 1:return t<this.markers.length?(i=this.markers[t],n=void 0,s=i.angle,a=i.anchor,o=Math.cos(s),l=Math.sin(s),n=r.pdf.Matrix(o,l,-l,o,a[0],a[1]),n=r.pdf.matrixMult(r.pdf.Matrix(r.attributeState.strokeWidth,0,0,r.attributeState.strokeWidth,0,0),n),n=r.pdf.matrixMult(n,r.transform),r.pdf.saveGraphicsState(),[4,r.refsHandler.getRendered(i.id,null,function(u){return u.apply(r)})]):[3,4];case 2:h.sent(),r.pdf.doFormObject(i.id,n),r.pdf.restoreGraphicsState(),h.label=3;case 3:return t++,[3,1];case 4:return[2]}})})},e}(),G=function(e,r,t){this.id=e,this.anchor=r,this.angle=t},It=/url\(["']?#([^"']+)["']?\)/,hr={bottom:"bottom","text-bottom":"bottom",top:"top","text-top":"top",hanging:"hanging",middle:"middle",central:"middle",center:"middle",mathematical:"middle",ideographic:"ideographic",alphabetic:"alphabetic",baseline:"alphabetic"};function H(e,r){var t;return(t=e&&e.toString().match(/^([\-0-9.]+)em$/))?parseFloat(t[1])*r:(t=e&&e.toString().match(/^([\-0-9.]+)(px|)$/))?parseFloat(t[1]):0}function ne(e){return hr[e]||"alphabetic"}function L(e){for(var r,t=[],i=/[+-]?(?:(?:\d+\.?\d*)|(?:\d*\.?\d+))(?:[eE][+-]?\d+)?/g;r=i.exec(e);)t.push(parseFloat(r[0]));return t}function tt(e,r){if(e==="transparent"){var t=new q("rgb(0,0,0)");return t.a=0,t}if(e.toLowerCase()==="currentcolor")return r||new q("rgb(0,0,0)");var i=/\s*rgba\(((?:[^,\)]*,){3}[^,\)]*)\)\s*/.exec(e);if(i){var n=L(i[1]),s=new q("rgb("+n.slice(0,3).join(",")+")");return s.a=n[3],s}return new q(e)}var V={"sans-serif":"helvetica",verdana:"helvetica",arial:"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",serif:"times",cursive:"times",fantasy:"times"},Ct,fr=(Ct=Zt.version.split("."),parseFloat(Ct[0])===2&&parseFloat(Ct[1])===3);function ae(e,r){return fr?r==400?e=="italic"?"italic":"normal":r==700&&e!=="italic"?"bold":e+""+r:r==400||r==="normal"?e==="italic"?"italic":"normal":r!=700&&r!=="bold"||e!=="normal"?(r==700?"bold":r)+""+e:"bold"}function _t(e,r){if(p(r.element,e.styleSheets,"display")==="none")return[0,0,0,0];var t=[0,0,0,0];return r.children.forEach(function(i){var n=i.getBoundingBox(e);t=[Math.min(t[0],n[0]),Math.min(t[1],n[1]),Math.max(t[0]+t[2],n[0]+n[2])-Math.min(t[0],n[0]),Math.max(t[1]+t[3],n[1]+n[3])-Math.min(t[1],n[1])]}),t}function ot(e,r){var t=parseFloat,i=t(e.getAttribute("x1"))||t(p(e,r.styleSheets,"x"))||t(p(e,r.styleSheets,"cx"))-t(p(e,r.styleSheets,"r"))||0,n=t(e.getAttribute("x2"))||i+t(p(e,r.styleSheets,"width"))||t(p(e,r.styleSheets,"cx"))+t(p(e,r.styleSheets,"r"))||0,s=t(e.getAttribute("y1"))||t(p(e,r.styleSheets,"y"))||t(p(e,r.styleSheets,"cy"))-t(p(e,r.styleSheets,"r"))||0,a=t(e.getAttribute("y2"))||s+t(p(e,r.styleSheets,"height"))||t(p(e,r.styleSheets,"cy"))+t(p(e,r.styleSheets,"r"))||0;return[Math.min(i,n),Math.min(s,a),Math.max(i,n)-Math.min(i,n),Math.max(s,a)-Math.min(s,a)]}function vt(e,r,t,i,n,s,a,o){o===void 0&&(o=!1);var l,h,u=r[0],f=r[1],c=r[2],g=r[3],m=n/c,d=s/g,y=e.getAttribute("preserveAspectRatio");if(y){var v=y.split(" ");v[0]==="defer"&&(v=v.slice(1)),l=v[0],h=v[1]||"meet"}else l="xMidYMid",h="meet";if(l!=="none"&&(h==="meet"?m=d=Math.min(m,d):h==="slice"&&(m=d=Math.max(m,d))),o)return a.pdf.Matrix(m,0,0,d,0,0);var x=t-u*m,S=i-f*d;l.indexOf("xMid")>=0?x+=(n-c*m)/2:l.indexOf("xMax")>=0&&(x+=n-c*m),l.indexOf("YMid")>=0?S+=(s-g*d)/2:l.indexOf("YMax")>=0&&(S+=s-g*d);var k=a.pdf.Matrix(1,0,0,1,x,S),b=a.pdf.Matrix(m,0,0,d,0,0);return a.pdf.matrixMult(b,k)}function mt(e,r){if(!e||e==="none")return r.pdf.unitMatrix;for(var t,i,n=/^[\s,]*matrix\(([^)]+)\)\s*/,s=/^[\s,]*translate\(([^)]+)\)\s*/,a=/^[\s,]*rotate\(([^)]+)\)\s*/,o=/^[\s,]*scale\(([^)]+)\)\s*/,l=/^[\s,]*skewX\(([^)]+)\)\s*/,h=/^[\s,]*skewY\(([^)]+)\)\s*/,u=r.pdf.unitMatrix;e.length>0&&e.length!==i;){i=e.length;var f=n.exec(e);if(f&&(t=L(f[1]),u=r.pdf.matrixMult(r.pdf.Matrix(t[0],t[1],t[2],t[3],t[4],t[5]),u),e=e.substr(f[0].length)),f=a.exec(e)){t=L(f[1]);var c=Math.PI*t[0]/180;if(u=r.pdf.matrixMult(r.pdf.Matrix(Math.cos(c),Math.sin(c),-Math.sin(c),Math.cos(c),0,0),u),t[1]||t[2]){var g=r.pdf.Matrix(1,0,0,1,t[1],t[2]),m=r.pdf.Matrix(1,0,0,1,-t[1],-t[2]);u=r.pdf.matrixMult(m,r.pdf.matrixMult(u,g))}e=e.substr(f[0].length)}(f=s.exec(e))&&(t=L(f[1]),u=r.pdf.matrixMult(r.pdf.Matrix(1,0,0,1,t[0],t[1]||0),u),e=e.substr(f[0].length)),(f=o.exec(e))&&((t=L(f[1]))[1]||(t[1]=t[0]),u=r.pdf.matrixMult(r.pdf.Matrix(t[0],0,0,t[1],0,0),u),e=e.substr(f[0].length)),(f=l.exec(e))&&(t=parseFloat(f[1]),t*=Math.PI/180,u=r.pdf.matrixMult(r.pdf.Matrix(1,0,Math.tan(t),1,0,0),u),e=e.substr(f[0].length)),(f=h.exec(e))&&(t=parseFloat(f[1]),t*=Math.PI/180,u=r.pdf.matrixMult(r.pdf.Matrix(1,Math.tan(t),0,1,0,0),u),e=e.substr(f[0].length))}return u}var Lt=function(){function e(r,t){this.element=r,this.children=t,this.parent=null}return e.prototype.setParent=function(r){this.parent=r},e.prototype.getParent=function(){return this.parent},e.prototype.getBoundingBox=function(r){return p(this.element,r.styleSheets,"display")==="none"?[0,0,0,0]:this.getBoundingBoxCore(r)},e.prototype.computeNodeTransform=function(r){var t=this.computeNodeTransformCore(r),i=p(this.element,r.styleSheets,"transform");return i?r.pdf.matrixMult(t,mt(i,r)):t},e}(),lt=function(e){function r(){return e!==null&&e.apply(this,arguments)||this}return M(r,e),r.prototype.render=function(t){return Promise.resolve()},r.prototype.getBoundingBoxCore=function(t){return[]},r.prototype.computeNodeTransformCore=function(t){return t.pdf.unitMatrix},r}(Lt),se=function(e){function r(t,i,n){var s=e.call(this,i,n)||this;return s.pdfGradientType=t,s.contextColor=void 0,s}return M(r,e),r.prototype.apply=function(t){return C(this,void 0,void 0,function(){var i,n,s,a,o,l;return A(this,function(h){return(i=this.element.getAttribute("id"))?(n=this.getStops(t.styleSheets),s=0,a=!1,n.forEach(function(u){var f=u.opacity;f&&f!==1&&(s+=f,a=!0)}),a&&(o=new Nt({opacity:s/n.length})),l=new xe(this.pdfGradientType,this.getCoordinates(),n,o),t.pdf.addShadingPattern(i,l),[2]):[2]})})},r.prototype.getStops=function(t){var i=this;if(this.stops)return this.stops;if(this.contextColor===void 0){this.contextColor=null;for(var n=this;n;){var s=p(n.element,t,"color");if(s){this.contextColor=tt(s,null);break}n=n.getParent()}}var a=[];return this.children.forEach(function(o){if(o.element.tagName.toLowerCase()==="stop"){var l=p(o.element,t,"color"),h=tt(p(o.element,t,"stop-color")||"",l?tt(l,null):i.contextColor),u=parseFloat(p(o.element,t,"stop-opacity")||"1");a.push({offset:r.parseGradientOffset(o.element.getAttribute("offset")||"0"),color:[h.r,h.g,h.b],opacity:u})}}),this.stops=a},r.prototype.getBoundingBoxCore=function(t){return ot(this.element,t)},r.prototype.computeNodeTransformCore=function(t){return t.pdf.unitMatrix},r.prototype.isVisible=function(t,i){return $(this,t,i)},r.parseGradientOffset=function(t){var i=parseFloat(t);return!isNaN(i)&&t.indexOf("%")>=0?i/100:i},r}(lt),oe=function(e){function r(t,i){return e.call(this,"axial",t,i)||this}return M(r,e),r.prototype.getCoordinates=function(){return[parseFloat(this.element.getAttribute("x1")||"0"),parseFloat(this.element.getAttribute("y1")||"0"),parseFloat(this.element.getAttribute("x2")||"1"),parseFloat(this.element.getAttribute("y2")||"0")]},r}(se),le=function(e){function r(t,i){return e.call(this,"radial",t,i)||this}return M(r,e),r.prototype.getCoordinates=function(){var t=this.element.getAttribute("cx"),i=this.element.getAttribute("cy"),n=this.element.getAttribute("fx"),s=this.element.getAttribute("fy");return[parseFloat(n||t||"0.5"),parseFloat(s||i||"0.5"),0,parseFloat(t||"0.5"),parseFloat(i||"0.5"),parseFloat(this.element.getAttribute("r")||"0.5")]},r}(se),cr=function(){function e(r,t){this.key=r,this.gradient=t}return e.prototype.getFillData=function(r,t){return C(this,void 0,void 0,function(){var i,n,s;return A(this,function(a){switch(a.label){case 0:return[4,t.refsHandler.getRendered(this.key,null,function(o){return o.apply(new X(t.pdf,{refsHandler:t.refsHandler,textMeasure:t.textMeasure,styleSheets:t.styleSheets,viewport:t.viewport,svg2pdfParameters:t.svg2pdfParameters}))})];case 1:return a.sent(),this.gradient.element.hasAttribute("gradientUnits")&&this.gradient.element.getAttribute("gradientUnits").toLowerCase()!=="objectboundingbox"?i=t.pdf.unitMatrix:(n=r.getBoundingBox(t),i=t.pdf.Matrix(n[2],0,0,n[3],n[0],n[1])),s=mt(p(this.gradient.element,t.styleSheets,"gradientTransform","transform"),t),[2,{key:this.key,matrix:t.pdf.matrixMult(s,i)}]}})})},e}(),ue=function(e){function r(){return e!==null&&e.apply(this,arguments)||this}return M(r,e),r.prototype.apply=function(t){return C(this,void 0,void 0,function(){var i,n,s,a,o;return A(this,function(l){switch(l.label){case 0:if(!(i=this.element.getAttribute("id")))return[2];n=this.getBoundingBox(t),s=new Se([n[0],n[1],n[0]+n[2],n[1]+n[3]],n[2],n[3]),t.pdf.beginTilingPattern(s),a=0,o=this.children,l.label=1;case 1:return a<o.length?[4,o[a].render(new X(t.pdf,{attributeState:t.attributeState,refsHandler:t.refsHandler,styleSheets:t.styleSheets,viewport:t.viewport,svg2pdfParameters:t.svg2pdfParameters,textMeasure:t.textMeasure}))]:[3,4];case 2:l.sent(),l.label=3;case 3:return a++,[3,1];case 4:return t.pdf.endTilingPattern(i,s),[2]}})})},r.prototype.getBoundingBoxCore=function(t){return ot(this.element,t)},r.prototype.computeNodeTransformCore=function(t){return t.pdf.unitMatrix},r.prototype.isVisible=function(t,i){return $(this,t,i)},r}(lt),pr=function(){function e(r,t){this.key=r,this.pattern=t}return e.prototype.getFillData=function(r,t){return C(this,void 0,void 0,function(){var i,n,s,a,o,l,h,u,f,c,g,m;return A(this,function(d){switch(d.label){case 0:return[4,t.refsHandler.getRendered(this.key,null,function(y){return y.apply(new X(t.pdf,{refsHandler:t.refsHandler,textMeasure:t.textMeasure,styleSheets:t.styleSheets,viewport:t.viewport,svg2pdfParameters:t.svg2pdfParameters}))})];case 1:return d.sent(),i={key:this.key,boundingBox:void 0,xStep:0,yStep:0,matrix:void 0},s=t.pdf.unitMatrix,this.pattern.element.hasAttribute("patternUnits")&&this.pattern.element.getAttribute("patternUnits").toLowerCase()!=="objectboundingbox"||(n=r.getBoundingBox(t),s=t.pdf.Matrix(1,0,0,1,n[0],n[1]),o=this.pattern.getBoundingBox(t),l=o[0]*n[0]||0,h=o[1]*n[1]||0,u=o[2]*n[2]||0,f=o[3]*n[3]||0,i.boundingBox=[l,h,l+u,h+f],i.xStep=u,i.yStep=f),a=t.pdf.unitMatrix,this.pattern.element.hasAttribute("patternContentUnits")&&this.pattern.element.getAttribute("patternContentUnits").toLowerCase()==="objectboundingbox"&&(n||(n=r.getBoundingBox(t)),a=t.pdf.Matrix(n[2],0,0,n[3],0,0),o=i.boundingBox||this.pattern.getBoundingBox(t),l=o[0]/n[0]||0,h=o[1]/n[1]||0,u=o[2]/n[2]||0,f=o[3]/n[3]||0,i.boundingBox=[l,h,l+u,h+f],i.xStep=u,i.yStep=f),c=t.pdf.unitMatrix,(g=p(this.pattern.element,t.styleSheets,"patternTransform","transform"))&&(c=mt(g,t)),m=a,m=t.pdf.matrixMult(m,s),m=t.pdf.matrixMult(m,c),m=t.pdf.matrixMult(m,t.transform),i.matrix=m,[2,i]}})})},e}();function dr(e,r){var t=It.exec(e);if(t){var i=t[1],n=r.refsHandler.get(i);return n&&(n instanceof oe||n instanceof le)?function(a,o,l){var h=o.getStops(l.styleSheets);if(h.length===0)return null;if(h.length===1){var u=h[0].color,f=new q;return f.ok=!0,f.r=u[0],f.g=u[1],f.b=u[2],f.a=h[0].opacity,new B(f)}return new cr(a,o)}(i,n,r):n&&n instanceof ue?new pr(i,n):new B(new q("rgb(0, 0, 0)"))}var s=tt(e,r.attributeState.color);return s.ok?new B(s):null}function Ot(e,r,t){var i=t||r.element,n=p(i,e.styleSheets,"color");if(n){var s=tt(n,e.attributeState.color);s.ok?e.attributeState.color=s:e.attributeState.color=new q("rgb(0,0,0)")}var a=p(i,e.styleSheets,"visibility");a&&(e.attributeState.visibility=a);var o=p(i,e.styleSheets,"fill");o&&(e.attributeState.fill=dr(o,e));var l=p(i,e.styleSheets,"fill-opacity");l&&(e.attributeState.fillOpacity=parseFloat(l));var h=p(i,e.styleSheets,"stroke-opacity");h&&(e.attributeState.strokeOpacity=parseFloat(h));var u=p(i,e.styleSheets,"opacity");u&&(e.attributeState.opacity=parseFloat(u));var f=p(i,e.styleSheets,"stroke-width");f!==void 0&&f!==""&&(e.attributeState.strokeWidth=Math.abs(parseFloat(f)));var c=p(i,e.styleSheets,"stroke");if(c)if(c==="none")e.attributeState.stroke=null;else{var g=tt(c,e.attributeState.color);g.ok&&(e.attributeState.stroke=new B(g))}var m=p(i,e.styleSheets,"stroke-linecap");m&&(e.attributeState.strokeLinecap=m);var d=p(i,e.styleSheets,"stroke-linejoin");d&&(e.attributeState.strokeLinejoin=d);var y=p(i,e.styleSheets,"stroke-dasharray");if(y){var v=parseInt(p(i,e.styleSheets,"stroke-dashoffset")||"0");e.attributeState.strokeDasharray=L(y),e.attributeState.strokeDashoffset=v}var x=p(i,e.styleSheets,"stroke-miterlimit");x!==void 0&&x!==""&&(e.attributeState.strokeMiterlimit=parseFloat(x));var S=i.getAttribute("xml:space");S&&(e.attributeState.xmlSpace=S);var k=p(i,e.styleSheets,"font-weight");k&&(e.attributeState.fontWeight=k);var b=p(i,e.styleSheets,"font-style");b&&(e.attributeState.fontStyle=b);var w=p(i,e.styleSheets,"font-family");if(w){var T=Ie.parse(w);e.attributeState.fontFamily=function(j,Q,xt){var ye=ae(j.fontStyle,j.fontWeight),be=xt.pdf.getFontList(),ht="";return Q.some(function(K){var qt=be[K];return qt&&qt.indexOf(ye)>=0?(ht=K,!0):(K=K.toLowerCase(),!!V.hasOwnProperty(K)&&(ht=K,!0))})||(ht="times"),ht}(e.attributeState,T,e)}var I=p(i,e.styleSheets,"font-size");if(I){var _=e.pdf.getFontSize();e.attributeState.fontSize=H(I,_)}var E=p(i,e.styleSheets,"vertical-align")||p(i,e.styleSheets,"alignment-baseline");if(E){var N=E.match(/(baseline|text-bottom|alphabetic|ideographic|middle|central|mathematical|text-top|bottom|center|top|hanging)/);N&&(e.attributeState.alignmentBaseline=N[0])}var D=p(i,e.styleSheets,"text-anchor");D&&(e.attributeState.textAnchor=D)}function Dt(e,r,t){var i=1,n=1;i*=e.attributeState.fillOpacity,i*=e.attributeState.opacity,e.attributeState.fill instanceof B&&e.attributeState.fill.color.a!==void 0&&(i*=e.attributeState.fill.color.a),n*=e.attributeState.strokeOpacity,n*=e.attributeState.opacity,e.attributeState.stroke instanceof B&&e.attributeState.stroke.color.a!==void 0&&(n*=e.attributeState.stroke.color.a);var s,a,o=i<1,l=n<1;if(z(t,"use")?(o=!0,l=!0,i*=e.attributeState.fill?1:0,n*=e.attributeState.stroke?1:0):e.withinUse&&(e.attributeState.fill!==r.attributeState.fill?(o=!0,i*=e.attributeState.fill?1:0):o&&!e.attributeState.fill&&(i=0),e.attributeState.stroke!==r.attributeState.stroke?(l=!0,n*=e.attributeState.stroke?1:0):l&&!e.attributeState.stroke&&(n=0)),o||l){var h={};o&&(h.opacity=i),l&&(h["stroke-opacity"]=n),e.pdf.setGState(new Nt(h))}if(e.attributeState.fill&&e.attributeState.fill!==r.attributeState.fill&&e.attributeState.fill instanceof B&&e.attributeState.fill.color.ok&&!z(t,"text")&&e.pdf.setFillColor(e.attributeState.fill.color.r,e.attributeState.fill.color.g,e.attributeState.fill.color.b),e.attributeState.strokeWidth!==r.attributeState.strokeWidth&&e.pdf.setLineWidth(e.attributeState.strokeWidth),e.attributeState.stroke!==r.attributeState.stroke&&e.attributeState.stroke instanceof B&&e.pdf.setDrawColor(e.attributeState.stroke.color.r,e.attributeState.stroke.color.g,e.attributeState.stroke.color.b),e.attributeState.strokeLinecap!==r.attributeState.strokeLinecap&&e.pdf.setLineCap(e.attributeState.strokeLinecap),e.attributeState.strokeLinejoin!==r.attributeState.strokeLinejoin&&e.pdf.setLineJoin(e.attributeState.strokeLinejoin),e.attributeState.strokeDasharray===r.attributeState.strokeDasharray&&e.attributeState.strokeDashoffset===r.attributeState.strokeDashoffset||!e.attributeState.strokeDasharray||e.pdf.setLineDashPattern(e.attributeState.strokeDasharray,e.attributeState.strokeDashoffset),e.attributeState.strokeMiterlimit!==r.attributeState.strokeMiterlimit&&e.pdf.setLineMiterLimit(e.attributeState.strokeMiterlimit),e.attributeState.fontFamily!==r.attributeState.fontFamily&&(s=V.hasOwnProperty(e.attributeState.fontFamily)?V[e.attributeState.fontFamily]:e.attributeState.fontFamily),e.attributeState.fill&&e.attributeState.fill!==r.attributeState.fill&&e.attributeState.fill instanceof B&&e.attributeState.fill.color.ok){var u=e.attributeState.fill.color;e.pdf.setTextColor(u.r,u.g,u.b)}e.attributeState.fontWeight===r.attributeState.fontWeight&&e.attributeState.fontStyle===r.attributeState.fontStyle||(a=ae(e.attributeState.fontStyle,e.attributeState.fontWeight)),s===void 0&&a===void 0||(s===void 0&&(s=V.hasOwnProperty(e.attributeState.fontFamily)?V[e.attributeState.fontFamily]:e.attributeState.fontFamily),e.pdf.setFont(s,a)),e.attributeState.fontSize!==r.attributeState.fontSize&&e.pdf.setFontSize(e.attributeState.fontSize*e.pdf.internal.scaleFactor)}function he(e,r,t){var i=It.exec(e);if(i){var n=i[1];return t.refsHandler.get(n)||void 0}}function fe(e,r,t){return C(this,void 0,void 0,function(){var i,n;return A(this,function(s){switch(s.label){case 0:return i=t.clone(),r.element.hasAttribute("clipPathUnits")&&r.element.getAttribute("clipPathUnits").toLowerCase()==="objectboundingbox"&&(n=e.getBoundingBox(t),i.transform=t.pdf.matrixMult(t.pdf.Matrix(n[2],0,0,n[3],n[0],n[1]),t.transform)),[4,r.apply(i)];case 1:return s.sent(),[2]}})})}var ce=function(e){function r(){return e!==null&&e.apply(this,arguments)||this}return M(r,e),r.prototype.render=function(t){return C(this,void 0,void 0,function(){var i,n,s,a;return A(this,function(o){switch(o.label){case 0:return this.isVisible(t.attributeState.visibility!=="hidden",t)?((i=t.clone()).transform=i.pdf.matrixMult(this.computeNodeTransform(i),t.transform),Ot(i,this),n=p(this.element,i.styleSheets,"clip-path"),(s=n&&n!=="none")?(a=he(n,0,i))?a.isVisible(!0,i)?(i.pdf.saveGraphicsState(),[4,fe(this,a,i)]):[3,2]:[3,4]:[3,5]):[2];case 1:return o.sent(),[3,3];case 2:return[2];case 3:return[3,5];case 4:s=!1,o.label=5;case 5:return i.withinClipPath||i.pdf.saveGraphicsState(),Dt(i,t,this.element),[4,this.renderCore(i)];case 6:return o.sent(),i.withinClipPath||i.pdf.restoreGraphicsState(),s&&i.pdf.restoreGraphicsState(),[2]}})})},r}(Lt),yt=function(e){function r(){return e!==null&&e.apply(this,arguments)||this}return M(r,e),r}(ce),ut=function(e){function r(t,i,n){var s=e.call(this,i,n)||this;return s.cachedPath=null,s.hasMarkers=t,s}return M(r,e),r.prototype.renderCore=function(t){return C(this,void 0,void 0,function(){var i;return A(this,function(n){switch(n.label){case 0:return(i=this.getCachedPath(t))===null||i.segments.length===0?[2]:(t.withinClipPath?i.transform(t.transform):t.pdf.setCurrentTransformationMatrix(t.transform),i.draw(t),[4,this.fillOrStroke(t)]);case 1:return n.sent(),this.hasMarkers?[4,this.drawMarkers(t,i)]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}})})},r.prototype.getCachedPath=function(t){return this.cachedPath||(this.cachedPath=this.getPath(t))},r.prototype.drawMarkers=function(t,i){return C(this,void 0,void 0,function(){return A(this,function(n){switch(n.label){case 0:return[4,this.getMarkers(i,t).draw(t.clone({transform:t.pdf.unitMatrix}))];case 1:return n.sent(),[2]}})})},r.prototype.fillOrStroke=function(t){return C(this,void 0,void 0,function(){var i,n,s,a,o;return A(this,function(l){switch(l.label){case 0:return t.withinClipPath?[2]:(i=t.attributeState.fill,n=t.attributeState.stroke&&t.attributeState.strokeWidth!==0,i?[4,i.getFillData(this,t)]:[3,2]);case 1:return a=l.sent(),[3,3];case 2:a=void 0,l.label=3;case 3:return s=a,o=p(this.element,t.styleSheets,"fill-rule")==="evenodd",i&&n||t.withinUse?o?t.pdf.fillStrokeEvenOdd(s):t.pdf.fillStroke(s):i?o?t.pdf.fillEvenOdd(s):t.pdf.fill(s):n?t.pdf.stroke():t.pdf.discardPath(),[2]}})})},r.prototype.getBoundingBoxCore=function(t){var i=this.getCachedPath(t);if(!i||!i.segments.length)return[0,0,0,0];for(var n=Number.POSITIVE_INFINITY,s=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,o=Number.NEGATIVE_INFINITY,l=0,h=0,u=0;u<i.segments.length;u++){var f=i.segments[u];(f instanceof P||f instanceof U||f instanceof R)&&(l=f.x,h=f.y),f instanceof R?(n=Math.min(n,l,f.x1,f.x2,f.x),a=Math.max(a,l,f.x1,f.x2,f.x),s=Math.min(s,h,f.y1,f.y2,f.y),o=Math.max(o,h,f.y1,f.y2,f.y)):(n=Math.min(n,l),a=Math.max(a,l),s=Math.min(s,h),o=Math.max(o,h))}return[n,s,a-n,o-s]},r.prototype.getMarkers=function(t,i){var n=p(this.element,i.styleSheets,"marker-start"),s=p(this.element,i.styleSheets,"marker-mid"),a=p(this.element,i.styleSheets,"marker-end"),o=new ur;if(n||s||a){a&&(a=At(a)),n&&(n=At(n)),s&&(s=At(s));for(var l=t.segments,h=[1,0],u=void 0,f=!1,c=[1,0],g=!1,m=function(y){var v=l[y],x=n&&(y===1||!(l[y]instanceof P)&&l[y-1]instanceof P);x&&l.forEach(function(I,_){if(!g&&I instanceof Pt&&_>y){var E=l[_-1];g=(E instanceof P||E instanceof U||E instanceof R)&&E}});var S=a&&(y===l.length-1||!(l[y]instanceof P)&&l[y+1]instanceof P),k=s&&y>0&&!(y===1&&l[y-1]instanceof P),b=l[y-1]||null;if(b instanceof P||b instanceof U||b instanceof R)if(v instanceof R)x&&o.addMarker(new G(n,[b.x,b.y],Yt(g?[g.x,g.y]:[b.x,b.y],[v.x1,v.y1]))),S&&o.addMarker(new G(a,[v.x,v.y],Yt([v.x2,v.y2],[v.x,v.y]))),k&&(u=Z([b.x,b.y],[v.x1,v.y1]),u=b instanceof P?u:it(pt(h,u)),o.addMarker(new G(s,[b.x,b.y],Math.atan2(u[1],u[0])))),h=Z([v.x2,v.y2],[v.x,v.y]);else if(v instanceof P||v instanceof U){if(u=Z([b.x,b.y],[v.x,v.y]),x){var w=g?Z([g.x,g.y],[v.x,v.y]):u;o.addMarker(new G(n,[b.x,b.y],Math.atan2(w[1],w[0])))}S&&o.addMarker(new G(a,[v.x,v.y],Math.atan2(u[1],u[0]))),k&&(w=v instanceof P?h:b instanceof P?u:it(pt(h,u)),o.addMarker(new G(s,[b.x,b.y],Math.atan2(w[1],w[0])))),h=u}else v instanceof Pt&&(u=Z([b.x,b.y],[f.x,f.y]),k&&(w=b instanceof P?u:it(pt(h,u)),o.addMarker(new G(s,[b.x,b.y],Math.atan2(w[1],w[0])))),S&&(w=it(pt(u,c)),o.addMarker(new G(a,[f.x,f.y],Math.atan2(w[1],w[0])))),h=u);else{f=v instanceof P&&v;var T=l[y+1];(T instanceof P||T instanceof U||T instanceof R)&&(c=Z([f.x,f.y],[T.x,T.y]))}},d=0;d<l.length;d++)m(d)}return o},r}(yt);function At(e){var r=It.exec(e);return r&&r[1]||void 0}var gr=function(e){function r(t,i){return e.call(this,!0,t,i)||this}return M(r,e),r.prototype.getPath=function(t){if(t.withinClipPath||t.attributeState.stroke===null)return null;var i=parseFloat(this.element.getAttribute("x1")||"0"),n=parseFloat(this.element.getAttribute("y1")||"0"),s=parseFloat(this.element.getAttribute("x2")||"0"),a=parseFloat(this.element.getAttribute("y2")||"0");return i||s||n||a?new et().moveTo(i,n).lineTo(s,a):null},r.prototype.computeNodeTransformCore=function(t){return t.pdf.unitMatrix},r.prototype.isVisible=function(t,i){return W(this,t,i)},r.prototype.fillOrStroke=function(t){return C(this,void 0,void 0,function(){return A(this,function(i){switch(i.label){case 0:return t.attributeState.fill=null,[4,e.prototype.fillOrStroke.call(this,t)];case 1:return i.sent(),[2]}})})},r}(ut),pe=function(e){function r(){return e!==null&&e.apply(this,arguments)||this}return M(r,e),r.prototype.apply=function(t){return C(this,void 0,void 0,function(){var i,n,s,a,o;return A(this,function(l){switch(l.label){case 0:return this.isVisible(t.attributeState.visibility!=="hidden",t)?((i=t.clone()).transform=i.pdf.unitMatrix,Ot(i,this),n=p(this.element,i.styleSheets,"clip-path"),n&&n!=="none"&&(s=he(n,0,i))?s.isVisible(!0,i)?[4,fe(this,s,i)]:[3,2]:[3,3]):[2];case 1:return l.sent(),[3,3];case 2:return[2];case 3:Dt(i,t,this.element),a=0,o=this.children,l.label=4;case 4:return a<o.length?[4,o[a].render(i)]:[3,7];case 5:l.sent(),l.label=6;case 6:return a++,[3,4];case 7:return[2]}})})},r.prototype.getBoundingBoxCore=function(t){return _t(t,this)},r.prototype.isVisible=function(t,i){return $(this,t,i)},r.prototype.computeNodeTransformCore=function(t){var i=parseFloat(p(this.element,t.styleSheets,"x")||"0"),n=parseFloat(p(this.element,t.styleSheets,"y")||"0"),s=this.element.getAttribute("viewBox");if(s){var a=L(s),o=parseFloat(p(this.element,t.styleSheets,"width")||p(this.element.ownerSVGElement,t.styleSheets,"width")||s[2]),l=parseFloat(p(this.element,t.styleSheets,"height")||p(this.element.ownerSVGElement,t.styleSheets,"height")||s[3]);return vt(this.element,a,i,n,o,l,t)}return t.pdf.Matrix(1,0,0,1,i,n)},r}(lt),bt=function(e,r){this.width=e,this.height=r},vr=function(e){function r(){return e!==null&&e.apply(this,arguments)||this}return M(r,e),r.prototype.renderCore=function(t){return C(this,void 0,void 0,function(){var i,n,s,a,o,l,h,u,f,c,g,m,d;return A(this,function(y){switch(y.label){case 0:return i=parseFloat,(n=this.element.getAttribute("href")||this.element.getAttribute("xlink:href"))?(s=n.substring(1),a=t.refsHandler.get(s),o=z(a.element,"symbol,svg")&&a.element.hasAttribute("viewBox"),l=i(p(this.element,t.styleSheets,"x")||"0"),h=i(p(this.element,t.styleSheets,"y")||"0"),u=void 0,f=void 0,o?(u=i(p(this.element,t.styleSheets,"width")||p(a.element,t.styleSheets,"width")||"0"),f=i(p(this.element,t.styleSheets,"height")||p(a.element,t.styleSheets,"height")||"0"),l+=i(p(a.element,t.styleSheets,"x")||"0"),h+=i(p(a.element,t.styleSheets,"y")||"0"),g=L(a.element.getAttribute("viewBox")),c=vt(a.element,g,l,h,u,f,t)):c=t.pdf.Matrix(1,0,0,1,l,h),m=new X(t.pdf,{refsHandler:t.refsHandler,styleSheets:t.styleSheets,withinUse:!0,viewport:o?new bt(u,f):t.viewport,svg2pdfParameters:t.svg2pdfParameters,textMeasure:t.textMeasure}),d=t.attributeState.color,[4,t.refsHandler.getRendered(s,d,function(v){return r.renderReferencedNode(v,s,d,m)})]):[2];case 1:return y.sent(),t.pdf.saveGraphicsState(),t.pdf.setCurrentTransformationMatrix(t.transform),o&&p(a.element,t.styleSheets,"overflow")!=="visible"&&(t.pdf.rect(l,h,u,f),t.pdf.clip().discardPath()),t.pdf.doFormObject(t.refsHandler.generateKey(s,d),c),t.pdf.restoreGraphicsState(),[2]}})})},r.renderReferencedNode=function(t,i,n,s){return C(this,void 0,void 0,function(){var a;return A(this,function(o){switch(o.label){case 0:return a=[(a=t.getBoundingBox(s))[0]-.5*a[2],a[1]-.5*a[3],2*a[2],2*a[3]],s.attributeState.color=n,s.pdf.beginFormObject(a[0],a[1],a[2],a[3],s.pdf.unitMatrix),t instanceof pe?[4,t.apply(s)]:[3,2];case 1:return o.sent(),[3,4];case 2:return[4,t.render(s)];case 3:o.sent(),o.label=4;case 4:return s.pdf.endFormObject(s.refsHandler.generateKey(i,n)),[2]}})})},r.prototype.getBoundingBoxCore=function(t){return ot(this.element,t)},r.prototype.isVisible=function(t,i){return W(this,t,i)},r.prototype.computeNodeTransformCore=function(t){return t.pdf.unitMatrix},r}(yt),mr=function(e){function r(t,i){return e.call(this,!1,t,i)||this}return M(r,e),r.prototype.getPath=function(t){var i=parseFloat(p(this.element,t.styleSheets,"width")||"0"),n=parseFloat(p(this.element,t.styleSheets,"height")||"0");if(!isFinite(i)||i<=0||!isFinite(n)||n<=0)return null;var s=p(this.element,t.styleSheets,"rx"),a=p(this.element,t.styleSheets,"ry"),o=Math.min(parseFloat(s||a||"0"),.5*i),l=Math.min(parseFloat(a||s||"0"),.5*n),h=parseFloat(p(this.element,t.styleSheets,"x")||"0"),u=parseFloat(p(this.element,t.styleSheets,"y")||"0"),f=4/3*(Math.SQRT2-1);return o===0&&l===0?new et().moveTo(h,u).lineTo(h+i,u).lineTo(h+i,u+n).lineTo(h,u+n).close():new et().moveTo(h+=o,u).lineTo(h+=i-2*o,u).curveTo(h+o*f,u,h+o,u+(l-l*f),h+=o,u+=l).lineTo(h,u+=n-2*l).curveTo(h,u+l*f,h-o*f,u+l,h-=o,u+=l).lineTo(h+=2*o-i,u).curveTo(h-o*f,u,h-o,u-l*f,h-=o,u-=l).lineTo(h,u+=2*l-n).curveTo(h,u-l*f,h+o*f,u-l,h+=o,u-=l).close()},r.prototype.computeNodeTransformCore=function(t){return t.pdf.unitMatrix},r.prototype.isVisible=function(t,i){return W(this,t,i)},r}(ut),de=function(e){function r(t,i){return e.call(this,!1,t,i)||this}return M(r,e),r.prototype.getPath=function(t){var i=this.getRx(t),n=this.getRy(t);if(!isFinite(i)||n<=0||!isFinite(n)||n<=0)return null;var s=parseFloat(p(this.element,t.styleSheets,"cx")||"0"),a=parseFloat(p(this.element,t.styleSheets,"cy")||"0"),o=4/3*(Math.SQRT2-1)*i,l=4/3*(Math.SQRT2-1)*n;return new et().moveTo(s+i,a).curveTo(s+i,a-l,s+o,a-n,s,a-n).curveTo(s-o,a-n,s-i,a-l,s-i,a).curveTo(s-i,a+l,s-o,a+n,s,a+n).curveTo(s+o,a+n,s+i,a+l,s+i,a)},r.prototype.computeNodeTransformCore=function(t){return t.pdf.unitMatrix},r.prototype.isVisible=function(t,i){return W(this,t,i)},r}(ut),yr=function(e){function r(t,i){return e.call(this,t,i)||this}return M(r,e),r.prototype.getRx=function(t){return parseFloat(p(this.element,t.styleSheets,"rx")||"0")},r.prototype.getRy=function(t){return parseFloat(p(this.element,t.styleSheets,"ry")||"0")},r}(de);function ge(e){var r="invisible",t=e.stroke&&e.strokeWidth!==0,i=e.fill;return i&&t?r="fillThenStroke":i?r="fill":t&&(r="stroke"),r}function $t(e){return e.replace(/[\n\r]/g,"")}function Qt(e){return e.replace(/[\t]/g," ")}function Kt(e){return e.replace(/ +/g," ")}function Jt(e,r,t){switch(p(e,t.styleSheets,"text-transform")){case"uppercase":return r.toUpperCase();case"lowercase":return r.toLowerCase();default:return r}}var Ft=function(){function e(r,t,i,n){this.textNode=r,this.texts=[],this.textNodes=[],this.contexts=[],this.textAnchor=t,this.originX=i,this.originY=n,this.textMeasures=[]}return e.prototype.setX=function(r){this.originX=r},e.prototype.setY=function(r){this.originY=r},e.prototype.add=function(r,t,i){this.texts.push(t),this.textNodes.push(r),this.contexts.push(i)},e.prototype.rightTrimText=function(){for(var r=this.texts.length-1;r>=0;r--)if(this.contexts[r].attributeState.xmlSpace==="default"&&(this.texts[r]=this.texts[r].replace(/\s+$/,"")),this.texts[r].match(/[^\s]/))return!1;return!0},e.prototype.measureText=function(r){for(var t=0;t<this.texts.length;t++)this.textMeasures.push({width:r.textMeasure.measureTextWidth(this.texts[t],this.contexts[t].attributeState),length:this.texts[t].length})},e.prototype.put=function(r,t){var i,n,s,a,o=[],l=[],h=[],u=this.originX,f=this.originY,c=u,g=u;for(i=0;i<this.textNodes.length;i++){n=this.textNodes[i],s=this.contexts[i],a=this.textMeasures[i]||{width:r.textMeasure.measureTextWidth(this.texts[i],this.contexts[i].attributeState),length:this.texts[i].length};var m=u,d=f;if(n.nodeName!=="#text"&&!o.includes(n)){o.push(n);var y=e.resolveRelativePositionAttribute(n,"dx");y!==null&&(m+=H(y,s.attributeState.fontSize));var v=e.resolveRelativePositionAttribute(n,"dy");v!==null&&(d+=H(v,s.attributeState.fontSize))}l[i]=m,h[i]=d,u=m+a.width+a.length*t,f=d,c=Math.min(c,m),g=Math.max(g,u)}var x=0;switch(this.textAnchor){case"start":x=0;break;case"middle":x=(g-c)/2;break;case"end":x=g-c}for(i=0;i<this.textNodes.length;i++)if(n=this.textNodes[i],s=this.contexts[i],n.nodeName==="#text"||s.attributeState.visibility!=="hidden"){r.pdf.saveGraphicsState(),Dt(s,r,n);var S=s.attributeState.alignmentBaseline,k=ge(s.attributeState);r.pdf.text(this.texts[i],l[i]-x,h[i],{baseline:ne(S),angle:r.transform,renderingMode:k==="fill"?void 0:k,charSpace:t===0?void 0:t}),r.pdf.restoreGraphicsState()}return[u,f]},e.resolveRelativePositionAttribute=function(r,t){for(var i,n=r;n&&z(n,"tspan");){if(n.hasAttribute(t))return n.getAttribute(t);if(((i=r.parentElement)===null||i===void 0?void 0:i.firstChild)!==r)break;n=n.parentElement}return null},e}(),br=function(e){function r(){return e!==null&&e.apply(this,arguments)||this}return M(r,e),r.prototype.processTSpans=function(t,i,n,s,a,o){for(var l=n.pdf.getFontSize(),h=n.attributeState.xmlSpace,u=!0,f=!1,c=0;c<i.childNodes.length;c++){var g=i.childNodes[c];if(g.textContent){var m=g.textContent;if(g.nodeName==="#text"){var d=$t(m);d=Qt(d),h==="default"&&(d=Kt(d),u&&d.match(/^\s/)&&(f=!0),d.match(/[^\s]/)&&(u=!1),o.prevText.match(/\s$/)&&(d=d.replace(/^\s+/,"")));var y=Jt(i,d,n);a.add(i,y,n),o.prevText=m,o.prevContext=n}else if(!z(g,"title")){if(z(g,"tspan")){var v=g,x=v.getAttribute("x");if(x!==null){var S=H(x,l);a=new Ft(this,p(v,n.styleSheets,"text-anchor")||n.attributeState.textAnchor,S,0),s.push({type:"y",chunk:a})}var k=v.getAttribute("y");if(k!==null){var b=H(k,l);a=new Ft(this,p(v,n.styleSheets,"text-anchor")||n.attributeState.textAnchor,0,b),s.push({type:"x",chunk:a})}var w=n.clone();Ot(w,t,v),this.processTSpans(t,v,w,s,a,o)}}}}return f},r.prototype.renderCore=function(t){return C(this,void 0,void 0,function(){var i,n,s,a,o,l,h,u,f,c,g,m,d,y,v,x,S,k,b,w,T,I,_;return A(this,function(E){if(t.pdf.saveGraphicsState(),i=0,n=0,s=1,a=t.pdf.getFontSize(),o=H(this.element.getAttribute("x"),a),l=H(this.element.getAttribute("y"),a),h=H(this.element.getAttribute("dx"),a),u=H(this.element.getAttribute("dy"),a),f=parseFloat(this.element.getAttribute("textLength")||"0"),c=t.attributeState.visibility,this.element.childElementCount===0)g=this.element.textContent||"",m=function(N,D){return N=Qt(N=$t(N)),D.xmlSpace==="default"&&(N=Kt(N=N.trim())),N}(g,t.attributeState),d=Jt(this.element,m,t),i=t.textMeasure.getTextOffset(d,t.attributeState),f>0&&(y=t.textMeasure.measureTextWidth(d,t.attributeState),t.attributeState.xmlSpace==="default"&&g.match(/^\s/)&&(s=0),n=(f-y)/(d.length-s)||0),c==="visible"&&(v=t.attributeState.alignmentBaseline,x=ge(t.attributeState),t.pdf.text(d,o+h-i,l+u,{baseline:ne(v),angle:t.transform,renderingMode:x==="fill"?void 0:x,charSpace:n===0?void 0:n}));else{for(S=[],k=new Ft(this,t.attributeState.textAnchor,o+h,l+u),S.push({type:"",chunk:k}),b=this.processTSpans(this,this.element,t,S,k,{prevText:" ",prevContext:t}),s=b?0:1,w=!0,T=S.length-1;T>=0;T--)w&&(w=S[T].chunk.rightTrimText());f>0&&(I=0,_=0,S.forEach(function(N){var D=N.chunk;D.measureText(t),D.textMeasures.forEach(function(j){var Q=j.width,xt=j.length;I+=Q,_+=xt})}),n=(f-I)/(_-s)),S.reduce(function(N,D){var j=D.type,Q=D.chunk;return j==="x"?Q.setX(N[0]):j==="y"&&Q.setY(N[1]),Q.put(t,n)},[0,0])}return t.pdf.restoreGraphicsState(),[2]})})},r.prototype.isVisible=function(t,i){return $(this,t,i)},r.prototype.getBoundingBoxCore=function(t){return ot(this.element,t)},r.prototype.computeNodeTransformCore=function(t){return t.pdf.unitMatrix},r}(yt),xr=function(e){function r(t,i){return e.call(this,!0,t,i)||this}return M(r,e),r.prototype.computeNodeTransformCore=function(t){return t.pdf.unitMatrix},r.prototype.isVisible=function(t,i){return W(this,t,i)},r.prototype.getPath=function(t){var i,n,s=new sr(p(this.element,t.styleSheets,"d")||"").unshort().unarc().abs(),a=new et;return s.iterate(function(o){switch(o[0]){case"M":a.moveTo(o[1],o[2]);break;case"L":a.lineTo(o[1],o[2]);break;case"H":a.lineTo(o[1],n);break;case"V":a.lineTo(i,o[1]);break;case"C":a.curveTo(o[1],o[2],o[3],o[4],o[5],o[6]);break;case"Q":var l=Xt([i,n],[o[1],o[2]]),h=Xt([o[3],o[4]],[o[1],o[2]]);a.curveTo(l[0],l[1],h[0],h[1],o[3],o[4]);break;case"Z":a.close()}switch(o[0]){case"M":case"L":i=o[1],n=o[2];break;case"H":i=o[1];break;case"V":n=o[1];break;case"C":i=o[5],n=o[6];break;case"Q":i=o[3],n=o[4]}}),a},r}(ut),Sr=/^\s*data:(([^/,;]+\/[^/,;]+)(?:;([^,;=]+=[^,;=]+))?)?(?:;(base64))?,((?:.|\s)*)$/i,wr=function(e){function r(t,i){var n=e.call(this,t,i)||this;return n.imageLoadingPromise=null,n.imageUrl=n.element.getAttribute("xlink:href")||n.element.getAttribute("href"),n.imageUrl&&(n.imageLoadingPromise=r.fetchImageData(n.imageUrl)),n}return M(r,e),r.prototype.renderCore=function(t){return C(this,void 0,void 0,function(){var i,n,s,a,o,l,h,u,f,c,g,m;return A(this,function(d){switch(d.label){case 0:return this.imageLoadingPromise?(t.pdf.setCurrentTransformationMatrix(t.transform),i=parseFloat(p(this.element,t.styleSheets,"width")||"0"),n=parseFloat(p(this.element,t.styleSheets,"height")||"0"),s=parseFloat(p(this.element,t.styleSheets,"x")||"0"),a=parseFloat(p(this.element,t.styleSheets,"y")||"0"),!isFinite(i)||i<=0||!isFinite(n)||n<=0?[2]:[4,this.imageLoadingPromise]):[2];case 1:return o=d.sent(),l=o.data,(h=o.format).indexOf("svg")!==0?[3,3]:(u=new DOMParser,f=u.parseFromString(l,"image/svg+xml").firstElementChild,(!(c=this.element.getAttribute("preserveAspectRatio"))||c.indexOf("defer")<0||!f.getAttribute("preserveAspectRatio"))&&f.setAttribute("preserveAspectRatio",c||""),f.setAttribute("x",String(s)),f.setAttribute("y",String(a)),f.setAttribute("width",String(i)),f.setAttribute("height",String(n)),[4,Rt(f,g={}).render(new X(t.pdf,{refsHandler:new ie(g),styleSheets:t.styleSheets,viewport:new bt(i,n),svg2pdfParameters:t.svg2pdfParameters,textMeasure:t.textMeasure}))]);case 2:return d.sent(),[2];case 3:m="data:image/"+h+";base64,"+btoa(l);try{t.pdf.addImage(m,"",s,a,i,n)}catch(y){typeof console=="object"&&console.warn&&console.warn("Could not load image "+this.imageUrl+`. 
`+y)}d.label=4;case 4:return[2]}})})},r.prototype.getBoundingBoxCore=function(t){return ot(this.element,t)},r.prototype.computeNodeTransformCore=function(t){return t.pdf.unitMatrix},r.prototype.isVisible=function(t,i){return W(this,t,i)},r.fetchImageData=function(t){return C(this,void 0,void 0,function(){var i,n,s,a,o;return A(this,function(l){switch(l.label){case 0:if(!(s=t.match(Sr)))return[3,1];if(a=s[2],(o=a.split("/"))[0]!=="image")throw new Error("Unsupported image URL: "+t);return n=o[1],i=s[5],s[4]==="base64"?(i=i.replace(/\s/g,""),i=atob(i)):i=decodeURIComponent(i),[3,3];case 1:return[4,r.fetchImage(t)];case 2:i=l.sent(),n=t.substring(t.lastIndexOf(".")+1),l.label=3;case 3:return[2,{data:i,format:n}]}})})},r.fetchImage=function(t){return new Promise(function(i,n){var s=new XMLHttpRequest;s.open("GET",t,!0),s.responseType="arraybuffer",s.onload=function(){if(s.status!==200)throw new Error("Error "+s.status+": Failed to load image '"+t+"'");for(var a=new Uint8Array(s.response),o="",l=0;l<a.length;l++)o+=String.fromCharCode(a[l]);i(o)},s.onerror=n,s.onabort=n,s.send(null)})},r.getMimeType=function(t){switch(t=t.toLowerCase()){case"jpg":case"jpeg":return"image/jpeg";default:return"image/"+t}},r}(yt),ve=function(e){function r(t,i,n){var s=e.call(this,!0,i,n)||this;return s.closed=t,s}return M(r,e),r.prototype.getPath=function(t){if(!this.element.hasAttribute("points")||this.element.getAttribute("points")==="")return null;var i=r.parsePointsString(this.element.getAttribute("points")),n=new et;if(i.length<1)return n;n.moveTo(i[0][0],i[0][1]);for(var s=1;s<i.length;s++)n.lineTo(i[s][0],i[s][1]);return this.closed&&n.close(),n},r.prototype.isVisible=function(t,i){return W(this,t,i)},r.prototype.computeNodeTransformCore=function(t){return t.pdf.unitMatrix},r.parsePointsString=function(t){for(var i=L(t),n=[],s=0;s<i.length-1;s+=2){var a=i[s],o=i[s+1];n.push([a,o])}return n},r}(ut),kr=function(e){function r(t,i){return e.call(this,!0,t,i)||this}return M(r,e),r}(ve),Mr=function(e){function r(){return e!==null&&e.apply(this,arguments)||this}return M(r,e),r.prototype.render=function(t){return Promise.resolve()},r.prototype.getBoundingBoxCore=function(t){return[0,0,0,0]},r.prototype.computeNodeTransformCore=function(t){return t.pdf.unitMatrix},r.prototype.isVisible=function(t,i){return W(this,t,i)},r}(Lt),Cr=function(e){function r(){return e!==null&&e.apply(this,arguments)||this}return M(r,e),r.prototype.apply=function(t){return C(this,void 0,void 0,function(){var i,n,s,a,o;return A(this,function(l){switch(l.label){case 0:i=this.computeNodeTransform(t),n=this.getBoundingBox(t),t.pdf.beginFormObject(n[0],n[1],n[2],n[3],i),function(h){var u=h.attributeState,f=h.pdf,c=1,g=1;c*=u.fillOpacity,c*=u.opacity,u.fill instanceof B&&u.fill.color.a!==void 0&&(c*=u.fill.color.a),g*=u.strokeOpacity,g*=u.opacity,u.stroke instanceof B&&u.stroke.color.a!==void 0&&(g*=u.stroke.color.a);var m,d={};if(d.opacity=c,d["stroke-opacity"]=g,f.setGState(new Nt(d)),u.fill&&u.fill instanceof B&&u.fill.color.ok?f.setFillColor(u.fill.color.r,u.fill.color.g,u.fill.color.b):f.setFillColor(0,0,0),f.setLineWidth(u.strokeWidth),u.stroke instanceof B?f.setDrawColor(u.stroke.color.r,u.stroke.color.g,u.stroke.color.b):f.setDrawColor(0,0,0),f.setLineCap(u.strokeLinecap),f.setLineJoin(u.strokeLinejoin),u.strokeDasharray?f.setLineDashPattern(u.strokeDasharray,u.strokeDashoffset):f.setLineDashPattern([],0),f.setLineMiterLimit(u.strokeMiterlimit),m=V.hasOwnProperty(u.fontFamily)?V[u.fontFamily]:u.fontFamily,u.fill&&u.fill instanceof B&&u.fill.color.ok){var y=u.fill.color;f.setTextColor(y.r,y.g,y.b)}else f.setTextColor(0,0,0);var v="";u.fontWeight==="bold"&&(v="bold"),u.fontStyle==="italic"&&(v+="italic"),v===""&&(v="normal"),m!==void 0||v!==void 0?(m===void 0&&(m=V.hasOwnProperty(u.fontFamily)?V[u.fontFamily]:u.fontFamily),f.setFont(m,v)):f.setFont("helvetica",v),f.setFontSize(u.fontSize*f.internal.scaleFactor)}(s=new X(t.pdf,{refsHandler:t.refsHandler,styleSheets:t.styleSheets,viewport:t.viewport,svg2pdfParameters:t.svg2pdfParameters,textMeasure:t.textMeasure})),a=0,o=this.children,l.label=1;case 1:return a<o.length?[4,o[a].render(s)]:[3,4];case 2:l.sent(),l.label=3;case 3:return a++,[3,1];case 4:return t.pdf.endFormObject(this.element.getAttribute("id")),[2]}})})},r.prototype.getBoundingBoxCore=function(t){var i,n=this.element.getAttribute("viewBox");return n&&(i=L(n)),[i&&i[0]||0,i&&i[1]||0,i&&i[2]||parseFloat(this.element.getAttribute("markerWidth")||"3"),i&&i[3]||parseFloat(this.element.getAttribute("markerHeight")||"3")]},r.prototype.computeNodeTransformCore=function(t){var i,n=parseFloat(this.element.getAttribute("refX")||"0"),s=parseFloat(this.element.getAttribute("refY")||"0"),a=this.element.getAttribute("viewBox");if(a){var o=L(a);i=vt(this.element,o,0,0,parseFloat(this.element.getAttribute("markerWidth")||"3"),parseFloat(this.element.getAttribute("markerHeight")||"3"),t,!0),i=t.pdf.matrixMult(t.pdf.Matrix(1,0,0,1,-n,-s),i)}else i=t.pdf.Matrix(1,0,0,1,-n,-s);return i},r.prototype.isVisible=function(t,i){return $(this,t,i)},r}(lt),Ar=function(e){function r(t,i){return e.call(this,t,i)||this}return M(r,e),r.prototype.getR=function(t){var i;return(i=this.r)!==null&&i!==void 0?i:this.r=parseFloat(p(this.element,t.styleSheets,"r")||"0")},r.prototype.getRx=function(t){return this.getR(t)},r.prototype.getRy=function(t){return this.getR(t)},r}(de),Fr=function(e){function r(t,i){return e.call(this,!1,t,i)||this}return M(r,e),r}(ve),me=function(e){function r(){return e!==null&&e.apply(this,arguments)||this}return M(r,e),r.prototype.renderCore=function(t){return C(this,void 0,void 0,function(){var i,n;return A(this,function(s){switch(s.label){case 0:i=0,n=this.children,s.label=1;case 1:return i<n.length?[4,n[i].render(t)]:[3,4];case 2:s.sent(),s.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},r.prototype.getBoundingBoxCore=function(t){return _t(t,this)},r}(ce),Tr=function(e){function r(){return e!==null&&e.apply(this,arguments)||this}return M(r,e),r.prototype.isVisible=function(t,i){return $(this,t,i)},r.prototype.render=function(t){return C(this,void 0,void 0,function(){var i,n,s,a,o;return A(this,function(l){switch(l.label){case 0:return this.isVisible(t.attributeState.visibility!=="hidden",t)?(i=this.getX(t),n=this.getY(t),s=this.getWidth(t),a=this.getHeight(t),t.pdf.saveGraphicsState(),o=t.transform,this.element.hasAttribute("transform")&&(o=t.pdf.matrixMult(mt(this.element.getAttribute("transform"),t),o)),t.pdf.setCurrentTransformationMatrix(o),t.withinUse||p(this.element,t.styleSheets,"overflow")==="visible"||t.pdf.rect(i,n,s,a).clip().discardPath(),[4,e.prototype.render.call(this,t.clone({transform:t.pdf.unitMatrix,viewport:t.withinUse?t.viewport:new bt(s,a)}))]):[2];case 1:return l.sent(),t.pdf.restoreGraphicsState(),[2]}})})},r.prototype.computeNodeTransform=function(t){return this.computeNodeTransformCore(t)},r.prototype.computeNodeTransformCore=function(t){if(t.withinUse)return t.pdf.unitMatrix;var i,n=this.getX(t),s=this.getY(t),a=this.getViewBox();if(a){var o=this.getWidth(t),l=this.getHeight(t);i=vt(this.element,a,n,s,o,l,t)}else i=t.pdf.Matrix(1,0,0,1,n,s);return i},r.prototype.getWidth=function(t){if(this.width!==void 0)return this.width;var i,n,s=t.svg2pdfParameters;if(this.isOutermostSvg(t))if(s.width!=null)i=s.width;else if(n=p(this.element,t.styleSheets,"width"))i=parseFloat(n);else{var a=this.getViewBox();if(a&&(s.height!=null||p(this.element,t.styleSheets,"height"))){var o=a[2]/a[3];i=this.getHeight(t)*o}else i=Math.min(300,t.viewport.width,2*t.viewport.height)}else i=(n=p(this.element,t.styleSheets,"width"))?parseFloat(n):t.viewport.width;return this.width=i},r.prototype.getHeight=function(t){if(this.height!==void 0)return this.height;var i,n,s=t.svg2pdfParameters;if(this.isOutermostSvg(t))if(s.height!=null)i=s.height;else if(n=p(this.element,t.styleSheets,"height"))i=parseFloat(n);else{var a=this.getViewBox();if(a){var o=a[2]/a[3];i=this.getWidth(t)/o}else i=Math.min(150,t.viewport.width/2,t.viewport.height)}else i=(n=p(this.element,t.styleSheets,"height"))?parseFloat(n):t.viewport.height;return this.height=i},r.prototype.getX=function(t){if(this.x!==void 0)return this.x;if(this.isOutermostSvg(t))return this.x=0;var i=p(this.element,t.styleSheets,"x");return this.x=i?parseFloat(i):0},r.prototype.getY=function(t){if(this.y!==void 0)return this.y;if(this.isOutermostSvg(t))return this.y=0;var i=p(this.element,t.styleSheets,"y");return this.y=i?parseFloat(i):0},r.prototype.getViewBox=function(){if(this.viewBox!==void 0)return this.viewBox;var t=this.element.getAttribute("viewBox");return this.viewBox=t?L(t):void 0},r.prototype.isOutermostSvg=function(t){return t.svg2pdfParameters.element===this.element},r}(me),Pr=function(e){function r(){return e!==null&&e.apply(this,arguments)||this}return M(r,e),r.prototype.isVisible=function(t,i){return $(this,t,i)},r.prototype.computeNodeTransformCore=function(t){return t.pdf.unitMatrix},r}(me),Er=function(e){function r(){return e!==null&&e.apply(this,arguments)||this}return M(r,e),r.prototype.apply=function(t){return C(this,void 0,void 0,function(){var i,n,s;return A(this,function(a){switch(a.label){case 0:if(!this.isVisible(!0,t))return[2];i=t.pdf.matrixMult(this.computeNodeTransform(t),t.transform),t.pdf.setCurrentTransformationMatrix(i),n=0,s=this.children,a.label=1;case 1:return n<s.length?[4,s[n].render(new X(t.pdf,{refsHandler:t.refsHandler,styleSheets:t.styleSheets,viewport:t.viewport,withinClipPath:!0,svg2pdfParameters:t.svg2pdfParameters,textMeasure:t.textMeasure}))]:[3,4];case 2:a.sent(),a.label=3;case 3:return n++,[3,1];case 4:return t.pdf.clip().discardPath(),t.pdf.setCurrentTransformationMatrix(i.inversed()),[2]}})})},r.prototype.getBoundingBoxCore=function(t){return _t(t,this)},r.prototype.isVisible=function(t,i){return $(this,t,i)},r}(lt);function Rt(e,r){var t,i=[];switch(function(s,a){for(var o=[],l=0;l<s.childNodes.length;l++){var h=s.childNodes[l];h.nodeName.charAt(0)!=="#"&&o.push(h)}for(l=0;l<o.length;l++)a(l,o[l])}(e,function(s,a){return i.push(Rt(a,r))}),e.tagName.toLowerCase()){case"a":case"g":t=new Pr(e,i);break;case"circle":t=new Ar(e,i);break;case"clippath":t=new Er(e,i);break;case"ellipse":t=new yr(e,i);break;case"lineargradient":t=new oe(e,i);break;case"image":t=new wr(e,i);break;case"line":t=new gr(e,i);break;case"marker":t=new Cr(e,i);break;case"path":t=new xr(e,i);break;case"pattern":t=new ue(e,i);break;case"polygon":t=new kr(e,i);break;case"polyline":t=new Fr(e,i);break;case"radialgradient":t=new le(e,i);break;case"rect":t=new mr(e,i);break;case"svg":t=new Tr(e,i);break;case"symbol":t=new pe(e,i);break;case"text":t=new br(e,i);break;case"use":t=new vr(e,i);break;default:t=new Mr(e,i)}if(r!=null&&t.element.hasAttribute("id")){var n=te(t.element.id,{isIdentifier:!0});r[n]=r[n]||t}return t.children.forEach(function(s){return s.setParent(t)}),t}var Nr=function(){function e(r,t){this.rootSvg=r,this.loadExternalSheets=t,this.styleSheets=[]}return e.prototype.load=function(){return C(this,void 0,void 0,function(){var r;return A(this,function(t){switch(t.label){case 0:return[4,this.collectStyleSheetTexts()];case 1:return r=t.sent(),this.parseCssSheets(r),[2]}})})},e.prototype.collectStyleSheetTexts=function(){return C(this,void 0,void 0,function(){var r,t,i,n,s;return A(this,function(a){switch(a.label){case 0:if(r=[],this.loadExternalSheets&&this.rootSvg.ownerDocument)for(n=0;n<this.rootSvg.ownerDocument.childNodes.length;n++)(t=this.rootSvg.ownerDocument.childNodes[n]).nodeName==="xml-stylesheet"&&typeof t.data=="string"&&r.push(e.loadSheet(t.data.match(/href=["'].*?["']/)[0].split("=")[1].slice(1,-1)));for(i=this.rootSvg.querySelectorAll("style,link"),n=0;n<i.length;n++)z(s=i[n],"style")?r.push(s.textContent):this.loadExternalSheets&&z(s,"link")&&s.getAttribute("rel")==="stylesheet"&&s.hasAttribute("href")&&r.push(e.loadSheet(s.getAttribute("href")));return[4,Promise.all(r)];case 1:return[2,a.sent().filter(function(o){return o!==null})]}})})},e.prototype.parseCssSheets=function(r){for(var t=document.implementation.createHTMLDocument(""),i=0,n=r;i<n.length;i++){var s=n[i],a=t.createElement("style");a.textContent=s,t.body.appendChild(a);var o=a.sheet;if(o instanceof CSSStyleSheet){for(var l=o.cssRules.length-1;l>=0;l--){var h=o.cssRules[l];if(h instanceof CSSStyleRule){var u=h;if(u.selectorText.indexOf(",")>=0){o.deleteRule(l);for(var f=u.cssText.substring(u.selectorText.length),c=e.splitSelectorAtCommas(u.selectorText),g=0;g<c.length;g++)o.insertRule(c[g]+f,l+g)}}else o.deleteRule(l)}this.styleSheets.push(o)}}},e.splitSelectorAtCommas=function(r){for(var t,i=/,|["']/g,n=/[^\\]["]/g,s=/[^\\][']/g,a=[],o="initial",l=-1,h=n,u=0;u<r.length;)switch(o){case"initial":i.lastIndex=u,(t=i.exec(r))?(t[0]===","?(a.push(r.substring(l+1,i.lastIndex-1).trim()),l=i.lastIndex-1):(o="withinQuotes",h=t[0]==='"'?n:s),u=i.lastIndex):(a.push(r.substring(l+1).trim()),u=r.length);break;case"withinQuotes":h.lastIndex=u,(t=h.exec(r))&&(u=h.lastIndex,o="initial")}return a},e.loadSheet=function(r){return new Promise(function(t,i){var n=new XMLHttpRequest;n.open("GET",r,!0),n.responseType="text",n.onload=function(){n.status!==200&&i(new Error("Error "+n.status+": Failed to load '"+r+"'")),t(n.responseText)},n.onerror=i,n.onabort=i,n.send(null)}).catch(function(){return null})},e.prototype.getPropertyValue=function(r,t){for(var i=[],n=0,s=this.styleSheets;n<s.length;n++)for(var a=s[n],o=0;o<a.cssRules.length;o++){var l=a.cssRules[o];l.style.getPropertyValue(t)&&r.matches(l.selectorText)&&i.push(l)}if(i.length!==0)return i.reduce(function(h,u){return c=u,((g=(f=h).style.getPropertyPriority(t))!==c.style.getPropertyPriority(t)?g==="important"?1:-1:or(f.selectorText,c.selectorText))===1?h:u;var f,c,g}).style.getPropertyValue(t)||void 0},e}(),Br=function(){function e(){this.measureMethods={}}return e.prototype.getTextOffset=function(r,t){var i=t.textAnchor;if(i==="start")return 0;var n=this.measureTextWidth(r,t),s=0;switch(i){case"end":s=n;break;case"middle":s=n/2}return s},e.prototype.measureTextWidth=function(r,t){if(r.length===0)return 0;var i=t.fontFamily;return this.getMeasureFunction(i).call(this,r,t.fontFamily,t.fontSize+"px",t.fontStyle,t.fontWeight)},e.prototype.getMeasurementTextNode=function(){if(!this.textMeasuringTextElement){this.textMeasuringTextElement=document.createElementNS("http://www.w3.org/2000/svg","text");var r=document.createElementNS("http://www.w3.org/2000/svg","svg");r.appendChild(this.textMeasuringTextElement),r.style.setProperty("position","absolute"),r.style.setProperty("visibility","hidden"),document.body.appendChild(r)}return this.textMeasuringTextElement},e.prototype.canvasTextMeasure=function(r,t,i,n,s){var a=document.createElement("canvas").getContext("2d");return a!=null?(a.font=[n,s,i,t].join(" "),a.measureText(r).width):0},e.prototype.svgTextMeasure=function(r,t,i,n,s,a){a===void 0&&(a=this.getMeasurementTextNode());var o=a;return o.setAttribute("font-family",t),o.setAttribute("font-size",i),o.setAttribute("font-style",n),o.setAttribute("font-weight",s),o.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),o.textContent=r,o.getBBox().width},e.prototype.getMeasureFunction=function(r){var t=this.measureMethods[r];if(!t){var i=this.canvasTextMeasure(e.testString,r,"16px","normal","normal"),n=this.svgTextMeasure(e.testString,r,"16px","normal","normal");t=Math.abs(i-n)<e.epsilon?this.canvasTextMeasure:this.svgTextMeasure,this.measureMethods[r]=t}return t},e.prototype.cleanupTextMeasuring=function(){if(this.textMeasuringTextElement){var r=this.textMeasuringTextElement.parentNode;r&&document.body.removeChild(r),this.textMeasuringTextElement=void 0}},e.testString=`abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ 0123456789!"$%&/()=?'\\+*-_.:,;^}][{#~|<>`,e.epsilon=.1,e}();function Ir(e,r,t){var i,n,s;return t===void 0&&(t={}),C(this,void 0,void 0,function(){var a,o,l,h,u,f,c,g,m,d,y;return A(this,function(v){switch(v.label){case 0:return a=(i=t.x)!==null&&i!==void 0?i:0,o=(n=t.y)!==null&&n!==void 0?n:0,l=(s=t.loadExternalStyleSheets)!==null&&s!==void 0&&s,u=new ie(h={}),[4,(f=new Nr(e,l)).load()];case 1:return v.sent(),c=new bt(r.internal.pageSize.getWidth(),r.internal.pageSize.getHeight()),g=Tt(Tt({},t),{element:e}),m=new Br,d=new X(r,{refsHandler:u,styleSheets:f,viewport:c,svg2pdfParameters:g,textMeasure:m}),r.advancedAPI(),r.saveGraphicsState(),r.setCurrentTransformationMatrix(r.Matrix(1,0,0,1,a,o)),r.setLineWidth(d.attributeState.strokeWidth),y=d.attributeState.fill.color,r.setFillColor(y.r,y.g,y.b),r.setFont(d.attributeState.fontFamily),r.setFontSize(d.attributeState.fontSize*r.internal.scaleFactor),[4,Rt(e,h).render(d)];case 2:return v.sent(),r.restoreGraphicsState(),r.compatAPI(),d.textMeasure.cleanupTextMeasuring(),[2,r]}})})}Zt.API.svg=function(e,r){return r===void 0&&(r={}),Ir(e,this,r)};export{Ir as svg2pdf};
