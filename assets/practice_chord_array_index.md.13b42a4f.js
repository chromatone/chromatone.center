import{P,r as _,v as l,b as i,F as v,N as c,X as T,q as F,_ as O,i as B,a as g,H as x,C as H,T as b,w as k,A as I,c as R,O as E,M as z}from"./chunks/framework.7e747cd7.js";import{_ as D}from"./chunks/scale.3c699085.js";import{F as j}from"./chunks/index.83aed4fc.js";import{p as q,r as M}from"./chunks/calculations.3384a913.js";import{n as w,p as J,a as U,g as C}from"./chunks/colors.abbc28c6.js";import"./chunks/tuner.f1245b29.js";import"./chunks/audio.170dbcbf.js";import{u as A,a as X,b as Z}from"./chunks/midi.290fabf9.js";import"./chunks/loop.dc25aa47.js";import"./chunks/mic.967a994c.js";import"./chunks/Midi.1f918097.js";import"./chunks/tempo.fceb0f15.js";import"./chunks/noise.0a2eacbf.js";import"./chunks/sequence.5b4cde29.js";import{s as G,a as K}from"./chunks/synth.220fb0dd.js";import{n as L}from"./chunks/theory.61e5aadb.js";import"./chunks/keys.c3aef01a.js";import"./chunks/index.654bd828.js";import"./chunks/index.c0ca431c.js";import"./chunks/index.b30cd6d2.js";import"./chunks/index.b77db23e.js";import"./chunks/index.0b97d2b2.js";import"./chunks/commonjsHelpers.de833af9.js";import"./chunks/midiRender.6c0c3f09.js";import"./chunks/Sequence.a9c1c185.js";import"./chunks/Loop.b192c9c2.js";import"./chunks/UserMedia.4741de0f.js";import"./chunks/Subtract.f0fef764.js";import"./chunks/OnePoleFilter.2d0525f8.js";import"./chunks/FFT.4a41ae6b.js";import"./chunks/BitCrusher.884c5bbc.js";import"./chunks/Filter.2b531c53.js";import"./chunks/AutoPanner.94a306f8.js";import"./chunks/Scale.7b617051.js";import"./chunks/PingPongDelay.38a34857.js";import"./chunks/MonoSynth.4cac63d2.js";import"./chunks/index.86652af6.js";const Q={class:"cursor-pointer"},V=["r","stroke-width","fill"],W={style:{"user-select":"none","pointer-events":"none"},"font-size":"22px","text-anchor":"middle",fill:"white",x:0,y:8},Y={__name:"note",props:{note:{type:Object,default:()=>{}},r:{type:Number,default:10},pressed:{type:Boolean,default:!1},available:{type:Boolean,default:!1},tonic:{type:Number,default:0}},emits:["update:pressed"],setup(n){const d=n,{midi:h}=A(),o=P(!1),u=_(()=>{let y=d.tonic>d.note.pitch?3:2;return j(q(d.note.pitch,y)).toNote()});function m(){o.value=!0,J(u.value)}function f(){o.value=!1,U(u.value)}return(y,a)=>{var s,e;return l(),i("g",Q,[v("circle",{class:"transition-all duration-50",r:n.r,cx:0,cy:0,"stroke-width":n.tonic==n.note.pitch?4:n.available?2:0,stroke:"white",fill:c(w)(n.note.pitch,o.value||((s=c(h).activeChroma)==null?void 0:s[n.note.pitch])>0?5:n.available?3:2,o.value||((e=c(h).activeChroma)==null?void 0:e[n.note.pitch])>0?1:.4),onMousedown:a[0]||(a[0]=t=>m()),onTouchstart:a[1]||(a[1]=t=>m()),onMouseenter:a[2]||(a[2]=t=>n.pressed?m():null),onMouseup:a[3]||(a[3]=t=>f()),onMouseleave:a[4]||(a[4]=t=>f()),onTouchend:a[5]||(a[5]=t=>f()),onTouchcancel:a[6]||(a[6]=t=>f())},null,40,V),v("text",W,T(n.note.name),1)])}}},ee=["transform","fill","stroke-width"],te={__name:"trigger",props:{pressed:Boolean,note:{type:Object,default:()=>{}},chord:{type:Object,default:()=>{}},p:{type:Number,default:0},activeSteps:{type:Array,default:()=>[]}},setup(n){const d=n,{midi:h}=A(),o=P(!1),u=_(()=>d.chord.map(e=>e+d.note.pitch)),m=_(()=>{let e=!0;return u.value.map(r=>r>11?r%12:r).forEach(r=>{d.activeSteps[r]!="1"&&(e=!1)}),e}),f=_(()=>{let e=!0;return u.value.map(r=>r>11?r%12:r).forEach(r=>{h.activeChroma[r]!="1"&&(e=!1)}),e}),y=_(()=>u.value.map(e=>j(q(e)).transpose(-12).toNote()));function a(){o.value=!0,G(y.value),X(y.value)}function s(){o.value=!1,K(y.value),Z(y.value)}return F(()=>h.activeChroma,e=>{console.log(e)}),(e,t)=>(l(),i("polygon",{class:"chord-trigger",style:{"mix-blend-mode":"screen"},transform:"rotate("+60*n.p+")",fill:c(w)(n.note.pitch,o.value||f.value?5:m.value?.5:-2,m.value?1:.2),opacity:1,"stroke-width":m.value?4:.5,stroke:"hsla(0,0%,100%,0.5)",points:"0,0 80,0 80,46.188 40,69.28",onMousedown:t[0]||(t[0]=r=>a()),onMouseenter:t[1]||(t[1]=r=>n.pressed?a():null),onTouchstart:t[2]||(t[2]=r=>a()),onMouseleave:t[3]||(t[3]=r=>s()),onMouseup:t[4]||(t[4]=r=>s()),onTouchend:t[5]||(t[5]=r=>s()),onTouchcancel:t[6]||(t[6]=r=>s())},null,40,ee))}};const oe=n=>(I("data-v-68694ca0"),n=n(),R(),n),re=oe(()=>v("clipPath",{id:"grid-mask"},[v("rect",{x:-80,y:-110,width:1040,height:770,ry:20,rx:20})],-1)),ne=["transform"],se=["fill"],ae=["fill"],le={class:"chord-name","text-anchor":"middle",fill:"white",x:80,y:-40},ie={class:"chord-name","text-anchor":"middle",fill:"white",x:80,y:55},ue=["transform"],pe=["transform"],ce={__name:"array",props:{tonic:{type:Number,default:0},chroma:{type:String,default:"100000000000"}},setup(n){const d=n,h=[...L].map((s,e)=>({name:s,pitch:e})),o=B({pressed:!1,r:28,dx:80,rowNum:12,colNum:12,rows:[0,9,5,2,10],bgRows:[4,0,9,5,2,10,7],chords:[[0,3,7],[0,3,8],[0,5,8],[0,5,9],[0,4,9],[0,4,7]]}),u=_(()=>{let s=d.chroma.split("").map(Number);return M(s,-d.tonic)}),m=_(()=>o.dx*2*.866),f=_(()=>{let s=[];for(let e=0;e<12;e++)s[e]=h[7*e%12];return s});function y(s){return!u.value[s]||!u.value[(s+4)%12]||!u.value[(s+7)%12]}function a(s){return!u.value[s]||!u.value[(s+3)%12]||!u.value[(s+7)%12]}return(s,e)=>(l(),i("svg",{class:"rounded-3xl",id:"tonal-array",viewBox:"-80 -110 1040 770",version:"1.1",baseProfile:"full",xmlns:"http://www.w3.org/2000/svg",style:{"touch-action":"none"},onTouchstart:e[1]||(e[1]=k(t=>o.pressed=!0,["stop","prevent"])),onTouchend:e[2]||(e[2]=k(t=>o.pressed=!1,["stop","prevent"])),onMousedown:e[3]||(e[3]=k(t=>o.pressed=!0,["stop","prevent"])),onMouseup:e[4]||(e[4]=k(t=>o.pressed=!1,["stop","prevent"])),onMouseleave:e[5]||(e[5]=t=>o.pressed=!1)},[re,(l(!0),i(g,null,x(o.bgRows,(t,r)=>(l(),i("g",{key:t,"clip-path":"url(#grid-mask)"},[(l(!0),i(g,null,x(c(M)(f.value,t-1).splice(0,7),(p,$)=>(l(),i("g",{key:p,transform:`translate(${($-1)*2*o.dx+(r+1)%2*o.dx}, ${(r-1)*m.value})`},[v("polygon",{class:"chord-triangle",fill:a(p.pitch)?c(w)(p.pitch,1,.2):c(w)(p.pitch,3),points:"0,0 160,0 80,138.56"},null,8,se),v("polygon",{class:"chord-triangle major",fill:y(p.pitch)?c(w)(p.pitch,1,.2):c(w)(p.pitch,2),points:"0,0 160,0 80,-138.56"},null,8,ae),v("text",le,T(p.name)+"M",1),v("text",ie,T(p.name)+"m",1)],8,ne))),128))]))),128)),(l(!0),i(g,null,x(o.rows,(t,r)=>(l(),i("g",{class:"cursor-crosshair",key:r},[(l(!0),i(g,null,x(c(M)(f.value,t).splice(0,7),(p,$)=>(l(),i("g",{key:p,transform:`translate(${$*2*o.dx+r%2*o.dx}, ${r*m.value})`},[(l(!0),i(g,null,x(o.chords,(N,S)=>(l(),H(te,{key:S,"active-steps":u.value,chord:N,p:S,note:p,pressed:o.pressed},null,8,["active-steps","chord","p","note","pressed"]))),128))],8,ue))),128))]))),128)),(l(!0),i(g,null,x(o.rows,(t,r)=>(l(),i("g",{key:r},[(l(!0),i(g,null,x(c(M)(f.value,t).splice(0,6),(p,$)=>(l(),i("g",{key:$,transform:"translate("+($*2*o.dx+r%2*o.dx)+","+r*m.value+")"},[b(Y,{pressed:o.pressed,"onUpdate:pressed":e[0]||(e[0]=N=>o.pressed=N),available:!!u.value[p.pitch],tonic:n.tonic,note:p,r:o.r},null,8,["pressed","available","tonic","note","r"])],8,pe))),128))]))),128))],32))}},de=O(ce,[["__scopeId","data-v-68694ca0"]]);const me={class:"flex flex-col"},ve={class:"fullscreen-container rounded-3xl",id:"screen"},fe={__name:"space",setup(n){return(d,h)=>{const o=D;return l(),i("div",me,[b(o),v("div",ve,[b(de,{tonic:c(C).tonic,chroma:c(C).chroma},null,8,["tonic","chroma"])])])}}},he=O(fe,[["__scopeId","data-v-799e30d5"]]),ye=v("p",null,[v("a",{href:"https://en.wikipedia.org/wiki/Harmonic_table_note_layout",target:"_blank",rel:"noreferrer"},"wiki")],-1),ot=JSON.parse('{"title":"Tonal array","description":"Harmonic table note layout - symmetrical hexagonal pattern of interval sequences","frontmatter":{"title":"Tonal array","description":"Harmonic table note layout - symmetrical hexagonal pattern of interval sequences","cover":"array.png","date":"2022-02-01T00:00:00.000Z"},"headers":[],"relativePath":"practice/chord/array/index.md","filePath":"practice/chord/array/index.md"}'),_e={name:"practice/chord/array/index.md"},rt=Object.assign(_e,{setup(n){return(d,h)=>{const o=z("client-only");return l(),i("div",null,[b(o,null,{default:E(()=>[b(he)]),_:1}),ye])}}});export{ot as __pageData,rt as default};
