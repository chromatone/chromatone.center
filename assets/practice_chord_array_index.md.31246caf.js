import{_ as F}from"./chunks/scale.c7cdc782.js";import{x as C,b as g,o as l,c as i,a as v,u as c,t as S,H as O,_ as j,r as A,F as _,d as x,g as E,f as b,E as k,p as H,q as R,I as D,w as U}from"./chunks/framework.18a7d3ba.js";import{F as I}from"./chunks/index.139b2562.js";import{p as P,r as M}from"./chunks/calculations.65ee336d.js";import{n as w,p as V,a as z,g as B}from"./chunks/colors.b83dc710.js";import"./chunks/tuner.0ba209fb.js";import"./chunks/audio.4983d088.js";import{u as q,a as J,b as L}from"./chunks/midi.d68b2a41.js";import"./chunks/loop.7b127e73.js";import"./chunks/mic.e6269e8a.js";import"./chunks/Midi.1f918097.js";import"./chunks/tempo.de4f8772.js";import"./chunks/noise.6733575a.js";import"./chunks/sequence.594e5a2c.js";import{s as Z,a as G}from"./chunks/synth.f8bdd3f9.js";import{n as K}from"./chunks/theory.61e5aadb.js";import"./chunks/keys.e0c91b6e.js";import"./chunks/index.654bd828.js";import"./chunks/index.b30cd6d2.js";import"./chunks/index.8c24e7d1.js";import"./chunks/index.ff80e595.js";import"./chunks/commonjsHelpers.de833af9.js";import"./chunks/midiRender.50bd33c3.js";import"./chunks/Sequence.cd1d0d05.js";import"./chunks/Loop.e0ddb3d9.js";import"./chunks/UserMedia.f33e4faf.js";import"./chunks/Subtract.d22cbd0e.js";import"./chunks/OnePoleFilter.477d959f.js";import"./chunks/FFT.a27ef955.js";import"./chunks/BitCrusher.a8d04589.js";import"./chunks/Filter.3335ee5d.js";import"./chunks/AutoPanner.3abf4fbf.js";import"./chunks/Scale.a106cb29.js";import"./chunks/PingPongDelay.0dd5299b.js";import"./chunks/MonoSynth.2582d87a.js";import"./chunks/index.86652af6.js";const Q={class:"cursor-pointer"},W=["r","stroke-width","fill"],X={style:{"user-select":"none","pointer-events":"none"},"font-size":"22px","text-anchor":"middle",fill:"white",x:0,y:8},Y={__name:"note",props:{note:{type:Object,default:()=>{}},r:{type:Number,default:10},pressed:{type:Boolean,default:!1},available:{type:Boolean,default:!1},tonic:{type:Number,default:0}},emits:["update:pressed"],setup(n){const d=n,{midi:h}=q(),o=C(!1),u=g(()=>{let y=d.tonic>d.note.pitch?3:2;return I(P(d.note.pitch,y)).toNote()});function m(){o.value=!0,V(u.value)}function f(){o.value=!1,z(u.value)}return(y,a)=>{var s,e;return l(),i("g",Q,[v("circle",{class:"transition-all duration-50",r:n.r,cx:0,cy:0,"stroke-width":n.tonic==n.note.pitch?4:n.available?2:0,stroke:"white",fill:c(w)(n.note.pitch,o.value||((s=c(h).activeChroma)==null?void 0:s[n.note.pitch])>0?5:n.available?3:2,o.value||((e=c(h).activeChroma)==null?void 0:e[n.note.pitch])>0?1:.4),onMousedown:a[0]||(a[0]=t=>m()),onTouchstart:a[1]||(a[1]=t=>m()),onMouseenter:a[2]||(a[2]=t=>n.pressed?m():null),onMouseup:a[3]||(a[3]=t=>f()),onMouseleave:a[4]||(a[4]=t=>f()),onTouchend:a[5]||(a[5]=t=>f()),onTouchcancel:a[6]||(a[6]=t=>f())},null,40,W),v("text",X,S(n.note.name),1)])}}},ee=["transform","fill","stroke-width"],te={__name:"trigger",props:{pressed:Boolean,note:{type:Object,default:()=>{}},chord:{type:Object,default:()=>{}},p:{type:Number,default:0},activeSteps:{type:Array,default:()=>[]}},setup(n){const d=n,{midi:h}=q(),o=C(!1),u=g(()=>d.chord.map(e=>e+d.note.pitch)),m=g(()=>{let e=!0;return u.value.map(r=>r>11?r%12:r).forEach(r=>{d.activeSteps[r]!="1"&&(e=!1)}),e}),f=g(()=>{let e=!0;return u.value.map(r=>r>11?r%12:r).forEach(r=>{h.activeChroma[r]!="1"&&(e=!1)}),e}),y=g(()=>u.value.map(e=>I(P(e)).transpose(-12).toNote()));function a(){o.value=!0,Z(y.value),J(y.value)}function s(){o.value=!1,G(y.value),L(y.value)}return O(()=>h.activeChroma,e=>{console.log(e)}),(e,t)=>(l(),i("polygon",{class:"chord-trigger",style:{"mix-blend-mode":"screen"},transform:"rotate("+60*n.p+")",fill:c(w)(n.note.pitch,o.value||f.value?5:m.value?.5:-2,m.value?1:.2),opacity:1,"stroke-width":m.value?4:.5,stroke:"hsla(0,0%,100%,0.5)",points:"0,0 80,0 80,46.188 40,69.28",onMousedown:t[0]||(t[0]=r=>a()),onMouseenter:t[1]||(t[1]=r=>n.pressed?a():null),onTouchstart:t[2]||(t[2]=r=>a()),onMouseleave:t[3]||(t[3]=r=>s()),onMouseup:t[4]||(t[4]=r=>s()),onTouchend:t[5]||(t[5]=r=>s()),onTouchcancel:t[6]||(t[6]=r=>s())},null,40,ee))}};const oe=n=>(H("data-v-68694ca0"),n=n(),R(),n),re=oe(()=>v("clipPath",{id:"grid-mask"},[v("rect",{x:-80,y:-110,width:1040,height:770,ry:20,rx:20})],-1)),ne=["transform"],se=["fill"],ae=["fill"],le={class:"chord-name","text-anchor":"middle",fill:"white",x:80,y:-40},ie={class:"chord-name","text-anchor":"middle",fill:"white",x:80,y:55},ue=["transform"],pe=["transform"],ce={__name:"array",props:{tonic:{type:Number,default:0},chroma:{type:String,default:"100000000000"}},setup(n){const d=n,h=[...K].map((s,e)=>({name:s,pitch:e})),o=A({pressed:!1,r:28,dx:80,rowNum:12,colNum:12,rows:[0,9,5,2,10],bgRows:[4,0,9,5,2,10,7],chords:[[0,3,7],[0,3,8],[0,5,8],[0,5,9],[0,4,9],[0,4,7]]}),u=g(()=>{let s=d.chroma.split("").map(Number);return M(s,-d.tonic)}),m=g(()=>o.dx*2*.866),f=g(()=>{let s=[];for(let e=0;e<12;e++)s[e]=h[7*e%12];return s});function y(s){return!u.value[s]||!u.value[(s+4)%12]||!u.value[(s+7)%12]}function a(s){return!u.value[s]||!u.value[(s+3)%12]||!u.value[(s+7)%12]}return(s,e)=>(l(),i("svg",{class:"rounded-3xl",id:"tonal-array",viewBox:"-80 -110 1040 770",version:"1.1",baseProfile:"full",xmlns:"http://www.w3.org/2000/svg",style:{"touch-action":"none"},onTouchstart:e[1]||(e[1]=k(t=>o.pressed=!0,["stop","prevent"])),onTouchend:e[2]||(e[2]=k(t=>o.pressed=!1,["stop","prevent"])),onMousedown:e[3]||(e[3]=k(t=>o.pressed=!0,["stop","prevent"])),onMouseup:e[4]||(e[4]=k(t=>o.pressed=!1,["stop","prevent"])),onMouseleave:e[5]||(e[5]=t=>o.pressed=!1)},[re,(l(!0),i(_,null,x(o.bgRows,(t,r)=>(l(),i("g",{key:t,"clip-path":"url(#grid-mask)"},[(l(!0),i(_,null,x(c(M)(f.value,t-1).splice(0,7),(p,$)=>(l(),i("g",{key:p,transform:`translate(${($-1)*2*o.dx+(r+1)%2*o.dx}, ${(r-1)*m.value})`},[v("polygon",{class:"chord-triangle",fill:a(p.pitch)?c(w)(p.pitch,1,.2):c(w)(p.pitch,3),points:"0,0 160,0 80,138.56"},null,8,se),v("polygon",{class:"chord-triangle major",fill:y(p.pitch)?c(w)(p.pitch,1,.2):c(w)(p.pitch,2),points:"0,0 160,0 80,-138.56"},null,8,ae),v("text",le,S(p.name)+"M",1),v("text",ie,S(p.name)+"m",1)],8,ne))),128))]))),128)),(l(!0),i(_,null,x(o.rows,(t,r)=>(l(),i("g",{class:"cursor-crosshair",key:r},[(l(!0),i(_,null,x(c(M)(f.value,t).splice(0,7),(p,$)=>(l(),i("g",{key:p,transform:`translate(${$*2*o.dx+r%2*o.dx}, ${r*m.value})`},[(l(!0),i(_,null,x(o.chords,(N,T)=>(l(),E(te,{key:T,"active-steps":u.value,chord:N,p:T,note:p,pressed:o.pressed},null,8,["active-steps","chord","p","note","pressed"]))),128))],8,ue))),128))]))),128)),(l(!0),i(_,null,x(o.rows,(t,r)=>(l(),i("g",{key:r},[(l(!0),i(_,null,x(c(M)(f.value,t).splice(0,6),(p,$)=>(l(),i("g",{key:$,transform:"translate("+($*2*o.dx+r%2*o.dx)+","+r*m.value+")"},[b(Y,{pressed:o.pressed,"onUpdate:pressed":e[0]||(e[0]=N=>o.pressed=N),available:!!u.value[p.pitch],tonic:n.tonic,note:p,r:o.r},null,8,["pressed","available","tonic","note","r"])],8,pe))),128))]))),128))],32))}},de=j(ce,[["__scopeId","data-v-68694ca0"]]);const me={class:"flex flex-col"},ve={class:"fullscreen-container rounded-3xl",id:"screen"},fe={__name:"space",setup(n){return(d,h)=>{const o=F;return l(),i("div",me,[b(o),v("div",ve,[b(de,{tonic:c(B).tonic,chroma:c(B).chroma},null,8,["tonic","chroma"])])])}}},he=j(fe,[["__scopeId","data-v-799e30d5"]]),ye=v("p",null,[v("a",{href:"https://en.wikipedia.org/wiki/Harmonic_table_note_layout",target:"_blank",rel:"noreferrer"},"wiki")],-1),tt=JSON.parse('{"title":"Tonal array","description":"Harmonic table note layout - symmetrical hexagonal pattern of interval sequences","frontmatter":{"title":"Tonal array","description":"Harmonic table note layout - symmetrical hexagonal pattern of interval sequences","cover":"array.png","date":"2022-02-01T00:00:00.000Z"},"headers":[],"relativePath":"practice/chord/array/index.md","filePath":"practice/chord/array/index.md","lastUpdated":1677572854000}'),ge={name:"practice/chord/array/index.md"},ot=Object.assign(ge,{setup(n){return(d,h)=>{const o=D("client-only");return l(),i("div",null,[b(o,null,{default:U(()=>[b(he)]),_:1}),ye])}}});export{tt as __pageData,ot as default};
