import{F as j}from"./chunks/index.ecadaa1f.js";import{p as F,r as T}from"./chunks/calculations.65ee336d.js";import{n as k,p as E,a as O,g as P}from"./chunks/colors.556678ec.js";import"./chunks/tuner.4464eebb.js";import"./chunks/audio.cd4fd50f.js";import{u as I,a as D,b as H}from"./chunks/midi.3cded2a1.js";import"./chunks/loop.6e3c8def.js";import"./chunks/mic.97cb31ca.js";import"./chunks/midiRender.732382e2.js";import"./chunks/Midi.1f918097.js";import"./chunks/tempo.2caff368.js";import"./chunks/noise.655d1c63.js";import"./chunks/sequence.11020275.js";import{s as R,a as z}from"./chunks/synth.91fa66d8.js";import{n as U}from"./chunks/theory.61e5aadb.js";import{k as q,i as x,o as l,c as u,a as y,h as c,t as C,C as V,_ as B,D as J,F as $,r as w,f as L,g as N,y as M,p as Z,e as G,E as K,z as Q}from"./chunks/framework.02c15fb1.js";import{_ as W}from"./chunks/ControlScale.f0126d41.js";import"./chunks/index.654bd828.js";import"./chunks/index.b30cd6d2.js";import"./chunks/index.27fe08f8.js";import"./chunks/commonjsHelpers.de833af9.js";import"./chunks/Sequence.b70c4f77.js";import"./chunks/Loop.2cff46c8.js";import"./chunks/UserMedia.1ce453ef.js";import"./chunks/Subtract.690bd439.js";import"./chunks/OnePoleFilter.20a48301.js";import"./chunks/FFT.205b3233.js";import"./chunks/BitCrusher.4a0038e2.js";import"./chunks/Filter.0c504ab2.js";import"./chunks/AutoPanner.e7dc9f35.js";import"./chunks/Scale.c2a3e98f.js";import"./chunks/PingPongDelay.dcb48e49.js";import"./chunks/MonoSynth.dbabbee5.js";import"./chunks/index.86652af6.js";import"./chunks/ChromaKeys.d8bcbad4.js";const X={class:"cursor-pointer"},Y=["r","stroke-width","fill"],ee={style:{"user-select":"none","pointer-events":"none"},"font-size":"22px","text-anchor":"middle",fill:"white",x:0,y:8},te={__name:"TonalArrayNote",props:{note:{type:Object,default:()=>{}},r:{type:Number,default:10},pressed:{type:Boolean,default:!1},available:{type:Boolean,default:!1},tonic:{type:Number,default:0}},emits:["update:pressed"],setup(o){const d=o,{midi:g}=I(),t=q(!1),i=x(()=>{let f=d.tonic>d.note.pitch?3:2;return j(F(d.note.pitch,f)).toNote()});function m(){t.value=!0,E(i.value)}function v(){t.value=!1,O(i.value)}return(f,a)=>{var n,e;return l(),u("g",X,[y("circle",{class:"transition-all duration-50",r:o.r,cx:0,cy:0,"stroke-width":o.tonic==o.note.pitch?4:o.available?2:0,stroke:"white",fill:c(k)(o.note.pitch,t.value||((n=c(g).activeChroma)==null?void 0:n[o.note.pitch])>0?5:o.available?3:2,t.value||((e=c(g).activeChroma)==null?void 0:e[o.note.pitch])>0?1:.4),onMousedown:a[0]||(a[0]=r=>m()),onTouchstart:a[1]||(a[1]=r=>m()),onMouseenter:a[2]||(a[2]=r=>o.pressed?m():null),onMouseup:a[3]||(a[3]=r=>v()),onMouseleave:a[4]||(a[4]=r=>v()),onTouchend:a[5]||(a[5]=r=>v()),onTouchcancel:a[6]||(a[6]=r=>v())},null,40,Y),y("text",ee,C(o.note.name),1)])}}},oe=["transform","fill","stroke-width"],re={__name:"TonalArrayTrigger",props:{pressed:Boolean,note:{type:Object,default:()=>{}},chord:{type:Object,default:()=>{}},p:{type:Number,default:0},activeSteps:{type:Array,default:()=>[]}},setup(o){const d=o,{midi:g}=I(),t=q(!1),i=x(()=>d.chord.map(e=>e+d.note.pitch)),m=x(()=>{let e=!0;return i.value.map(s=>s>11?s%12:s).forEach(s=>{d.activeSteps[s]!="1"&&(e=!1)}),e}),v=x(()=>{let e=!0;return i.value.map(s=>s>11?s%12:s).forEach(s=>{g.activeChroma[s]!="1"&&(e=!1)}),e}),f=x(()=>i.value.map(e=>j(F(e)).transpose(-12).toNote()));function a(){t.value=!0,R(f.value),D(f.value)}function n(){t.value=!1,z(f.value),H(f.value)}return V(()=>g.activeChroma,e=>{console.log(e)}),(e,r)=>(l(),u("polygon",{class:"chord-trigger",style:{"mix-blend-mode":"screen"},transform:"rotate("+60*o.p+")",fill:c(k)(o.note.pitch,t.value||v.value?5:m.value?.5:-2,m.value?1:.2),opacity:1,"stroke-width":m.value?4:.5,stroke:"hsla(0,0%,100%,0.5)",points:"0,0 80,0 80,46.188 40,69.28",onMousedown:r[0]||(r[0]=s=>a()),onMouseenter:r[1]||(r[1]=s=>o.pressed?a():null),onTouchstart:r[2]||(r[2]=s=>a()),onMouseleave:r[3]||(r[3]=s=>n()),onMouseup:r[4]||(r[4]=s=>n()),onTouchend:r[5]||(r[5]=s=>n()),onTouchcancel:r[6]||(r[6]=s=>n())},null,40,oe))}};const ne=o=>(Z("data-v-67bd064d"),o=o(),G(),o),ae=ne(()=>y("clipPath",{id:"grid-mask"},[y("rect",{x:-80,y:-110,width:1040,height:770,ry:20,rx:20})],-1)),se=["transform"],le=["fill"],ie=["fill"],ue={class:"chord-name","text-anchor":"middle",fill:"white",x:80,y:-40},pe={class:"chord-name","text-anchor":"middle",fill:"white",x:80,y:55},ce=["transform"],de=["transform"],me={__name:"TonalArray",props:{tonic:{type:Number,default:0},chroma:{type:String,default:"100000000000"}},setup(o){const d=o,g=[...U].map((n,e)=>({name:n,pitch:e})),t=J({pressed:!1,r:28,dx:80,rowNum:12,colNum:12,rows:[0,9,5,2,10],bgRows:[4,0,9,5,2,10,7],chords:[[0,3,7],[0,3,8],[0,5,8],[0,5,9],[0,4,9],[0,4,7]]}),i=x(()=>{let n=d.chroma.split("").map(Number);return T(n,-d.tonic)}),m=x(()=>t.dx*2*.866),v=x(()=>{let n=[];for(let e=0;e<12;e++)n[e]=g[7*e%12];return n});function f(n){return!i.value[n]||!i.value[(n+4)%12]||!i.value[(n+7)%12]}function a(n){return!i.value[n]||!i.value[(n+3)%12]||!i.value[(n+7)%12]}return(n,e)=>{const r=re,s=te;return l(),u("svg",{class:"rounded-3xl",id:"tonal-array",viewBox:"-80 -110 1040 770",version:"1.1",baseProfile:"full",xmlns:"http://www.w3.org/2000/svg",style:{"touch-action":"none"},onTouchstart:e[1]||(e[1]=M(h=>t.pressed=!0,["stop","prevent"])),onTouchend:e[2]||(e[2]=M(h=>t.pressed=!1,["stop","prevent"])),onMousedown:e[3]||(e[3]=M(h=>t.pressed=!0,["stop","prevent"])),onMouseup:e[4]||(e[4]=M(h=>t.pressed=!1,["stop","prevent"])),onMouseleave:e[5]||(e[5]=h=>t.pressed=!1)},[ae,(l(!0),u($,null,w(t.bgRows,(h,_)=>(l(),u("g",{key:h,"clip-path":"url(#grid-mask)"},[(l(!0),u($,null,w(c(T)(v.value,h-1).splice(0,7),(p,b)=>(l(),u("g",{key:p,transform:`translate(${(b-1)*2*t.dx+(_+1)%2*t.dx}, ${(_-1)*m.value})`},[y("polygon",{class:"chord-triangle",fill:a(p.pitch)?c(k)(p.pitch,1,.2):c(k)(p.pitch,3),points:"0,0 160,0 80,138.56"},null,8,le),y("polygon",{class:"chord-triangle major",fill:f(p.pitch)?c(k)(p.pitch,1,.2):c(k)(p.pitch,2),points:"0,0 160,0 80,-138.56"},null,8,ie),y("text",ue,C(p.name)+"M",1),y("text",pe,C(p.name)+"m",1)],8,se))),128))]))),128)),(l(!0),u($,null,w(t.rows,(h,_)=>(l(),u("g",{class:"cursor-crosshair",key:_},[(l(!0),u($,null,w(c(T)(v.value,h).splice(0,7),(p,b)=>(l(),u("g",{key:p,transform:`translate(${b*2*t.dx+_%2*t.dx}, ${_*m.value})`},[(l(!0),u($,null,w(t.chords,(S,A)=>(l(),L(r,{key:A,"active-steps":i.value,chord:S,p:A,note:p,pressed:t.pressed},null,8,["active-steps","chord","p","note","pressed"]))),128))],8,ce))),128))]))),128)),(l(!0),u($,null,w(t.rows,(h,_)=>(l(),u("g",{key:_},[(l(!0),u($,null,w(c(T)(v.value,h).splice(0,6),(p,b)=>(l(),u("g",{key:b,transform:"translate("+(b*2*t.dx+_%2*t.dx)+","+_*m.value+")"},[N(s,{pressed:t.pressed,"onUpdate:pressed":e[0]||(e[0]=S=>t.pressed=S),available:!!i.value[p.pitch],tonic:o.tonic,note:p,r:t.r},null,8,["pressed","available","tonic","note","r"])],8,de))),128))]))),128))],32)}}},ve=B(me,[["__scopeId","data-v-67bd064d"]]);const fe={class:"flex flex-col"},he={class:"fullscreen-container rounded-3xl",id:"screen"},ye={__name:"TonalSpace",setup(o){return(d,g)=>{const t=W,i=ve;return l(),u("div",fe,[N(t),y("div",he,[N(i,{tonic:c(P).tonic,chroma:c(P).chroma},null,8,["tonic","chroma"])])])}}},_e=B(ye,[["__scopeId","data-v-71aac5d5"]]),rt=JSON.parse('{"title":"Tonal array","description":"Harmonic table note layout - symmetrical hexagonal pattern of interval sequences","frontmatter":{"title":"Tonal array","description":"Harmonic table note layout - symmetrical hexagonal pattern of interval sequences","cover":"array.png","date":"2022-02-01T00:00:00.000Z"},"headers":[],"relativePath":"practice/chord/array/index.md","filePath":"practice/chord/array/index.md","lastUpdated":1694022443000}'),ge={name:"practice/chord/array/index.md"},xe=y("p",null,[y("a",{href:"https://en.wikipedia.org/wiki/Harmonic_table_note_layout",target:"_blank",rel:"noreferrer"},"wiki")],-1);function $e(o,d,g,t,i,m){const v=_e,f=K("client-only");return l(),u("div",null,[N(f,null,{default:Q(()=>[N(v)]),_:1}),xe])}const nt=B(ge,[["render",$e]]);export{rt as __pageData,nt as default};
