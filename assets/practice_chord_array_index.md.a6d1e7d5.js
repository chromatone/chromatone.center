import{_ as q}from"./chunks/ControlScale.d8a8e9b3.js";import{F as j}from"./chunks/index.e98b5e67.js";import{p as P,r as T}from"./chunks/calculations.2bac3e9a.js";import{n as k,p as O,s as E,g as S}from"./chunks/colors.71e97f2b.js";import"./chunks/tuner.5a4b9afc.js";import"./chunks/audio.e7507cf6.js";import{u as F,m as H,a as R}from"./chunks/midi.b5556f9f.js";import"./chunks/loop.88bd9d68.js";import"./chunks/mic.dc5fa472.js";import"./chunks/midiRender.1914f0ed.js";import"./chunks/Midi.1f918097.js";import"./chunks/tempo.84043c62.js";import"./chunks/noise.4e878d58.js";import"./chunks/sequence.8d866e24.js";import{s as D,a as U}from"./chunks/synth.9919606b.js";import{n as V}from"./chunks/theory.f78bd4d6.js";import{i as I,j as g,o as l,c as i,a as h,g as m,t as B,w as z,_ as C,k as J,F as x,r as $,e as L,f as b,l as M,p as Z,d as G,m as K,n as Q}from"./chunks/framework.88db3c26.js";import"./chunks/ChromaKeys.734b9bba.js";import"./chunks/index.654bd828.js";import"./chunks/index.70261d75.js";import"./chunks/index.edce5462.js";import"./chunks/index.78e9bb27.js";import"./chunks/commonjsHelpers.de833af9.js";import"./chunks/Sequence.873f0209.js";import"./chunks/Loop.14cab9e9.js";import"./chunks/UserMedia.9dadeb85.js";import"./chunks/Subtract.109130cb.js";import"./chunks/OnePoleFilter.8566943f.js";import"./chunks/BitCrusher.b9cad20b.js";import"./chunks/Filter.ca6be54c.js";import"./chunks/AutoPanner.fd8dabdc.js";import"./chunks/Scale.b6214b1d.js";import"./chunks/PingPongDelay.7799470c.js";import"./chunks/MonoSynth.c00b1270.js";import"./chunks/index.28e8ae3d.js";const W={class:"cursor-pointer"},X=["r","stroke-width","fill"],Y={style:{"user-select":"none","pointer-events":"none"},"font-size":"22px","text-anchor":"middle",fill:"white",x:0,y:8},ee={__name:"TonalArrayNote",props:{note:{type:Object,default:()=>{}},r:{type:Number,default:10},pressed:{type:Boolean,default:!1},available:{type:Boolean,default:!1},tonic:{type:Number,default:0}},emits:["update:pressed"],setup(a){const v=a,{midi:o}=F(),s=I(!1),c=g(()=>{let f=v.tonic>v.note.pitch?3:2;return j(P(v.note.pitch,f)).toNote()});function d(){s.value=!0,O(c.value)}function y(){s.value=!1,E(c.value)}return(f,e)=>{var r,p;return l(),i("g",W,[h("circle",{class:"transition-all duration-50",r:a.r,cx:0,cy:0,"stroke-width":a.tonic==a.note.pitch?4:a.available?2:0,stroke:"white",fill:m(k)(a.note.pitch,s.value||((r=m(o).activeChroma)==null?void 0:r[a.note.pitch])>0?5:a.available?3:2,s.value||((p=m(o).activeChroma)==null?void 0:p[a.note.pitch])>0?1:.4),onMousedown:e[0]||(e[0]=n=>d()),onTouchstart:e[1]||(e[1]=n=>d()),onMouseenter:e[2]||(e[2]=n=>a.pressed?d():null),onMouseup:e[3]||(e[3]=n=>y()),onMouseleave:e[4]||(e[4]=n=>y()),onTouchend:e[5]||(e[5]=n=>y()),onTouchcancel:e[6]||(e[6]=n=>y())},null,40,X),h("text",Y,B(a.note.name),1)])}}},te=["transform","fill","stroke-width"],oe={__name:"TonalArrayTrigger",props:{pressed:Boolean,note:{type:Object,default:()=>{}},chord:{type:Object,default:()=>{}},p:{type:Number,default:0},activeSteps:{type:Array,default:()=>[]}},setup(a){const v=a,{midi:o}=F(),s=I(!1),c=g(()=>v.chord.map(p=>p+v.note.pitch)),d=g(()=>{let p=!0;return c.value.map(t=>t>11?t%12:t).forEach(t=>{v.activeSteps[t]!="1"&&(p=!1)}),p}),y=g(()=>{let p=!0;return c.value.map(t=>t>11?t%12:t).forEach(t=>{o.activeChroma[t]!="1"&&(p=!1)}),p}),f=g(()=>c.value.map(p=>j(P(p)).transpose(-12).toNote()));function e(){s.value=!0,D(f.value),H(f.value)}function r(){s.value=!1,U(f.value),R(f.value)}return z(()=>o.activeChroma,p=>{console.log(p)}),(p,n)=>(l(),i("polygon",{class:"chord-trigger",style:{"mix-blend-mode":"screen"},transform:"rotate("+60*a.p+")",fill:m(k)(a.note.pitch,s.value||y.value?5:d.value?.5:-2,d.value?1:.2),opacity:1,"stroke-width":d.value?4:.5,stroke:"hsla(0,0%,100%,0.5)",points:"0,0 80,0 80,46.188 40,69.28",onMousedown:n[0]||(n[0]=t=>e()),onMouseenter:n[1]||(n[1]=t=>a.pressed?e():null),onTouchstart:n[2]||(n[2]=t=>e()),onMouseleave:n[3]||(n[3]=t=>r()),onMouseup:n[4]||(n[4]=t=>r()),onTouchend:n[5]||(n[5]=t=>r()),onTouchcancel:n[6]||(n[6]=t=>r())},null,40,te))}};const re=a=>(Z("data-v-5ce45a20"),a=a(),G(),a),ne=re(()=>h("clipPath",{id:"grid-mask"},[h("rect",{x:-80,y:-110,width:1040,height:770,ry:20,rx:20})],-1)),ae=["transform"],se=["fill"],le=["fill"],ie={class:"chord-name","text-anchor":"middle",fill:"white",x:80,y:-40},pe={class:"chord-name","text-anchor":"middle",fill:"white",x:80,y:55},ue=["transform"],ce=["transform"],de={__name:"TonalArray",setup(a){const v=[...V].map((e,r)=>({name:e,pitch:r})),o=J({pressed:!1,r:28,dx:80,rowNum:12,colNum:12,rows:[0,9,5,2,10],bgRows:[4,0,9,5,2,10,7],chords:[[0,3,7],[0,3,8],[0,5,8],[0,5,9],[0,4,9],[0,4,7]]}),s=g(()=>{let e=S.chroma.split("").map(Number);return T(e,-S.tonic)}),c=g(()=>o.dx*2*.866),d=g(()=>{let e=[];for(let r=0;r<12;r++)e[r]=v[7*r%12];return e});function y(e){return!s.value[e]||!s.value[(e+4)%12]||!s.value[(e+7)%12]}function f(e){return!s.value[e]||!s.value[(e+3)%12]||!s.value[(e+7)%12]}return(e,r)=>{const p=oe,n=ee;return l(),i("svg",{class:"rounded-3xl",id:"tonal-array",viewBox:"-80 -110 1040 770",version:"1.1",baseProfile:"full",xmlns:"http://www.w3.org/2000/svg",style:{"touch-action":"none"},onTouchstart:r[1]||(r[1]=M(t=>o.pressed=!0,["stop","prevent"])),onTouchend:r[2]||(r[2]=M(t=>o.pressed=!1,["stop","prevent"])),onMousedown:r[3]||(r[3]=M(t=>o.pressed=!0,["stop","prevent"])),onMouseup:r[4]||(r[4]=M(t=>o.pressed=!1,["stop","prevent"])),onMouseleave:r[5]||(r[5]=t=>o.pressed=!1)},[ne,(l(!0),i(x,null,$(o.bgRows,(t,_)=>(l(),i("g",{key:t,"clip-path":"url(#grid-mask)"},[(l(!0),i(x,null,$(m(T)(d.value,t-1).splice(0,7),(u,w)=>(l(),i("g",{key:u,transform:`translate(${(w-1)*2*o.dx+(_+1)%2*o.dx}, ${(_-1)*c.value})`},[h("polygon",{class:"chord-triangle",fill:f(u.pitch)?m(k)(u.pitch,1,.2):m(k)(u.pitch,3),points:"0,0 160,0 80,138.56"},null,8,se),h("polygon",{class:"chord-triangle major",fill:y(u.pitch)?m(k)(u.pitch,1,.2):m(k)(u.pitch,2),points:"0,0 160,0 80,-138.56"},null,8,le),h("text",ie,B(u.name)+"M",1),h("text",pe,B(u.name)+"m",1)],8,ae))),128))]))),128)),(l(!0),i(x,null,$(o.rows,(t,_)=>(l(),i("g",{class:"cursor-crosshair",key:_},[(l(!0),i(x,null,$(m(T)(d.value,t).splice(0,7),(u,w)=>(l(),i("g",{key:u,transform:`translate(${w*2*o.dx+_%2*o.dx}, ${_*c.value})`},[(l(!0),i(x,null,$(o.chords,(N,A)=>(l(),L(p,{key:A,"active-steps":s.value,chord:N,p:A,note:u,pressed:o.pressed},null,8,["active-steps","chord","p","note","pressed"]))),128))],8,ue))),128))]))),128)),(l(!0),i(x,null,$(o.rows,(t,_)=>(l(),i("g",{key:_},[(l(!0),i(x,null,$(m(T)(d.value,t).splice(0,6),(u,w)=>(l(),i("g",{key:w,transform:"translate("+(w*2*o.dx+_%2*o.dx)+","+_*c.value+")"},[b(n,{pressed:o.pressed,"onUpdate:pressed":r[0]||(r[0]=N=>o.pressed=N),available:!!s.value[u.pitch],tonic:m(S).tonic,note:u,r:o.r},null,8,["pressed","available","tonic","note","r"])],8,ce))),128))]))),128))],32)}}},me=C(de,[["__scopeId","data-v-5ce45a20"]]);const ve={class:"flex flex-col gap-4"},fe={class:"fullscreen-container rounded-3xl",id:"screen"},he={__name:"TonalSpace",setup(a){return(v,o)=>{const s=me,c=q;return l(),i("div",ve,[h("div",fe,[b(s)]),b(c)])}}},ye=C(he,[["__scopeId","data-v-d4fc29ac"]]),ot=JSON.parse('{"title":"Tonal array","description":"Harmonic table note layout - symmetrical hexagonal pattern of interval sequences","frontmatter":{"title":"Tonal array","description":"Harmonic table note layout - symmetrical hexagonal pattern of interval sequences","cover":"array.png","date":"2022-02-01T00:00:00.000Z","layout":"app"},"headers":[],"relativePath":"practice/chord/array/index.md","filePath":"practice/chord/array/index.md","lastUpdated":1699514985000}'),_e={name:"practice/chord/array/index.md"},ge=h("p",null,[h("a",{href:"https://en.wikipedia.org/wiki/Harmonic_table_note_layout",target:"_blank",rel:"noreferrer"},"wiki")],-1);function xe(a,v,o,s,c,d){const y=ye,f=K("client-only");return l(),i("div",null,[b(f,null,{default:Q(()=>[b(y)]),_:1}),ge])}const rt=C(_e,[["render",xe]]);export{ot as __pageData,rt as default};
