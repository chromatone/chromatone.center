import{_ as q}from"./chunks/ControlScale.zFSTL2dN.js";import{F as A}from"./chunks/index.RYxauP_R.js";import{p as P,r as M}from"./chunks/calculations.uITx2GSi.js";import{n as k,p as O,s as E,g as S}from"./chunks/colors.DQ3Nq55L.js";import"./chunks/tuner.Ezt5vaUc.js";import"./chunks/audio.MFPk3EpQ.js";import{u as F,m as H,a as R}from"./chunks/midi.JUoUGMo3.js";import"./chunks/loop.D0hV7T70.js";import"./chunks/mic.qHB2ZCa_.js";import"./chunks/midiRender.uVc9GHxZ.js";import"./chunks/Midi.6fTTQsck.js";import"./chunks/tempo.tDAToNwG.js";import"./chunks/noise.eEwbfwiD.js";import"./chunks/sequence.FcV5CLma.js";import{s as D,a as U}from"./chunks/synth.CftW3DNb.js";import{n as V}from"./chunks/theory.dOWEiwk1.js";import{i as I,j as g,o as l,c as i,a as f,g as m,t as B,w as z,_ as C,k as J,F as x,r as $,e as L,f as b,l as N,p as Z,d as G,m as K,n as Q}from"./chunks/framework.1uYGFCry.js";import"./chunks/ChromaKeys.lMf5CKvc.js";import"./chunks/index.kn6emmbE.js";import"./chunks/index.Br-81dzg.js";import"./chunks/index.dVM4alBU.js";import"./chunks/commonjsHelpers.4gQjN7DL.js";import"./chunks/Sequence.kPz-JF-q.js";import"./chunks/Loop.bmxnTff3.js";import"./chunks/UserMedia.XqLXAXtE.js";import"./chunks/Subtract.6yvEFIfU.js";import"./chunks/OnePoleFilter.5ASB6TIv.js";import"./chunks/BitCrusher.SBH4EJwJ.js";import"./chunks/Filter.CUstuK5R.js";import"./chunks/AutoPanner.gYtD10Of.js";import"./chunks/Scale.nioafpJK.js";import"./chunks/PingPongDelay.cuD3qQq0.js";import"./chunks/MonoSynth.pp_JS1sF.js";import"./chunks/index.PseKhLT9.js";const W={class:"cursor-pointer"},X=["r","stroke-width","fill"],Y={style:{"user-select":"none","pointer-events":"none"},"font-size":"22px","text-anchor":"middle",fill:"white",x:0,y:8},ee={__name:"TonalArrayNote",props:{note:{type:Object,default:()=>{}},r:{type:Number,default:10},pressed:{type:Boolean,default:!1},available:{type:Boolean,default:!1},tonic:{type:Number,default:0}},emits:["update:pressed"],setup(s){const{midi:_}=F(),t=s,a=I(!1),c=g(()=>{let v=t.tonic>t.note.pitch?3:2;return A(P(t.note.pitch,v)).toNote()});function d(){a.value=!0,O(c.value)}function h(){a.value=!1,E(c.value)}return(v,e)=>{var r,p;return l(),i("g",W,[f("circle",{class:"transition-all duration-50",r:s.r,cx:0,cy:0,"stroke-width":s.tonic==s.note.pitch?4:s.available?2:0,stroke:"white",fill:m(k)(s.note.pitch,a.value||((r=m(_).activeChroma)==null?void 0:r[s.note.pitch])>0?5:s.available?3:2,a.value||((p=m(_).activeChroma)==null?void 0:p[s.note.pitch])>0?1:.4),onMousedown:e[0]||(e[0]=n=>d()),onTouchstart:e[1]||(e[1]=n=>d()),onMouseenter:e[2]||(e[2]=n=>s.pressed?d():null),onMouseup:e[3]||(e[3]=n=>h()),onMouseleave:e[4]||(e[4]=n=>h()),onTouchend:e[5]||(e[5]=n=>h()),onTouchcancel:e[6]||(e[6]=n=>h())},null,40,X),f("text",Y,B(s.note.name),1)])}}},te=["transform","fill","stroke-width"],oe={__name:"TonalArrayTrigger",props:{pressed:Boolean,note:{type:Object,default:()=>{}},chord:{type:Object,default:()=>{}},p:{type:Number,default:0},activeSteps:{type:Array,default:()=>[]}},setup(s){const{midi:_}=F(),t=s,a=I(!1),c=g(()=>t.chord.map(p=>p+t.note.pitch)),d=g(()=>{let p=!0;return c.value.map(o=>o>11?o%12:o).forEach(o=>{t.activeSteps[o]!="1"&&(p=!1)}),p}),h=g(()=>{let p=!0;return c.value.map(o=>o>11?o%12:o).forEach(o=>{_.activeChroma[o]!="1"&&(p=!1)}),p}),v=g(()=>c.value.map(p=>A(P(p)).transpose(-12).toNote()));function e(){a.value=!0,D(v.value),H(v.value)}function r(){a.value=!1,U(v.value),R(v.value)}return z(()=>_.activeChroma,p=>{console.log(p)}),(p,n)=>(l(),i("polygon",{class:"chord-trigger",style:{"mix-blend-mode":"screen"},transform:"rotate("+60*s.p+")",fill:m(k)(s.note.pitch,a.value||h.value?5:d.value?.5:-2,d.value?1:.2),opacity:1,"stroke-width":d.value?4:.5,stroke:"hsla(0,0%,100%,0.5)",points:"0,0 80,0 80,46.188 40,69.28",onMousedown:n[0]||(n[0]=o=>e()),onMouseenter:n[1]||(n[1]=o=>s.pressed?e():null),onTouchstart:n[2]||(n[2]=o=>e()),onMouseleave:n[3]||(n[3]=o=>r()),onMouseup:n[4]||(n[4]=o=>r()),onTouchend:n[5]||(n[5]=o=>r()),onTouchcancel:n[6]||(n[6]=o=>r())},null,40,te))}},re=s=>(Z("data-v-f8cd76a7"),s=s(),G(),s),ne=re(()=>f("clipPath",{id:"grid-mask"},[f("rect",{x:-80,y:-110,width:1040,height:770,ry:20,rx:20})],-1)),se=["transform"],ae=["fill"],le=["fill"],ie={class:"chord-name","text-anchor":"middle",fill:"white",x:80,y:-40},pe={class:"chord-name","text-anchor":"middle",fill:"white",x:80,y:55},ue=["transform"],ce=["transform"],de={__name:"TonalArray",setup(s){const _=[...V].map((e,r)=>({name:e,pitch:r})),t=J({pressed:!1,r:28,dx:80,rowNum:12,colNum:12,rows:[0,9,5,2,10],bgRows:[4,0,9,5,2,10,7],chords:[[0,3,7],[0,3,8],[0,5,8],[0,5,9],[0,4,9],[0,4,7]]}),a=g(()=>{let e=S.chroma.split("").map(Number);return M(e,-S.tonic)}),c=g(()=>t.dx*2*.866),d=g(()=>{let e=[];for(let r=0;r<12;r++)e[r]=_[7*r%12];return e});function h(e){return!a.value[e]||!a.value[(e+4)%12]||!a.value[(e+7)%12]}function v(e){return!a.value[e]||!a.value[(e+3)%12]||!a.value[(e+7)%12]}return(e,r)=>{const p=oe,n=ee;return l(),i("svg",{class:"rounded-3xl min-h-80svh max-h-100svh w-full",id:"tonal-array",viewBox:"-80 -110 1040 770",version:"1.1",baseProfile:"full",xmlns:"http://www.w3.org/2000/svg",style:{"touch-action":"none"},onTouchstart:r[1]||(r[1]=N(o=>t.pressed=!0,["stop","prevent"])),onTouchend:r[2]||(r[2]=N(o=>t.pressed=!1,["stop","prevent"])),onMousedown:r[3]||(r[3]=N(o=>t.pressed=!0,["stop","prevent"])),onMouseup:r[4]||(r[4]=N(o=>t.pressed=!1,["stop","prevent"])),onMouseleave:r[5]||(r[5]=o=>t.pressed=!1)},[ne,(l(!0),i(x,null,$(t.bgRows,(o,y)=>(l(),i("g",{key:o,"clip-path":"url(#grid-mask)"},[(l(!0),i(x,null,$(m(M)(d.value,o-1).splice(0,7),(u,w)=>(l(),i("g",{key:u,transform:`translate(${(w-1)*2*t.dx+(y+1)%2*t.dx}, ${(y-1)*c.value})`},[f("polygon",{class:"chord-triangle",fill:v(u.pitch)?m(k)(u.pitch,1,.2):m(k)(u.pitch,3),points:"0,0 160,0 80,138.56"},null,8,ae),f("polygon",{class:"chord-triangle major",fill:h(u.pitch)?m(k)(u.pitch,1,.2):m(k)(u.pitch,2),points:"0,0 160,0 80,-138.56"},null,8,le),f("text",ie,B(u.name)+"M",1),f("text",pe,B(u.name)+"m",1)],8,se))),128))]))),128)),(l(!0),i(x,null,$(t.rows,(o,y)=>(l(),i("g",{class:"cursor-crosshair",key:y},[(l(!0),i(x,null,$(m(M)(d.value,o).splice(0,7),(u,w)=>(l(),i("g",{key:u,transform:`translate(${w*2*t.dx+y%2*t.dx}, ${y*c.value})`},[(l(!0),i(x,null,$(t.chords,(T,j)=>(l(),L(p,{key:j,"active-steps":a.value,chord:T,p:j,note:u,pressed:t.pressed},null,8,["active-steps","chord","p","note","pressed"]))),128))],8,ue))),128))]))),128)),(l(!0),i(x,null,$(t.rows,(o,y)=>(l(),i("g",{key:y},[(l(!0),i(x,null,$(m(M)(d.value,o).splice(0,6),(u,w)=>(l(),i("g",{key:w,transform:"translate("+(w*2*t.dx+y%2*t.dx)+","+y*c.value+")"},[b(n,{pressed:t.pressed,"onUpdate:pressed":r[0]||(r[0]=T=>t.pressed=T),available:!!a.value[u.pitch],tonic:m(S).tonic,note:u,r:t.r},null,8,["pressed","available","tonic","note","r"])],8,ce))),128))]))),128))],32)}}},me=C(de,[["__scopeId","data-v-f8cd76a7"]]),ve={class:"flex flex-col gap-4"},fe={class:"fullscreen-container rounded-3xl",id:"screen"},he={__name:"TonalSpace",setup(s){return(_,t)=>{const a=me,c=q;return l(),i("div",ve,[f("div",fe,[b(a)]),b(c)])}}},ye=C(he,[["__scopeId","data-v-d4fc29ac"]]),tt=JSON.parse('{"title":"Tonal array","description":"Harmonic table note layout - symmetrical hexagonal pattern of interval sequences","frontmatter":{"title":"Tonal array","description":"Harmonic table note layout - symmetrical hexagonal pattern of interval sequences","cover":"array.png","date":"2022-02-01T00:00:00.000Z","layout":"app"},"headers":[],"relativePath":"practice/chord/array/index.md","filePath":"practice/chord/array/index.md","lastUpdated":1702998731000}'),_e={name:"practice/chord/array/index.md"},ge=f("p",null,[f("a",{href:"https://en.wikipedia.org/wiki/Harmonic_table_note_layout",target:"_blank",rel:"noreferrer"},"wiki")],-1);function xe(s,_,t,a,c,d){const h=ye,v=K("client-only");return l(),i("div",null,[b(v,null,{default:Q(()=>[b(h)]),_:1}),ge])}const ot=C(_e,[["render",xe]]);export{tt as __pageData,ot as default};
