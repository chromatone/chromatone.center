import{_ as Z}from"./chunks/keys.b7c61165.js";import{_ as R,j as v,l as K,o as i,c as m,F as S,r as N,w as Q,A as W,a as c,u as e,v as G,t as x,y as X,h as Y,E as ee,d as q,G as te,q as A,p as oe,i as se,D as re,z as ae}from"./chunks/framework.38382cbc.js";import{r as U,g as f,i as le}from"./chunks/calculations.65ee336d.js";import{c as T,g as a,n as $}from"./chunks/colors.3c2dadc4.js";import{s as B}from"./chunks/index.b30cd6d2.js";import"./chunks/index.86652af6.js";import{n as ne}from"./chunks/index.f044f4e9.js";import{a as J,n as g,b as I,c as D}from"./chunks/theory.61e5aadb.js";import{F as ce}from"./chunks/index.cccf7ef0.js";import{e as V,a as ie,b as me}from"./chunks/midi.7a56e39e.js";import{b as F,s as ue,a as de}from"./chunks/synth.a764a61c.js";import{c as pe}from"./chunks/index.df57de88.js";import{b as H}from"./chunks/index.7369dcc4.js";import"./chunks/index.654bd828.js";import"./chunks/index.703b580e.js";import"./chunks/index.655b65ef.js";import"./chunks/commonjsHelpers.de833af9.js";import"./chunks/audio.99c2cd8f.js";import"./chunks/Scale.f9a07a23.js";import"./chunks/Subtract.e7604129.js";import"./chunks/PingPongDelay.c4f30333.js";import"./chunks/AutoPanner.8eb7afba.js";import"./chunks/MonoSynth.3cdcc469.js";import"./chunks/Filter.e19ab36f.js";const fe={class:"max-h-3xl w-full transition-all duration-400 ease-in-out",version:"1.1",baseProfile:"full",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",style:{"user-select":"none"}},he=["stroke","opacity","x1","y1","x2","y2"],ve=["opacity","onClick"],ye=["cx","cy","opacity","fill"],_e=["fill","x","y"],xe=["fill","stroke"],ge=["fill"],Ce=["fill"],be=["fill"],ke=["stroke","x1","y1","x2","y2"],we={__name:"circle",props:{chroma:{type:String,default:"100101000110"},scaleChroma:{type:String,default:"100011010001"}},emits:["update:chroma","clearScale"],setup(u,{emit:d}){const h=u,C=v(()=>T(h.chroma,a.tonic)),z=v(()=>J.get(h.chroma)),O=v(()=>{let s=U(h.scaleChroma.split(""),-a.tonic),r=[],t=0,l=0;return s.forEach((k,w)=>{var L;w>0&&k=="1"&&(t++,r[t]=[((L=r[t-1])==null?void 0:L[1])||0,w],l=w)}),r.length>0&&r.push([l,0]),r}),p=K(!1);function M(s){let r=(24+Number(s)-a.tonic)%12;if(p.value){a.tonic=Number(s),p.value=!1,E();return}if(y(s,h.chroma[r]=="1"?1:0),Number(s)!=a.tonic){let t=h.chroma+"";t[r]=="0"?t=j(t,r,1):t=j(t,r,0),d("update:chroma",t)}else p.value?(a.tonic=r,p.value=!1):p.value=!0}function j(s,r,t){return s.substring(0,r)+t+s.substring(r+1)}function b(s){return le(h.chroma,a.tonic,s)}function P(s){return b(s%12)?$(s%12):g[s].length!=2?"hsla(0,0%,90%,1)":"hsla(0,0%,10%,1)"}function y(s=0,r=0){a.tonic>0&&s<a.tonic&&(s=s+12),s=s+12*r;let t=ce(s+57,"midi");V(t.toNote()),F(t)}const n=v(()=>{let s=U(h.chroma,-a.tonic),t=g.map((l,k)=>{let w=4;return k+9<a.tonic&&(w=5),l+w}).filter((l,k)=>{if(s[k]=="1")return!0});return ne.sortedNames(t)});function E(){n.value.forEach(s=>{V(s)}),ee(()=>{n.value.forEach((s,r)=>{F(s,"8n",`+${r/3}`)}),F(n.value,"4n",`+${(n.value.length+1)/3}`)})}function o(){n.value.forEach(s=>{ie(s)}),ue(n.value)}function _(){n.value.forEach(s=>{me(s)}),de(n.value)}return(s,r)=>(i(),m("svg",fe,[(i(!0),m(S,null,N(u.chroma.split(""),(t,l)=>(i(),m("g",{key:l},[Q(c("line",{class:"line",stroke:e($)(e(a).tonic+l),"stroke-linecap":"round","stroke-width":"10",style:{"mix-blend-mode":"multiply"},opacity:t?.5:0,x1:e(f)(e(a).tonic).x,y1:e(f)(e(a).tonic).y,x2:e(f)(e(a).tonic+l).x,y2:e(f)(e(a).tonic+l).y},null,8,he),[[W,t=="1"]])]))),128)),(i(!0),m(S,null,N(u.chroma.split(""),(t,l)=>(i(),m("g",{class:"around",key:l,style:{cursor:"pointer"},opacity:b(l)?1:.3,onClick:k=>M(l)},[c("circle",{class:"note",style:G([{"transform-box":"fill-box","transform-origin":"center center"},{transform:`scale(${e(a).tonic==l?2.6:b(l)?1.62:1}`}]),cx:e(f)(l).x,cy:e(f)(l).y,r:"5",opacity:e(a).tonic==l&&p.value?.5:1,fill:P(l)},null,12,ye),c("text",{fill:e(g)[l].length==2?"hsla(0,0%,0%,0.8)":"hsla(0,0%,100%,0.9)","font-family":"Commissioner, sans-serif","font-size":"4px","text-anchor":"middle","dominant-baseline":"middle",x:e(f)(l).x,y:e(f)(l).y+.5},x(e(g)[l]),9,_e)],8,ve))),128)),c("g",{class:"cursor-pointer",onMousedown:r[0]||(r[0]=t=>o()),onTouchstart:r[1]||(r[1]=X(t=>o(),["prevent","stop"])),onTouchend:r[2]||(r[2]=t=>_()),onTouchcancel:r[3]||(r[3]=t=>_()),onMouseup:r[4]||(r[4]=t=>_()),onMouseleave:r[5]||(r[5]=t=>_())},[c("circle",{cx:50,cy:49,r:12,"stroke-width":2,"stroke-opacity":.6,fill:C.value.lch,stroke:C.value.hsl},null,8,xe),c("text",{fill:e($)(e(a).tonic),x:"50",y:"50","font-weight":"bold","font-size":"8px","font-family":"Commissioner, sans-serif","text-anchor":"middle","dominant-baseline":"middle"},x(e(g)[e(a).tonic])+x(z.value.empty?"":z.value.aliases[0]),9,ge)],32),c("text",{fill:e($)(e(a).tonic),x:"50",y:"58","font-weight":"normal","font-size":"4px","font-family":"Commissioner, sans-serif","text-anchor":"middle","dominant-baseline":"middle"},x(e(I).get(u.chroma).empty?"":e(I).get(u.chroma).name),9,Ce),e(I).get(u.scaleChroma).empty?Y("",!0):(i(),m("text",{key:0,fill:e($)(e(a).tonic),x:"50",y:"63","font-weight":"normal","font-size":"3px","font-family":"Commissioner, sans-serif","text-anchor":"middle","dominant-baseline":"middle",onClick:r[6]||(r[6]=t=>s.$emit("clearScale"))},x(e(I).get(u.scaleChroma).empty?"":e(I).get(u.scaleChroma).name)+" Ã—",9,be)),(i(!0),m(S,null,N(O.value,(t,l)=>(i(),m("line",{class:"line",key:l,stroke:e($)(t==null?void 0:t[1]),"stroke-linecap":"round","stroke-width":"0.5",x1:e(f)(t==null?void 0:t[0],12,30).x,y1:e(f)(t==null?void 0:t[0],12,30).y,x2:e(f)(t==null?void 0:t[1],12,30).x,y2:e(f)(t==null?void 0:t[1],12,30).y,opacity:"0.5"},null,8,ke))),128))]))}},$e=R(we,[["__scopeId","data-v-0a7bbb4e"]]);const Se=u=>(oe("data-v-7e40dfc3"),u=u(),se(),u),Ne={class:"fullscreen-container rounded-3xl",id:"screen"},Ee={class:"relative w-full m-auto"},Ie={class:"max-w-60ch m-auto flex flex-col items-center"},Te={class:"flex flex-col p-2"},ze={class:"flex flex-wrap mx-auto justify-center"},Oe=["onClick"],je={class:"flex flex-wrap justify-center"},qe=["onClick"],Me={class:"flex flex-wrap justify-center"},Pe=Se(()=>c("div",{class:"min-w-full text-center my-4"},[c("div",{class:"mx-auto w-auto text-sm border-b-1 border-current"},"It may be the root chord in these scales:")],-1)),Ae=["onClick"],Be={__name:"index",setup(u){const d=H("chroma-chroma",D[0].chroma),h=["Intervals","Triads","Tetrads","Pentads","Hexads","Heptads"],C=v(()=>{let y=[];for(let n=0;n<6;n++)y[n]=D.filter(E=>E.intervals.length===n+2);return y}),z=v(()=>J.get(d.value)),O=v(()=>pe.chordScales(z.value.aliases[0])||[]),p=H("scale",O.value[0]);function M(){p.value=""}const j=v(()=>B.get(p.value).chroma),b=v(()=>d.value.split("").reduce((y,n)=>Number(y)+Number(n))),P=v(()=>D.filter(y=>y.intervals.length===b.value));return(y,n)=>{const E=Z;return i(),m("div",Ne,[c("div",Ee,[q($e,{id:"chroma-compass",chroma:e(d),"onUpdate:chroma":n[0]||(n[0]=o=>te(d)?d.value=o:null),"scale-chroma":j.value,onClearScale:n[1]||(n[1]=o=>M())},null,8,["chroma","scale-chroma"])]),c("div",Ie,[q(E,{class:"m-auto",pitch:e(a).tonic,"onUpdate:pitch":n[2]||(n[2]=o=>e(a).tonic=o),chroma:e(d)},null,8,["pitch","chroma"]),c("div",Te,[c("div",ze,[(i(),m(S,null,N(h,(o,_)=>c("div",{class:A(["chord-group",{active:_+2==b.value}]),key:o,onClick:s=>d.value=C.value[_][0].chroma},x(o),11,Oe)),64))]),c("div",je,[(i(!0),m(S,null,N(P.value,o=>(i(),m("div",{class:A(["chord",{active:(o==null?void 0:o.chroma)==e(d)}]),key:o==null?void 0:o.aliases[0],style:G({color:(o==null?void 0:o.chroma)==e(d)?"white":e(T)(o.chroma,e(a).tonic).hsl,backgroundColor:(o==null?void 0:o.chroma)==e(d)?e(T)(o.chroma,e(a).tonic).hsl:""}),onClick:_=>d.value=o.chroma},x(e(g)[e(a).tonic]+(o==null?void 0:o.aliases[0])),15,qe))),128))]),c("div",Me,[Pe,(i(!0),m(S,null,N(O.value,o=>(i(),m("div",{class:A(["chord",{active:e(p)==o}]),key:o,style:G({color:e(p)==o?"white":e(T)(e(B).get(o).chroma,e(a).tonic).hsl,backgroundColor:e(p)==o?e(T)(e(B).get(o).chroma,e(a).tonic).hsl:""}),onClick:_=>p.value=o},x(e(g)[e(a).tonic])+" "+x(o),15,Ae))),128))])])])])}}},De=R(Be,[["__scopeId","data-v-7e40dfc3"]]),ut=JSON.parse('{"title":"Compass","description":"Explore any combination of 12 tone equal temperament pitches","frontmatter":{"title":"Compass","description":"Explore any combination of 12 tone equal temperament pitches","cover":"compass.svg","date":"2021-04-20T00:00:00.000Z"},"headers":[],"relativePath":"practice/chroma/compass/index.md","filePath":"practice/chroma/compass/index.md","lastUpdated":1676883357000}'),Fe={name:"practice/chroma/compass/index.md"},dt=Object.assign(Fe,{setup(u){return(d,h)=>{const C=re("client-only");return i(),m("div",null,[q(C,null,{default:ae(()=>[q(De)]),_:1})])}}});export{ut as __pageData,dt as default};
