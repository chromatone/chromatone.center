import{_ as K}from"./chunks/keys.da6b4081.js";import{_ as J,j as v,l as Z,o as i,c as m,F as S,r as N,v as Q,C as W,a as c,u as e,y as D,t as x,A as X,h as Y,K as ee,J as U,d as B,L as te,x as q,p as oe,i as se,G as ae,B as re}from"./chunks/framework.f75e5dc4.js";import{r as V,g as f,i as le}from"./chunks/calculations.65ee336d.js";import{c as E,g as r,n as w}from"./chunks/colors.6e70028c.js";import{s as A}from"./chunks/index.140cffd8.js";import"./chunks/index.be7eb4a8.js";import{n as ne}from"./chunks/index.9f9b4fe3.js";import{a as R,n as g,b as T,c as F}from"./chunks/theory.dec16ed9.js";import{F as ce}from"./chunks/index.cccf7ef0.js";import{e as H,a as ie,b as me}from"./chunks/midi.ee496394.js";import{b as L,s as ue,a as de}from"./chunks/synth.ffb45e01.js";import{c as pe}from"./chunks/index.cc2149a0.js";import"./chunks/index.654bd828.js";import"./chunks/index.de966dde.js";import"./chunks/commonjsHelpers.de833af9.js";import"./chunks/audio.2835df43.js";import"./chunks/Scale.f9a07a23.js";import"./chunks/Subtract.e7604129.js";import"./chunks/PingPongDelay.0ce05937.js";import"./chunks/AutoPanner.5498cf00.js";import"./chunks/MonoSynth.3cdcc469.js";import"./chunks/Filter.e19ab36f.js";const fe={class:"max-h-3xl w-full transition-all duration-400 ease-in-out",version:"1.1",baseProfile:"full",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",style:{"user-select":"none"}},he=["stroke","opacity","x1","y1","x2","y2"],ve=["opacity","onClick"],ye=["cx","cy","opacity","fill"],_e=["fill","x","y"],xe=["fill","stroke"],ge=["fill"],Ce=["fill"],be=["fill"],ke=["stroke","x1","y1","x2","y2"],$e={__name:"circle",props:{chroma:{type:String,default:"100101000110"},scaleChroma:{type:String,default:"100011010001"}},emits:["update:chroma","clearScale"],setup(u,{emit:d}){const h=u,C=v(()=>E(h.chroma,r.tonic)),O=v(()=>R.get(h.chroma)),z=v(()=>{let s=V(h.scaleChroma.split(""),-r.tonic),a=[],t=0,l=0;return s.forEach((k,$)=>{var G;$>0&&k=="1"&&(t++,a[t]=[((G=a[t-1])==null?void 0:G[1])||0,$],l=$)}),a.length>0&&a.push([l,0]),a}),p=Z(!1);function M(s){let a=(24+Number(s)-r.tonic)%12;if(p.value){r.tonic=Number(s),p.value=!1,I();return}if(y(s,h.chroma[a]=="1"?1:0),Number(s)!=r.tonic){let t=h.chroma+"";t[a]=="0"?t=j(t,a,1):t=j(t,a,0),d("update:chroma",t)}else p.value?(r.tonic=a,p.value=!1):p.value=!0}function j(s,a,t){return s.substring(0,a)+t+s.substring(a+1)}function b(s){return le(h.chroma,r.tonic,s)}function P(s){return b(s%12)?w(s%12):g[s].length!=2?"hsla(0,0%,90%,1)":"hsla(0,0%,10%,1)"}function y(s=0,a=0){r.tonic>0&&s<r.tonic&&(s=s+12),s=s+12*a;let t=ce(s+57,"midi");H(t.toNote()),L(t)}const n=v(()=>{let s=V(h.chroma,-r.tonic),t=g.map((l,k)=>{let $=4;return k+9<r.tonic&&($=5),l+$}).filter((l,k)=>{if(s[k]=="1")return!0});return ne.sortedNames(t)});function I(){n.value.forEach(s=>{H(s)}),ee(()=>{n.value.forEach((s,a)=>{L(s,"8n",`+${a/3}`)}),L(n.value,"4n",`+${(n.value.length+1)/3}`)})}function o(){n.value.forEach(s=>{ie(s)}),ue(n.value)}function _(){n.value.forEach(s=>{me(s)}),de(n.value)}return(s,a)=>(i(),m("svg",fe,[(i(!0),m(S,null,N(u.chroma.split(""),(t,l)=>(i(),m("g",{key:l},[Q(c("line",{class:"line",stroke:e(w)(e(r).tonic+l),"stroke-linecap":"round","stroke-width":"10",style:{"mix-blend-mode":"multiply"},opacity:t?.5:0,x1:e(f)(e(r).tonic).x,y1:e(f)(e(r).tonic).y,x2:e(f)(e(r).tonic+l).x,y2:e(f)(e(r).tonic+l).y},null,8,he),[[W,t=="1"]])]))),128)),(i(!0),m(S,null,N(u.chroma.split(""),(t,l)=>(i(),m("g",{class:"around",key:l,style:{cursor:"pointer"},opacity:b(l)?1:.3,onClick:k=>M(l)},[c("circle",{class:"note",style:D([{"transform-box":"fill-box","transform-origin":"center center"},{transform:`scale(${e(r).tonic==l?2.6:b(l)?1.62:1}`}]),cx:e(f)(l).x,cy:e(f)(l).y,r:"5",opacity:e(r).tonic==l&&p.value?.5:1,fill:P(l)},null,12,ye),c("text",{fill:e(g)[l].length==2?"hsla(0,0%,0%,0.8)":"hsla(0,0%,100%,0.9)","font-family":"Commissioner, sans-serif","font-size":"4px","text-anchor":"middle","dominant-baseline":"middle",x:e(f)(l).x,y:e(f)(l).y+.5},x(e(g)[l]),9,_e)],8,ve))),128)),c("g",{class:"cursor-pointer",onMousedown:a[0]||(a[0]=t=>o()),onTouchstart:a[1]||(a[1]=X(t=>o(),["prevent","stop"])),onTouchend:a[2]||(a[2]=t=>_()),onTouchcancel:a[3]||(a[3]=t=>_()),onMouseup:a[4]||(a[4]=t=>_()),onMouseleave:a[5]||(a[5]=t=>_())},[c("circle",{cx:50,cy:49,r:12,"stroke-width":2,"stroke-opacity":.6,fill:C.value.lch,stroke:C.value.hsl},null,8,xe),c("text",{fill:e(w)(e(r).tonic),x:"50",y:"50","font-weight":"bold","font-size":"8px","font-family":"Commissioner, sans-serif","text-anchor":"middle","dominant-baseline":"middle"},x(e(g)[e(r).tonic])+x(O.value.empty?"":O.value.aliases[0]),9,ge)],32),c("text",{fill:e(w)(e(r).tonic),x:"50",y:"58","font-weight":"normal","font-size":"4px","font-family":"Commissioner, sans-serif","text-anchor":"middle","dominant-baseline":"middle"},x(e(T).get(u.chroma).empty?"":e(T).get(u.chroma).name),9,Ce),e(T).get(u.scaleChroma).empty?Y("",!0):(i(),m("text",{key:0,fill:e(w)(e(r).tonic),x:"50",y:"63","font-weight":"normal","font-size":"3px","font-family":"Commissioner, sans-serif","text-anchor":"middle","dominant-baseline":"middle",onClick:a[6]||(a[6]=t=>s.$emit("clearScale"))},x(e(T).get(u.scaleChroma).empty?"":e(T).get(u.scaleChroma).name)+" Ã—",9,be)),(i(!0),m(S,null,N(z.value,(t,l)=>(i(),m("line",{class:"line",key:l,stroke:e(w)(t==null?void 0:t[1]),"stroke-linecap":"round","stroke-width":"0.5",x1:e(f)(t==null?void 0:t[0],12,30).x,y1:e(f)(t==null?void 0:t[0],12,30).y,x2:e(f)(t==null?void 0:t[1],12,30).x,y2:e(f)(t==null?void 0:t[1],12,30).y,opacity:"0.5"},null,8,ke))),128))]))}},we=J($e,[["__scopeId","data-v-0a7bbb4e"]]);const Se=u=>(oe("data-v-7e40dfc3"),u=u(),se(),u),Ne={class:"fullscreen-container rounded-3xl",id:"screen"},Ie={class:"relative w-full m-auto"},Te={class:"max-w-60ch m-auto flex flex-col items-center"},Ee={class:"flex flex-col p-2"},Oe={class:"flex flex-wrap mx-auto justify-center"},ze=["onClick"],je={class:"flex flex-wrap justify-center"},Be=["onClick"],Me={class:"flex flex-wrap justify-center"},Pe=Se(()=>c("div",{class:"min-w-full text-center my-4"},[c("div",{class:"mx-auto w-auto text-sm border-b-1 border-current"},"It may be the root chord in these scales:")],-1)),qe=["onClick"],Ae={__name:"index",setup(u){const d=U("chroma-chroma",F[0].chroma),h=["Intervals","Triads","Tetrads","Pentads","Hexads","Heptads"],C=v(()=>{let y=[];for(let n=0;n<6;n++)y[n]=F.filter(I=>I.intervals.length===n+2);return y}),O=v(()=>R.get(d.value)),z=v(()=>pe.chordScales(O.value.aliases[0])||[]),p=U("scale",z.value[0]);function M(){p.value=""}const j=v(()=>A.get(p.value).chroma),b=v(()=>d.value.split("").reduce((y,n)=>Number(y)+Number(n))),P=v(()=>F.filter(y=>y.intervals.length===b.value));return(y,n)=>{const I=K;return i(),m("div",Ne,[c("div",Ie,[B(we,{id:"chroma-compass",chroma:e(d),"onUpdate:chroma":n[0]||(n[0]=o=>te(d)?d.value=o:null),"scale-chroma":j.value,onClearScale:n[1]||(n[1]=o=>M())},null,8,["chroma","scale-chroma"])]),c("div",Te,[B(I,{class:"m-auto",pitch:e(r).tonic,"onUpdate:pitch":n[2]||(n[2]=o=>e(r).tonic=o),chroma:e(d)},null,8,["pitch","chroma"]),c("div",Ee,[c("div",Oe,[(i(),m(S,null,N(h,(o,_)=>c("div",{class:q(["chord-group",{active:_+2==b.value}]),key:o,onClick:s=>d.value=C.value[_][0].chroma},x(o),11,ze)),64))]),c("div",je,[(i(!0),m(S,null,N(P.value,o=>(i(),m("div",{class:q(["chord",{active:(o==null?void 0:o.chroma)==e(d)}]),key:o==null?void 0:o.aliases[0],style:D({color:(o==null?void 0:o.chroma)==e(d)?"white":e(E)(o.chroma,e(r).tonic).hsl,backgroundColor:(o==null?void 0:o.chroma)==e(d)?e(E)(o.chroma,e(r).tonic).hsl:""}),onClick:_=>d.value=o.chroma},x(e(g)[e(r).tonic]+(o==null?void 0:o.aliases[0])),15,Be))),128))]),c("div",Me,[Pe,(i(!0),m(S,null,N(z.value,o=>(i(),m("div",{class:q(["chord",{active:e(p)==o}]),key:o,style:D({color:e(p)==o?"white":e(E)(e(A).get(o).chroma,e(r).tonic).hsl,backgroundColor:e(p)==o?e(E)(e(A).get(o).chroma,e(r).tonic).hsl:""}),onClick:_=>p.value=o},x(e(g)[e(r).tonic])+" "+x(o),15,qe))),128))])])])])}}},Fe=J(Ae,[["__scopeId","data-v-7e40dfc3"]]),it=JSON.parse('{"title":"Compass","description":"Explore any combination of 12 tone equal temperament pitches","frontmatter":{"title":"Compass","description":"Explore any combination of 12 tone equal temperament pitches","cover":"compass.svg","date":"2021-04-20T00:00:00.000Z"},"headers":[],"relativePath":"practice/chroma/compass/index.md","filePath":"practice/chroma/compass/index.md","lastUpdated":1676883357000}'),Le={name:"practice/chroma/compass/index.md"},mt=Object.assign(Le,{setup(u){return(d,h)=>{const C=ae("client-only");return i(),m("div",null,[B(C,null,{default:re(()=>[B(Fe)]),_:1})])}}});export{it as __pageData,mt as default};
