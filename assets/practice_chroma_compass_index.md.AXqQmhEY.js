import{_ as Z}from"./chunks/ChromaKeys.GVc4DN9x.js";import{_ as V,j as x,i as Q,o as i,c as m,F as N,r as I,y as W,J as X,a as l,g as t,A as U,t as C,l as Y,b as tt,K as et,v as H,f as j,L as ot,z as B,p as st,d as at,m as rt,n as nt}from"./chunks/framework.KnxPB1sj.js";import{r as J,g as f,i as lt}from"./chunks/calculations.uITx2GSi.js";import{c as M,g as r,n as S}from"./chunks/colors.hHBI9fPI.js";import{s as F}from"./chunks/index.bnjSkgpl.js";import"./chunks/index._4u9I4xi.js";import{n as ct}from"./chunks/index.QyW-2vQe.js";import{a as K,n as k,b as O,c as L}from"./chunks/theory.c9f85u7m.js";import{F as it}from"./chunks/index.RYxauP_R.js";import{f as R,m as mt,a as ut}from"./chunks/midi.91UwWBqe.js";import{b as D,s as dt,a as pt}from"./chunks/synth.TVJKhjDp.js";import{c as ft}from"./chunks/index.ZvtJWS8m.js";import"./chunks/index.kn6emmbE.js";import"./chunks/commonjsHelpers.4gQjN7DL.js";import"./chunks/audio.pG3RnClx.js";import"./chunks/Scale.nioafpJK.js";import"./chunks/Subtract.6yvEFIfU.js";import"./chunks/PingPongDelay.a3-runAV.js";import"./chunks/AutoPanner.02Sltg0b.js";import"./chunks/MonoSynth.pp_JS1sF.js";import"./chunks/Filter.CUstuK5R.js";const ht={class:"max-h-3xl w-full transition-all duration-400 ease-in-out",version:"1.1",baseProfile:"full",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",style:{"user-select":"none"}},vt=["stroke","opacity","x1","y1","x2","y2"],yt=["opacity","onClick"],xt=["cx","cy","opacity","fill"],_t=["fill","x","y"],gt=["fill","stroke"],Ct=["fill"],kt=["fill"],$t=["fill"],bt=["stroke","x1","y1","x2","y2"],wt={__name:"ChromaCompassCircle",props:{chroma:{type:String,default:"100101000110"},scaleChroma:{type:String,default:"100011010001"}},emits:["update:chroma","clearScale"],setup(u,{emit:d}){const h=u,P=d,T=x(()=>M(h.chroma,r.tonic)),$=x(()=>K.get(h.chroma)),v=x(()=>{let s=J(h.scaleChroma.split(""),-r.tonic),a=[],e=0,n=0;return s.forEach((b,w)=>{var G;w>0&&b=="1"&&(e++,a[e]=[((G=a[e-1])==null?void 0:G[1])||0,w],n=w)}),a.length>0&&a.push([n,0]),a}),y=Q(!1);function q(s){let a=(24+Number(s)-r.tonic)%12;if(y.value){r.tonic=Number(s),y.value=!1,A();return}if(c(s,h.chroma[a]=="1"?1:0),Number(s)!=r.tonic){let e=h.chroma+"";e[a]=="0"?e=E(e,a,1):e=E(e,a,0),P("update:chroma",e)}else y.value?(r.tonic=a,y.value=!1):y.value=!0}function E(s,a,e){return s.substring(0,a)+e+s.substring(a+1)}function z(s){return lt(h.chroma,r.tonic,s)}function _(s){return z(s%12)?S(s%12):k[s].length!=2?"hsla(0,0%,90%,1)":"hsla(0,0%,10%,1)"}function c(s=0,a=0){r.tonic>0&&s<r.tonic&&(s=s+12),s=s+12*a;let e=it(s+57,"midi");R(e.toNote()),D(e)}const p=x(()=>{let s=J(h.chroma,-r.tonic),e=k.map((n,b)=>{let w=4;return b+9<r.tonic&&(w=5),n+w}).filter((n,b)=>{if(s[b]=="1")return!0});return ct.sortedNames(e)});function A(){p.value.forEach(s=>{R(s)}),et(()=>{p.value.forEach((s,a)=>{D(s,"8n",`+${a/3}`)}),D(p.value,"4n",`+${(p.value.length+1)/3}`)})}function o(){p.value.forEach(s=>{mt(s)}),dt(p.value)}function g(){p.value.forEach(s=>{ut(s)}),pt(p.value)}return(s,a)=>(i(),m("svg",ht,[(i(!0),m(N,null,I(u.chroma.split(""),(e,n)=>(i(),m("g",{key:n},[W(l("line",{class:"line",stroke:t(S)(t(r).tonic+n),"stroke-linecap":"round","stroke-width":"10",style:{"mix-blend-mode":"multiply"},opacity:e?.5:0,x1:t(f)(t(r).tonic).x,y1:t(f)(t(r).tonic).y,x2:t(f)(t(r).tonic+n).x,y2:t(f)(t(r).tonic+n).y},null,8,vt),[[X,e=="1"]])]))),128)),(i(!0),m(N,null,I(u.chroma.split(""),(e,n)=>(i(),m("g",{class:"around",key:n,style:{cursor:"pointer"},opacity:z(n)?1:.3,onClick:b=>q(n)},[l("circle",{class:"note",style:U([{"transform-box":"fill-box","transform-origin":"center center"},{transform:`scale(${t(r).tonic==n?2.6:z(n)?1.62:1}`}]),cx:t(f)(n).x,cy:t(f)(n).y,r:"5",opacity:t(r).tonic==n&&y.value?.5:1,fill:_(n)},null,12,xt),l("text",{fill:t(k)[n].length==2?"hsla(0,0%,0%,0.8)":"hsla(0,0%,100%,0.9)","font-family":"Commissioner, sans-serif","font-size":"4px","text-anchor":"middle","dominant-baseline":"middle",x:t(f)(n).x,y:t(f)(n).y+.5},C(t(k)[n]),9,_t)],8,yt))),128)),l("g",{class:"cursor-pointer",onMousedown:a[0]||(a[0]=e=>o()),onTouchstart:a[1]||(a[1]=Y(e=>o(),["prevent","stop"])),onTouchend:a[2]||(a[2]=e=>g()),onTouchcancel:a[3]||(a[3]=e=>g()),onMouseup:a[4]||(a[4]=e=>g()),onMouseleave:a[5]||(a[5]=e=>g())},[l("circle",{cx:50,cy:49,r:12,"stroke-width":2,"stroke-opacity":.6,fill:T.value.lch,stroke:T.value.hsl},null,8,gt),l("text",{fill:t(S)(t(r).tonic),x:"50",y:"50","font-weight":"bold","font-size":"8px","font-family":"Commissioner, sans-serif","text-anchor":"middle","dominant-baseline":"middle"},C(t(k)[t(r).tonic])+C($.value.empty?"":$.value.aliases[0]),9,Ct)],32),l("text",{fill:t(S)(t(r).tonic),x:"50",y:"58","font-weight":"normal","font-size":"4px","font-family":"Commissioner, sans-serif","text-anchor":"middle","dominant-baseline":"middle"},C(t(O).get(u.chroma).empty?"":t(O).get(u.chroma).name),9,kt),t(O).get(u.scaleChroma).empty?tt("",!0):(i(),m("text",{key:0,fill:t(S)(t(r).tonic),x:"50",y:"63","font-weight":"normal","font-size":"3px","font-family":"Commissioner, sans-serif","text-anchor":"middle","dominant-baseline":"middle",onClick:a[6]||(a[6]=e=>s.$emit("clearScale"))},C(t(O).get(u.scaleChroma).empty?"":t(O).get(u.scaleChroma).name)+" Ã—",9,$t)),(i(!0),m(N,null,I(v.value,(e,n)=>(i(),m("line",{class:"line",key:n,stroke:t(S)(e==null?void 0:e[1]),"stroke-linecap":"round","stroke-width":"0.5",x1:t(f)(e==null?void 0:e[0],12,30).x,y1:t(f)(e==null?void 0:e[0],12,30).y,x2:t(f)(e==null?void 0:e[1],12,30).x,y2:t(f)(e==null?void 0:e[1],12,30).y,opacity:"0.5"},null,8,bt))),128))]))}},St=V(wt,[["__scopeId","data-v-e6e810b1"]]),Nt=u=>(st("data-v-e28ebf60"),u=u(),at(),u),It={class:"fullscreen-container rounded-3xl",id:"screen"},Tt={class:"relative w-full m-auto"},Et={class:"max-w-60ch m-auto flex flex-col items-center"},zt={class:"flex flex-col p-2"},Ot={class:"flex flex-wrap mx-auto justify-center"},Mt=["onClick"],Pt={class:"flex flex-wrap justify-center"},jt=["onClick"],qt={class:"flex flex-wrap justify-center"},At=Nt(()=>l("div",{class:"min-w-full text-center my-4"},[l("div",{class:"mx-auto w-auto text-sm border-b-1 border-current"},"It may be the root chord in these scales:")],-1)),Bt=["onClick"],Ft={__name:"ChromaCompass",setup(u){const d=H("chroma-chroma",L[0].chroma),h=["Intervals","Triads","Tetrads","Pentads","Hexads","Heptads"],P=x(()=>{let _=[];for(let c=0;c<6;c++)_[c]=L.filter(p=>p.intervals.length===c+2);return _}),T=x(()=>K.get(d.value)),$=x(()=>ft.chordScales(T.value.aliases[0])||[]),v=H("scale",$.value[0]);function y(){v.value=""}const q=x(()=>F.get(v.value).chroma),E=x(()=>d.value.split("").reduce((_,c)=>Number(_)+Number(c))),z=x(()=>L.filter(_=>_.intervals.length===E.value));return(_,c)=>{const p=St,A=Z;return i(),m("div",It,[l("div",Tt,[j(p,{id:"chroma-compass",chroma:t(d),"onUpdate:chroma":c[0]||(c[0]=o=>ot(d)?d.value=o:null),"scale-chroma":q.value,onClearScale:c[1]||(c[1]=o=>y())},null,8,["chroma","scale-chroma"])]),l("div",Et,[j(A,{class:"m-auto",pitch:t(r).tonic,"onUpdate:pitch":c[2]||(c[2]=o=>t(r).tonic=o),chroma:t(d)},null,8,["pitch","chroma"]),l("div",zt,[l("div",Ot,[(i(),m(N,null,I(h,(o,g)=>l("div",{class:B(["chord-group",{active:g+2==E.value}]),key:o,onClick:s=>d.value=P.value[g][0].chroma},C(o),11,Mt)),64))]),l("div",Pt,[(i(!0),m(N,null,I(z.value,o=>(i(),m("div",{class:B(["chord",{active:(o==null?void 0:o.chroma)==t(d)}]),key:o==null?void 0:o.aliases[0],style:U({color:(o==null?void 0:o.chroma)==t(d)?"white":t(M)(o.chroma,t(r).tonic).hsl,backgroundColor:(o==null?void 0:o.chroma)==t(d)?t(M)(o.chroma,t(r).tonic).hsl:""}),onClick:g=>d.value=o.chroma},C(t(k)[t(r).tonic]+(o==null?void 0:o.aliases[0])),15,jt))),128))]),l("div",qt,[At,(i(!0),m(N,null,I($.value,o=>(i(),m("div",{class:B(["chord",{active:t(v)==o}]),key:o,style:U({color:t(v)==o?"white":t(M)(t(F).get(o).chroma,t(r).tonic).hsl,backgroundColor:t(v)==o?t(M)(t(F).get(o).chroma,t(r).tonic).hsl:""}),onClick:g=>v.value=o},C(t(k)[t(r).tonic])+" "+C(o),15,Bt))),128))])])])])}}},Lt=V(Ft,[["__scopeId","data-v-e28ebf60"]]),me=JSON.parse('{"title":"Compass","description":"Explore any combination of 12 tone equal temperament pitches","frontmatter":{"title":"Compass","description":"Explore any combination of 12 tone equal temperament pitches","cover":"compass.svg","date":"2021-04-20T00:00:00.000Z","layout":"app"},"headers":[],"relativePath":"practice/chroma/compass/index.md","filePath":"practice/chroma/compass/index.md","lastUpdated":1705129326000}'),Dt={name:"practice/chroma/compass/index.md"};function Ut(u,d,h,P,T,$){const v=Lt,y=nt("client-only");return i(),m("div",null,[j(y,null,{default:rt(()=>[j(v)]),_:1})])}const ue=V(Dt,[["render",Ut]]);export{me as __pageData,ue as default};
