import{d as q,g as a,a as F,r as D,n as $,l as L,m as f,c as k,S,o as Z,q as J,v as R,x as Y,y as K,z as Q,e as U,u as W,A as P,_ as X}from"./chunks/theme.DLCqlVTm.js";import{_ as B,M as y,r as ee,q as m,f as u,s as d,t as te,F as T,Y as z,Z as oe,u as e,v as G,z as v,a3 as se,n as ae,$ as ne,l as I,C as le,y as V,i as re,j as ie}from"./chunks/framework.CxSiiyCs.js";const ce={class:"max-h-3xl w-full transition-all duration-400 ease-in-out",version:"1.1",baseProfile:"full",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",style:{"user-select":"none"}},me=["stroke","opacity","x1","y1","x2","y2"],ue=["opacity","onClick"],de=["cx","cy","opacity","fill"],fe=["fill","x","y"],he=["fill","stroke"],pe=["fill"],ye=["fill"],ve=["fill"],xe=["stroke","x1","y1","x2","y2"],_e={__name:"ChromaCompassCircle",props:{chroma:{type:String,default:"100101000110"},scaleChroma:{type:String,default:"100011010001"}},emits:["update:chroma","clearScale"],setup(h,{emit:i}){const p=h,E=i,x=y(()=>q(p.chroma,a.tonic)),b=y(()=>F(p.chroma)),c=y(()=>{let t=D(p.scaleChroma.split(""),-a.tonic),o=[],s=0,n=0;return t.forEach((C,g)=>{g>0&&C=="1"&&(s++,o[s]=[o[s-1]?.[1]||0,g],n=g)}),o.length>0&&o.push([n,0]),o}),l=ee(!1);function w(t){let o=(24+Number(t)-a.tonic)%12;if(l.value){a.tonic=Number(t),l.value=!1,H();return}if(j(t,p.chroma[o]=="1"?1:0),Number(t)!=a.tonic){let s=p.chroma+"";s[o]=="0"?s=M(s,o,1):s=M(s,o,0),E("update:chroma",s)}else l.value?(a.tonic=o,l.value=!1):l.value=!0}function M(t,o,s){return t.substring(0,o)+s+t.substring(o+1)}function r(t){return Z(p.chroma,a.tonic,t)}function N(t){return r(t%12)?k(t%12):$[t].length!=2?"hsla(0,0%,90%,1)":"hsla(0,0%,10%,1)"}function j(t=0,o=0){a.tonic>0&&t<a.tonic&&(t=t+12),t=t+12*o,U(t+57)}const _=y(()=>{let t=D(p.chroma,-a.tonic),s=$.map((n,C)=>{let g=4;return C+9<a.tonic&&(g=5),n+g}).filter((n,C)=>{if(t[C]=="1")return!0});return L(s)});function H(){_.value.forEach(t=>{Q(t)}),ae(()=>{_.value.forEach((t,o)=>{setTimeout(()=>{U(t)},200)})})}function A(){_.value.forEach(t=>{Y(t)}),K(_.value)}function O(){_.value.forEach(t=>{J(t)}),R(_.value)}return(t,o)=>(u(),m("svg",ce,[(u(!0),m(T,null,z(h.chroma.split(""),(s,n)=>(u(),m("g",{key:n},[oe(d("line",{class:"line",stroke:e(k)(e(a).tonic+n),"stroke-linecap":"round","stroke-width":"10",style:{"mix-blend-mode":"multiply"},opacity:s?.5:0,x1:e(f)(e(a).tonic).x,y1:e(f)(e(a).tonic).y,x2:e(f)(e(a).tonic+n).x,y2:e(f)(e(a).tonic+n).y},null,8,me),[[ne,s=="1"]])]))),128)),(u(!0),m(T,null,z(h.chroma.split(""),(s,n)=>(u(),m("g",{class:"around",key:n,style:{cursor:"pointer"},opacity:r(n)?1:.3,onClick:C=>w(n)},[d("circle",{class:"note",style:G([{"transform-box":"fill-box","transform-origin":"center center"},{transform:`scale(${e(a).tonic==n?2.6:r(n)?1.62:1}`}]),cx:e(f)(n).x,cy:e(f)(n).y,r:"5",opacity:e(a).tonic==n&&l.value?.5:1,fill:N(n)},null,12,de),d("text",{fill:e($)[n].length==2?"hsla(0,0%,0%,0.8)":"hsla(0,0%,100%,0.9)","font-family":"Commissioner, sans-serif","font-size":"4px","text-anchor":"middle","dominant-baseline":"middle",x:e(f)(n).x,y:e(f)(n).y+.5},v(e($)[n]),9,fe)],8,ue))),128)),d("g",{class:"cursor-pointer",onMousedown:o[0]||(o[0]=s=>A()),onTouchstart:o[1]||(o[1]=se(s=>A(),["prevent","stop"])),onTouchend:o[2]||(o[2]=s=>O()),onTouchcancel:o[3]||(o[3]=s=>O()),onMouseup:o[4]||(o[4]=s=>O()),onMouseleave:o[5]||(o[5]=s=>O())},[d("circle",{cx:50,cy:49,r:12,"stroke-width":2,"stroke-opacity":.6,fill:x.value.lch,stroke:x.value.hsl},null,8,he),d("text",{fill:e(k)(e(a).tonic),x:"50",y:"50","font-weight":"bold","font-size":"8px","font-family":"Commissioner, sans-serif","text-anchor":"middle","dominant-baseline":"middle"},v(e($)[e(a).tonic])+v(b.value.empty?"":b.value.aliases[0]),9,pe)],32),d("text",{fill:e(k)(e(a).tonic),x:"50",y:"58","font-weight":"normal","font-size":"4px","font-family":"Commissioner, sans-serif","text-anchor":"middle","dominant-baseline":"middle"},v(e(S).get(h.chroma).empty?"":e(S).get(h.chroma).name),9,ye),e(S).get(h.scaleChroma).empty?te("",!0):(u(),m("text",{key:0,fill:e(k)(e(a).tonic),x:"50",y:"63","font-weight":"normal","font-size":"3px","font-family":"Commissioner, sans-serif","text-anchor":"middle","dominant-baseline":"middle",onClick:o[6]||(o[6]=s=>t.$emit("clearScale"))},v(e(S).get(h.scaleChroma).empty?"":e(S).get(h.scaleChroma).name)+" Ã—",9,ve)),(u(!0),m(T,null,z(c.value,(s,n)=>(u(),m("line",{class:"line",key:n,stroke:e(k)(s?.[1]),"stroke-linecap":"round","stroke-width":"0.5",x1:e(f)(s?.[0],12,30).x,y1:e(f)(s?.[0],12,30).y,x2:e(f)(s?.[1],12,30).x,y2:e(f)(s?.[1],12,30).y,opacity:"0.5"},null,8,xe))),128))]))}},Ce=B(_e,[["__scopeId","data-v-f53fcbb8"]]),ge={class:"fullscreen-container rounded-3xl",id:"screen"},ke={class:"relative w-full m-auto"},$e={class:"max-w-60ch m-auto flex flex-col items-center"},be={class:"flex flex-col p-2"},we={class:"flex flex-wrap mx-auto justify-center"},Ne=["onClick"],Se={class:"flex flex-wrap justify-center"},Te=["onClick"],ze={__name:"ChromaCompass",setup(h){const i=W("chroma-chroma",P()[0].chroma),p=["Intervals","Triads","Tetrads","Pentads","Hexads","Heptads"],E=y(()=>{let c=[];for(let l=0;l<6;l++)c[l]=P().filter(w=>w.intervals.length===l+2);return c});y(()=>F(i.value));const x=y(()=>i.value.split("").reduce((c,l)=>Number(c)+Number(l))),b=y(()=>P().filter(c=>c.intervals.length===x.value));return(c,l)=>{const w=Ce,M=X;return u(),m("div",ge,[d("div",ke,[I(w,{id:"chroma-compass",chroma:e(i),"onUpdate:chroma":l[0]||(l[0]=r=>le(i)?i.value=r:null),"scale-chroma":c.scaleChroma,onClearScale:l[1]||(l[1]=r=>c.clearScale())},null,8,["chroma","scale-chroma"])]),d("div",$e,[I(M,{class:"m-auto",pitch:e(a).tonic,"onUpdate:pitch":l[2]||(l[2]=r=>e(a).tonic=r),chroma:e(i)},null,8,["pitch","chroma"]),d("div",be,[d("div",we,[(u(),m(T,null,z(p,(r,N)=>d("div",{class:V(["chord-group",{active:N+2==x.value}]),key:r,onClick:j=>i.value=E.value[N][0].chroma},v(r),11,Ne)),64))]),d("div",Se,[(u(!0),m(T,null,z(b.value,r=>(u(),m("div",{class:V(["chord",{active:r?.chroma==e(i)}]),key:r?.aliases[0],style:G({color:r?.chroma==e(i)?"white":e(q)(r.chroma,e(a).tonic).hsl,backgroundColor:r?.chroma==e(i)?e(q)(r.chroma,e(a).tonic).hsl:""}),onClick:N=>i.value=r.chroma},v(e($)[e(a).tonic]+r?.aliases[0]),15,Te))),128))])])])])}}},Ee=B(ze,[["__scopeId","data-v-23de7539"]]),qe=JSON.parse('{"title":"Compass","description":"Explore any combination of 12 tone equal temperament pitches","frontmatter":{"title":"Compass","description":"Explore any combination of 12 tone equal temperament pitches","cover":"compass.svg","date":"2021-04-20T00:00:00.000Z","layout":"app"},"headers":[],"relativePath":"practice/chroma/compass/index.md","filePath":"practice/chroma/compass/index.md","lastUpdated":1761369785000}'),Me={name:"practice/chroma/compass/index.md"};function Oe(h,i,p,E,x,b){const c=Ee,l=re("client-only");return u(),m("div",null,[I(l,null,{default:ie(()=>[I(c)]),_:1})])}const Be=B(Me,[["render",Oe]]);export{qe as __pageData,Be as default};
