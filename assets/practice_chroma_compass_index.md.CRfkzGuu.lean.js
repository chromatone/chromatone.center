import{_ as K}from"./chunks/ChromaKeys.Efc7H_nr.js";import{D as j,c as x,r as Q,E as i,F as u,V as N,W as I,N as W,Z as X,G as l,C as e,L as V,I as C,Q as Y,T as ee,n as te,u as U,O as M,al as oe,P as D,J as se,K as ae,X as re,a4 as ne}from"./chunks/framework.BtWLkna7.js";import{B as P,g as r,C as Z,r as J,e as k,k as le,n as S,h,E as z,G as ce,F as ie,t as R,v as F,m as ue,b as me,d as de,c as fe,H as G,A as he,I as L}from"./chunks/theme.D0kT8rkE.js";const pe={class:"max-h-3xl w-full transition-all duration-400 ease-in-out",version:"1.1",baseProfile:"full",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",style:{"user-select":"none"}},ve=["stroke","opacity","x1","y1","x2","y2"],ye=["opacity","onClick"],xe=["cx","cy","opacity","fill"],_e=["fill","x","y"],ge=["fill","stroke"],Ce=["fill"],ke=["fill"],$e=["fill"],be=["stroke","x1","y1","x2","y2"],we={__name:"ChromaCompassCircle",props:{chroma:{type:String,default:"100101000110"},scaleChroma:{type:String,default:"100011010001"}},emits:["update:chroma","clearScale"],setup(m,{emit:d}){const p=m,B=d,E=x(()=>P(p.chroma,r.tonic)),$=x(()=>Z.get(p.chroma)),v=x(()=>{let s=J(p.scaleChroma.split(""),-r.tonic),a=[],t=0,n=0;return s.forEach((b,w)=>{var H;w>0&&b=="1"&&(t++,a[t]=[((H=a[t-1])==null?void 0:H[1])||0,w],n=w)}),a.length>0&&a.push([n,0]),a}),y=Q(!1);function q(s){let a=(24+Number(s)-r.tonic)%12;if(y.value){r.tonic=Number(s),y.value=!1,A();return}if(c(s,p.chroma[a]=="1"?1:0),Number(s)!=r.tonic){let t=p.chroma+"";t[a]=="0"?t=T(t,a,1):t=T(t,a,0),B("update:chroma",t)}else y.value?(r.tonic=a,y.value=!1):y.value=!0}function T(s,a,t){return s.substring(0,a)+t+s.substring(a+1)}function O(s){return ce(p.chroma,r.tonic,s)}function _(s){return O(s%12)?S(s%12):k[s].length!=2?"hsla(0,0%,90%,1)":"hsla(0,0%,10%,1)"}function c(s=0,a=0){r.tonic>0&&s<r.tonic&&(s=s+12),s=s+12*a;let t=ie(s+57,"midi");R(t.toNote()),F(t)}const f=x(()=>{let s=J(p.chroma,-r.tonic),t=k.map((n,b)=>{let w=4;return b+9<r.tonic&&(w=5),n+w}).filter((n,b)=>{if(s[b]=="1")return!0});return le.sortedNames(t)});function A(){f.value.forEach(s=>{R(s)}),te(()=>{f.value.forEach((s,a)=>{F(s,"8n",`+${a/3}`)}),F(f.value,"4n",`+${(f.value.length+1)/3}`)})}function o(){f.value.forEach(s=>{ue(s)}),me(f.value)}function g(){f.value.forEach(s=>{de(s)}),fe(f.value)}return(s,a)=>(i(),u("svg",pe,[(i(!0),u(N,null,I(m.chroma.split(""),(t,n)=>(i(),u("g",{key:n},[W(l("line",{class:"line",stroke:e(S)(e(r).tonic+n),"stroke-linecap":"round","stroke-width":"10",style:{"mix-blend-mode":"multiply"},opacity:t?.5:0,x1:e(h)(e(r).tonic).x,y1:e(h)(e(r).tonic).y,x2:e(h)(e(r).tonic+n).x,y2:e(h)(e(r).tonic+n).y},null,8,ve),[[X,t=="1"]])]))),128)),(i(!0),u(N,null,I(m.chroma.split(""),(t,n)=>(i(),u("g",{class:"around",key:n,style:{cursor:"pointer"},opacity:O(n)?1:.3,onClick:b=>q(n)},[l("circle",{class:"note",style:V([{"transform-box":"fill-box","transform-origin":"center center"},{transform:`scale(${e(r).tonic==n?2.6:O(n)?1.62:1}`}]),cx:e(h)(n).x,cy:e(h)(n).y,r:"5",opacity:e(r).tonic==n&&y.value?.5:1,fill:_(n)},null,12,xe),l("text",{fill:e(k)[n].length==2?"hsla(0,0%,0%,0.8)":"hsla(0,0%,100%,0.9)","font-family":"Commissioner, sans-serif","font-size":"4px","text-anchor":"middle","dominant-baseline":"middle",x:e(h)(n).x,y:e(h)(n).y+.5},C(e(k)[n]),9,_e)],8,ye))),128)),l("g",{class:"cursor-pointer",onMousedown:a[0]||(a[0]=t=>o()),onTouchstart:a[1]||(a[1]=Y(t=>o(),["prevent","stop"])),onTouchend:a[2]||(a[2]=t=>g()),onTouchcancel:a[3]||(a[3]=t=>g()),onMouseup:a[4]||(a[4]=t=>g()),onMouseleave:a[5]||(a[5]=t=>g())},[l("circle",{cx:50,cy:49,r:12,"stroke-width":2,"stroke-opacity":.6,fill:E.value.lch,stroke:E.value.hsl},null,8,ge),l("text",{fill:e(S)(e(r).tonic),x:"50",y:"50","font-weight":"bold","font-size":"8px","font-family":"Commissioner, sans-serif","text-anchor":"middle","dominant-baseline":"middle"},C(e(k)[e(r).tonic])+C($.value.empty?"":$.value.aliases[0]),9,Ce)],32),l("text",{fill:e(S)(e(r).tonic),x:"50",y:"58","font-weight":"normal","font-size":"4px","font-family":"Commissioner, sans-serif","text-anchor":"middle","dominant-baseline":"middle"},C(e(z).get(m.chroma).empty?"":e(z).get(m.chroma).name),9,ke),e(z).get(m.scaleChroma).empty?ee("",!0):(i(),u("text",{key:0,fill:e(S)(e(r).tonic),x:"50",y:"63","font-weight":"normal","font-size":"3px","font-family":"Commissioner, sans-serif","text-anchor":"middle","dominant-baseline":"middle",onClick:a[6]||(a[6]=t=>s.$emit("clearScale"))},C(e(z).get(m.scaleChroma).empty?"":e(z).get(m.scaleChroma).name)+" Ã—",9,$e)),(i(!0),u(N,null,I(v.value,(t,n)=>(i(),u("line",{class:"line",key:n,stroke:e(S)(t==null?void 0:t[1]),"stroke-linecap":"round","stroke-width":"0.5",x1:e(h)(t==null?void 0:t[0],12,30).x,y1:e(h)(t==null?void 0:t[0],12,30).y,x2:e(h)(t==null?void 0:t[1],12,30).x,y2:e(h)(t==null?void 0:t[1],12,30).y,opacity:"0.5"},null,8,be))),128))]))}},Se=j(we,[["__scopeId","data-v-e6e810b1"]]),Ne=m=>(se("data-v-e28ebf60"),m=m(),ae(),m),Ie={class:"fullscreen-container rounded-3xl",id:"screen"},Ee={class:"relative w-full m-auto"},Te={class:"max-w-60ch m-auto flex flex-col items-center"},Oe={class:"flex flex-col p-2"},ze={class:"flex flex-wrap mx-auto justify-center"},Pe=["onClick"],Be={class:"flex flex-wrap justify-center"},Me=["onClick"],qe={class:"flex flex-wrap justify-center"},Ae=Ne(()=>l("div",{class:"min-w-full text-center my-4"},[l("div",{class:"mx-auto w-auto text-sm border-b-1 border-current"},"It may be the root chord in these scales:")],-1)),De=["onClick"],Fe={__name:"ChromaCompass",setup(m){const d=U("chroma-chroma",G[0].chroma),p=["Intervals","Triads","Tetrads","Pentads","Hexads","Heptads"],B=x(()=>{let _=[];for(let c=0;c<6;c++)_[c]=G.filter(f=>f.intervals.length===c+2);return _}),E=x(()=>Z.get(d.value)),$=x(()=>he.chordScales(E.value.aliases[0])||[]),v=U("scale",$.value[0]);function y(){v.value=""}const q=x(()=>L.get(v.value).chroma),T=x(()=>d.value.split("").reduce((_,c)=>Number(_)+Number(c))),O=x(()=>G.filter(_=>_.intervals.length===T.value));return(_,c)=>{const f=Se,A=K;return i(),u("div",Ie,[l("div",Ee,[M(f,{id:"chroma-compass",chroma:e(d),"onUpdate:chroma":c[0]||(c[0]=o=>oe(d)?d.value=o:null),"scale-chroma":q.value,onClearScale:c[1]||(c[1]=o=>y())},null,8,["chroma","scale-chroma"])]),l("div",Te,[M(A,{class:"m-auto",pitch:e(r).tonic,"onUpdate:pitch":c[2]||(c[2]=o=>e(r).tonic=o),chroma:e(d)},null,8,["pitch","chroma"]),l("div",Oe,[l("div",ze,[(i(),u(N,null,I(p,(o,g)=>l("div",{class:D(["chord-group",{active:g+2==T.value}]),key:o,onClick:s=>d.value=B.value[g][0].chroma},C(o),11,Pe)),64))]),l("div",Be,[(i(!0),u(N,null,I(O.value,o=>(i(),u("div",{class:D(["chord",{active:(o==null?void 0:o.chroma)==e(d)}]),key:o==null?void 0:o.aliases[0],style:V({color:(o==null?void 0:o.chroma)==e(d)?"white":e(P)(o.chroma,e(r).tonic).hsl,backgroundColor:(o==null?void 0:o.chroma)==e(d)?e(P)(o.chroma,e(r).tonic).hsl:""}),onClick:g=>d.value=o.chroma},C(e(k)[e(r).tonic]+(o==null?void 0:o.aliases[0])),15,Me))),128))]),l("div",qe,[Ae,(i(!0),u(N,null,I($.value,o=>(i(),u("div",{class:D(["chord",{active:e(v)==o}]),key:o,style:V({color:e(v)==o?"white":e(P)(e(L).get(o).chroma,e(r).tonic).hsl,backgroundColor:e(v)==o?e(P)(e(L).get(o).chroma,e(r).tonic).hsl:""}),onClick:g=>v.value=o},C(e(k)[e(r).tonic])+" "+C(o),15,De))),128))])])])])}}},Ge=j(Fe,[["__scopeId","data-v-e28ebf60"]]),Je=JSON.parse('{"title":"Compass","description":"Explore any combination of 12 tone equal temperament pitches","frontmatter":{"title":"Compass","description":"Explore any combination of 12 tone equal temperament pitches","cover":"compass.svg","date":"2021-04-20T00:00:00.000Z","layout":"app"},"headers":[],"relativePath":"practice/chroma/compass/index.md","filePath":"practice/chroma/compass/index.md","lastUpdated":1711871197000}'),Le={name:"practice/chroma/compass/index.md"};function Ve(m,d,p,B,E,$){const v=Ge,y=ne("client-only");return i(),u("div",null,[M(y,null,{default:re(()=>[M(v)]),_:1})])}const Re=j(Le,[["render",Ve]]);export{Je as __pageData,Re as default};
