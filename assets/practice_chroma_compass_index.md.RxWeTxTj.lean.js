import{q as M,g as r,l as O,r as V,e as $,k as R,n as N,h,o as k,N as K,F as W,x as J,y as F,m as X,b as Z,d as Q,c as Y,i as ee,D as te}from"./chunks/theme.C2LY6ZKr.js";import{q as H,c as x,r as oe,v as i,x as u,F as E,A as I,B as se,C as ae,z as l,D as e,G,E as C,X as re,H as ne,n as le,u as L,W as D,al as ce,y as j,J as ie,K as ue,M as me,a4 as de}from"./chunks/framework.ivEh5B39.js";const fe={class:"max-h-3xl w-full transition-all duration-400 ease-in-out",version:"1.1",baseProfile:"full",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",style:{"user-select":"none"}},he=["stroke","opacity","x1","y1","x2","y2"],pe=["opacity","onClick"],ve=["cx","cy","opacity","fill"],ye=["fill","x","y"],xe=["fill","stroke"],_e=["fill"],ge=["fill"],Ce=["fill"],ke=["stroke","x1","y1","x2","y2"],$e={__name:"ChromaCompassCircle",props:{chroma:{type:String,default:"100101000110"},scaleChroma:{type:String,default:"100011010001"}},emits:["update:chroma","clearScale"],setup(m,{emit:d}){const p=m,B=d,z=x(()=>M(p.chroma,r.tonic)),b=x(()=>O.get(p.chroma)),v=x(()=>{let s=V(p.scaleChroma.split(""),-r.tonic),a=[],t=0,n=0;return s.forEach((w,S)=>{var U;S>0&&w=="1"&&(t++,a[t]=[((U=a[t-1])==null?void 0:U[1])||0,S],n=S)}),a.length>0&&a.push([n,0]),a}),y=oe(!1);function P(s){let a=(24+Number(s)-r.tonic)%12;if(y.value){r.tonic=Number(s),y.value=!1,A();return}if(c(s,p.chroma[a]=="1"?1:0),Number(s)!=r.tonic){let t=p.chroma+"";t[a]=="0"?t=T(t,a,1):t=T(t,a,0),B("update:chroma",t)}else y.value?(r.tonic=a,y.value=!1):y.value=!0}function T(s,a,t){return s.substring(0,a)+t+s.substring(a+1)}function q(s){return K(p.chroma,r.tonic,s)}function _(s){return q(s%12)?N(s%12):$[s].length!=2?"hsla(0,0%,90%,1)":"hsla(0,0%,10%,1)"}function c(s=0,a=0){r.tonic>0&&s<r.tonic&&(s=s+12),s=s+12*a;let t=W(s+57,"midi");J(t.toNote()),F(t)}const f=x(()=>{let s=V(p.chroma,-r.tonic),t=$.map((n,w)=>{let S=4;return w+9<r.tonic&&(S=5),n+S}).filter((n,w)=>{if(s[w]=="1")return!0});return R.sortedNames(t)});function A(){f.value.forEach(s=>{J(s)}),le(()=>{f.value.forEach((s,a)=>{F(s,"8n",`+${a/3}`)}),F(f.value,"4n",`+${(f.value.length+1)/3}`)})}function o(){f.value.forEach(s=>{X(s)}),Z(f.value)}function g(){f.value.forEach(s=>{Q(s)}),Y(f.value)}return(s,a)=>(i(),u("svg",fe,[(i(!0),u(E,null,I(m.chroma.split(""),(t,n)=>(i(),u("g",{key:n},[se(l("line",{class:"line",stroke:e(N)(e(r).tonic+n),"stroke-linecap":"round","stroke-width":"10",style:{"mix-blend-mode":"multiply"},opacity:t?.5:0,x1:e(h)(e(r).tonic).x,y1:e(h)(e(r).tonic).y,x2:e(h)(e(r).tonic+n).x,y2:e(h)(e(r).tonic+n).y},null,8,he),[[ae,t=="1"]])]))),128)),(i(!0),u(E,null,I(m.chroma.split(""),(t,n)=>(i(),u("g",{class:"around",key:n,style:{cursor:"pointer"},opacity:q(n)?1:.3,onClick:w=>P(n)},[l("circle",{class:"note",style:G([{"transform-box":"fill-box","transform-origin":"center center"},{transform:`scale(${e(r).tonic==n?2.6:q(n)?1.62:1}`}]),cx:e(h)(n).x,cy:e(h)(n).y,r:"5",opacity:e(r).tonic==n&&y.value?.5:1,fill:_(n)},null,12,ve),l("text",{fill:e($)[n].length==2?"hsla(0,0%,0%,0.8)":"hsla(0,0%,100%,0.9)","font-family":"Commissioner, sans-serif","font-size":"4px","text-anchor":"middle","dominant-baseline":"middle",x:e(h)(n).x,y:e(h)(n).y+.5},C(e($)[n]),9,ye)],8,pe))),128)),l("g",{class:"cursor-pointer",onMousedown:a[0]||(a[0]=t=>o()),onTouchstart:a[1]||(a[1]=re(t=>o(),["prevent","stop"])),onTouchend:a[2]||(a[2]=t=>g()),onTouchcancel:a[3]||(a[3]=t=>g()),onMouseup:a[4]||(a[4]=t=>g()),onMouseleave:a[5]||(a[5]=t=>g())},[l("circle",{cx:50,cy:49,r:12,"stroke-width":2,"stroke-opacity":.6,fill:z.value.lch,stroke:z.value.hsl},null,8,xe),l("text",{fill:e(N)(e(r).tonic),x:"50",y:"50","font-weight":"bold","font-size":"8px","font-family":"Commissioner, sans-serif","text-anchor":"middle","dominant-baseline":"middle"},C(e($)[e(r).tonic])+C(b.value.empty?"":b.value.aliases[0]),9,_e)],32),l("text",{fill:e(N)(e(r).tonic),x:"50",y:"58","font-weight":"normal","font-size":"4px","font-family":"Commissioner, sans-serif","text-anchor":"middle","dominant-baseline":"middle"},C(e(k).get(m.chroma).empty?"":e(k).get(m.chroma).name),9,ge),e(k).get(m.scaleChroma).empty?ne("",!0):(i(),u("text",{key:0,fill:e(N)(e(r).tonic),x:"50",y:"63","font-weight":"normal","font-size":"3px","font-family":"Commissioner, sans-serif","text-anchor":"middle","dominant-baseline":"middle",onClick:a[6]||(a[6]=t=>s.$emit("clearScale"))},C(e(k).get(m.scaleChroma).empty?"":e(k).get(m.scaleChroma).name)+" Ã—",9,Ce)),(i(!0),u(E,null,I(v.value,(t,n)=>(i(),u("line",{class:"line",key:n,stroke:e(N)(t==null?void 0:t[1]),"stroke-linecap":"round","stroke-width":"0.5",x1:e(h)(t==null?void 0:t[0],12,30).x,y1:e(h)(t==null?void 0:t[0],12,30).y,x2:e(h)(t==null?void 0:t[1],12,30).x,y2:e(h)(t==null?void 0:t[1],12,30).y,opacity:"0.5"},null,8,ke))),128))]))}},be=H($e,[["__scopeId","data-v-e0236b9d"]]),we=m=>(ie("data-v-7fb8f60f"),m=m(),ue(),m),Se={class:"fullscreen-container rounded-3xl",id:"screen"},Ne={class:"relative w-full m-auto"},Ee={class:"max-w-60ch m-auto flex flex-col items-center"},Ie={class:"flex flex-col p-2"},ze={class:"flex flex-wrap mx-auto justify-center"},Te=["onClick"],qe={class:"flex flex-wrap justify-center"},Me=["onClick"],Oe={class:"flex flex-wrap justify-center"},Be=we(()=>l("div",{class:"min-w-full text-center my-4"},[l("div",{class:"mx-auto w-auto text-sm border-b-1 border-current"},"It may be the root chord in these scales:")],-1)),De=["onClick"],Pe={__name:"ChromaCompass",setup(m){const d=L("chroma-chroma",O.all()[0].chroma),p=["Intervals","Triads","Tetrads","Pentads","Hexads","Heptads"],B=x(()=>{let _=[];for(let c=0;c<6;c++)_[c]=O.all().filter(f=>f.intervals.length===c+2);return _}),z=x(()=>O.get(d.value)),b=x(()=>ee.chordScales(z.value.aliases[0])||[]),v=L("scale",b.value[0]);function y(){v.value=""}const P=x(()=>k.get(v.value).chroma),T=x(()=>d.value.split("").reduce((_,c)=>Number(_)+Number(c))),q=x(()=>O.all().filter(_=>_.intervals.length===T.value));return(_,c)=>{const f=be,A=te;return i(),u("div",Se,[l("div",Ne,[D(f,{id:"chroma-compass",chroma:e(d),"onUpdate:chroma":c[0]||(c[0]=o=>ce(d)?d.value=o:null),"scale-chroma":P.value,onClearScale:c[1]||(c[1]=o=>y())},null,8,["chroma","scale-chroma"])]),l("div",Ee,[D(A,{class:"m-auto",pitch:e(r).tonic,"onUpdate:pitch":c[2]||(c[2]=o=>e(r).tonic=o),chroma:e(d)},null,8,["pitch","chroma"]),l("div",Ie,[l("div",ze,[(i(),u(E,null,I(p,(o,g)=>l("div",{class:j(["chord-group",{active:g+2==T.value}]),key:o,onClick:s=>d.value=B.value[g][0].chroma},C(o),11,Te)),64))]),l("div",qe,[(i(!0),u(E,null,I(q.value,o=>(i(),u("div",{class:j(["chord",{active:(o==null?void 0:o.chroma)==e(d)}]),key:o==null?void 0:o.aliases[0],style:G({color:(o==null?void 0:o.chroma)==e(d)?"white":e(M)(o.chroma,e(r).tonic).hsl,backgroundColor:(o==null?void 0:o.chroma)==e(d)?e(M)(o.chroma,e(r).tonic).hsl:""}),onClick:g=>d.value=o.chroma},C(e($)[e(r).tonic]+(o==null?void 0:o.aliases[0])),15,Me))),128))]),l("div",Oe,[Be,(i(!0),u(E,null,I(b.value,o=>(i(),u("div",{class:j(["chord",{active:e(v)==o}]),key:o,style:G({color:e(v)==o?"white":e(M)(e(k).get(o).chroma,e(r).tonic).hsl,backgroundColor:e(v)==o?e(M)(e(k).get(o).chroma,e(r).tonic).hsl:""}),onClick:g=>v.value=o},C(e($)[e(r).tonic])+" "+C(o),15,De))),128))])])])])}}},Ae=H(Pe,[["__scopeId","data-v-7fb8f60f"]]),Ue=JSON.parse('{"title":"Compass","description":"Explore any combination of 12 tone equal temperament pitches","frontmatter":{"title":"Compass","description":"Explore any combination of 12 tone equal temperament pitches","cover":"compass.svg","date":"2021-04-20T00:00:00.000Z","layout":"app"},"headers":[],"relativePath":"practice/chroma/compass/index.md","filePath":"practice/chroma/compass/index.md","lastUpdated":1716980405000}'),Fe={name:"practice/chroma/compass/index.md"};function je(m,d,p,B,z,b){const v=Ae,y=de("client-only");return i(),u("div",null,[D(y,null,{default:me(()=>[D(v)]),_:1})])}const Ve=H(Fe,[["render",je]]);export{Ue as __pageData,Ve as default};
