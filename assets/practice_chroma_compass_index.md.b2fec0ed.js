import{_ as K}from"./chunks/ChromaKeys.6e26641a.js";import{_ as U,i as v,k as Z,o as m,c as u,F as $,r as w,n as Q,A as W,a as c,h as e,v as D,t as y,y as X,d as Y,K as ee,I as G,g as P,L as te,q as B,p as oe,e as se,E as ae,z as re}from"./chunks/framework.cf854830.js";import{r as H,g as f,i as ne}from"./chunks/calculations.65ee336d.js";import{c as O,g as r,n as b}from"./chunks/colors.488b2121.js";import{s as F}from"./chunks/index.b30cd6d2.js";import"./chunks/index.86652af6.js";import{n as le}from"./chunks/index.c4267bd4.js";import{a as J,n as x,b as z,c as L}from"./chunks/theory.61e5aadb.js";import{F as ce}from"./chunks/index.d775f97e.js";import{e as R,a as ie,b as me}from"./chunks/midi.5076ee7a.js";import{b as j,s as ue,a as de}from"./chunks/synth.477cac72.js";import{c as pe}from"./chunks/index.eea35dd8.js";import"./chunks/index.654bd828.js";import"./chunks/commonjsHelpers.de833af9.js";import"./chunks/audio.c2db36c4.js";import"./chunks/Scale.cdda0786.js";import"./chunks/Subtract.6da8862c.js";import"./chunks/PingPongDelay.00b5370a.js";import"./chunks/AutoPanner.4ee1631b.js";import"./chunks/MonoSynth.5e8a2e13.js";import"./chunks/Filter.df668c93.js";const fe={class:"max-h-3xl w-full transition-all duration-400 ease-in-out",version:"1.1",baseProfile:"full",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",style:{"user-select":"none"}},he=["stroke","opacity","x1","y1","x2","y2"],ve=["opacity","onClick"],_e=["cx","cy","opacity","fill"],ye=["fill","x","y"],xe=["fill","stroke"],ge=["fill"],Ce=["fill"],ke=["fill"],be=["stroke","x1","y1","x2","y2"],$e={__name:"ChromaCompassCircle",props:{chroma:{type:String,default:"100101000110"},scaleChroma:{type:String,default:"100011010001"}},emits:["update:chroma","clearScale"],setup(d,{emit:p}){const h=d,S=v(()=>O(h.chroma,r.tonic)),N=v(()=>J.get(h.chroma)),I=v(()=>{let s=H(h.scaleChroma.split(""),-r.tonic),a=[],t=0,n=0;return s.forEach((C,k)=>{var V;k>0&&C=="1"&&(t++,a[t]=[((V=a[t-1])==null?void 0:V[1])||0,k],n=k)}),a.length>0&&a.push([n,0]),a}),i=Z(!1);function E(s){let a=(24+Number(s)-r.tonic)%12;if(i.value){r.tonic=Number(s),i.value=!1,T();return}if(_(s,h.chroma[a]=="1"?1:0),Number(s)!=r.tonic){let t=h.chroma+"";t[a]=="0"?t=q(t,a,1):t=q(t,a,0),p("update:chroma",t)}else i.value?(r.tonic=a,i.value=!1):i.value=!0}function q(s,a,t){return s.substring(0,a)+t+s.substring(a+1)}function g(s){return ne(h.chroma,r.tonic,s)}function A(s){return g(s%12)?b(s%12):x[s].length!=2?"hsla(0,0%,90%,1)":"hsla(0,0%,10%,1)"}function _(s=0,a=0){r.tonic>0&&s<r.tonic&&(s=s+12),s=s+12*a;let t=ce(s+57,"midi");R(t.toNote()),j(t)}const l=v(()=>{let s=H(h.chroma,-r.tonic),t=x.map((n,C)=>{let k=4;return C+9<r.tonic&&(k=5),n+k}).filter((n,C)=>{if(s[C]=="1")return!0});return le.sortedNames(t)});function T(){l.value.forEach(s=>{R(s)}),ee(()=>{l.value.forEach((s,a)=>{j(s,"8n",`+${a/3}`)}),j(l.value,"4n",`+${(l.value.length+1)/3}`)})}function M(){l.value.forEach(s=>{ie(s)}),ue(l.value)}function o(){l.value.forEach(s=>{me(s)}),de(l.value)}return(s,a)=>(m(),u("svg",fe,[(m(!0),u($,null,w(d.chroma.split(""),(t,n)=>(m(),u("g",{key:n},[Q(c("line",{class:"line",stroke:e(b)(e(r).tonic+n),"stroke-linecap":"round","stroke-width":"10",style:{"mix-blend-mode":"multiply"},opacity:t?.5:0,x1:e(f)(e(r).tonic).x,y1:e(f)(e(r).tonic).y,x2:e(f)(e(r).tonic+n).x,y2:e(f)(e(r).tonic+n).y},null,8,he),[[W,t=="1"]])]))),128)),(m(!0),u($,null,w(d.chroma.split(""),(t,n)=>(m(),u("g",{class:"around",key:n,style:{cursor:"pointer"},opacity:g(n)?1:.3,onClick:C=>E(n)},[c("circle",{class:"note",style:D([{"transform-box":"fill-box","transform-origin":"center center"},{transform:`scale(${e(r).tonic==n?2.6:g(n)?1.62:1}`}]),cx:e(f)(n).x,cy:e(f)(n).y,r:"5",opacity:e(r).tonic==n&&i.value?.5:1,fill:A(n)},null,12,_e),c("text",{fill:e(x)[n].length==2?"hsla(0,0%,0%,0.8)":"hsla(0,0%,100%,0.9)","font-family":"Commissioner, sans-serif","font-size":"4px","text-anchor":"middle","dominant-baseline":"middle",x:e(f)(n).x,y:e(f)(n).y+.5},y(e(x)[n]),9,ye)],8,ve))),128)),c("g",{class:"cursor-pointer",onMousedown:a[0]||(a[0]=t=>M()),onTouchstart:a[1]||(a[1]=X(t=>M(),["prevent","stop"])),onTouchend:a[2]||(a[2]=t=>o()),onTouchcancel:a[3]||(a[3]=t=>o()),onMouseup:a[4]||(a[4]=t=>o()),onMouseleave:a[5]||(a[5]=t=>o())},[c("circle",{cx:50,cy:49,r:12,"stroke-width":2,"stroke-opacity":.6,fill:S.value.lch,stroke:S.value.hsl},null,8,xe),c("text",{fill:e(b)(e(r).tonic),x:"50",y:"50","font-weight":"bold","font-size":"8px","font-family":"Commissioner, sans-serif","text-anchor":"middle","dominant-baseline":"middle"},y(e(x)[e(r).tonic])+y(N.value.empty?"":N.value.aliases[0]),9,ge)],32),c("text",{fill:e(b)(e(r).tonic),x:"50",y:"58","font-weight":"normal","font-size":"4px","font-family":"Commissioner, sans-serif","text-anchor":"middle","dominant-baseline":"middle"},y(e(z).get(d.chroma).empty?"":e(z).get(d.chroma).name),9,Ce),e(z).get(d.scaleChroma).empty?Y("",!0):(m(),u("text",{key:0,fill:e(b)(e(r).tonic),x:"50",y:"63","font-weight":"normal","font-size":"3px","font-family":"Commissioner, sans-serif","text-anchor":"middle","dominant-baseline":"middle",onClick:a[6]||(a[6]=t=>s.$emit("clearScale"))},y(e(z).get(d.scaleChroma).empty?"":e(z).get(d.scaleChroma).name)+" Ã—",9,ke)),(m(!0),u($,null,w(I.value,(t,n)=>(m(),u("line",{class:"line",key:n,stroke:e(b)(t==null?void 0:t[1]),"stroke-linecap":"round","stroke-width":"0.5",x1:e(f)(t==null?void 0:t[0],12,30).x,y1:e(f)(t==null?void 0:t[0],12,30).y,x2:e(f)(t==null?void 0:t[1],12,30).x,y2:e(f)(t==null?void 0:t[1],12,30).y,opacity:"0.5"},null,8,be))),128))]))}},we=U($e,[["__scopeId","data-v-e6e810b1"]]);const Se=d=>(oe("data-v-e28ebf60"),d=d(),se(),d),Ne={class:"fullscreen-container rounded-3xl",id:"screen"},Ie={class:"relative w-full m-auto"},Ee={class:"max-w-60ch m-auto flex flex-col items-center"},Te={class:"flex flex-col p-2"},ze={class:"flex flex-wrap mx-auto justify-center"},Oe=["onClick"],qe={class:"flex flex-wrap justify-center"},Me=["onClick"],Pe={class:"flex flex-wrap justify-center"},Ae=Se(()=>c("div",{class:"min-w-full text-center my-4"},[c("div",{class:"mx-auto w-auto text-sm border-b-1 border-current"},"It may be the root chord in these scales:")],-1)),Be=["onClick"],Fe={__name:"ChromaCompass",setup(d){const p=G("chroma-chroma",L[0].chroma),h=["Intervals","Triads","Tetrads","Pentads","Hexads","Heptads"],S=v(()=>{let _=[];for(let l=0;l<6;l++)_[l]=L.filter(T=>T.intervals.length===l+2);return _}),N=v(()=>J.get(p.value)),I=v(()=>pe.chordScales(N.value.aliases[0])||[]),i=G("scale",I.value[0]);function E(){i.value=""}const q=v(()=>F.get(i.value).chroma),g=v(()=>p.value.split("").reduce((_,l)=>Number(_)+Number(l))),A=v(()=>L.filter(_=>_.intervals.length===g.value));return(_,l)=>{const T=we,M=K;return m(),u("div",Ne,[c("div",Ie,[P(T,{id:"chroma-compass",chroma:e(p),"onUpdate:chroma":l[0]||(l[0]=o=>te(p)?p.value=o:null),"scale-chroma":q.value,onClearScale:l[1]||(l[1]=o=>E())},null,8,["chroma","scale-chroma"])]),c("div",Ee,[P(M,{class:"m-auto",pitch:e(r).tonic,"onUpdate:pitch":l[2]||(l[2]=o=>e(r).tonic=o),chroma:e(p)},null,8,["pitch","chroma"]),c("div",Te,[c("div",ze,[(m(),u($,null,w(h,(o,s)=>c("div",{class:B(["chord-group",{active:s+2==g.value}]),key:o,onClick:a=>p.value=S.value[s][0].chroma},y(o),11,Oe)),64))]),c("div",qe,[(m(!0),u($,null,w(A.value,o=>(m(),u("div",{class:B(["chord",{active:(o==null?void 0:o.chroma)==e(p)}]),key:o==null?void 0:o.aliases[0],style:D({color:(o==null?void 0:o.chroma)==e(p)?"white":e(O)(o.chroma,e(r).tonic).hsl,backgroundColor:(o==null?void 0:o.chroma)==e(p)?e(O)(o.chroma,e(r).tonic).hsl:""}),onClick:s=>p.value=o.chroma},y(e(x)[e(r).tonic]+(o==null?void 0:o.aliases[0])),15,Me))),128))]),c("div",Pe,[Ae,(m(!0),u($,null,w(I.value,o=>(m(),u("div",{class:B(["chord",{active:e(i)==o}]),key:o,style:D({color:e(i)==o?"white":e(O)(e(F).get(o).chroma,e(r).tonic).hsl,backgroundColor:e(i)==o?e(O)(e(F).get(o).chroma,e(r).tonic).hsl:""}),onClick:s=>i.value=o},y(e(x)[e(r).tonic])+" "+y(o),15,Be))),128))])])])])}}},Le=U(Fe,[["__scopeId","data-v-e28ebf60"]]),it=JSON.parse('{"title":"Compass","description":"Explore any combination of 12 tone equal temperament pitches","frontmatter":{"title":"Compass","description":"Explore any combination of 12 tone equal temperament pitches","cover":"compass.svg","date":"2021-04-20T00:00:00.000Z"},"headers":[],"relativePath":"practice/chroma/compass/index.md","filePath":"practice/chroma/compass/index.md","lastUpdated":1694022443000}'),je={name:"practice/chroma/compass/index.md"};function De(d,p,h,S,N,I){const i=Le,E=ae("client-only");return m(),u("div",null,[P(E,null,{default:re(()=>[P(i)]),_:1})])}const mt=U(je,[["render",De]]);export{it as __pageData,mt as default};
