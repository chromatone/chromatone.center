import{_ as Z}from"./chunks/ChromaKeys.734b9bba.js";import{_ as H,j as v,i as K,o as m,c as u,F as $,r as w,s as Q,E as W,a as c,g as e,x as G,t as y,l as X,b as Y,G as ee,f as j,H as te,v as B,p as oe,d as se,m as ae,n as re}from"./chunks/framework.88db3c26.js";import{r as U,g as f,i as ne}from"./chunks/calculations.2bac3e9a.js";import{c as O,g as r,n as b}from"./chunks/colors.71e97f2b.js";import{s as F}from"./chunks/index.edce5462.js";import"./chunks/index.28e8ae3d.js";import{n as le}from"./chunks/index.78e9bb27.js";import{a as J,n as x,b as z,c as A}from"./chunks/theory.f78bd4d6.js";import{F as ce}from"./chunks/index.e98b5e67.js";import{f as V,m as ie,a as me}from"./chunks/midi.b5556f9f.js";import{b as D,s as ue,a as de}from"./chunks/synth.9919606b.js";import{c as pe}from"./chunks/index.7a7bf9be.js";import{u as R}from"./chunks/index.70261d75.js";import"./chunks/index.654bd828.js";import"./chunks/commonjsHelpers.de833af9.js";import"./chunks/audio.e7507cf6.js";import"./chunks/Scale.b6214b1d.js";import"./chunks/Subtract.109130cb.js";import"./chunks/PingPongDelay.7799470c.js";import"./chunks/AutoPanner.fd8dabdc.js";import"./chunks/MonoSynth.c00b1270.js";import"./chunks/Filter.ca6be54c.js";const fe={class:"max-h-3xl w-full transition-all duration-400 ease-in-out",version:"1.1",baseProfile:"full",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",style:{"user-select":"none"}},he=["stroke","opacity","x1","y1","x2","y2"],ve=["opacity","onClick"],_e=["cx","cy","opacity","fill"],ye=["fill","x","y"],xe=["fill","stroke"],ge=["fill"],Ce=["fill"],ke=["fill"],be=["stroke","x1","y1","x2","y2"],$e={__name:"ChromaCompassCircle",props:{chroma:{type:String,default:"100101000110"},scaleChroma:{type:String,default:"100011010001"}},emits:["update:chroma","clearScale"],setup(d,{emit:p}){const h=d,S=v(()=>O(h.chroma,r.tonic)),N=v(()=>J.get(h.chroma)),E=v(()=>{let s=U(h.scaleChroma.split(""),-r.tonic),a=[],t=0,n=0;return s.forEach((C,k)=>{var L;k>0&&C=="1"&&(t++,a[t]=[((L=a[t-1])==null?void 0:L[1])||0,k],n=k)}),a.length>0&&a.push([n,0]),a}),i=K(!1);function I(s){let a=(24+Number(s)-r.tonic)%12;if(i.value){r.tonic=Number(s),i.value=!1,T();return}if(_(s,h.chroma[a]=="1"?1:0),Number(s)!=r.tonic){let t=h.chroma+"";t[a]=="0"?t=M(t,a,1):t=M(t,a,0),p("update:chroma",t)}else i.value?(r.tonic=a,i.value=!1):i.value=!0}function M(s,a,t){return s.substring(0,a)+t+s.substring(a+1)}function g(s){return ne(h.chroma,r.tonic,s)}function q(s){return g(s%12)?b(s%12):x[s].length!=2?"hsla(0,0%,90%,1)":"hsla(0,0%,10%,1)"}function _(s=0,a=0){r.tonic>0&&s<r.tonic&&(s=s+12),s=s+12*a;let t=ce(s+57,"midi");V(t.toNote()),D(t)}const l=v(()=>{let s=U(h.chroma,-r.tonic),t=x.map((n,C)=>{let k=4;return C+9<r.tonic&&(k=5),n+k}).filter((n,C)=>{if(s[C]=="1")return!0});return le.sortedNames(t)});function T(){l.value.forEach(s=>{V(s)}),ee(()=>{l.value.forEach((s,a)=>{D(s,"8n",`+${a/3}`)}),D(l.value,"4n",`+${(l.value.length+1)/3}`)})}function P(){l.value.forEach(s=>{ie(s)}),ue(l.value)}function o(){l.value.forEach(s=>{me(s)}),de(l.value)}return(s,a)=>(m(),u("svg",fe,[(m(!0),u($,null,w(d.chroma.split(""),(t,n)=>(m(),u("g",{key:n},[Q(c("line",{class:"line",stroke:e(b)(e(r).tonic+n),"stroke-linecap":"round","stroke-width":"10",style:{"mix-blend-mode":"multiply"},opacity:t?.5:0,x1:e(f)(e(r).tonic).x,y1:e(f)(e(r).tonic).y,x2:e(f)(e(r).tonic+n).x,y2:e(f)(e(r).tonic+n).y},null,8,he),[[W,t=="1"]])]))),128)),(m(!0),u($,null,w(d.chroma.split(""),(t,n)=>(m(),u("g",{class:"around",key:n,style:{cursor:"pointer"},opacity:g(n)?1:.3,onClick:C=>I(n)},[c("circle",{class:"note",style:G([{"transform-box":"fill-box","transform-origin":"center center"},{transform:`scale(${e(r).tonic==n?2.6:g(n)?1.62:1}`}]),cx:e(f)(n).x,cy:e(f)(n).y,r:"5",opacity:e(r).tonic==n&&i.value?.5:1,fill:q(n)},null,12,_e),c("text",{fill:e(x)[n].length==2?"hsla(0,0%,0%,0.8)":"hsla(0,0%,100%,0.9)","font-family":"Commissioner, sans-serif","font-size":"4px","text-anchor":"middle","dominant-baseline":"middle",x:e(f)(n).x,y:e(f)(n).y+.5},y(e(x)[n]),9,ye)],8,ve))),128)),c("g",{class:"cursor-pointer",onMousedown:a[0]||(a[0]=t=>P()),onTouchstart:a[1]||(a[1]=X(t=>P(),["prevent","stop"])),onTouchend:a[2]||(a[2]=t=>o()),onTouchcancel:a[3]||(a[3]=t=>o()),onMouseup:a[4]||(a[4]=t=>o()),onMouseleave:a[5]||(a[5]=t=>o())},[c("circle",{cx:50,cy:49,r:12,"stroke-width":2,"stroke-opacity":.6,fill:S.value.lch,stroke:S.value.hsl},null,8,xe),c("text",{fill:e(b)(e(r).tonic),x:"50",y:"50","font-weight":"bold","font-size":"8px","font-family":"Commissioner, sans-serif","text-anchor":"middle","dominant-baseline":"middle"},y(e(x)[e(r).tonic])+y(N.value.empty?"":N.value.aliases[0]),9,ge)],32),c("text",{fill:e(b)(e(r).tonic),x:"50",y:"58","font-weight":"normal","font-size":"4px","font-family":"Commissioner, sans-serif","text-anchor":"middle","dominant-baseline":"middle"},y(e(z).get(d.chroma).empty?"":e(z).get(d.chroma).name),9,Ce),e(z).get(d.scaleChroma).empty?Y("",!0):(m(),u("text",{key:0,fill:e(b)(e(r).tonic),x:"50",y:"63","font-weight":"normal","font-size":"3px","font-family":"Commissioner, sans-serif","text-anchor":"middle","dominant-baseline":"middle",onClick:a[6]||(a[6]=t=>s.$emit("clearScale"))},y(e(z).get(d.scaleChroma).empty?"":e(z).get(d.scaleChroma).name)+" Ã—",9,ke)),(m(!0),u($,null,w(E.value,(t,n)=>(m(),u("line",{class:"line",key:n,stroke:e(b)(t==null?void 0:t[1]),"stroke-linecap":"round","stroke-width":"0.5",x1:e(f)(t==null?void 0:t[0],12,30).x,y1:e(f)(t==null?void 0:t[0],12,30).y,x2:e(f)(t==null?void 0:t[1],12,30).x,y2:e(f)(t==null?void 0:t[1],12,30).y,opacity:"0.5"},null,8,be))),128))]))}},we=H($e,[["__scopeId","data-v-e6e810b1"]]);const Se=d=>(oe("data-v-e28ebf60"),d=d(),se(),d),Ne={class:"fullscreen-container rounded-3xl",id:"screen"},Ee={class:"relative w-full m-auto"},Ie={class:"max-w-60ch m-auto flex flex-col items-center"},Te={class:"flex flex-col p-2"},ze={class:"flex flex-wrap mx-auto justify-center"},Oe=["onClick"],Me={class:"flex flex-wrap justify-center"},Pe=["onClick"],je={class:"flex flex-wrap justify-center"},qe=Se(()=>c("div",{class:"min-w-full text-center my-4"},[c("div",{class:"mx-auto w-auto text-sm border-b-1 border-current"},"It may be the root chord in these scales:")],-1)),Be=["onClick"],Fe={__name:"ChromaCompass",setup(d){const p=R("chroma-chroma",A[0].chroma),h=["Intervals","Triads","Tetrads","Pentads","Hexads","Heptads"],S=v(()=>{let _=[];for(let l=0;l<6;l++)_[l]=A.filter(T=>T.intervals.length===l+2);return _}),N=v(()=>J.get(p.value)),E=v(()=>pe.chordScales(N.value.aliases[0])||[]),i=R("scale",E.value[0]);function I(){i.value=""}const M=v(()=>F.get(i.value).chroma),g=v(()=>p.value.split("").reduce((_,l)=>Number(_)+Number(l))),q=v(()=>A.filter(_=>_.intervals.length===g.value));return(_,l)=>{const T=we,P=Z;return m(),u("div",Ne,[c("div",Ee,[j(T,{id:"chroma-compass",chroma:e(p),"onUpdate:chroma":l[0]||(l[0]=o=>te(p)?p.value=o:null),"scale-chroma":M.value,onClearScale:l[1]||(l[1]=o=>I())},null,8,["chroma","scale-chroma"])]),c("div",Ie,[j(P,{class:"m-auto",pitch:e(r).tonic,"onUpdate:pitch":l[2]||(l[2]=o=>e(r).tonic=o),chroma:e(p)},null,8,["pitch","chroma"]),c("div",Te,[c("div",ze,[(m(),u($,null,w(h,(o,s)=>c("div",{class:B(["chord-group",{active:s+2==g.value}]),key:o,onClick:a=>p.value=S.value[s][0].chroma},y(o),11,Oe)),64))]),c("div",Me,[(m(!0),u($,null,w(q.value,o=>(m(),u("div",{class:B(["chord",{active:(o==null?void 0:o.chroma)==e(p)}]),key:o==null?void 0:o.aliases[0],style:G({color:(o==null?void 0:o.chroma)==e(p)?"white":e(O)(o.chroma,e(r).tonic).hsl,backgroundColor:(o==null?void 0:o.chroma)==e(p)?e(O)(o.chroma,e(r).tonic).hsl:""}),onClick:s=>p.value=o.chroma},y(e(x)[e(r).tonic]+(o==null?void 0:o.aliases[0])),15,Pe))),128))]),c("div",je,[qe,(m(!0),u($,null,w(E.value,o=>(m(),u("div",{class:B(["chord",{active:e(i)==o}]),key:o,style:G({color:e(i)==o?"white":e(O)(e(F).get(o).chroma,e(r).tonic).hsl,backgroundColor:e(i)==o?e(O)(e(F).get(o).chroma,e(r).tonic).hsl:""}),onClick:s=>i.value=o},y(e(x)[e(r).tonic])+" "+y(o),15,Be))),128))])])])])}}},Ae=H(Fe,[["__scopeId","data-v-e28ebf60"]]),mt=JSON.parse('{"title":"Compass","description":"Explore any combination of 12 tone equal temperament pitches","frontmatter":{"title":"Compass","description":"Explore any combination of 12 tone equal temperament pitches","cover":"compass.svg","date":"2021-04-20T00:00:00.000Z","layout":"app"},"headers":[],"relativePath":"practice/chroma/compass/index.md","filePath":"practice/chroma/compass/index.md","lastUpdated":1699514985000}'),De={name:"practice/chroma/compass/index.md"};function Ge(d,p,h,S,N,E){const i=Ae,I=ae("client-only");return m(),u("div",null,[j(I,null,{default:re(()=>[j(i)]),_:1})])}const ut=H(De,[["render",Ge]]);export{mt as __pageData,ut as default};
