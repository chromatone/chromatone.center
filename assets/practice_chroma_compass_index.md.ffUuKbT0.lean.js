import{d as M,g as n,a as j,r as G,n as $,o as L,c as k,q as f,S,t as Q,F as R,e as U,v as Y,x as Z,y as K,z as W,A as X,u as ee,B as I,_ as te}from"./chunks/theme.C1cSeBFq.js";import{_ as P,d as y,a as oe,v as m,x as u,F as T,A as E,B as se,C as ae,z as d,u as e,E as H,D as v,T as ne,G as re,n as le,Q as q,i as ie,y as V,J as ce,Y as me}from"./chunks/framework.BMHKg3V0.js";const ue={class:"max-h-3xl w-full transition-all duration-400 ease-in-out",version:"1.1",baseProfile:"full",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",style:{"user-select":"none"}},de=["stroke","opacity","x1","y1","x2","y2"],fe=["opacity","onClick"],pe=["cx","cy","opacity","fill"],he=["fill","x","y"],ye=["fill","stroke"],ve=["fill"],xe=["fill"],_e=["fill"],Ce=["stroke","x1","y1","x2","y2"],ge={__name:"ChromaCompassCircle",props:{chroma:{type:String,default:"100101000110"},scaleChroma:{type:String,default:"100011010001"}},emits:["update:chroma","clearScale"],setup(p,{emit:i}){const h=p,z=i,x=y(()=>M(h.chroma,n.tonic)),w=y(()=>j(h.chroma)),c=y(()=>{let o=G(h.scaleChroma.split(""),-n.tonic),s=[],t=0,r=0;return o.forEach((C,g)=>{var F;g>0&&C=="1"&&(t++,s[t]=[((F=s[t-1])==null?void 0:F[1])||0,g],r=g)}),s.length>0&&s.push([r,0]),s}),l=oe(!1);function b(o){let s=(24+Number(o)-n.tonic)%12;if(l.value){n.tonic=Number(o),l.value=!1,J();return}if(A(o,h.chroma[s]=="1"?1:0),Number(o)!=n.tonic){let t=h.chroma+"";t[s]=="0"?t=B(t,s,1):t=B(t,s,0),z("update:chroma",t)}else l.value?(n.tonic=s,l.value=!1):l.value=!0}function B(o,s,t){return o.substring(0,s)+t+o.substring(s+1)}function a(o){return Q(h.chroma,n.tonic,o)}function N(o){return a(o%12)?k(o%12):$[o].length!=2?"hsla(0,0%,90%,1)":"hsla(0,0%,10%,1)"}function A(o=0,s=0){n.tonic>0&&o<n.tonic&&(o=o+12),o=o+12*s;let t=R(o+57,"midi");U(t.toNote())}const _=y(()=>{let o=G(h.chroma,-n.tonic),t=$.map((r,C)=>{let g=4;return C+9<n.tonic&&(g=5),r+g}).filter((r,C)=>{if(o[C]=="1")return!0});return L(t)});function J(){_.value.forEach(o=>{Y(o)}),le(()=>{_.value.forEach((o,s)=>{setTimeout(()=>{U(o)},200)})})}function D(){_.value.forEach(o=>{Z(o)}),K(_.value)}function O(){_.value.forEach(o=>{W(o)}),X(_.value)}return(o,s)=>(m(),u("svg",ue,[(m(!0),u(T,null,E(p.chroma.split(""),(t,r)=>(m(),u("g",{key:r},[se(d("line",{class:"line",stroke:e(k)(e(n).tonic+r),"stroke-linecap":"round","stroke-width":"10",style:{"mix-blend-mode":"multiply"},opacity:t?.5:0,x1:e(f)(e(n).tonic).x,y1:e(f)(e(n).tonic).y,x2:e(f)(e(n).tonic+r).x,y2:e(f)(e(n).tonic+r).y},null,8,de),[[ae,t=="1"]])]))),128)),(m(!0),u(T,null,E(p.chroma.split(""),(t,r)=>(m(),u("g",{class:"around",key:r,style:{cursor:"pointer"},opacity:a(r)?1:.3,onClick:C=>b(r)},[d("circle",{class:"note",style:H([{"transform-box":"fill-box","transform-origin":"center center"},{transform:`scale(${e(n).tonic==r?2.6:a(r)?1.62:1}`}]),cx:e(f)(r).x,cy:e(f)(r).y,r:"5",opacity:e(n).tonic==r&&l.value?.5:1,fill:N(r)},null,12,pe),d("text",{fill:e($)[r].length==2?"hsla(0,0%,0%,0.8)":"hsla(0,0%,100%,0.9)","font-family":"Commissioner, sans-serif","font-size":"4px","text-anchor":"middle","dominant-baseline":"middle",x:e(f)(r).x,y:e(f)(r).y+.5},v(e($)[r]),9,he)],8,fe))),128)),d("g",{class:"cursor-pointer",onMousedown:s[0]||(s[0]=t=>D()),onTouchstart:s[1]||(s[1]=ne(t=>D(),["prevent","stop"])),onTouchend:s[2]||(s[2]=t=>O()),onTouchcancel:s[3]||(s[3]=t=>O()),onMouseup:s[4]||(s[4]=t=>O()),onMouseleave:s[5]||(s[5]=t=>O())},[d("circle",{cx:50,cy:49,r:12,"stroke-width":2,"stroke-opacity":.6,fill:x.value.lch,stroke:x.value.hsl},null,8,ye),d("text",{fill:e(k)(e(n).tonic),x:"50",y:"50","font-weight":"bold","font-size":"8px","font-family":"Commissioner, sans-serif","text-anchor":"middle","dominant-baseline":"middle"},v(e($)[e(n).tonic])+v(w.value.empty?"":w.value.aliases[0]),9,ve)],32),d("text",{fill:e(k)(e(n).tonic),x:"50",y:"58","font-weight":"normal","font-size":"4px","font-family":"Commissioner, sans-serif","text-anchor":"middle","dominant-baseline":"middle"},v(e(S).get(p.chroma).empty?"":e(S).get(p.chroma).name),9,xe),e(S).get(p.scaleChroma).empty?re("",!0):(m(),u("text",{key:0,fill:e(k)(e(n).tonic),x:"50",y:"63","font-weight":"normal","font-size":"3px","font-family":"Commissioner, sans-serif","text-anchor":"middle","dominant-baseline":"middle",onClick:s[6]||(s[6]=t=>o.$emit("clearScale"))},v(e(S).get(p.scaleChroma).empty?"":e(S).get(p.scaleChroma).name)+" Ã—",9,_e)),(m(!0),u(T,null,E(c.value,(t,r)=>(m(),u("line",{class:"line",key:r,stroke:e(k)(t==null?void 0:t[1]),"stroke-linecap":"round","stroke-width":"0.5",x1:e(f)(t==null?void 0:t[0],12,30).x,y1:e(f)(t==null?void 0:t[0],12,30).y,x2:e(f)(t==null?void 0:t[1],12,30).x,y2:e(f)(t==null?void 0:t[1],12,30).y,opacity:"0.5"},null,8,Ce))),128))]))}},ke=P(ge,[["__scopeId","data-v-57e9b2e7"]]),$e={class:"fullscreen-container rounded-3xl",id:"screen"},we={class:"relative w-full m-auto"},be={class:"max-w-60ch m-auto flex flex-col items-center"},Ne={class:"flex flex-col p-2"},Se={class:"flex flex-wrap mx-auto justify-center"},Te=["onClick"],Ee={class:"flex flex-wrap justify-center"},ze=["onClick"],Be={__name:"ChromaCompass",setup(p){const i=ee("chroma-chroma",I()[0].chroma),h=["Intervals","Triads","Tetrads","Pentads","Hexads","Heptads"],z=y(()=>{let c=[];for(let l=0;l<6;l++)c[l]=I().filter(b=>b.intervals.length===l+2);return c});y(()=>j(i.value));const x=y(()=>i.value.split("").reduce((c,l)=>Number(c)+Number(l))),w=y(()=>I().filter(c=>c.intervals.length===x.value));return(c,l)=>{const b=ke,B=te;return m(),u("div",$e,[d("div",we,[q(b,{id:"chroma-compass",chroma:e(i),"onUpdate:chroma":l[0]||(l[0]=a=>ie(i)?i.value=a:null),"scale-chroma":c.scaleChroma,onClearScale:l[1]||(l[1]=a=>c.clearScale())},null,8,["chroma","scale-chroma"])]),d("div",be,[q(B,{class:"m-auto",pitch:e(n).tonic,"onUpdate:pitch":l[2]||(l[2]=a=>e(n).tonic=a),chroma:e(i)},null,8,["pitch","chroma"]),d("div",Ne,[d("div",Se,[(m(),u(T,null,E(h,(a,N)=>d("div",{class:V(["chord-group",{active:N+2==x.value}]),key:a,onClick:A=>i.value=z.value[N][0].chroma},v(a),11,Te)),64))]),d("div",Ee,[(m(!0),u(T,null,E(w.value,a=>(m(),u("div",{class:V(["chord",{active:(a==null?void 0:a.chroma)==e(i)}]),key:a==null?void 0:a.aliases[0],style:H({color:(a==null?void 0:a.chroma)==e(i)?"white":e(M)(a.chroma,e(n).tonic).hsl,backgroundColor:(a==null?void 0:a.chroma)==e(i)?e(M)(a.chroma,e(n).tonic).hsl:""}),onClick:N=>i.value=a.chroma},v(e($)[e(n).tonic]+(a==null?void 0:a.aliases[0])),15,ze))),128))])])])])}}},Oe=P(Be,[["__scopeId","data-v-c9c440a4"]]),Ae=JSON.parse('{"title":"Compass","description":"Explore any combination of 12 tone equal temperament pitches","frontmatter":{"title":"Compass","description":"Explore any combination of 12 tone equal temperament pitches","cover":"compass.svg","date":"2021-04-20T00:00:00.000Z","layout":"app"},"headers":[],"relativePath":"practice/chroma/compass/index.md","filePath":"practice/chroma/compass/index.md","lastUpdated":1725366960000}'),qe={name:"practice/chroma/compass/index.md"};function Ie(p,i,h,z,x,w){const c=Oe,l=me("client-only");return m(),u("div",null,[q(l,null,{default:ce(()=>[q(c)]),_:1})])}const De=P(qe,[["render",Ie]]);export{Ae as __pageData,De as default};
