import{H as I,r as R,I as D,J as N}from"./chunks/theme.EZv__huw.js";import{_ as P}from"./chunks/ControlStart.Dt4mn_T6.js";import{b as E,c as x,u as p,o as B,Y as A,C as h,D as m,F as i,R as F,S as v,a2 as M,N as u,L as H,I as O,a0 as f,k as U,B as q,as as z,a5 as J}from"./chunks/framework.BmjQO8gg.js";const j={class:"flex flex-col items-center w-full"},G={class:"flex flex-col justify-center items-center relative bg-light-600 dark-bg-dark-700",id:"screen"},L={key:0,class:"i-la-arrow-up"},W={key:1,class:"i-la-arrow-left"},Y=i("div",{class:"i-la-trash-alt"},null,-1),Z=[Y],K={class:"absolute top-4 left-4 text-xl text-white"},Q=["width","height"],X={class:"flex items-center gap-2 p-2 flex-wrap"},ee={class:"is-group flex flex-wrap gap-2"},te={__name:"ChromaGram",setup(y){const{init:_,tuner:g}=I();let l,t,s,c;const e=E({initiated:!1,width:1920,height:1080,speed:x(()=>Math.floor(e.speedCount/100)),direction:p("chromagram-direction",0),notes:x(()=>R(g.chroma,-3)),speedCount:D(p("chromagram-speed",100),100,1200),pow:p("chromagram-pow",3),offset:p("chromagram-offset",0)});B(()=>{l=document.getElementById("spectrogram"),t=l.getContext("2d"),s=document.createElement("canvas"),c=s.getContext("2d"),s.width=e.width,s.height=e.height,t.fillStyle="#333",t.fillRect(0,0,e.width,e.height)});function C(o){e.speedCount+=o.delta[0]-o.delta[1]}function k(){e.initiated||(e.initiated=!0,_(),U(S))}function S(){e.direction==1?b():V()}function b(){c.drawImage(l,0,0,e.width,e.height),t.fillStyle="#33333399",t.fillRect(0,0,e.width,e.speed),t.translate(0,-e.speed),t.drawImage(s,0,0,e.width,e.height),e.notes.forEach((o,a)=>{let r=a*e.width/12;t.fillStyle=w(a,o,.5),t.fillRect(r,e.height-e.speed,e.width/12,e.speed)}),t.setTransform(1,0,0,1,0,0)}function V(){c.drawImage(l,0,0,e.width,e.height),t.fillStyle="#33333399",t.fillRect(e.width-e.speed,0,e.speed,e.height),e.notes.forEach((o,a)=>{let r=(a+1)*e.height/12;t.fillStyle=w(a,o,.5),t.fillRect(e.width-e.speed,e.height-r,e.width,e.height/12)}),t.translate(-e.speed,0),t.drawImage(s,0,0,e.width,e.height),t.setTransform(1,0,0,1,0,0)}function w(o=0,a=1,r=1){let d=Math.pow(a+e.offset,e.pow);return`hsla(${o*30}, ${d*100}%, ${d*60}%, ${r})`}function T(){t.fillStyle="#333",t.fillRect(0,0,e.width,e.height)}return(o,a)=>{const r=P,d=N,$=A("drag");return h(),m("div",j,[i("div",G,[e.initiated?u("",!0):(h(),F(r,{key:0,class:"absolute",onClick:a[0]||(a[0]=n=>k())},{default:v(()=>[M("Start")]),_:1})),i("button",{class:"absolute bottom-4 left-4 text-xl text-white",onClick:a[1]||(a[1]=n=>e.direction?e.direction=0:e.direction=1)},[e.direction==1?(h(),m("div",L)):u("",!0),e.direction==0?(h(),m("div",W)):u("",!0)]),i("button",{class:"absolute top-4 right-4 text-xl select-none cursor-pointer",onMousedown:a[2]||(a[2]=n=>T())},Z,32),i("div",K,"x"+H(e.speed),1),O(i("canvas",{class:"w-full cursor-pointer max-h-100svh",id:"spectrogram",width:e.width,height:e.height},null,8,Q),[[$,C]])]),i("div",X,[i("div",ee,[f(d,{modelValue:e.pow,"onUpdate:modelValue":a[3]||(a[3]=n=>e.pow=n),min:1,max:10,step:1,fixed:0,param:"POW"},null,8,["modelValue"]),f(d,{modelValue:e.offset,"onUpdate:modelValue":a[4]||(a[4]=n=>e.offset=n),min:-.25,max:.25,step:1e-4,param:"OFFSET",fixed:2},null,8,["modelValue"])])])])}}},le=JSON.parse('{"title":"Сhromagram","description":"Visual representation of any audio chroma content","frontmatter":{"title":"Сhromagram","description":"Visual representation of any audio chroma content","date":"2022-06-12T00:00:00.000Z","cover":"chromagram.png","layout":"app"},"headers":[],"relativePath":"practice/chroma/gram/index.md","filePath":"practice/chroma/gram/index.md","lastUpdated":1720255337000}'),ae={name:"practice/chroma/gram/index.md"},oe=z("",2);function ie(y,_,g,l,t,s){const c=te,e=J("client-only");return h(),m("div",null,[f(e,null,{default:v(()=>[f(c)]),_:1}),oe])}const ce=q(ae,[["render",ie]]);export{le as __pageData,ce as default};
