import{Q as I,r as R,R as D,_ as E}from"./chunks/theme.BiHxa8yZ.js";import{_ as N}from"./chunks/ControlStart.4sKPMNjL.js";import{b as P,c as x,u as p,o as B,M,E as h,F as m,G as i,a2 as A,X as v,$ as F,T as f,I as O,N as U,O as u,k as q,D as z,ar as G,a4 as H}from"./chunks/framework.CAro41Y4.js";const j={class:"flex flex-col items-center w-full"},J={class:"flex flex-col justify-center items-center relative bg-light-600 dark-bg-dark-700",id:"screen"},Q={key:0,class:"i-la-arrow-up"},W={key:1,class:"i-la-arrow-left"},X=i("div",{class:"i-la-trash-alt"},null,-1),Z=[X],K={class:"absolute top-4 left-4 text-xl text-white"},L=["width","height"],Y={class:"flex items-center gap-2 px-8 flex-wrap"},ee={class:"is-group flex flex-wrap gap-2"},te={__name:"ChromaGram",setup(y){const{init:_,tuner:g}=I();let l,t,s,c;const e=P({initiated:!1,width:1920,height:1080,speed:x(()=>Math.floor(e.speedCount/100)),direction:p("chromagram-direction",0),notes:x(()=>R(g.chroma,-3)),speedCount:D(p("chromagram-speed",100),100,1200),pow:p("chromagram-pow",3),offset:p("chromagram-offset",0)});B(()=>{l=document.getElementById("spectrogram"),t=l.getContext("2d"),s=document.createElement("canvas"),c=s.getContext("2d"),s.width=e.width,s.height=e.height,t.fillStyle="#333",t.fillRect(0,0,e.width,e.height)});function C(o){e.speedCount+=o.delta[0]-o.delta[1]}function k(){e.initiated||(e.initiated=!0,_(),q(b))}function b(){e.direction==1?S():V()}function S(){c.drawImage(l,0,0,e.width,e.height),t.fillStyle="#33333399",t.fillRect(0,0,e.width,e.speed),t.translate(0,-e.speed),t.drawImage(s,0,0,e.width,e.height),e.notes.forEach((o,a)=>{let r=a*e.width/12;t.fillStyle=w(a,o,.5),t.fillRect(r,e.height-e.speed,e.width/12,e.speed)}),t.setTransform(1,0,0,1,0,0)}function V(){c.drawImage(l,0,0,e.width,e.height),t.fillStyle="#33333399",t.fillRect(e.width-e.speed,0,e.speed,e.height),e.notes.forEach((o,a)=>{let r=(a+1)*e.height/12;t.fillStyle=w(a,o,.5),t.fillRect(e.width-e.speed,e.height-r,e.width,e.height/12)}),t.translate(-e.speed,0),t.drawImage(s,0,0,e.width,e.height),t.setTransform(1,0,0,1,0,0)}function w(o=0,a=1,r=1){let d=Math.pow(a+e.offset,e.pow);return`hsla(${o*30}, ${d*100}%, ${d*60}%, ${r})`}function T(){t.fillStyle="#333",t.fillRect(0,0,e.width,e.height)}return(o,a)=>{const r=N,d=E,$=M("drag");return h(),m("div",j,[i("div",J,[e.initiated?f("",!0):(h(),A(r,{key:0,class:"absolute",onClick:a[0]||(a[0]=n=>k())},{default:v(()=>[F("Start")]),_:1})),i("button",{class:"absolute bottom-4 left-4 text-xl text-white",onClick:a[1]||(a[1]=n=>e.direction?e.direction=0:e.direction=1)},[e.direction==1?(h(),m("div",Q)):f("",!0),e.direction==0?(h(),m("div",W)):f("",!0)]),i("button",{class:"absolute top-4 right-4 text-xl select-none cursor-pointer",onMousedown:a[2]||(a[2]=n=>T())},Z,32),i("div",K,"x"+O(e.speed),1),U(i("canvas",{class:"w-full rounded-2xl cursor-pointer",id:"spectrogram",width:e.width,height:e.height},null,8,L),[[$,C]])]),i("div",Y,[i("div",ee,[u(d,{modelValue:e.pow,"onUpdate:modelValue":a[3]||(a[3]=n=>e.pow=n),min:1,max:10,step:1,fixed:0,param:"POW"},null,8,["modelValue"]),u(d,{modelValue:e.offset,"onUpdate:modelValue":a[4]||(a[4]=n=>e.offset=n),min:-.25,max:.25,step:1e-4,param:"OFFSET",fixed:2},null,8,["modelValue"])])])])}}},le=JSON.parse('{"title":"Сhromagram","description":"Visual representation of any audio chroma content","frontmatter":{"title":"Сhromagram","description":"Visual representation of any audio chroma content","date":"2022-06-12T00:00:00.000Z","cover":"chromagram.png","layout":"app"},"headers":[],"relativePath":"practice/chroma/gram/index.md","filePath":"practice/chroma/gram/index.md","lastUpdated":1713161325000}'),ae={name:"practice/chroma/gram/index.md"},oe=G("",2);function ie(y,_,g,l,t,s){const c=te,e=H("client-only");return h(),m("div",null,[u(e,null,{default:v(()=>[u(c,{class:"mb-16"})]),_:1}),oe])}const ce=z(ae,[["render",ie]]);export{le as __pageData,ce as default};
