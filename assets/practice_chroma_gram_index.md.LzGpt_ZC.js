import{_ as I}from"./chunks/ControlRotary.Xs4wIQHy.js";import{_ as R}from"./chunks/ControlStart.d8eyaEXz.js";import{k as E,j as x,v as m,E as P,x as D,o as p,c as h,a,e as N,n as v,B,b as u,t as M,y as A,f,M as F,_ as O,m as U,h as j}from"./chunks/framework.zmD4b-eB.js";import{r as q}from"./chunks/calculations.uITx2GSi.js";import{u as z}from"./chunks/tuner.hgJJdIwS.js";import{u as H}from"./chunks/index.qXrjdxB9.js";import"./chunks/midi.RNICv3HM.js";import"./chunks/commonjsHelpers.4gQjN7DL.js";import"./chunks/index.iB1AmcYb.js";import"./chunks/colors.uFY4QJSc.js";import"./chunks/index.kn6emmbE.js";import"./chunks/index.RYxauP_R.js";import"./chunks/synth.qMv1bFvY.js";import"./chunks/audio.CXmur7D0.js";import"./chunks/Scale.nioafpJK.js";import"./chunks/Subtract.6yvEFIfU.js";import"./chunks/PingPongDelay.lVW_-cfU.js";import"./chunks/AutoPanner.3Z1iZl9l.js";import"./chunks/MonoSynth.pp_JS1sF.js";import"./chunks/Filter.CUstuK5R.js";import"./chunks/theory.76qaQigv.js";import"./chunks/index.mPTRJrWq.js";import"./chunks/index.pBEhVm4e.js";const G={class:"flex flex-col items-center w-full"},J={class:"flex flex-col justify-center items-center relative bg-light-600 dark-bg-dark-700",id:"screen"},W={key:0,class:"i-la-arrow-up"},Z={key:1,class:"i-la-arrow-left"},K=a("div",{class:"i-la-trash-alt"},null,-1),L=[K],Q={class:"absolute top-4 left-4 text-xl text-white"},X=["width","height"],Y={class:"flex items-center gap-2 px-8 flex-wrap"},ee={class:"is-group flex flex-wrap gap-2"},te={__name:"ChromaGram",setup(y){const{init:_,tuner:g}=z();let l,t,r,c;const e=E({initiated:!1,width:1920,height:1080,speed:x(()=>Math.floor(e.speedCount/100)),direction:m("chromagram-direction",0),notes:x(()=>q(g.chroma,-3)),speedCount:H(m("chromagram-speed",100),100,1200),pow:m("chromagram-pow",3),offset:m("chromagram-offset",0)});P(()=>{l=document.getElementById("spectrogram"),t=l.getContext("2d"),r=document.createElement("canvas"),c=r.getContext("2d"),r.width=e.width,r.height=e.height,t.fillStyle="#333",t.fillRect(0,0,e.width,e.height)});function C(i){e.speedCount+=i.delta[0]-i.delta[1]}function k(){e.initiated||(e.initiated=!0,_(),F(b))}function b(){e.direction==1?S():V()}function S(){c.drawImage(l,0,0,e.width,e.height),t.fillStyle="#33333399",t.fillRect(0,0,e.width,e.speed),t.translate(0,-e.speed),t.drawImage(r,0,0,e.width,e.height),e.notes.forEach((i,o)=>{let s=o*e.width/12;t.fillStyle=w(o,i,.5),t.fillRect(s,e.height-e.speed,e.width/12,e.speed)}),t.setTransform(1,0,0,1,0,0)}function V(){c.drawImage(l,0,0,e.width,e.height),t.fillStyle="#33333399",t.fillRect(e.width-e.speed,0,e.speed,e.height),e.notes.forEach((i,o)=>{let s=(o+1)*e.height/12;t.fillStyle=w(o,i,.5),t.fillRect(e.width-e.speed,e.height-s,e.width,e.height/12)}),t.translate(-e.speed,0),t.drawImage(r,0,0,e.width,e.height),t.setTransform(1,0,0,1,0,0)}function w(i=0,o=1,s=1){let d=Math.pow(o+e.offset,e.pow);return`hsla(${i*30}, ${d*100}%, ${d*60}%, ${s})`}function T(){t.fillStyle="#333",t.fillRect(0,0,e.width,e.height)}return(i,o)=>{const s=R,d=I,$=D("drag");return p(),h("div",G,[a("div",J,[e.initiated?u("",!0):(p(),N(s,{key:0,class:"absolute",onClick:o[0]||(o[0]=n=>k())},{default:v(()=>[B("Start")]),_:1})),a("button",{class:"absolute bottom-4 left-4 text-xl text-white",onClick:o[1]||(o[1]=n=>e.direction?e.direction=0:e.direction=1)},[e.direction==1?(p(),h("div",W)):u("",!0),e.direction==0?(p(),h("div",Z)):u("",!0)]),a("button",{class:"absolute top-4 right-4 text-xl select-none cursor-pointer",onMousedown:o[2]||(o[2]=n=>T())},L,32),a("div",Q,"x"+M(e.speed),1),A(a("canvas",{class:"w-full rounded-2xl cursor-pointer",id:"spectrogram",width:e.width,height:e.height},null,8,X),[[$,C]])]),a("div",Y,[a("div",ee,[f(d,{modelValue:e.pow,"onUpdate:modelValue":o[3]||(o[3]=n=>e.pow=n),min:1,max:10,step:1,fixed:0,param:"POW"},null,8,["modelValue"]),f(d,{modelValue:e.offset,"onUpdate:modelValue":o[4]||(o[4]=n=>e.offset=n),min:-.25,max:.25,step:1e-4,param:"OFFSET",fixed:2},null,8,["modelValue"])])])])}}},$e=JSON.parse('{"title":"Сhromagram","description":"Visual representation of any audio chroma content","frontmatter":{"title":"Сhromagram","description":"Visual representation of any audio chroma content","date":"2022-06-12T00:00:00.000Z","cover":"chromagram.png","layout":"app"},"headers":[],"relativePath":"practice/chroma/gram/index.md","filePath":"practice/chroma/gram/index.md","lastUpdated":1702907238000}'),oe={name:"practice/chroma/gram/index.md"},ie=j('<p>This app shows the <a href="https://en.wikipedia.org/wiki/Chroma_feature" target="_blank" rel="noreferrer">chromagram</a> or the <a href="https://en.wikipedia.org/wiki/Harmonic_pitch_class_profiles" target="_blank" rel="noreferrer">12 tone harmonic pitch class profile</a> of the incoming signal. It means is analyzes the frequency spectrum and sums them according to one of the 12 pitch classes. The relative power of every pitch class is plotted, showing the primary tones of the audio signal. Pure sine tone will give us one line filled and noise will make all the bands glow equally bright.</p><ol><li><i class="p-3 mr-1 i-fluent-drag-24-regular"></i> Drag the canvas graph to change the roll speed.</li><li>Press the <i class="p-3 i-la-arrow-up"></i> (<i class="p-3 i-la-arrow-left"></i>) button to change the plot direction</li><li>Press the <i class="p-3 mr-1 i-la-expand"></i>button to expand the app to full screen</li></ol>',2);function ae(y,_,g,l,t,r){const c=te,e=U("client-only");return p(),h("div",null,[f(e,null,{default:v(()=>[f(c,{class:"mb-16"})]),_:1}),ie])}const Ie=O(oe,[["render",ae]]);export{$e as __pageData,Ie as default};
