import{_ as I}from"./chunks/ControlStart.169ed1a4.js";import{C as V,i as _,H as g,j as D,m as R,o as c,c as d,a as s,f as N,z as x,I as P,d as h,t as E,n as B,M as A,_ as M,D as z,g as w,b as H}from"./chunks/framework.7e580a04.js";import{r as j}from"./chunks/calculations.97c9b876.js";import{u as q}from"./chunks/tuner.c4386800.js";import{u as F}from"./chunks/index.b4e3491a.js";import"./chunks/colors.7c5ce8ba.js";import"./chunks/index.654bd828.js";import"./chunks/midi.732209b1.js";import"./chunks/commonjsHelpers.de833af9.js";import"./chunks/index.b30cd6d2.js";import"./chunks/synth.ee1f5a0a.js";import"./chunks/audio.63c56e5f.js";import"./chunks/Scale.93847875.js";import"./chunks/Subtract.cbe15ceb.js";import"./chunks/PingPongDelay.8aaf7e00.js";import"./chunks/AutoPanner.4040b80a.js";import"./chunks/MonoSynth.e541e8f4.js";import"./chunks/Filter.c2010033.js";import"./chunks/theory.7ed89221.js";import"./chunks/index.86652af6.js";import"./chunks/index.04926cfe.js";const G={class:"flex flex-col items-center w-full"},J={class:"flex flex-col justify-center items-center relative bg-light-600 dark-bg-dark-700",id:"screen"},O={key:0,class:"i-la-arrow-up"},U={key:1,class:"i-la-arrow-left"},Z=s("div",{class:"i-la-trash-alt"},null,-1),K=[Z],L={class:"absolute top-4 left-4 text-xl text-white"},Q=["width","height"],W={__name:"ChromaGram",setup(v){const{init:p,tuner:m}=q();let n,e,a,l;const t=V({initiated:!1,width:1920,height:1080,speed:_(()=>Math.floor(t.speedCount/100)),direction:g("chroma-roll-direction",0),notes:_(()=>j(m.chroma,-3)),speedCount:F(g("chroma-roll-speed",100),100,1200)});D(()=>{n=document.getElementById("spectrogram"),e=n.getContext("2d"),a=document.createElement("canvas"),l=a.getContext("2d"),a.width=t.width,a.height=t.height,e.fillStyle="#333",e.fillRect(0,0,t.width,t.height)});function y(o){t.speedCount+=o.delta[0]-o.delta[1]}function C(){t.initiated||(t.initiated=!0,p(),A(b))}function b(){t.direction==1?k():S()}function k(){l.drawImage(n,0,0,t.width,t.height),e.fillStyle="#33333399",e.fillRect(0,0,t.width,t.speed),e.translate(0,-t.speed),e.drawImage(a,0,0,t.width,t.height),t.notes.forEach((o,i)=>{let r=i*t.width/12;e.fillStyle=u(i,o,.5),e.fillRect(r,t.height-t.speed,t.width/12,t.speed)}),e.setTransform(1,0,0,1,0,0)}function S(){l.drawImage(n,0,0,t.width,t.height),e.fillStyle="#33333399",e.fillRect(t.width-t.speed,0,t.speed,t.height),t.notes.forEach((o,i)=>{let r=(i+1)*t.height/12;e.fillStyle=u(i,o,.5),e.fillRect(t.width-t.speed,t.height-r,t.width,t.height/12)}),e.translate(-t.speed,0),e.drawImage(a,0,0,t.width,t.height),e.setTransform(1,0,0,1,0,0)}function u(o=0,i=1,r=1){return`hsla(${o*30}, ${i*100}%, ${i*60}%, ${r})`}function T(){e.fillStyle="#333",e.fillRect(0,0,t.width,t.height)}return(o,i)=>{const r=I,$=R("drag");return c(),d("div",G,[s("div",J,[t.initiated?h("",!0):(c(),N(r,{key:0,class:"absolute",onClick:i[0]||(i[0]=f=>C())},{default:x(()=>[P("Start")]),_:1})),s("button",{class:"absolute bottom-4 left-4 text-xl text-white",onClick:i[1]||(i[1]=f=>t.direction?t.direction=0:t.direction=1)},[t.direction==1?(c(),d("div",O)):h("",!0),t.direction==0?(c(),d("div",U)):h("",!0)]),s("button",{class:"absolute top-4 right-4 text-xl select-none cursor-pointer",onMousedown:i[2]||(i[2]=f=>T())},K,32),s("div",L,"x"+E(t.speed),1),B(s("canvas",{class:"w-full rounded-2xl cursor-pointer",id:"spectrogram",width:t.width,height:t.height},null,8,Q),[[$,y]])])])}}},Ct=JSON.parse('{"title":"Сhromagram","description":"Visual representation of any audio chroma content","frontmatter":{"title":"Сhromagram","description":"Visual representation of any audio chroma content","date":"2022-06-12T00:00:00.000Z","cover":"chromagram.png"},"headers":[],"relativePath":"practice/chroma/gram/index.md","filePath":"practice/chroma/gram/index.md","lastUpdated":1694022443000}'),X={name:"practice/chroma/gram/index.md"},Y=H("",2);function tt(v,p,m,n,e,a){const l=W,t=z("client-only");return c(),d("div",null,[w(t,null,{default:x(()=>[w(l,{class:"mb-16"})]),_:1}),Y])}const bt=M(X,[["render",tt]]);export{Ct as __pageData,bt as default};
