import{K as O,W as be,X as te,Y as ne,Z as se,$ as pe,a0 as oe,a1 as he,e as A,a2 as ye,a3 as we,a4 as ke,a5 as $e,P as Se}from"./chunks/theme.D0kT8rkE.js";import{r as M,b as me,u as C,k as Ne,d as $,c as B,M as ve,E as p,F as f,G as u,I as W,O as b,C as _,al as ce,N as q,L,D as G,V as ae,W as re,P as fe,J as ie,K as le,o as _e,x as Me,a2 as Ce,a6 as Pe,X as Re,$ as Ae,a4 as Fe}from"./chunks/framework.BtWLkna7.js";import{p as S}from"./chunks/paper-full.DWxflGkz.js";const Te=.5*(Math.sqrt(3)-1),j=(3-Math.sqrt(3))/6,ue=n=>Math.floor(n)|0,de=new Float64Array([1,1,-1,1,1,-1,-1,-1,1,0,-1,0,1,0,-1,0,0,1,0,-1,0,1,0,-1]);function ze(n=Math.random){const r=Ve(n),e=new Float64Array(r).map(o=>de[o%12*2]),t=new Float64Array(r).map(o=>de[o%12*2+1]);return function(s,a){let l=0,m=0,x=0;const d=(s+a)*Te,g=ue(s+d),h=ue(a+d),v=(g+h)*j,i=g-v,c=h-v,y=s-i,w=a-c;let P,Y;y>w?(P=1,Y=0):(P=0,Y=1);const U=y-P+j,X=w-Y+j,E=y-1+2*j,K=w-1+2*j,Q=g&255,Z=h&255;let T=.5-y*y-w*w;if(T>=0){const R=Q+r[Z],I=e[R],D=t[R];T*=T,l=T*T*(I*y+D*w)}let z=.5-U*U-X*X;if(z>=0){const R=Q+P+r[Z+Y],I=e[R],D=t[R];z*=z,m=z*z*(I*U+D*X)}let V=.5-E*E-K*K;if(V>=0){const R=Q+1+r[Z+1],I=e[R],D=t[R];V*=V,x=V*V*(I*E+D*K)}return 70*(l+m+x)}}function Ve(n){const e=new Uint8Array(512);for(let t=0;t<512/2;t++)e[t]=t;for(let t=0;t<512/2-1;t++){const o=t+~~(n()*(256-t)),s=e[t];e[t]=e[o],e[o]=s}for(let t=256;t<512;t++)e[t]=e[t-256];return e}const xe=ze(),H=M(0),ge=me({}),F=O(C("ambient-noise-zoom",100),50,500);Ne(()=>{H.value+=1});function Ie({title:n="simplex",size:r=1,minSpeed:e=.001,maxSpeed:t=1e4}={}){const o=M(0),s=O(C(n+"-radius",Math.random()*250*r),1,250),a=O(C(n,Math.random()*1e3),e,t);$(H,()=>o.value+=a.value/1e4);const l=B(()=>De(s.value,o.value)),m=B(()=>xe(l.value.x/F.value,l.value.y/F.value));return ge[n]=me({polar:l,radius:s,speed:a,random:m}),{random:m,polar:l,progress:o,count:H,speed:a,radius:s}}function De(n=1,r=0){let e=(r-90)*Math.PI/180;return{x:n*Math.cos(e),y:n*Math.sin(e)}}function ee(){return ee=Object.assign||function(n){for(var r=1;r<arguments.length;r++){var e=arguments[r];for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t])}return n},ee.apply(this,arguments)}var J=["","K","M","B"],je={digits:1,uppercase:!0},qe=function(n,r){if(r===void 0&&(r={}),isNaN(n))return 0;var e=Math.abs(n);if(e<1e3)return Number(n);for(var t=ee({},je,r),o=t.digits,s=t.uppercase,a=[0,1].includes(Math.sign(n))?1:-1,l=0,m="",x=0;x<=J.length;x++){var d=Math.pow(1e3,x);e>=d&&(l=e/d,m=s?J[x]:J[x].toLowerCase())}return""+(l-Math.floor(l)<=0||o===0?Math.floor(l*a):parseFloat(l*a).toFixed(o))+m};const Be={class:"flex-1 bg-light-400 dark-bg-dark-400 shadow relative w-full cursor-pointer min-w-25 rounded-lg select-none overflow-hidden"},Oe={class:"flex flex-col p-1 gap-0"},We={class:"px-1 pb-1"},Ye={class:"flex gap-2 p-1"},Le={class:"flex relative border-t-1 border-current"},Ge={class:"flex-1 h-6 cursor-pointer","drag-options":{preventWindowScrollY:!0}},Ue={class:"flex-1 h-6 cursor-pointer","drag-options":{preventWindowScrollY:!0}},Xe=u("div",{class:"h-2px bg-dark-100 dark-bg-light-100 flex-1"},null,-1),Ee=[Xe],Ke=u("div",{class:"h-2px bg-dark-100 dark-bg-light-100 flex-1"},null,-1),Qe=[Ke],k={__name:"clampedNoise",props:{instrument:{type:String,default:"inst"},title:{type:String,default:"random-value"},minSpeed:{type:Number,default:.001},maxSpeed:{type:Number,default:1e4},min:{type:Number,default:0},max:{type:Number,default:1},radius:{type:Number,default:1},precision:{type:Number,default:2}},emits:["random"],setup(n,{emit:r}){const e=n,t=r,o=B(()=>`ambient-${e.instrument}-${e.title}`),s=O(C(o.value+"-min",0),0,1),a=O(C(o.value+"-max",1),0,1);$([s,a],()=>{s.value>a.value&&(a.value=s.value),a.value<s.value&&(s.value=a.value)});const{random:l,speed:m,radius:x}=Ie({title:o.value,size:e.radius}),d=B(()=>(l.value/2+.5)*(a.value-s.value)+s.value),g=B(()=>d.value*(e.max-e.min)+e.min);$(g,i=>t("random",i));function h(i){const c=(i.delta[0]-i.delta[1])/1e3;s.value+=c}function v(i){const c=(i.delta[0]-i.delta[1])/1e3;a.value+=c}return(i,c)=>{const y=be,w=ve("drag");return p(),f("div",Be,[u("div",Oe,[u("div",We,W(n.title),1),u("div",Ye,[b(y,{class:"flex-1",modelValue:_(x),"onUpdate:modelValue":c[0]||(c[0]=P=>ce(x)?x.value=P:null),max:250,min:10,param:"Radius",fixed:0},null,8,["modelValue"]),b(y,{class:"flex-1",modelValue:_(m),"onUpdate:modelValue":c[1]||(c[1]=P=>ce(m)?m.value=P:null),max:n.maxSpeed,min:n.minSpeed,param:"Speed",step:1,fixed:0},null,8,["modelValue","max","min"])])]),u("div",Le,[q(u("div",Ge,null,512),[[w,h]]),q(u("div",Ue,null,512),[[w,v]]),u("div",{class:"absolute left-0 top-0 text-right border-r-4 pr-2 pointer-events-none border-current",style:L({width:(g.value-e.min)/(e.max-e.min)*100+"%"})},W(_(qe)(g.value.toFixed(e.precision))),5),q((p(),f("div",{class:"absolute bg-dark-700 bg-opacity-20 border-r-2 border-current py-2 h-full flex items-center cursor-pointer",style:L({width:_(s)*100+"%"})},Ee,4)),[[w,h]]),q((p(),f("div",{class:"absolute bg-light-100 bg-opacity-20 border-l-2 border-current py-2 right-0 h-full h-full flex items-center cursor-pointer",style:L({width:(1-_(a))*100+"%"}),"drag-options":{preventWindowScrollY:!0}},Qe,4)),[[w,v]])])])}}},Ze=n=>(ie("data-v-c535f897"),n=n(),le(),n),Je={class:"flex flex-col gap-4"},He={class:"flex items-center flex-wrap"},et=Ze(()=>u("div",{class:"font-bold"},"Bass",-1)),tt={key:0,class:"i-la-play"},nt={key:1,class:"i-la-pause"},st={class:"flex flex-wrap gap-2"},ot=["onClick"],at={class:"flex flex-wrap gap-4"},rt={__name:"drone",setup(n){const r=C("ambient-synth-options",{oscillator:{type:"sawtooth"},envelope:{attack:1,decay:.1,sustain:.9,release:6},volume:1,harmonicity:2}),e=M(!1),t=M(0),o=M(1),{channel:s}=te("ambient-drone"),a=new ne(r.value.volume).connect(s),l=new se({type:"lowpass",frequency:1500,Q:0}).connect(a),m=new pe(4).connect(l),x=new oe(0).connect(m),d=new he(r.value).connect(x),g=C("ambient-synth-note",0);return $(e,h=>{h?(d.triggerAttack(A[t.value]+o.value),g.value=t.value):d.triggerRelease()}),$(t,h=>{d.frequency.rampTo(A[h]+o.value,1)}),(h,v)=>(p(),f("div",Je,[u("div",He,[et,u("button",{class:"p-2",onClick:v[0]||(v[0]=i=>e.value=!e.value)},[e.value?(p(),f("div",nt)):(p(),f("div",tt))]),u("div",st,[(p(!0),f(ae,null,re(_(A),(i,c)=>(p(),f("button",{class:fe(["p-1 text-xs",{active:c==t.value}]),key:i,onClick:y=>t.value=c},W(i),11,ot))),128))])]),u("div",at,[b(k,{title:"Low pass",instrument:"FM",min:50,max:1e4,onRandom:v[1]||(v[1]=i=>_(l).frequency.rampTo(i))}),b(k,{title:"Pan",instrument:"FM",min:-1,onRandom:v[2]||(v[2]=i=>_(x).pan.rampTo(i))}),b(k,{title:"Volume",instrument:"FM",onRandom:v[3]||(v[3]=i=>_(a).gain.rampTo(i))})])]))}},it=G(rt,[["__scopeId","data-v-c535f897"]]),lt=n=>(ie("data-v-76687e15"),n=n(),le(),n),ct={class:"flex flex-col gap-4"},ut={class:"flex items-center"},dt=lt(()=>u("div",{class:"font-bold"},"NOISE",-1)),pt={key:0,class:"i-la-play"},mt={key:1,class:"i-la-pause"},vt={class:"flex flex-wrap gap-4"},ft={__name:"noise",setup(n){const r=C("ambient-options",{noise:{type:"brown"},envelope:{attack:1,decay:.1,sustain:.9,release:6},volume:1}),e=M(!1),{channel:t}=te("ambient-noise"),o=new ne(r.value.volume).connect(t),s=new se({type:"lowpass",frequency:1500,Q:0}).connect(o),a=new ye(4).connect(s),l=new oe(0).connect(a),m=new we(r.value).connect(l);return $(e,x=>{x?m.triggerAttack():m.triggerRelease()}),(x,d)=>(p(),f("div",ct,[u("div",ut,[dt,u("button",{class:"p-2",onClick:d[0]||(d[0]=g=>e.value=!e.value)},[e.value?(p(),f("div",mt)):(p(),f("div",pt))])]),u("div",vt,[b(k,{title:"Bit crusher",instrument:"Noise",min:2,max:8,onRandom:d[1]||(d[1]=g=>_(a).bits.rampTo(g))}),b(k,{title:"Low pass",instrument:"Noise",min:50,max:1e4,onRandom:d[2]||(d[2]=g=>_(s).frequency.rampTo(g))}),b(k,{title:"Pan",instrument:"Noise",min:-1,max:1,onRandom:d[3]||(d[3]=g=>_(l).pan.rampTo(g))}),b(k,{title:"Volume",instrument:"Noise",onRandom:d[4]||(d[4]=g=>_(o).gain.rampTo(g))})])]))}},_t=G(ft,[["__scopeId","data-v-76687e15"]]),xt=n=>(ie("data-v-ee6bb42b"),n=n(),le(),n),gt={class:"flex flex-col gap-4"},bt={class:"flex items-center flex-wrap"},ht=xt(()=>u("div",{class:"font-bold"},"Pluck",-1)),yt={key:0,class:"i-la-play"},wt={key:1,class:"i-la-pause"},kt={class:"flex flex-wrap gap-2"},$t=["onClick"],St={class:"flex flex-wrap gap-4"},Nt={__name:"arp",setup(n){const r=C("ambient-arp-options",{attackNoise:2,volume:20,resonance:20}),e=M(!1),t=M(0),o=M(4),{channel:s}=te("ambient-arp"),a=new ne(r.value.volume).connect(s),l=new se({type:"lowpass",frequency:1500,Q:0}).connect(a),m=new pe(6).connect(l),x=new ke({delayTime:"4t",feedback:.6}).connect(m),d=new oe(0).connect(x),g=new $e({attackNoise:2,resonance:.85,volume:10}).connect(d),h=new Se({callback(v,i){g.triggerAttackRelease(i+o.value,"8n",v)},values:[A[t.value],A[(t.value+7)%12]],pattern:"random",interval:"8n",humanize:!0});return $(t,v=>{h.values=[A[v],A[(v+7)%12]]}),$(e,v=>{v?h.start(0):h.stop()}),(v,i)=>(p(),f("div",gt,[u("div",bt,[ht,u("button",{class:"p-2",onClick:i[0]||(i[0]=c=>e.value=!e.value)},[e.value?(p(),f("div",wt)):(p(),f("div",yt))]),u("div",kt,[(p(!0),f(ae,null,re(_(A),(c,y)=>(p(),f("button",{class:fe(["p-1 text-xs",{active:y==t.value}]),key:c,onClick:w=>t.value=y},W(c),11,$t))),128))])]),u("div",St,[b(k,{title:"Octave",instrument:"Arp",min:2,max:6,onRandom:i[1]||(i[1]=c=>o.value=Math.round(c))}),b(k,{title:"Probability",instrument:"Arp",onRandom:i[2]||(i[2]=c=>_(h).probability=c)}),b(k,{title:"Low pass",instrument:"Arp",min:50,max:1e4,onRandom:i[3]||(i[3]=c=>_(l).frequency.rampTo(c))}),b(k,{title:"Pan",instrument:"Arp",min:-1,onRandom:i[4]||(i[4]=c=>_(d).pan.rampTo(c))}),b(k,{title:"Volume",instrument:"Arp",onRandom:i[5]||(i[5]=c=>_(a).gain.rampTo(c))})])]))}},Mt=G(Nt,[["__scopeId","data-v-ee6bb42b"]]),Ct={__name:"paper-circle",props:{polar:{type:Object,default:()=>{}},radius:{type:Number,default:0},random:{type:Number,default:0}},setup(n){const r=n;return _e(()=>{const e=new S.Shape.Circle({x:0,y:0},5),t=new S.Shape.Circle({x:+S.view.size.width/2,y:+S.view.size.height/2},r.radius);t.strokeWidth=2,$(()=>r.polar,o=>{var s,a,l,m;e.position.x=o.x+((a=(s=S.view)==null?void 0:s.size)==null?void 0:a.width)/2,e.position.y=o.y+((m=(l=S.view)==null?void 0:l.size)==null?void 0:m.width)/2}),$(()=>r.radius,o=>t.radius=o),$(()=>r.random,o=>{let s=new S.Color(o);e.fillColor=s,t.strokeColor=s,e.radius=2+5*(o+1)})}),(e,t)=>(p(),f("span"))}},Pt={class:"relative mx-6 flex"},Rt={class:"absolute -left-2 text-xs"},N=512,At={__name:"simplexPaper",setup(n){const r=M();_e(()=>{S.setup(r.value),S.view.draw();const t=new S.Raster;t.position.x=N/2,t.position.y=N/2,t.width=N,t.height=N,$(F,o=>{for(let s=0;s<N;s++)for(let a=0;a<N;a++)t.setPixel(s,a,`hsl(0,0%,${(xe((s-N/2)/o,(a-N/2)/o)+1)*50}%)`)},{immediate:!0})}),Me(()=>{S.project.clear()});function e(t){F.value-=t.delta[1]/10}return(t,o)=>{const s=ve("drag");return p(),f("div",Pt,[u("div",{class:"absolute px-1 dark-bg-light-100 bg-dark-100 bg-opacity-20 dark-bg-opacity-20 -left-4 bottom-0 rounded-xl",style:L({height:_(F)/5+"%"})},[u("div",Rt,W(_(F).toFixed()),1)],4),q((p(),f("canvas",{class:"rounded-xl cursor-pointer flex-auto max-w-full",ref_key:"canvas",ref:r,width:N,height:N,"drag-options":{preventWindowScrollY:!0}},[(p(!0),f(ae,null,re(_(ge),a=>(p(),Ce(Ct,Pe({key:a},a),null,16))),128))])),[[s,e]])])}}},Ft={class:"flex flex-col gap-6 items-center"},Tt={__name:"ambience",setup(n){return(r,e)=>(p(),f("div",Ft,[b(At),b(_t,{class:"p-2 rounded-xl w-full shadow-xl bg-light-800 dark-bg-dark-200"}),b(it,{class:"p-2 rounded-xl w-full shadow-xl bg-light-800 dark-bg-dark-200"}),b(Mt,{class:"p-2 rounded-xl w-full shadow-xl bg-light-800 dark-bg-dark-200"})]))}},zt=G(Tt,[["__scopeId","data-v-4ff34bbf"]]),Vt=u("h3",{id:"work-in-progress",tabindex:"-1"},[Ae("Work in progress "),u("a",{class:"header-anchor",href:"#work-in-progress","aria-label":'Permalink to "Work in progress"'},"​")],-1),Bt=JSON.parse('{"title":"Ambient drone box","description":"A generative instrument for creating meditative sound landscapes","frontmatter":{"title":"Ambient drone box","description":"A generative instrument for creating meditative sound landscapes","date":"2022-04-28T00:00:00.000Z","cover":"ambience.png","layout":"app"},"headers":[],"relativePath":"practice/experiments/ambience/index.md","filePath":"practice/experiments/ambience/index.md","lastUpdated":1711871197000}'),It={name:"practice/experiments/ambience/index.md"},Ot=Object.assign(It,{setup(n){return(r,e)=>{const t=Fe("client-only");return p(),f("div",null,[b(t,null,{default:Re(()=>[b(zt)]),_:1}),Vt])}}});export{Bt as __pageData,Ot as default};
