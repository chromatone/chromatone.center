import{n as $}from"./chunks/colors.4aca3d40.js";import{u as S}from"./chunks/midi.490ff1fe.js";import{n as T}from"./chunks/theory.83a66c14.js";import{u as C}from"./chunks/index.4d18a0f4.js";import{a as k}from"./chunks/index.b129171f.js";import{u as N,D as B}from"./chunks/index.2be4a733.js";import{i as d,j as E,o as g,c as x,a as i,t as _,g as e,F as P,r as q,_ as A,f as K}from"./chunks/framework.5d1030ab.js";import{u as V,M as R}from"./chunks/synth.f30068b3.js";import"./chunks/index.e98b5e67.js";import"./chunks/index.654bd828.js";import"./chunks/calculations.2bac3e9a.js";import"./chunks/index.5a28b3ed.js";import"./chunks/commonjsHelpers.de833af9.js";import"./chunks/index.e63c3080.js";import"./chunks/audio.36f0d408.js";import"./chunks/Scale.b6214b1d.js";import"./chunks/Subtract.109130cb.js";import"./chunks/PingPongDelay.244b18e5.js";import"./chunks/AutoPanner.6f08faee.js";import"./chunks/MonoSynth.c00b1270.js";import"./chunks/Filter.ca6be54c.js";function W(){const l=N(C("midi-keys-begin",0),0,127),t=N(C("midi-keys-end",44),0,127),u=B(l),a=B(t),m=d(),h=d(),c=E(()=>Array(a.value+1-u.value).fill(0).map((n,v)=>v+u.value));return k({onDrag(o){o.event.preventDefault();let n=l.value+o.delta[0]/5;n+1<t.value&&(l.value=n)},onWheel(o){o.event.preventDefault();let n=l.value-o.velocities[0]/5;n+1<t.value&&(l.value=n)}},{domTarget:m,eventOptions:{passive:!1}}),k({onDrag(o){o.event.preventDefault();let n=t.value+o.delta[0]/5;n>l.value&&(t.value=n)},onWheel(o){o.event.preventDefault();let n=t.value-o.velocities[0]/5;n>l.value&&(t.value=n)}},{domTarget:h,eventOptions:{passive:!1}}),{begin:l,end:t,roundBegin:u,roundEnd:a,beginControl:m,endControl:h,keys:c}}const j=["viewBox"],G={class:"offset"},J={class:"begin"},L=["y","height","width","fill"],U=["y"],Z={class:"end"},z=["x","y","height","width","fill"],H=["x","y"],Q={class:"keys"},X=["x","width","height","fill","onMousedown","onMouseenter","onTouchstart","onMouseleave","onMouseup","onTouchend","onTouchcancel"],Y={__name:"MidiKeys",setup(l){const t=d(1200),u=d(500),a=d(50),{attack:m,release:h}=V(),{midi:c,midiAttack:o,midiRelease:n}=S(),{roundBegin:v,roundEnd:y,beginControl:F,endControl:I,keys:M}=W(),D=d(),p=d(!1);k({onPointerdown(s){p.value=!0},onPointerleave(s){p.value=!1},onPointercancel(s){p.value=!1},onPointerup(s){p.value=!1}},{domTarget:D});function b(s){console.log(s),o({number:s}),m(R(s).toFrequency())}function w(s){console.log(s,"stop"),n({number:s}),h(R(s).toFrequency())}return(s,oe)=>(g(),x(P,null,[i("p",null,_(p.value),1),(g(),x("svg",{class:"rounded w-full cursor-pointer min-w-70vw fullscreen-container overflow-hidden",id:"screen",viewBox:`0 -${a.value} ${t.value} ${u.value}`,version:"1.1",baseProfile:"full",xmlns:"http://www.w3.org/2000/svg",style:{"touch-action":"none"},ref_key:"keyboard",ref:D},[i("g",G,[i("g",J,[i("rect",{ref_key:"beginControl",ref:F,y:-a.value,height:a.value,width:t.value/2,fill:e($)(e(v),null,e(c).activeNotes[e(v)]?1:.1)},null,8,L),i("text",{class:"font-bold text-2xl",x:10,y:-a.value/3},_(e(T)[e(v)%12])+_(Math.floor((Math.round(e(v))+3)/12)-1),9,U)]),i("g",Z,[i("rect",{ref_key:"endControl",ref:I,x:t.value/2,y:-a.value,height:a.value,width:t.value/2,fill:e($)(e(y),null,e(c).activeNotes[e(y)]?1:.1)},null,8,z),i("text",{class:"font-bold text-2xl",x:t.value-10,"text-anchor":"end",y:-a.value/3},_(e(T)[e(y)%12])+_(Math.floor((e(y)+3)/12)-1),9,H)])]),i("g",Q,[(g(!0),x(P,null,q(e(M),(r,O)=>(g(),x("rect",{key:r,x:O*t.value/e(M).length,width:t.value/e(M).length,height:u.value,fill:e($)(r,null,e(c).activeNotes[r]?1:.1),onMousedown:f=>b(r),onMouseenter:f=>p.value?b(r):null,onTouchstart:f=>b(r),onMouseleave:f=>w(r),onMouseup:f=>w(r),onTouchend:f=>w(r),onTouchcancel:f=>w(r)},null,40,X))),128))])],8,j))],64))}},$e=JSON.parse('{"title":"MIDI keys","description":"Reactive colorful virtual piano keyboard","frontmatter":{"title":"MIDI keys","description":"Reactive colorful virtual piano keyboard","date":"2020-10-06T00:00:00.000Z","layout":"app"},"headers":[],"relativePath":"practice/experiments/keys/index.md","filePath":"practice/experiments/keys/index.md","lastUpdated":1700240387000}'),ee={name:"practice/experiments/keys/index.md"};function te(l,t,u,a,m,h){const c=Y;return g(),x("div",null,[K(c)])}const ke=A(ee,[["render",te]]);export{$e as __pageData,ke as default};
