import{F,u as S,I as te,$ as ne,a0 as W,a1 as j,a2 as Y,a3 as E,a4 as L,a5 as ae,n as C,a6 as se,a7 as oe,a8 as re,a9 as le,aa as ie}from"./chunks/theme.DKUtGHOP.js";import{c as ue}from"./chunks/simplex-noise.CZbXB3Em.js";import{r as N,D as G,I as w,M as A,a1 as J,q as p,f as d,s as u,z as V,l as x,u as f,C as Z,Z as T,v as z,_ as B,F as U,Y as Q,y as K,o as X,a2 as ce,e as de,m as pe,i as me,j as ve,aw as fe}from"./chunks/framework.Bbwy4zmA.js";import{p as k}from"./chunks/paper-full.BnrfrmqB.js";const H=ue(),I=N(0),ee=G({}),R=F(S("ambient-noise-zoom",100),50,500);te(()=>{I.value+=1});function xe({title:i="simplex",size:o=1,minSpeed:e=.001,maxSpeed:t=1e4}={}){const r=N(0),a=F(S(i+"-radius",Math.random()*250*o),1,250),s=F(S(i,Math.random()*1e3),e,t);w(I,()=>r.value+=s.value/1e4);const m=A(()=>ge(a.value,r.value)),_=A(()=>H(m.value.x/R.value,m.value.y/R.value));return ee[i]=G({polar:m,radius:a,speed:s,random:_}),{random:_,polar:m,progress:r,count:I,speed:s,radius:a}}function ge(i=1,o=0){let e=(o-90)*Math.PI/180;return{x:i*Math.cos(e),y:i*Math.sin(e)}}function O(){return O=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var e=arguments[o];for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(i[t]=e[t])}return i},O.apply(this,arguments)}var q=["","K","M","B"],_e={digits:1,uppercase:!0},be=function(i,o){if(o===void 0&&(o={}),isNaN(i))return 0;var e=Math.abs(i);if(e<1e3)return Number(i);for(var t=O({},_e,o),r=t.digits,a=t.uppercase,s=[0,1].includes(Math.sign(i))?1:-1,m=0,_="",g=0;g<=q.length;g++){var c=Math.pow(1e3,g);e>=c&&(m=e/c,_=a?q[g]:q[g].toLowerCase())}return""+(m-Math.floor(m)<=0||r===0?Math.floor(m*s):parseFloat(m*s).toFixed(r))+_};const ye={class:"flex-1 bg-light-400 dark-bg-dark-400 shadow relative w-full cursor-pointer min-w-25 rounded-lg select-none overflow-hidden"},he={class:"flex flex-col p-1 gap-0"},we={class:"px-1 pb-1"},ke={class:"flex gap-2 p-1"},$e={class:"flex relative border-t-1 border-current"},Ne={class:"flex-1 h-6 cursor-pointer","drag-options":{preventWindowScrollY:!0}},Se={class:"flex-1 h-6 cursor-pointer","drag-options":{preventWindowScrollY:!0}},h={__name:"clampedNoise",props:{instrument:{type:String,default:"inst"},title:{type:String,default:"random-value"},minSpeed:{type:Number,default:.001},maxSpeed:{type:Number,default:1e4},min:{type:Number,default:0},max:{type:Number,default:1},radius:{type:Number,default:1},precision:{type:Number,default:2}},emits:["random"],setup(i,{emit:o}){const e=i,t=o,r=A(()=>`ambient-${e.instrument}-${e.title}`),a=F(S(r.value+"-min",0),0,1),s=F(S(r.value+"-max",1),0,1);w([a,s],()=>{a.value>s.value&&(s.value=a.value),s.value<a.value&&(a.value=s.value)});const{random:m,speed:_,radius:g}=xe({title:r.value,size:e.radius}),c=A(()=>(m.value/2+.5)*(s.value-a.value)+a.value),b=A(()=>c.value*(e.max-e.min)+e.min);w(b,n=>t("random",n));function y(n){const l=(n.delta[0]-n.delta[1])/1e3;a.value+=l}function v(n){const l=(n.delta[0]-n.delta[1])/1e3;s.value+=l}return(n,l)=>{const M=ne,P=J("drag");return d(),p("div",ye,[u("div",he,[u("div",we,V(i.title),1),u("div",ke,[x(M,{class:"flex-1",modelValue:f(g),"onUpdate:modelValue":l[0]||(l[0]=D=>Z(g)?g.value=D:null),max:250,min:10,param:"Radius",fixed:0},null,8,["modelValue"]),x(M,{class:"flex-1",modelValue:f(_),"onUpdate:modelValue":l[1]||(l[1]=D=>Z(_)?_.value=D:null),max:i.maxSpeed,min:i.minSpeed,param:"Speed",step:1,fixed:0},null,8,["modelValue","max","min"])])]),u("div",$e,[T(u("div",Ne,null,512),[[P,y]]),T(u("div",Se,null,512),[[P,v]]),u("div",{class:"absolute left-0 top-0 text-right border-r-4 pr-2 pointer-events-none border-current",style:z({width:(b.value-e.min)/(e.max-e.min)*100+"%"})},V(f(be)(b.value.toFixed(e.precision))),5),T((d(),p("div",{class:"absolute bg-dark-700 bg-opacity-20 border-r-2 border-current py-2 h-full flex items-center cursor-pointer",style:z({width:f(a)*100+"%"})},l[2]||(l[2]=[u("div",{class:"h-2px bg-dark-100 dark-bg-light-100 flex-1"},null,-1)]),4)),[[P,y]]),T((d(),p("div",{class:"absolute bg-light-100 bg-opacity-20 border-l-2 border-current py-2 right-0 h-full h-full flex items-center cursor-pointer",style:z({width:(1-f(s))*100+"%"}),"drag-options":{preventWindowScrollY:!0}},l[3]||(l[3]=[u("div",{class:"h-2px bg-dark-100 dark-bg-light-100 flex-1"},null,-1)]),4)),[[P,v]])])])}}},Ce={class:"flex flex-col gap-4"},Me={class:"flex items-center flex-wrap"},Re={key:0,class:"i-la-play"},Pe={key:1,class:"i-la-pause"},Te={class:"flex flex-wrap gap-2"},Ae=["onClick"],Fe={class:"flex flex-wrap gap-4"},Ve={__name:"drone",setup(i){const o=S("ambient-synth-options",{oscillator:{type:"sawtooth"},envelope:{attack:1,decay:.1,sustain:.9,release:6},volume:1,harmonicity:2}),e=N(!1),t=N(0),r=N(1),{channel:a}=W("ambient-drone"),s=new j(o.value.volume).connect(a),m=new Y({type:"lowpass",frequency:1500,Q:0}).connect(s),_=new E(4).connect(m),g=new L(0).connect(_),c=new ae(o.value).connect(g),b=S("ambient-synth-note",0);return w(e,y=>{y?(c.triggerAttack(C[t.value]+r.value),b.value=t.value):c.triggerRelease()}),w(t,y=>{c.frequency.rampTo(C[y]+r.value,1)}),(y,v)=>(d(),p("div",Ce,[u("div",Me,[v[4]||(v[4]=u("div",{class:"font-bold"},"Bass",-1)),u("button",{class:"p-2",onClick:v[0]||(v[0]=n=>e.value=!e.value)},[e.value?(d(),p("div",Pe)):(d(),p("div",Re))]),u("div",Te,[(d(!0),p(U,null,Q(f(C),(n,l)=>(d(),p("button",{class:K(["p-1 text-xs",{active:l==t.value}]),key:n,onClick:M=>t.value=l},V(n),11,Ae))),128))])]),u("div",Fe,[x(h,{title:"Low pass",instrument:"FM",min:50,max:1e4,onRandom:v[1]||(v[1]=n=>f(m).frequency.rampTo(n))}),x(h,{title:"Pan",instrument:"FM",min:-1,onRandom:v[2]||(v[2]=n=>f(g).pan.rampTo(n))}),x(h,{title:"Volume",instrument:"FM",onRandom:v[3]||(v[3]=n=>f(s).gain.rampTo(n))})])]))}},ze=B(Ve,[["__scopeId","data-v-f7a8a8e1"]]),Be={class:"flex flex-col gap-4"},De={class:"flex items-center"},qe={key:0,class:"i-la-play"},Ie={key:1,class:"i-la-pause"},Oe={class:"flex flex-wrap gap-4"},We={__name:"noise",setup(i){const o=S("ambient-options",{noise:{type:"brown"},envelope:{attack:1,decay:.1,sustain:.9,release:6},volume:1}),e=N(!1),{channel:t}=W("ambient-noise"),r=new j(o.value.volume).connect(t),a=new Y({type:"lowpass",frequency:1500,Q:0}).connect(r),s=new se(4).connect(a),m=new L(0).connect(s),_=new oe(o.value).connect(m);return w(e,g=>{g?_.triggerAttack():_.triggerRelease()}),(g,c)=>(d(),p("div",Be,[u("div",De,[c[5]||(c[5]=u("div",{class:"font-bold"},"NOISE",-1)),u("button",{class:"p-2",onClick:c[0]||(c[0]=b=>e.value=!e.value)},[e.value?(d(),p("div",Ie)):(d(),p("div",qe))])]),u("div",Oe,[x(h,{title:"Bit crusher",instrument:"Noise",min:2,max:8,onRandom:c[1]||(c[1]=b=>f(s).bits.rampTo(b))}),x(h,{title:"Low pass",instrument:"Noise",min:50,max:1e4,onRandom:c[2]||(c[2]=b=>f(a).frequency.rampTo(b))}),x(h,{title:"Pan",instrument:"Noise",min:-1,max:1,onRandom:c[3]||(c[3]=b=>f(m).pan.rampTo(b))}),x(h,{title:"Volume",instrument:"Noise",onRandom:c[4]||(c[4]=b=>f(r).gain.rampTo(b))})])]))}},je=B(We,[["__scopeId","data-v-abcf903d"]]),Ye={class:"flex flex-col gap-4"},Le={class:"flex items-center flex-wrap"},Ue={key:0,class:"i-la-play"},Qe={key:1,class:"i-la-pause"},Ze={class:"flex flex-wrap gap-2"},Ee=["onClick"],Ge={class:"flex flex-wrap gap-4"},Je={__name:"arp",setup(i){const o=S("ambient-arp-options",{attackNoise:2,volume:20,resonance:20}),e=N(!1),t=N(0),r=N(4),{channel:a}=W("ambient-arp"),s=new j(o.value.volume).connect(a),m=new Y({type:"lowpass",frequency:1500,Q:0}).connect(s),_=new E(6).connect(m),g=new re({delayTime:"4t",feedback:.6}).connect(_),c=new L(0).connect(g),b=new le({attackNoise:2,resonance:.85,volume:10}).connect(c),y=new ie({callback(v,n){b.triggerAttackRelease(n+r.value,"8n",v)},values:[C[t.value],C[(t.value+7)%12]],pattern:"random",interval:"8n",humanize:!0});return w(t,v=>{y.values=[C[v],C[(v+7)%12]]}),w(e,v=>{v?y.start(0):y.stop()}),(v,n)=>(d(),p("div",Ye,[u("div",Le,[n[6]||(n[6]=u("div",{class:"font-bold"},"Pluck",-1)),u("button",{class:"p-2",onClick:n[0]||(n[0]=l=>e.value=!e.value)},[e.value?(d(),p("div",Qe)):(d(),p("div",Ue))]),u("div",Ze,[(d(!0),p(U,null,Q(f(C),(l,M)=>(d(),p("button",{class:K(["p-1 text-xs",{active:M==t.value}]),key:l,onClick:P=>t.value=M},V(l),11,Ee))),128))])]),u("div",Ge,[x(h,{title:"Octave",instrument:"Arp",min:2,max:6,onRandom:n[1]||(n[1]=l=>r.value=Math.round(l))}),x(h,{title:"Probability",instrument:"Arp",onRandom:n[2]||(n[2]=l=>f(y).probability=l)}),x(h,{title:"Low pass",instrument:"Arp",min:50,max:1e4,onRandom:n[3]||(n[3]=l=>f(m).frequency.rampTo(l))}),x(h,{title:"Pan",instrument:"Arp",min:-1,onRandom:n[4]||(n[4]=l=>f(c).pan.rampTo(l))}),x(h,{title:"Volume",instrument:"Arp",onRandom:n[5]||(n[5]=l=>f(s).gain.rampTo(l))})])]))}},Ke=B(Je,[["__scopeId","data-v-04159aa0"]]),Xe={__name:"paper-circle",props:{polar:{type:Object,default:()=>{}},radius:{type:Number,default:0},random:{type:Number,default:0}},setup(i){const o=i;return X(()=>{const e=new k.Shape.Circle({x:0,y:0},5),t=new k.Shape.Circle({x:+k.view.size.width/2,y:+k.view.size.height/2},o.radius);t.strokeWidth=2,w(()=>o.polar,r=>{e.position.x=r.x+k.view?.size?.width/2,e.position.y=r.y+k.view?.size?.width/2}),w(()=>o.radius,r=>t.radius=r),w(()=>o.random,r=>{let a=new k.Color(r);e.fillColor=a,t.strokeColor=a,e.radius=2+5*(r+1)})}),(e,t)=>(d(),p("span"))}},He={class:"relative mx-6 flex"},et={class:"absolute -left-2 text-xs"},$=512,tt={__name:"simplexPaper",setup(i){const o=N();X(()=>{k.setup(o.value),k.view.draw();const t=new k.Raster;t.position.x=$/2,t.position.y=$/2,t.width=$,t.height=$,w(R,r=>{for(let a=0;a<$;a++)for(let s=0;s<$;s++)t.setPixel(a,s,`hsl(0,0%,${(H((a-$/2)/r,(s-$/2)/r)+1)*50}%)`)},{immediate:!0})}),ce(()=>{k.project.clear()});function e(t){R.value-=t.delta[1]/10}return(t,r)=>{const a=J("drag");return d(),p("div",He,[u("div",{class:"absolute px-1 dark-bg-light-100 bg-dark-100 bg-opacity-20 dark-bg-opacity-20 -left-4 bottom-0 rounded-xl",style:z({height:f(R)/5+"%"})},[u("div",et,V(f(R).toFixed()),1)],4),T((d(),p("canvas",{class:"rounded-xl cursor-pointer flex-auto max-w-full",ref_key:"canvas",ref:o,width:$,height:$,"drag-options":{preventWindowScrollY:!0}},[(d(!0),p(U,null,Q(f(ee),s=>(d(),de(Xe,pe({key:s,ref_for:!0},s),null,16))),128))])),[[a,e]])])}}},nt={class:"flex flex-wrap gap-6 items-stretch"},at={__name:"ambience",setup(i){return(o,e)=>(d(),p("div",nt,[x(tt),x(je,{class:"p-2 rounded-xl w-full shadow-xl bg-light-800 dark-bg-dark-200",style:{flex:"1 1 320px"}}),x(ze,{class:"p-2 rounded-xl w-full shadow-xl bg-light-800 dark-bg-dark-200",style:{flex:"1 1 320px"}}),x(Ke,{class:"p-2 rounded-xl w-full shadow-xl bg-light-800 dark-bg-dark-200",style:{flex:"1 1 320px"}})]))}},st=B(at,[["__scopeId","data-v-3a388877"]]),ct=JSON.parse('{"title":"Ambient drone box","description":"A generative instrument for creating meditative sound landscapes","frontmatter":{"title":"Ambient drone box","description":"A generative instrument for creating meditative sound landscapes","date":"2022-04-28T00:00:00.000Z","cover":"ambience.png","layout":"app"},"headers":[],"relativePath":"practice/generative/ambience/index.md","filePath":"practice/generative/ambience/index.md","lastUpdated":1752981864000}'),ot={name:"practice/generative/ambience/index.md"},dt=Object.assign(ot,{setup(i){return(o,e)=>{const t=me("client-only");return d(),p("div",null,[x(t,null,{default:ve(()=>[x(st)]),_:1}),e[0]||(e[0]=u("h3",{id:"work-in-progress",tabindex:"-1"},[fe("Work in progress "),u("a",{class:"header-anchor",href:"#work-in-progress","aria-label":"Permalink to “Work in progress”"},"​")],-1))])}}});export{ct as __pageData,dt as default};
