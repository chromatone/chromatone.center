import{J as O,a2 as he,a3 as te,a4 as ne,a5 as se,a6 as pe,a7 as ae,a8 as ye,n as A,a9 as we,aa as ke,ab as $e,ac as Se,ad as Ne}from"./chunks/theme.BJ9F72QS.js";import{r as M,b as me,u as R,k as Me,d as $,c as D,W as ve,x as p,y as f,A as u,G as W,X as b,E as _,am as ce,C as q,H as Y,q as G,F as oe,B as re,z as fe,K as ie,L as le,o as _e,R as Re,M as Ce,a3 as Pe,N as Ae,ac as Fe,a1 as Te}from"./chunks/framework.CYx1s6BW.js";import{p as S}from"./chunks/paper-full.lICeExqx.js";const xe=Math.sqrt(3),ze=.5*(xe-1),j=(3-xe)/6,ue=n=>Math.floor(n)|0,de=new Float64Array([1,1,-1,1,1,-1,-1,-1,1,0,-1,0,1,0,-1,0,0,1,0,-1,0,1,0,-1]);function Ve(n=Math.random){const r=Ie(n),e=new Float64Array(r).map(a=>de[a%12*2]),t=new Float64Array(r).map(a=>de[a%12*2+1]);return function(s,o){let l=0,m=0,x=0;const d=(s+o)*ze,g=ue(s+d),h=ue(o+d),v=(g+h)*j,i=g-v,c=h-v,y=s-i,w=o-c;let C,L;y>w?(C=1,L=0):(C=0,L=1);const U=y-C+j,Q=w-L+j,E=y-1+2*j,X=w-1+2*j,J=g&255,K=h&255;let T=.5-y*y-w*w;if(T>=0){const P=J+r[K],I=e[P],B=t[P];T*=T,l=T*T*(I*y+B*w)}let z=.5-U*U-Q*Q;if(z>=0){const P=J+C+r[K+L],I=e[P],B=t[P];z*=z,m=z*z*(I*U+B*Q)}let V=.5-E*E-X*X;if(V>=0){const P=J+1+r[K+1],I=e[P],B=t[P];V*=V,x=V*V*(I*E+B*X)}return 70*(l+m+x)}}function Ie(n){const e=new Uint8Array(512);for(let t=0;t<512/2;t++)e[t]=t;for(let t=0;t<512/2-1;t++){const a=t+~~(n()*(256-t)),s=e[t];e[t]=e[a],e[a]=s}for(let t=256;t<512;t++)e[t]=e[t-256];return e}const ge=Ve(),H=M(0),be=me({}),F=O(R("ambient-noise-zoom",100),50,500);Me(()=>{H.value+=1});function Be({title:n="simplex",size:r=1,minSpeed:e=.001,maxSpeed:t=1e4}={}){const a=M(0),s=O(R(n+"-radius",Math.random()*250*r),1,250),o=O(R(n,Math.random()*1e3),e,t);$(H,()=>a.value+=o.value/1e4);const l=D(()=>je(s.value,a.value)),m=D(()=>ge(l.value.x/F.value,l.value.y/F.value));return be[n]=me({polar:l,radius:s,speed:o,random:m}),{random:m,polar:l,progress:a,count:H,speed:o,radius:s}}function je(n=1,r=0){let e=(r-90)*Math.PI/180;return{x:n*Math.cos(e),y:n*Math.sin(e)}}function ee(){return ee=Object.assign||function(n){for(var r=1;r<arguments.length;r++){var e=arguments[r];for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t])}return n},ee.apply(this,arguments)}var Z=["","K","M","B"],qe={digits:1,uppercase:!0},De=function(n,r){if(r===void 0&&(r={}),isNaN(n))return 0;var e=Math.abs(n);if(e<1e3)return Number(n);for(var t=ee({},qe,r),a=t.digits,s=t.uppercase,o=[0,1].includes(Math.sign(n))?1:-1,l=0,m="",x=0;x<=Z.length;x++){var d=Math.pow(1e3,x);e>=d&&(l=e/d,m=s?Z[x]:Z[x].toLowerCase())}return""+(l-Math.floor(l)<=0||a===0?Math.floor(l*o):parseFloat(l*o).toFixed(a))+m};const Oe={class:"flex-1 bg-light-400 dark-bg-dark-400 shadow relative w-full cursor-pointer min-w-25 rounded-lg select-none overflow-hidden"},We={class:"flex flex-col p-1 gap-0"},Le={class:"px-1 pb-1"},Ye={class:"flex gap-2 p-1"},Ge={class:"flex relative border-t-1 border-current"},Ue={class:"flex-1 h-6 cursor-pointer","drag-options":{preventWindowScrollY:!0}},Qe={class:"flex-1 h-6 cursor-pointer","drag-options":{preventWindowScrollY:!0}},Ee=u("div",{class:"h-2px bg-dark-100 dark-bg-light-100 flex-1"},null,-1),Xe=[Ee],Je=u("div",{class:"h-2px bg-dark-100 dark-bg-light-100 flex-1"},null,-1),Ke=[Je],k={__name:"clampedNoise",props:{instrument:{type:String,default:"inst"},title:{type:String,default:"random-value"},minSpeed:{type:Number,default:.001},maxSpeed:{type:Number,default:1e4},min:{type:Number,default:0},max:{type:Number,default:1},radius:{type:Number,default:1},precision:{type:Number,default:2}},emits:["random"],setup(n,{emit:r}){const e=n,t=r,a=D(()=>`ambient-${e.instrument}-${e.title}`),s=O(R(a.value+"-min",0),0,1),o=O(R(a.value+"-max",1),0,1);$([s,o],()=>{s.value>o.value&&(o.value=s.value),o.value<s.value&&(s.value=o.value)});const{random:l,speed:m,radius:x}=Be({title:a.value,size:e.radius}),d=D(()=>(l.value/2+.5)*(o.value-s.value)+s.value),g=D(()=>d.value*(e.max-e.min)+e.min);$(g,i=>t("random",i));function h(i){const c=(i.delta[0]-i.delta[1])/1e3;s.value+=c}function v(i){const c=(i.delta[0]-i.delta[1])/1e3;o.value+=c}return(i,c)=>{const y=he,w=ve("drag");return p(),f("div",Oe,[u("div",We,[u("div",Le,W(n.title),1),u("div",Ye,[b(y,{class:"flex-1",modelValue:_(x),"onUpdate:modelValue":c[0]||(c[0]=C=>ce(x)?x.value=C:null),max:250,min:10,param:"Radius",fixed:0},null,8,["modelValue"]),b(y,{class:"flex-1",modelValue:_(m),"onUpdate:modelValue":c[1]||(c[1]=C=>ce(m)?m.value=C:null),max:n.maxSpeed,min:n.minSpeed,param:"Speed",step:1,fixed:0},null,8,["modelValue","max","min"])])]),u("div",Ge,[q(u("div",Ue,null,512),[[w,h]]),q(u("div",Qe,null,512),[[w,v]]),u("div",{class:"absolute left-0 top-0 text-right border-r-4 pr-2 pointer-events-none border-current",style:Y({width:(g.value-e.min)/(e.max-e.min)*100+"%"})},W(_(De)(g.value.toFixed(e.precision))),5),q((p(),f("div",{class:"absolute bg-dark-700 bg-opacity-20 border-r-2 border-current py-2 h-full flex items-center cursor-pointer",style:Y({width:_(s)*100+"%"})},Xe,4)),[[w,h]]),q((p(),f("div",{class:"absolute bg-light-100 bg-opacity-20 border-l-2 border-current py-2 right-0 h-full h-full flex items-center cursor-pointer",style:Y({width:(1-_(o))*100+"%"}),"drag-options":{preventWindowScrollY:!0}},Ke,4)),[[w,v]])])])}}},Ze=n=>(ie("data-v-0ba7764c"),n=n(),le(),n),He={class:"flex flex-col gap-4"},et={class:"flex items-center flex-wrap"},tt=Ze(()=>u("div",{class:"font-bold"},"Bass",-1)),nt={key:0,class:"i-la-play"},st={key:1,class:"i-la-pause"},at={class:"flex flex-wrap gap-2"},ot=["onClick"],rt={class:"flex flex-wrap gap-4"},it={__name:"drone",setup(n){const r=R("ambient-synth-options",{oscillator:{type:"sawtooth"},envelope:{attack:1,decay:.1,sustain:.9,release:6},volume:1,harmonicity:2}),e=M(!1),t=M(0),a=M(1),{channel:s}=te("ambient-drone"),o=new ne(r.value.volume).connect(s),l=new se({type:"lowpass",frequency:1500,Q:0}).connect(o),m=new pe(4).connect(l),x=new ae(0).connect(m),d=new ye(r.value).connect(x),g=R("ambient-synth-note",0);return $(e,h=>{h?(d.triggerAttack(A[t.value]+a.value),g.value=t.value):d.triggerRelease()}),$(t,h=>{d.frequency.rampTo(A[h]+a.value,1)}),(h,v)=>(p(),f("div",He,[u("div",et,[tt,u("button",{class:"p-2",onClick:v[0]||(v[0]=i=>e.value=!e.value)},[e.value?(p(),f("div",st)):(p(),f("div",nt))]),u("div",at,[(p(!0),f(oe,null,re(_(A),(i,c)=>(p(),f("button",{class:fe(["p-1 text-xs",{active:c==t.value}]),key:i,onClick:y=>t.value=c},W(i),11,ot))),128))])]),u("div",rt,[b(k,{title:"Low pass",instrument:"FM",min:50,max:1e4,onRandom:v[1]||(v[1]=i=>_(l).frequency.rampTo(i))}),b(k,{title:"Pan",instrument:"FM",min:-1,onRandom:v[2]||(v[2]=i=>_(x).pan.rampTo(i))}),b(k,{title:"Volume",instrument:"FM",onRandom:v[3]||(v[3]=i=>_(o).gain.rampTo(i))})])]))}},lt=G(it,[["__scopeId","data-v-0ba7764c"]]),ct=n=>(ie("data-v-2f3315bb"),n=n(),le(),n),ut={class:"flex flex-col gap-4"},dt={class:"flex items-center"},pt=ct(()=>u("div",{class:"font-bold"},"NOISE",-1)),mt={key:0,class:"i-la-play"},vt={key:1,class:"i-la-pause"},ft={class:"flex flex-wrap gap-4"},_t={__name:"noise",setup(n){const r=R("ambient-options",{noise:{type:"brown"},envelope:{attack:1,decay:.1,sustain:.9,release:6},volume:1}),e=M(!1),{channel:t}=te("ambient-noise"),a=new ne(r.value.volume).connect(t),s=new se({type:"lowpass",frequency:1500,Q:0}).connect(a),o=new we(4).connect(s),l=new ae(0).connect(o),m=new ke(r.value).connect(l);return $(e,x=>{x?m.triggerAttack():m.triggerRelease()}),(x,d)=>(p(),f("div",ut,[u("div",dt,[pt,u("button",{class:"p-2",onClick:d[0]||(d[0]=g=>e.value=!e.value)},[e.value?(p(),f("div",vt)):(p(),f("div",mt))])]),u("div",ft,[b(k,{title:"Bit crusher",instrument:"Noise",min:2,max:8,onRandom:d[1]||(d[1]=g=>_(o).bits.rampTo(g))}),b(k,{title:"Low pass",instrument:"Noise",min:50,max:1e4,onRandom:d[2]||(d[2]=g=>_(s).frequency.rampTo(g))}),b(k,{title:"Pan",instrument:"Noise",min:-1,max:1,onRandom:d[3]||(d[3]=g=>_(l).pan.rampTo(g))}),b(k,{title:"Volume",instrument:"Noise",onRandom:d[4]||(d[4]=g=>_(a).gain.rampTo(g))})])]))}},xt=G(_t,[["__scopeId","data-v-2f3315bb"]]),gt=n=>(ie("data-v-c2bf82ce"),n=n(),le(),n),bt={class:"flex flex-col gap-4"},ht={class:"flex items-center flex-wrap"},yt=gt(()=>u("div",{class:"font-bold"},"Pluck",-1)),wt={key:0,class:"i-la-play"},kt={key:1,class:"i-la-pause"},$t={class:"flex flex-wrap gap-2"},St=["onClick"],Nt={class:"flex flex-wrap gap-4"},Mt={__name:"arp",setup(n){const r=R("ambient-arp-options",{attackNoise:2,volume:20,resonance:20}),e=M(!1),t=M(0),a=M(4),{channel:s}=te("ambient-arp"),o=new ne(r.value.volume).connect(s),l=new se({type:"lowpass",frequency:1500,Q:0}).connect(o),m=new pe(6).connect(l),x=new $e({delayTime:"4t",feedback:.6}).connect(m),d=new ae(0).connect(x),g=new Se({attackNoise:2,resonance:.85,volume:10}).connect(d),h=new Ne({callback(v,i){g.triggerAttackRelease(i+a.value,"8n",v)},values:[A[t.value],A[(t.value+7)%12]],pattern:"random",interval:"8n",humanize:!0});return $(t,v=>{h.values=[A[v],A[(v+7)%12]]}),$(e,v=>{v?h.start(0):h.stop()}),(v,i)=>(p(),f("div",bt,[u("div",ht,[yt,u("button",{class:"p-2",onClick:i[0]||(i[0]=c=>e.value=!e.value)},[e.value?(p(),f("div",kt)):(p(),f("div",wt))]),u("div",$t,[(p(!0),f(oe,null,re(_(A),(c,y)=>(p(),f("button",{class:fe(["p-1 text-xs",{active:y==t.value}]),key:c,onClick:w=>t.value=y},W(c),11,St))),128))])]),u("div",Nt,[b(k,{title:"Octave",instrument:"Arp",min:2,max:6,onRandom:i[1]||(i[1]=c=>a.value=Math.round(c))}),b(k,{title:"Probability",instrument:"Arp",onRandom:i[2]||(i[2]=c=>_(h).probability=c)}),b(k,{title:"Low pass",instrument:"Arp",min:50,max:1e4,onRandom:i[3]||(i[3]=c=>_(l).frequency.rampTo(c))}),b(k,{title:"Pan",instrument:"Arp",min:-1,onRandom:i[4]||(i[4]=c=>_(d).pan.rampTo(c))}),b(k,{title:"Volume",instrument:"Arp",onRandom:i[5]||(i[5]=c=>_(o).gain.rampTo(c))})])]))}},Rt=G(Mt,[["__scopeId","data-v-c2bf82ce"]]),Ct={__name:"paper-circle",props:{polar:{type:Object,default:()=>{}},radius:{type:Number,default:0},random:{type:Number,default:0}},setup(n){const r=n;return _e(()=>{const e=new S.Shape.Circle({x:0,y:0},5),t=new S.Shape.Circle({x:+S.view.size.width/2,y:+S.view.size.height/2},r.radius);t.strokeWidth=2,$(()=>r.polar,a=>{var s,o,l,m;e.position.x=a.x+((o=(s=S.view)==null?void 0:s.size)==null?void 0:o.width)/2,e.position.y=a.y+((m=(l=S.view)==null?void 0:l.size)==null?void 0:m.width)/2}),$(()=>r.radius,a=>t.radius=a),$(()=>r.random,a=>{let s=new S.Color(a);e.fillColor=s,t.strokeColor=s,e.radius=2+5*(a+1)})}),(e,t)=>(p(),f("span"))}},Pt={class:"relative mx-6 flex"},At={class:"absolute -left-2 text-xs"},N=512,Ft={__name:"simplexPaper",setup(n){const r=M();_e(()=>{S.setup(r.value),S.view.draw();const t=new S.Raster;t.position.x=N/2,t.position.y=N/2,t.width=N,t.height=N,$(F,a=>{for(let s=0;s<N;s++)for(let o=0;o<N;o++)t.setPixel(s,o,`hsl(0,0%,${(ge((s-N/2)/a,(o-N/2)/a)+1)*50}%)`)},{immediate:!0})}),Re(()=>{S.project.clear()});function e(t){F.value-=t.delta[1]/10}return(t,a)=>{const s=ve("drag");return p(),f("div",Pt,[u("div",{class:"absolute px-1 dark-bg-light-100 bg-dark-100 bg-opacity-20 dark-bg-opacity-20 -left-4 bottom-0 rounded-xl",style:Y({height:_(F)/5+"%"})},[u("div",At,W(_(F).toFixed()),1)],4),q((p(),f("canvas",{class:"rounded-xl cursor-pointer flex-auto max-w-full",ref_key:"canvas",ref:r,width:N,height:N,"drag-options":{preventWindowScrollY:!0}},[(p(!0),f(oe,null,re(_(be),o=>(p(),Ce(Ct,Pe({key:o,ref_for:!0},o),null,16))),128))])),[[s,e]])])}}},Tt={class:"flex flex-wrap gap-6 items-stretch"},zt={__name:"ambience",setup(n){return(r,e)=>(p(),f("div",Tt,[b(Ft),b(xt,{class:"p-2 rounded-xl w-full shadow-xl bg-light-800 dark-bg-dark-200",style:{flex:"1 1 320px"}}),b(lt,{class:"p-2 rounded-xl w-full shadow-xl bg-light-800 dark-bg-dark-200",style:{flex:"1 1 320px"}}),b(Rt,{class:"p-2 rounded-xl w-full shadow-xl bg-light-800 dark-bg-dark-200",style:{flex:"1 1 320px"}})]))}},Vt=G(zt,[["__scopeId","data-v-3a388877"]]),It=u("h3",{id:"work-in-progress",tabindex:"-1"},[Fe("Work in progress "),u("a",{class:"header-anchor",href:"#work-in-progress","aria-label":'Permalink to "Work in progress"'},"​")],-1),Ot=JSON.parse('{"title":"Ambient drone box","description":"A generative instrument for creating meditative sound landscapes","frontmatter":{"title":"Ambient drone box","description":"A generative instrument for creating meditative sound landscapes","date":"2022-04-28T00:00:00.000Z","cover":"ambience.png","layout":"app"},"headers":[],"relativePath":"practice/generative/ambience/index.md","filePath":"practice/generative/ambience/index.md","lastUpdated":1723548427000}'),Bt={name:"practice/generative/ambience/index.md"},Wt=Object.assign(Bt,{setup(n){return(r,e)=>{const t=Te("client-only");return p(),f("div",null,[b(t,null,{default:Ae(()=>[b(Vt)]),_:1}),It])}}});export{Ot as __pageData,Wt as default};
