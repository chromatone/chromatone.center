import{_ as L}from"./chunks/ChromaKeys.MHT78e33.js";import{J as l,Q as q,w as M,n as G,g as i}from"./chunks/theme.CWquGTT4.js";import{D as N,ak as K,at as Q,au as U,r as B,c as s,f as W,d as X,E as u,F as d,G as t,L as o,I as c,C as v,P as Z,V as h,W as f,O as j,J as Y,K as tt,X as et,a4 as at}from"./chunks/framework.Ci2j13v1.js";const S=_=>(Y("data-v-610516c6"),_=_(),tt(),_),ot={class:"bg-light-900 dark-bg-dark-800",id:"screen"},st=S(()=>t("div",{class:"text-4xl text-center"},"RANDOM JAM ",-1)),lt={class:"flex items-center justify-between gap-2"},nt=S(()=>t("div",{class:"i-system-uicons-reset -scale-y-100"},null,-1)),rt=[nt],it={class:"overflow-clip rounded-lg flex items-center border-1 relative border-dark-200 border-op-30 dark-border-light-200 dark-border-op-40 py-6"},ct={class:"absolute left-2 z-10"},ut={class:"absolute right-2 z-10"},dt={class:"px-2 z-10 mx-auto tabular-nums absolute -right-18 dark-bg-dark-200 text-right text-nowrap bg-light-300 rounded-xl op-90"},pt={class:"flex flex-wrap gap-4 text-center relative items-center justify-stretch mb-8"},mt={class:"flex flex-col gap-2 w-full max-h-30vh"},vt={class:"flex flex-col gap-2 w-full"},_t={class:"flex gap-2 w-full"},ht={class:"flex gap-2 w-full"},ft={class:"flex gap-2 w-full"},xt={class:"flex gap-2 w-full"},gt={class:"flex gap-2 w-full"},bt=S(()=>t("div",{class:"flex-0"},null,-1)),Mt={__name:"JamRandom",setup(_){const{isDark:k}=K();var T=102,z=20;function P(e,x){let D=1-Math.random(),g=1-Math.random();var b=Math.sqrt(-2*Math.log(D))*Math.cos(2*Math.PI*g);return e+x*b}const I=Q(()=>l.bpm,{duration:1e3,transition:U.easeInOutCubic}),p=B(!1),n=B(Date.now()),w=q(256,64,1024);function J(){p.value||(l.stopped=!0,p.value=!0,l.bpm=Math.round(P(T,z)),i.chroma=Math.random()>.7?"101011010101":"101101011010",i.tonic=Math.round(Math.random()*12),setTimeout(()=>{p.value=!1,l.playing=!0,n.value=Date.now()},1e3))}const m=s(()=>{var e;return(e=l.position)==null?void 0:e.split(":").map(Number)}),F=s(()=>{var e;return((e=m.value)==null?void 0:e[0])/w.value}),r=s(()=>M(l.color).lighten(k.value?0:.3).desaturate(.2).toHex()),$=s(()=>M(G(i.tonic)).lighten(k.value?0:.3).desaturate(.2).toHex()),y=s(()=>M(r.value).mix($.value).toHex()),H=e=>[Math.floor(e),Math.round((e-Math.floor(e))*60)],O=e=>Math.round(e*60*1e3),R=s(()=>H(w.value*4/l.bpm)),V=s(()=>O(w.value*4/l.bpm)),A=s(()=>n.value+V.value),C=W(),E=s(()=>[Math.floor((C.value-n.value)/(1e3*60)),Math.round((C.value-n.value)%(1e3*60)/1e3)]);return X(C,e=>{e>A.value&&J()}),(e,x)=>{var g,b;const D=L;return u(),d("div",ot,[t("div",{class:"flex flex-col gap-4 p-4 justify-between relative items-stretch min-h-100vh transition duration-1000",style:o({backgroundColor:v(M)(y.value).alpha(.3).toHex()})},[st,t("div",lt,[t("div",{class:"text-center text-2xl sm-text-4xl tabular-nums rounded-full px-4 py-2 shadow",style:o([{flex:"1 1 140px"},{backgroundColor:r.value}])},c(v(I).toFixed())+" BPM",5),t("button",{class:"transition duration-1000 text-4xl bg-dark-400 p-4 rounded-full shadow-xl",onClick:x[0]||(x[0]=a=>J()),style:o({backgroundColor:y.value})},[t("div",{class:Z(["p-0",{"animate-spin":p.value}])},rt,2)],4),t("div",{class:"text-2xl sm-text-4xl text-center rounded-full px-4 py-2 shadow",style:o([{flex:"1 1 140px"},{backgroundColor:$.value}])},c(v(i).note.name)+" "+c((b=(g=v(i))==null?void 0:g.set)==null?void 0:b.name),5)]),t("div",it,[t("div",ct,c(new Date(n.value).toTimeString().slice(0,5)),1),t("div",ut,c(new Date(A.value).toTimeString().slice(0,5)),1),t("div",{class:"bg-dark-400 transition duration-300 top-0 bottom-0 left-0 absolute flex items-center",style:o({backgroundColor:y.value,width:`${F.value*100}%`})},[t("div",dt,c(E.value.join(" m "))+" s / "+c(R.value.join(" m "))+" s",1)],4)]),t("div",pt,[t("div",mt,[t("div",vt,[t("div",_t,[(u(),d(h,null,f(4,a=>t("div",{class:"p-1 bit",style:o({backgroundColor:a-1==m.value[1]?r.value:"transparent"})},null,4)),64))]),t("div",ht,[(u(),d(h,null,f(4,a=>t("div",{class:"p-2 bit",style:o({backgroundColor:a-1==m.value[0]%4?r.value:"transparent"})},null,4)),64))]),t("div",ft,[(u(),d(h,null,f(4,a=>t("div",{class:"p-3 bit",style:o({backgroundColor:a-1==Math.floor(m.value[0]/4)%4?r.value:"transparent"})},null,4)),64))]),t("div",xt,[(u(),d(h,null,f(4,a=>t("div",{class:"p-4 bit",style:o({backgroundColor:a-1==Math.floor(m.value[0]/4/4)%4?r.value:"transparent"})},null,4)),64))]),t("div",gt,[(u(),d(h,null,f(4,a=>t("div",{class:"p-5 bit",style:o({backgroundColor:a-1==Math.floor(m.value[0]/4/4/4)%4?r.value:"transparent"})},null,4)),64))])])])]),j(D,{class:"max-h-35vh",title:!1,chroma:v(i).chroma,pitch:v(i).tonic},null,8,["chroma","pitch"]),bt],4)])}}},kt=N(Mt,[["__scopeId","data-v-610516c6"]]),St=JSON.parse('{"title":"Random Jam","description":"A simple randomizer for basic jam parameters - BPM, Tonic and Scale.","frontmatter":{"title":"Random Jam","description":"A simple randomizer for basic jam parameters - BPM, Tonic and Scale.","date":"2024-04-30T00:00:00.000Z","topContent":true,"cover":"jam.png","layout":"app"},"headers":[],"relativePath":"practice/jam/random/index.md","filePath":"practice/jam/random/index.md","lastUpdated":1714381463000}'),wt={name:"practice/jam/random/index.md"};function yt(_,k,T,z,P,I){const p=kt,n=at("client-only");return u(),d("div",null,[j(n,null,{default:et(()=>[j(p)]),_:1})])}const Tt=N(wt,[["render",yt]]);export{St as __pageData,Tt as default};
