import{L as l,Q as L,w as y,n as V,g as r,D as G}from"./chunks/theme.DhMPzJ1A.js";import{q as N,af as K,at as Q,au as U,r as S,c as o,f as W,d as Z,v as i,x as c,z as t,G as s,E as h,D as m,y as X,F as _,A as x,W as T,J as Y,K as tt,M as et,a4 as at}from"./chunks/framework.DbgYySub.js";const z=v=>(Y("data-v-9f386d55"),v=v(),tt(),v),ot={class:"bg-light-900 dark-bg-dark-800",id:"screen"},st=z(()=>t("div",{class:"text-4xl text-center"},"RANDOM JAM ",-1)),lt={class:"flex items-center justify-between gap-2"},nt=z(()=>t("div",{class:"i-system-uicons-reset -scale-y-100"},null,-1)),rt=[nt],it={class:"overflow-clip rounded-lg flex items-center border-1 relative border-dark-200 border-op-30 dark-border-light-200 dark-border-op-40 py-6"},ct={class:"absolute left-2 z-10"},ut={class:"absolute right-2 z-10"},dt={class:"flex flex-wrap gap-4 text-center relative items-center justify-stretch mb-8"},pt={class:"flex flex-col gap-2 w-full max-h-30vh"},mt={class:"flex flex-col gap-2 w-full"},vt={class:"flex gap-2 w-full"},ft={class:"flex gap-2 w-full"},ht={class:"flex gap-2 w-full"},_t={class:"flex gap-2 w-full"},xt={class:"flex gap-2 w-full"},bt=z(()=>t("div",{class:"flex-0"},null,-1)),gt={__name:"JamRandom",setup(v){const{isDark:k}=K();var B=102,A=20;function P(e,b){let D=1-Math.random(),g=1-Math.random();var M=Math.sqrt(-2*Math.log(D))*Math.cos(2*Math.PI*g);return e+b*M}const $=Q(()=>l.bpm,{duration:1e3,transition:U.easeInOutCubic}),u=S(!1),d=S(Date.now()),w=L(256,64,1024);function I(){u.value||(l.stopped=!0,u.value=!0,l.bpm=Math.round(P(B,A)),r.chroma=Math.random()>.7?"101011010101":"101101011010",r.tonic=Math.round(Math.random()*12),setTimeout(()=>{u.value=!1,l.playing=!0,d.value=Date.now()},1e3))}const p=o(()=>{var e;return(e=l.position)==null?void 0:e.split(":").map(Number)}),F=o(()=>{var e;return((e=p.value)==null?void 0:e[0])/w.value}),n=o(()=>y(l.color).lighten(k.value?0:.3).desaturate(.2).toHex()),J=o(()=>y(V(r.tonic)).lighten(k.value?0:.3).desaturate(.2).toHex()),C=o(()=>y(n.value).mix(J.value).toHex()),H=e=>[Math.floor(e),Math.round((e-Math.floor(e))*60)],R=e=>Math.round(e*60*1e3);o(()=>H(w.value*4/l.bpm));const O=o(()=>R(w.value*4/l.bpm)),j=o(()=>d.value+O.value),f=W(),q=o(()=>[Math.floor((f.value-d.value)/(1e3*60)),Math.round((f.value-d.value)%(1e3*60)/1e3)]),E=o(()=>[Math.floor((j.value-f.value)/(1e3*60)),Math.round((j.value-f.value)%(1e3*60)/1e3)]);return Z(f,e=>{e>j.value&&I()}),S(!1),(e,b)=>{var g,M;const D=G;return i(),c("div",ot,[t("div",{class:"flex flex-col gap-4 p-4 justify-between relative items-stretch min-h-100vh transition duration-1000",style:s({backgroundColor:m(y)(C.value).alpha(.3).toHex()})},[st,t("div",lt,[t("div",{class:"text-center text-2xl sm-text-4xl tabular-nums rounded-full px-4 py-2 shadow",style:s([{flex:"1 1 140px"},{backgroundColor:n.value}])},h(m($).toFixed())+" BPM",5),t("button",{class:"transition duration-1000 text-4xl bg-dark-400 p-4 rounded-full shadow-xl",onClick:b[0]||(b[0]=a=>I()),style:s({backgroundColor:C.value})},[t("div",{class:X(["p-0",{"animate-spin":u.value}])},rt,2)],4),t("div",{class:"text-2xl sm-text-4xl text-center rounded-full px-4 py-2 shadow",style:s([{flex:"1 1 140px"},{backgroundColor:J.value}])},h(m(r).note.name)+" "+h((M=(g=m(r))==null?void 0:g.set)==null?void 0:M.name),5)]),t("div",it,[t("div",ct,h(q.value.filter(Boolean).join(" m "))+" s",1),t("div",ut,"-"+h(E.value.filter(Boolean).join(" m "))+" s",1),t("div",{class:"bg-dark-400 transition duration-300 top-0 bottom-0 left-0 absolute flex items-center",style:s({backgroundColor:C.value,width:`${F.value*100}%`})},null,4)]),t("div",dt,[t("div",pt,[t("div",mt,[t("div",vt,[(i(),c(_,null,x(4,a=>t("div",{class:"p-1 bit",style:s({backgroundColor:a-1==p.value[1]?n.value:"transparent"})},null,4)),64))]),t("div",ft,[(i(),c(_,null,x(4,a=>t("div",{class:"p-2 bit",style:s({backgroundColor:a-1==p.value[0]%4?n.value:"transparent"})},null,4)),64))]),t("div",ht,[(i(),c(_,null,x(4,a=>t("div",{class:"p-3 bit",style:s({backgroundColor:a-1==Math.floor(p.value[0]/4)%4?n.value:"transparent"})},null,4)),64))]),t("div",_t,[(i(),c(_,null,x(4,a=>t("div",{class:"p-4 bit",style:s({backgroundColor:a-1==Math.floor(p.value[0]/4/4)%4?n.value:"transparent"})},null,4)),64))]),t("div",xt,[(i(),c(_,null,x(4,a=>t("div",{class:"p-5 bit",style:s({backgroundColor:a-1==Math.floor(p.value[0]/4/4/4)%4?n.value:"transparent"})},null,4)),64))])])])]),T(D,{class:"max-h-35vh",title:!1,chroma:m(r).chroma,pitch:m(r).tonic},null,8,["chroma","pitch"]),bt],4)])}}},Mt=N(gt,[["__scopeId","data-v-9f386d55"]]),jt=JSON.parse('{"title":"Random Jam","description":"A simple randomizer for basic jam parameters - BPM, Tonic and Scale.","frontmatter":{"title":"Random Jam","description":"A simple randomizer for basic jam parameters - BPM, Tonic and Scale.","date":"2024-04-30T00:00:00.000Z","topContent":true,"cover":"jam.png","layout":"app"},"headers":[],"relativePath":"practice/jam/random/index.md","filePath":"practice/jam/random/index.md","lastUpdated":1716658162000}'),yt={name:"practice/jam/random/index.md"};function kt(v,k,B,A,P,$){const u=Mt,d=at("client-only");return i(),c("div",null,[T(d,null,{default:et(()=>[T(u)]),_:1})])}const Dt=N(yt,[["render",kt]]);export{jt as __pageData,Dt as default};
