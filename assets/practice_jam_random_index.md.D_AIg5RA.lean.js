import{ag as l,I as U,w as y,n as V,g as r,_ as q}from"./chunks/theme.D8bEcdRX.js";import{B as F,U as G,aw as K,ax as Q,r as D,c as o,f as Z,d as W,C as i,D as c,F as e,M as s,L as h,K as m,E as X,G as _,H as x,a0 as B,P as Y,Q as ee,S as te,a5 as ae}from"./chunks/framework.BmjQO8gg.js";const T=v=>(Y("data-v-9f386d55"),v=v(),ee(),v),oe={class:"bg-light-900 dark-bg-dark-800",id:"screen"},se=T(()=>e("div",{class:"text-4xl text-center"},"RANDOM JAM ",-1)),le={class:"flex items-center justify-between gap-2"},ne=T(()=>e("div",{class:"i-system-uicons-reset -scale-y-100"},null,-1)),re=[ne],ie={class:"overflow-clip rounded-lg flex items-center border-1 relative border-dark-200 border-op-30 dark-border-light-200 dark-border-op-40 py-6"},ce={class:"absolute left-2 z-10"},ue={class:"absolute right-2 z-10"},de={class:"flex flex-wrap gap-4 text-center relative items-center justify-stretch mb-8"},pe={class:"flex flex-col gap-2 w-full max-h-30vh"},me={class:"flex flex-col gap-2 w-full"},ve={class:"flex gap-2 w-full"},fe={class:"flex gap-2 w-full"},he={class:"flex gap-2 w-full"},_e={class:"flex gap-2 w-full"},xe={class:"flex gap-2 w-full"},be=T(()=>e("div",{class:"flex-0"},null,-1)),ge={__name:"JamRandom",setup(v){const{isDark:w}=G();var P=102,$=20;function z(t,b){let S=1-Math.random(),g=1-Math.random();var M=Math.sqrt(-2*Math.log(S))*Math.cos(2*Math.PI*g);return t+b*M}const I=K(()=>l.bpm,{duration:1e3,transition:Q.easeInOutCubic}),u=D(!1),d=D(Date.now()),k=U(256,64,1024);function A(){u.value||(l.stopped=!0,u.value=!0,l.bpm=Math.round(z(P,$)),r.chroma=Math.random()>.7?"101011010101":"101101011010",r.tonic=Math.round(Math.random()*12),setTimeout(()=>{u.value=!1,l.playing=!0,d.value=Date.now()},1e3))}const p=o(()=>{var t;return(t=l.position)==null?void 0:t.split(":").map(Number)}),H=o(()=>{var t;return((t=p.value)==null?void 0:t[0])/k.value}),n=o(()=>y(l.color).lighten(w.value?0:.3).desaturate(.2).toHex()),N=o(()=>y(V(r.tonic)).lighten(w.value?0:.3).desaturate(.2).toHex()),C=o(()=>y(n.value).mix(N.value).toHex()),J=t=>[Math.floor(t),Math.round((t-Math.floor(t))*60)],R=t=>Math.round(t*60*1e3);o(()=>J(k.value*4/l.bpm));const O=o(()=>R(k.value*4/l.bpm)),j=o(()=>d.value+O.value),f=Z(),E=o(()=>[Math.floor((f.value-d.value)/(1e3*60)),Math.round((f.value-d.value)%(1e3*60)/1e3)]),L=o(()=>[Math.floor((j.value-f.value)/(1e3*60)),Math.round((j.value-f.value)%(1e3*60)/1e3)]);return W(f,t=>{t>j.value&&A()}),D(!1),(t,b)=>{var g,M;const S=q;return i(),c("div",oe,[e("div",{class:"flex flex-col gap-4 p-4 justify-between relative items-stretch min-h-100vh transition duration-1000",style:s({backgroundColor:m(y)(C.value).alpha(.3).toHex()})},[se,e("div",le,[e("div",{class:"text-center text-2xl sm-text-4xl tabular-nums rounded-full px-4 py-2 shadow",style:s([{flex:"1 1 140px"},{backgroundColor:n.value}])},h(m(I).toFixed())+" BPM",5),e("button",{class:"transition duration-1000 text-4xl bg-dark-400 p-4 rounded-full shadow-xl",onClick:b[0]||(b[0]=a=>A()),style:s({backgroundColor:C.value})},[e("div",{class:X(["p-0",{"animate-spin":u.value}])},re,2)],4),e("div",{class:"text-2xl sm-text-4xl text-center rounded-full px-4 py-2 shadow",style:s([{flex:"1 1 140px"},{backgroundColor:N.value}])},h(m(r).note.name)+" "+h((M=(g=m(r))==null?void 0:g.set)==null?void 0:M.name),5)]),e("div",ie,[e("div",ce,h(E.value.filter(Boolean).join(" m "))+" s",1),e("div",ue,"-"+h(L.value.filter(Boolean).join(" m "))+" s",1),e("div",{class:"bg-dark-400 transition duration-300 top-0 bottom-0 left-0 absolute flex items-center",style:s({backgroundColor:C.value,width:`${H.value*100}%`})},null,4)]),e("div",de,[e("div",pe,[e("div",me,[e("div",ve,[(i(),c(_,null,x(4,a=>e("div",{class:"p-1 bit",style:s({backgroundColor:a-1==p.value[1]?n.value:"transparent"})},null,4)),64))]),e("div",fe,[(i(),c(_,null,x(4,a=>e("div",{class:"p-2 bit",style:s({backgroundColor:a-1==p.value[0]%4?n.value:"transparent"})},null,4)),64))]),e("div",he,[(i(),c(_,null,x(4,a=>e("div",{class:"p-3 bit",style:s({backgroundColor:a-1==Math.floor(p.value[0]/4)%4?n.value:"transparent"})},null,4)),64))]),e("div",_e,[(i(),c(_,null,x(4,a=>e("div",{class:"p-4 bit",style:s({backgroundColor:a-1==Math.floor(p.value[0]/4/4)%4?n.value:"transparent"})},null,4)),64))]),e("div",xe,[(i(),c(_,null,x(4,a=>e("div",{class:"p-5 bit",style:s({backgroundColor:a-1==Math.floor(p.value[0]/4/4/4)%4?n.value:"transparent"})},null,4)),64))])])])]),B(S,{class:"max-h-35vh",title:!1,chroma:m(r).chroma,pitch:m(r).tonic},null,8,["chroma","pitch"]),be],4)])}}},Me=F(ge,[["__scopeId","data-v-9f386d55"]]),je=JSON.parse('{"title":"Random Jam","description":"A simple randomizer for basic jam parameters - BPM, Tonic and Scale.","frontmatter":{"title":"Random Jam","description":"A simple randomizer for basic jam parameters - BPM, Tonic and Scale.","date":"2024-04-30T00:00:00.000Z","topContent":true,"cover":"jam.png","layout":"app"},"headers":[],"relativePath":"practice/jam/random/index.md","filePath":"practice/jam/random/index.md","lastUpdated":1720290931000}'),ye={name:"practice/jam/random/index.md"};function we(v,w,P,$,z,I){const u=Me,d=ae("client-only");return i(),c("div",null,[B(d,null,{default:te(()=>[B(u)]),_:1})])}const Se=F(ye,[["render",we]]);export{je as __pageData,Se as default};
