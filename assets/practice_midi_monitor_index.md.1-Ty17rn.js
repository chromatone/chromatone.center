import{_ as D}from"./chunks/MidiPanel.4xMz3Bdq.js";import{_ as M,x as C,y as j,o as s,c as d,a as m,t as x,A as N,i as S,l as T,g as _,j as B,F as g,r as $,e as w,p as O,d as P,f as I,m as U,n as A}from"./chunks/framework.KnxPB1sj.js";import{n as z}from"./chunks/colors.hHBI9fPI.js";import{c as F}from"./chunks/index.ZvtJWS8m.js";import"./chunks/index._4u9I4xi.js";import{u as V,e as k,s as E}from"./chunks/midi.91UwWBqe.js";import"./chunks/index.bnjSkgpl.js";import"./chunks/synth.TVJKhjDp.js";import"./chunks/index.RYxauP_R.js";import"./chunks/audio.pG3RnClx.js";import"./chunks/Scale.nioafpJK.js";import"./chunks/Subtract.6yvEFIfU.js";import"./chunks/PingPongDelay.a3-runAV.js";import"./chunks/AutoPanner.02Sltg0b.js";import"./chunks/MonoSynth.pp_JS1sF.js";import"./chunks/Filter.CUstuK5R.js";import"./chunks/tempo.fl6CFXyY.js";import"./chunks/calculations.uITx2GSi.js";import"./chunks/index.QyW-2vQe.js";import"./chunks/Loop.bmxnTff3.js";import"./chunks/index.kn6emmbE.js";import"./chunks/theory.c9f85u7m.js";import"./chunks/commonjsHelpers.4gQjN7DL.js";const J={class:"cc"},L={class:"p-1 text-center flex-1"},R={__name:"MidiMonitorCc",props:{cc:{type:Object,default:()=>{}}},emits:["update"],setup(t,{emit:v}){const u=t,i=v;let n=0;function h({movement:[a],dragging:r}){let o=a/2-n;n=a/2,r||(n=0);let e=Math.round(u.cc.raw+o);e>127&&(e=127),e<0&&(e=0),i("update",e)}return(a,r)=>{var e,p;const o=C("drag");return j((s(),d("div",J,[m("div",L,x((e=t.cc)==null?void 0:e.number),1),m("div",{class:"absolute h-full z-10 bg-gray-500 top-0 bg-opacity-40 self-start",style:N({width:((p=t.cc)==null?void 0:p.value)*100+"%"})},null,4)])),[[o,h]])}}},Z=M(R,[["__scopeId","data-v-5d5f8574"]]),q={class:"font-bold"},G={class:"text-sm"},H={__name:"MidiMonitorNote",props:{note:{type:Object,default:()=>{}},active:Boolean},emits:["play","stop","update:active"],setup(t,{emit:v}){const u=t,i=v,n=S(!1);function h(){n.value=!0,i("update:active",!0),i("play")}function a(o=!1){n.value&&(n.value=!1,o||i("update:active",!1),i("stop"))}function r(){u.active&&!n.value&&(n.value=!0,i("update:active",!0),i("play"))}return(o,e)=>{var p,l,f;return s(),d("div",{class:"note",onMousedown:e[0]||(e[0]=c=>h()),onMouseup:e[1]||(e[1]=c=>a()),onMouseleave:e[2]||(e[2]=c=>a(!0)),onTouchstart:e[3]||(e[3]=T(c=>h(),["prevent"])),onTouchend:e[4]||(e[4]=c=>a()),onMousemove:e[5]||(e[5]=c=>r()),onTouchmove:e[6]||(e[6]=c=>r()),style:N({backgroundColor:_(z)(t.note.pitch,t.note.octA-1,t.note.velocity)})},[m("div",q,x((p=t.note)==null?void 0:p._name)+x((l=t.note)==null?void 0:l._accidental),1),m("div",G,x((f=t.note)==null?void 0:f.number),1)],36)}}},K=M(H,[["__scopeId","data-v-4edb83ef"]]),Q=t=>(O("data-v-51180af5"),t=t(),P(),t),W={class:"flex flex-col gap-4 items-start"},X={class:"flex w-full h-full mt-4"},Y={class:"header absolute w-full text-center"},ee=Q(()=>m("div",{class:"p-6"},null,-1)),te={class:"flex w-full"},oe={__name:"MidiMonitor",setup(t){const v=S(!1),{midi:u,midiAttack:i,midiRelease:n,setCC:h}=V(),a=B(()=>{const r={};for(let o in u.channels){const e=Object.keys(u.channels[o].activeNotes).map(p=>k.midiToNoteName(p,{sharps:!0}));r[o]=e.length>2?F.detect(e):[]}return r});return(r,o)=>{const e=K,p=Z;return s(),d("div",W,[m("div",{class:"fullscreen-container",id:"screen",onMouseleave:o[1]||(o[1]=l=>v.value=!1)},[m("div",X,[(s(!0),d(g,null,$(_(u).channels,(l,f)=>{var c;return s(),d("div",{class:"flex flex-col flex-1 text-center relative",key:l.num},[m("div",Y,x(((c=a.value[f])==null?void 0:c[0])||Object.keys(l.activeNotes).map(y=>_(k).midiToNoteName(y,{sharps:!0})).join(" ")||l.num),1),ee,(s(!0),d(g,null,$(_(E)(l.notes),y=>(s(),w(e,{key:y.number,active:v.value,"onUpdate:active":o[0]||(o[0]=b=>v.value=b),note:y,onPlay:b=>_(i)(y),onStop:b=>_(n)(y)},null,8,["active","note","onPlay","onStop"]))),128))])}),128))]),m("div",te,[(s(!0),d(g,null,$(_(u).channels,l=>(s(),d("div",{class:"flex flex-col flex-1 text-center",key:l.num},[(s(!0),d(g,null,$(l.cc,f=>(s(),w(p,{key:f,cc:f,onUpdate:c=>_(h)(f,c)},null,8,["cc","onUpdate"]))),128))]))),128))])],32)])}}},ne=M(oe,[["__scopeId","data-v-51180af5"]]),De=JSON.parse(`{"title":"MIDI Monitor","description":"See everything that's happening on your MIDI-bus right in the browser","frontmatter":{"title":"MIDI Monitor","description":"See everything that's happening on your MIDI-bus right in the browser","layout":"app","cover":"monitor.png","date":"2022-06-12T00:00:00.000Z"},"headers":[],"relativePath":"practice/midi/monitor/index.md","filePath":"practice/midi/monitor/index.md","lastUpdated":1704176263000}`),se={name:"practice/midi/monitor/index.md"};function ie(t,v,u,i,n,h){const a=ne,r=D,o=A("client-only");return s(),d("div",null,[I(o,null,{default:U(()=>[I(a),I(r,{"to-channel":!1})]),_:1})])}const Ce=M(se,[["render",ie]]);export{De as __pageData,Ce as default};
