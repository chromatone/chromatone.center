import{c as C,N as S,ab as B,ac as T,ad as j,ae as O,af as P}from"./chunks/theme.BCAJ9CZC.js";import{_ as b,a0 as U,R as z,c as i,h as u,i as p,B as g,l as I,r as D,a7 as A,u as v,G as F,F as $,Q as M,e as k,t as N,s as R,f as V}from"./chunks/framework.DqGUeSFU.js";const E={class:"cc"},G={class:"px-1 text-center flex-1"},J={__name:"MidiMonitorCc",props:{cc:{type:Object,default:()=>{}}},emits:["update"],setup(n,{emit:m}){const x=n,l=m;let o=0;function f({movement:[t],dragging:d}){let s=t/2-o;o=t/2,d||(o=0);let e=Math.round(x.cc.raw+s);e>127&&(e=127),e<0&&(e=0),l("update",e)}return(t,d)=>{var e,c;const s=U("drag");return z((i(),u("div",E,[p("div",G,g((e=n.cc)==null?void 0:e.number),1),p("div",{class:"absolute h-full z-10 bg-gray-500 top-0 bg-opacity-40 self-start",style:I({width:((c=n.cc)==null?void 0:c.value)*100+"%"})},null,4)])),[[s,f]])}}},L=b(J,[["__scopeId","data-v-54180c31"]]),Q={class:"font-bold"},Z={class:"text-sm"},q={__name:"MidiMonitorNote",props:{note:{type:Object,default:()=>{}},active:Boolean},emits:["play","stop","update:active"],setup(n,{emit:m}){const x=n,l=m,o=D(!1);function f(){o.value=!0,l("update:active",!0),l("play")}function t(s=!1){o.value&&(o.value=!1,s||l("update:active",!1),l("stop"))}function d(){x.active&&!o.value&&(o.value=!0,l("update:active",!0),l("play"))}return(s,e)=>{var c,_,r;return i(),u("div",{class:"note",onMousedown:e[0]||(e[0]=a=>f()),onMouseup:e[1]||(e[1]=a=>t()),onMouseleave:e[2]||(e[2]=a=>t(!0)),onTouchstart:e[3]||(e[3]=A(a=>f(),["prevent"])),onTouchend:e[4]||(e[4]=a=>t()),onMousemove:e[5]||(e[5]=a=>d()),onTouchmove:e[6]||(e[6]=a=>d()),style:I({backgroundColor:v(C)(n.note.pitch,n.note.octA-1,n.note.velocity)})},[p("div",Q,g((c=n.note)==null?void 0:c._name)+g((_=n.note)==null?void 0:_._accidental),1),p("div",Z,g((r=n.note)==null?void 0:r.number),1)],36)}}},H=b(q,[["__scopeId","data-v-431ac63e"]]),K={class:"flex flex-col gap-4 items-start"},W={class:"flex w-full h-full"},X={class:"header absolute w-full text-center"},Y={class:"flex w-full"},ee={__name:"MidiMonitor",setup(n){const m=D(!1),{midi:x,midiAttack:l,midiRelease:o,setCC:f,channels:t}=S(),d=F(()=>{const s={};for(let e in t){const c=Object.keys(t[e].activeNotes).map(_=>B(_,{sharps:!0}));s[e]=c.length>2?T(c):[]}return s});return(s,e)=>{const c=H,_=L;return i(),u("div",K,[p("div",{class:"fullscreen-container w-full",id:"screen",onMouseleave:e[1]||(e[1]=r=>m.value=!1)},[p("div",W,[(i(!0),u($,null,M(v(t),(r,a)=>{var h;return i(),u("div",{class:"flex flex-col flex-1 text-center relative",key:r.num},[p("div",X,g(((h=d.value[a])==null?void 0:h[0])||Object.keys(r.activeNotes).map(y=>v(j).midiToNoteName(y,{sharps:!0})).join(" ")||r.num),1),e[2]||(e[2]=p("div",{class:"p-6"},null,-1)),(i(!0),u($,null,M(v(O)(r.notes),y=>(i(),k(c,{key:y.number,active:m.value,"onUpdate:active":e[0]||(e[0]=w=>m.value=w),note:y,onPlay:w=>v(l)(y),onStop:w=>v(o)(y)},null,8,["active","note","onPlay","onStop"]))),128))])}),128))]),p("div",Y,[(i(!0),u($,null,M(v(t),r=>(i(),u("div",{class:"flex flex-col flex-1 text-center",key:r.num},[(i(!0),u($,null,M(r.cc,a=>(i(),k(_,{key:a,cc:a,onUpdate:h=>v(f)(a,h)},null,8,["cc","onUpdate"]))),128))]))),128))])],32)])}}},te=b(ee,[["__scopeId","data-v-1766adeb"]]),ie=JSON.parse(`{"title":"MIDI Monitor","description":"See everything that's happening on your MIDI-bus right in the browser","frontmatter":{"title":"MIDI Monitor","description":"See everything that's happening on your MIDI-bus right in the browser","layout":"app","cover":"monitor.png","date":"2022-06-12T00:00:00.000Z"},"headers":[],"relativePath":"practice/midi/monitor/index.md","filePath":"practice/midi/monitor/index.md","lastUpdated":1738735655000}`),ne={name:"practice/midi/monitor/index.md"};function oe(n,m,x,l,o,f){const t=te,d=P,s=V("client-only");return i(),u("div",null,[N(s,null,{default:R(()=>[N(t),N(d,{"to-channel":!1})]),_:1})])}const le=b(ne,[["render",oe]]);export{ie as __pageData,le as default};
