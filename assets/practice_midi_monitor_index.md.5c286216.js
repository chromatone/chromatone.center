import{_ as C}from"./chunks/MidiPanel.ed101bf4.js";import{_ as $,q as D,s as j,o as a,c as d,a as m,t as h,x as k,i as S,l as T,g as _,j as B,F as g,r as M,e as w,p as O,d as P,m as U,f as I,n as z}from"./chunks/framework.88db3c26.js";import{n as A}from"./chunks/colors.71e97f2b.js";import{c as F}from"./chunks/index.7a7bf9be.js";import"./chunks/index.28e8ae3d.js";import{u as V,e as N,s as q}from"./chunks/midi.b5556f9f.js";import"./chunks/index.edce5462.js";import"./chunks/synth.9919606b.js";import"./chunks/index.e98b5e67.js";import"./chunks/index.70261d75.js";import"./chunks/audio.e7507cf6.js";import"./chunks/Scale.b6214b1d.js";import"./chunks/Subtract.109130cb.js";import"./chunks/PingPongDelay.7799470c.js";import"./chunks/AutoPanner.fd8dabdc.js";import"./chunks/MonoSynth.c00b1270.js";import"./chunks/Filter.ca6be54c.js";import"./chunks/tempo.84043c62.js";import"./chunks/calculations.2bac3e9a.js";import"./chunks/index.78e9bb27.js";import"./chunks/Loop.14cab9e9.js";import"./chunks/index.654bd828.js";import"./chunks/theory.f78bd4d6.js";import"./chunks/commonjsHelpers.de833af9.js";const E={class:"cc"},J={class:"p-1 text-center flex-1"},L={__name:"MidiMonitorCc",props:{cc:{type:Object,default:()=>{}}},emits:["update"],setup(t,{emit:o}){const u=t;let n=0;function v({movement:[l],dragging:p}){let s=l/2-n;n=l/2,p||(n=0);let e=Math.round(u.cc.raw+s);e>127&&(e=127),e<0&&(e=0),o("update",e)}return(l,p)=>{var e,c;const s=D("drag");return j((a(),d("div",E,[m("div",J,h((e=t.cc)==null?void 0:e.number),1),m("div",{class:"absolute h-full z-10 bg-gray-500 top-0 bg-opacity-40 self-start",style:k({width:((c=t.cc)==null?void 0:c.value)*100+"%"})},null,4)])),[[s,v]])}}},R=$(L,[["__scopeId","data-v-5d5f8574"]]);const Z={class:"font-bold"},G={class:"text-sm"},H={__name:"MidiMonitorNote",props:{note:{type:Object,default:()=>{}},active:Boolean},emits:["play","stop","update:active"],setup(t,{emit:o}){const u=t,n=S(!1);function v(){n.value=!0,o("update:active",!0),o("play")}function l(s=!1){n.value&&(n.value=!1,s||o("update:active",!1),o("stop"))}function p(){u.active&&!n.value&&(n.value=!0,o("update:active",!0),o("play"))}return(s,e)=>{var c,f,r;return a(),d("div",{class:"note",onMousedown:e[0]||(e[0]=i=>v()),onMouseup:e[1]||(e[1]=i=>l()),onMouseleave:e[2]||(e[2]=i=>l(!0)),onTouchstart:e[3]||(e[3]=T(i=>v(),["prevent"])),onTouchend:e[4]||(e[4]=i=>l()),onMousemove:e[5]||(e[5]=i=>p()),onTouchmove:e[6]||(e[6]=i=>p()),style:k({backgroundColor:_(A)(t.note.pitch,t.note.octA-1,t.note.velocity)})},[m("div",Z,h((c=t.note)==null?void 0:c._name)+h((f=t.note)==null?void 0:f._accidental),1),m("div",G,h((r=t.note)==null?void 0:r.number),1)],36)}}},K=$(H,[["__scopeId","data-v-4edb83ef"]]);const Q=t=>(O("data-v-51180af5"),t=t(),P(),t),W={class:"flex flex-col gap-4 items-start"},X={class:"flex w-full h-full mt-4"},Y={class:"header absolute w-full text-center"},ee=Q(()=>m("div",{class:"p-6"},null,-1)),te={class:"flex w-full"},oe={__name:"MidiMonitor",setup(t){const o=S(!1),{midi:u,midiAttack:n,midiRelease:v,setCC:l}=V(),p=B(()=>{const s={};for(let e in u.channels){const c=Object.keys(u.channels[e].activeNotes).map(f=>N.midiToNoteName(f,{sharps:!0}));s[e]=c.length>2?F.detect(c):[]}return s});return(s,e)=>{const c=K,f=R;return a(),d("div",W,[m("div",{class:"fullscreen-container",id:"screen",onMouseleave:e[1]||(e[1]=r=>o.value=!1)},[m("div",X,[(a(!0),d(g,null,M(_(u).channels,(r,i)=>{var x;return a(),d("div",{class:"flex flex-col flex-1 text-center relative",key:r.num},[m("div",Y,h(((x=p.value[i])==null?void 0:x[0])||Object.keys(r.activeNotes).map(y=>_(N).midiToNoteName(y,{sharps:!0})).join(" ")||r.num),1),ee,(a(!0),d(g,null,M(_(q)(r.notes),y=>(a(),w(c,{key:y.number,active:o.value,"onUpdate:active":e[0]||(e[0]=b=>o.value=b),note:y,onPlay:b=>_(n)(y),onStop:b=>_(v)(y)},null,8,["active","note","onPlay","onStop"]))),128))])}),128))]),m("div",te,[(a(!0),d(g,null,M(_(u).channels,r=>(a(),d("div",{class:"flex flex-col flex-1 text-center",key:r.num},[(a(!0),d(g,null,M(r.cc,i=>(a(),w(f,{key:i,cc:i,onUpdate:x=>_(l)(i,x)},null,8,["cc","onUpdate"]))),128))]))),128))])],32)])}}},ne=$(oe,[["__scopeId","data-v-51180af5"]]),De=JSON.parse(`{"title":"MIDI Monitor","description":"See everything that's happening on your MIDI-bus right in the browser","frontmatter":{"title":"MIDI Monitor","description":"See everything that's happening on your MIDI-bus right in the browser","layout":"app","cover":"monitor.png","date":"2022-06-12T00:00:00.000Z"},"headers":[],"relativePath":"practice/midi/monitor/index.md","filePath":"practice/midi/monitor/index.md","lastUpdated":1698678477000}`),se={name:"practice/midi/monitor/index.md"};function ie(t,o,u,n,v,l){const p=ne,s=C,e=U("client-only");return a(),d("div",null,[I(e,null,{default:z(()=>[I(p),I(s,{"to-channel":!1})]),_:1})])}const je=$(se,[["render",ie]]);export{De as __pageData,je as default};
