import{_ as $,x as C,y as D,o as a,c as d,a as m,t as h,A as k,i as S,l as j,h as _,j as T,F as g,r as M,f as w,p as B,e as O,m as P,g as I,n as U}from"./chunks/framework.2f46aeb8.js";import{n as A}from"./chunks/colors.93330ee5.js";import{c as z}from"./chunks/index.fa53d06a.js";import"./chunks/index.86652af6.js";import{u as F,i as N,s as V}from"./chunks/midi.0fea24b9.js";import"./chunks/index.b30cd6d2.js";import{_ as E}from"./chunks/MidiPanel.3c9d88ea.js";import"./chunks/index.654bd828.js";import"./chunks/calculations.2bac3e9a.js";import"./chunks/index.3012fc8f.js";import"./chunks/synth.05e847c0.js";import"./chunks/audio.e0c178f7.js";import"./chunks/Scale.355f6405.js";import"./chunks/Subtract.f884a3f3.js";import"./chunks/PingPongDelay.89305ffe.js";import"./chunks/AutoPanner.e1652306.js";import"./chunks/MonoSynth.fec20097.js";import"./chunks/Filter.1fb23e5e.js";import"./chunks/theory.61e5aadb.js";import"./chunks/index.be2db0d7.js";import"./chunks/commonjsHelpers.de833af9.js";import"./chunks/tempo.a46486f1.js";import"./chunks/Loop.1583f9b4.js";const J={class:"cc"},L={class:"p-1 text-center flex-1"},R={__name:"MidiMonitorCc",props:{cc:{type:Object,default:()=>{}}},emits:["update"],setup(t,{emit:o}){const u=t;let n=0;function v({movement:[l],dragging:p}){let s=l/2-n;n=l/2,p||(n=0);let e=Math.round(u.cc.raw+s);e>127&&(e=127),e<0&&(e=0),o("update",e)}return(l,p)=>{var e,c;const s=C("drag");return D((a(),d("div",J,[m("div",L,h((e=t.cc)==null?void 0:e.number),1),m("div",{class:"absolute h-full z-10 bg-gray-500 top-0 bg-opacity-40 self-start",style:k({width:((c=t.cc)==null?void 0:c.value)*100+"%"})},null,4)])),[[s,v]])}}},Z=$(R,[["__scopeId","data-v-5d5f8574"]]);const q={class:"font-bold"},G={class:"text-sm"},H={__name:"MidiMonitorNote",props:{note:{type:Object,default:()=>{}},active:Boolean},emits:["play","stop","update:active"],setup(t,{emit:o}){const u=t,n=S(!1);function v(){n.value=!0,o("update:active",!0),o("play")}function l(s=!1){n.value&&(n.value=!1,s||o("update:active",!1),o("stop"))}function p(){u.active&&!n.value&&(n.value=!0,o("update:active",!0),o("play"))}return(s,e)=>{var c,f,r;return a(),d("div",{class:"note",onMousedown:e[0]||(e[0]=i=>v()),onMouseup:e[1]||(e[1]=i=>l()),onMouseleave:e[2]||(e[2]=i=>l(!0)),onTouchstart:e[3]||(e[3]=j(i=>v(),["prevent"])),onTouchend:e[4]||(e[4]=i=>l()),onMousemove:e[5]||(e[5]=i=>p()),onTouchmove:e[6]||(e[6]=i=>p()),style:k({backgroundColor:_(A)(t.note.pitch,t.note.octA-1,t.note.velocity)})},[m("div",q,h((c=t.note)==null?void 0:c._name)+h((f=t.note)==null?void 0:f._accidental),1),m("div",G,h((r=t.note)==null?void 0:r.number),1)],36)}}},K=$(H,[["__scopeId","data-v-4edb83ef"]]);const Q=t=>(B("data-v-51180af5"),t=t(),O(),t),W={class:"flex flex-col gap-4 items-start"},X={class:"flex w-full h-full mt-4"},Y={class:"header absolute w-full text-center"},ee=Q(()=>m("div",{class:"p-6"},null,-1)),te={class:"flex w-full"},oe={__name:"MidiMonitor",setup(t){const o=S(!1),{midi:u,midiAttack:n,midiRelease:v,setCC:l}=F(),p=T(()=>{const s={};for(let e in u.channels){const c=Object.keys(u.channels[e].activeNotes).map(f=>N.midiToNoteName(f,{sharps:!0}));s[e]=c.length>2?z.detect(c):[]}return s});return(s,e)=>{const c=K,f=Z;return a(),d("div",W,[m("div",{class:"fullscreen-container",id:"screen",onMouseleave:e[1]||(e[1]=r=>o.value=!1)},[m("div",X,[(a(!0),d(g,null,M(_(u).channels,(r,i)=>{var x;return a(),d("div",{class:"flex flex-col flex-1 text-center relative",key:r.num},[m("div",Y,h(((x=p.value[i])==null?void 0:x[0])||Object.keys(r.activeNotes).map(y=>_(N).midiToNoteName(y,{sharps:!0})).join(" ")||r.num),1),ee,(a(!0),d(g,null,M(_(V)(r.notes),y=>(a(),w(c,{key:y.number,active:o.value,"onUpdate:active":e[0]||(e[0]=b=>o.value=b),note:y,onPlay:b=>_(n)(y),onStop:b=>_(v)(y)},null,8,["active","note","onPlay","onStop"]))),128))])}),128))]),m("div",te,[(a(!0),d(g,null,M(_(u).channels,r=>(a(),d("div",{class:"flex flex-col flex-1 text-center",key:r.num},[(a(!0),d(g,null,M(r.cc,i=>(a(),w(f,{key:i,cc:i,onUpdate:x=>_(l)(i,x)},null,8,["cc","onUpdate"]))),128))]))),128))])],32)])}}},ne=$(oe,[["__scopeId","data-v-51180af5"]]),Ce=JSON.parse(`{"title":"MIDI Monitor","description":"See everything that's happening on your MIDI-bus right in the browser","frontmatter":{"title":"MIDI Monitor","description":"See everything that's happening on your MIDI-bus right in the browser","cover":"monitor.png","date":"2022-06-12T00:00:00.000Z"},"headers":[],"relativePath":"practice/midi/monitor/index.md","filePath":"practice/midi/monitor/index.md","lastUpdated":1695991948000}`),se={name:"practice/midi/monitor/index.md"};function ie(t,o,u,n,v,l){const p=E,s=ne,e=P("client-only");return a(),d("div",null,[I(e,null,{default:U(()=>[I(p,{"to-channel":!1}),I(s)]),_:1})])}const De=$(se,[["render",ie]]);export{Ce as __pageData,De as default};
