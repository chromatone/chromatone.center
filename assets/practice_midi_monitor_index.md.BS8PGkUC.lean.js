import{c as N,R as D,ag as j,ah as C,ai as S,aj as T,ak as B}from"./chunks/theme.DLCqlVTm.js";import{_ as $,a1 as O,Z as P,q as u,f as s,s as d,z as x,v as w,r as I,u as f,a3 as U,M as z,F as g,Y as h,e as k,i as A,l as b,j as F}from"./chunks/framework.CxSiiyCs.js";const R={class:"cc"},V={class:"px-1 text-center flex-1"},Z={__name:"MidiMonitorCc",props:{cc:{type:Object,default:()=>{}}},emits:["update"],setup(n,{emit:p}){const _=n,a=p;let o=0;function r({movement:[i],dragging:l}){let t=i/2-o;o=i/2,l||(o=0);let e=Math.round(_.cc.raw+t);e>127&&(e=127),e<0&&(e=0),a("update",e)}return(i,l)=>{const t=O("drag");return P((s(),u("div",R,[d("div",V,x(n.cc?.number),1),d("div",{class:"absolute h-full z-10 bg-gray-500 top-0 bg-opacity-40 self-start",style:w({width:n.cc?.value*100+"%"})},null,4)])),[[t,r]])}}},q=$(Z,[["__scopeId","data-v-54180c31"]]),E={class:"font-bold"},J={class:"text-sm"},L={__name:"MidiMonitorNote",props:{note:{type:Object,default:()=>{}},active:Boolean},emits:["play","stop","update:active"],setup(n,{emit:p}){const _=n,a=p,o=I(!1);function r(){o.value=!0,a("update:active",!0),a("play")}function i(t=!1){o.value&&(o.value=!1,t||a("update:active",!1),a("stop"))}function l(){_.active&&!o.value&&(o.value=!0,a("update:active",!0),a("play"))}return(t,e)=>(s(),u("div",{class:"note",onMousedown:e[0]||(e[0]=c=>r()),onMouseup:e[1]||(e[1]=c=>i()),onMouseleave:e[2]||(e[2]=c=>i(!0)),onTouchstart:e[3]||(e[3]=U(c=>r(),["prevent"])),onTouchend:e[4]||(e[4]=c=>i()),onMousemove:e[5]||(e[5]=c=>l()),onTouchmove:e[6]||(e[6]=c=>l()),style:w({backgroundColor:f(N)(n.note.pitch,n.note.octA-1,n.note.velocity)})},[d("div",E,x(n.note?._name)+x(n.note?._accidental),1),d("div",J,x(n.note?.number),1)],36))}},Y=$(L,[["__scopeId","data-v-431ac63e"]]),G={class:"flex flex-col gap-4 items-start"},H={class:"flex w-full h-full"},K={class:"header absolute w-full text-center"},Q={class:"flex w-full"},W={__name:"MidiMonitor",setup(n){const p=I(!1),{midiAttack:_,midiRelease:a,setCC:o,channels:r}=D(),i=z(()=>{const l={};for(let t in r){const e=Object.keys(r[t].activeNotes).map(c=>j(c,{sharps:!0}));l[t]=e.length>2?C(e):[]}return l});return(l,t)=>{const e=Y,c=q;return s(),u("div",G,[d("div",{class:"fullscreen-container w-full",id:"screen",onMouseleave:t[1]||(t[1]=m=>p.value=!1)},[d("div",H,[(s(!0),u(g,null,h(f(r),(m,y)=>(s(),u("div",{class:"flex flex-col flex-1 text-center relative",key:m.num},[d("div",K,x(i.value[y]?.[0]||Object.keys(m.activeNotes).map(v=>f(S).midiToNoteName(v,{sharps:!0})).join(" ")||m.num),1),t[2]||(t[2]=d("div",{class:"p-6"},null,-1)),(s(!0),u(g,null,h(f(T)(m.notes),v=>(s(),k(e,{key:v.number,active:p.value,"onUpdate:active":t[0]||(t[0]=M=>p.value=M),note:v,onPlay:M=>f(_)(v),onStop:M=>f(a)(v)},null,8,["active","note","onPlay","onStop"]))),128))]))),128))]),d("div",Q,[(s(!0),u(g,null,h(f(r),m=>(s(),u("div",{class:"flex flex-col flex-1 text-center",key:m.num},[(s(!0),u(g,null,h(m.cc,y=>(s(),k(c,{key:y,cc:y,onUpdate:v=>f(o)(y,v)},null,8,["cc","onUpdate"]))),128))]))),128))])],32)])}}},X=$(W,[["__scopeId","data-v-1766adeb"]]),se=JSON.parse(`{"title":"MIDI Monitor","description":"See everything that's happening on your MIDI-bus right in the browser","frontmatter":{"title":"MIDI Monitor","description":"See everything that's happening on your MIDI-bus right in the browser","layout":"app","cover":"monitor.png","date":"2022-06-12T00:00:00.000Z"},"headers":[],"relativePath":"practice/midi/monitor/index.md","filePath":"practice/midi/monitor/index.md","lastUpdated":1761369785000}`),ee={name:"practice/midi/monitor/index.md"};function te(n,p,_,a,o,r){const i=X,l=B,t=A("client-only");return s(),u("div",null,[b(t,null,{default:F(()=>[b(i),b(l,{"to-channel":!1})]),_:1})])}const ae=$(ee,[["render",te]]);export{se as __pageData,ae as default};
