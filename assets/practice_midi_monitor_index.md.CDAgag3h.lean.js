import{c as D,R as j,ag as C,ah as S,ai as T,aj as B,ak as O}from"./chunks/theme.BUIsQubF.js";import{_ as M,a1 as P,Z as U,q as d,f as s,s as m,z as g,v as I,r as N,u as _,a3 as z,M as A,F as h,Y as $,e as w,i as F,l as k,j as R}from"./chunks/framework.DprnlfsI.js";const V={class:"cc"},Z={class:"px-1 text-center flex-1"},q={__name:"MidiMonitorCc",props:{cc:{type:Object,default:()=>{}}},emits:["update"],setup(n,{emit:v}){const y=n,a=v;let o=0;function u({movement:[i],dragging:l}){let t=i/2-o;o=i/2,l||(o=0);let e=Math.round(y.cc.raw+t);e>127&&(e=127),e<0&&(e=0),a("update",e)}return(i,l)=>{var e,p;const t=P("drag");return U((s(),d("div",V,[m("div",Z,g((e=n.cc)==null?void 0:e.number),1),m("div",{class:"absolute h-full z-10 bg-gray-500 top-0 bg-opacity-40 self-start",style:I({width:((p=n.cc)==null?void 0:p.value)*100+"%"})},null,4)])),[[t,u]])}}},E=M(q,[["__scopeId","data-v-54180c31"]]),J={class:"font-bold"},L={class:"text-sm"},Y={__name:"MidiMonitorNote",props:{note:{type:Object,default:()=>{}},active:Boolean},emits:["play","stop","update:active"],setup(n,{emit:v}){const y=n,a=v,o=N(!1);function u(){o.value=!0,a("update:active",!0),a("play")}function i(t=!1){o.value&&(o.value=!1,t||a("update:active",!1),a("stop"))}function l(){y.active&&!o.value&&(o.value=!0,a("update:active",!0),a("play"))}return(t,e)=>{var p,r,f;return s(),d("div",{class:"note",onMousedown:e[0]||(e[0]=c=>u()),onMouseup:e[1]||(e[1]=c=>i()),onMouseleave:e[2]||(e[2]=c=>i(!0)),onTouchstart:e[3]||(e[3]=z(c=>u(),["prevent"])),onTouchend:e[4]||(e[4]=c=>i()),onMousemove:e[5]||(e[5]=c=>l()),onTouchmove:e[6]||(e[6]=c=>l()),style:I({backgroundColor:_(D)(n.note.pitch,n.note.octA-1,n.note.velocity)})},[m("div",J,g((p=n.note)==null?void 0:p._name)+g((r=n.note)==null?void 0:r._accidental),1),m("div",L,g((f=n.note)==null?void 0:f.number),1)],36)}}},G=M(Y,[["__scopeId","data-v-431ac63e"]]),H={class:"flex flex-col gap-4 items-start"},K={class:"flex w-full h-full"},Q={class:"header absolute w-full text-center"},W={class:"flex w-full"},X={__name:"MidiMonitor",setup(n){const v=N(!1),{midiAttack:y,midiRelease:a,setCC:o,channels:u}=j(),i=A(()=>{const l={};for(let t in u){const e=Object.keys(u[t].activeNotes).map(p=>C(p,{sharps:!0}));l[t]=e.length>2?S(e):[]}return l});return(l,t)=>{const e=G,p=E;return s(),d("div",H,[m("div",{class:"fullscreen-container w-full",id:"screen",onMouseleave:t[1]||(t[1]=r=>v.value=!1)},[m("div",K,[(s(!0),d(h,null,$(_(u),(r,f)=>{var c;return s(),d("div",{class:"flex flex-col flex-1 text-center relative",key:r.num},[m("div",Q,g(((c=i.value[f])==null?void 0:c[0])||Object.keys(r.activeNotes).map(x=>_(T).midiToNoteName(x,{sharps:!0})).join(" ")||r.num),1),t[2]||(t[2]=m("div",{class:"p-6"},null,-1)),(s(!0),d(h,null,$(_(B)(r.notes),x=>(s(),w(e,{key:x.number,active:v.value,"onUpdate:active":t[0]||(t[0]=b=>v.value=b),note:x,onPlay:b=>_(y)(x),onStop:b=>_(a)(x)},null,8,["active","note","onPlay","onStop"]))),128))])}),128))]),m("div",W,[(s(!0),d(h,null,$(_(u),r=>(s(),d("div",{class:"flex flex-col flex-1 text-center",key:r.num},[(s(!0),d(h,null,$(r.cc,f=>(s(),w(p,{key:f,cc:f,onUpdate:c=>_(o)(f,c)},null,8,["cc","onUpdate"]))),128))]))),128))])],32)])}}},ee=M(X,[["__scopeId","data-v-1766adeb"]]),ae=JSON.parse(`{"title":"MIDI Monitor","description":"See everything that's happening on your MIDI-bus right in the browser","frontmatter":{"title":"MIDI Monitor","description":"See everything that's happening on your MIDI-bus right in the browser","layout":"app","cover":"monitor.png","date":"2022-06-12T00:00:00.000Z"},"headers":[],"relativePath":"practice/midi/monitor/index.md","filePath":"practice/midi/monitor/index.md","lastUpdated":1749307061000}`),te={name:"practice/midi/monitor/index.md"};function ne(n,v,y,a,o,u){const i=ee,l=O,t=F("client-only");return s(),d("div",null,[k(t,null,{default:R(()=>[k(i),k(l,{"to-channel":!1})]),_:1})])}const ie=M(te,[["render",ne]]);export{ae as __pageData,ie as default};
