import{_ as D}from"./chunks/panel.bfebd13d.js";import{_ as M,l as I,o as i,c,a as v,t as h,y as j,v as N,u as m,n as C,w as S,j as O,d as $,F as x,r as g,b as k,D as T,z as B}from"./chunks/framework.38382cbc.js";import{n as P}from"./chunks/colors.3c2dadc4.js";import{c as U}from"./chunks/index.df57de88.js";import"./chunks/index.86652af6.js";import{u as z,i as w,s as A}from"./chunks/midi.7a56e39e.js";import"./chunks/index.b30cd6d2.js";import"./chunks/synth.a764a61c.js";import"./chunks/index.cccf7ef0.js";import"./chunks/index.7369dcc4.js";import"./chunks/index.655b65ef.js";import"./chunks/audio.99c2cd8f.js";import"./chunks/index.703b580e.js";import"./chunks/Scale.f9a07a23.js";import"./chunks/Subtract.e7604129.js";import"./chunks/PingPongDelay.c4f30333.js";import"./chunks/AutoPanner.8eb7afba.js";import"./chunks/MonoSynth.3cdcc469.js";import"./chunks/Filter.e19ab36f.js";import"./chunks/tempo.619968ac.js";import"./chunks/calculations.65ee336d.js";import"./chunks/index.f044f4e9.js";import"./chunks/Loop.4db2aa01.js";import"./chunks/index.654bd828.js";import"./chunks/theory.61e5aadb.js";import"./chunks/commonjsHelpers.de833af9.js";const F={class:"font-bold"},V={class:"text-sm"},E={__name:"note",props:{note:{type:Object,default:()=>{}},active:Boolean},emits:["play","stop","update:active"],setup(t,{emit:o}){const d=t,n=I(!1);function f(){n.value=!0,o("update:active",!0),o("play")}function u(r=!1){n.value&&(n.value=!1,r||o("update:active",!1),o("stop"))}function _(){d.active&&!n.value&&(n.value=!0,o("update:active",!0),o("play"))}return(r,e)=>{var l,s,p;return i(),c("div",{class:"note",onMousedown:e[0]||(e[0]=a=>f()),onMouseup:e[1]||(e[1]=a=>u()),onMouseleave:e[2]||(e[2]=a=>u(!0)),onTouchstart:e[3]||(e[3]=j(a=>f(),["prevent"])),onTouchend:e[4]||(e[4]=a=>u()),onMousemove:e[5]||(e[5]=a=>_()),onTouchmove:e[6]||(e[6]=a=>_()),style:N({backgroundColor:m(P)(t.note.pitch,t.note.octA-1,t.note.velocity)})},[v("div",F,h((l=t.note)==null?void 0:l._name)+h((s=t.note)==null?void 0:s._accidental),1),v("div",V,h((p=t.note)==null?void 0:p.number),1)],36)}}},J=M(E,[["__scopeId","data-v-99557c79"]]);const L={class:"cc"},R={class:"p-1 text-center flex-1"},Z={__name:"cc",props:{cc:{type:Object,default:()=>{}}},emits:["update"],setup(t,{emit:o}){const d=t;let n=0;function f({movement:[u],dragging:_}){let r=u/2-n;n=u/2,_||(n=0);let e=Math.round(d.cc.raw+r);e>127&&(e=127),e<0&&(e=0),o("update",e)}return(u,_)=>{var e,l;const r=C("drag");return S((i(),c("div",L,[v("div",R,h((e=t.cc)==null?void 0:e.number),1),v("div",{class:"absolute h-full z-10 bg-gray-500 top-0 bg-opacity-40 self-start",style:N({width:((l=t.cc)==null?void 0:l.value)*100+"%"})},null,4)])),[[r,f]])}}},q=M(Z,[["__scopeId","data-v-c0e4d163"]]);const G={class:"flex flex-col gap-4"},H={class:"flex w-full h-full mt-4"},K={class:"header"},Q={class:"flex w-full"},W={__name:"midi-monitor",setup(t){const o=I(!1),{midi:d,midiAttack:n,midiRelease:f,setCC:u}=z(),_=O(()=>{const r={};for(let e in d.channels){const l=Object.keys(d.channels[e].activeNotes).map(s=>w.midiToNoteName(s,{sharps:!0}));r[e]=l.length>2?U.detect(l):[]}return r});return(r,e)=>{const l=D;return i(),c("div",G,[$(l,{"to-channel":!1}),v("div",{class:"fullscreen-container",id:"screen",onMouseleave:e[1]||(e[1]=s=>o.value=!1)},[v("div",H,[(i(!0),c(x,null,g(m(d).channels,(s,p)=>{var a;return i(),c("div",{class:"flex flex-col flex-1 text-center",key:s.num},[v("div",K,h(((a=_.value[p])==null?void 0:a[0])||Object.keys(s.activeNotes).map(y=>m(w).midiToNoteName(y,{sharps:!0})).join(" ")||s.num),1),(i(!0),c(x,null,g(m(A)(s.notes),y=>(i(),k(J,{key:y.number,active:o.value,"onUpdate:active":e[0]||(e[0]=b=>o.value=b),note:y,onPlay:b=>m(n)(y),onStop:b=>m(f)(y)},null,8,["active","note","onPlay","onStop"]))),128))])}),128))]),v("div",Q,[(i(!0),c(x,null,g(m(d).channels,s=>(i(),c("div",{class:"flex flex-col flex-1 text-center",key:s.num},[(i(!0),c(x,null,g(s.cc,p=>(i(),k(q,{key:p,cc:p,onUpdate:a=>m(u)(p,a)},null,8,["cc","onUpdate"]))),128))]))),128))])],32)])}}},X=M(W,[["__scopeId","data-v-7adf0902"]]),Ie=JSON.parse(`{"title":"MIDI Monitor","description":"See everything that's happening on your MIDI-bus right in the browser","frontmatter":{"title":"MIDI Monitor","description":"See everything that's happening on your MIDI-bus right in the browser","cover":"monitor.png","date":"2022-06-12T00:00:00.000Z"},"headers":[],"relativePath":"practice/midi/monitor/index.md","filePath":"practice/midi/monitor/index.md","lastUpdated":1689843676000}`),Y={name:"practice/midi/monitor/index.md"},Ne=Object.assign(Y,{setup(t){return(o,d)=>{const n=T("client-only");return i(),c("div",null,[$(n,null,{default:B(()=>[$(X)]),_:1})])}}});export{Ie as __pageData,Ne as default};
