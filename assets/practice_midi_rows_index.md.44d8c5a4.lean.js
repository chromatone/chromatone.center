import"./chunks/tuner.ff60fac7.js";import"./chunks/audio.0b0a52c9.js";import"./chunks/colors.4eba5607.js";import{u as D}from"./chunks/midi.8add1e1a.js";import"./chunks/loop.32e0dfaa.js";import"./chunks/mic.8d51b4ab.js";import{M as T}from"./chunks/Midi.1f918097.js";import{u as F}from"./chunks/tempo.b5a67d34.js";import"./chunks/noise.5a2b54fb.js";import{a1 as N,F as x}from"./chunks/index.cccf7ef0.js";import{u as B}from"./chunks/sequence.a203dcd4.js";import{u as P,b as w}from"./chunks/synth.b0a1456c.js";import"./chunks/theory.61e5aadb.js";import{P as S}from"./chunks/Sequence.ac2a9b47.js";import{Z as O,C as v,j as k,B as R,o as a,c as d,a as t,t as l,u as i,F as y,r as b,h as q,D as V,d as C,z as j}from"./chunks/framework.233ced2b.js";import"./chunks/commonjsHelpers.de833af9.js";import"./chunks/calculations.65ee336d.js";import"./chunks/index.0e8b6fce.js";import"./chunks/index.fb02c716.js";import"./chunks/index.87a1f89e.js";import"./chunks/index.654bd828.js";import"./chunks/index.b30cd6d2.js";import"./chunks/index.c9980755.js";import"./chunks/midiRender.8f6dc326.js";import"./chunks/UserMedia.c8f7c51a.js";import"./chunks/Subtract.e7604129.js";import"./chunks/OnePoleFilter.771f13b4.js";import"./chunks/Loop.4db2aa01.js";import"./chunks/FFT.bab797e2.js";import"./chunks/BitCrusher.d53821e7.js";import"./chunks/Filter.e19ab36f.js";import"./chunks/AutoPanner.30f7ef90.js";import"./chunks/Scale.f9a07a23.js";import"./chunks/PingPongDelay.33c16f88.js";import"./chunks/MonoSynth.3cdcc469.js";import"./chunks/index.86652af6.js";const z={class:"flex flex-col"},E={class:"text-2xl"},Z={class:"flex flex-wrap"},J={key:0,class:"i-la-circle"},L={key:1,class:"i-mdi-checkbox-blank-circle"},Q={key:0,class:"i-la-play"},U={key:1,class:"i-la-pause"},W=t("div",{class:"i-la-stop"},null,-1),A=[W],G=t("div",{class:"i-la-trash-alt"},null,-1),H=[G],K=t("div",{class:"i-la-plus"},null,-1),X=[K],Y={class:"p-1"},tt=t("div",{class:"i-la-minus"},null,-1),et=[tt],it=t("div",{class:"p-1"},"/",-1),st=t("div",{class:"i-la-plus"},null,-1),ot=[st],rt={class:"p-1"},nt=t("div",{class:"i-la-minus"},null,-1),lt=[nt],at={class:"flex flex-col"},dt=["viewBox"],ct=["width","height"],pt=["x1","x2","y2"],mt=["transform"],ut=["y2"],_t={y:"3",x:"1","font-size":"2"},ht={class:"flex text-xs p-4"},vt={class:"grid grid-cols-3 text-xs gap-2"},kt=O({__name:"midi-rows",setup(M){P();const{midi:m}=D(),{seq:r}=B(null,1,"row"),c=F(),o=v({width:100,height:30,progress:k(()=>o.width*r.progress),recording:!1}),h=k(()=>r.meter.over*N.PPQ*4/r.meter.under),u=k(()=>c.ticks%h.value),$=new S((n,e)=>{console.log(e),w(x(e.midi,"midi").toNote(),e.duration+"i")}).set({loop:!0,loopEnd:"800i",loopStart:0,playbackRate:1,probability:1}).start(0),_=v({}),f=v([]),{track:g,midiFile:gt}=I();R(()=>m.note,n=>{if(w(x(n.number,"midi").toNote()+"","196i"),!(!o.recording||!c.playing))if(n.velocity>0)_[n.number]=u.value;else{const e=_==null?void 0:_[n.number],p=u.value;let s;p>e?s=p-e:s=h.value-e+p,f.push({ticks:u.value,midi:n.number,channel:n.channel,start:e,stop:p,duration:s}),$.add({time:u.value+"i",midi:n.number,duration:s})}});function I(){const n=new T.Midi;n.name="Chromatone recording";const e=n.addTrack();return{midiFile:n,track:e}}return(n,e)=>{var p;return a(),d("div",z,[t("div",E,"MIDI ROWS "+l(u.value)+"/"+l(h.value),1),t("div",Z,[t("button",{onClick:e[0]||(e[0]=s=>o.recording=!o.recording)},[o.recording?(a(),d("div",L)):(a(),d("div",J))]),t("button",{onClick:e[1]||(e[1]=s=>i(c).playing=!i(c).playing)},[i(c).playing?(a(),d("div",U)):(a(),d("div",Q))]),t("button",{onClick:e[2]||(e[2]=s=>i(c).stopped=Date.now())},A),t("button",{onClick:e[3]||(e[3]=s=>i(g).notes=[])},H),t("button",{onClick:e[4]||(e[4]=s=>i(r).meter.over++)},X),t("div",Y,l(i(r).meter.over),1),t("button",{onClick:e[5]||(e[5]=s=>i(r).meter.over--)},et),it,t("button",{onClick:e[6]||(e[6]=s=>i(r).meter.under++)},ot),t("div",rt,l(i(r).meter.under),1),t("button",{onClick:e[7]||(e[7]=s=>i(r).meter.under--)},lt)]),t("div",at,[(a(),d("svg",{viewBox:`0 0 ${o.width} ${o.height}`},[t("rect",{width:o.width,height:o.height,fill:"#999"},null,8,ct),(a(!0),d(y,null,b((p=i(m))==null?void 0:p.channels,s=>(a(),d("g",{class:"channel",key:s}))),128)),t("line",{x1:o.progress,x2:o.progress,y1:0,y2:o.height,stroke:"black"},null,8,pt),(a(!0),d(y,null,b(i(r).steps,s=>(a(),d("g",{key:s,transform:`translate(${o.width*s[0].split("-")[0]/i(r).steps.length})`},[t("line",{y2:o.height,stroke:"black","stroke-width":"0.1"},null,8,ut),t("text",_t,l(Number(s[0].split("-")[0])+1),1)],8,mt))),128))],8,dt))]),t("div",ht,l(f),1),t("div",vt,[t("pre",null,l(i(r)),1),t("pre",null,l(i(c)),1),t("pre",null,[q(),t("p",null," "+l(i(g)),1),t("p",null,l(i(m).clock),1),t("p",null,l(i(m).note),1)])])])}}}),ie=JSON.parse('{"title":"MIDI Rows","description":"Measurewise MIDI recorder","frontmatter":{"title":"MIDI Rows","description":"Measurewise MIDI recorder","date":"2020-02-02T00:00:00.000Z"},"headers":[],"relativePath":"practice/midi/rows/index.md","filePath":"practice/midi/rows/index.md","lastUpdated":1689843676000}'),ft={name:"practice/midi/rows/index.md"},se=Object.assign(ft,{setup(M){return(m,r)=>{const c=V("client-only");return a(),d("div",null,[C(c,null,{default:j(()=>[C(kt)]),_:1})])}}});export{ie as __pageData,se as default};
