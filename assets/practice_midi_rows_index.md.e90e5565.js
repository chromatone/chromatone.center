import"./chunks/tuner.fedd809e.js";import"./chunks/audio.db61f0f1.js";import"./chunks/colors.31585d6f.js";import{u as D}from"./chunks/midi.051dff15.js";import"./chunks/loop.b4fb0640.js";import"./chunks/mic.69a95b55.js";import"./chunks/midiRender.26f31fdb.js";import{M as T}from"./chunks/Midi.1f918097.js";import{u as F}from"./chunks/tempo.63b0f19a.js";import"./chunks/noise.2bd99578.js";import{a2 as N,F as w}from"./chunks/index.318a9c78.js";import{u as B}from"./chunks/sequence.42d5e0be.js";import{u as P,b as y}from"./chunks/synth.13bc9407.js";import"./chunks/theory.61e5aadb.js";import{P as R}from"./chunks/Sequence.97dd314b.js";import{a9 as S,C as f,i as k,B as q,o as a,c as d,a as t,t as l,h as s,F as b,r as $,I as O,_ as V,D as z,g as M,z as E}from"./chunks/framework.916f0e04.js";import"./chunks/commonjsHelpers.de833af9.js";import"./chunks/calculations.65ee336d.js";import"./chunks/index.654bd828.js";import"./chunks/index.b30cd6d2.js";import"./chunks/index.21ffc11d.js";import"./chunks/UserMedia.2d1ada6f.js";import"./chunks/Subtract.6ec76c99.js";import"./chunks/OnePoleFilter.091948bc.js";import"./chunks/Loop.10f45252.js";import"./chunks/FFT.16ab715f.js";import"./chunks/BitCrusher.b03b4c1c.js";import"./chunks/Filter.e75bcac9.js";import"./chunks/AutoPanner.29f458d8.js";import"./chunks/Scale.176fdefa.js";import"./chunks/PingPongDelay.482228d7.js";import"./chunks/MonoSynth.03f6a5c8.js";import"./chunks/index.86652af6.js";const J={class:"flex flex-col"},L={class:"text-2xl"},Q={class:"flex flex-wrap"},U={key:0,class:"i-la-circle"},W={key:1,class:"i-mdi-checkbox-blank-circle"},Z={key:0,class:"i-la-play"},j={key:1,class:"i-la-pause"},A=t("div",{class:"i-la-stop"},null,-1),G=[A],H=t("div",{class:"i-la-trash-alt"},null,-1),K=[H],X=t("div",{class:"i-la-plus"},null,-1),Y=[X],tt={class:"p-1"},et=t("div",{class:"i-la-minus"},null,-1),st=[et],it=t("div",{class:"p-1"},"/",-1),ot=t("div",{class:"i-la-plus"},null,-1),nt=[ot],rt={class:"p-1"},lt=t("div",{class:"i-la-minus"},null,-1),at=[lt],dt={class:"flex flex-col"},ct=["viewBox"],pt=["width","height"],mt=["x1","x2","y2"],ut=["transform"],_t=["y2"],ht={y:"3",x:"1","font-size":"2"},vt={class:"flex text-xs p-4"},ft={class:"grid grid-cols-3 text-xs gap-2"},kt=S({__name:"MidiRows",setup(C){P();const{midi:u}=D(),{seq:n}=B(null,1,"row"),c=F(),o=f({width:100,height:30,progress:k(()=>o.width*n.progress),recording:!1}),_=k(()=>n.meter.over*N.PPQ*4/n.meter.under),p=k(()=>c.ticks%_.value),v=new R((r,e)=>{console.log(e),y(w(e.midi,"midi").toNote(),e.duration+"i")}).set({loop:!0,loopEnd:"800i",loopStart:0,playbackRate:1,probability:1}).start(0),h=f({}),g=f([]),{track:x,midiFile:wt}=I();q(()=>u.note,r=>{if(y(w(r.number,"midi").toNote()+"","196i"),!(!o.recording||!c.playing))if(r.velocity>0)h[r.number]=p.value;else{const e=h==null?void 0:h[r.number],m=p.value;let i;m>e?i=m-e:i=_.value-e+m,g.push({ticks:p.value,midi:r.number,channel:r.channel,start:e,stop:m,duration:i}),v.add({time:p.value+"i",midi:r.number,duration:i})}});function I(){const r=new T.Midi;r.name="Chromatone recording";const e=r.addTrack();return{midiFile:r,track:e}}return(r,e)=>{var m;return a(),d("div",J,[t("div",L,"MIDI ROWS "+l(p.value)+"/"+l(_.value),1),t("div",Q,[t("button",{onClick:e[0]||(e[0]=i=>o.recording=!o.recording)},[o.recording?(a(),d("div",W)):(a(),d("div",U))]),t("button",{onClick:e[1]||(e[1]=i=>s(c).playing=!s(c).playing)},[s(c).playing?(a(),d("div",j)):(a(),d("div",Z))]),t("button",{onClick:e[2]||(e[2]=i=>s(c).stopped=Date.now())},G),t("button",{onClick:e[3]||(e[3]=i=>s(x).notes=[])},K),t("button",{onClick:e[4]||(e[4]=i=>s(n).meter.over++)},Y),t("div",tt,l(s(n).meter.over),1),t("button",{onClick:e[5]||(e[5]=i=>s(n).meter.over--)},st),it,t("button",{onClick:e[6]||(e[6]=i=>s(n).meter.under++)},nt),t("div",rt,l(s(n).meter.under),1),t("button",{onClick:e[7]||(e[7]=i=>s(n).meter.under--)},at)]),t("div",dt,[(a(),d("svg",{viewBox:`0 0 ${o.width} ${o.height}`},[t("rect",{width:o.width,height:o.height,fill:"#999"},null,8,pt),(a(!0),d(b,null,$((m=s(u))==null?void 0:m.channels,i=>(a(),d("g",{class:"channel",key:i}))),128)),t("line",{x1:o.progress,x2:o.progress,y1:0,y2:o.height,stroke:"black"},null,8,mt),(a(!0),d(b,null,$(s(n).steps,i=>(a(),d("g",{key:i,transform:`translate(${o.width*i[0].split("-")[0]/s(n).steps.length})`},[t("line",{y2:o.height,stroke:"black","stroke-width":"0.1"},null,8,_t),t("text",ht,l(Number(i[0].split("-")[0])+1),1)],8,ut))),128))],8,ct))]),t("div",vt,l(g),1),t("div",ft,[t("pre",null,l(s(n)),1),t("pre",null,l(s(c)),1),t("pre",null,[O(),t("p",null," "+l(s(x)),1),t("p",null,l(s(u).clock),1),t("p",null,l(s(u).note),1)])])])}}}),ee=JSON.parse('{"title":"MIDI Rows","description":"Measurewise MIDI recorder","frontmatter":{"title":"MIDI Rows","description":"Measurewise MIDI recorder","date":"2020-02-02T00:00:00.000Z"},"headers":[],"relativePath":"practice/midi/rows/index.md","filePath":"practice/midi/rows/index.md","lastUpdated":1694022443000}'),gt={name:"practice/midi/rows/index.md"};function xt(C,u,n,c,o,_){const p=kt,v=z("client-only");return a(),d("div",null,[M(v,null,{default:E(()=>[M(p)]),_:1})])}const se=V(gt,[["render",xt]]);export{ee as __pageData,se as default};
