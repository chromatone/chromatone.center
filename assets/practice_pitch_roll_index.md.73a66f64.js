import{_ as T,i as R,P as C,e as A,q as B,j as F,v as c,b as h,N as a,F as n,X as r,f as $,B as b,C as j,O as w,L as D,Z as I,A as M,c as O,T as y,R as q,M as W}from"./chunks/framework.7e747cd7.js";import{_ as Z}from"./chunks/start.3be170db.js";import{u as E}from"./chunks/tuner.f1245b29.js";import{b as H,j as P}from"./chunks/index.c0ca431c.js";import{u as L}from"./chunks/index.0b97d2b2.js";import{w as z}from"./chunks/index.654bd828.js";import"./chunks/colors.abbc28c6.js";import"./chunks/calculations.3384a913.js";import"./chunks/index.83aed4fc.js";import"./chunks/midi.290fabf9.js";import"./chunks/commonjsHelpers.de833af9.js";import"./chunks/index.b30cd6d2.js";import"./chunks/synth.220fb0dd.js";import"./chunks/audio.170dbcbf.js";import"./chunks/Scale.7b617051.js";import"./chunks/Subtract.f0fef764.js";import"./chunks/PingPongDelay.38a34857.js";import"./chunks/AutoPanner.94a306f8.js";import"./chunks/MonoSynth.4cac63d2.js";import"./chunks/Filter.2b531c53.js";import"./chunks/theory.61e5aadb.js";import"./chunks/index.86652af6.js";import"./chunks/index.b77db23e.js";const k=p=>(M("data-v-83586260"),p=p(),O(),p),J={class:"flex flex-col mb-8"},K={key:0,class:"flex p-8 items-center"},X={class:"p-1 w-2em"},Y={class:"p-1 w-1em"},G={class:"p-1 mt-2 w-6em text-sm"},Q={key:0,class:"i-la-play"},U={key:1,class:"i-la-pause"},V=k(()=>n("div",{class:"i-la-times"},null,-1)),tt=[V],et={class:"flex-1 text-center font-bold"},ot={class:"fullscreen-container rounded-3xl cursor-pointer",id:"screen"},it={class:"p-1 absolute top-2 left-2 flex items-center"},st=k(()=>n("div",{class:"i-la-angle-double-right"},null,-1)),nt={__name:"roll",setup(p){const t=R({running:!0,speed:L(H("pitch-roll-speed",4),4,20),runnerWidth:2,runnerAhead:4,maxPlotFrequency:880,maxPlotNote:97,minPlotNote:24,prevBeat:0,step:0});P(" ",l=>{l.preventDefault(),t.running=!t.running}),P("Enter",()=>{_()});function g(l){l.tap&&(t.running=!t.running),t.speed=t.speed+l.delta[0]/5}const m=[0,1,2,3,4,5,6,7,8],{init:N,tuner:o}=E(),i=C();let e;A(()=>{e=i.value.getContext("2d")}),B(()=>o==null?void 0:o.frame,l=>{if(!t.running)return;let s=l*t.speed%i.value.width;if(e.globalAlpha=1,e.clearRect(s,0,t.speed,i.value.height),e.beginPath(),e.fillStyle=o.note.color,e.fillRect(s+t.speed,0,t.runnerWidth,i.value.height),!o.note.silent){const d=i.value.height-(o.note.value-t.minPlotNote)/(t.maxPlotNote-t.minPlotNote)*i.value.height;e.arc(s-8,d,8,0,4*Math.PI),e.fillStyle=z(o.note.color).lighten(.3).toHex(),e.fill()}if(l%50==0){e.beginPath(),e.strokeStyle="hsla(90,50%,50%,0.1)",e.lineWidth="1";for(let d of m){let u=i.value.height-(d*12-t.minPlotNote)/(t.maxPlotNote-t.minPlotNote)*i.value.height;e.moveTo(0,u),e.lineTo(i.value.width,u)}e.stroke()}e.globalAlpha=.25,o.beat>t.prevBeat&&(t.prevBeat=o.beat,e.fillStyle=o.note.color,e.fillRect(s-5,0,1,i.value.height))});function S(){N(),t.running=!0}function _(){e.clearRect(0,0,i.value.width,i.value.height)}return(l,s)=>{var v,x;const d=Z,u=F("drag");return c(),h("div",J,[a(o).note?(c(),h("div",K,[n("div",{class:"flex-1 text-center font-bold text-4xl transition-all duration-200 flex items-center",style:$({color:a(o).note.color})},[n("div",X,r((v=a(o).note)==null?void 0:v.name),1),n("div",Y,r((x=a(o).note)==null?void 0:x.octave),1),n("div",G,r(a(o).note.cents>0?"+":"")+r(a(o).note.cents)+" cents",1)],4),n("div",{class:"btn",onClick:s[0]||(s[0]=f=>t.running=!t.running)},[t.running?(c(),h("div",U)):(c(),h("div",Q))]),n("div",{class:"btn",onClick:s[1]||(s[1]=f=>_())},tt),n("div",et,r(a(o).bpm.toFixed(1))+" BPM",1)])):b("",!0),n("div",ot,[a(o).running?b("",!0):(c(),j(d,{key:0,class:"absolute",onClick:s[2]||(s[2]=f=>S())},{default:w(()=>[D("Start rolling ")]),_:1})),n("div",it,[st,n("span",null,r(t.speed.toFixed(1)),1)]),I(n("canvas",{class:"w-full h-full rounded-3xl",ref_key:"roll",ref:i,width:1920,height:1080,onDblclick:s[3]||(s[3]=f=>_())},null,544),[[u,g]])])])}}},lt=T(nt,[["__scopeId","data-v-83586260"]]),at=q('<p>This app listens to the incoming audio and analyzes it for the base pitch and tempo. The note with the cents difference is show at the top left. Tempo is shown at the top right. The pitch is plotted on the vertical axis with colored circles while beats are drawn as vertical lines.</p><ol><li>Press <i class="p-3 mr-1 i-la-play"></i> to start plotting the audio parameters. Press <i class="p-3 mr-1 i-la-pause"></i> to pause the process. You can also do this by clicking the graph itself or by pressing the <strong>Spacebar</strong> key on your keyboard.</li><li>Press <i class="p-3 mr-1 i-la-times"></i> to clear the graph. Double clicking the graph and pressing the <strong>Enter</strong> key will have the same effect</li><li>Drag across the graph plain left or right to increase or decrease the speed of the plot head.</li><li>If you see the <i class="p-3 mr-1 i-la-expand"></i> button at the bottom right, you browser is capable of stretching the graph to the full screen. Have fun!</li></ol>',2),Ft=JSON.parse('{"title":"Pitch Roll","description":"Plot main pitch of any incoming audio on an endless roll","frontmatter":{"title":"Pitch Roll","description":"Plot main pitch of any incoming audio on an endless roll","cover":"roll.png","date":"2022-06-12T00:00:00.000Z"},"headers":[],"relativePath":"practice/pitch/roll/index.md","filePath":"practice/pitch/roll/index.md"}'),rt={name:"practice/pitch/roll/index.md"},$t=Object.assign(rt,{setup(p){return(t,g)=>{const m=W("client-only");return c(),h("div",null,[y(m,null,{default:w(()=>[y(lt)]),_:1}),at])}}});export{Ft as __pageData,$t as default};
