import{_ as C}from"./chunks/ControlStart.BBv6IlU2.js";import{u as $}from"./chunks/tuner.0-FZg3vi.js";import{_ as k,k as B,v as D,C as b,i as I,E as A,w as V,x as R,o as c,c as h,a as l,g as a,e as E,m as S,B as F,b as P,t as r,y as M,A as W,p as z,d as H,f as w,h as q,n as J}from"./chunks/framework.KnxPB1sj.js";import{u as K}from"./chunks/index.bnjSkgpl.js";import{w as O}from"./chunks/index.kn6emmbE.js";import"./chunks/colors.hHBI9fPI.js";import"./chunks/calculations.uITx2GSi.js";import"./chunks/index.RYxauP_R.js";import"./chunks/midi.91UwWBqe.js";import"./chunks/commonjsHelpers.4gQjN7DL.js";import"./chunks/synth.TVJKhjDp.js";import"./chunks/audio.pG3RnClx.js";import"./chunks/Scale.nioafpJK.js";import"./chunks/Subtract.6yvEFIfU.js";import"./chunks/PingPongDelay.a3-runAV.js";import"./chunks/AutoPanner.02Sltg0b.js";import"./chunks/MonoSynth.pp_JS1sF.js";import"./chunks/Filter.CUstuK5R.js";import"./chunks/theory.c9f85u7m.js";import"./chunks/index._4u9I4xi.js";import"./chunks/index.QyW-2vQe.js";const N=p=>(z("data-v-41401c80"),p=p(),H(),p),U={class:"flex flex-col mb-8"},Y={class:"fullscreen-container rounded-3xl cursor-pointer",id:"screen"},Z={class:"p-1 absolute top-2 left-2 flex items-center"},j=N(()=>l("div",{class:"i-la-angle-double-right"},null,-1)),G={key:0,class:"flex p-8 items-center"},L={class:"p-1 w-2em"},Q={class:"p-1 w-1em"},X={class:"p-1 mt-2 w-6em text-sm"},ee={key:0,class:"i-la-play"},te={key:1,class:"i-la-pause"},oe=N(()=>l("div",{class:"i-la-times"},null,-1)),ie=[oe],ne={class:"flex-1 text-center font-bold"},le={__name:"PitchRoll",setup(p){const e=B({running:!0,speed:K(D("pitch-roll-speed",4),4,20),runnerWidth:2,runnerAhead:4,maxPlotFrequency:880,maxPlotNote:97,minPlotNote:24,prevBeat:0,step:0});b(" ",s=>{s.preventDefault(),e.running=!e.running}),b("Enter",()=>{m()});function f(s){s.tap&&(e.running=!e.running),e.speed=e.speed+s.delta[0]/5}const g=[0,1,2,3,4,5,6,7,8],{init:v,tuner:o}=$(),i=I();let t;A(()=>{t=i.value.getContext("2d")}),V(()=>o==null?void 0:o.frame,s=>{if(!e.running)return;let n=s*e.speed%i.value.width;if(t.globalAlpha=1,t.clearRect(n,0,e.speed,i.value.height),t.beginPath(),t.fillStyle=o.note.color,t.fillRect(n+e.speed,0,e.runnerWidth,i.value.height),!o.note.silent){const d=i.value.height-(o.note.value-e.minPlotNote)/(e.maxPlotNote-e.minPlotNote)*i.value.height;t.arc(n-8,d,8,0,4*Math.PI),t.fillStyle=O(o.note.color).lighten(.3).toHex(),t.fill()}if(s%50==0){t.beginPath(),t.strokeStyle="hsla(90,50%,50%,0.1)",t.lineWidth="1";for(let d of g){let u=i.value.height-(d*12-e.minPlotNote)/(e.maxPlotNote-e.minPlotNote)*i.value.height;t.moveTo(0,u),t.lineTo(i.value.width,u)}t.stroke()}t.globalAlpha=.25,o.beat>e.prevBeat&&(e.prevBeat=o.beat,t.fillStyle=o.note.color,t.fillRect(n-5,0,1,i.value.height))});function T(){v(),e.running=!0}function m(){t.clearRect(0,0,i.value.width,i.value.height)}return(s,n)=>{var x,y;const d=C,u=R("drag");return c(),h("div",U,[l("div",Y,[a(o).running?P("",!0):(c(),E(d,{key:0,class:"absolute",onClick:n[0]||(n[0]=_=>T())},{default:S(()=>[F("Start rolling ")]),_:1})),l("div",Z,[j,l("span",null,r(e.speed.toFixed(1)),1)]),M(l("canvas",{class:"w-full h-full rounded-3xl",ref_key:"roll",ref:i,width:1920,height:1080,onDblclick:n[1]||(n[1]=_=>m())},null,544),[[u,f]])]),a(o).note?(c(),h("div",G,[l("div",{class:"flex-1 text-center font-bold text-4xl transition-all duration-200 flex items-center",style:W({color:a(o).note.color})},[l("div",L,r((x=a(o).note)==null?void 0:x.name),1),l("div",Q,r((y=a(o).note)==null?void 0:y.octave),1),l("div",X,r(a(o).note.cents>0?"+":"")+r(a(o).note.cents)+" cents",1)],4),l("div",{class:"btn",onClick:n[2]||(n[2]=_=>e.running=!e.running)},[e.running?(c(),h("div",te)):(c(),h("div",ee))]),l("div",{class:"btn",onClick:n[3]||(n[3]=_=>m())},ie),l("div",ne,r(a(o).bpm.toFixed(1))+" BPM",1)])):P("",!0)])}}},se=k(le,[["__scopeId","data-v-41401c80"]]),De=JSON.parse('{"title":"Pitch roll","description":"Plot main pitch of any incoming audio on an endless roll","frontmatter":{"title":"Pitch roll","description":"Plot main pitch of any incoming audio on an endless roll","layout":"app","cover":"roll.png","date":"2022-06-12T00:00:00.000Z"},"headers":[],"relativePath":"practice/pitch/roll/index.md","filePath":"practice/pitch/roll/index.md","lastUpdated":1704280285000}'),ae={name:"practice/pitch/roll/index.md"},re=q("",2);function ce(p,e,f,g,v,o){const i=se,t=J("client-only");return c(),h("div",null,[w(t,null,{default:S(()=>[w(i)]),_:1}),re])}const Ie=k(ae,[["render",ce]]);export{De as __pageData,Ie as default};
