import{_ as T}from"./chunks/start.909a21ce.js";import{u as C}from"./chunks/tuner.f4ce031f.js";import{_ as D,E as B,J as I,S as y,l as R,k as V,D as A,q as $,o as c,c as h,u as a,a as n,t as r,y as E,h as b,b as F,B as w,g as M,v as W,p as q,i as z,G as H,d as P,e as J}from"./chunks/framework.f75e5dc4.js";import{u as O}from"./chunks/index.de966dde.js";import{w as j}from"./chunks/index.654bd828.js";import"./chunks/colors.6e70028c.js";import"./chunks/calculations.65ee336d.js";import"./chunks/index.cccf7ef0.js";import"./chunks/midi.ee496394.js";import"./chunks/commonjsHelpers.de833af9.js";import"./chunks/index.140cffd8.js";import"./chunks/synth.ffb45e01.js";import"./chunks/audio.2835df43.js";import"./chunks/Scale.f9a07a23.js";import"./chunks/Subtract.e7604129.js";import"./chunks/PingPongDelay.0ce05937.js";import"./chunks/AutoPanner.5498cf00.js";import"./chunks/MonoSynth.3cdcc469.js";import"./chunks/Filter.e19ab36f.js";import"./chunks/theory.dec16ed9.js";import"./chunks/index.be7eb4a8.js";import"./chunks/index.9f9b4fe3.js";const k=p=>(q("data-v-83586260"),p=p(),z(),p),G={class:"flex flex-col mb-8"},K={key:0,class:"flex p-8 items-center"},U={class:"p-1 w-2em"},Y={class:"p-1 w-1em"},Z={class:"p-1 mt-2 w-6em text-sm"},L={key:0,class:"i-la-play"},Q={key:1,class:"i-la-pause"},X=k(()=>n("div",{class:"i-la-times"},null,-1)),ee=[X],te={class:"flex-1 text-center font-bold"},oe={class:"fullscreen-container rounded-3xl cursor-pointer",id:"screen"},ie={class:"p-1 absolute top-2 left-2 flex items-center"},le=k(()=>n("div",{class:"i-la-angle-double-right"},null,-1)),ne={__name:"roll",setup(p){const e=B({running:!0,speed:O(I("pitch-roll-speed",4),4,20),runnerWidth:2,runnerAhead:4,maxPlotFrequency:880,maxPlotNote:97,minPlotNote:24,prevBeat:0,step:0});y(" ",s=>{s.preventDefault(),e.running=!e.running}),y("Enter",()=>{m()});function g(s){s.tap&&(e.running=!e.running),e.speed=e.speed+s.delta[0]/5}const _=[0,1,2,3,4,5,6,7,8],{init:S,tuner:o}=C(),i=R();let t;V(()=>{t=i.value.getContext("2d")}),A(()=>o==null?void 0:o.frame,s=>{if(!e.running)return;let l=s*e.speed%i.value.width;if(t.globalAlpha=1,t.clearRect(l,0,e.speed,i.value.height),t.beginPath(),t.fillStyle=o.note.color,t.fillRect(l+e.speed,0,e.runnerWidth,i.value.height),!o.note.silent){const d=i.value.height-(o.note.value-e.minPlotNote)/(e.maxPlotNote-e.minPlotNote)*i.value.height;t.arc(l-8,d,8,0,4*Math.PI),t.fillStyle=j(o.note.color).lighten(.3).toHex(),t.fill()}if(s%50==0){t.beginPath(),t.strokeStyle="hsla(90,50%,50%,0.1)",t.lineWidth="1";for(let d of _){let u=i.value.height-(d*12-e.minPlotNote)/(e.maxPlotNote-e.minPlotNote)*i.value.height;t.moveTo(0,u),t.lineTo(i.value.width,u)}t.stroke()}t.globalAlpha=.25,o.beat>e.prevBeat&&(e.prevBeat=o.beat,t.fillStyle=o.note.color,t.fillRect(l-5,0,1,i.value.height))});function N(){S(),e.running=!0}function m(){t.clearRect(0,0,i.value.width,i.value.height)}return(s,l)=>{var v,x;const d=T,u=$("drag");return c(),h("div",G,[a(o).note?(c(),h("div",K,[n("div",{class:"flex-1 text-center font-bold text-4xl transition-all duration-200 flex items-center",style:E({color:a(o).note.color})},[n("div",U,r((v=a(o).note)==null?void 0:v.name),1),n("div",Y,r((x=a(o).note)==null?void 0:x.octave),1),n("div",Z,r(a(o).note.cents>0?"+":"")+r(a(o).note.cents)+" cents",1)],4),n("div",{class:"btn",onClick:l[0]||(l[0]=f=>e.running=!e.running)},[e.running?(c(),h("div",Q)):(c(),h("div",L))]),n("div",{class:"btn",onClick:l[1]||(l[1]=f=>m())},ee),n("div",te,r(a(o).bpm.toFixed(1))+" BPM",1)])):b("",!0),n("div",oe,[a(o).running?b("",!0):(c(),F(d,{key:0,class:"absolute",onClick:l[2]||(l[2]=f=>N())},{default:w(()=>[M("Start rolling ")]),_:1})),n("div",ie,[le,n("span",null,r(e.speed.toFixed(1)),1)]),W(n("canvas",{class:"w-full h-full rounded-3xl",ref_key:"roll",ref:i,width:1920,height:1080,onDblclick:l[3]||(l[3]=f=>m())},null,544),[[u,g]])])])}}},se=D(ne,[["__scopeId","data-v-83586260"]]),ae=J("",2),Ie=JSON.parse('{"title":"Pitch Roll","description":"Plot main pitch of any incoming audio on an endless roll","frontmatter":{"title":"Pitch Roll","description":"Plot main pitch of any incoming audio on an endless roll","cover":"roll.png","date":"2022-06-12T00:00:00.000Z"},"headers":[],"relativePath":"practice/pitch/roll/index.md","filePath":"practice/pitch/roll/index.md","lastUpdated":1689843676000}'),re={name:"practice/pitch/roll/index.md"},Re=Object.assign(re,{setup(p){return(e,g)=>{const _=H("client-only");return c(),h("div",null,[P(_,null,{default:w(()=>[P(se)]),_:1}),ae])}}});export{Ie as __pageData,Re as default};
