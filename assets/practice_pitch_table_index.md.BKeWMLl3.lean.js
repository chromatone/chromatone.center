import{_ as x,e as c,f as p,g as r,m as w,l as f,b as z,u as h,c as m,k as o,p as v,O,d as y,Y as D,j as k,v as C,a0 as _,n as B,y as P,z as A,M as E,r as V,F as S,h as T,A as I,B as F,ak as R,Z as H,a5 as U}from"./chunks/framework.De1wmbud.js";import{a8 as L,aA as Y,aG as Z,p as j,aB as G,n as J,e as N,aH as K,aI as Q,g as W,_ as X}from"./chunks/theme.DaHGH2Mp.js";const ee={class:"button"},te={class:"uppercase mr-1"},oe={__name:"PitchTableSwitch",props:{label:{type:String,default:""},state:{type:Boolean,default:!1}},setup(a){return(s,t)=>(c(),p("div",ee,[r("div",{class:"indicator mr-2",style:w({color:a.state?"#fff":"#333"})},"●",4),r("div",te,f(a.label),1)]))}},ae=x(oe,[["__scopeId","data-v-72378355"]]),e=z({show:{letters:h("table-letters",!0),bpm:h("table-bpm",!0),hz:h("table-hz",!0),len:h("table-len",!0)},stopped:!0,middleA:h("table-middleA",440),tuning:"equal",octave:{range:{bottom:h("table-bottom",1),top:h("table-top",4)},limit:{bottom:-6,top:8},list:m(()=>{let a=[];for(let s=e.octave.range.top;s>=e.octave.range.bottom;s--)a.push(s);return a}),inc:le,dec:se}});function se(a){let s=a?"top":"bottom",t=a?"bottom":"top";a&&e.octave.range[s]<=e.octave.range[t]||!a&&e.octave.range[s]<=e.octave.limit[s]||e.octave.range[s]--}function le(a){let s=a?"top":"bottom",t=a?"bottom":"top";a&&e.octave.range[s]>=e.octave.limit[s]||!a&&e.octave.range[s]>=e.octave.range[t]||e.octave.range[s]++}const ne={key:0,class:"flex flex-col text-xs p-1"},ce={key:0,class:"text-xl font-bold"},ie={key:1,class:"flex"},re={key:2,class:"flex"},pe={key:3,class:"flex"},de={__name:"PitchTableCellInfo",props:{name:{type:String,default:"A"},hz:{type:Number,default:440},octave:{default:3,type:Number}},setup(a){const s=a,t=m(()=>s.hz*60),d=m(()=>340/s.hz);function u(n){let l;return n>1e6?l=(n/1e6).toFixed(2)+" M":n>1e3?l=(n/1e3).toFixed(2)+" k":l=n.toFixed(2)+" ",l}return(n,l)=>o(e).show.len||o(e).show.hz||o(e).show.bpm||o(e).show.letters?(c(),p("div",ne,[o(e).show.letters?(c(),p("div",ce,f(a.name)+f(a.octave),1)):v("",!0),o(e).show.hz?(c(),p("div",ie,f(u(a.hz))+"hz",1)):v("",!0),o(e).show.len?(c(),p("div",re,f(d.value.toFixed(2))+" m",1)):v("",!0),o(e).show.bpm?(c(),p("div",pe,f(u(t.value))+"BPM",1)):v("",!0)])):v("",!0)}};function ue(a,s){const{channel:t}=L("table"),d=new Y(0,-1/0).connect(t),u=new Z({oscillator:{type:"sawtooth"},envelope:{attack:.5},filterEnvelope:{attack:.05}}).connect(d),n=z({vol:0,pan:50,started:!1,active:m(()=>n.vol>0),freq:m(()=>{let l=j(a,s,e.middleA);return u.oscillator.frequency.value=l,l})});return O(()=>{u.triggerRelease(),u.dispose()}),y(()=>n.vol,l=>{d.volume.targetRampTo(G(l*.4/100),"16n")}),y(()=>n.pan,l=>{let i=(l-50)/100*2;d.pan.targetRampTo(i,"16n")}),y(()=>e.stopped,l=>{l&&(n.vol=0,n.pan=50)}),y(()=>n.active,l=>{l?(e.stopped&&(e.stopped=!1),u.triggerAttack(n.freq)):u.triggerRelease()}),n}const _e=["drag-options"],ve={class:"absolute w-full h-full top-0 left-0 bottom-0"},he={class:"absolute h-full top-0 left-0 right-0 text-center"},me={__name:"PitchTableCell",props:{pitch:{type:Number,default:0},octave:{default:3,type:Number}},setup(a){const s=a,t=ue(s.pitch,s.octave),d=z({filterTaps:!0,preventWindowScrollY:!0,delay:0,eventOptions:{passive:!1}}),u=i=>{K.state=="suspended"&&Q();let{movement:[b,g],tap:$}=i;$?t.active?(t.vol=0,t.pan=50):t.vol=50:(t.vol+=-g/20,t.vol>100&&(t.vol=100),t.vol<0&&(t.vol=0),t.pan+=b/20,t.pan>100&&(t.pan=100),t.pan<0&&(t.pan=0))},n=m(()=>J(s.pitch,s.octave)),l=m(()=>Math.abs(s.octave+2)*8>40?"hsla(0,0%,0%,"+(t.active?"1":"0.8")+")":"hsla(0,0%,100%,"+(t.active?"1":"0.8")+")");return(i,b)=>{const g=de,$=D("drag");return k((c(),p("div",{class:B(["cell",{active:o(t).active}]),"drag-options":d,style:w({backgroundColor:n.value,color:l.value})},[k(r("div",ve,[r("div",{class:"volume",style:w({height:o(t).vol+"%"})},null,4)],512),[[C,o(t).vol>0]]),k(r("div",he,[r("div",{class:"pan absolute bg-gray-100 h-full m-auto",style:w({left:o(t).pan+"%"})},null,4)],512),[[C,o(t).pan!=50]]),_(g,{name:o(N)[a.pitch],hz:o(t).freq,octave:a.octave},null,8,["name","hz","octave"])],14,_e)),[[$,u]])}}},fe=x(me,[["__scopeId","data-v-75b02e55"]]),q=a=>(P("data-v-7b6e39ea"),a=a(),A(),a),be={class:"flex text-2xl text-center cursor-pointer w-full"},ge=q(()=>r("div",{class:"i-la-minus"},null,-1)),xe=[ge],ye=q(()=>r("div",{class:"i-la-plus"},null,-1)),we=[ye],ke={__name:"PitchTableShift",props:{top:Boolean},setup(a){return(s,t)=>(c(),p("div",be,[o(e).octave.range.bottom!=o(e).octave.limit.bottom?(c(),p("div",{key:0,class:"btn bg-gray-300 dark-bg-gray-900",onClick:t[0]||(t[0]=d=>o(e).octave.dec(a.top))},xe)):v("",!0),o(e).octave.range.top!=o(e).octave.limit.top?(c(),p("div",{key:1,class:"btn bg-gray-50 dark-bg-gray-500",onClick:t[1]||(t[1]=d=>o(e).octave.inc(a.top))},we)):v("",!0)]))}},$e=x(ke,[["__scopeId","data-v-7b6e39ea"]]),M=a=>(P("data-v-5d35e128"),a=a(),A(),a),Se={class:"fullscreen-container",id:"screen"},ze={class:"flex flex-wrap"},Ce={class:"flex flex-col p-2",style:{flex:"10 1 6rem"}},Te={class:"flex-auto flex flex-wrap rounded-xl dark-bg-dark-700 shadow items-center p-2 gap-2 relative"},Ie={class:"flex px-2 rounded-lg items-center bg-light-300 dark-bg-dark-800"},Be=M(()=>r("div",{class:"p-1 pr-2 font-bold"},"A",-1)),Pe=M(()=>r("div",{class:"p-1"},"Hz",-1)),Ae={__name:"PitchTable",setup(a){return E("Enter",s=>{s.preventDefault(),e.stopped=!e.stopped}),V(),(s,t)=>{const d=$e,u=fe,n=X,l=ae;return c(),p(S,null,[r("div",Se,[_(d,{top:!0}),(c(!0),p(S,null,T(o(e).octave.list,i=>(c(),p("div",{class:"flex w-full",key:i},[(c(!0),p(S,null,T(o(N),(b,g)=>(c(),I(u,{key:b,class:B({dim:!o(W).isIn(b)}),pitch:g,octave:i},null,8,["class","pitch","octave"]))),128))]))),128)),_(d)]),r("div",ze,[_(n,{class:"mb-4 flex-auto",style:{flex:"1 1 2rem"}}),r("div",Ce,[r("div",Te,[_(l,{label:"letters",state:o(e).show.letters,onClick:t[0]||(t[0]=i=>o(e).show.letters=!o(e).show.letters)},null,8,["state"]),_(l,{label:"FREQ",state:o(e).show.hz,onClick:t[1]||(t[1]=i=>o(e).show.hz=!o(e).show.hz)},null,8,["state"]),_(l,{label:"Length",state:o(e).show.len,onClick:t[2]||(t[2]=i=>o(e).show.len=!o(e).show.len)},null,8,["state"]),_(l,{label:"BPM",state:o(e).show.bpm,onClick:t[3]||(t[3]=i=>o(e).show.bpm=!o(e).show.bpm)},null,8,["state"])]),_(R,{name:"fade"},{default:F(()=>[o(e).stopped?v("",!0):(c(),I(l,{key:0,class:"my-4",label:"STOP",state:o(e).stopped,onClick:t[4]||(t[4]=i=>o(e).stopped=!o(e).stopped)},null,8,["state"]))]),_:1}),r("div",Ie,[Be,k(r("input",{class:"mx-1 p-2 max-w-26 dark-bg-dark-800","onUpdate:modelValue":t[5]||(t[5]=i=>o(e).middleA=i),type:"number"},null,512),[[H,o(e).middleA]]),Pe])])])],64)}}},Fe=x(Ae,[["__scopeId","data-v-5d35e128"]]),De=JSON.parse('{"title":"Table","description":"Every possible note in a huge expandable table","frontmatter":{"title":"Table","description":"Every possible note in a huge expandable table","layout":"app","cover":"table.png","date":"2022-06-02T00:00:00.000Z"},"headers":[],"relativePath":"practice/pitch/table/index.md","filePath":"practice/pitch/table/index.md","lastUpdated":1720167572000}'),Ne={name:"practice/pitch/table/index.md"};function qe(a,s,t,d,u,n){const l=Fe,i=U("client-only");return c(),p("div",null,[_(i,null,{default:F(()=>[_(l)]),_:1})])}const Ee=x(Ne,[["render",qe]]);export{De as __pageData,Ee as default};
