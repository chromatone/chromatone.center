import{L as g,_ as b}from"./chunks/theme.sZ-cBsnJ.js";import{_ as $}from"./chunks/AnalysisScope.5-01mCKk.js";import{s as n,u as S}from"./chunks/useAudio.sXl67oWi.js";import{b as w,u as _,c as v,d as C,D as x,E as m,F as c,G as u,O as p,C as s,I as h,V as y,W as f,P as q,X as V,a4 as M}from"./chunks/framework.NDjH5Ni5.js";import{k as E,c as U,h as A}from"./chunks/useDrums.aJ9-Qr8c.js";function D(){const o=w({mute:!1,playing:!1,reset:0,volume:g(_("seq:volume",.7),0,1),bpm:_("seq:bpm",120),interval:v(()=>6e4/o.bpm),tracks:{hhat:Array(16).fill(1),clap:Array(16).fill(0),kick:Array(16).fill(0)},hit:{hhat:0,clap:0,kick:0},train:v(()=>n.train({key:"seq:train"},n.sm(n.const({key:"seq:freq",value:o.playing?o.bpm/15:0}))))});return C(o,e=>{const{audio:d,render:t}=S(),r=n.const({key:"seq:reset",value:0}),a=n.mul(n.const({key:"seq:volume",value:o.volume}),n.scope({name:"drums",size:512},n.add(E(30,.254,.05,.4,4,n.or(n.const({key:"hit:kick",value:o.hit.kick}),n.seq2({key:"seq:kick",seq:[...e.tracks.kick]},o.train,r))),U(800,.005,.204,n.or(n.const({key:"hit:clap",value:o.hit.clap}),n.seq2({key:"seq:clap",seq:[...e.tracks.clap]},o.train,r))),A(317,12e3,.005,.1,n.or(n.const({key:"hit:hhat",value:o.hit.hhat}),n.seq2({key:"seq:hh",seq:[...e.tracks.hhat]},o.train,r))))));d.layers.seq={signal:[a,a]},t("sequencer")}),{sequencer:o}}const P={class:"flex flex-col gap-2 is-group p-2 bg-light-200 dark-bg-dark-200 shadow rounded gap-4 min-w-full"},T={class:"is-group flex flex-wrap"},z={class:"flex flex-col gap-2"},B=["onMousedown","onMouseup"],N=["onClick"],L={__name:"DrumsSequencer",setup(o){const{sequencer:e}=D();return(d,t)=>{const r=b;return m(),c("div",P,[u("div",T,[p(r,{param:"BPM",min:20,max:500,step:1,modelValue:s(e).bpm,"onUpdate:modelValue":t[0]||(t[0]=a=>s(e).bpm=a)},null,8,["modelValue"]),u("button",{class:"text-button",onClick:t[1]||(t[1]=a=>s(e).playing=!s(e).playing)},h(s(e).playing?"PAUSE":"PLAY"),1),u("button",{class:"text-button",onClick:t[2]||(t[2]=a=>s(e).mute=!s(e).mute)},h(s(e).mute?"UNMUTE":"MUTE"),1),u("button",{class:"text-button",onMousedown:t[3]||(t[3]=a=>s(e).reset=1),onMouseup:t[4]||(t[4]=a=>s(e).reset=0),onTouchstart:t[5]||(t[5]=a=>s(e).reset=1),onTouchend:t[6]||(t[6]=a=>s(e).reset=0)},"RESET",32),p(r,{param:"Vol",min:0,max:1,step:.001,modelValue:s(e).volume,"onUpdate:modelValue":t[7]||(t[7]=a=>s(e).volume=a)},null,8,["modelValue"]),p($,{class:"flex-1 max-h-30",name:"drums"})]),u("div",z,[(m(!0),c(y,null,f(s(e).tracks,(a,l)=>(m(),c("div",{class:"flex items-center gap-1",key:l},[u("div",{class:q(["step",{active:s(e).hit[l]}]),onMousedown:i=>s(e).hit[l]=1,onMouseup:i=>s(e).hit[l]=0},h(l),43,B),(m(!0),c(y,null,f(a,(i,k)=>(m(),c("div",{class:q(["step",{active:i==1}]),key:k,onClick:R=>a[k]=i==1?0:1},null,10,N))),128))]))),128))])])}}},F=x(L,[["__scopeId","data-v-7bc5e924"]]),Z=JSON.parse('{"title":"Drum machine","description":"Simple drum sequencer with synthesized sounds","frontmatter":{"title":"Drum machine","description":"Simple drum sequencer with synthesized sounds","date":"2019-11-02T00:00:00.000Z"},"headers":[],"relativePath":"practice/rhythm/drum-machine/index.md","filePath":"practice/rhythm/drum-machine/index.md","lastUpdated":1706289625000}'),I={name:"practice/rhythm/drum-machine/index.md"};function O(o,e,d,t,r,a){const l=F,i=M("client-only");return m(),c("div",null,[p(i,null,{default:V(()=>[p(l)]),_:1})])}const j=x(I,[["render",O]]);export{Z as __pageData,j as default};
