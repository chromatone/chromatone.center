import{_ as g}from"./chunks/ControlRotary.Xs4wIQHy.js";import{_ as b}from"./chunks/AnalysisScope.19YMwmQR.js";import{s as n,u as $}from"./chunks/useAudio.FS1aMs33.js";import{k as S,v as _,j as v,w,_ as x,o as m,c,a as u,f as p,g as s,t as h,F as f,r as y,z as q,m as C,n as M}from"./chunks/framework.zmD4b-eB.js";import{u as V}from"./chunks/index.qXrjdxB9.js";import{k as U,c as A,h as E}from"./chunks/useDrums.uLXrHR6N.js";import"./chunks/midi.RNICv3HM.js";import"./chunks/commonjsHelpers.4gQjN7DL.js";import"./chunks/index.iB1AmcYb.js";function T(){const a=S({mute:!1,playing:!1,reset:0,volume:V(_("seq:volume",.7),0,1),bpm:_("seq:bpm",120),interval:v(()=>6e4/a.bpm),tracks:{hhat:Array(16).fill(1),clap:Array(16).fill(0),kick:Array(16).fill(0)},hit:{hhat:0,clap:0,kick:0},train:v(()=>n.train({key:"seq:train"},n.sm(n.const({key:"seq:freq",value:a.playing?a.bpm/15:0}))))});return w(a,e=>{const{audio:d,render:t}=$(),r=n.const({key:"seq:reset",value:0}),o=n.mul(n.const({key:"seq:volume",value:a.volume}),n.scope({name:"drums",size:512},n.add(U(30,.254,.05,.4,4,n.or(n.const({key:"hit:kick",value:a.hit.kick}),n.seq2({key:"seq:kick",seq:[...e.tracks.kick]},a.train,r))),A(800,.005,.204,n.or(n.const({key:"hit:clap",value:a.hit.clap}),n.seq2({key:"seq:clap",seq:[...e.tracks.clap]},a.train,r))),E(317,12e3,.005,.1,n.or(n.const({key:"hit:hhat",value:a.hit.hhat}),n.seq2({key:"seq:hh",seq:[...e.tracks.hhat]},a.train,r))))));d.layers.seq={signal:[o,o]},t("sequencer")}),{sequencer:a}}const z={class:"flex flex-col gap-2 is-group p-2 bg-light-200 dark-bg-dark-200 shadow rounded gap-4 min-w-full"},D={class:"is-group flex flex-wrap"},P={class:"flex flex-col gap-2"},B=["onMousedown","onMouseup"],N=["onClick"],F={__name:"DrumsSequencer",setup(a){const{sequencer:e}=T();return(d,t)=>{const r=g;return m(),c("div",z,[u("div",D,[p(r,{param:"BPM",min:20,max:500,step:1,modelValue:s(e).bpm,"onUpdate:modelValue":t[0]||(t[0]=o=>s(e).bpm=o)},null,8,["modelValue"]),u("button",{class:"text-button",onClick:t[1]||(t[1]=o=>s(e).playing=!s(e).playing)},h(s(e).playing?"PAUSE":"PLAY"),1),u("button",{class:"text-button",onClick:t[2]||(t[2]=o=>s(e).mute=!s(e).mute)},h(s(e).mute?"UNMUTE":"MUTE"),1),u("button",{class:"text-button",onMousedown:t[3]||(t[3]=o=>s(e).reset=1),onMouseup:t[4]||(t[4]=o=>s(e).reset=0),onTouchstart:t[5]||(t[5]=o=>s(e).reset=1),onTouchend:t[6]||(t[6]=o=>s(e).reset=0)},"RESET",32),p(r,{param:"Vol",min:0,max:1,step:.001,modelValue:s(e).volume,"onUpdate:modelValue":t[7]||(t[7]=o=>s(e).volume=o)},null,8,["modelValue"]),p(b,{class:"flex-1 max-h-30",name:"drums"})]),u("div",P,[(m(!0),c(f,null,y(s(e).tracks,(o,l)=>(m(),c("div",{class:"flex items-center gap-1",key:l},[u("div",{class:q(["step",{active:s(e).hit[l]}]),onMousedown:i=>s(e).hit[l]=1,onMouseup:i=>s(e).hit[l]=0},h(l),43,B),(m(!0),c(f,null,y(o,(i,k)=>(m(),c("div",{class:q(["step",{active:i==1}]),key:k,onClick:I=>o[k]=i==1?0:1},null,10,N))),128))]))),128))])])}}},L=x(F,[["__scopeId","data-v-7bc5e924"]]),X=JSON.parse('{"title":"Drum machine","description":"Simple drum sequencer with synthesized sounds","frontmatter":{"title":"Drum machine","description":"Simple drum sequencer with synthesized sounds","date":"2019-11-02T00:00:00.000Z"},"headers":[],"relativePath":"practice/rhythm/drum-machine/index.md","filePath":"practice/rhythm/drum-machine/index.md","lastUpdated":1702976349000}'),R={name:"practice/rhythm/drum-machine/index.md"};function j(a,e,d,t,r,o){const l=L,i=C("client-only");return m(),c("div",null,[p(i,null,{default:M(()=>[p(l)]),_:1})])}const ee=x(R,[["render",j]]);export{X as __pageData,ee as default};
