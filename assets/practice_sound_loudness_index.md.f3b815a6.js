import{_ as B}from"./chunks/trash.b59b1f8b.js";import{_ as q,i as P,k as v,j as h,o as l,c as i,h as m,a as o,F as p,r as g,t as u,l as w,g as X,d as M,z as D,p as H,e as L,B as A}from"./chunks/framework.a6de132c.js";import{f as N,b as F}from"./chunks/calculations.2bac3e9a.js";import{n as S}from"./chunks/theory.61e5aadb.js";import{t as E}from"./chunks/index.4f21aa60.js";import{u as I}from"./chunks/mouse.ef1ecd22.js";import{c as Y}from"./chunks/audio.bbcaf2bd.js";import{M as T}from"./chunks/MonoSynth.69c7742d.js";import"./chunks/index.b30cd6d2.js";import"./chunks/index.86652af6.js";import"./chunks/Filter.67be65e0.js";import"./chunks/Scale.d61cb915.js";const f=_=>(H("data-v-2c4bbb6f"),_=_(),L(),_),V={class:"fullscreen-container rounded-3xl p-4 mb-8",id:"screen"},j=["opacity"],R={class:"y"},O=f(()=>o("line",{x1:"0",x2:"0",y1:"0",y2:"600","stroke-width":"2",stroke:"currentColor"},null,-1)),U=f(()=>o("text",{fill:"currentColor","font-family":"Commissioner, sans-serif","font-size":"25px","text-anchor":"middle",x:"-30",y:"240","transform-origin":"-30 240",transform:"rotate(-90)"},"Sound pressure",-1)),J=["transform"],Z=f(()=>o("line",{opacity:"0.2",stroke:"currentColor","stroke-width":"1",y1:"600",y2:"600",x1:"-10",x2:"900"},null,-1)),G={fill:"currentColor","font-family":"Commissioner, sans-serif","font-size":"10px","text-anchor":"left",x:"-25",y:"595"},K=["transform"],Q=["x2"],W={fill:"currentColor","font-family":"Commissioner, sans-serif","font-size":"22px","text-anchor":"left",x:"6",y:"-12"},tt={class:"x"},ot=f(()=>o("line",{x1:"0",x2:"900",y1:"600",y2:"600","stroke-width":"2",stroke:"currentColor"},null,-1)),et=f(()=>o("text",{fill:"currentColor","font-family":"Commissioner, sans-serif","font-size":"25px","text-anchor":"middle",x:"450",y:"650"},"Frequency",-1)),st=["x1","x2"],nt=["x"],rt=["x1","x2","y2","opacity"],lt=["x"],it=["transform"],at=["y1","stroke"],ct=["fill"],ut={fill:"currentColor","font-family":"Commissioner, sans-serif","font-size":"22px","text-anchor":"start",x:"10",y:"590"},dt=["color"],ft=f(()=>o("path",{stroke:"currentColor","stroke-width":"1",fill:"none",transform:"scale(1.46) translate(-82,20)",d:"M82.6,19.38l10.11,16,22,38.26,20.7,35.62c.09.16.18.31.28.46l19.74,29.17a5.39,5.39,0,0,0,.4.54l19.74,24.36,21.84,24.37,13.08,13.58.38.36,16.34,14.85,18.13,15.25.38.3,14.75,10.94c.13.1.28.2.42.29l14.68,9.46,18.19,11,18.43,10.1,18.18,9.47,14.79,6.83c.16.08.32.14.49.21L367.09,299l16.75,5.7.6.18L398,308.35l10.49,2.59.5.11,12.13,2.18.49.07,11.11,1.29a7.83,7.83,0,0,0,1.28,0l9.1-.43a8,8,0,0,0,1.94-.33l13.56-4.18a5.52,5.52,0,0,0,.53-.18l16.53-6.4a9.37,9.37,0,0,1,1-.31l10.53-2.49a8.3,8.3,0,0,1,1.4-.21l8-.42a8,8,0,0,1,1.77.11l5.71,1a7.77,7.77,0,0,1,2.57.93l8.44,4.85a7.5,7.5,0,0,1,.88.59l11.07,8.51,11,7.88c.19.14.38.26.58.38l5.94,3.52a7.35,7.35,0,0,0,1.2.58l2.9,1.11a7.31,7.31,0,0,0,1.59.42l1.06.17a7.91,7.91,0,0,0,4.19-.49l2.49-1a7.85,7.85,0,0,0,2.88-2l6.58-7.32c.11-.12.21-.24.31-.37l10.33-13c.17-.22.33-.44.48-.67l10.38-16.32L599,272c.12-.2.25-.39.39-.58l6-8.19a8,8,0,0,1,2-1.9l4.94-3.26a7.82,7.82,0,0,1,2.92-1.18l4.58-.84a8,8,0,0,1,2.84,0l2.29.42a7.89,7.89,0,0,1,4.23,2.27l5.54,5.72a7.3,7.3,0,0,1,1,1.19l8.2,12.64a7.52,7.52,0,0,0,1.11,1.35l1.92,1.87a7.87,7.87,0,0,0,5.68,2.24h0a7.93,7.93,0,0,0,3.93-1.16l3-1.82a7.87,7.87,0,0,0,2.35-2.21l6-8.59a7.84,7.84,0,0,0,1-2l5.5-16.27a7.38,7.38,0,0,0,.31-1.23l1.55-9.33a8.18,8.18,0,0,1,.33-1.27l6.35-18.44"},null,-1)),mt=["transform"],ht=["fill"],xt={"font-weight":"bold",fill:"white","font-family":"Commissioner, sans-serif","font-size":"18px","text-anchor":"middle",x:"0",y:"5"},_t=["points"],yt=["transform"],pt=["y2","stroke"],gt=["cy","fill","onClick"],Ct=["y"],kt=["y"],vt=["y"],wt=f(()=>o("circle",{cx:"14",cy:"14",r:"22",fill:"gray"},null,-1)),zt=f(()=>o("rect",{x:"250",y:"200",width:"400",height:"100",rx:"20",fill:"gray",stroke:"white"},null,-1)),bt=f(()=>o("text",{"font-weight":"bold",fill:"white","font-family":"Commissioner, sans-serif","font-size":"42px","text-anchor":"middle",x:"450",y:"265"},"START AUDIO",-1)),$t=[zt,bt],Mt={__name:"SoundLoudness",setup(_){const y=P(!1);function z(){E(),y.value=!0}const{svg:b,area:$,mouse:r}=I(),e=v({min:10,max:2e4,marks:[10,20,30,40,50,60,70,80,90,100,200,300,400,500,600,700,800,900,1e3,2e3,3e3,4e3,5e3,6e3,7e3,8e3,9e3,1e4,2e4],nums:[10,20,50,100,200,500,1e3,2e3,5e3,1e4,2e4],As:[22.5,55,110,220,440,880,1760,3520,7040,14080],Cs:[16,32,65,130.813,261,523,1046,2093,4186,8372,16744],hz:h(()=>e.toHz(r.normX)),color:h(()=>N(e.hz)),pitch:h(()=>(F(e.hz)+120)%12),note:h(()=>{let s=Math.round(e.pitch);return s>11.5&&(s=0),S[s]}),cents:h(()=>((e.pitch-e.pitch.toFixed(0))*100).toFixed(0)),toNormX(s){return(Math.log(s)-Math.log(e.min))/(Math.log(e.max)-Math.log(e.min))},toHz(s){return Math.pow(10,s*(Math.log10(e.max)-Math.log10(e.min))+Math.log10(e.min))}}),d=v({min:-80,max:10,marks:[-80,-70,-60,-50,-40,-30,-20,-10,0,10],db:h(()=>d.toDb(r.normY)),toDb(s){return(d.max-d.min)*s+d.min},toNormY(s){return(s-d.min)/(d.max-d.min)}});let C;const a=v({list:[],add(){var x,k;C||(C=Y("loudness").channel);let s=e.toHz(r.normX),n=new T({oscillator:{type:"sine"},volume:d.db}).connect(C);n.triggerAttack(s,r.normY);let c=(F(s)+120)%12;c>11.5&&(c=0);let t=((c-c.toFixed(0))*100).toFixed(0);a.list.push({synth:n,x:r.x,y:r.y,hz:s,pitch:c,cents:t,note:(k=(x=S)==null?void 0:x[Math.round(c)])==null?void 0:k.name,color:N(s)})},line:h(()=>{let s=[],n=[...a.list];return n.sort((c,t)=>c.x<t.x?-1:1),n.forEach(c=>{s.push([c.x,c.y].join(","))}),s.join(" ")}),clear(){a.list.forEach(s=>{s.synth.triggerRelease()}),a.list.splice(0,a.list.length)},remove(s){var n;(n=a.list)==null||n[s].synth.triggerRelease(),a.list.splice(s,1)}});return(s,n)=>{const c=B;return l(),i("div",V,[(l(),i("svg",{class:"w-full select-none",ref_key:"svg",ref:b,version:"1.1",baseProfile:"full",viewBox:"-50 -50 1000 720",xmlns:"http://www.w3.org/2000/svg",style:{"touch-action":"none"},onMousemove:n[2]||(n[2]=(...t)=>m(r).getCursorPosition&&m(r).getCursorPosition(...t)),onClick:n[3]||(n[3]=t=>a.add())},[o("g",{opacity:y.value?1:.1,class:D({"pointer-events-none":!y.value})},[o("g",R,[O,U,(l(!0),i(p,null,g(d.marks,t=>(l(),i("g",{key:t,transform:`translate(0, ${-d.toNormY(t)*600})`},[Z,o("text",G,u(t),1)],8,J))),128)),o("g",{transform:`translate(0, ${m(r).y})`},[o("line",{x1:"-5",x2:m(r).x,y1:"0",y2:"0",stroke:"currentColor","stroke-width":"1px",opacity:"0.8"},null,8,Q),o("text",W,u(d.db.toFixed(0))+" db",1)],8,K)]),o("g",tt,[ot,et,(l(!0),i(p,null,g(e.Cs,(t,x)=>(l(),i("g",{key:t},[o("line",{x1:900*e.toNormX(t),x2:900*e.toNormX(t),y1:"0",y2:600,stroke:"hsla(90,50%,50%,1)","stroke-width":"2",opacity:"0.4"},null,8,st),o("text",{fill:"hsla(90,50%,50%,1)",x:900*e.toNormX(t)+5,y:"20"},"C"+u(x),9,nt)]))),128)),(l(!0),i(p,null,g(e.marks,t=>(l(),i("g",{key:t},[o("line",{x1:900*e.toNormX(t),x2:900*e.toNormX(t),y1:"0",y2:e.nums.includes(t)?620:600,stroke:"currentColor","stroke-width":"1",opacity:e.nums.includes(t)?.3:.1},null,8,rt)]))),128)),(l(!0),i(p,null,g(e.nums,t=>(l(),i("text",{key:t,fill:"currentColor","font-family":"Commissioner, sans-serif","font-size":"12px","text-anchor":"middle",x:900*e.toNormX(t),y:"625"},u(t)+" Hz",9,lt))),128)),o("g",{transform:`translate(${m(r).x}, 0)`},[o("line",{class:"transition-all duration-100",x1:"0",x2:"0",y1:m(r).y,y2:"600",stroke:e.color,"stroke-width":"2px"},null,8,at),o("circle",{class:"transition-all duration-100",cx:"0",cy:"600",r:"6",fill:e.color},null,8,ct),o("text",ut,u(e.hz.toFixed(1))+" Hz",1),o("text",{fill:"currentColor","font-family":"Commissioner, sans-serif","font-size":"22px","text-anchor":"end",x:"-10",y:"590",color:e.color},u(e.note.name)+" "+u(e.cents),9,dt)],8,it)]),ft,o("rect",{ref_key:"area",ref:$,style:{cursor:"none"},x:"0",y:"0",width:"900",height:"600",fill:"hsla(0,0%,100%,0.1)"},null,512),o("g",{transform:`translate(${m(r).x}, ${m(r).y})`},[o("circle",{class:"pointer",cx:0,cy:0,r:"16",fill:e.color},null,8,ht),o("text",xt,u(e.note),1)],8,mt),o("polyline",{points:a.line,stroke:"currentColor","stroke-width":"4",fill:"none",opacity:"0.7"},null,8,_t),(l(!0),i(p,null,g(a.list,(t,x)=>(l(),i("g",{key:t.hz,transform:`translate(${t.x}, 0)`},[o("line",{x1:"0",x2:"0",y1:"600",y2:t.y,stroke:t.color,"stroke-width":"2"},null,8,pt),o("circle",{class:"cursor-pointer",cx:"0",cy:t.y,r:"20",fill:t.color,onClick:w(k=>a.remove(x),["stop","prevent"])},null,8,gt),o("text",{fill:"currentColor","font-family":"Commissioner, sans-serif","font-size":"16px","text-anchor":"end",x:"-5",y:t.y+36},u(t.cents<0?"":"+")+u(t.cents),9,Ct),o("text",{fill:"currentColor","font-family":"Commissioner, sans-serif","font-size":"16px","text-anchor":"start",x:"5",y:t.y+36},u(t.hz.toFixed(1))+" Hz",9,kt),o("text",{"font-weight":"bold",fill:"white","font-family":"Commissioner, sans-serif","font-size":"22px","text-anchor":"middle",x:"0",y:t.y+8},u(t.note),9,vt)],8,yt))),128)),a.list.length>0?(l(),i("g",{key:0,class:"cursor-pointer",transform:"translate(860,560)",onClick:n[0]||(n[0]=w(t=>a.clear(),["stop","prevent"]))},[wt,X(c,{class:"text-2xl"})])):M("",!0)],10,j),y.value?M("",!0):(l(),i("g",{key:0,class:"cursor-pointer",onClick:n[1]||(n[1]=w(t=>z(),["stop","prevent"]))},$t))],544))])}}},Nt=q(Mt,[["__scopeId","data-v-2c4bbb6f"]]),jt=JSON.parse('{"title":"Equal loudness contour","description":"Build you own loudness contours","frontmatter":{"title":"Equal loudness contour","description":"Build you own loudness contours","date":"2021-11-12T00:00:00.000Z","cover":"loudness.png"},"headers":[],"relativePath":"practice/sound/loudness/index.md","filePath":"practice/sound/loudness/index.md","lastUpdated":1694022443000}'),Ft={name:"practice/sound/loudness/index.md"},St=o("blockquote",null,[o("p",null,[o("strong",null,"Find your own equal loudness contour"),o("br"),A(" Place sine oscillators on the 2D-plane where vertical axis is the volume and horizontal is the frequency of the sounds being played. You can build up a curve for your absolute threshold of hearing, or explore your own feeling of really loud sounds. "),o("strong",null,"Be careful clicking at the top of the graph!")])],-1);function qt(_,y,z,b,$,r){const e=Nt;return l(),i("div",null,[X(e),St])}const Rt=q(Ft,[["render",qt]]);export{jt as __pageData,Rt as default};
