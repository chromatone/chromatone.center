import{_ as x}from"./chunks/AnalysisFFT.BkDEGKK3.js";import{_ as y}from"./chunks/AnalysisScope.CCTkmeI3.js";import{J as g,aE as r,aw as S}from"./chunks/theme.DNlGQ6Qf.js";import{u as d}from"./chunks/useElementary.C87yR9BT.js";import{s as h,d as p,x as u,y as _,A as O,G as C,E as t,z as M,X as i,q as $,N as A,a4 as U}from"./chunks/framework.-sYaBLvc.js";const e=h({isOpen:!1,stream:null,streamSource:null,gain:g(1,0,10),async open(){const{audio:n}=d();navigator.mediaDevices&&navigator.mediaDevices.getUserMedia&&(e.stream=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!1,noiseSuppression:!1}}),e.streamSource=n.ctx.createMediaStreamSource(e.stream),e.streamSource.connect(n.node))},close(){e.streamSource.disconnect()}});function b(){const{audio:n,render:a}=d();return p(e,()=>{const s=r.mul(r.const({key:"mic:gain",value:e.gain.value}),r.in({key:"mic:in",channel:0}));n.layers.mic={signal:e.isOpen?[r.scope({name:"mic",size:512},s),s]:[0,0]},n.started=!1,a("mic")}),p(()=>e.isOpen,s=>{s?e.open():setTimeout(()=>{e.close()},400)}),e}const k={class:"is-group flex items-center"},w={__name:"InputMic",setup(n){const a=b();return(s,o)=>{const l=S,m=y;return u(),_("div",k,[O("button",{class:M(["text-button",{"text-red-500":t(a).isOpen}]),onClick:o[0]||(o[0]=c=>t(a).isOpen=!t(a).isOpen)},C(t(a).isOpen?"Close":"Open")+" mic",3),i(l,{param:"GAIN",modelValue:t(a).gain.value,"onUpdate:modelValue":o[1]||(o[1]=c=>t(a).gain.value=c),min:0,max:10,step:.1},null,8,["modelValue"]),i(m,{name:"mic"})])}}},T=JSON.parse('{"title":"Microphone audio analysis","description":"Use any mic or audio input device and see some valuable data extracted from it","frontmatter":{"title":"Microphone audio analysis","description":"Use any mic or audio input device and see some valuable data extracted from it","date":"2019-11-03T00:00:00.000Z","cover":"mic-app.png","layout":"app"},"headers":[],"relativePath":"practice/sound/mic/index.md","filePath":"practice/sound/mic/index.md","lastUpdated":1724782961000}'),D={name:"practice/sound/mic/index.md"};function N(n,a,s,o,l,m){const c=w,f=x,v=U("client-only");return u(),_("div",null,[i(v,null,{default:A(()=>[i(c,{class:"m-2"}),i(f,{class:"m-2"})]),_:1})])}const F=$(D,[["render",N]]);export{T as __pageData,F as default};
