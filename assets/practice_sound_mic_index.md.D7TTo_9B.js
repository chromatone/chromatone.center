import{_ as g}from"./chunks/AnalysisFFT.BVG7xyN7.js";import{_ as x}from"./chunks/AnalysisScope.CvuQ1wda.js";import{Q as y,_ as O}from"./chunks/theme.CWquGTT4.js";import{u as p,s as r}from"./chunks/useAudio.Bew9qV2w.js";import{s as S,d,E as u,F as _,G as h,I as C,C as s,P as M,O as i,D as $,X as A,a4 as D}from"./chunks/framework.Ci2j13v1.js";const e=S({isOpen:!1,stream:null,streamSource:null,gain:y(1,0,10),async open(){const{audio:n}=p();navigator.mediaDevices&&navigator.mediaDevices.getUserMedia&&(e.stream=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!1,noiseSuppression:!1}}),e.streamSource=n.ctx.createMediaStreamSource(e.stream),e.streamSource.connect(n.node))},close(){e.streamSource.disconnect()}});function U(){const{audio:n,render:a}=p();return d(e,()=>{const t=r.mul(r.const({key:"mic:gain",value:e.gain.value}),r.in({key:"mic:in",channel:0}));n.layers.mic={signal:e.isOpen?[r.scope({name:"mic",size:512},t),t]:[0,0]},a("mic")}),d(()=>e.isOpen,t=>{t?e.open():setTimeout(()=>{e.close()},400)}),e}const b={class:"is-group flex items-center"},k={__name:"InputMic",setup(n){const a=U();return(t,o)=>{const m=O,l=x;return u(),_("div",b,[h("button",{class:M(["text-button",{"text-red-500":s(a).isOpen}]),onClick:o[0]||(o[0]=c=>s(a).isOpen=!s(a).isOpen)},C(s(a).isOpen?"Close":"Open")+" mic",3),i(m,{param:"GAIN",modelValue:s(a).gain.value,"onUpdate:modelValue":o[1]||(o[1]=c=>s(a).gain.value=c),min:0,max:10,step:.1},null,8,["modelValue"]),i(l,{name:"mic"})])}}},T=JSON.parse('{"title":"Microphone audio analysis","description":"Use any mic or audio input device and see some valuable data extracted from it","frontmatter":{"title":"Microphone audio analysis","description":"Use any mic or audio input device and see some valuable data extracted from it","date":"2019-11-03T00:00:00.000Z","cover":"mic-app.png"},"headers":[],"relativePath":"practice/sound/mic/index.md","filePath":"practice/sound/mic/index.md","lastUpdated":1714242038000}'),V={name:"practice/sound/mic/index.md"};function w(n,a,t,o,m,l){const c=k,f=g,v=D("client-only");return u(),_("div",null,[i(v,null,{default:A(()=>[i(c),i(f)]),_:1})])}const z=$(V,[["render",w]]);export{T as __pageData,z as default};
