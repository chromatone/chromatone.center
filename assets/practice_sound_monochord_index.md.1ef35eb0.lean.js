import{f as z,b as L}from"./chunks/calculations.3384a913.js";import{m as J,T as R}from"./chunks/index.7d5af125.js";import{u as X}from"./chunks/synth.1d50230a.js";import{F as C}from"./chunks/index.83aed4fc.js";import{g as Y}from"./chunks/commonjsHelpers.de833af9.js";import{u as Z}from"./chunks/index.d912cb41.js";import{A as I,i as w,l as G,o as k,c as P,a as d,u as c,t as N,w as A,F as K,r as Q,B as U,e as T,x as W}from"./chunks/framework.eba39b59.js";import"./chunks/midi.bddd4f92.js";import"./chunks/index.b30cd6d2.js";import"./chunks/audio.b52dacdb.js";import"./chunks/Scale.7b617051.js";import"./chunks/Subtract.f0fef764.js";import"./chunks/PingPongDelay.6f2be586.js";import"./chunks/AutoPanner.255ea60f.js";import"./chunks/MonoSynth.4cac63d2.js";import"./chunks/Filter.2b531c53.js";var H={exports:{}};/**
 * @license Fraction.js v4.2.0 05/03/2022
 * https://www.xarg.org/2014/03/rational-numbers-in-javascript/
 *
 * Copyright (c) 2021, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/(function(E,p){(function(x){var _=2e3,r={s:1,n:0,d:1};function y(t,n){if(isNaN(t=parseInt(t,10)))throw h.InvalidParameter;return t*n}function f(t,n){if(n===0)throw h.DivisionByZero;var e=Object.create(h.prototype);e.s=t<0?-1:1,t=t<0?-t:t;var i=l(t,n);return e.n=t/i,e.d=n/i,e}function g(t){for(var n={},e=t,i=2,a=4;a<=e;){for(;e%i===0;)e/=i,n[i]=(n[i]||0)+1;a+=1+2*i++}return e!==t?e>1&&(n[e]=(n[e]||0)+1):n[t]=(n[t]||0)+1,n}var m=function(t,n){var e=0,i=1,a=1,v=0,u=0,S=0,B=1,F=1,o=0,s=1,b=1,q=1,$=1e7,j;if(t!=null)if(n!==void 0){if(e=t,i=n,a=e*i,e%1!==0||i%1!==0)throw h.NonIntegerParameter}else switch(typeof t){case"object":{if("d"in t&&"n"in t)e=t.n,i=t.d,"s"in t&&(e*=t.s);else if(0 in t)e=t[0],1 in t&&(i=t[1]);else throw h.InvalidParameter;a=e*i;break}case"number":{if(t<0&&(a=t,t=-t),t%1===0)e=t;else if(t>0){for(t>=1&&(F=Math.pow(10,Math.floor(1+Math.log(t)/Math.LN10)),t/=F);s<=$&&q<=$;)if(j=(o+b)/(s+q),t===j){s+q<=$?(e=o+b,i=s+q):q>s?(e=b,i=q):(e=o,i=s);break}else t>j?(o+=b,s+=q):(b+=o,q+=s),s>$?(e=b,i=q):(e=o,i=s);e*=F}else(isNaN(t)||isNaN(n))&&(i=e=NaN);break}case"string":{if(s=t.match(/\d+|./g),s===null)throw h.InvalidParameter;if(s[o]==="-"?(a=-1,o++):s[o]==="+"&&o++,s.length===o+1?u=y(s[o++],a):s[o+1]==="."||s[o]==="."?(s[o]!=="."&&(v=y(s[o++],a)),o++,(o+1===s.length||s[o+1]==="("&&s[o+3]===")"||s[o+1]==="'"&&s[o+3]==="'")&&(u=y(s[o],a),B=Math.pow(10,s[o].length),o++),(s[o]==="("&&s[o+2]===")"||s[o]==="'"&&s[o+2]==="'")&&(S=y(s[o+1],a),F=Math.pow(10,s[o+1].length)-1,o+=3)):s[o+1]==="/"||s[o+1]===":"?(u=y(s[o],a),B=y(s[o+2],1),o+=3):s[o+3]==="/"&&s[o+1]===" "&&(v=y(s[o],a),u=y(s[o+2],a),B=y(s[o+4],1),o+=5),s.length<=o){i=B*F,a=e=S+i*v+F*u;break}}default:throw h.InvalidParameter}if(i===0)throw h.DivisionByZero;r.s=a<0?-1:1,r.n=Math.abs(e),r.d=Math.abs(i)};function O(t,n,e){for(var i=1;n>0;t=t*t%e,n>>=1)n&1&&(i=i*t%e);return i}function D(t,n){for(;n%2===0;n/=2);for(;n%5===0;n/=5);if(n===1)return 0;for(var e=10%n,i=1;e!==1;i++)if(e=e*10%n,i>_)return 0;return i}function M(t,n,e){for(var i=1,a=O(10,e,n),v=0;v<300;v++){if(i===a)return v;i=i*10%n,a=a*10%n}return 0}function l(t,n){if(!t)return n;if(!n)return t;for(;;){if(t%=n,!t)return n;if(n%=t,!n)return t}}function h(t,n){if(m(t,n),this instanceof h)t=l(r.d,r.n),this.s=r.s,this.n=r.n/t,this.d=r.d/t;else return f(r.s*r.n,r.d)}h.DivisionByZero=new Error("Division by Zero"),h.InvalidParameter=new Error("Invalid argument"),h.NonIntegerParameter=new Error("Parameters must be integer"),h.prototype={s:1,n:0,d:1,abs:function(){return f(this.n,this.d)},neg:function(){return f(-this.s*this.n,this.d)},add:function(t,n){return m(t,n),f(this.s*this.n*r.d+r.s*this.d*r.n,this.d*r.d)},sub:function(t,n){return m(t,n),f(this.s*this.n*r.d-r.s*this.d*r.n,this.d*r.d)},mul:function(t,n){return m(t,n),f(this.s*r.s*this.n*r.n,this.d*r.d)},div:function(t,n){return m(t,n),f(this.s*r.s*this.n*r.d,this.d*r.n)},clone:function(){return f(this.s*this.n,this.d)},mod:function(t,n){if(isNaN(this.n)||isNaN(this.d))return new h(NaN);if(t===void 0)return f(this.s*this.n%this.d,1);if(m(t,n),r.n===0&&this.d===0)throw h.DivisionByZero;return f(this.s*(r.d*this.n)%(r.n*this.d),r.d*this.d)},gcd:function(t,n){return m(t,n),f(l(r.n,this.n)*l(r.d,this.d),r.d*this.d)},lcm:function(t,n){return m(t,n),r.n===0&&this.n===0?f(0,1):f(r.n*this.n,l(r.n,this.n)*l(r.d,this.d))},ceil:function(t){return t=Math.pow(10,t||0),isNaN(this.n)||isNaN(this.d)?new h(NaN):f(Math.ceil(t*this.s*this.n/this.d),t)},floor:function(t){return t=Math.pow(10,t||0),isNaN(this.n)||isNaN(this.d)?new h(NaN):f(Math.floor(t*this.s*this.n/this.d),t)},round:function(t){return t=Math.pow(10,t||0),isNaN(this.n)||isNaN(this.d)?new h(NaN):f(Math.round(t*this.s*this.n/this.d),t)},inverse:function(){return f(this.s*this.d,this.n)},pow:function(t,n){if(m(t,n),r.d===1)return r.s<0?f(Math.pow(this.s*this.d,r.n),Math.pow(this.n,r.n)):f(Math.pow(this.s*this.n,r.n),Math.pow(this.d,r.n));if(this.s<0)return null;var e=g(this.n),i=g(this.d),a=1,v=1;for(var u in e)if(u!=="1"){if(u==="0"){a=0;break}if(e[u]*=r.n,e[u]%r.d===0)e[u]/=r.d;else return null;a*=Math.pow(u,e[u])}for(var u in i)if(u!=="1"){if(i[u]*=r.n,i[u]%r.d===0)i[u]/=r.d;else return null;v*=Math.pow(u,i[u])}return r.s<0?f(v,a):f(a,v)},equals:function(t,n){return m(t,n),this.s*this.n*r.d===r.s*r.n*this.d},compare:function(t,n){m(t,n);var e=this.s*this.n*r.d-r.s*r.n*this.d;return(0<e)-(e<0)},simplify:function(t){if(isNaN(this.n)||isNaN(this.d))return this;t=t||.001;for(var n=this.abs(),e=n.toContinued(),i=1;i<e.length;i++){for(var a=f(e[i-1],1),v=i-2;v>=0;v--)a=a.inverse().add(e[v]);if(a.sub(n).abs().valueOf()<t)return a.mul(this.s)}return this},divisible:function(t,n){return m(t,n),!(!(r.n*this.d)||this.n*r.d%(r.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(t){var n,e="",i=this.n,a=this.d;return this.s<0&&(e+="-"),a===1?e+=i:(t&&(n=Math.floor(i/a))>0&&(e+=n,e+=" ",i%=a),e+=i,e+="/",e+=a),e},toLatex:function(t){var n,e="",i=this.n,a=this.d;return this.s<0&&(e+="-"),a===1?e+=i:(t&&(n=Math.floor(i/a))>0&&(e+=n,i%=a),e+="\\frac{",e+=i,e+="}{",e+=a,e+="}"),e},toContinued:function(){var t,n=this.n,e=this.d,i=[];if(isNaN(n)||isNaN(e))return i;do i.push(Math.floor(n/e)),t=n%e,n=e,e=t;while(n!==1);return i},toString:function(t){var n=this.n,e=this.d;if(isNaN(n)||isNaN(e))return"NaN";t=t||15;var i=D(n,e),a=M(n,e,i),v=this.s<0?"-":"";if(v+=n/e|0,n%=e,n*=10,n&&(v+="."),i){for(var u=a;u--;)v+=n/e|0,n%=e,n*=10;v+="(";for(var u=i;u--;)v+=n/e|0,n%=e,n*=10;v+=")"}else for(var u=t;n&&u--;)v+=n/e|0,n%=e,n*=10;return v}},Object.defineProperty(h,"__esModule",{value:!0}),h.default=h,h.Fraction=h,E.exports=h})()})(H);var tt=H.exports;const V=Y(tt),nt={class:"flex flex-col fullscreen-container rounded-3xl",id:"screen"},et={class:"py-8 select-none",version:"1.1",baseProfile:"full",viewBox:"-10 -5 120 35",xmlns:"http://www.w3.org/2000/svg","font-family":"Commissioner, sans-serif","font-size":"3px","text-anchor":"middle","dominant-baseline":"middle","stroke-linecap":"round",fill:"white",style:{"touch-action":"none"}},rt={id:"ruler","stroke-width":"0.2",stroke:"currentColor"},it=d("line",{y1:"30",y2:"30",x2:"100"},null,-1),ot=d("line",{y1:"0",y2:"30"},null,-1),st=d("line",{x1:"100",x2:"100",y1:"0",y2:"30"},null,-1),at=["x1","x2"],ft={id:"freqs",stroke:"none",fill:"currentColor"},dt={id:"left","text-anchor":"end"},ht=["x"],ut=["x"],ct={id:"right","text-anchor":"start"},lt=["x"],vt=["x"],xt={class:"cursor-pointer",id:"ratio","font-size":"4px",fill:"currentColor"},_t=["x"],mt=["x"],wt=["stroke"],Nt=d("circle",{r:"1"},null,-1),gt=d("circle",{cx:"100",r:"1"},null,-1),pt={x:"50","font-weight":"bold"},yt={class:"cursor-pointer",id:"divided",transform:"translate(0,15)","font-weight":"bold"},qt=["stroke","x2"],Mt=["x"],Ft=["stroke","x1"],bt=["x"],Ct=["cx"],kt=d("circle",{r:"1"},null,-1),Pt=d("circle",{r:"1",cx:"100"},null,-1),Dt={class:"flex flex-wrap justify-center m-4"},Bt=["onClick"],$t={__name:"monochord",setup(E){const p=I({ratio:Z(.8,.05,.95),fraction:w(()=>new V(1-p.ratio).simplify(.001).toFraction(!0)),invFraction:w(()=>new V(p.ratio).simplify(.001).toFraction(!0))}),x=I({freq:Z(220,50,2e3),pitch:w(()=>z(x.freq).toFixed()),note:w(()=>C(x.freq).toNote()),cents:w(()=>D(C(x.note).toFrequency(),x.freq))}),_=I({freq:w(()=>x.freq/(1-p.ratio)),pitch:w(()=>(z(_.freq)+120)%12),note:w(()=>C(_.freq).toNote()),cents:w(()=>D(C(_.note).toFrequency(),_.freq))}),r=I({freq:w(()=>x.freq/p.ratio),pitch:w(()=>(z(r.freq)+120)%12),note:w(()=>C(r.freq).toNote()),cents:w(()=>D(C(r.note).toFrequency(),r.freq))}),y={"1/2":1/2,"2/3":2/3,"3/4":3/4,"3/5":3/5,"4/5":4/5,"5/6":5/6,"4/7":4/7,"5/7":5/7,"6/7":6/7,"5/8":5/8,"7/8":7/8,"5/9":5/9,"7/9":7/9,"8/9":8/9,"9/10":9/10,"10/11":10/11,"11/12":11/12,"8/15":8/15,"15/16":15/16,"32/45":32/45},f=J(w(()=>p.ratio),{duration:200,transition:R.easeOutCubic}),{once:g}=X();function m(M){x.freq+=M.delta[0]/4}function O(M){p.ratio-=M.delta[0]/1200}function D(M,l){return-(1200/Math.log10(2))*Math.log10(M/l)%1200}return(M,l)=>{const h=G("drag");return k(),P("div",nt,[(k(),P("svg",et,[d("g",rt,[it,ot,st,d("line",{x1:100*(1-c(f)),x2:100*(1-c(f)),y1:"0",y2:"30"},null,8,at),d("g",ft,[d("g",dt,[d("text",{x:100*(1-c(f))-2,y:"28"},N(_.freq.toFixed(1))+" Hz",9,ht),d("text",{x:100*(1-c(f))-2,y:"24"},N(_.note)+" ("+N(_.cents.toFixed())+" cents) ",9,ut)]),d("g",ct,[d("text",{x:100*(1-c(f))+2,y:"28"},N(r.freq.toFixed(1))+" Hz",9,lt),d("text",{x:100*(1-c(f))+2,y:"24"},N(r.note)+" ("+N(r.cents.toFixed())+" cents) ",9,vt)])]),d("g",xt,[d("g",{onMousedown:l[0]||(l[0]=t=>{c(g)(x.freq),c(g)(_.freq)})},[d("text",{x:100*(1-c(f))-2,y:"8","text-anchor":"end"},N(p.fraction),9,_t)],32),d("g",{onMousedown:l[1]||(l[1]=t=>{c(g)(x.freq),c(g)(r.freq)})},[d("text",{x:100*(1-c(f))+2,y:"8","text-anchor":"start"},N(p.invFraction),9,mt)],32)])]),A((k(),P("g",{class:"cursor-pointer",id:"fundamental",onMouseover:l[2]||(l[2]=t=>c(g)(x.freq)),onMousedown:l[3]||(l[3]=t=>c(g)(x.freq))},[d("line",{x2:"100","stroke-width":"4",stroke:c(L)(x.freq)},null,8,wt),Nt,gt,d("text",pt,N(x.note)+" "+N(x.freq.toFixed())+" Hz ("+N(x.cents.toFixed())+" cents)",1)],32)),[[h,m]]),A((k(),P("g",yt,[d("g",{id:"part1",onMouseover:l[4]||(l[4]=t=>c(g)(_.freq)),onMousedown:l[5]||(l[5]=t=>c(g)(_.freq))},[d("line",{stroke:c(L)(_.freq),"stroke-width":"4",x2:100*(1-c(f))},null,8,qt),d("text",{y:"0.3",x:100*(1-c(f))/2},N(_.note),9,Mt)],32),d("g",{id:"part2",onMouseover:l[6]||(l[6]=t=>c(g)(r.freq)),onMousedown:l[7]||(l[7]=t=>c(g)(r.freq))},[d("line",{stroke:c(L)(r.freq),"stroke-width":"4",x1:100*(1-c(f)),x2:"100"},null,8,Ft),d("text",{y:"0.3",x:100-100*c(f)/2},N(r.note),9,bt),d("circle",{cx:100*(1-c(f)),r:"1"},null,8,Ct)],32),kt,Pt])),[[h,O]])])),d("div",Dt,[(k(),P(K,null,Q(y,(t,n)=>d("button",{class:"p-2 border-1 shadow m-2",key:n,onClick:e=>p.ratio=t},N(n),9,Bt)),64))])])}}},It=d("p",null,"Drag the divider to explore the string divisions of a monochord, just like Pythagoras did.",-1),Qt=JSON.parse('{"title":"Monochord","description":"Virtual string for frequency and length ratio explorations","frontmatter":{"title":"Monochord","description":"Virtual string for frequency and length ratio explorations","date":"2021-09-12T00:00:00.000Z","cover":"monochord.png"},"headers":[],"relativePath":"practice/sound/monochord/index.md","filePath":"practice/sound/monochord/index.md"}'),Et={name:"practice/sound/monochord/index.md"},Ut=Object.assign(Et,{setup(E){return(p,x)=>{const _=U("client-only");return k(),P("div",null,[T(_,null,{default:W(()=>[T($t)]),_:1}),It])}}});export{Qt as __pageData,Ut as default};
