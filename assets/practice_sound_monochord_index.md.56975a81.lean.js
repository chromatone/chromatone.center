import{i as j,r as w,j as X,v as P,b as k,F as d,N as l,X as N,Z as T,a as J,H as R,T as H,O as Y,M as G}from"./chunks/framework.7e747cd7.js";import{f as B,b as E}from"./chunks/calculations.3384a913.js";import{m as K,T as Q}from"./chunks/index.c0ca431c.js";import{u as U}from"./chunks/synth.220fb0dd.js";import{F as C}from"./chunks/index.83aed4fc.js";import{g as W}from"./chunks/commonjsHelpers.de833af9.js";import{u as S}from"./chunks/index.0b97d2b2.js";import"./chunks/midi.290fabf9.js";import"./chunks/index.b30cd6d2.js";import"./chunks/audio.170dbcbf.js";import"./chunks/Scale.7b617051.js";import"./chunks/Subtract.f0fef764.js";import"./chunks/PingPongDelay.38a34857.js";import"./chunks/AutoPanner.94a306f8.js";import"./chunks/MonoSynth.4cac63d2.js";import"./chunks/Filter.2b531c53.js";var V={exports:{}};/**
 * @license Fraction.js v4.2.0 05/03/2022
 * https://www.xarg.org/2014/03/rational-numbers-in-javascript/
 *
 * Copyright (c) 2021, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/(function(I,y){(function(x){var _=2e3,e={s:1,n:0,d:1};function p(t,n){if(isNaN(t=parseInt(t,10)))throw h.InvalidParameter;return t*n}function f(t,n){if(n===0)throw h.DivisionByZero;var r=Object.create(h.prototype);r.s=t<0?-1:1,t=t<0?-t:t;var i=c(t,n);return r.n=t/i,r.d=n/i,r}function g(t){for(var n={},r=t,i=2,a=4;a<=r;){for(;r%i===0;)r/=i,n[i]=(n[i]||0)+1;a+=1+2*i++}return r!==t?r>1&&(n[r]=(n[r]||0)+1):n[t]=(n[t]||0)+1,n}var m=function(t,n){var r=0,i=1,a=1,v=0,u=0,L=0,$=1,F=1,o=0,s=1,b=1,q=1,O=1e7,z;if(t!=null)if(n!==void 0){if(r=t,i=n,a=r*i,r%1!==0||i%1!==0)throw h.NonIntegerParameter}else switch(typeof t){case"object":{if("d"in t&&"n"in t)r=t.n,i=t.d,"s"in t&&(r*=t.s);else if(0 in t)r=t[0],1 in t&&(i=t[1]);else throw h.InvalidParameter;a=r*i;break}case"number":{if(t<0&&(a=t,t=-t),t%1===0)r=t;else if(t>0){for(t>=1&&(F=Math.pow(10,Math.floor(1+Math.log(t)/Math.LN10)),t/=F);s<=O&&q<=O;)if(z=(o+b)/(s+q),t===z){s+q<=O?(r=o+b,i=s+q):q>s?(r=b,i=q):(r=o,i=s);break}else t>z?(o+=b,s+=q):(b+=o,q+=s),s>O?(r=b,i=q):(r=o,i=s);r*=F}else(isNaN(t)||isNaN(n))&&(i=r=NaN);break}case"string":{if(s=t.match(/\d+|./g),s===null)throw h.InvalidParameter;if(s[o]==="-"?(a=-1,o++):s[o]==="+"&&o++,s.length===o+1?u=p(s[o++],a):s[o+1]==="."||s[o]==="."?(s[o]!=="."&&(v=p(s[o++],a)),o++,(o+1===s.length||s[o+1]==="("&&s[o+3]===")"||s[o+1]==="'"&&s[o+3]==="'")&&(u=p(s[o],a),$=Math.pow(10,s[o].length),o++),(s[o]==="("&&s[o+2]===")"||s[o]==="'"&&s[o+2]==="'")&&(L=p(s[o+1],a),F=Math.pow(10,s[o+1].length)-1,o+=3)):s[o+1]==="/"||s[o+1]===":"?(u=p(s[o],a),$=p(s[o+2],1),o+=3):s[o+3]==="/"&&s[o+1]===" "&&(v=p(s[o],a),u=p(s[o+2],a),$=p(s[o+4],1),o+=5),s.length<=o){i=$*F,a=r=L+i*v+F*u;break}}default:throw h.InvalidParameter}if(i===0)throw h.DivisionByZero;e.s=a<0?-1:1,e.n=Math.abs(r),e.d=Math.abs(i)};function Z(t,n,r){for(var i=1;n>0;t=t*t%r,n>>=1)n&1&&(i=i*t%r);return i}function D(t,n){for(;n%2===0;n/=2);for(;n%5===0;n/=5);if(n===1)return 0;for(var r=10%n,i=1;r!==1;i++)if(r=r*10%n,i>_)return 0;return i}function M(t,n,r){for(var i=1,a=Z(10,r,n),v=0;v<300;v++){if(i===a)return v;i=i*10%n,a=a*10%n}return 0}function c(t,n){if(!t)return n;if(!n)return t;for(;;){if(t%=n,!t)return n;if(n%=t,!n)return t}}function h(t,n){if(m(t,n),this instanceof h)t=c(e.d,e.n),this.s=e.s,this.n=e.n/t,this.d=e.d/t;else return f(e.s*e.n,e.d)}h.DivisionByZero=new Error("Division by Zero"),h.InvalidParameter=new Error("Invalid argument"),h.NonIntegerParameter=new Error("Parameters must be integer"),h.prototype={s:1,n:0,d:1,abs:function(){return f(this.n,this.d)},neg:function(){return f(-this.s*this.n,this.d)},add:function(t,n){return m(t,n),f(this.s*this.n*e.d+e.s*this.d*e.n,this.d*e.d)},sub:function(t,n){return m(t,n),f(this.s*this.n*e.d-e.s*this.d*e.n,this.d*e.d)},mul:function(t,n){return m(t,n),f(this.s*e.s*this.n*e.n,this.d*e.d)},div:function(t,n){return m(t,n),f(this.s*e.s*this.n*e.d,this.d*e.n)},clone:function(){return f(this.s*this.n,this.d)},mod:function(t,n){if(isNaN(this.n)||isNaN(this.d))return new h(NaN);if(t===void 0)return f(this.s*this.n%this.d,1);if(m(t,n),e.n===0&&this.d===0)throw h.DivisionByZero;return f(this.s*(e.d*this.n)%(e.n*this.d),e.d*this.d)},gcd:function(t,n){return m(t,n),f(c(e.n,this.n)*c(e.d,this.d),e.d*this.d)},lcm:function(t,n){return m(t,n),e.n===0&&this.n===0?f(0,1):f(e.n*this.n,c(e.n,this.n)*c(e.d,this.d))},ceil:function(t){return t=Math.pow(10,t||0),isNaN(this.n)||isNaN(this.d)?new h(NaN):f(Math.ceil(t*this.s*this.n/this.d),t)},floor:function(t){return t=Math.pow(10,t||0),isNaN(this.n)||isNaN(this.d)?new h(NaN):f(Math.floor(t*this.s*this.n/this.d),t)},round:function(t){return t=Math.pow(10,t||0),isNaN(this.n)||isNaN(this.d)?new h(NaN):f(Math.round(t*this.s*this.n/this.d),t)},inverse:function(){return f(this.s*this.d,this.n)},pow:function(t,n){if(m(t,n),e.d===1)return e.s<0?f(Math.pow(this.s*this.d,e.n),Math.pow(this.n,e.n)):f(Math.pow(this.s*this.n,e.n),Math.pow(this.d,e.n));if(this.s<0)return null;var r=g(this.n),i=g(this.d),a=1,v=1;for(var u in r)if(u!=="1"){if(u==="0"){a=0;break}if(r[u]*=e.n,r[u]%e.d===0)r[u]/=e.d;else return null;a*=Math.pow(u,r[u])}for(var u in i)if(u!=="1"){if(i[u]*=e.n,i[u]%e.d===0)i[u]/=e.d;else return null;v*=Math.pow(u,i[u])}return e.s<0?f(v,a):f(a,v)},equals:function(t,n){return m(t,n),this.s*this.n*e.d===e.s*e.n*this.d},compare:function(t,n){m(t,n);var r=this.s*this.n*e.d-e.s*e.n*this.d;return(0<r)-(r<0)},simplify:function(t){if(isNaN(this.n)||isNaN(this.d))return this;t=t||.001;for(var n=this.abs(),r=n.toContinued(),i=1;i<r.length;i++){for(var a=f(r[i-1],1),v=i-2;v>=0;v--)a=a.inverse().add(r[v]);if(a.sub(n).abs().valueOf()<t)return a.mul(this.s)}return this},divisible:function(t,n){return m(t,n),!(!(e.n*this.d)||this.n*e.d%(e.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(t){var n,r="",i=this.n,a=this.d;return this.s<0&&(r+="-"),a===1?r+=i:(t&&(n=Math.floor(i/a))>0&&(r+=n,r+=" ",i%=a),r+=i,r+="/",r+=a),r},toLatex:function(t){var n,r="",i=this.n,a=this.d;return this.s<0&&(r+="-"),a===1?r+=i:(t&&(n=Math.floor(i/a))>0&&(r+=n,i%=a),r+="\\frac{",r+=i,r+="}{",r+=a,r+="}"),r},toContinued:function(){var t,n=this.n,r=this.d,i=[];if(isNaN(n)||isNaN(r))return i;do i.push(Math.floor(n/r)),t=n%r,n=r,r=t;while(n!==1);return i},toString:function(t){var n=this.n,r=this.d;if(isNaN(n)||isNaN(r))return"NaN";t=t||15;var i=D(n,r),a=M(n,r,i),v=this.s<0?"-":"";if(v+=n/r|0,n%=r,n*=10,n&&(v+="."),i){for(var u=a;u--;)v+=n/r|0,n%=r,n*=10;v+="(";for(var u=i;u--;)v+=n/r|0,n%=r,n*=10;v+=")"}else for(var u=t;n&&u--;)v+=n/r|0,n%=r,n*=10;return v}},Object.defineProperty(h,"__esModule",{value:!0}),h.default=h,h.Fraction=h,I.exports=h})()})(V);var tt=V.exports;const A=W(tt),nt={class:"flex flex-col fullscreen-container rounded-3xl",id:"screen"},rt={class:"py-8 select-none",version:"1.1",baseProfile:"full",viewBox:"-10 -5 120 35",xmlns:"http://www.w3.org/2000/svg","font-family":"Commissioner, sans-serif","font-size":"3px","text-anchor":"middle","dominant-baseline":"middle","stroke-linecap":"round",fill:"white",style:{"touch-action":"none"}},et={id:"ruler","stroke-width":"0.2",stroke:"currentColor"},it=d("line",{y1:"30",y2:"30",x2:"100"},null,-1),ot=d("line",{y1:"0",y2:"30"},null,-1),st=d("line",{x1:"100",x2:"100",y1:"0",y2:"30"},null,-1),at=["x1","x2"],ft={id:"freqs",stroke:"none",fill:"currentColor"},dt={id:"left","text-anchor":"end"},ht=["x"],ut=["x"],lt={id:"right","text-anchor":"start"},ct=["x"],vt=["x"],xt={class:"cursor-pointer",id:"ratio","font-size":"4px",fill:"currentColor"},_t=["x"],mt=["x"],wt=["stroke"],Nt=d("circle",{r:"1"},null,-1),gt=d("circle",{cx:"100",r:"1"},null,-1),yt={x:"50","font-weight":"bold"},pt={class:"cursor-pointer",id:"divided",transform:"translate(0,15)","font-weight":"bold"},qt=["stroke","x2"],Mt=["x"],Ft=["stroke","x1"],bt=["x"],Ct=["cx"],Pt=d("circle",{r:"1"},null,-1),kt=d("circle",{r:"1",cx:"100"},null,-1),Dt={class:"flex flex-wrap justify-center m-4"},$t=["onClick"],Ot={__name:"monochord",setup(I){const y=j({ratio:S(.8,.05,.95),fraction:w(()=>new A(1-y.ratio).simplify(.001).toFraction(!0)),invFraction:w(()=>new A(y.ratio).simplify(.001).toFraction(!0))}),x=j({freq:S(220,50,2e3),pitch:w(()=>B(x.freq).toFixed()),note:w(()=>C(x.freq).toNote()),cents:w(()=>D(C(x.note).toFrequency(),x.freq))}),_=j({freq:w(()=>x.freq/(1-y.ratio)),pitch:w(()=>(B(_.freq)+120)%12),note:w(()=>C(_.freq).toNote()),cents:w(()=>D(C(_.note).toFrequency(),_.freq))}),e=j({freq:w(()=>x.freq/y.ratio),pitch:w(()=>(B(e.freq)+120)%12),note:w(()=>C(e.freq).toNote()),cents:w(()=>D(C(e.note).toFrequency(),e.freq))}),p={"1/2":1/2,"2/3":2/3,"3/4":3/4,"3/5":3/5,"4/5":4/5,"5/6":5/6,"4/7":4/7,"5/7":5/7,"6/7":6/7,"5/8":5/8,"7/8":7/8,"5/9":5/9,"7/9":7/9,"8/9":8/9,"9/10":9/10,"10/11":10/11,"11/12":11/12,"8/15":8/15,"15/16":15/16,"32/45":32/45},f=K(w(()=>y.ratio),{duration:200,transition:Q.easeOutCubic}),{once:g}=U();function m(M){x.freq+=M.delta[0]/4}function Z(M){y.ratio-=M.delta[0]/1200}function D(M,c){return-(1200/Math.log10(2))*Math.log10(M/c)%1200}return(M,c)=>{const h=X("drag");return P(),k("div",nt,[(P(),k("svg",rt,[d("g",et,[it,ot,st,d("line",{x1:100*(1-l(f)),x2:100*(1-l(f)),y1:"0",y2:"30"},null,8,at),d("g",ft,[d("g",dt,[d("text",{x:100*(1-l(f))-2,y:"28"},N(_.freq.toFixed(1))+" Hz",9,ht),d("text",{x:100*(1-l(f))-2,y:"24"},N(_.note)+" ("+N(_.cents.toFixed())+" cents) ",9,ut)]),d("g",lt,[d("text",{x:100*(1-l(f))+2,y:"28"},N(e.freq.toFixed(1))+" Hz",9,ct),d("text",{x:100*(1-l(f))+2,y:"24"},N(e.note)+" ("+N(e.cents.toFixed())+" cents) ",9,vt)])]),d("g",xt,[d("g",{onMousedown:c[0]||(c[0]=t=>{l(g)(x.freq),l(g)(_.freq)})},[d("text",{x:100*(1-l(f))-2,y:"8","text-anchor":"end"},N(y.fraction),9,_t)],32),d("g",{onMousedown:c[1]||(c[1]=t=>{l(g)(x.freq),l(g)(e.freq)})},[d("text",{x:100*(1-l(f))+2,y:"8","text-anchor":"start"},N(y.invFraction),9,mt)],32)])]),T((P(),k("g",{class:"cursor-pointer",id:"fundamental",onMouseover:c[2]||(c[2]=t=>l(g)(x.freq)),onMousedown:c[3]||(c[3]=t=>l(g)(x.freq))},[d("line",{x2:"100","stroke-width":"4",stroke:l(E)(x.freq)},null,8,wt),Nt,gt,d("text",yt,N(x.note)+" "+N(x.freq.toFixed())+" Hz ("+N(x.cents.toFixed())+" cents)",1)],32)),[[h,m]]),T((P(),k("g",pt,[d("g",{id:"part1",onMouseover:c[4]||(c[4]=t=>l(g)(_.freq)),onMousedown:c[5]||(c[5]=t=>l(g)(_.freq))},[d("line",{stroke:l(E)(_.freq),"stroke-width":"4",x2:100*(1-l(f))},null,8,qt),d("text",{y:"0.3",x:100*(1-l(f))/2},N(_.note),9,Mt)],32),d("g",{id:"part2",onMouseover:c[6]||(c[6]=t=>l(g)(e.freq)),onMousedown:c[7]||(c[7]=t=>l(g)(e.freq))},[d("line",{stroke:l(E)(e.freq),"stroke-width":"4",x1:100*(1-l(f)),x2:"100"},null,8,Ft),d("text",{y:"0.3",x:100-100*l(f)/2},N(e.note),9,bt),d("circle",{cx:100*(1-l(f)),r:"1"},null,8,Ct)],32),Pt,kt])),[[h,Z]])])),d("div",Dt,[(P(),k(J,null,R(p,(t,n)=>d("button",{class:"p-2 border-1 shadow m-2",key:n,onClick:r=>y.ratio=t},N(n),9,$t)),64))])])}}},jt=d("p",null,"Drag the divider to explore the string divisions of a monochord, just like Pythagoras did.",-1),Qt=JSON.parse('{"title":"Monochord","description":"Virtual string for frequency and length ratio explorations","frontmatter":{"title":"Monochord","description":"Virtual string for frequency and length ratio explorations","date":"2021-09-12T00:00:00.000Z","cover":"monochord.png"},"headers":[],"relativePath":"practice/sound/monochord/index.md","filePath":"practice/sound/monochord/index.md"}'),It={name:"practice/sound/monochord/index.md"},Ut=Object.assign(It,{setup(I){return(y,x)=>{const _=G("client-only");return P(),k("div",null,[H(_,null,{default:Y(()=>[H(Ot)]),_:1}),jt])}}});export{Qt as __pageData,Ut as default};
