import{b as I,f as V}from"./chunks/calculations.65ee336d.js";import{E as O,j as w,ab as U,ad as X,q as Y,o as P,c as $,a as d,u,t as N,v as T,F as K,r as Q,G as W,d as Z,B as tt}from"./chunks/framework.f75e5dc4.js";import{u as nt}from"./chunks/synth.ffb45e01.js";import{F as D}from"./chunks/index.cccf7ef0.js";import{g as et}from"./chunks/commonjsHelpers.de833af9.js";import{u as G}from"./chunks/index.de966dde.js";import"./chunks/midi.ee496394.js";import"./chunks/index.140cffd8.js";import"./chunks/audio.2835df43.js";import"./chunks/Scale.f9a07a23.js";import"./chunks/Subtract.e7604129.js";import"./chunks/PingPongDelay.0ce05937.js";import"./chunks/AutoPanner.5498cf00.js";import"./chunks/MonoSynth.3cdcc469.js";import"./chunks/Filter.e19ab36f.js";var R={exports:{}};/**
 * @license Fraction.js v4.2.1 20/08/2023
 * https://www.xarg.org/2014/03/rational-numbers-in-javascript/
 *
 * Copyright (c) 2023, Robert Eisele (robert@raw.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/(function(z,y){(function(v){var x=2e3,r={s:1,n:0,d:1};function q(t,n){if(isNaN(t=parseInt(t,10)))throw b();return t*n}function f(t,n){if(n===0)throw p();var e=Object.create(_.prototype);e.s=t<0?-1:1,t=t<0?-t:t;var i=c(t,n);return e.n=t/i,e.d=n/i,e}function g(t){for(var n={},e=t,i=2,a=4;a<=e;){for(;e%i===0;)e/=i,n[i]=(n[i]||0)+1;a+=1+2*i++}return e!==t?e>1&&(n[e]=(n[e]||0)+1):n[t]=(n[t]||0)+1,n}var m=function(t,n){var e=0,i=1,a=1,l=0,h=0,H=0,j=1,C=1,o=0,s=1,k=1,M=1,B=1e7,S;if(t!=null)if(n!==void 0){if(e=t,i=n,a=e*i,e%1!==0||i%1!==0)throw A()}else switch(typeof t){case"object":{if("d"in t&&"n"in t)e=t.n,i=t.d,"s"in t&&(e*=t.s);else if(0 in t)e=t[0],1 in t&&(i=t[1]);else throw b();a=e*i;break}case"number":{if(t<0&&(a=t,t=-t),t%1===0)e=t;else if(t>0){for(t>=1&&(C=Math.pow(10,Math.floor(1+Math.log(t)/Math.LN10)),t/=C);s<=B&&M<=B;)if(S=(o+k)/(s+M),t===S){s+M<=B?(e=o+k,i=s+M):M>s?(e=k,i=M):(e=o,i=s);break}else t>S?(o+=k,s+=M):(k+=o,M+=s),s>B?(e=k,i=M):(e=o,i=s);e*=C}else(isNaN(t)||isNaN(n))&&(i=e=NaN);break}case"string":{if(s=t.match(/\d+|./g),s===null)throw b();if(s[o]==="-"?(a=-1,o++):s[o]==="+"&&o++,s.length===o+1?h=q(s[o++],a):s[o+1]==="."||s[o]==="."?(s[o]!=="."&&(l=q(s[o++],a)),o++,(o+1===s.length||s[o+1]==="("&&s[o+3]===")"||s[o+1]==="'"&&s[o+3]==="'")&&(h=q(s[o],a),j=Math.pow(10,s[o].length),o++),(s[o]==="("&&s[o+2]===")"||s[o]==="'"&&s[o+2]==="'")&&(H=q(s[o+1],a),C=Math.pow(10,s[o+1].length)-1,o+=3)):s[o+1]==="/"||s[o+1]===":"?(h=q(s[o],a),j=q(s[o+2],1),o+=3):s[o+3]==="/"&&s[o+1]===" "&&(l=q(s[o],a),h=q(s[o+2],a),j=q(s[o+4],1),o+=5),s.length<=o){i=j*C,a=e=H+i*l+C*h;break}}default:throw b()}if(i===0)throw p();r.s=a<0?-1:1,r.n=Math.abs(e),r.d=Math.abs(i)};function L(t,n,e){for(var i=1;n>0;t=t*t%e,n>>=1)n&1&&(i=i*t%e);return i}function E(t,n){for(;n%2===0;n/=2);for(;n%5===0;n/=5);if(n===1)return 0;for(var e=10%n,i=1;e!==1;i++)if(e=e*10%n,i>x)return 0;return i}function F(t,n,e){for(var i=1,a=L(10,e,n),l=0;l<300;l++){if(i===a)return l;i=i*10%n,a=a*10%n}return 0}function c(t,n){if(!t)return n;if(!n)return t;for(;;){if(t%=n,!t)return n;if(n%=t,!n)return t}}function _(t,n){if(m(t,n),this instanceof _)t=c(r.d,r.n),this.s=r.s,this.n=r.n/t,this.d=r.d/t;else return f(r.s*r.n,r.d)}var p=function(){return new Error("Division by Zero")},b=function(){return new Error("Invalid argument")},A=function(){return new Error("Parameters must be integer")};_.prototype={s:1,n:0,d:1,abs:function(){return f(this.n,this.d)},neg:function(){return f(-this.s*this.n,this.d)},add:function(t,n){return m(t,n),f(this.s*this.n*r.d+r.s*this.d*r.n,this.d*r.d)},sub:function(t,n){return m(t,n),f(this.s*this.n*r.d-r.s*this.d*r.n,this.d*r.d)},mul:function(t,n){return m(t,n),f(this.s*r.s*this.n*r.n,this.d*r.d)},div:function(t,n){return m(t,n),f(this.s*r.s*this.n*r.d,this.d*r.n)},clone:function(){return f(this.s*this.n,this.d)},mod:function(t,n){if(isNaN(this.n)||isNaN(this.d))return new _(NaN);if(t===void 0)return f(this.s*this.n%this.d,1);if(m(t,n),r.n===0&&this.d===0)throw p();return f(this.s*(r.d*this.n)%(r.n*this.d),r.d*this.d)},gcd:function(t,n){return m(t,n),f(c(r.n,this.n)*c(r.d,this.d),r.d*this.d)},lcm:function(t,n){return m(t,n),r.n===0&&this.n===0?f(0,1):f(r.n*this.n,c(r.n,this.n)*c(r.d,this.d))},ceil:function(t){return t=Math.pow(10,t||0),isNaN(this.n)||isNaN(this.d)?new _(NaN):f(Math.ceil(t*this.s*this.n/this.d),t)},floor:function(t){return t=Math.pow(10,t||0),isNaN(this.n)||isNaN(this.d)?new _(NaN):f(Math.floor(t*this.s*this.n/this.d),t)},round:function(t){return t=Math.pow(10,t||0),isNaN(this.n)||isNaN(this.d)?new _(NaN):f(Math.round(t*this.s*this.n/this.d),t)},inverse:function(){return f(this.s*this.d,this.n)},pow:function(t,n){if(m(t,n),r.d===1)return r.s<0?f(Math.pow(this.s*this.d,r.n),Math.pow(this.n,r.n)):f(Math.pow(this.s*this.n,r.n),Math.pow(this.d,r.n));if(this.s<0)return null;var e=g(this.n),i=g(this.d),a=1,l=1;for(var h in e)if(h!=="1"){if(h==="0"){a=0;break}if(e[h]*=r.n,e[h]%r.d===0)e[h]/=r.d;else return null;a*=Math.pow(h,e[h])}for(var h in i)if(h!=="1"){if(i[h]*=r.n,i[h]%r.d===0)i[h]/=r.d;else return null;l*=Math.pow(h,i[h])}return r.s<0?f(l,a):f(a,l)},equals:function(t,n){return m(t,n),this.s*this.n*r.d===r.s*r.n*this.d},compare:function(t,n){m(t,n);var e=this.s*this.n*r.d-r.s*r.n*this.d;return(0<e)-(e<0)},simplify:function(t){if(isNaN(this.n)||isNaN(this.d))return this;t=t||.001;for(var n=this.abs(),e=n.toContinued(),i=1;i<e.length;i++){for(var a=f(e[i-1],1),l=i-2;l>=0;l--)a=a.inverse().add(e[l]);if(Math.abs(a.sub(n).valueOf())<t)return a.mul(this.s)}return this},divisible:function(t,n){return m(t,n),!(!(r.n*this.d)||this.n*r.d%(r.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(t){var n,e="",i=this.n,a=this.d;return this.s<0&&(e+="-"),a===1?e+=i:(t&&(n=Math.floor(i/a))>0&&(e+=n,e+=" ",i%=a),e+=i,e+="/",e+=a),e},toLatex:function(t){var n,e="",i=this.n,a=this.d;return this.s<0&&(e+="-"),a===1?e+=i:(t&&(n=Math.floor(i/a))>0&&(e+=n,i%=a),e+="\\frac{",e+=i,e+="}{",e+=a,e+="}"),e},toContinued:function(){var t,n=this.n,e=this.d,i=[];if(isNaN(n)||isNaN(e))return i;do i.push(Math.floor(n/e)),t=n%e,n=e,e=t;while(n!==1);return i},toString:function(t){var n=this.n,e=this.d;if(isNaN(n)||isNaN(e))return"NaN";t=t||15;var i=E(n,e),a=F(n,e,i),l=this.s<0?"-":"";if(l+=n/e|0,n%=e,n*=10,n&&(l+="."),i){for(var h=a;h--;)l+=n/e|0,n%=e,n*=10;l+="(";for(var h=i;h--;)l+=n/e|0,n%=e,n*=10;l+=")"}else for(var h=t;n&&h--;)l+=n/e|0,n%=e,n*=10;return l}},Object.defineProperty(_,"__esModule",{value:!0}),_.default=_,_.Fraction=_,z.exports=_})()})(R);var rt=R.exports;const J=et(rt),it={class:"flex flex-col fullscreen-container rounded-3xl",id:"screen"},ot={class:"py-8 select-none",version:"1.1",baseProfile:"full",viewBox:"-10 -5 120 35",xmlns:"http://www.w3.org/2000/svg","font-family":"Commissioner, sans-serif","font-size":"3px","text-anchor":"middle","dominant-baseline":"middle","stroke-linecap":"round",fill:"white",style:{"touch-action":"none"}},st={id:"ruler","stroke-width":"0.2",stroke:"currentColor"},at=d("line",{y1:"30",y2:"30",x2:"100"},null,-1),ft=d("line",{y1:"0",y2:"30"},null,-1),dt=d("line",{x1:"100",x2:"100",y1:"0",y2:"30"},null,-1),ht=["x1","x2"],ut={id:"freqs",stroke:"none",fill:"currentColor"},ct={id:"left","text-anchor":"end"},lt=["x"],vt=["x"],xt={id:"right","text-anchor":"start"},_t=["x"],mt=["x"],wt={class:"cursor-pointer",id:"ratio","font-size":"4px",fill:"currentColor"},Nt=["x"],gt=["x"],pt=["stroke"],yt=d("circle",{r:"1"},null,-1),qt=d("circle",{cx:"100",r:"1"},null,-1),Mt={x:"50","font-weight":"bold"},Ft={class:"cursor-pointer",id:"divided",transform:"translate(0,15)","font-weight":"bold"},bt=["stroke","x2"],Ct=["x"],kt=["stroke","x1"],Dt=["x"],Pt=["cx"],$t=d("circle",{r:"1"},null,-1),Et=d("circle",{r:"1",cx:"100"},null,-1),jt={class:"flex flex-wrap justify-center m-4"},Bt=["onClick"],Ot={__name:"monochord",setup(z){const y=O({ratio:G(.8,.05,.95),fraction:w(()=>new J(1-y.ratio).simplify(.001).toFraction(!0)),invFraction:w(()=>new J(y.ratio).simplify(.001).toFraction(!0))}),v=O({freq:G(220,50,2e3),pitch:w(()=>I(v.freq).toFixed()),note:w(()=>D(v.freq).toNote()),cents:w(()=>E(D(v.note).toFrequency(),v.freq))}),x=O({freq:w(()=>v.freq/(1-y.ratio)),pitch:w(()=>(I(x.freq)+120)%12),note:w(()=>D(x.freq).toNote()),cents:w(()=>E(D(x.note).toFrequency(),x.freq))}),r=O({freq:w(()=>v.freq/y.ratio),pitch:w(()=>(I(r.freq)+120)%12),note:w(()=>D(r.freq).toNote()),cents:w(()=>E(D(r.note).toFrequency(),r.freq))}),q={"1/2":1/2,"2/3":2/3,"3/4":3/4,"3/5":3/5,"4/5":4/5,"5/6":5/6,"4/7":4/7,"5/7":5/7,"6/7":6/7,"5/8":5/8,"7/8":7/8,"5/9":5/9,"7/9":7/9,"8/9":8/9,"9/10":9/10,"10/11":10/11,"11/12":11/12,"8/15":8/15,"15/16":15/16,"32/45":32/45},f=U(w(()=>y.ratio),{duration:200,transition:X.easeOutCubic}),{once:g}=nt();function m(F){v.freq+=F.delta[0]/4}function L(F){y.ratio-=F.delta[0]/1200}function E(F,c){return-(1200/Math.log10(2))*Math.log10(F/c)%1200}return(F,c)=>{const _=Y("drag");return P(),$("div",it,[(P(),$("svg",ot,[d("g",st,[at,ft,dt,d("line",{x1:100*(1-u(f)),x2:100*(1-u(f)),y1:"0",y2:"30"},null,8,ht),d("g",ut,[d("g",ct,[d("text",{x:100*(1-u(f))-2,y:"28"},N(x.freq.toFixed(1))+" Hz",9,lt),d("text",{x:100*(1-u(f))-2,y:"24"},N(x.note)+" ("+N(x.cents.toFixed())+" cents) ",9,vt)]),d("g",xt,[d("text",{x:100*(1-u(f))+2,y:"28"},N(r.freq.toFixed(1))+" Hz",9,_t),d("text",{x:100*(1-u(f))+2,y:"24"},N(r.note)+" ("+N(r.cents.toFixed())+" cents) ",9,mt)])]),d("g",wt,[d("g",{onMousedown:c[0]||(c[0]=p=>{u(g)(v.freq),u(g)(x.freq)})},[d("text",{x:100*(1-u(f))-2,y:"8","text-anchor":"end"},N(y.fraction),9,Nt)],32),d("g",{onMousedown:c[1]||(c[1]=p=>{u(g)(v.freq),u(g)(r.freq)})},[d("text",{x:100*(1-u(f))+2,y:"8","text-anchor":"start"},N(y.invFraction),9,gt)],32)])]),T((P(),$("g",{class:"cursor-pointer",id:"fundamental",onMouseover:c[2]||(c[2]=p=>u(g)(v.freq)),onMousedown:c[3]||(c[3]=p=>u(g)(v.freq))},[d("line",{x2:"100","stroke-width":"4",stroke:u(V)(v.freq)},null,8,pt),yt,qt,d("text",Mt,N(v.note)+" "+N(v.freq.toFixed())+" Hz ("+N(v.cents.toFixed())+" cents)",1)],32)),[[_,m]]),T((P(),$("g",Ft,[d("g",{id:"part1",onMouseover:c[4]||(c[4]=p=>u(g)(x.freq)),onMousedown:c[5]||(c[5]=p=>u(g)(x.freq))},[d("line",{stroke:u(V)(x.freq),"stroke-width":"4",x2:100*(1-u(f))},null,8,bt),d("text",{y:"0.3",x:100*(1-u(f))/2},N(x.note),9,Ct)],32),d("g",{id:"part2",onMouseover:c[6]||(c[6]=p=>u(g)(r.freq)),onMousedown:c[7]||(c[7]=p=>u(g)(r.freq))},[d("line",{stroke:u(V)(r.freq),"stroke-width":"4",x1:100*(1-u(f)),x2:"100"},null,8,kt),d("text",{y:"0.3",x:100-100*u(f)/2},N(r.note),9,Dt),d("circle",{cx:100*(1-u(f)),r:"1"},null,8,Pt)],32),$t,Et])),[[_,L]])])),d("div",jt,[(P(),$(K,null,Q(q,(p,b)=>d("button",{class:"p-2 border-1 shadow m-2",key:b,onClick:A=>y.ratio=p},N(b),9,Bt)),64))])])}}},zt=d("p",null,"Drag the divider to explore the string divisions of a monochord, just like Pythagoras did.",-1),Wt=JSON.parse('{"title":"Monochord","description":"Virtual string for frequency and length ratio explorations","frontmatter":{"title":"Monochord","description":"Virtual string for frequency and length ratio explorations","date":"2021-09-12T00:00:00.000Z","cover":"monochord.png"},"headers":[],"relativePath":"practice/sound/monochord/index.md","filePath":"practice/sound/monochord/index.md","lastUpdated":1676883357000}'),Lt={name:"practice/sound/monochord/index.md"},tn=Object.assign(Lt,{setup(z){return(y,v)=>{const x=W("client-only");return P(),$("div",null,[Z(x,null,{default:tt(()=>[Z(Ot)]),_:1}),zt])}}});export{Wt as __pageData,tn as default};
