import{b as D,f as z}from"./chunks/calculations.uITx2GSi.js";import{k as $,j as _,P as j,Q as I,x as T,o as b,c as k,a as d,g as u,t as m,y as L,F as V,r as A,_ as H,m as Z,f as S,n as J}from"./chunks/framework.IUYQRuva.js";import{u as Q}from"./chunks/synth.CnmFLY9j.js";import{F}from"./chunks/index.RYxauP_R.js";import{u as E}from"./chunks/index.dCqutn0Q.js";import"./chunks/midi.I20eapAS.js";import"./chunks/commonjsHelpers.4gQjN7DL.js";import"./chunks/audio.IBSde9Yq.js";import"./chunks/Scale.nioafpJK.js";import"./chunks/Subtract.6yvEFIfU.js";import"./chunks/PingPongDelay.wNup7QRn.js";import"./chunks/AutoPanner.jtPgUiQR.js";import"./chunks/MonoSynth.pp_JS1sF.js";import"./chunks/Filter.CUstuK5R.js";/**
 * @license Fraction.js v4.3.7 31/08/2023
 * https://www.xarg.org/2014/03/rational-numbers-in-javascript/
 *
 * Copyright (c) 2023, Robert Eisele (robert@raw.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/var R=2e3,i={s:1,n:0,d:1};function g(t,n){if(isNaN(t=parseInt(t,10)))throw P();return t*n}function l(t,n){if(n===0)throw B();var e=Object.create(p.prototype);e.s=t<0?-1:1,t=t<0?-t:t;var r=C(t,n);return e.n=t/r,e.d=n/r,e}function O(t){for(var n={},e=t,r=2,o=4;o<=e;){for(;e%r===0;)e/=r,n[r]=(n[r]||0)+1;o+=1+2*r++}return e!==t?e>1&&(n[e]=(n[e]||0)+1):n[t]=(n[t]||0)+1,n}var w=function(t,n){var e=0,r=1,o=1,h=0,f=0,v=0,q=1,y=1,a=0,s=1,c=1,N=1,x=1e7,M;if(t!=null)if(n!==void 0){if(e=t,r=n,o=e*r,e%1!==0||r%1!==0)throw G()}else switch(typeof t){case"object":{if("d"in t&&"n"in t)e=t.n,r=t.d,"s"in t&&(e*=t.s);else if(0 in t)e=t[0],1 in t&&(r=t[1]);else throw P();o=e*r;break}case"number":{if(t<0&&(o=t,t=-t),t%1===0)e=t;else if(t>0){for(t>=1&&(y=Math.pow(10,Math.floor(1+Math.log(t)/Math.LN10)),t/=y);s<=x&&N<=x;)if(M=(a+c)/(s+N),t===M){s+N<=x?(e=a+c,r=s+N):N>s?(e=c,r=N):(e=a,r=s);break}else t>M?(a+=c,s+=N):(c+=a,N+=s),s>x?(e=c,r=N):(e=a,r=s);e*=y}else(isNaN(t)||isNaN(n))&&(r=e=NaN);break}case"string":{if(s=t.match(/\d+|./g),s===null)throw P();if(s[a]==="-"?(o=-1,a++):s[a]==="+"&&a++,s.length===a+1?f=g(s[a++],o):s[a+1]==="."||s[a]==="."?(s[a]!=="."&&(h=g(s[a++],o)),a++,(a+1===s.length||s[a+1]==="("&&s[a+3]===")"||s[a+1]==="'"&&s[a+3]==="'")&&(f=g(s[a],o),q=Math.pow(10,s[a].length),a++),(s[a]==="("&&s[a+2]===")"||s[a]==="'"&&s[a+2]==="'")&&(v=g(s[a+1],o),y=Math.pow(10,s[a+1].length)-1,a+=3)):s[a+1]==="/"||s[a+1]===":"?(f=g(s[a],o),q=g(s[a+2],1),a+=3):s[a+3]==="/"&&s[a+1]===" "&&(h=g(s[a],o),f=g(s[a+2],o),q=g(s[a+4],1),a+=5),s.length<=a){r=q*y,o=e=v+r*h+y*f;break}}default:throw P()}if(r===0)throw B();i.s=o<0?-1:1,i.n=Math.abs(e),i.d=Math.abs(r)};function U(t,n,e){for(var r=1;n>0;t=t*t%e,n>>=1)n&1&&(r=r*t%e);return r}function X(t,n){for(;n%2===0;n/=2);for(;n%5===0;n/=5);if(n===1)return 0;for(var e=10%n,r=1;e!==1;r++)if(e=e*10%n,r>R)return 0;return r}function Y(t,n,e){for(var r=1,o=U(10,e,n),h=0;h<300;h++){if(r===o)return h;r=r*10%n,o=o*10%n}return 0}function C(t,n){if(!t)return n;if(!n)return t;for(;;){if(t%=n,!t)return n;if(n%=t,!n)return t}}function p(t,n){if(w(t,n),this instanceof p)t=C(i.d,i.n),this.s=i.s,this.n=i.n/t,this.d=i.d/t;else return l(i.s*i.n,i.d)}var B=function(){return new Error("Division by Zero")},P=function(){return new Error("Invalid argument")},G=function(){return new Error("Parameters must be integer")};p.prototype={s:1,n:0,d:1,abs:function(){return l(this.n,this.d)},neg:function(){return l(-this.s*this.n,this.d)},add:function(t,n){return w(t,n),l(this.s*this.n*i.d+i.s*this.d*i.n,this.d*i.d)},sub:function(t,n){return w(t,n),l(this.s*this.n*i.d-i.s*this.d*i.n,this.d*i.d)},mul:function(t,n){return w(t,n),l(this.s*i.s*this.n*i.n,this.d*i.d)},div:function(t,n){return w(t,n),l(this.s*i.s*this.n*i.d,this.d*i.n)},clone:function(){return l(this.s*this.n,this.d)},mod:function(t,n){if(isNaN(this.n)||isNaN(this.d))return new p(NaN);if(t===void 0)return l(this.s*this.n%this.d,1);if(w(t,n),i.n===0&&this.d===0)throw B();return l(this.s*(i.d*this.n)%(i.n*this.d),i.d*this.d)},gcd:function(t,n){return w(t,n),l(C(i.n,this.n)*C(i.d,this.d),i.d*this.d)},lcm:function(t,n){return w(t,n),i.n===0&&this.n===0?l(0,1):l(i.n*this.n,C(i.n,this.n)*C(i.d,this.d))},ceil:function(t){return t=Math.pow(10,t||0),isNaN(this.n)||isNaN(this.d)?new p(NaN):l(Math.ceil(t*this.s*this.n/this.d),t)},floor:function(t){return t=Math.pow(10,t||0),isNaN(this.n)||isNaN(this.d)?new p(NaN):l(Math.floor(t*this.s*this.n/this.d),t)},round:function(t){return t=Math.pow(10,t||0),isNaN(this.n)||isNaN(this.d)?new p(NaN):l(Math.round(t*this.s*this.n/this.d),t)},roundTo:function(t,n){return w(t,n),l(this.s*Math.round(this.n*i.d/(this.d*i.n))*i.n,i.d)},inverse:function(){return l(this.s*this.d,this.n)},pow:function(t,n){if(w(t,n),i.d===1)return i.s<0?l(Math.pow(this.s*this.d,i.n),Math.pow(this.n,i.n)):l(Math.pow(this.s*this.n,i.n),Math.pow(this.d,i.n));if(this.s<0)return null;var e=O(this.n),r=O(this.d),o=1,h=1;for(var f in e)if(f!=="1"){if(f==="0"){o=0;break}if(e[f]*=i.n,e[f]%i.d===0)e[f]/=i.d;else return null;o*=Math.pow(f,e[f])}for(var f in r)if(f!=="1"){if(r[f]*=i.n,r[f]%i.d===0)r[f]/=i.d;else return null;h*=Math.pow(f,r[f])}return i.s<0?l(h,o):l(o,h)},equals:function(t,n){return w(t,n),this.s*this.n*i.d===i.s*i.n*this.d},compare:function(t,n){w(t,n);var e=this.s*this.n*i.d-i.s*i.n*this.d;return(0<e)-(e<0)},simplify:function(t){if(isNaN(this.n)||isNaN(this.d))return this;t=t||.001;for(var n=this.abs(),e=n.toContinued(),r=1;r<e.length;r++){for(var o=l(e[r-1],1),h=r-2;h>=0;h--)o=o.inverse().add(e[h]);if(Math.abs(o.sub(n).valueOf())<t)return o.mul(this.s)}return this},divisible:function(t,n){return w(t,n),!(!(i.n*this.d)||this.n*i.d%(i.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(t){var n,e="",r=this.n,o=this.d;return this.s<0&&(e+="-"),o===1?e+=r:(t&&(n=Math.floor(r/o))>0&&(e+=n,e+=" ",r%=o),e+=r,e+="/",e+=o),e},toLatex:function(t){var n,e="",r=this.n,o=this.d;return this.s<0&&(e+="-"),o===1?e+=r:(t&&(n=Math.floor(r/o))>0&&(e+=n,r%=o),e+="\\frac{",e+=r,e+="}{",e+=o,e+="}"),e},toContinued:function(){var t,n=this.n,e=this.d,r=[];if(isNaN(n)||isNaN(e))return r;do r.push(Math.floor(n/e)),t=n%e,n=e,e=t;while(n!==1);return r},toString:function(t){var n=this.n,e=this.d;if(isNaN(n)||isNaN(e))return"NaN";t=t||15;var r=X(n,e),o=Y(n,e,r),h=this.s<0?"-":"";if(h+=n/e|0,n%=e,n*=10,n&&(h+="."),r){for(var f=o;f--;)h+=n/e|0,n%=e,n*=10;h+="(";for(var f=r;f--;)h+=n/e|0,n%=e,n*=10;h+=")"}else for(var f=t;n&&f--;)h+=n/e|0,n%=e,n*=10;return h}};const K={class:"flex flex-col fullscreen-container rounded-3xl",id:"screen"},W={class:"py-8 select-none",version:"1.1",baseProfile:"full",viewBox:"-10 -5 120 35",xmlns:"http://www.w3.org/2000/svg","font-family":"Commissioner, sans-serif","font-size":"3px","text-anchor":"middle","dominant-baseline":"middle","stroke-linecap":"round",fill:"white",style:{"touch-action":"none"}},tt={id:"ruler","stroke-width":"0.2",stroke:"currentColor"},nt=d("line",{y1:"30",y2:"30",x2:"100"},null,-1),et=d("line",{y1:"0",y2:"30"},null,-1),rt=d("line",{x1:"100",x2:"100",y1:"0",y2:"30"},null,-1),it=["x1","x2"],ot={id:"freqs",stroke:"none",fill:"currentColor"},st={id:"left","text-anchor":"end"},at=["x"],ft=["x"],dt={id:"right","text-anchor":"start"},ht=["x"],ut=["x"],ct={class:"cursor-pointer",id:"ratio","font-size":"4px",fill:"currentColor"},lt=["x"],vt=["x"],xt=["stroke"],_t=d("circle",{r:"1"},null,-1),mt=d("circle",{cx:"100",r:"1"},null,-1),wt={x:"50","font-weight":"bold"},Nt={class:"cursor-pointer",id:"divided",transform:"translate(0,15)","font-weight":"bold"},gt=["stroke","x2"],pt=["x"],yt=["stroke","x1"],qt=["x"],Mt=["cx"],Ft=d("circle",{r:"1"},null,-1),bt=d("circle",{r:"1",cx:"100"},null,-1),kt={class:"flex flex-wrap justify-center m-4"},Ct=["onClick"],$t={__name:"SoundMonochord",setup(t){const n=$({ratio:E(.8,.05,.95),fraction:_(()=>new p(1-n.ratio).simplify(.001).toFraction(!0)),invFraction:_(()=>new p(n.ratio).simplify(.001).toFraction(!0))}),e=$({freq:E(220,50,2e3),pitch:_(()=>D(e.freq).toFixed()),note:_(()=>F(e.freq).toNote()),cents:_(()=>a(F(e.note).toFrequency(),e.freq))}),r=$({freq:_(()=>e.freq/(1-n.ratio)),pitch:_(()=>(D(r.freq)+120)%12),note:_(()=>F(r.freq).toNote()),cents:_(()=>a(F(r.note).toFrequency(),r.freq))}),o=$({freq:_(()=>e.freq/n.ratio),pitch:_(()=>(D(o.freq)+120)%12),note:_(()=>F(o.freq).toNote()),cents:_(()=>a(F(o.note).toFrequency(),o.freq))}),h={"1/2":1/2,"2/3":2/3,"3/4":3/4,"3/5":3/5,"4/5":4/5,"5/6":5/6,"4/7":4/7,"5/7":5/7,"6/7":6/7,"5/8":5/8,"7/8":7/8,"5/9":5/9,"7/9":7/9,"8/9":8/9,"9/10":9/10,"10/11":10/11,"11/12":11/12,"8/15":8/15,"15/16":15/16,"32/45":32/45},f=j(_(()=>n.ratio),{duration:200,transition:I.easeOutCubic}),{once:v}=Q();function q(s){e.freq+=s.delta[0]/4}function y(s){n.ratio-=s.delta[0]/1200}function a(s,c){return-(1200/Math.log10(2))*Math.log10(s/c)%1200}return(s,c)=>{const N=T("drag");return b(),k("div",K,[(b(),k("svg",W,[d("g",tt,[nt,et,rt,d("line",{x1:100*(1-u(f)),x2:100*(1-u(f)),y1:"0",y2:"30"},null,8,it),d("g",ot,[d("g",st,[d("text",{x:100*(1-u(f))-2,y:"28"},m(r.freq.toFixed(1))+" Hz",9,at),d("text",{x:100*(1-u(f))-2,y:"24"},m(r.note)+" ("+m(r.cents.toFixed())+" cents) ",9,ft)]),d("g",dt,[d("text",{x:100*(1-u(f))+2,y:"28"},m(o.freq.toFixed(1))+" Hz",9,ht),d("text",{x:100*(1-u(f))+2,y:"24"},m(o.note)+" ("+m(o.cents.toFixed())+" cents) ",9,ut)])]),d("g",ct,[d("g",{onMousedown:c[0]||(c[0]=x=>{u(v)(e.freq),u(v)(r.freq)})},[d("text",{x:100*(1-u(f))-2,y:"8","text-anchor":"end"},m(n.fraction),9,lt)],32),d("g",{onMousedown:c[1]||(c[1]=x=>{u(v)(e.freq),u(v)(o.freq)})},[d("text",{x:100*(1-u(f))+2,y:"8","text-anchor":"start"},m(n.invFraction),9,vt)],32)])]),L((b(),k("g",{class:"cursor-pointer",id:"fundamental",onMouseover:c[2]||(c[2]=x=>u(v)(e.freq)),onMousedown:c[3]||(c[3]=x=>u(v)(e.freq))},[d("line",{x2:"100","stroke-width":"4",stroke:u(z)(e.freq)},null,8,xt),_t,mt,d("text",wt,m(e.note)+" "+m(e.freq.toFixed())+" Hz ("+m(e.cents.toFixed())+" cents)",1)],32)),[[N,q]]),L((b(),k("g",Nt,[d("g",{id:"part1",onMouseover:c[4]||(c[4]=x=>u(v)(r.freq)),onMousedown:c[5]||(c[5]=x=>u(v)(r.freq))},[d("line",{stroke:u(z)(r.freq),"stroke-width":"4",x2:100*(1-u(f))},null,8,gt),d("text",{y:"0.3",x:100*(1-u(f))/2},m(r.note),9,pt)],32),d("g",{id:"part2",onMouseover:c[6]||(c[6]=x=>u(v)(o.freq)),onMousedown:c[7]||(c[7]=x=>u(v)(o.freq))},[d("line",{stroke:u(z)(o.freq),"stroke-width":"4",x1:100*(1-u(f)),x2:"100"},null,8,yt),d("text",{y:"0.3",x:100-100*u(f)/2},m(o.note),9,qt),d("circle",{cx:100*(1-u(f)),r:"1"},null,8,Mt)],32),Ft,bt])),[[N,y]])])),d("div",kt,[(b(),k(V,null,A(h,(x,M)=>d("button",{class:"p-2 border-1 shadow m-2",key:M,onClick:Bt=>n.ratio=x},m(M),9,Ct)),64))])])}}},Ut=JSON.parse('{"title":"Monochord","description":"Virtual string for frequency and length ratio explorations","frontmatter":{"title":"Monochord","description":"Virtual string for frequency and length ratio explorations","layout":"app","date":"2021-09-12T00:00:00.000Z","cover":"monochord.png"},"headers":[],"relativePath":"practice/sound/monochord/index.md","filePath":"practice/sound/monochord/index.md","lastUpdated":1703606230000}'),Pt={name:"practice/sound/monochord/index.md"},Dt=d("p",null,"Drag the divider to explore the string divisions of a monochord, just like Pythagoras did.",-1);function zt(t,n,e,r,o,h){const f=$t,v=Z("client-only");return b(),k("div",null,[S(v,null,{default:J(()=>[S(f)]),_:1}),Dt])}const Xt=H(Pt,[["render",zt]]);export{Ut as __pageData,Xt as default};
