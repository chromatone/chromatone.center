import{Q as E,aA as P,F,Z as A,af as z}from"./chunks/theme.BJf4skTF.js";import{b as $,c as _,au as V,av as j,V as I,v as b,x as k,z as d,D as u,E as w,B as L,F as T,A as Z,q as H,W as S,M as J,a4 as Q}from"./chunks/framework.5yygNDZN.js";/**
 * @license Fraction.js v4.3.7 31/08/2023
 * https://www.xarg.org/2014/03/rational-numbers-in-javascript/
 *
 * Copyright (c) 2023, Robert Eisele (robert@raw.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/var R=2e3,i={s:1,n:0,d:1};function m(t,n){if(isNaN(t=parseInt(t,10)))throw D();return t*n}function l(t,n){if(n===0)throw B();var e=Object.create(y.prototype);e.s=t<0?-1:1,t=t<0?-t:t;var r=C(t,n);return e.n=t/r,e.d=n/r,e}function O(t){for(var n={},e=t,r=2,o=4;o<=e;){for(;e%r===0;)e/=r,n[r]=(n[r]||0)+1;o+=1+2*r++}return e!==t?e>1&&(n[e]=(n[e]||0)+1):n[t]=(n[t]||0)+1,n}var N=function(t,n){var e=0,r=1,o=1,h=0,f=0,v=0,M=1,q=1,a=0,s=1,c=1,g=1,x=1e7,p;if(t!=null)if(n!==void 0){if(e=t,r=n,o=e*r,e%1!==0||r%1!==0)throw Y()}else switch(typeof t){case"object":{if("d"in t&&"n"in t)e=t.n,r=t.d,"s"in t&&(e*=t.s);else if(0 in t)e=t[0],1 in t&&(r=t[1]);else throw D();o=e*r;break}case"number":{if(t<0&&(o=t,t=-t),t%1===0)e=t;else if(t>0){for(t>=1&&(q=Math.pow(10,Math.floor(1+Math.log(t)/Math.LN10)),t/=q);s<=x&&g<=x;)if(p=(a+c)/(s+g),t===p){s+g<=x?(e=a+c,r=s+g):g>s?(e=c,r=g):(e=a,r=s);break}else t>p?(a+=c,s+=g):(c+=a,g+=s),s>x?(e=c,r=g):(e=a,r=s);e*=q}else(isNaN(t)||isNaN(n))&&(r=e=NaN);break}case"string":{if(s=t.match(/\d+|./g),s===null)throw D();if(s[a]==="-"?(o=-1,a++):s[a]==="+"&&a++,s.length===a+1?f=m(s[a++],o):s[a+1]==="."||s[a]==="."?(s[a]!=="."&&(h=m(s[a++],o)),a++,(a+1===s.length||s[a+1]==="("&&s[a+3]===")"||s[a+1]==="'"&&s[a+3]==="'")&&(f=m(s[a],o),M=Math.pow(10,s[a].length),a++),(s[a]==="("&&s[a+2]===")"||s[a]==="'"&&s[a+2]==="'")&&(v=m(s[a+1],o),q=Math.pow(10,s[a+1].length)-1,a+=3)):s[a+1]==="/"||s[a+1]===":"?(f=m(s[a],o),M=m(s[a+2],1),a+=3):s[a+3]==="/"&&s[a+1]===" "&&(h=m(s[a],o),f=m(s[a+2],o),M=m(s[a+4],1),a+=5),s.length<=a){r=M*q,o=e=v+r*h+q*f;break}}default:throw D()}if(r===0)throw B();i.s=o<0?-1:1,i.n=Math.abs(e),i.d=Math.abs(r)};function U(t,n,e){for(var r=1;n>0;t=t*t%e,n>>=1)n&1&&(r=r*t%e);return r}function W(t,n){for(;n%2===0;n/=2);for(;n%5===0;n/=5);if(n===1)return 0;for(var e=10%n,r=1;e!==1;r++)if(e=e*10%n,r>R)return 0;return r}function X(t,n,e){for(var r=1,o=U(10,e,n),h=0;h<300;h++){if(r===o)return h;r=r*10%n,o=o*10%n}return 0}function C(t,n){if(!t)return n;if(!n)return t;for(;;){if(t%=n,!t)return n;if(n%=t,!n)return t}}function y(t,n){if(N(t,n),this instanceof y)t=C(i.d,i.n),this.s=i.s,this.n=i.n/t,this.d=i.d/t;else return l(i.s*i.n,i.d)}var B=function(){return new Error("Division by Zero")},D=function(){return new Error("Invalid argument")},Y=function(){return new Error("Parameters must be integer")};y.prototype={s:1,n:0,d:1,abs:function(){return l(this.n,this.d)},neg:function(){return l(-this.s*this.n,this.d)},add:function(t,n){return N(t,n),l(this.s*this.n*i.d+i.s*this.d*i.n,this.d*i.d)},sub:function(t,n){return N(t,n),l(this.s*this.n*i.d-i.s*this.d*i.n,this.d*i.d)},mul:function(t,n){return N(t,n),l(this.s*i.s*this.n*i.n,this.d*i.d)},div:function(t,n){return N(t,n),l(this.s*i.s*this.n*i.d,this.d*i.n)},clone:function(){return l(this.s*this.n,this.d)},mod:function(t,n){if(isNaN(this.n)||isNaN(this.d))return new y(NaN);if(t===void 0)return l(this.s*this.n%this.d,1);if(N(t,n),i.n===0&&this.d===0)throw B();return l(this.s*(i.d*this.n)%(i.n*this.d),i.d*this.d)},gcd:function(t,n){return N(t,n),l(C(i.n,this.n)*C(i.d,this.d),i.d*this.d)},lcm:function(t,n){return N(t,n),i.n===0&&this.n===0?l(0,1):l(i.n*this.n,C(i.n,this.n)*C(i.d,this.d))},ceil:function(t){return t=Math.pow(10,t||0),isNaN(this.n)||isNaN(this.d)?new y(NaN):l(Math.ceil(t*this.s*this.n/this.d),t)},floor:function(t){return t=Math.pow(10,t||0),isNaN(this.n)||isNaN(this.d)?new y(NaN):l(Math.floor(t*this.s*this.n/this.d),t)},round:function(t){return t=Math.pow(10,t||0),isNaN(this.n)||isNaN(this.d)?new y(NaN):l(Math.round(t*this.s*this.n/this.d),t)},roundTo:function(t,n){return N(t,n),l(this.s*Math.round(this.n*i.d/(this.d*i.n))*i.n,i.d)},inverse:function(){return l(this.s*this.d,this.n)},pow:function(t,n){if(N(t,n),i.d===1)return i.s<0?l(Math.pow(this.s*this.d,i.n),Math.pow(this.n,i.n)):l(Math.pow(this.s*this.n,i.n),Math.pow(this.d,i.n));if(this.s<0)return null;var e=O(this.n),r=O(this.d),o=1,h=1;for(var f in e)if(f!=="1"){if(f==="0"){o=0;break}if(e[f]*=i.n,e[f]%i.d===0)e[f]/=i.d;else return null;o*=Math.pow(f,e[f])}for(var f in r)if(f!=="1"){if(r[f]*=i.n,r[f]%i.d===0)r[f]/=i.d;else return null;h*=Math.pow(f,r[f])}return i.s<0?l(h,o):l(o,h)},equals:function(t,n){return N(t,n),this.s*this.n*i.d===i.s*i.n*this.d},compare:function(t,n){N(t,n);var e=this.s*this.n*i.d-i.s*i.n*this.d;return(0<e)-(e<0)},simplify:function(t){if(isNaN(this.n)||isNaN(this.d))return this;t=t||.001;for(var n=this.abs(),e=n.toContinued(),r=1;r<e.length;r++){for(var o=l(e[r-1],1),h=r-2;h>=0;h--)o=o.inverse().add(e[h]);if(Math.abs(o.sub(n).valueOf())<t)return o.mul(this.s)}return this},divisible:function(t,n){return N(t,n),!(!(i.n*this.d)||this.n*i.d%(i.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(t){var n,e="",r=this.n,o=this.d;return this.s<0&&(e+="-"),o===1?e+=r:(t&&(n=Math.floor(r/o))>0&&(e+=n,e+=" ",r%=o),e+=r,e+="/",e+=o),e},toLatex:function(t){var n,e="",r=this.n,o=this.d;return this.s<0&&(e+="-"),o===1?e+=r:(t&&(n=Math.floor(r/o))>0&&(e+=n,r%=o),e+="\\frac{",e+=r,e+="}{",e+=o,e+="}"),e},toContinued:function(){var t,n=this.n,e=this.d,r=[];if(isNaN(n)||isNaN(e))return r;do r.push(Math.floor(n/e)),t=n%e,n=e,e=t;while(n!==1);return r},toString:function(t){var n=this.n,e=this.d;if(isNaN(n)||isNaN(e))return"NaN";t=t||15;var r=W(n,e),o=X(n,e,r),h=this.s<0?"-":"";if(h+=n/e|0,n%=e,n*=10,n&&(h+="."),r){for(var f=o;f--;)h+=n/e|0,n%=e,n*=10;h+="(";for(var f=r;f--;)h+=n/e|0,n%=e,n*=10;h+=")"}else for(var f=t;n&&f--;)h+=n/e|0,n%=e,n*=10;return h}};const G={class:"flex flex-col fullscreen-container",id:"screen"},K={class:"py-8 select-none",version:"1.1",baseProfile:"full",viewBox:"-10 -5 120 35",xmlns:"http://www.w3.org/2000/svg","font-family":"Commissioner, sans-serif","font-size":"3px","text-anchor":"middle","dominant-baseline":"middle","stroke-linecap":"round",fill:"white",style:{"touch-action":"none"}},tt={id:"ruler","stroke-width":"0.2",stroke:"currentColor"},nt=d("line",{y1:"30",y2:"30",x2:"100"},null,-1),et=d("line",{y1:"0",y2:"30"},null,-1),rt=d("line",{x1:"100",x2:"100",y1:"0",y2:"30"},null,-1),it=["x1","x2"],ot={id:"freqs",stroke:"none",fill:"currentColor"},st={id:"left","text-anchor":"end"},at=["x"],ft=["x"],dt={id:"right","text-anchor":"start"},ht=["x"],ut=["x"],ct={class:"cursor-pointer",id:"ratio","font-size":"4px",fill:"currentColor"},lt=["x"],vt=["x"],xt=["stroke"],_t=d("circle",{r:"1"},null,-1),wt=d("circle",{cx:"100",r:"1"},null,-1),Nt={x:"50","font-weight":"bold"},gt={class:"cursor-pointer",id:"divided",transform:"translate(0,15)","font-weight":"bold"},mt=["stroke","x2"],yt=["x"],qt=["stroke","x1"],Mt=["x"],pt=["cx"],Ft=d("circle",{r:"1"},null,-1),bt=d("circle",{r:"1",cx:"100"},null,-1),kt={class:"flex flex-wrap justify-center m-4"},Ct=["onClick"],$t={__name:"SoundMonochord",setup(t){const n=$({ratio:E(.8,.05,.95),fraction:_(()=>new y(1-n.ratio).simplify(.001).toFraction(!0)),invFraction:_(()=>new y(n.ratio).simplify(.001).toFraction(!0))}),e=$({freq:E(220,50,2e3),pitch:_(()=>P(e.freq).toFixed()),note:_(()=>F(e.freq).toNote()),cents:_(()=>a(F(e.note).toFrequency(),e.freq))}),r=$({freq:_(()=>e.freq/(1-n.ratio)),pitch:_(()=>(P(r.freq)+120)%12),note:_(()=>F(r.freq).toNote()),cents:_(()=>a(F(r.note).toFrequency(),r.freq))}),o=$({freq:_(()=>e.freq/n.ratio),pitch:_(()=>(P(o.freq)+120)%12),note:_(()=>F(o.freq).toNote()),cents:_(()=>a(F(o.note).toFrequency(),o.freq))}),h={"1/2":1/2,"2/3":2/3,"3/4":3/4,"3/5":3/5,"4/5":4/5,"5/6":5/6,"4/7":4/7,"5/7":5/7,"6/7":6/7,"5/8":5/8,"7/8":7/8,"5/9":5/9,"7/9":7/9,"8/9":8/9,"9/10":9/10,"10/11":10/11,"11/12":11/12,"8/15":8/15,"15/16":15/16,"32/45":32/45},f=V(_(()=>n.ratio),{duration:200,transition:j.easeOutCubic}),{once:v}=A();function M(s){e.freq+=s.delta[0]/4}function q(s){n.ratio-=s.delta[0]/1200}function a(s,c){return-(1200/Math.log10(2))*Math.log10(s/c)%1200}return(s,c)=>{const g=I("drag");return b(),k("div",G,[(b(),k("svg",K,[d("g",tt,[nt,et,rt,d("line",{x1:100*(1-u(f)),x2:100*(1-u(f)),y1:"0",y2:"30"},null,8,it),d("g",ot,[d("g",st,[d("text",{x:100*(1-u(f))-2,y:"28"},w(r.freq.toFixed(1))+" Hz",9,at),d("text",{x:100*(1-u(f))-2,y:"24"},w(r.note)+" ("+w(r.cents.toFixed())+" cents) ",9,ft)]),d("g",dt,[d("text",{x:100*(1-u(f))+2,y:"28"},w(o.freq.toFixed(1))+" Hz",9,ht),d("text",{x:100*(1-u(f))+2,y:"24"},w(o.note)+" ("+w(o.cents.toFixed())+" cents) ",9,ut)])]),d("g",ct,[d("g",{onMousedown:c[0]||(c[0]=x=>{u(v)(e.freq),u(v)(r.freq)})},[d("text",{x:100*(1-u(f))-2,y:"8","text-anchor":"end"},w(n.fraction),9,lt)],32),d("g",{onMousedown:c[1]||(c[1]=x=>{u(v)(e.freq),u(v)(o.freq)})},[d("text",{x:100*(1-u(f))+2,y:"8","text-anchor":"start"},w(n.invFraction),9,vt)],32)])]),L((b(),k("g",{class:"cursor-pointer",id:"fundamental",onMouseover:c[2]||(c[2]=x=>u(v)(e.freq)),onMousedown:c[3]||(c[3]=x=>u(v)(e.freq))},[d("line",{x2:"100","stroke-width":"4",stroke:u(z)(e.freq)},null,8,xt),_t,wt,d("text",Nt,w(e.note)+" "+w(e.freq.toFixed())+" Hz ("+w(e.cents.toFixed())+" cents)",1)],32)),[[g,M]]),L((b(),k("g",gt,[d("g",{id:"part1",onMouseover:c[4]||(c[4]=x=>u(v)(r.freq)),onMousedown:c[5]||(c[5]=x=>u(v)(r.freq))},[d("line",{stroke:u(z)(r.freq),"stroke-width":"4",x2:100*(1-u(f))},null,8,mt),d("text",{y:"0.3",x:100*(1-u(f))/2},w(r.note),9,yt)],32),d("g",{id:"part2",onMouseover:c[6]||(c[6]=x=>u(v)(o.freq)),onMousedown:c[7]||(c[7]=x=>u(v)(o.freq))},[d("line",{stroke:u(z)(o.freq),"stroke-width":"4",x1:100*(1-u(f)),x2:"100"},null,8,qt),d("text",{y:"0.3",x:100-100*u(f)/2},w(o.note),9,Mt),d("circle",{cx:100*(1-u(f)),r:"1"},null,8,pt)],32),Ft,bt])),[[g,q]])])),d("div",kt,[(b(),k(T,null,Z(h,(x,p)=>d("button",{class:"p-2 border-1 shadow m-2",key:p,onClick:Bt=>n.ratio=x},w(p),9,Ct)),64))])])}}},St=JSON.parse('{"title":"Monochord","description":"Virtual string for frequency and length ratio explorations","frontmatter":{"title":"Monochord","description":"Virtual string for frequency and length ratio explorations","layout":"app","date":"2021-09-12T00:00:00.000Z","cover":"monochord.png"},"headers":[],"relativePath":"practice/sound/monochord/index.md","filePath":"practice/sound/monochord/index.md","lastUpdated":1718592604000}'),Dt={name:"practice/sound/monochord/index.md"},Pt=d("p",null,"Drag the divider to explore the string divisions of a monochord, just like Pythagoras did.",-1);function zt(t,n,e,r,o,h){const f=$t,v=Q("client-only");return b(),k("div",null,[S(v,null,{default:J(()=>[S(f)]),_:1}),Pt])}const Ot=H(Dt,[["render",zt]]);export{St as __pageData,Ot as default};
