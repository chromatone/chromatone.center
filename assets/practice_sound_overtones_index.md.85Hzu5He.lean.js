import{r as D,p as X,f as B}from"./chunks/calculations.uITx2GSi.js";import{n as H,g as q}from"./chunks/colors.hHBI9fPI.js";import{n as R}from"./chunks/theory.c9f85u7m.js";import{_ as N,k,o as l,c as a,F as w,r as $,z as E,A as G,g as F,t as _,j as d,a as i,S as J,w as j,v as A,x as L,f as M,I as U,y as P,b as T,p as W,d as Z}from"./chunks/framework.KnxPB1sj.js";import{_ as K}from"./chunks/ControlRotary._Hazk9zv.js";import{s as Q,a as O,F as V}from"./chunks/index.RYxauP_R.js";import{c as tt}from"./chunks/audio.pG3RnClx.js";import"./chunks/index.kn6emmbE.js";import"./chunks/midi.91UwWBqe.js";import"./chunks/index.bnjSkgpl.js";import"./chunks/commonjsHelpers.4gQjN7DL.js";import"./chunks/synth.TVJKhjDp.js";import"./chunks/Scale.nioafpJK.js";import"./chunks/Subtract.6yvEFIfU.js";import"./chunks/PingPongDelay.a3-runAV.js";import"./chunks/AutoPanner.02Sltg0b.js";import"./chunks/MonoSynth.pp_JS1sF.js";import"./chunks/Filter.CUstuK5R.js";import"./chunks/index.QyW-2vQe.js";import"./chunks/index._4u9I4xi.js";import"./chunks/index.rstREGm8.js";const et={class:"flex justify-center min-h-2rem"},ot=["onMouseover","onMouseleave","onClick"],nt={__name:"ControlPiano",props:{pitch:{type:Number,default:0},chroma:String,size:{type:String,default:"2"},names:Boolean},emits:["update:pitch"],setup(u,{emit:o}){const v=o,p=u,n=[...R].map((b,f)=>({name:b,pitch:f})),z=k({notes:D(n,3)});function C(b){if(p.chroma)return D(p.chroma.split(""),-p.pitch)[b]==1}return(b,f)=>(l(),a("div",et,[(l(!0),a(w,null,$(z.notes,s=>(l(),a("div",{class:E(["key",{black:s.name.length==2,tonic:s.pitch==u.pitch}]),key:s,onMouseover:r=>s.active=!0,onMouseleave:r=>s.active=!1,onClick:r=>v("update:pitch",s.pitch),style:G({backgroundColor:C(s.pitch)||s.active||s.pitch==u.pitch?F(H)(s.pitch,4,s.pitch==u.pitch?1:.4):""})},_(u.names?s.name:""),47,ot))),128))]))}},st=N(nt,[["__scopeId","data-v-377ff691"]]),rt={id:"guitar"},it=i("path",{id:"body",d:"M272.067496,477.021744 C152.799151,477.021744 64.2512517,431.596015 64.2512517,324.985083 C64.2512517,218.370585 135.631319,176.65559 135.631319,142.353147 C135.631319,108.052486 104.910874,46.8672837 128.402665,-6.90358408 C151.896237,-60.6708855 245.865182,-63.4525985 270.259887,-63.4525985 C294.654592,-63.4525985 388.625317,-60.6708855 412.117108,-6.90358408 C435.608899,46.8672837 404.888454,108.052486 404.888454,142.353147 C404.888454,176.65559 476.270303,218.370585 476.270303,324.985083 C476.270303,431.596015 391.337621,477.021744 272.067496,477.021744",fill:"gray",opacity:"0.1",transform:"scale(0.24) rotate(-90) translate(-295, 380) "},null,-1),lt=i("path",{id:"head",d:"M27.4,51.6c18.2-0.9,7.8,0.2,12.4,6.4c3.7,5,9.4-3.4,4.6-6.3c-1.3-0.8-1.3-0.9,5-1.1c6-0.2,5-0.6,4.9,1c-0.4,7.8,4.9,8.8,7,5.2c4-6.8-8.1-6.4,2.8-6.9c2.9-0.1,5.2-0.2,5.2-0.1c0.2,5.8,0.5,6.6,2.4,7.7c3.5,2.1,7.7-4,3.5-7.2	c-1.7-1.3-2.8-0.9,4.7-1.2c10-0.3,5.4-2.1,10.8-3.8c0.9-0.3,0.8-1.6,0.8-24.4c-8.4-4.5-2.5-4-15.8-4.3c-2.2-0.1-2.1,0.2-0.7-0.7	c3.8-2.4,1.6-8.6-2.3-7.9c-4.4,0.8-2.5,7.9-3.9,8.1c-0.6,0.1-10.5-0.2-9.1-0.8c4.2-1.8,2.2-9.1-2.2-8c-2.7,0.7-3.1,3-3.1,8.2	c-12-0.6-11.8-0.4-10.2-1.2c6.3-3.1-4.3-14.8-5.5-2.8c-0.4,4.1,1.4,3.3-11.6,2.6c-12-0.6-12-0.6-14.4,2.7C4.7,28.2,8.2,46,15,51.1	C16.4,52.1,16.5,52.1,27.4,51.6z M31.2,44.8c-0.4-1.5,0-2.4,1.1-3.1c0.5-0.3,5.7-0.8,6.2-0.5c0.2,0.1,0.2,2.2,0.1,5.7	C32.9,47.1,31.9,47.3,31.2,44.8z M42.6,41c0.1-0.2,11.7-0.8,11.7-0.6c-0.1,0.9,0.4,5.9-0.5,5.9c-0.1,0-10.7,0.6-11.1,0.4	C42.3,46.5,42.5,41.2,42.6,41z M58.3,43.1c0-3.8-0.4-3,6-3.3c6.5-0.3,5.2-1.2,5.1,2.8c-0.1,3.9,0.6,3-6.1,3.4	C57.6,46.3,58.3,46.8,58.3,43.1z M31.2,22.1c-0.6-5.1,7.4-3.2,7.4-3c0.1,0.4,0.1,5.5,0,5.5c0,0-1.3,0-2.9-0.1 	C32.5,24.3,31.4,23.8,31.2,22.1z M73.4,39.3c2.3,0,4.2-0.2,4.9,2.4c1,3.9-4.6,3.9-4.7,3.8C73.2,45.4,73.4,44.1,73.4,39.3z M42.5,19	c9.3,0.4,11.6,0.6,11.7,0.6c0.3,0.2,0.1,6-0.2,6c-0.2,0-2.7-0.2-5.6-0.3C41.6,24.9,42.4,26.1,42.5,19z M58.4,22.9	c0-1.6,0.1-2.9,0.1-3c0.1-0.2,10.5,0.1,10.9,0.3c0.2,0.1,0.1,3.3,0.1,6.1C56.2,25.7,58.4,26.9,58.4,22.9z M73.5,20.6	c0-0.5,2.4-0.1,3.6,0.6c1.8,1.1,1.9,3.6,0.2,4.7c-0.9,0.6-3.1,1-3.6,0.7C73.2,26.3,73.4,21.1,73.5,20.6z",transform:"scale(0.52) translate(-91.5, -21.5)",fill:"gray",opacity:"0.3"},null,-1),at=["width"],ct=["x1","x2"],ut=["cx"],dt=["cx"],pt=i("circle",{cy:"3",r:"1",cx:72.7,opacity:"0.5"},null,-1),ht=i("circle",{cy:"9",r:"1",cx:72.7,opacity:"0.5"},null,-1),mt=["x1","x2"],ft=["x2","y1","y2"],yt={__name:"SoundOvertonesGuitar",props:{length:{type:Number,default:0}},setup(u){const o=k({semitone:1.05946309436,inlays:d(()=>[3,5,7,9,15,17,19,21].map(v=>1-Math.pow(.9438743,v-.5))),frets:d(()=>{let v=[];for(let p=0;p<22;p++)v.push(1-Math.pow(.9438743,p));return v})});return(v,p)=>(l(),a("g",rt,[it,lt,i("rect",{id:"fretboard",x:"0",y:"0",width:u.length*.702,height:"12",fill:"gray",opacity:"0.3",stroke:"black","stroke-width":"0.2"},null,8,at),i("line",{x1:u.length,x2:u.length,y1:"0",y2:"12",stroke:"gray","stroke-width":"1"},null,8,ct),i("circle",{r:"15",cx:u.length*.8,cy:"6",fill:"hsla(0,0%,0%,0.1)"},null,8,ut),(l(!0),a(w,null,$(o.inlays,n=>(l(),a("circle",{key:n,cy:"6",r:"1",cx:n*u.length,opacity:"0.5"},null,8,dt))),128)),pt,ht,(l(!0),a(w,null,$(o.frets,n=>(l(),a("line",{key:n,x1:n*u.length,x2:n*u.length,y1:"0",y2:"12",stroke:"currentColor","stroke-width":"0.2"},null,8,mt))),128)),(l(),a(w,null,$(6,n=>i("line",{key:n,x1:0,x2:u.length,y1:n*2-1,y2:n*2-1,stroke:"gray","stroke-width":"0.5",opacity:"0.6"},null,8,ft)),64))]))}},vt=u=>(W("data-v-bdce838b"),u=u(),Z(),u),xt={class:"flex flex-col fullscreen-container rounded-3xl",id:"screen"},_t=["viewBox"],gt={id:"edges"},wt=["y2"],$t=["x1","x2","y2"],kt=["y","width","height","fill","opacity"],bt=["stroke-width"],Mt=["fill"],Ct=["cx","fill"],St={fill:"currentColor",x:-2,"text-anchor":"end",y:"2","font-size":"4px"},Pt=["x"],zt=["data-num","transform","onMouseenter","onMouseover","onMouseleave","onMousedown","onTouchstart","onMouseup","onTouchend","onTouchcancel"],qt=["y","width","height","fill","opacity"],Tt=["stroke-width"],Vt={fill:"currentColor",x:-2,"text-anchor":"end",y:"-3","font-size":"4px","font-weight":"bold"},Ft={fill:"currentColor",x:-2,"text-anchor":"end",y:"2","font-size":"4px"},Nt=["x"],It=["x"],Yt=["cx","r","fill"],Dt=["x1","x2","y1","stroke","opacity"],Bt={class:"controls flex flex-wrap justify-center -mb-8 z-2 mt-8"},jt={class:"is-group flex items-center mr-2 gap-2"},At={key:0,class:"i-la-play"},Ut={key:1,class:"i-la-pause"},Ot={class:"is-group flex items-center gap-2"},Xt={class:"relative flex flex-col items-center"},Ht=vt(()=>i("div",{class:"i-bi-volume-up"},null,-1)),Rt=[Ht],Et={__name:"SoundOvertones",setup(u){const o=k({width:150,height:200,padX:30,padY:20,x:0,y:0,stroke:"currentColor",fill:"none","stroke-width":.2});let v=null,p=null;const n=k({started:!1,enabled:!1,async init(){if(n.started){n.enabled=!n.enabled;return}await Q(),n.started=!0,n.enabled=!0;const{channel:c}=tt("overtones");v=new O({oscillator:{type:"sine"},volume:-10,envelope:{attack:.1,decay:.01,sustain:1,release:4}}).connect(c),p=new O({oscillator:{type:"sawtooth8"},volume:-10,envelope:{attack:.1,decay:.01,sustain:1,release:4}}).connect(c)},playSaw(c){if(!n.enabled)return n.init(),null;p.triggerAttack(c)},stopSaw(){n.enabled&&p.triggerRelease()},play(c,t){if(!n.enabled)return n.init(),null;p.volume.rampTo(-10-100*t,.01),v.triggerAttack(c,"+0.1",(r.count-t)/r.count)},stop(){n.enabled&&v.triggerRelease()},change(c,t){n.enabled&&(p.volume.rampTo(-10-100*t,.01),v.setNote(c))}}),{timestamp:z,pause:C,resume:b}=J({controls:!0,offset:-Date.now()}),f=k({phase:d(()=>f.speed*(z.value/100)%100/100),speed:1,move:!0});j(()=>f.move,c=>{c?b():C()},{immediate:!0});const s=k({pitch:0,octave:A("overtones-octave",2),frequency:d(()=>X(q.tonic,s.octave)),points:d(()=>{let c=[];for(let t=0;t<=o.width;t+=1){let h=0;for(let g=0;g<=r.count;g++)h=h+I(g,t,f.phase)/Math.exp(g/2+1);let m=o.height/(3*r.count)*h*5;c[t]=`${t},${m}`}return c.join(" ")}),stroke:d(()=>B(s.frequency)),note:d(()=>V(s.frequency).toNote()),cents:d(()=>Y(s.frequency,V(s.note).toFrequency()))}),r=k({count:A("overtones-count",7),min:2,max:15,list:[],intervals:["P8","P8+P5","2P8","2P8+M3","2P8+P5","2P8+m7","3P8","3P8+M2","3P8+M3","3P8+TT","3P8+P5","3P8+n6","3P8+P5+m3","3P8+M7","4P8"]});j(()=>r.count,c=>{r.list=[];for(let t=1;t<=c;t++)r.list[t-1]={frequency:d(()=>s.frequency*(t+1)),note:d(()=>{let h=r.list[t-1].frequency;return V(h).toNote()}),cents:d(()=>Y(s.frequency,r.list[t-1].frequency).toFixed(0)),centDiff:d(()=>r.list[t-1].cents-Math.round(r.list[t-1].cents/100)*100),position:d(()=>t*(o.height-o.padY)/r.count),stroke:d(()=>B(r.list[t-1].frequency)),amplitude:d(()=>o.height/(3*c*t/2)),points:d(()=>{let h=[];for(let m=0;m<=o.width;m+=1){let g=r.list[t-1].amplitude*I(t,m,f.phase);h[m]=`${m},${g}`}return h.join(" ")}),dots:d(()=>{let h=[];for(let m=0;m<=t;m++)h.push(o.width/t*m);return h})}},{immediate:!0});function I(c,t,h){return Math.sin(Math.PI*c*t/o.width)*Math.cos(h*c*2*Math.PI)}function Y(c,t){return-(1200/Math.log10(2))*Math.log10(c/t)%1200}return(c,t)=>{const h=yt,m=K,g=st,S=L("tooltip");return l(),a("div",xt,[(l(),a("svg",{class:"w-full max-h-90vh",id:"overtones",version:"1.1",baseProfile:"full",viewBox:`${-o.padX} ${-3*o.padY} ${o.width+2*o.padX} ${o.height+3*o.padY}`,xmlns:"http://www.w3.org/2000/svg","font-family":"Commissioner, sans-serif",onMouseleave:t[7]||(t[7]=e=>n.stop())},[M(h,{length:o.width,transform:"translate(0,-1) rotate(180) translate(-150, -12)"},null,8,["length","transform"]),i("g",gt,[i("line",{x1:"0",x2:"0",y1:"0",y2:o.height-8,stroke:"gray","stroke-width":"0.2"},null,8,wt),i("line",{x1:o.width,x2:o.width,y1:"0",y2:o.height-8,stroke:"gray","stroke-width":"0.2"},null,8,$t)]),i("g",{class:"cursor-pointer",id:"fundamental",onMouseover:t[0]||(t[0]=e=>s.hover=!0),onMouseleave:t[1]||(t[1]=e=>{s.hover=!1,n.stopSaw()}),onMousedown:t[2]||(t[2]=e=>n.playSaw(s.frequency,!0)),onTouchstart:t[3]||(t[3]=e=>n.playSaw(s.frequency,!0)),onMouseup:t[4]||(t[4]=e=>n.stopSaw()),onTouchend:t[5]||(t[5]=e=>n.stopSaw()),onTouchcancel:t[6]||(t[6]=e=>n.stopSaw())},[i("rect",{class:"transition-all duration-200",x:"0",y:-.5*(o.height-o.padY)/r.count,width:o.width,height:(o.height-o.padY)/r.count,fill:s.stroke,opacity:s.hover?.2:.05},null,8,kt),i("polyline",U({fill:"none"},s,{"stroke-width":s.hover?2:1}),null,16,bt),i("circle",{cx:"0",cy:"0",r:"1",fill:s.stroke},null,8,Mt),i("circle",{cx:o.width,cy:"0",r:"1",fill:s.stroke},null,8,Ct),i("text",St,_(s.frequency.toFixed(1))+" Hz ",1),i("text",{fill:"currentColor",x:o.width+2,"text-anchor":"start",y:"2","font-size":"4px"},_(s.note)+" ("+_(s.cents.toFixed(0))+" cents)",9,Pt)],32),(l(!0),a(w,null,$(r.list,(e,x)=>(l(),a("g",{class:"overtone cursor-pointer",key:e,"data-num":x+1,transform:`translate(0, ${e.position})`,onMouseenter:y=>n.change(e.frequency,x),onMouseover:y=>e.hover=!0,onMouseleave:y=>e.hover=!1,onMousedown:y=>{n.play(e.frequency,x),e.active=!0},onTouchstart:y=>{n.play(e.frequency,x),e.active=!0},onMouseup:y=>{n.stop(),e.active=!1},onTouchend:y=>{n.stop(),e.active=!1},onTouchcancel:y=>{n.stop(),e.active=!1}},[i("rect",{class:"transition-all duration-200",x:"0",y:-.5*(o.height-o.padY)/r.count,width:o.width,height:(o.height-o.padY)/r.count,fill:e.stroke,opacity:e.hover?.2:.05},null,8,qt),i("polyline",U({class:"transition-all duration-200"},e,{fill:"none","stroke-width":e.hover?e.active?2:1:.5}),null,16,Tt),i("text",Vt,_(x+1),1),i("text",Ft,_(e.frequency.toFixed(1))+" Hz",1),i("text",{"font-weight":"bold",fill:"currentColor",x:o.width+2,"text-anchor":"start",y:"-3","font-size":"4px"},_(r.intervals[x]),9,Nt),i("text",{fill:"currentColor",x:o.width+2,"text-anchor":"start",y:"2","font-size":"4px"},_(e.note)+" ("+_(e.centDiff>0?"+":"")+_(e.centDiff)+" cents)",9,It),(l(!0),a(w,null,$(e.dots,y=>(l(),a("circle",{class:"transition-all duration-200",key:y,cy:"0",cx:y,r:e.hover?1.2:1,fill:e.stroke},null,8,Yt))),128))],40,zt))),128)),(l(!0),a(w,null,$(r.list,(e,x)=>(l(),a("g",{class:"lines",key:x},[(l(!0),a(w,null,$(e.dots,y=>(l(),a("line",{key:y,x1:y,x2:y,y1:(x+1)*(o.height-o.padY)/r.count,y2:0,stroke:e.stroke,"stroke-width":"0.2",opacity:1-x/(r.count+2)},null,8,Dt))),128))]))),128))],40,_t)),i("div",Bt,[i("div",jt,[P((l(),a("button",{class:"shadow p-3 m-1 border-1 border-current rounded",onClick:t[8]||(t[8]=e=>f.move=!f.move)},[f.move?T("",!0):(l(),a("div",At)),f.move?(l(),a("div",Ut)):T("",!0)])),[[S,"Toggle animation",void 0,{bottom:!0}]]),P(M(m,{modelValue:r.count,"onUpdate:modelValue":t[9]||(t[9]=e=>r.count=e),min:r.min,max:r.max,step:1,fixed:0,param:"count"},null,8,["modelValue","min","max"]),[[S,"Number of harmonics",void 0,{bottom:!0}]]),P(M(m,{modelValue:f.speed,"onUpdate:modelValue":t[10]||(t[10]=e=>f.speed=e),min:.2,max:2,step:.1,fixed:1,param:"speed"},null,8,["modelValue"]),[[S,"Speed of animation",void 0,{bottom:!0}]])]),i("div",Ot,[P(M(g,{pitch:F(q).tonic,"onUpdate:pitch":t[11]||(t[11]=e=>F(q).tonic=e)},null,8,["pitch"]),[[S,"Fundamental pitch",void 0,{bottom:!0}]]),P(M(m,{modelValue:s.octave,"onUpdate:modelValue":t[12]||(t[12]=e=>s.octave=e),min:1,max:5,step:1,fixed:0,param:"octave"},null,8,["modelValue"]),[[S,"Octave of the fundamental pitch",void 0,{bottom:!0}]])])]),i("div",Xt,[n.enabled?T("",!0):(l(),a("button",{key:0,class:"shadow p-3 m-1 border-1 border-current rounded absolute top-80",onClick:t[13]||(t[13]=e=>n.init())},Rt))])])}}},Gt=N(Et,[["__scopeId","data-v-bdce838b"]]),xe=JSON.parse('{"title":"String overtones","description":"String standing waves interactive visualization","frontmatter":{"title":"String overtones","description":"String standing waves interactive visualization","date":"2021-08-12T00:00:00.000Z","layout":"app","cover":"overtones.png"},"headers":[],"relativePath":"practice/sound/overtones/index.md","filePath":"practice/sound/overtones/index.md","lastUpdated":1704528747000}'),Jt={name:"practice/sound/overtones/index.md"},Lt=i("p",null,"A string fixed from both ends produces a harmonic set of incremental frequency partials, also called harmonics.",-1);function Wt(u,o,v,p,n,z){const C=Gt;return l(),a("div",null,[M(C),Lt])}const _e=N(Jt,[["render",Wt]]);export{xe as __pageData,_e as default};
