import{_ as ie}from"./chunks/MidiKeys.DT7xdTs9.js";import{O as Y,H as Z,aE as ue,T as de,w as ce,G as D,aF as ee,g as T,aq as he,aG as fe,aH as me,aI as H}from"./chunks/theme.DroiMV_E.js";import{S as te,T as X,c as U,r as F,f as p,g as w,h as u,m as C,_ as ve,aq as xe,n as W,l as o,p as q,U as B,F as z,j as I,R as S,q as R,o as ne,d as ye,O as ge,A as pe,$ as we}from"./chunks/framework.BH4RfCYQ.js";function ke(e,n){return Object.keys(e.values).forEach(a=>e.values[a]=e.values[a]&&parseFloat(e.values[a].toFixed(n))),e}function ae(e,n,a){const t=n-1,s=a[oe(t,a.length)];return s.marker!=="Z"?s:ae(e,t,a)}function se(e,n,a){const t=n+1,s=a[oe(t,a.length)];return s.marker==="Z"?se(e,t,a):s}function be(e,n,a){let t=a[n-1]||{values:{x:0,y:0}};if(e.marker===e.marker.toLowerCase())switch(e.marker=e.marker.toUpperCase(),e.marker){case"M":e.values.x+=t.values.x,e.values.y+=t.values.y;break;case"L":case"A":e.values.x+=t.values.x,e.values.y+=t.values.y;break;case"H":e.marker="L",e.values.x+=t.values.x,e.values.y=t.values.y;break;case"V":e.marker="L",e.values.x=t.values.x,e.values.y+=t.values.y;break;case"C":e.values.x+=t.values.x,e.values.y+=t.values.y,e.values.x1+=t.values.x,e.values.y1+=t.values.y,e.values.x2+=t.values.x,e.values.y2+=t.values.y;break;case"S":e.values.x+=t.values.x,e.values.y+=t.values.y,e.values.x2+=t.values.x,e.values.y2+=t.values.y;break;case"Q":e.values.x+=t.values.x,e.values.y+=t.values.y,e.values.x1+=t.values.x,e.values.y1+=t.values.y;break;case"T":e.values.x+=t.values.x,e.values.y+=t.values.y;break}else if(e.marker===e.marker.toUpperCase())switch(e.marker){case"H":e.marker="L",e.values.y=t.values.y;break;case"V":e.marker="L",e.values.x=t.values.x;break}if(e.marker==="Z"){let s=function(m,d){return m[d].marker==="M"?m[d]:s(m,d-1)},l=s(a,n);e.values.x=l.values.x,e.values.y=l.values.y}return e}function $e(e,n){const a=[];switch(e.toUpperCase()){case"M":for(let t=0;t<n.length;t+=2){let s;e===e.toUpperCase()?s=t===0?"M":"L":s=t===0?"m":"l",a.push({marker:s,values:{x:n[t],y:n[t+1]}})}break;case"L":for(let t=0;t<n.length;t+=2)a.push({marker:e,values:{x:n[t],y:n[t+1]}});break;case"H":for(let t=0;t<n.length;t++)a.push({marker:e,values:{x:n[t],y:0}});break;case"V":for(let t=0;t<n.length;t++)a.push({marker:e,values:{x:0,y:n[t]}});break;case"C":for(let t=0;t<n.length;t+=6)a.push({marker:e,values:{x1:n[t],y1:n[t+1],x2:n[t+2],y2:n[t+3],x:n[t+4],y:n[t+5]}});break;case"S":for(let t=0;t<n.length;t+=4)a.push({marker:e,values:{x2:n[t],y2:n[t+1],x:n[t+2],y:n[t+3]}});break;case"Q":for(let t=0;t<n.length;t+=4)a.push({marker:e,values:{x1:n[t],y1:n[t+1],x:n[t+2],y:n[t+3]}});break;case"T":for(let t=0;t<n.length;t+=2)a.push({marker:e,values:{x:n[t],y:n[t+1]}});break;case"A":for(let t=0;t<n.length;t+=7)a.push({marker:e,values:{radiusX:n[t],radiusY:n[t+1],rotation:n[t+2],largeArc:n[t+3],sweep:n[t+4],x:n[t+5],y:n[t+6]}});break;case"Z":a.push({marker:e,values:{x:0,y:0}});break}return a}function oe(e,n){return(e%n+n)%n}function Me(e,n,a){if(n!==0&&e.marker==="L"){let t=a[n-1];["x","y"].every(l=>Math.round(Math.abs(t.values[l]-e.values[l]))===0)&&(e.overlap=!0)}return e}function V(e,n){const a=["x","y"].every(t=>Math.round(Math.abs(e[n].values[t]-e[0].values[t]))===0);e[n].marker==="L"&&a&&(e[n].overlap=!0,V(e,n-1)),e[n].marker==="Z"&&V(e,n-1)}function Ce(e,n,a){const t=Q(e.values,a.values),s=Q(n.values,e.values);return Math.min(s,t)}function K(e,n){return Math.atan2(n.x-e.x,n.y-e.y)}function Q(e,n){const a=e.x-n.x,t=e.y-n.y;return Math.sqrt(Math.pow(a,2)+Math.pow(t,2))}function G(e,n){return Math.sin(e)*n}function J(e,n){return Math.cos(e)*n}function _(e,n){const a=n/Math.tan(e);return a===1/0||a===-1/0||isNaN(a)?n:a}function Fe(e,n){return n*Math.tan(e)}function Se(e,n){let a,t=0,s=e*(180/Math.PI);return s<0&&s>=-180||s>180&&s<360?a=_(e/2,-n):(a=_(e/2,n),t=1,a===1/0&&(a=n)),{offset:a,sweepFlag:t}}function Ue(e){const n=["radiusX","radiusY","rotation","largeArc","sweep","x1","y1","x2","y2","x","y"];return e.map(a=>{let t="";if(a.marker!=="Z"){const s=Object.keys(a.values);t=n.filter(l=>s.indexOf(l)!==-1).map(l=>a.values[l]).join()}return`${a.marker}${t}`}).join("").trim()}function Ne(e){const n=/[MmLlSsQqLlHhVvCcSsQqTtAaZz]/g,a=/-?[0-9]*\.?\d+/g;return[...e.matchAll(n)].map(t=>({marker:t[0],index:t.index})).reduceRight((t,s)=>{const l=e.substring(s.index,t.length?t[t.length-1].index:e.length);return t.concat([{marker:s.marker,index:s.index,chunk:l.length>0?l.substr(1,l.length-1):l}])},[]).reverse().flatMap(t=>{const s=t.chunk.match(a),l=s?s.map(parseFloat):[];return $e(t.marker,l)}).map(be)}function Ee(e,n,a){let t=[],s=[];return e.forEach(l=>ke(l,a)),e.forEach(l=>{l.marker==="M"&&t.push([]),t[t.length-1].push(l)}),t.forEach(l=>{l.map(Me),V(l,l.length-1);const m=l[l.length-1].marker=="Z";l.filter(d=>!d.overlap).map((d,v,f)=>{const r=ae(d,v,f),x=se(d,v,f),k=K(d.values,r.values),b=K(d.values,x.values),h=b-k,i=h*(180/Math.PI),c=Ce(d,r,x),g=Math.abs(Fe(h/2,c/2)),$=Math.min(n,g),L=Se(h,$),M=L.offset,N=L.sweepFlag,E=(v==0||v==f.length-1)&&!m;switch(d.marker){case"M":case"L":const A=[d.values.x+G(k,M),d.values.y+J(k,M)],P=[d.values.x+G(b,M),d.values.y+J(b,M)];E?s.push({marker:d.marker,values:d.values}):s.push({marker:d.marker,values:{x:parseFloat(A[0].toFixed(3)),y:parseFloat(A[1].toFixed(3))}}),!E&&(x.marker==="L"||x.marker==="M")&&s.push({marker:"A",radius:$,values:{radiusX:parseFloat($.toFixed(3)),radiusY:parseFloat($.toFixed(3)),rotation:i,largeArc:0,sweep:N,x:parseFloat(P[0].toFixed(3)),y:parseFloat(P[1].toFixed(3))}});break;case"C":case"S":case"Q":case"T":case"A":case"Z":s.push({marker:d.marker,values:d.values});break}})}),{path:Ue(s),commands:s}}function Ae(e,n,a){return Ee([...Ne(e)],n,a)}const Te=["viewBox"],Xe=["width","height","transform"],Ye=["font-size","transform"],Le=["transform"],Pe=["x"],ze=["x"],Ie=["x"],Oe=["x"],De=["transform"],qe=["x"],Re=["x"],Ve=["x"],je=["x"],Ze=["d","stroke-width"],He={class:"levels op-50",stroke:"currentColor","stroke-linecap":"round","stroke-width":"0.5"},We=["x2","transform"],Be=["x2","transform"],Ke=["x2","transform"],Qe=["x2","transform"],Ge={class:"controls op-50",stroke:"currentColor",fill:"transparent","stroke-dasharray":"0.05 1","stroke-linecap":"round","stroke-width":"0.5"},Je=["width","height"],_e=["width","height","transform"],et=["width","height","transform"],tt=["width","height","transform"],nt={__name:"ControlAdsr",props:te({width:{type:Number,default:60},height:{type:Number,default:20},pad:{type:Number,default:3},title:{type:String,default:"Envelope"}},{a:{type:Number,default:1},aModifiers:{},d:{type:Number,default:1},dModifiers:{},s:{type:Number,default:.7},sModifiers:{},r:{type:Number,default:1},rModifiers:{}}),emits:["update:a","update:d","update:s","update:r"],setup(e){const n=e,a=X(e,"a"),t=X(e,"d"),s=X(e,"s"),l=X(e,"r"),m=U(()=>Ae(`
M 0 ${n.height}
l ${n.width/4*a.value/10} ${-n.height}
l ${n.width/4*t.value/10} ${n.height*(1-s.value)}
L ${n.width-n.width/2*(l.value/10)} ${n.height*(1-s.value)}
L ${n.width} ${n.height}
`,2,2).path),d=F(),v=F(),f=F(),y=F(),r=c(a),x=c(t),k=c(s,.01),b=c(l),h={wheel:{preventWindowScrollY:!0},eventOptions:{capture:!1,passive:!1}};Y({onDrag:r,onWheel:r},{...h,domTarget:d}),Y({onDrag:x,onWheel:x},{...h,domTarget:v}),Y({onDrag:k,onWheel:k},{...h,domTarget:f}),Y({onDrag:b,onWheel:b},{...h,domTarget:y});const i=F(!1);function c(g,$=.1){return function(M){const{delta:[N,E],dragging:A,wheeling:P,shiftKey:re,event:O}=M;if(O&&O.preventDefault(),i.value=A||P,!i.value)return;const j=re?12:O.type==="wheel"?-8:2;let le=E/j-N/j;g.value+=-le*$}}return(g,$)=>(p(),w("svg",{class:"min-w-45 max-w-55 m-1 touch-none",ref:"knob",version:"1.1",baseProfile:"full",viewBox:`${-e.pad} ${-e.pad*2} ${e.width+e.pad*2} ${e.height+e.pad*3}`,xmlns:"http://www.w3.org/2000/svg"},[u("rect",{width:e.width+e.pad*2,height:e.height+e.pad*2,rx:"2",transform:`translate(${-e.pad} ${-e.pad})`,fill:"transparent"},null,8,Xe),u("text",{"text-anchor":"start","font-size":e.pad*1.4,"dominant-baseline":"middle",fill:"currentColor",transform:`translate(0 ${-e.pad})`},C(e.title),9,Ye),u("g",{class:"numbers","text-anchor":"middle","font-size":"6","dominant-baseline":"middle",fill:"currentColor",transform:`translate(0 ${e.height*.25})`},[u("text",{x:e.width/8},C(a.value.toFixed(2)),9,Pe),u("text",{x:3*e.width/8},C(t.value.toFixed(2)),9,ze),u("text",{x:5*e.width/8},C(s.value.toFixed(2)),9,Ie),u("text",{x:7*e.width/8},C(l.value.toFixed(2)),9,Oe)],8,Le),u("g",{class:"titles","text-anchor":"middle","font-size":"6","dominant-baseline":"middle",fill:"currentColor",transform:`translate(0 ${e.height*.75})`},[u("text",{x:e.width/8},"ATT",8,qe),u("text",{x:3*e.width/8},"DEC",8,Re),u("text",{x:5*e.width/8},"SUS",8,Ve),u("text",{x:7*e.width/8},"REL",8,je)],8,De),u("path",{fill:"currentColor","fill-opacity":"0.2",stroke:"currentColor",d:m.value,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":i.value?1:.5},null,8,Ze),u("g",He,[u("line",{x2:e.width/4,transform:`translate(${0*e.width/4} ${e.height*(1-a.value/10)})`},null,8,We),u("line",{x2:e.width/4,transform:`translate(${1*e.width/4} ${e.height*(1-t.value/10)})`},null,8,Be),u("line",{x2:e.width/4,transform:`translate(${2*e.width/4} ${e.height*(1-s.value)})`},null,8,Ke),u("line",{x2:e.width/4,transform:`translate(${3*e.width/4} ${e.height*(1-l.value/10)})`},null,8,Qe)]),u("g",Ge,[u("rect",{ref_key:"attPan",ref:d,width:e.width/4,height:e.height},null,8,Je),u("rect",{ref_key:"decPan",ref:v,width:e.width/4,height:e.height,transform:`translate(${e.width/4} 0)`},null,8,_e),u("rect",{ref_key:"susPan",ref:f,width:e.width/4,height:e.height,transform:`translate(${e.width/2} 0)`},null,8,et),u("rect",{ref_key:"relPan",ref:y,width:e.width/4,height:e.height,transform:`translate(${3*e.width/4} 0)`},null,8,tt)])],8,Te))}},at=["viewBox"],st=["x","y","width","height","transform"],ot=["y","font-size"],rt=["y1","x2","y2"],lt=["x1","x2","y2"],it=["cx","cy","r"],ut=["y","font-size"],dt=["y","font-size"],ct={__name:"ControlXY",props:te({width:{type:Number,default:30},height:{type:Number,default:30},pad:{type:Number,default:3},title:{type:String,default:"Filter XY Pad"},rangeX:{type:Array,default:()=>[20,2e4]},rangeY:{type:Array,default:()=>[0,20]},stepX:{type:Number,default:10},stepY:{type:Number,default:.1}},{x:{type:Number,default:.5},xModifiers:{},y:{type:Number,default:.5},yModifiers:{}}),emits:["update:x","update:y"],setup(e){const n=e,a=X(e,"x"),t=X(e,"y"),s=F(),l=F(!1),m=Z(a.value,n.rangeX[0],n.rangeX[1]),d=Z(t.value,n.rangeY[0],n.rangeY[1]),v=U(()=>(m.value-n.rangeX[0])/(n.rangeX[1]-n.rangeX[0])),f=U(()=>1-(d.value-n.rangeY[0])/(n.rangeY[1]-n.rangeY[0])),y=U(()=>Math.round(m.value)),r=U(()=>d.value.toFixed(2)),x=U(()=>v.value*n.width),k=U(()=>f.value*n.height);Y({onWheel:h,onDrag:h,onDragStart:()=>l.value=!0,onDragEnd:()=>l.value=!1},{...{drag:{preventWindowScrollY:!0},eventOptions:{capture:!1,passive:!1}},domTarget:s});function h(i){const{delta:c,dragging:g,wheeling:$,shiftKey:L,event:M}=i;if(M&&M.preventDefault(),l.value=g||$,!l.value)return;const N=M.type==="wheel"?-8:2;let E=c[0]/N,A=-c[1]/N;m.value+=E*n.stepX,a.value=m.value,d.value+=A*n.stepY,t.value=d.value}return(i,c)=>(p(),w("svg",{class:"m-1 touch-none",ref_key:"xyPad",ref:s,version:"1.1",baseProfile:"full","text-anchor":"start","font-size":"6","dominant-baseline":"middle",fill:"currentColor",viewBox:`${-e.pad} ${-e.pad} ${e.width+e.pad*2} ${e.height+e.pad*2}`,xmlns:"http://www.w3.org/2000/svg"},[u("rect",{stroke:"currentColor",fill:"transparent","stroke-dasharray":"0.05 1","stroke-linecap":"round","stroke-width":"0.5",x:e.pad,y:e.pad,width:e.width,height:e.height,transform:`translate(${-e.pad} ${-e.pad})`,rx:"3"},null,8,st),u("text",{x:2,y:-e.pad/2,"font-size":e.pad*1.2,fill:"currentColor"},C(e.title),9,ot),u("line",{x1:0,y1:k.value,x2:e.width,y2:k.value,stroke:"currentColor","stroke-width":"0.5","stroke-dasharray":"0.1 1","stroke-linecap":"round"},null,8,rt),u("line",{x1:x.value,y1:0,x2:x.value,y2:e.height,stroke:"currentColor","stroke-width":"0.5","stroke-dasharray":"0.1 1","stroke-linecap":"round"},null,8,lt),u("circle",{class:"transition",cx:x.value,cy:k.value,r:l.value?2:1,fill:"currentColor"},null,8,it),u("text",{x:1,y:e.pad+2,"font-size":e.pad*1.2,fill:"currentColor"},"FREQ: "+C(y.value)+" Hz",9,ut),u("text",{x:1,y:3*e.pad+4,"font-size":e.pad*1.2,fill:"currentColor"},"Q: "+C(r.value),9,dt)],8,at))}},ht=ve(ct,[["__scopeId","data-v-9ff7e7fb"]]),ft={class:"flex flex-wrap gap-4 relative p-4"},mt={class:"flex is-group p-2 items-center"},vt={class:"text-button"},xt={class:"flex flex-wrap gap-2 items-center"},yt={class:"text-sm uppercase absolute -top-4 bg-light-300 dark-bg-dark-300 p-1 rounded"},gt=["onClick"],pt={key:0,class:"p-0 flex h-30",style:{order:"5",flex:"10"}},wt={key:1,class:"p-0 flex",style:{order:"5",flex:"10"}},kt={key:2,class:"p-0",style:{order:"20",flex:"10"}},bt={__name:"ElemSynth",setup(e){const{controls:n,groups:a,voiceRefs:t,stopAll:s,cycleNote:l,synthEnabled:m,params:d}=ue();xe("Escape",()=>{s()});const{midi:v,activeNotes:f}=de();return U(()=>Object.entries(f.value).reduce((y,r)=>(y=ce(y).mix(D((Number(r[0])-9)%12),Number(r[1])/3).toRgbString(),y),"#888")),ee(),(y,r)=>{const x=he,k=ht,b=nt;return p(),w("div",ft,[u("div",mt,[u("button",{class:W(["text-button",{active:o(m)}]),onClick:r[0]||(r[0]=h=>m.value=!o(m))},r[9]||(r[9]=[u("div",{class:"i-la-power-off"},null,-1)]),2),u("button",{class:"text-button",style:q({backgroundColor:o(D)(o(T).tonic,5)}),onMousedownPassive:r[1]||(r[1]=h=>o(l)(57+o(T).tonic+12*o(v).offset,120)),onMouseupPassive:r[2]||(r[2]=h=>o(l)(57+o(T).tonic+12*o(v).offset)),onTouchstart:r[3]||(r[3]=B(h=>o(l)(57+o(T).tonic+12*o(v).offset,120),["prevent","stop"])),onTouchend:r[4]||(r[4]=B(h=>o(l)(57+o(T).tonic+12*o(v).offset),["prevent","stop"])),onMouseleave:r[5]||(r[5]=h=>o(l)(57+o(T).tonic+12*o(v).offset))},r[10]||(r[10]=[u("div",{class:"i-la-check"},null,-1)]),36),u("button",{class:"text-button",onClick:r[6]||(r[6]=h=>o(v).offset--)},r[11]||(r[11]=[u("div",{class:"i-la-minus"},null,-1)])),u("div",vt,C(o(v).offset),1),u("button",{class:"text-button",onClick:r[7]||(r[7]=h=>o(v).offset++)},r[12]||(r[12]=[u("div",{class:"i-la-plus"},null,-1)])),u("button",{class:"text-button",onClick:r[8]||(r[8]=h=>o(s)())},r[13]||(r[13]=[u("div",{class:"i-la-times"},null,-1)]))]),u("div",xt,[(p(!0),w(z,null,I(o(t),h=>(p(),w("div",{class:"p-2 flex-1 rounded-xl",key:h,style:q({backgroundColor:o(D)(h.midi.value-9,3,void 0,h.gate.value?1:.1)})},null,4))),128))]),(p(!0),w(z,null,I(o(a),(h,i)=>(p(),w("div",{class:"flex flex-wrap is-group p-2 relative items-center",key:h},[u("div",yt,C(i),1),u("button",{class:W(["text-button",{active:o(n)[`${i}:on`]==1}]),onClick:c=>o(n)[`${i}:on`]==1?o(n)[`${i}:on`]=0:o(n)[`${i}:on`]=1},r[14]||(r[14]=[u("div",{class:"i-la-power-off"},null,-1)]),10,gt),(p(!0),w(z,null,I(h,(c,g)=>(p(),w("div",{class:"p-0 flex items-center flex-1 justify-center",key:g,style:q({order:g=="f-env"?20:1})},[S(x,{modelValue:o(n)[`${i}:${g}`],"onUpdate:modelValue":$=>o(n)[`${i}:${g}`]=$,min:c.min,max:c.max,step:c.step,param:g,interpolation:g=="cut-off"?"log2":"linear"},null,8,["modelValue","onUpdate:modelValue","min","max","step","param","interpolation"])],4))),128)),["osc","noise","string"].includes(i)?(p(),w("div",pt,[S(k,{class:"w-25",x:o(n)[`${i}:cut-off`],"onUpdate:x":c=>o(n)[`${i}:cut-off`]=c,rangeX:[o(d)[`${i}:cut-off`].min,o(d)[`${i}:cut-off`].max],stepX:50,y:o(n)[`${i}:cut-q`],"onUpdate:y":c=>o(n)[`${i}:cut-q`]=c,rangeY:[o(d)[`${i}:cut-q`].min,o(d)[`${i}:cut-q`].max],stepY:.01},null,8,["x","onUpdate:x","rangeX","y","onUpdate:y","rangeY"])])):R("",!0),["osc","noise","string","sample"].includes(i)?(p(),w("div",wt,[S(b,{class:"bg-light-400 dark-bg-dark-400 bg-op-30 dark-bg-op-30 rounded-lg",title:"Amplitude Envelope",a:o(n)[`${i}:attack`],"onUpdate:a":c=>o(n)[`${i}:attack`]=c,d:o(n)[`${i}:decay`],"onUpdate:d":c=>o(n)[`${i}:decay`]=c,s:o(n)[`${i}:sustain`],"onUpdate:s":c=>o(n)[`${i}:sustain`]=c,r:o(n)[`${i}:release`],"onUpdate:r":c=>o(n)[`${i}:release`]=c},null,8,["a","onUpdate:a","d","onUpdate:d","s","onUpdate:s","r","onUpdate:r"])])):R("",!0),i=="osc"||i=="noise"||i=="string"?(p(),w("div",kt,[S(b,{class:"bg-light-400 dark-bg-dark-400 bg-op-30 dark-bg-op-30 rounded-lg",title:"Filter Envelope",a:o(n)[`${i}:f-attack`],"onUpdate:a":c=>o(n)[`${i}:f-attack`]=c,d:o(n)[`${i}:f-decay`],"onUpdate:d":c=>o(n)[`${i}:f-decay`]=c,s:o(n)[`${i}:f-sustain`],"onUpdate:s":c=>o(n)[`${i}:f-sustain`]=c,r:o(n)[`${i}:f-release`],"onUpdate:r":c=>o(n)[`${i}:f-release`]=c},null,8,["a","onUpdate:a","d","onUpdate:d","s","onUpdate:s","r","onUpdate:r"])])):R("",!0)]))),128))])}}},$t={__name:"ElemFFT",props:{name:{default:"main:fft",type:String}},setup(e){const a=ee(e.name);let t=F(null);ne(s),ye(a,s,{deep:!0});function s(){if(!t.value||!(a!=null&&a.total))return;let l=t.value.getContext("2d");l.clearRect(0,0,t.value.width,t.value.height);for(let m=0;m<a.total.length;m++){let d=a.total[m],v=Math.pow(d,2)*t.value.height/50,f=Math.log2(m+1)*t.value.width/Math.log2(a.total.length+1),r=Math.log2(m+2)*t.value.width/Math.log2(a.total.length+1)-f,x=t.value.height-v;l.fillStyle=a.colors[m],l.fillRect(f,x,r,v)}}return(l,m)=>(p(),w("canvas",{class:"max-w-full",ref_key:"canvas",ref:t,height:"512",width:"2048"},null,512))}},Mt={__name:"ElemScope",props:{name:{default:"synth",type:String},color:{default:"currentColor",type:String},triggerLevel:{default:0,type:Number}},setup(e){const n=e,{scopes:a}=fe(),t=F(null);let s=null;ne(()=>{t.value&&(t.value.width=t.value.clientWidth,t.value.height=t.value.clientHeight),l()}),ge(()=>{m()});function l(){s=requestAnimationFrame(v)}function m(){s&&cancelAnimationFrame(s)}function d(f,y){for(let r=0;r<f.length-1;r++)if(f[r]<=y&&f[r+1]>y)return r;return 0}function v(){const f=t.value.getContext("2d"),{width:y,height:r}=t.value,x=a[n.name];if(!x||x.length<2){s=requestAnimationFrame(v);return}f.clearRect(0,0,y,r),f.strokeStyle=n.color,f.lineWidth=3;const k=d(x,n.triggerLevel),b=y/x.length;f.beginPath();for(let h=0;h<x.length;h++){const i=h*b,c=(k+h)%x.length,g=(1-x[c])*r/2;h===0?f.moveTo(i,g):f.lineTo(i,g)}f.stroke(),s=requestAnimationFrame(v)}return(f,y)=>(p(),w("canvas",{class:"w-full h-full",ref_key:"canvas",ref:t},null,512))}},Ct={class:"relative bg-gray-500 bg-op-30 backdrop-blur-sm w-full sticky top-0 z-100 touch-action-none pointer-events-none"},Et=JSON.parse('{"title":"Elementary synth","description":"MIDI enabled synthesizer built with Elementary audio library","frontmatter":{"title":"Elementary synth","description":"MIDI enabled synthesizer built with Elementary audio library","date":"2024-06-23T00:00:00.000Z","cover":"lockup.svg","layout":"app","links":["https://www.elementary.audio/docs/guides/Understanding_Keys","https://www.elementary.audio/docs/reference/Math","https://github.com/elemaudio/web-examples","https://github.com/bgins/coincident-spectra/blob/main/src/lib/audio/audio.ts","https://github.com/teetow/elementary_grid","https://www.nickwritesablog.com/drum-synthesis-in-javascript/","https://github.com/elemaudio/web-examples/blob/master/planets/app.js","https://github.com/teetow/elementary_grid/blob/master/src/lib/useSynth.tsx"]},"headers":[],"relativePath":"practice/synth/elementary/index.md","filePath":"practice/synth/elementary/index.md","lastUpdated":1725973352000}'),Ft={name:"practice/synth/elementary/index.md"},At=Object.assign(Ft,{setup(e){return(n,a)=>{const t=Mt,s=$t,l=bt,m=ie,d=we("client-only");return p(),w("div",null,[S(d,null,{default:pe(()=>[u("div",Ct,[(p(),w(z,null,I(12,(v,f)=>{var y,r;return S(t,{class:"absolute top-0 w-full",key:f,color:o(me)((y=o(H)[`synth-voice-${f}-midi`])==null?void 0:y.max,void 0,(r=o(H)[`synth-voice-${f}-gate`])==null?void 0:r.max),name:`synth-voice-${f}`},null,8,["color","name"])}),64)),S(s,{class:"border-b-2 mt-16"})]),S(l),S(m)]),_:1}),a[0]||(a[0]=u("p",null,"Fully operational polyphonic synthesizer with square/sawtooth oscillator, noise oscillator, Karplus-Strong string simulation, simple sampler and notable ping-pong delay as well as an SRVB reverb.",-1))])}}});export{Et as __pageData,At as default};
