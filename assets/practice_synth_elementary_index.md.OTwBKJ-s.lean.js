import{_ as le}from"./chunks/MidiKeys.G_sO0HSC.js";import{L as Y,D as Z,aF as ie,N as ue,C as j,g as L,am as de,aG as ce,aH as he,ay as fe,aI as B}from"./chunks/theme.Bw6rsLYr.js";import{Q as ee,R as X,c as U,r as F,x as w,y as k,A as u,G as C,q as me,aq as ve,z as H,E as o,H as O,S as W,F as z,B as I,P as S,I as q,o as te,d as xe,L as ye,U as ge,$ as pe}from"./chunks/framework.BjEhsXnI.js";function we(e,n){return Object.keys(e.values).forEach(a=>e.values[a]=e.values[a]&&parseFloat(e.values[a].toFixed(n))),e}function ne(e,n,a){const t=n-1,s=a[se(t,a.length)];return s.marker!=="Z"?s:ne(e,t,a)}function ae(e,n,a){const t=n+1,s=a[se(t,a.length)];return s.marker==="Z"?ae(e,t,a):s}function ke(e,n,a){let t=a[n-1]||{values:{x:0,y:0}};if(e.marker===e.marker.toLowerCase())switch(e.marker=e.marker.toUpperCase(),e.marker){case"M":e.values.x+=t.values.x,e.values.y+=t.values.y;break;case"L":case"A":e.values.x+=t.values.x,e.values.y+=t.values.y;break;case"H":e.marker="L",e.values.x+=t.values.x,e.values.y=t.values.y;break;case"V":e.marker="L",e.values.x=t.values.x,e.values.y+=t.values.y;break;case"C":e.values.x+=t.values.x,e.values.y+=t.values.y,e.values.x1+=t.values.x,e.values.y1+=t.values.y,e.values.x2+=t.values.x,e.values.y2+=t.values.y;break;case"S":e.values.x+=t.values.x,e.values.y+=t.values.y,e.values.x2+=t.values.x,e.values.y2+=t.values.y;break;case"Q":e.values.x+=t.values.x,e.values.y+=t.values.y,e.values.x1+=t.values.x,e.values.y1+=t.values.y;break;case"T":e.values.x+=t.values.x,e.values.y+=t.values.y;break}else if(e.marker===e.marker.toUpperCase())switch(e.marker){case"H":e.marker="L",e.values.y=t.values.y;break;case"V":e.marker="L",e.values.x=t.values.x;break}if(e.marker==="Z"){let s=function(m,d){return m[d].marker==="M"?m[d]:s(m,d-1)},r=s(a,n);e.values.x=r.values.x,e.values.y=r.values.y}return e}function be(e,n){const a=[];switch(e.toUpperCase()){case"M":for(let t=0;t<n.length;t+=2){let s;e===e.toUpperCase()?s=t===0?"M":"L":s=t===0?"m":"l",a.push({marker:s,values:{x:n[t],y:n[t+1]}})}break;case"L":for(let t=0;t<n.length;t+=2)a.push({marker:e,values:{x:n[t],y:n[t+1]}});break;case"H":for(let t=0;t<n.length;t++)a.push({marker:e,values:{x:n[t],y:0}});break;case"V":for(let t=0;t<n.length;t++)a.push({marker:e,values:{x:0,y:n[t]}});break;case"C":for(let t=0;t<n.length;t+=6)a.push({marker:e,values:{x1:n[t],y1:n[t+1],x2:n[t+2],y2:n[t+3],x:n[t+4],y:n[t+5]}});break;case"S":for(let t=0;t<n.length;t+=4)a.push({marker:e,values:{x2:n[t],y2:n[t+1],x:n[t+2],y:n[t+3]}});break;case"Q":for(let t=0;t<n.length;t+=4)a.push({marker:e,values:{x1:n[t],y1:n[t+1],x:n[t+2],y:n[t+3]}});break;case"T":for(let t=0;t<n.length;t+=2)a.push({marker:e,values:{x:n[t],y:n[t+1]}});break;case"A":for(let t=0;t<n.length;t+=7)a.push({marker:e,values:{radiusX:n[t],radiusY:n[t+1],rotation:n[t+2],largeArc:n[t+3],sweep:n[t+4],x:n[t+5],y:n[t+6]}});break;case"Z":a.push({marker:e,values:{x:0,y:0}});break}return a}function se(e,n){return(e%n+n)%n}function $e(e,n,a){if(n!==0&&e.marker==="L"){let t=a[n-1];["x","y"].every(r=>Math.round(Math.abs(t.values[r]-e.values[r]))===0)&&(e.overlap=!0)}return e}function R(e,n){const a=["x","y"].every(t=>Math.round(Math.abs(e[n].values[t]-e[0].values[t]))===0);e[n].marker==="L"&&a&&(e[n].overlap=!0,R(e,n-1)),e[n].marker==="Z"&&R(e,n-1)}function Me(e,n,a){const t=K(e.values,a.values),s=K(n.values,e.values);return Math.min(s,t)}function Q(e,n){return Math.atan2(n.x-e.x,n.y-e.y)}function K(e,n){const a=e.x-n.x,t=e.y-n.y;return Math.sqrt(Math.pow(a,2)+Math.pow(t,2))}function G(e,n){return Math.sin(e)*n}function J(e,n){return Math.cos(e)*n}function _(e,n){const a=n/Math.tan(e);return a===1/0||a===-1/0||isNaN(a)?n:a}function Ce(e,n){return n*Math.tan(e)}function Fe(e,n){let a,t=0,s=e*(180/Math.PI);return s<0&&s>=-180||s>180&&s<360?a=_(e/2,-n):(a=_(e/2,n),t=1,a===1/0&&(a=n)),{offset:a,sweepFlag:t}}function Se(e){const n=["radiusX","radiusY","rotation","largeArc","sweep","x1","y1","x2","y2","x","y"];return e.map(a=>{let t="";if(a.marker!=="Z"){const s=Object.keys(a.values);t=n.filter(r=>s.indexOf(r)!==-1).map(r=>a.values[r]).join()}return`${a.marker}${t}`}).join("").trim()}function Ue(e){const n=/[MmLlSsQqLlHhVvCcSsQqTtAaZz]/g,a=/-?[0-9]*\.?\d+/g;return[...e.matchAll(n)].map(t=>({marker:t[0],index:t.index})).reduceRight((t,s)=>{const r=e.substring(s.index,t.length?t[t.length-1].index:e.length);return t.concat([{marker:s.marker,index:s.index,chunk:r.length>0?r.substr(1,r.length-1):r}])},[]).reverse().flatMap(t=>{const s=t.chunk.match(a),r=s?s.map(parseFloat):[];return be(t.marker,r)}).map(ke)}function Ee(e,n,a){let t=[],s=[];return e.forEach(r=>we(r,a)),e.forEach(r=>{r.marker==="M"&&t.push([]),t[t.length-1].push(r)}),t.forEach(r=>{r.map($e),R(r,r.length-1);const m=r[r.length-1].marker=="Z";r.filter(d=>!d.overlap).map((d,v,f)=>{const l=ne(d,v,f),x=ae(d,v,f),g=Q(d.values,l.values),b=Q(d.values,x.values),h=b-g,i=h*(180/Math.PI),c=Me(d,l,x),p=Math.abs(Ce(h/2,c/2)),$=Math.min(n,p),P=Fe(h,$),M=P.offset,E=P.sweepFlag,N=(v==0||v==f.length-1)&&!m;switch(d.marker){case"M":case"L":const A=[d.values.x+G(g,M),d.values.y+J(g,M)],T=[d.values.x+G(b,M),d.values.y+J(b,M)];N?s.push({marker:d.marker,values:d.values}):s.push({marker:d.marker,values:{x:parseFloat(A[0].toFixed(3)),y:parseFloat(A[1].toFixed(3))}}),!N&&(x.marker==="L"||x.marker==="M")&&s.push({marker:"A",radius:$,values:{radiusX:parseFloat($.toFixed(3)),radiusY:parseFloat($.toFixed(3)),rotation:i,largeArc:0,sweep:E,x:parseFloat(T[0].toFixed(3)),y:parseFloat(T[1].toFixed(3))}});break;case"C":case"S":case"Q":case"T":case"A":case"Z":s.push({marker:d.marker,values:d.values});break}})}),{path:Se(s),commands:s}}function Ne(e,n,a){return Ee([...Ue(e)],n,a)}const Ae=["viewBox"],Le=["width","height","transform"],Xe=["font-size","transform"],Ye=["transform"],Pe=["x"],Te=["x"],ze=["x"],Ie=["x"],De=["transform"],Oe=["x"],qe=["x"],Re=["x"],Ve=["x"],Ze=["d","stroke-width"],je={class:"levels op-50",stroke:"currentColor","stroke-linecap":"round","stroke-width":"0.5"},Be=["x2","transform"],He=["x2","transform"],We=["x2","transform"],Qe=["x2","transform"],Ke={class:"controls op-50",stroke:"currentColor",fill:"transparent","stroke-dasharray":"0.05 1","stroke-linecap":"round","stroke-width":"0.5"},Ge=["width","height"],Je=["width","height","transform"],_e=["width","height","transform"],et=["width","height","transform"],tt={__name:"ControlAdsr",props:ee({width:{type:Number,default:60},height:{type:Number,default:20},pad:{type:Number,default:3},title:{type:String,default:"Envelope"}},{a:{type:Number,default:1},aModifiers:{},d:{type:Number,default:1},dModifiers:{},s:{type:Number,default:.7},sModifiers:{},r:{type:Number,default:1},rModifiers:{}}),emits:["update:a","update:d","update:s","update:r"],setup(e){const n=e,a=X(e,"a"),t=X(e,"d"),s=X(e,"s"),r=X(e,"r"),m=U(()=>Ne(`
M 0 ${n.height}
l ${n.width/4*a.value/10} ${-n.height}
l ${n.width/4*t.value/10} ${n.height*(1-s.value)}
L ${n.width-n.width/2*(r.value/10)} ${n.height*(1-s.value)}
L ${n.width} ${n.height}
`,2,2).path),d=F(),v=F(),f=F(),y=F(),l=c(a),x=c(t),g=c(s,.01),b=c(r),h={wheel:{preventWindowScrollY:!0},eventOptions:{capture:!1,passive:!1}};Y({onDrag:l,onWheel:l},{...h,domTarget:d}),Y({onDrag:x,onWheel:x},{...h,domTarget:v}),Y({onDrag:g,onWheel:g},{...h,domTarget:f}),Y({onDrag:b,onWheel:b},{...h,domTarget:y});const i=F(!1);function c(p,$=.1){return function(M){const{delta:[E,N],dragging:A,wheeling:T,shiftKey:oe,event:D}=M;if(D&&D.preventDefault(),i.value=A||T,!i.value)return;const V=oe?12:D.type==="wheel"?-8:2;let re=N/V-E/V;p.value+=-re*$}}return(p,$)=>(w(),k("svg",{class:"min-w-45 max-w-55 m-1 touch-none",ref:"knob",version:"1.1",baseProfile:"full",viewBox:`${-e.pad} ${-e.pad*2} ${e.width+e.pad*2} ${e.height+e.pad*3}`,xmlns:"http://www.w3.org/2000/svg"},[u("rect",{width:e.width+e.pad*2,height:e.height+e.pad*2,rx:"2",transform:`translate(${-e.pad} ${-e.pad})`,fill:"transparent"},null,8,Le),u("text",{"text-anchor":"start","font-size":e.pad*1.4,"dominant-baseline":"middle",fill:"currentColor",transform:`translate(0 ${-e.pad})`},C(e.title),9,Xe),u("g",{class:"numbers","text-anchor":"middle","font-size":"6","dominant-baseline":"middle",fill:"currentColor",transform:`translate(0 ${e.height*.25})`},[u("text",{x:e.width/8},C(a.value.toFixed(2)),9,Pe),u("text",{x:3*e.width/8},C(t.value.toFixed(2)),9,Te),u("text",{x:5*e.width/8},C(s.value.toFixed(2)),9,ze),u("text",{x:7*e.width/8},C(r.value.toFixed(2)),9,Ie)],8,Ye),u("g",{class:"titles","text-anchor":"middle","font-size":"6","dominant-baseline":"middle",fill:"currentColor",transform:`translate(0 ${e.height*.75})`},[u("text",{x:e.width/8},"ATT",8,Oe),u("text",{x:3*e.width/8},"DEC",8,qe),u("text",{x:5*e.width/8},"SUS",8,Re),u("text",{x:7*e.width/8},"REL",8,Ve)],8,De),u("path",{fill:"currentColor","fill-opacity":"0.2",stroke:"currentColor",d:m.value,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":i.value?1:.5},null,8,Ze),u("g",je,[u("line",{x2:e.width/4,transform:`translate(${0*e.width/4} ${e.height*(1-a.value/10)})`},null,8,Be),u("line",{x2:e.width/4,transform:`translate(${1*e.width/4} ${e.height*(1-t.value/10)})`},null,8,He),u("line",{x2:e.width/4,transform:`translate(${2*e.width/4} ${e.height*(1-s.value)})`},null,8,We),u("line",{x2:e.width/4,transform:`translate(${3*e.width/4} ${e.height*(1-r.value/10)})`},null,8,Qe)]),u("g",Ke,[u("rect",{ref_key:"attPan",ref:d,width:e.width/4,height:e.height},null,8,Ge),u("rect",{ref_key:"decPan",ref:v,width:e.width/4,height:e.height,transform:`translate(${e.width/4} 0)`},null,8,Je),u("rect",{ref_key:"susPan",ref:f,width:e.width/4,height:e.height,transform:`translate(${e.width/2} 0)`},null,8,_e),u("rect",{ref_key:"relPan",ref:y,width:e.width/4,height:e.height,transform:`translate(${3*e.width/4} 0)`},null,8,et)])],8,Ae))}},nt=["viewBox"],at=["x","y","width","height","transform"],st=["y","font-size"],ot=["y1","x2","y2"],rt=["x1","x2","y2"],lt=["cx","cy","r"],it=["y","font-size"],ut=["y","font-size"],dt={__name:"ControlXY",props:ee({width:{type:Number,default:30},height:{type:Number,default:30},pad:{type:Number,default:3},title:{type:String,default:"Filter XY Pad"},rangeX:{type:Array,default:()=>[20,2e4]},rangeY:{type:Array,default:()=>[0,20]},stepX:{type:Number,default:10},stepY:{type:Number,default:.1}},{x:{type:Number,default:.5},xModifiers:{},y:{type:Number,default:.5},yModifiers:{}}),emits:["update:x","update:y"],setup(e){const n=e,a=X(e,"x"),t=X(e,"y"),s=F(),r=F(!1),m=Z(a.value,n.rangeX[0],n.rangeX[1]),d=Z(t.value,n.rangeY[0],n.rangeY[1]),v=U(()=>(m.value-n.rangeX[0])/(n.rangeX[1]-n.rangeX[0])),f=U(()=>1-(d.value-n.rangeY[0])/(n.rangeY[1]-n.rangeY[0])),y=U(()=>Math.round(m.value)),l=U(()=>d.value.toFixed(2)),x=U(()=>v.value*n.width),g=U(()=>f.value*n.height);Y({onWheel:h,onDrag:h,onDragStart:()=>r.value=!0,onDragEnd:()=>r.value=!1},{...{drag:{preventWindowScrollY:!0},eventOptions:{capture:!1,passive:!1}},domTarget:s});function h(i){const{delta:c,dragging:p,wheeling:$,shiftKey:P,event:M}=i;if(M&&M.preventDefault(),r.value=p||$,!r.value)return;const E=M.type==="wheel"?-8:2;let N=c[0]/E,A=-c[1]/E;m.value+=N*n.stepX,a.value=m.value,d.value+=A*n.stepY,t.value=d.value}return(i,c)=>(w(),k("svg",{class:"m-1 touch-none",ref_key:"xyPad",ref:s,version:"1.1",baseProfile:"full","text-anchor":"start","font-size":"6","dominant-baseline":"middle",fill:"currentColor",viewBox:`${-e.pad} ${-e.pad} ${e.width+e.pad*2} ${e.height+e.pad*2}`,xmlns:"http://www.w3.org/2000/svg"},[u("rect",{stroke:"currentColor",fill:"transparent","stroke-dasharray":"0.05 1","stroke-linecap":"round","stroke-width":"0.5",x:e.pad,y:e.pad,width:e.width,height:e.height,transform:`translate(${-e.pad} ${-e.pad})`,rx:"3"},null,8,at),u("text",{x:2,y:-e.pad/2,"font-size":e.pad*1.2,fill:"currentColor"},C(e.title),9,st),u("line",{x1:0,y1:g.value,x2:e.width,y2:g.value,stroke:"currentColor","stroke-width":"0.5","stroke-dasharray":"0.1 1","stroke-linecap":"round"},null,8,ot),u("line",{x1:x.value,y1:0,x2:x.value,y2:e.height,stroke:"currentColor","stroke-width":"0.5","stroke-dasharray":"0.1 1","stroke-linecap":"round"},null,8,rt),u("circle",{class:"transition",cx:x.value,cy:g.value,r:r.value?2:1,fill:"currentColor"},null,8,lt),u("text",{x:1,y:e.pad+2,"font-size":e.pad*1.2,fill:"currentColor"},"FREQ: "+C(y.value)+" Hz",9,it),u("text",{x:1,y:3*e.pad+4,"font-size":e.pad*1.2,fill:"currentColor"},"Q: "+C(l.value),9,ut)],8,nt))}},ct=me(dt,[["__scopeId","data-v-9ff7e7fb"]]),ht={class:"flex flex-wrap gap-4 relative p-4"},ft={class:"flex is-group p-2 items-center"},mt={class:"text-button"},vt={class:"flex flex-wrap gap-2 items-center"},xt={class:"text-sm uppercase absolute -top-4 bg-light-300 dark-bg-dark-300 p-1 rounded"},yt=["onClick"],gt={key:0,class:"p-0 flex h-30",style:{order:"5",flex:"10"}},pt={key:1,class:"p-0 flex",style:{order:"5",flex:"10"}},wt={key:2,class:"p-0",style:{order:"20",flex:"10"}},kt={__name:"ElemSynth",setup(e){const{controls:n,groups:a,voiceRefs:t,stopAll:s,cycleNote:r,synthEnabled:m,params:d}=ie();ve("Escape",()=>{s()});const{midi:v,activeNotes:f}=ue();return(y,l)=>{const x=de,g=ct,b=tt;return w(),k("div",ht,[u("div",ft,[u("button",{class:H(["text-button",{active:o(m)}]),onClick:l[0]||(l[0]=h=>m.value=!o(m))},l[9]||(l[9]=[u("div",{class:"i-la-power-off"},null,-1)]),2),u("button",{class:"text-button",style:O({backgroundColor:o(j)(o(L).tonic,5)}),onMousedownPassive:l[1]||(l[1]=h=>o(r)(57+o(L).tonic+12*o(v).offset,120)),onMouseupPassive:l[2]||(l[2]=h=>o(r)(57+o(L).tonic+12*o(v).offset)),onTouchstart:l[3]||(l[3]=W(h=>o(r)(57+o(L).tonic+12*o(v).offset,120),["prevent","stop"])),onTouchend:l[4]||(l[4]=W(h=>o(r)(57+o(L).tonic+12*o(v).offset),["prevent","stop"])),onMouseleave:l[5]||(l[5]=h=>o(r)(57+o(L).tonic+12*o(v).offset))},l[10]||(l[10]=[u("div",{class:"i-la-check"},null,-1)]),36),u("button",{class:"text-button",onClick:l[6]||(l[6]=h=>o(v).offset--)},l[11]||(l[11]=[u("div",{class:"i-la-minus"},null,-1)])),u("div",mt,C(o(v).offset),1),u("button",{class:"text-button",onClick:l[7]||(l[7]=h=>o(v).offset++)},l[12]||(l[12]=[u("div",{class:"i-la-plus"},null,-1)])),u("button",{class:"text-button",onClick:l[8]||(l[8]=h=>o(s)())},l[13]||(l[13]=[u("div",{class:"i-la-times"},null,-1)]))]),u("div",vt,[(w(!0),k(z,null,I(o(t),h=>(w(),k("div",{class:"p-2 flex-1 rounded-xl",key:h,style:O({backgroundColor:o(j)(h.midi.value-9,3,void 0,h.gate.value?1:.1)})},null,4))),128))]),(w(!0),k(z,null,I(o(a),(h,i)=>(w(),k("div",{class:"flex flex-wrap is-group p-2 relative items-center",key:h},[u("div",xt,C(i),1),u("button",{class:H(["text-button",{active:o(n)[`${i}:on`]==1}]),onClick:c=>o(n)[`${i}:on`]==1?o(n)[`${i}:on`]=0:o(n)[`${i}:on`]=1},l[14]||(l[14]=[u("div",{class:"i-la-power-off"},null,-1)]),10,yt),(w(!0),k(z,null,I(h,(c,p)=>(w(),k("div",{class:"p-0 flex items-center flex-1 justify-center",key:p,style:O({order:p=="f-env"?20:1})},[S(x,{modelValue:o(n)[`${i}:${p}`],"onUpdate:modelValue":$=>o(n)[`${i}:${p}`]=$,min:c.min,max:c.max,step:c.step,param:p,interpolation:p=="cut-off"?"log2":"linear"},null,8,["modelValue","onUpdate:modelValue","min","max","step","param","interpolation"])],4))),128)),["osc","noise","string"].includes(i)?(w(),k("div",gt,[S(g,{class:"w-25",x:o(n)[`${i}:cut-off`],"onUpdate:x":c=>o(n)[`${i}:cut-off`]=c,rangeX:[o(d)[`${i}:cut-off`].min,o(d)[`${i}:cut-off`].max],stepX:50,y:o(n)[`${i}:cut-q`],"onUpdate:y":c=>o(n)[`${i}:cut-q`]=c,rangeY:[o(d)[`${i}:cut-q`].min,o(d)[`${i}:cut-q`].max],stepY:.01},null,8,["x","onUpdate:x","rangeX","y","onUpdate:y","rangeY"])])):q("",!0),["osc","noise","string","sample"].includes(i)?(w(),k("div",pt,[S(b,{class:"bg-light-400 dark-bg-dark-400 bg-op-30 dark-bg-op-30 rounded-lg",title:"Amplitude Envelope",a:o(n)[`${i}:attack`],"onUpdate:a":c=>o(n)[`${i}:attack`]=c,d:o(n)[`${i}:decay`],"onUpdate:d":c=>o(n)[`${i}:decay`]=c,s:o(n)[`${i}:sustain`],"onUpdate:s":c=>o(n)[`${i}:sustain`]=c,r:o(n)[`${i}:release`],"onUpdate:r":c=>o(n)[`${i}:release`]=c},null,8,["a","onUpdate:a","d","onUpdate:d","s","onUpdate:s","r","onUpdate:r"])])):q("",!0),i=="osc"||i=="noise"||i=="string"?(w(),k("div",wt,[S(b,{class:"bg-light-400 dark-bg-dark-400 bg-op-30 dark-bg-op-30 rounded-lg",title:"Filter Envelope",a:o(n)[`${i}:f-attack`],"onUpdate:a":c=>o(n)[`${i}:f-attack`]=c,d:o(n)[`${i}:f-decay`],"onUpdate:d":c=>o(n)[`${i}:f-decay`]=c,s:o(n)[`${i}:f-sustain`],"onUpdate:s":c=>o(n)[`${i}:f-sustain`]=c,r:o(n)[`${i}:f-release`],"onUpdate:r":c=>o(n)[`${i}:f-release`]=c},null,8,["a","onUpdate:a","d","onUpdate:d","s","onUpdate:s","r","onUpdate:r"])])):q("",!0)]))),128))])}}},bt={__name:"ElemFFT",props:{name:{default:"main:fft",type:String}},setup(e){const a=ce(e.name);let t=F(null);te(s),xe(a,s,{deep:!0});function s(){if(!t.value||!(a!=null&&a.total))return;let r=t.value.getContext("2d");r.clearRect(0,0,t.value.width,t.value.height);for(let m=0;m<a.total.length;m++){let d=a.total[m],v=Math.pow(d,2)*t.value.height/50,f=Math.log2(m+1)*t.value.width/Math.log2(a.total.length+1),l=Math.log2(m+2)*t.value.width/Math.log2(a.total.length+1)-f,x=t.value.height-v;r.fillStyle=a.colors[m],r.fillRect(f,x,l,v)}}return(r,m)=>(w(),k("canvas",{class:"max-w-full",ref_key:"canvas",ref:t,height:"512",width:"2048"},null,512))}},$t={__name:"ElemScope",props:{name:{default:"synth",type:String},color:{default:"currentColor",type:String},triggerLevel:{default:0,type:Number}},setup(e){const n=e,{scopes:a}=he(),t=F(null);let s=null;te(()=>{t.value&&(t.value.width=t.value.clientWidth,t.value.height=t.value.clientHeight),r()}),ye(()=>{m()});function r(){s=requestAnimationFrame(v)}function m(){s&&cancelAnimationFrame(s)}function d(f,y){for(let l=0;l<f.length-1;l++)if(f[l]<=y&&f[l+1]>y)return l;return 0}function v(){if(!t.value)return;const f=t.value.getContext("2d"),{width:y,height:l}=t.value,x=a[n.name];if(!x||x.length<2){s=requestAnimationFrame(v);return}f.clearRect(0,0,y,l),f.strokeStyle=n.color,f.lineWidth=3;const g=d(x,n.triggerLevel),b=y/x.length;f.beginPath();for(let h=0;h<x.length;h++){const i=h*b,c=(g+h)%x.length,p=(1-x[c])*l/2;h===0?f.moveTo(i,p):f.lineTo(i,p)}f.stroke(),s=requestAnimationFrame(v)}return(f,y)=>(w(),k("canvas",{class:"w-full h-full",ref_key:"canvas",ref:t},null,512))}},Mt={class:"relative bg-gray-500 bg-op-30 backdrop-blur-sm w-full sticky top-0 z-100 touch-action-none pointer-events-none"},Et=JSON.parse('{"title":"Elementary synth","description":"MIDI enabled synthesizer built with Elementary audio library","frontmatter":{"title":"Elementary synth","description":"MIDI enabled synthesizer built with Elementary audio library","date":"2024-06-23T00:00:00.000Z","cover":"lockup.svg","layout":"app","links":["https://www.elementary.audio/docs/guides/Understanding_Keys","https://www.elementary.audio/docs/reference/Math","https://github.com/elemaudio/web-examples","https://github.com/bgins/coincident-spectra/blob/main/src/lib/audio/audio.ts","https://github.com/teetow/elementary_grid","https://www.nickwritesablog.com/drum-synthesis-in-javascript/","https://github.com/elemaudio/web-examples/blob/master/planets/app.js","https://github.com/teetow/elementary_grid/blob/master/src/lib/useSynth.tsx"]},"headers":[],"relativePath":"practice/synth/elementary/index.md","filePath":"practice/synth/elementary/index.md","lastUpdated":1729615268000}'),Ct={name:"practice/synth/elementary/index.md"},Nt=Object.assign(Ct,{setup(e){return(n,a)=>{const t=$t,s=bt,r=kt,m=le,d=pe("client-only");return w(),k("div",null,[S(d,null,{default:ge(()=>[u("div",Mt,[(w(),k(z,null,I(12,(v,f)=>{var y,l,x,g;return S(t,{class:"absolute top-0 w-full",key:f,color:o(fe)((l=(y=o(B))==null?void 0:y[`synth-voice-${f}-midi`])==null?void 0:l.max,void 0,(g=(x=o(B))==null?void 0:x[`synth-voice-${f}-gate`])==null?void 0:g.max),name:`synth-voice-${f}`},null,8,["color","name"])}),64)),S(s,{class:"border-b-2 mt-16"})]),S(r),S(m)]),_:1}),a[0]||(a[0]=u("p",null,"Fully operational polyphonic synthesizer with square/sawtooth oscillator, noise oscillator, Karplus-Strong string simulation, simple sampler and notable ping-pong delay as well as an SRVB reverb.",-1))])}}});export{Et as __pageData,Nt as default};
