import{_ as K}from"./chunks/MidiKeys.JVB_0nYH.js";import{_ as T}from"./chunks/ControlRotary._Hazk9zv.js";import{_ as B}from"./chunks/AnalysisFFT.rzqy1C1c.js";import{u as F,s as t}from"./chunks/useAudio.eWB5EMQe.js";import"./chunks/tuner.0-FZg3vi.js";import"./chunks/audio.pG3RnClx.js";import"./chunks/colors.hHBI9fPI.js";import{u as U}from"./chunks/midi.91UwWBqe.js";import"./chunks/loop.CI0tpsQr.js";import"./chunks/mic.v1-AeFkx.js";import"./chunks/midiRender.c86h86WZ.js";import"./chunks/Midi.6fTTQsck.js";import"./chunks/tempo.fl6CFXyY.js";import"./chunks/noise.bpaR192Z.js";import"./chunks/index.RYxauP_R.js";import"./chunks/sequence.lQXqylrG.js";import{c as S}from"./chunks/synth.TVJKhjDp.js";import"./chunks/theory.c9f85u7m.js";import{u as $}from"./chunks/useParams.BmTLY7LI.js";import{E as C,G as M,w as V,g as a,o as m,c as l,f as p,a as N,F as E,r as O,_ as q}from"./chunks/framework.KnxPB1sj.js";import"./chunks/index.rstREGm8.js";import"./chunks/index.bnjSkgpl.js";import"./chunks/calculations.uITx2GSi.js";import"./chunks/commonjsHelpers.4gQjN7DL.js";import"./chunks/index.kn6emmbE.js";import"./chunks/index.QyW-2vQe.js";import"./chunks/Sequence.kPz-JF-q.js";import"./chunks/Loop.bmxnTff3.js";import"./chunks/UserMedia.XqLXAXtE.js";import"./chunks/Subtract.6yvEFIfU.js";import"./chunks/OnePoleFilter.5ASB6TIv.js";import"./chunks/BitCrusher.Qqt3OxKC.js";import"./chunks/Filter.CUstuK5R.js";import"./chunks/AutoPanner.02Sltg0b.js";import"./chunks/Scale.nioafpJK.js";import"./chunks/PingPongDelay.a3-runAV.js";import"./chunks/MonoSynth.pp_JS1sF.js";import"./chunks/index._4u9I4xi.js";const z={key:1,class:"flex flex-col gap-6 p-2"},D={class:"flex flex-wrap p-2 gap-4"},G={__name:"StringSynth",setup(P){C(()=>S.state.midi=!1),M(()=>S.state.midi=!0);const{midi:y}=U(),d={"string:volume":{value:.8,min:0,max:1,step:.01},"string:smooth":{value:.8,min:1e-4,max:.1,step:.001,fixed:3},"string:feedback":{value:.995,min:.9,max:.9999,step:.001,fixed:3}},h={"string:trigger":{value:0,min:0,max:1,step:1,nostore:!0},"string:midi":{value:42,min:1,max:127,step:1,nostore:!0},"string:velocity":{value:0,min:1,max:127,step:1,nostore:!0}},{audio:s,render:k}=F(),{controls:r,cv:c}=$(d,"string"),{controls:u,cv:g}=$(h,"string-midi");return V(()=>y.note,e=>{u["string:trigger"]=e.velocity>0?1:0,u["string:midi"]=e==null?void 0:e.number,u["string:velocity"]=(e==null?void 0:e.velocity)/127}),V(()=>s.initiated,()=>{if(!s.initiated)return;let e=t.mul(440,t.pow(2,t.div(t.sub(g["string:midi"],69),12))),n=t.mul(t.div(1,e),1e3),_=t.adsr(1e-4,.2,.01,.2,g["string:trigger"]),f=t.mul(_,t.noise(),g["string:velocity"]),x=t.lowpass(880,6,f),i=t.adsr(.005,.2,0,.1,1),o=t.mul(i,t.cycle(t.mul(1,e)),.2),v=t.delay({size:44100},t.smooth(t.tau2pole(c["string:smooth"]),t.ms2samps(n)),c["string:feedback"],x),w=t.add(v,o),A=t.tanh(w);const b=t.mul(c["string:volume"],A);s.layers.string={volume:1,signal:[b,b]}}),(e,n)=>{const _=B,f=T,x=K;return a(s).started?(m(),l("div",z,[p(_),N("div",D,[(m(),l(E,null,O(d,(i,o)=>p(f,{param:o.split(":")[1],modelValue:a(r)[o],"onUpdate:modelValue":v=>a(r)[o]=v,min:i.min,max:i.max,fixed:i.fixed,step:i.step},null,8,["param","modelValue","onUpdate:modelValue","min","max","fixed","step"])),64))]),p(x)])):(m(),l("button",{key:0,class:"p-40 text-2xl font-bold bg-light-900 dark-bg-dark-700",onClick:n[0]||(n[0]=i=>a(k)())},"START "))}}},Kt=JSON.parse('{"title":"Karplus–Strong synthesis","description":"Pratical KS synth","frontmatter":{"title":"Karplus–Strong synthesis","description":"Pratical KS synth","date":"2013-11-14T00:00:00.000Z","cover":"ksa.png"},"headers":[],"relativePath":"practice/synth/karplus-strong/index.md","filePath":"practice/synth/karplus-strong/index.md","lastUpdated":1705238977000}'),J={name:"practice/synth/karplus-strong/index.md"};function L(P,y,d,h,s,k){const r=G;return m(),l("div",null,[p(r)])}const Tt=q(J,[["render",L]]);export{Kt as __pageData,Tt as default};
