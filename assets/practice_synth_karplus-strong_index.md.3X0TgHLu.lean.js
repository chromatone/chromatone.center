import{_ as w}from"./chunks/MidiKeys.35JZhIs_.js";import{b0 as S,u as A,Z as B,$,a0 as t,a1 as F,J as U}from"./chunks/theme.DaHGH2Mp.js";import{o as C,O as M,d as V,k as r,e as l,f as d,a0 as m,g as N,F as O,h as E,_ as J}from"./chunks/framework.De1wmbud.js";const Z={key:1,class:"flex flex-col gap-6 p-2"},q={class:"flex flex-wrap p-2 gap-4"},z={__name:"StringSynth",setup(P){C(()=>S.state.midi=!1),M(()=>S.state.midi=!0);const{midi:h}=A(),c={"string:volume":{value:.8,min:0,max:1,step:.01},"string:smooth":{value:.8,min:1e-4,max:.1,step:.001,fixed:3},"string:feedback":{value:.995,min:.9,max:.9999,step:.001,fixed:3}},v={"string:trigger":{value:0,min:0,max:1,step:1,nostore:!0},"string:midi":{value:42,min:1,max:127,step:1,nostore:!0},"string:velocity":{value:0,min:1,max:127,step:1,nostore:!0}},{audio:n,render:k}=B(),{controls:a,cv:u}=$(c,"string"),{controls:p,cv:g}=$(v,"string-midi");return V(()=>h.note,e=>{p["string:trigger"]=e.velocity>0?1:0,p["string:midi"]=e==null?void 0:e.number,p["string:velocity"]=(e==null?void 0:e.velocity)/127}),V(()=>n.initiated,()=>{if(!n.initiated)return;let e=t.mul(440,t.pow(2,t.div(t.sub(g["string:midi"],69),12))),o=t.mul(t.div(1,e),1e3),_=t.adsr(1e-4,.2,.01,.2,g["string:trigger"]),f=t.mul(_,t.noise(),g["string:velocity"]),x=t.lowpass(880,6,f),s=t.adsr(.005,.2,0,.1,1),i=t.mul(s,t.cycle(t.mul(1,e)),.2),y=t.delay({size:44100},t.smooth(t.tau2pole(u["string:smooth"]),t.ms2samps(o)),u["string:feedback"],x),K=t.add(y,i),T=t.tanh(K);const b=t.mul(u["string:volume"],T);n.layers.string={volume:1,signal:[b,b]}}),(e,o)=>{const _=F,f=U,x=w;return r(n).started?(l(),d("div",Z,[m(_),N("div",q,[(l(),d(O,null,E(c,(s,i)=>m(f,{param:i.split(":")[1],modelValue:r(a)[i],"onUpdate:modelValue":y=>r(a)[i]=y,min:s.min,max:s.max,fixed:s.fixed,step:s.step},null,8,["param","modelValue","onUpdate:modelValue","min","max","fixed","step"])),64))]),m(x)])):(l(),d("button",{key:0,class:"p-40 text-2xl font-bold bg-light-900 dark-bg-dark-700",onClick:o[0]||(o[0]=s=>r(k)())},"START "))}}},H=JSON.parse('{"title":"Karplus–Strong synthesis","description":"Pratical KS synth","frontmatter":{"title":"Karplus–Strong synthesis","description":"Pratical KS synth","date":"2024-06-01T00:00:00.000Z","cover":"ksa.png","layout":"app"},"headers":[],"relativePath":"practice/synth/karplus-strong/index.md","filePath":"practice/synth/karplus-strong/index.md","lastUpdated":1720167572000}'),D={name:"practice/synth/karplus-strong/index.md"};function L(P,h,c,v,n,k){const a=z;return l(),d("div",null,[m(a)])}const I=J(D,[["render",L]]);export{H as __pageData,I as default};
